<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>598</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    598
                    <a href="597.html">prev</a>
                    <a href="599.html">next</a>
                    <a href="598_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    CyanogenMod/android_packages_apps_Trebuchet_d6518c4b9569ddf9a8d66e4e60dc77c18e0ecb05_src/com/android/launcher3/LauncherModel.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;d6518c4b9569ddf9a8d66e4e60dc77c18e0ecb05:src/com/android/launcher3/LauncherModel.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;d6518c4b9569ddf9a8d66e4e60dc77c18e0ecb05^1:src/com/android/launcher3/LauncherModel.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;d6518c4b9569ddf9a8d66e4e60dc77c18e0ecb05^2:src/com/android/launcher3/LauncherModel.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;9ee142497e1272697393867be0bccddd758aef35:src/com/android/launcher3/LauncherModel.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [j]], subset: [[b], [j]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  19 import android.app.SearchManager;                                                                        </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  20 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  21 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="-984325520036959693" onmouseenter="enter('-984325520036959693');" onmouseout="out('-984325520036959693');" style="">  22 import android.content.*;                                                                                </span>
<span class="-8524679231303418936" onmouseenter="enter('-8524679231303418936');" onmouseout="out('-8524679231303418936');" style="">  23 import android.content.Intent.ShortcutIconResource;                                                      </span>
<span class="-9183914406029598577" onmouseenter="enter('-9183914406029598577');" onmouseout="out('-9183914406029598577');" style="">  24 import android.content.pm.ActivityInfo;                                                                  </span>
<span class="-5891303348447418015" onmouseenter="enter('-5891303348447418015');" onmouseout="out('-5891303348447418015');" style="">  25 import android.content.pm.PackageInfo;                                                                   </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  26 import android.content.pm.PackageManager;                                                                </span>
<span class="-2097531830514422912" onmouseenter="enter('-2097531830514422912');" onmouseout="out('-2097531830514422912');" style="">  27 import android.content.pm.PackageManager.NameNotFoundException;                                          </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  28 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">  29 import android.content.res.Configuration;                                                                </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  30 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  31 import android.database.Cursor;                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  32 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  33 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  34 import android.net.Uri;                                                                                  </span>
<span class="-5861542142927414420" onmouseenter="enter('-5861542142927414420');" onmouseout="out('-5861542142927414420');" style="">  35 import android.os.Environment;                                                                           </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  36 import android.os.Handler;                                                                               </span>
<span class="5075624728668821268" onmouseenter="enter('5075624728668821268');" onmouseout="out('5075624728668821268');" style="">  37 import android.os.HandlerThread;                                                                         </span>
<span class="-3467845820974384276" onmouseenter="enter('-3467845820974384276');" onmouseout="out('-3467845820974384276');" style="">  38 import android.os.Parcelable;                                                                            </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  39 import android.os.Process;                                                                               </span>
<span class="2671599330745315048" onmouseenter="enter('2671599330745315048');" onmouseout="out('2671599330745315048');" style="">  40 import android.os.RemoteException;                                                                       </span>
<span class="2720528326800018495" onmouseenter="enter('2720528326800018495');" onmouseout="out('2720528326800018495');" style="">  41 import android.os.SystemClock;                                                                           </span>
<span class="9209739606564279934" onmouseenter="enter('9209739606564279934');" onmouseout="out('9209739606564279934');" style="">  42 import android.provider.BaseColumns;                                                                     </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  43 import android.text.TextUtils;                                                                           </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  44 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  45 import android.util.Pair;                                                                                </span>
<span  style="">  46                                                                                                          </span>
<span class="2480987830742885141" onmouseenter="enter('2480987830742885141');" onmouseout="out('2480987830742885141');" style="">  47 import com.android.launcher3.InstallWidgetReceiver.WidgetMimeTypeHandlerData;                            </span>
<span  style="">  48                                                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  49 import java.lang.ref.WeakReference;                                                                      </span>
<span class="7911689652558139170" onmouseenter="enter('7911689652558139170');" onmouseout="out('7911689652558139170');" style="">  50 import java.net.URISyntaxException;                                                                      </span>
<span class="-2082349054173013619" onmouseenter="enter('-2082349054173013619');" onmouseout="out('-2082349054173013619');" style="">  51 import java.text.Collator;                                                                               </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  52 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  53 import java.util.Arrays;                                                                                 </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  54 import java.util.Collection;                                                                             </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  55 import java.util.Collections;                                                                            </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  56 import java.util.Comparator;                                                                             </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  57 import java.util.HashMap;                                                                                </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  58 import java.util.HashSet;                                                                                </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  59 import java.util.Iterator;                                                                               </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  60 import java.util.List;                                                                                   </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  61 import java.util.Set;                                                                                    </span>
<span class="7536840878424124946" onmouseenter="enter('7536840878424124946');" onmouseout="out('7536840878424124946');" style="">  62 import java.util.TreeMap;                                                                                </span>
<span class="-2705241621224930031" onmouseenter="enter('-2705241621224930031');" onmouseout="out('-2705241621224930031');" style="">  63 import java.util.concurrent.atomic.AtomicBoolean;                                                        </span>
<span  style="">  64                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  65 /**                                                                                                      </span>
<span class="-4436404655378914540" onmouseenter="enter('-4436404655378914540');" onmouseout="out('-4436404655378914540');" style="">  66  * Maintains in-memory state of the Launcher. It is expected that there should be only one               </span>
<span class="-4273357065044936134" onmouseenter="enter('-4273357065044936134');" onmouseout="out('-4273357065044936134');" style="">  67  * LauncherModel object held in a static. Also provide APIs for updating the database state              </span>
<span class="-4398933382026523538" onmouseenter="enter('-4398933382026523538');" onmouseout="out('-4398933382026523538');" style="">  68  * for the Launcher.                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  69  */                                                                                                      </span>
<span class="-1237709953007126496" onmouseenter="enter('-1237709953007126496');" onmouseout="out('-1237709953007126496');" style="">  70 public class LauncherModel extends BroadcastReceiver {                                                   </span>
<span class="4817350607901898392" onmouseenter="enter('4817350607901898392');" onmouseout="out('4817350607901898392');" style="">  71     static final boolean DEBUG_LOADERS = false;                                                          </span>
<span class="7166020908404799948" onmouseenter="enter('7166020908404799948');" onmouseout="out('7166020908404799948');" style="">  72     static final String TAG = &quot;Launcher.Model&quot;;                                                          </span>
<span  style="">  73                                                                                                          </span>
<span class="-110249828783225872" onmouseenter="enter('-110249828783225872');" onmouseout="out('-110249828783225872');" style="">  74     // true = use a &quot;More Apps&quot; folder for non-workspace apps on upgrade                                 </span>
<span class="2480947255658609927" onmouseenter="enter('2480947255658609927');" onmouseout="out('2480947255658609927');" style="">  75     // false = strew non-workspace apps across the workspace on upgrade                                  </span>
<span class="-258177193926802879" onmouseenter="enter('-258177193926802879');" onmouseout="out('-258177193926802879');" style="">  76     public static final boolean UPGRADE_USE_MORE_APPS_FOLDER = false;                                    </span>
<span  style="">  77                                                                                                          </span>
<span class="2412961508740342038" onmouseenter="enter('2412961508740342038');" onmouseout="out('2412961508740342038');" style="">  78     public static final int LOADER_FLAG_NONE = 0;                                                        </span>
<span class="-3582007365816200905" onmouseenter="enter('-3582007365816200905');" onmouseout="out('-3582007365816200905');" style="">  79     public static final int LOADER_FLAG_CLEAR_WORKSPACE = 1 &lt;&lt; 0;                                        </span>
<span class="2276565639346953559" onmouseenter="enter('2276565639346953559');" onmouseout="out('2276565639346953559');" style="">  80     public static final int LOADER_FLAG_MIGRATE_SHORTCUTS = 1 &lt;&lt; 1;                                      </span>
<span  style="">  81                                                                                                          </span>
<span class="-4154694662050657236" onmouseenter="enter('-4154694662050657236');" onmouseout="out('-4154694662050657236');" style="">  82     private static final int ITEMS_CHUNK = 6; // batch size for the workspace icons                      </span>
<span class="-5674768092661618077" onmouseenter="enter('-5674768092661618077');" onmouseout="out('-5674768092661618077');" style="">  83     private static final long INVALID_SCREEN_ID = -1L;                                                   </span>
<span  style="">  84                                                                                                          </span>
<span class="-2106715535373822300" onmouseenter="enter('-2106715535373822300');" onmouseout="out('-2106715535373822300');" style="">  85     private final boolean mAppsCanBeOnRemoveableStorage;                                                 </span>
<span class="4731979794377415890" onmouseenter="enter('4731979794377415890');" onmouseout="out('4731979794377415890');" style="">  86     private final boolean mOldContentProviderExists;                                                     </span>
<span  style="">  87                                                                                                          </span>
<span class="3718007027314914184" onmouseenter="enter('3718007027314914184');" onmouseout="out('3718007027314914184');" style="">  88     private final LauncherAppState mApp;                                                                 </span>
<span class="-7373075918619999414" onmouseenter="enter('-7373075918619999414');" onmouseout="out('-7373075918619999414');" style="">  89     private final Object mLock = new Object();                                                           </span>
<span class="6556510276342102272" onmouseenter="enter('6556510276342102272');" onmouseout="out('6556510276342102272');" style="">  90     private DeferredHandler mHandler = new DeferredHandler();                                            </span>
<span class="-7862379002163915329" onmouseenter="enter('-7862379002163915329');" onmouseout="out('-7862379002163915329');" style="">  91     private LoaderTask mLoaderTask;                                                                      </span>
<span class="-3485037850110155122" onmouseenter="enter('-3485037850110155122');" onmouseout="out('-3485037850110155122');" style="">  92     private boolean mIsLoaderTaskRunning;                                                                </span>
<span class="7419034271767928159" onmouseenter="enter('7419034271767928159');" onmouseout="out('7419034271767928159');" style="">  93     private volatile boolean mFlushingWorkerThread;                                                      </span>
<span  style="">  94                                                                                                          </span>
<span class="7008336552769109798" onmouseenter="enter('7008336552769109798');" onmouseout="out('7008336552769109798');" style="">  95     // Specific runnable types that are run on the main thread deferred handler, this allows us to       </span>
<span class="-2862621427901202146" onmouseenter="enter('-2862621427901202146');" onmouseout="out('-2862621427901202146');" style="">  96     // clear all queued binding runnables when the Launcher activity is destroyed.                       </span>
<span class="2773124109533293313" onmouseenter="enter('2773124109533293313');" onmouseout="out('2773124109533293313');" style="">  97     private static final int MAIN_THREAD_NORMAL_RUNNABLE = 0;                                            </span>
<span class="3742092121997602406" onmouseenter="enter('3742092121997602406');" onmouseout="out('3742092121997602406');" style="">  98     private static final int MAIN_THREAD_BINDING_RUNNABLE = 1;                                           </span>
<span  style="">  99                                                                                                          </span>
<span  style=""> 100                                                                                                          </span>
<span class="1887278082230738056" onmouseenter="enter('1887278082230738056');" onmouseout="out('1887278082230738056');" style=""> 101     private static final HandlerThread sWorkerThread = new HandlerThread(&quot;launcher-loader&quot;);             </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style=""> 102     static {                                                                                             </span>
<span class="3211376391739143126" onmouseenter="enter('3211376391739143126');" onmouseout="out('3211376391739143126');" style=""> 103         sWorkerThread.start();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104     }                                                                                                    </span>
<span class="2264102646027284513" onmouseenter="enter('2264102646027284513');" onmouseout="out('2264102646027284513');" style=""> 105     private static final Handler sWorker = new Handler(sWorkerThread.getLooper());                       </span>
<span  style=""> 106                                                                                                          </span>
<span class="3535035959074757881" onmouseenter="enter('3535035959074757881');" onmouseout="out('3535035959074757881');" style=""> 107     // We start off with everything not loaded.  After that, we assume that                              </span>
<span class="2643799052940090988" onmouseenter="enter('2643799052940090988');" onmouseout="out('2643799052940090988');" style=""> 108     // our monitoring of the package manager provides all updates and we never                           </span>
<span class="-1838192547825761021" onmouseenter="enter('-1838192547825761021');" onmouseout="out('-1838192547825761021');" style=""> 109     // need to do a requery.  These are only ever touched from the loader thread.                        </span>
<span class="-8758726942217087840" onmouseenter="enter('-8758726942217087840');" onmouseout="out('-8758726942217087840');" style=""> 110     private boolean mWorkspaceLoaded;                                                                    </span>
<span class="-1682003936594375249" onmouseenter="enter('-1682003936594375249');" onmouseout="out('-1682003936594375249');" style=""> 111     private boolean mAllAppsLoaded;                                                                      </span>
<span  style=""> 112                                                                                                          </span>
<span class="4437381645098142172" onmouseenter="enter('4437381645098142172');" onmouseout="out('4437381645098142172');" style=""> 113     // When we are loading pages synchronously, we can&#x27;t just post the binding of items on the side      </span>
<span class="3512738277131757196" onmouseenter="enter('3512738277131757196');" onmouseout="out('3512738277131757196');" style=""> 114     // pages as this delays the rotation process.  Instead, we wait for a callback from the first        </span>
<span class="1019766179129744653" onmouseenter="enter('1019766179129744653');" onmouseout="out('1019766179129744653');" style=""> 115     // draw (in Workspace) to initiate the binding of the remaining side pages.  Any time we start       </span>
<span class="7373070490167110663" onmouseenter="enter('7373070490167110663');" onmouseout="out('7373070490167110663');" style=""> 116     // a normal load, we also clear this set of Runnables.                                               </span>
<span class="4843369785562403466" onmouseenter="enter('4843369785562403466');" onmouseout="out('4843369785562403466');" style=""> 117     static final ArrayList&lt;Runnable&gt; mDeferredBindRunnables = new ArrayList&lt;Runnable&gt;();                 </span>
<span  style=""> 118                                                                                                          </span>
<span class="5593309185710650450" onmouseenter="enter('5593309185710650450');" onmouseout="out('5593309185710650450');" style=""> 119     private WeakReference&lt;Callbacks&gt; mCallbacks;                                                         </span>
<span  style=""> 120                                                                                                          </span>
<span class="-4825633287564006425" onmouseenter="enter('-4825633287564006425');" onmouseout="out('-4825633287564006425');" style=""> 121     // &lt; only access in worker thread &gt;                                                                  </span>
<span class="-7893410053402242276" onmouseenter="enter('-7893410053402242276');" onmouseout="out('-7893410053402242276');" style=""> 122     AllAppsList mBgAllAppsList;                                                                          </span>
<span  style=""> 123                                                                                                          </span>
<span class="-4696524037009093502" onmouseenter="enter('-4696524037009093502');" onmouseout="out('-4696524037009093502');" style=""> 124     // The lock that must be acquired before referencing any static bg data structures.  Unlike          </span>
<span class="-2471307598696798987" onmouseenter="enter('-2471307598696798987');" onmouseout="out('-2471307598696798987');" style=""> 125     // other locks, this one can generally be held long-term because we never expect any of these        </span>
<span class="4310884307601416106" onmouseenter="enter('4310884307601416106');" onmouseout="out('4310884307601416106');" style=""> 126     // static data structures to be referenced outside of the worker thread except on the first          </span>
<span class="2260118264672300125" onmouseenter="enter('2260118264672300125');" onmouseout="out('2260118264672300125');" style=""> 127     // load after configuration change.                                                                  </span>
<span class="-8652324765300755578" onmouseenter="enter('-8652324765300755578');" onmouseout="out('-8652324765300755578');" style=""> 128     static final Object sBgLock = new Object();                                                          </span>
<span  style=""> 129                                                                                                          </span>
<span class="861828438456678075" onmouseenter="enter('861828438456678075');" onmouseout="out('861828438456678075');" style=""> 130     // sBgItemsIdMap maps *all* the ItemInfos (shortcuts, folders, and widgets) created by               </span>
<span class="3964854605559074701" onmouseenter="enter('3964854605559074701');" onmouseout="out('3964854605559074701');" style=""> 131     // LauncherModel to their ids                                                                        </span>
<span class="8713038185903703074" onmouseenter="enter('8713038185903703074');" onmouseout="out('8713038185903703074');" style=""> 132     static final HashMap&lt;Long, ItemInfo&gt; sBgItemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                  </span>
<span  style=""> 133                                                                                                          </span>
<span class="-4875305940507672487" onmouseenter="enter('-4875305940507672487');" onmouseout="out('-4875305940507672487');" style=""> 134     // sBgWorkspaceItems is passed to bindItems, which expects a list of all folders and shortcuts       </span>
<span class="5836863726682543660" onmouseenter="enter('5836863726682543660');" onmouseout="out('5836863726682543660');" style=""> 135     //       created by LauncherModel that are directly on the home screen (however, no widgets or       </span>
<span class="4941255916545901139" onmouseenter="enter('4941255916545901139');" onmouseout="out('4941255916545901139');" style=""> 136     //       shortcuts within folders).                                                                  </span>
<span class="4770535944422974992" onmouseenter="enter('4770535944422974992');" onmouseout="out('4770535944422974992');" style=""> 137     static final ArrayList&lt;ItemInfo&gt; sBgWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                      </span>
<span  style=""> 138                                                                                                          </span>
<span class="1795288911868581126" onmouseenter="enter('1795288911868581126');" onmouseout="out('1795288911868581126');" style=""> 139     // sBgAppWidgets is all LauncherAppWidgetInfo created by LauncherModel. Passed to bindAppWidget()    </span>
<span class="2792930227258213532" onmouseenter="enter('2792930227258213532');" onmouseout="out('2792930227258213532');" style=""> 140     static final ArrayList&lt;LauncherAppWidgetInfo&gt; sBgAppWidgets =                                        </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style=""> 141         new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                          </span>
<span  style=""> 142                                                                                                          </span>
<span class="8356003681152445460" onmouseenter="enter('8356003681152445460');" onmouseout="out('8356003681152445460');" style=""> 143     // sBgFolders is all FolderInfos created by LauncherModel. Passed to bindFolders()                   </span>
<span class="8065187755370300271" onmouseenter="enter('8065187755370300271');" onmouseout="out('8065187755370300271');" style=""> 144     static final HashMap&lt;Long, FolderInfo&gt; sBgFolders = new HashMap&lt;Long, FolderInfo&gt;();                 </span>
<span  style=""> 145                                                                                                          </span>
<span class="-6906235458204319724" onmouseenter="enter('-6906235458204319724');" onmouseout="out('-6906235458204319724');" style=""> 146     // sBgDbIconCache is the set of ItemInfos that need to have their icons updated in the database      </span>
<span class="-2979801471293813396" onmouseenter="enter('-2979801471293813396');" onmouseout="out('-2979801471293813396');" style=""> 147     static final HashMap&lt;Object, byte[]&gt; sBgDbIconCache = new HashMap&lt;Object, byte[]&gt;();                 </span>
<span  style=""> 148                                                                                                          </span>
<span class="8536603216028959604" onmouseenter="enter('8536603216028959604');" onmouseout="out('8536603216028959604');" style=""> 149     // sBgWorkspaceScreens is the ordered set of workspace screens.                                      </span>
<span class="-1373680151983800221" onmouseenter="enter('-1373680151983800221');" onmouseout="out('-1373680151983800221');" style=""> 150     static final ArrayList&lt;Long&gt; sBgWorkspaceScreens = new ArrayList&lt;Long&gt;();                            </span>
<span  style=""> 151                                                                                                          </span>
<span class="-5356624270019806590" onmouseenter="enter('-5356624270019806590');" onmouseout="out('-5356624270019806590');" style=""> 152     // &lt;/ only access in worker thread &gt;                                                                 </span>
<span  style=""> 153                                                                                                          </span>
<span class="-3446390922171092190" onmouseenter="enter('-3446390922171092190');" onmouseout="out('-3446390922171092190');" style=""> 154     private IconCache mIconCache;                                                                        </span>
<span class="7327140815403295852" onmouseenter="enter('7327140815403295852');" onmouseout="out('7327140815403295852');" style=""> 155     private Bitmap mDefaultIcon;                                                                         </span>
<span  style=""> 156                                                                                                          </span>
<span class="-1428370913368008087" onmouseenter="enter('-1428370913368008087');" onmouseout="out('-1428370913368008087');" style=""> 157     protected int mPreviousConfigMcc;                                                                    </span>
<span  style=""> 158                                                                                                          </span>
<span class="-3338718885622541528" onmouseenter="enter('-3338718885622541528');" onmouseout="out('-3338718885622541528');" style=""> 159     public interface Callbacks {                                                                         </span>
<span class="-4231961333511672310" onmouseenter="enter('-4231961333511672310');" onmouseout="out('-4231961333511672310');" style=""> 160         public boolean setLoadOnResume();                                                                </span>
<span class="803814078537529918" onmouseenter="enter('803814078537529918');" onmouseout="out('803814078537529918');" style=""> 161         public int getCurrentWorkspaceScreen();                                                          </span>
<span class="9018975241375557324" onmouseenter="enter('9018975241375557324');" onmouseout="out('9018975241375557324');" style=""> 162         public void startBinding();                                                                      </span>
<span class="3160017311795321748" onmouseenter="enter('3160017311795321748');" onmouseout="out('3160017311795321748');" style=""> 163         public void bindItems(ArrayList&lt;ItemInfo&gt; shortcuts, int start, int end,                         </span>
<span class="2581406714293150955" onmouseenter="enter('2581406714293150955');" onmouseout="out('2581406714293150955');" style=""> 164                               boolean forceAnimateIcons);                                                </span>
<span class="5464078408309929972" onmouseenter="enter('5464078408309929972');" onmouseout="out('5464078408309929972');" style=""> 165         public void bindScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                       </span>
<span class="8828153861812868297" onmouseenter="enter('8828153861812868297');" onmouseout="out('8828153861812868297');" style=""> 166         public void bindAddScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                    </span>
<span class="6163649300164694862" onmouseenter="enter('6163649300164694862');" onmouseout="out('6163649300164694862');" style=""> 167         public void bindFolders(HashMap&lt;Long,FolderInfo&gt; folders);                                       </span>
<span class="-3241982460320043016" onmouseenter="enter('-3241982460320043016');" onmouseout="out('-3241982460320043016');" style=""> 168         public void finishBindingItems(boolean upgradePath);                                             </span>
<span class="-1509675786278068914" onmouseenter="enter('-1509675786278068914');" onmouseout="out('-1509675786278068914');" style=""> 169         public void bindAppWidget(LauncherAppWidgetInfo info);                                           </span>
<span class="-8847143600952784869" onmouseenter="enter('-8847143600952784869');" onmouseout="out('-8847143600952784869');" style=""> 170         public void bindAllApplications(ArrayList&lt;AppInfo&gt; apps);                                        </span>
<span class="1774766681438121710" onmouseenter="enter('1774766681438121710');" onmouseout="out('1774766681438121710');" style=""> 171         public void bindAppsAdded(ArrayList&lt;Long&gt; newScreens,                                            </span>
<span class="-4634129325608240116" onmouseenter="enter('-4634129325608240116');" onmouseout="out('-4634129325608240116');" style=""> 172                                   ArrayList&lt;ItemInfo&gt; addNotAnimated,                                    </span>
<span class="-7991947031099209517" onmouseenter="enter('-7991947031099209517');" onmouseout="out('-7991947031099209517');" style=""> 173                                   ArrayList&lt;ItemInfo&gt; addAnimated,                                       </span>
<span class="7647862954797634111" onmouseenter="enter('7647862954797634111');" onmouseout="out('7647862954797634111');" style=""> 174                                   ArrayList&lt;AppInfo&gt; addedApps);                                         </span>
<span class="4809991796097108143" onmouseenter="enter('4809991796097108143');" onmouseout="out('4809991796097108143');" style=""> 175         public void bindAppsUpdated(ArrayList&lt;AppInfo&gt; apps);                                            </span>
<span class="-3322135261875169793" onmouseenter="enter('-3322135261875169793');" onmouseout="out('-3322135261875169793');" style=""> 176         public void bindComponentsRemoved(ArrayList&lt;String&gt; packageNames,                                </span>
<span class="-4070092502400219459" onmouseenter="enter('-4070092502400219459');" onmouseout="out('-4070092502400219459');" style=""> 177                         ArrayList&lt;AppInfo&gt; appInfos);                                                    </span>
<span class="-5054203298075540925" onmouseenter="enter('-5054203298075540925');" onmouseout="out('-5054203298075540925');" style=""> 178         public void bindPackagesUpdated(ArrayList&lt;Object&gt; widgetsAndShortcuts);                          </span>
<span class="7466294501708892199" onmouseenter="enter('7466294501708892199');" onmouseout="out('7466294501708892199');" style=""> 179         public void bindSearchablesChanged();                                                            </span>
<span class="-4863664490041232492" onmouseenter="enter('-4863664490041232492');" onmouseout="out('-4863664490041232492');" style=""> 180         public boolean isAllAppsButtonRank(int rank);                                                    </span>
<span class="-6469605959563265863" onmouseenter="enter('-6469605959563265863');" onmouseout="out('-6469605959563265863');" style=""> 181         public void onPageBoundSynchronously(int page);                                                  </span>
<span class="2927470839806734779" onmouseenter="enter('2927470839806734779');" onmouseout="out('2927470839806734779');" style=""> 182         public void dumpLogsToLocalData();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183     }                                                                                                    </span>
<span  style=""> 184                                                                                                          </span>
<span class="6660553528201779332" onmouseenter="enter('6660553528201779332');" onmouseout="out('6660553528201779332');" style=""> 185     public interface ItemInfoFilter {                                                                    </span>
<span class="-4205302945183309423" onmouseenter="enter('-4205302945183309423');" onmouseout="out('-4205302945183309423');" style=""> 186         public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187     }                                                                                                    </span>
<span  style=""> 188                                                                                                          </span>
<span class="-7540253694606934273" onmouseenter="enter('-7540253694606934273');" onmouseout="out('-7540253694606934273');" style=""> 189     LauncherModel(LauncherAppState app, IconCache iconCache, AppFilter appFilter) {                      </span>
<span class="-3815285143453777974" onmouseenter="enter('-3815285143453777974');" onmouseout="out('-3815285143453777974');" style=""> 190         Context context = app.getContext();                                                              </span>
<span class="5049533599805126653" onmouseenter="enter('5049533599805126653');" onmouseout="out('5049533599805126653');" style=""> 191         ContentResolver contentResolver = context.getContentResolver();                                  </span>
<span  style=""> 192                                                                                                          </span>
<span class="1644001329477881511" onmouseenter="enter('1644001329477881511');" onmouseout="out('1644001329477881511');" style=""> 193         mAppsCanBeOnRemoveableStorage = Environment.isExternalStorageRemovable();                        </span>
<span class="953599912945541719" onmouseenter="enter('953599912945541719');" onmouseout="out('953599912945541719');" style=""> 194         mOldContentProviderExists = (contentResolver.acquireContentProviderClient(                       </span>
<span class="6680469959813031014" onmouseenter="enter('6680469959813031014');" onmouseout="out('6680469959813031014');" style=""> 195                 LauncherSettings.Favorites.OLD_CONTENT_URI) != null);                                    </span>
<span class="8987557410347250467" onmouseenter="enter('8987557410347250467');" onmouseout="out('8987557410347250467');" style=""> 196         mApp = app;                                                                                      </span>
<span class="-1240051748269974178" onmouseenter="enter('-1240051748269974178');" onmouseout="out('-1240051748269974178');" style=""> 197         mBgAllAppsList = new AllAppsList(iconCache, appFilter);                                          </span>
<span class="1920389422449187498" onmouseenter="enter('1920389422449187498');" onmouseout="out('1920389422449187498');" style=""> 198         mIconCache = iconCache;                                                                          </span>
<span  style=""> 199                                                                                                          </span>
<span class="3654972388535142593" onmouseenter="enter('3654972388535142593');" onmouseout="out('3654972388535142593');" style=""> 200         final Resources res = context.getResources();                                                    </span>
<span class="-4708036118337437843" onmouseenter="enter('-4708036118337437843');" onmouseout="out('-4708036118337437843');" style=""> 201         Configuration config = res.getConfiguration();                                                   </span>
<span class="-32775646941108504" onmouseenter="enter('-32775646941108504');" onmouseout="out('-32775646941108504');" style=""> 202         mPreviousConfigMcc = config.mcc;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203     }                                                                                                    </span>
<span  style=""> 204                                                                                                          </span>
<span class="7032781054018231449" onmouseenter="enter('7032781054018231449');" onmouseout="out('7032781054018231449');" style=""> 205     /** Runs the specified runnable immediately if called from the main thread, otherwise it is          </span>
<span class="7688515897456092220" onmouseenter="enter('7688515897456092220');" onmouseout="out('7688515897456092220');" style=""> 206      * posted on the main thread handler. */                                                             </span>
<span class="-3461925467760565643" onmouseenter="enter('-3461925467760565643');" onmouseout="out('-3461925467760565643');" style=""> 207     private void runOnMainThread(Runnable r) {                                                           </span>
<span class="-8277339055128647976" onmouseenter="enter('-8277339055128647976');" onmouseout="out('-8277339055128647976');" style=""> 208         runOnMainThread(r, 0);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209     }                                                                                                    </span>
<span class="2979979552252814736" onmouseenter="enter('2979979552252814736');" onmouseout="out('2979979552252814736');" style=""> 210     private void runOnMainThread(Runnable r, int type) {                                                 </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 211         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="-8713172384634047131" onmouseenter="enter('-8713172384634047131');" onmouseout="out('-8713172384634047131');" style=""> 212             // If we are on the worker thread, post onto the main handler                                </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 213             mHandler.post(r);                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 214         } else {                                                                                         </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 215             r.run();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217     }                                                                                                    </span>
<span  style=""> 218                                                                                                          </span>
<span class="3207003836565128" onmouseenter="enter('3207003836565128');" onmouseout="out('3207003836565128');" style=""> 219     /** Runs the specified runnable immediately if called from the worker thread, otherwise it is        </span>
<span class="-2756655390038865740" onmouseenter="enter('-2756655390038865740');" onmouseout="out('-2756655390038865740');" style=""> 220      * posted on the worker thread handler. */                                                           </span>
<span class="-6815764929820931194" onmouseenter="enter('-6815764929820931194');" onmouseout="out('-6815764929820931194');" style=""> 221     private static void runOnWorkerThread(Runnable r) {                                                  </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 222         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 223             r.run();                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 224         } else {                                                                                         </span>
<span class="4127612692606453253" onmouseenter="enter('4127612692606453253');" onmouseout="out('4127612692606453253');" style=""> 225             // If we are not on the worker thread, then post to the worker handler                       </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style=""> 226             sWorker.post(r);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228     }                                                                                                    </span>
<span  style=""> 229                                                                                                          </span>
<span class="-7044369129545244866" onmouseenter="enter('-7044369129545244866');" onmouseout="out('-7044369129545244866');" style=""> 230     boolean canMigrateFromOldLauncherDb(Launcher launcher) {                                             </span>
<span class="7588769537569950934" onmouseenter="enter('7588769537569950934');" onmouseout="out('7588769537569950934');" style=""> 231         return mOldContentProviderExists &amp;&amp; !launcher.isLauncherPreinstalled() ;                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232     }                                                                                                    </span>
<span  style=""> 233                                                                                                          </span>
<span class="7006856679254675514" onmouseenter="enter('7006856679254675514');" onmouseout="out('7006856679254675514');" style=""> 234     static boolean findNextAvailableIconSpaceInScreen(ArrayList&lt;ItemInfo&gt; items, int[] xy,               </span>
<span class="-6492711054324248109" onmouseenter="enter('-6492711054324248109');" onmouseout="out('-6492711054324248109');" style=""> 235                                  long screen) {                                                          </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 236         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style=""> 237         DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                    </span>
<span class="559481881935924132" onmouseenter="enter('559481881935924132');" onmouseout="out('559481881935924132');" style=""> 238         final int xCount = (int) grid.numColumns;                                                        </span>
<span class="-3430391683121642487" onmouseenter="enter('-3430391683121642487');" onmouseout="out('-3430391683121642487');" style=""> 239         final int yCount = (int) grid.numRows;                                                           </span>
<span class="9207855715228317472" onmouseenter="enter('9207855715228317472');" onmouseout="out('9207855715228317472');" style=""> 240         boolean[][] occupied = new boolean[xCount][yCount];                                              </span>
<span  style=""> 241                                                                                                          </span>
<span class="2963072137114824070" onmouseenter="enter('2963072137114824070');" onmouseout="out('2963072137114824070');" style=""> 242         int cellX, cellY, spanX, spanY;                                                                  </span>
<span class="5020765328610170980" onmouseenter="enter('5020765328610170980');" onmouseout="out('5020765328610170980');" style=""> 243         for (int i = 0; i &lt; items.size(); ++i) {                                                         </span>
<span class="3181415890192694055" onmouseenter="enter('3181415890192694055');" onmouseout="out('3181415890192694055');" style=""> 244             final ItemInfo item = items.get(i);                                                          </span>
<span class="-4074076028767186492" onmouseenter="enter('-4074076028767186492');" onmouseout="out('-4074076028767186492');" style=""> 245             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                        </span>
<span class="4879929299303230054" onmouseenter="enter('4879929299303230054');" onmouseout="out('4879929299303230054');" style=""> 246                 if (item.screenId == screen) {                                                           </span>
<span class="-5253640052908660766" onmouseenter="enter('-5253640052908660766');" onmouseout="out('-5253640052908660766');" style=""> 247                     cellX = item.cellX;                                                                  </span>
<span class="8289808867760126989" onmouseenter="enter('8289808867760126989');" onmouseout="out('8289808867760126989');" style=""> 248                     cellY = item.cellY;                                                                  </span>
<span class="-1153670204852401248" onmouseenter="enter('-1153670204852401248');" onmouseout="out('-1153670204852401248');" style=""> 249                     spanX = item.spanX;                                                                  </span>
<span class="-1841066671071348880" onmouseenter="enter('-1841066671071348880');" onmouseout="out('-1841066671071348880');" style=""> 250                     spanY = item.spanY;                                                                  </span>
<span class="3713894754787265371" onmouseenter="enter('3713894754787265371');" onmouseout="out('3713894754787265371');" style=""> 251                     for (int x = cellX; 0 &lt;= x &amp;&amp; x &lt; cellX + spanX &amp;&amp; x &lt; xCount; x++) {                </span>
<span class="1312990358377437379" onmouseenter="enter('1312990358377437379');" onmouseout="out('1312990358377437379');" style=""> 252                         for (int y = cellY; 0 &lt;= y &amp;&amp; y &lt; cellY + spanY &amp;&amp; y &lt; yCount; y++) {            </span>
<span class="-8702463444488690423" onmouseenter="enter('-8702463444488690423');" onmouseout="out('-8702463444488690423');" style=""> 253                             occupied[x][y] = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 258         }                                                                                                </span>
<span  style=""> 259                                                                                                          </span>
<span class="-8431133162249858978" onmouseenter="enter('-8431133162249858978');" onmouseout="out('-8431133162249858978');" style=""> 260         return CellLayout.findVacantCell(xy, 1, 1, xCount, yCount, occupied);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261     }                                                                                                    </span>
<span class="-6259456544478400180" onmouseenter="enter('-6259456544478400180');" onmouseout="out('-6259456544478400180');" style=""> 262     static Pair&lt;Long, int[]&gt; findNextAvailableIconSpace(Context context, String name,                    </span>
<span class="-5771883199866145387" onmouseenter="enter('-5771883199866145387');" onmouseout="out('-5771883199866145387');" style=""> 263                                                         Intent launchIntent,                             </span>
<span class="245504953411362786" onmouseenter="enter('245504953411362786');" onmouseout="out('245504953411362786');" style=""> 264                                                         int firstScreenIndex,                            </span>
<span class="-3030748495081078938" onmouseenter="enter('-3030748495081078938');" onmouseout="out('-3030748495081078938');" style=""> 265                                                         ArrayList&lt;Long&gt; workspaceScreens) {              </span>
<span class="721182088367487597" onmouseenter="enter('721182088367487597');" onmouseout="out('721182088367487597');" style=""> 266         // Lock on the app so that we don&#x27;t try and get the items while apps are being added             </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 267         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-2530158852228207709" onmouseenter="enter('-2530158852228207709');" onmouseout="out('-2530158852228207709');" style=""> 268         LauncherModel model = app.getModel();                                                            </span>
<span class="-7742650363035610838" onmouseenter="enter('-7742650363035610838');" onmouseout="out('-7742650363035610838');" style=""> 269         boolean found = false;                                                                           </span>
<span class="8915607661092661586" onmouseenter="enter('8915607661092661586');" onmouseout="out('8915607661092661586');" style=""> 270         synchronized (app) {                                                                             </span>
<span class="7297018345010768725" onmouseenter="enter('7297018345010768725');" onmouseout="out('7297018345010768725');" style=""> 271             if (sWorkerThread.getThreadId() != Process.myTid()) {                                        </span>
<span class="-8468687854737954991" onmouseenter="enter('-8468687854737954991');" onmouseout="out('-8468687854737954991');" style=""> 272                 // Flush the LauncherModel worker thread, so that if we just did another                 </span>
<span class="-8915737001643417667" onmouseenter="enter('-8915737001643417667');" onmouseout="out('-8915737001643417667');" style=""> 273                 // processInstallShortcut, we give it time for its shortcut to get added to the          </span>
<span class="2341850028976611589" onmouseenter="enter('2341850028976611589');" onmouseout="out('2341850028976611589');" style=""> 274                 // database (getItemsInLocalCoordinates reads the database)                              </span>
<span class="-3308163450517263024" onmouseenter="enter('-3308163450517263024');" onmouseout="out('-3308163450517263024');" style=""> 275                 model.flushWorkerThread();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276             }                                                                                            </span>
<span class="8797318797001481965" onmouseenter="enter('8797318797001481965');" onmouseout="out('8797318797001481965');" style=""> 277             final ArrayList&lt;ItemInfo&gt; items = LauncherModel.getItemsInLocalCoordinates(context);         </span>
<span  style=""> 278                                                                                                          </span>
<span class="2319873497820841755" onmouseenter="enter('2319873497820841755');" onmouseout="out('2319873497820841755');" style=""> 279             // Try adding to the workspace screens incrementally, starting at the default or center      </span>
<span class="1139467458780899300" onmouseenter="enter('1139467458780899300');" onmouseout="out('1139467458780899300');" style=""> 280             // screen and alternating between +1, -1, +2, -2, etc. (using ~ ceil(i/2f)*(-1)^(i-1))       </span>
<span class="8331999200789555153" onmouseenter="enter('8331999200789555153');" onmouseout="out('8331999200789555153');" style=""> 281             firstScreenIndex = Math.min(firstScreenIndex, workspaceScreens.size());                      </span>
<span class="-5057452471390749214" onmouseenter="enter('-5057452471390749214');" onmouseout="out('-5057452471390749214');" style=""> 282             int count = workspaceScreens.size();                                                         </span>
<span class="6323561107141122979" onmouseenter="enter('6323561107141122979');" onmouseout="out('6323561107141122979');" style=""> 283             for (int screen = firstScreenIndex; screen &lt; count &amp;&amp; !found; screen++) {                    </span>
<span class="-2680594161355971081" onmouseenter="enter('-2680594161355971081');" onmouseout="out('-2680594161355971081');" style=""> 284                 int[] tmpCoordinates = new int[2];                                                       </span>
<span class="7117247924377105749" onmouseenter="enter('7117247924377105749');" onmouseout="out('7117247924377105749');" style=""> 285                 if (findNextAvailableIconSpaceInScreen(items, tmpCoordinates,                            </span>
<span class="-6258224581011394116" onmouseenter="enter('-6258224581011394116');" onmouseout="out('-6258224581011394116');" style=""> 286                         workspaceScreens.get(screen))) {                                                 </span>
<span class="-4461607076234575183" onmouseenter="enter('-4461607076234575183');" onmouseout="out('-4461607076234575183');" style=""> 287                     // Update the Launcher db                                                            </span>
<span class="-6316225509374818886" onmouseenter="enter('-6316225509374818886');" onmouseout="out('-6316225509374818886');" style=""> 288                     return new Pair&lt;Long, int[]&gt;(workspaceScreens.get(screen), tmpCoordinates);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 292         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293     }                                                                                                    </span>
<span  style=""> 294                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 295 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-6660098263631534032" onmouseenter="enter('-6660098263631534032');" onmouseout="out('-6660098263631534032');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 296     public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps,      </span>
<span class="9200705866279837671" onmouseenter="enter('9200705866279837671');" onmouseout="out('9200705866279837671');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 297                                     final ArrayList&lt;AppInfo&gt; allAppsApps) {                              </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 298         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                     </span>
<span class="-5825036277829220629" onmouseenter="enter('-5825036277829220629');" onmouseout="out('-5825036277829220629');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 299         addAndBindAddedApps(context, workspaceApps, cb, allAppsApps);                                    </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 300 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="7557267594336804520" onmouseenter="enter('7557267594336804520');" onmouseout="out('7557267594336804520');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 301     public void addAppsToAllApps(final Context ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {              </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 302         final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 303                                                                                                          </span>
<span class="-3382977171164412937" onmouseenter="enter('-3382977171164412937');" onmouseout="out('-3382977171164412937');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 304         if (allAppsApps == null) {                                                                       </span>
<span class="6531664792630326104" onmouseenter="enter('6531664792630326104');" onmouseout="out('6531664792630326104');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 305             throw new RuntimeException(&quot;allAppsApps must not be null&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 306         }                                                                                                </span>
<span class="9083517779694379730" onmouseenter="enter('9083517779694379730');" onmouseout="out('9083517779694379730');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 307         if (allAppsApps.isEmpty()) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 308             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 309         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 310                                                                                                          </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 311         final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                           </span>
<span class="-1645043148265833418" onmouseenter="enter('-1645043148265833418');" onmouseout="out('-1645043148265833418');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 312         Iterator&lt;AppInfo&gt; iter = allAppsApps.iterator();                                                 </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 313         while (iter.hasNext()) {                                                                         </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 314             ItemInfo a = iter.next();                                                                    </span>
<span class="-1900793198524744852" onmouseenter="enter('-1900793198524744852');" onmouseout="out('-1900793198524744852');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 315             if (LauncherModel.appWasRestored(ctx, a.getIntent())) {                                      </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 316                 restoredAppsFinal.add((AppInfo) a);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 317             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 318         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 319                                                                                                          </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 320         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 321         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 322             public void run() {                                                                          </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 323                 runOnMainThread(new Runnable() {                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 324                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 325                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 326                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="2546703397119558662" onmouseenter="enter('2546703397119558662');" onmouseout="out('2546703397119558662');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 327                             callbacks.bindAppsAdded(null, null, null, allAppsApps);                      </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 328                             if (!restoredAppsFinal.isEmpty()) {                                          </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 329                                 callbacks.bindAppsUpdated(restoredAppsFinal);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 330                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 331                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 332                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 333                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 334             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 335         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 336         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 337     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 338                                                                                                          </span>
<span class="-1568395532324485066" onmouseenter="enter('-1568395532324485066');" onmouseout="out('-1568395532324485066');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 339     public void addAndBindAddedWorkspaceApps(final Context context,                                      </span>
<span class="-2077533935123746745" onmouseenter="enter('-2077533935123746745');" onmouseout="out('-2077533935123746745');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 340             final ArrayList&lt;ItemInfo&gt; workspaceApps) {                                                   </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 341         final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 342                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 343 =======                                                                                                  </span>
<span class="7557267594336804520" onmouseenter="enter('7557267594336804520');" onmouseout="out('7557267594336804520');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 344     public void addAppsToAllApps(final Context ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {              </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 345         final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                        </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 346                                                                                                          </span>
<span class="-3382977171164412937" onmouseenter="enter('-3382977171164412937');" onmouseout="out('-3382977171164412937');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 347         if (allAppsApps == null) {                                                                       </span>
<span class="6531664792630326104" onmouseenter="enter('6531664792630326104');" onmouseout="out('6531664792630326104');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 348             throw new RuntimeException(&quot;allAppsApps must not be null&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 349         }                                                                                                </span>
<span class="9083517779694379730" onmouseenter="enter('9083517779694379730');" onmouseout="out('9083517779694379730');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 350         if (allAppsApps.isEmpty()) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 351             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 352         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 353                                                                                                          </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 354         final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                           </span>
<span class="-1645043148265833418" onmouseenter="enter('-1645043148265833418');" onmouseout="out('-1645043148265833418');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 355         Iterator&lt;AppInfo&gt; iter = allAppsApps.iterator();                                                 </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 356         while (iter.hasNext()) {                                                                         </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 357             ItemInfo a = iter.next();                                                                    </span>
<span class="-1900793198524744852" onmouseenter="enter('-1900793198524744852');" onmouseout="out('-1900793198524744852');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 358             if (LauncherModel.appWasRestored(ctx, a.getIntent())) {                                      </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 359                 restoredAppsFinal.add((AppInfo) a);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 360             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 361         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 362                                                                                                          </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 363         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 364         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 365             public void run() {                                                                          </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 366                 runOnMainThread(new Runnable() {                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 367                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 368                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 369                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 370                             if (!restoredAppsFinal.isEmpty()) {                                          </span>
<span class="74801564058707670" onmouseenter="enter('74801564058707670');" onmouseout="out('74801564058707670');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 371                                 for (AppInfo info : restoredAppsFinal) {                                 </span>
<span class="5803126433316087462" onmouseenter="enter('5803126433316087462');" onmouseout="out('5803126433316087462');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 372                                     final Intent intent = info.getIntent();                              </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 373                                     if (intent != null) {                                                </span>
<span class="-1988411798343692534" onmouseenter="enter('-1988411798343692534');" onmouseout="out('-1988411798343692534');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 374                                         mIconCache.deletePreloadedIcon(intent.getComponent());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 375                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 376                                 }                                                                        </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 377                                 callbacks.bindAppsUpdated(restoredAppsFinal);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 378                             }                                                                            </span>
<span class="2546703397119558662" onmouseenter="enter('2546703397119558662');" onmouseout="out('2546703397119558662');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 379                             callbacks.bindAppsAdded(null, null, null, allAppsApps);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 380                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 381                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 382                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 383             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 384         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 385         runOnWorkerThread(r);                                                                            </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 386 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387     }                                                                                                    </span>
<span class="-6660098263631534032" onmouseenter="enter('-6660098263631534032');" onmouseout="out('-6660098263631534032');" style=""> 388     public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps,      </span>
<span class="-6487660545798143403" onmouseenter="enter('-6487660545798143403');" onmouseout="out('-6487660545798143403');" style=""> 389                                 final Callbacks callbacks, final ArrayList&lt;AppInfo&gt; allAppsApps) {       </span>
<span class="-1944739770126231100" onmouseenter="enter('-1944739770126231100');" onmouseout="out('-1944739770126231100');" style=""> 390         if (workspaceApps == null || allAppsApps == null) {                                              </span>
<span class="-5351072863300047246" onmouseenter="enter('-5351072863300047246');" onmouseout="out('-5351072863300047246');" style=""> 391             throw new RuntimeException(&quot;workspaceApps and allAppsApps must not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 392         }                                                                                                </span>
<span class="6140956863670038829" onmouseenter="enter('6140956863670038829');" onmouseout="out('6140956863670038829');" style=""> 393         if (workspaceApps.isEmpty() &amp;&amp; allAppsApps.isEmpty()) {                                          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 394             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 395         }                                                                                                </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 396         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 397         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 398             public void run() {                                                                          </span>
<span class="5854603691017442546" onmouseenter="enter('5854603691017442546');" onmouseout="out('5854603691017442546');" style=""> 399                 final ArrayList&lt;ItemInfo&gt; addedShortcutsFinal = new ArrayList&lt;ItemInfo&gt;();               </span>
<span class="4777543170844968619" onmouseenter="enter('4777543170844968619');" onmouseout="out('4777543170844968619');" style=""> 400                 final ArrayList&lt;Long&gt; addedWorkspaceScreensFinal = new ArrayList&lt;Long&gt;();                </span>
<span  style=""> 401                                                                                                          </span>
<span class="4915887978102159996" onmouseenter="enter('4915887978102159996');" onmouseout="out('4915887978102159996');" style=""> 402                 // Get the list of workspace screens.  We need to append to this list and                </span>
<span class="-2543969750120350255" onmouseenter="enter('-2543969750120350255');" onmouseout="out('-2543969750120350255');" style=""> 403                 // can not use sBgWorkspaceScreens because loadWorkspace() may not have been             </span>
<span class="-1621475725142003189" onmouseenter="enter('-1621475725142003189');" onmouseout="out('-1621475725142003189');" style=""> 404                 // called.                                                                               </span>
<span class="-3443356389434560072" onmouseenter="enter('-3443356389434560072');" onmouseout="out('-3443356389434560072');" style=""> 405                 ArrayList&lt;Long&gt; workspaceScreens = new ArrayList&lt;Long&gt;();                                </span>
<span class="-7213068701168456094" onmouseenter="enter('-7213068701168456094');" onmouseout="out('-7213068701168456094');" style=""> 406                 TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(context);                 </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style=""> 407                 for (Integer i : orderedScreens.keySet()) {                                              </span>
<span class="3611014469778353319" onmouseenter="enter('3611014469778353319');" onmouseout="out('3611014469778353319');" style=""> 408                     long screenId = orderedScreens.get(i);                                               </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 409                     workspaceScreens.add(screenId);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410                 }                                                                                        </span>
<span  style=""> 411                                                                                                          </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 412                 synchronized(sBgLock) {                                                                  </span>
<span class="8076980411968102032" onmouseenter="enter('8076980411968102032');" onmouseout="out('8076980411968102032');" style=""> 413                     Iterator&lt;ItemInfo&gt; iter = workspaceApps.iterator();                                  </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 414                     while (iter.hasNext()) {                                                             </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 415                         ItemInfo a = iter.next();                                                        </span>
<span class="5754535581277543167" onmouseenter="enter('5754535581277543167');" onmouseout="out('5754535581277543167');" style=""> 416                         final String name = a.title.toString();                                          </span>
<span class="586533724609175080" onmouseenter="enter('586533724609175080');" onmouseout="out('586533724609175080');" style=""> 417                         final Intent launchIntent = a.getIntent();                                       </span>
<span  style=""> 418                                                                                                          </span>
<span class="-3621515927242872869" onmouseenter="enter('-3621515927242872869');" onmouseout="out('-3621515927242872869');" style=""> 419                         // Short-circuit this logic if the icon exists somewhere on the workspace        </span>
<span class="-636823087841001444" onmouseenter="enter('-636823087841001444');" onmouseout="out('-636823087841001444');" style=""> 420                         if (LauncherModel.shortcutExists(context, name, launchIntent)) {                 </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 421                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422                         }                                                                                </span>
<span  style=""> 423                                                                                                          </span>
<span class="7211587366126774382" onmouseenter="enter('7211587366126774382');" onmouseout="out('7211587366126774382');" style=""> 424                         // Add this icon to the db, creating a new page if necessary.  If there          </span>
<span class="1191339950892304982" onmouseenter="enter('1191339950892304982');" onmouseout="out('1191339950892304982');" style=""> 425                         // is only the empty page then we just add items to the first page.              </span>
<span class="1496171924920860168" onmouseenter="enter('1496171924920860168');" onmouseout="out('1496171924920860168');" style=""> 426                         // Otherwise, we add them to the next pages.                                     </span>
<span class="-506120048723665625" onmouseenter="enter('-506120048723665625');" onmouseout="out('-506120048723665625');" style=""> 427                         int startSearchPageIndex = workspaceScreens.isEmpty() ? 0 : 1;                   </span>
<span class="89807873419961601" onmouseenter="enter('89807873419961601');" onmouseout="out('89807873419961601');" style=""> 428                         Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context,     </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 429                                 name, launchIntent, startSearchPageIndex, workspaceScreens);             </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 430                         if (coords == null) {                                                            </span>
<span class="-1977519011864878718" onmouseenter="enter('-1977519011864878718');" onmouseout="out('-1977519011864878718');" style=""> 431                             LauncherProvider lp = LauncherAppState.getLauncherProvider();                </span>
<span  style=""> 432                                                                                                          </span>
<span class="-6633238510673534076" onmouseenter="enter('-6633238510673534076');" onmouseout="out('-6633238510673534076');" style=""> 433                             // If we can&#x27;t find a valid position, then just add a new screen.            </span>
<span class="9059050260314553422" onmouseenter="enter('9059050260314553422');" onmouseout="out('9059050260314553422');" style=""> 434                             // This takes time so we need to re-queue the add until the new              </span>
<span class="-5280811079167182328" onmouseenter="enter('-5280811079167182328');" onmouseout="out('-5280811079167182328');" style=""> 435                             // page is added.  Create as many screens as necessary to satisfy            </span>
<span class="8455829478477151409" onmouseenter="enter('8455829478477151409');" onmouseout="out('8455829478477151409');" style=""> 436                             // the startSearchPageIndex.                                                 </span>
<span class="8487048175242917271" onmouseenter="enter('8487048175242917271');" onmouseout="out('8487048175242917271');" style=""> 437                             int numPagesToAdd = Math.max(1, startSearchPageIndex + 1 -                   </span>
<span class="-1324774811555943949" onmouseenter="enter('-1324774811555943949');" onmouseout="out('-1324774811555943949');" style=""> 438                                     workspaceScreens.size());                                            </span>
<span class="1483283720296841413" onmouseenter="enter('1483283720296841413');" onmouseout="out('1483283720296841413');" style=""> 439                             while (numPagesToAdd &gt; 0) {                                                  </span>
<span class="5474653119612683837" onmouseenter="enter('5474653119612683837');" onmouseout="out('5474653119612683837');" style=""> 440                                 long screenId = lp.generateNewScreenId();                                </span>
<span class="-5141234047937446124" onmouseenter="enter('-5141234047937446124');" onmouseout="out('-5141234047937446124');" style=""> 441                                 // Save the screen id for binding in the workspace                       </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 442                                 workspaceScreens.add(screenId);                                          </span>
<span class="-3696618646623922220" onmouseenter="enter('-3696618646623922220');" onmouseout="out('-3696618646623922220');" style=""> 443                                 addedWorkspaceScreensFinal.add(screenId);                                </span>
<span class="6351530934092402455" onmouseenter="enter('6351530934092402455');" onmouseout="out('6351530934092402455');" style=""> 444                                 numPagesToAdd--;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445                             }                                                                            </span>
<span  style=""> 446                                                                                                          </span>
<span class="3901243562383099159" onmouseenter="enter('3901243562383099159');" onmouseout="out('3901243562383099159');" style=""> 447                             // Find the coordinate again                                                 </span>
<span class="-3135847744636951602" onmouseenter="enter('-3135847744636951602');" onmouseout="out('-3135847744636951602');" style=""> 448                             coords = LauncherModel.findNextAvailableIconSpace(context,                   </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 449                                     name, launchIntent, startSearchPageIndex, workspaceScreens);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 450                         }                                                                                </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 451                         if (coords == null) {                                                            </span>
<span class="-5449977300326458327" onmouseenter="enter('-5449977300326458327');" onmouseout="out('-5449977300326458327');" style=""> 452                             throw new RuntimeException(&quot;Coordinates should not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453                         }                                                                                </span>
<span  style=""> 454                                                                                                          </span>
<span class="2174473495010763804" onmouseenter="enter('2174473495010763804');" onmouseout="out('2174473495010763804');" style=""> 455                         ShortcutInfo shortcutInfo;                                                       </span>
<span class="3426516810566896093" onmouseenter="enter('3426516810566896093');" onmouseout="out('3426516810566896093');" style=""> 456                         if (a instanceof ShortcutInfo) {                                                 </span>
<span class="-5249556100657982245" onmouseenter="enter('-5249556100657982245');" onmouseout="out('-5249556100657982245');" style=""> 457                             shortcutInfo = (ShortcutInfo) a;                                             </span>
<span class="-6332708218117638716" onmouseenter="enter('-6332708218117638716');" onmouseout="out('-6332708218117638716');" style=""> 458                         } else if (a instanceof AppInfo) {                                               </span>
<span class="1865505886056520689" onmouseenter="enter('1865505886056520689');" onmouseout="out('1865505886056520689');" style=""> 459                             shortcutInfo = ((AppInfo) a).makeShortcut();                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 460                         } else {                                                                         </span>
<span class="-2299195794588473913" onmouseenter="enter('-2299195794588473913');" onmouseout="out('-2299195794588473913');" style=""> 461                             throw new RuntimeException(&quot;Unexpected info type&quot;);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462                         }                                                                                </span>
<span  style=""> 463                                                                                                          </span>
<span class="-2461182371641304570" onmouseenter="enter('-2461182371641304570');" onmouseout="out('-2461182371641304570');" style=""> 464                         // Add the shortcut to the db                                                    </span>
<span class="-7320352620243561318" onmouseenter="enter('-7320352620243561318');" onmouseout="out('-7320352620243561318');" style=""> 465                         addItemToDatabase(context, shortcutInfo,                                         </span>
<span class="-99165044777853060" onmouseenter="enter('-99165044777853060');" onmouseout="out('-99165044777853060');" style=""> 466                                 LauncherSettings.Favorites.CONTAINER_DESKTOP,                            </span>
<span class="-5434732926326446745" onmouseenter="enter('-5434732926326446745');" onmouseout="out('-5434732926326446745');" style=""> 467                                 coords.first, coords.second[0], coords.second[1], false);                </span>
<span class="-9035556179028036770" onmouseenter="enter('-9035556179028036770');" onmouseout="out('-9035556179028036770');" style=""> 468                         // Save the ShortcutInfo for binding in the workspace                            </span>
<span class="-7926664864188687285" onmouseenter="enter('-7926664864188687285');" onmouseout="out('-7926664864188687285');" style=""> 469                         addedShortcutsFinal.add(shortcutInfo);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 470                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 471                 }                                                                                        </span>
<span  style=""> 472                                                                                                          </span>
<span class="-4345643046227374009" onmouseenter="enter('-4345643046227374009');" onmouseout="out('-4345643046227374009');" style=""> 473                 // Update the workspace screens                                                          </span>
<span class="-8595972794596504077" onmouseenter="enter('-8595972794596504077');" onmouseout="out('-8595972794596504077');" style=""> 474                 updateWorkspaceScreenOrder(context, workspaceScreens);                                   </span>
<span  style=""> 475                                                                                                          </span>
<span class="6328421283494006334" onmouseenter="enter('6328421283494006334');" onmouseout="out('6328421283494006334');" style=""> 476                 if (!addedShortcutsFinal.isEmpty() || !allAppsApps.isEmpty()) {                          </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 477                     runOnMainThread(new Runnable() {                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 478                         public void run() {                                                              </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style=""> 479                             Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                 </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style=""> 480                             if (callbacks == cb &amp;&amp; cb != null) {                                         </span>
<span class="-1019372697145415139" onmouseenter="enter('-1019372697145415139');" onmouseout="out('-1019372697145415139');" style=""> 481                                 final ArrayList&lt;ItemInfo&gt; addAnimated = new ArrayList&lt;ItemInfo&gt;();       </span>
<span class="2118444153049166132" onmouseenter="enter('2118444153049166132');" onmouseout="out('2118444153049166132');" style=""> 482                                 final ArrayList&lt;ItemInfo&gt; addNotAnimated = new ArrayList&lt;ItemInfo&gt;();    </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 483                                 if (!addedShortcutsFinal.isEmpty()) {                                    </span>
<span class="-7025153910539821495" onmouseenter="enter('-7025153910539821495');" onmouseout="out('-7025153910539821495');" style=""><abbr title=" 484                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - 1);"> 484                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - </abbr></span>
<span class="2594218988288672349" onmouseenter="enter('2594218988288672349');" onmouseout="out('2594218988288672349');" style=""> 485                                     long lastScreenId = info.screenId;                                   </span>
<span class="-1990558815210533549" onmouseenter="enter('-1990558815210533549');" onmouseout="out('-1990558815210533549');" style=""> 486                                     for (ItemInfo i : addedShortcutsFinal) {                             </span>
<span class="493217455474284777" onmouseenter="enter('493217455474284777');" onmouseout="out('493217455474284777');" style=""> 487                                         if (i.screenId == lastScreenId) {                                </span>
<span class="-1039209268317612440" onmouseenter="enter('-1039209268317612440');" onmouseout="out('-1039209268317612440');" style=""> 488                                             addAnimated.add(i);                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 489                                         } else {                                                         </span>
<span class="-1143244035417449650" onmouseenter="enter('-1143244035417449650');" onmouseout="out('-1143244035417449650');" style=""> 490                                             addNotAnimated.add(i);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 492                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 493                                 }                                                                        </span>
<span class="6311741688571123959" onmouseenter="enter('6311741688571123959');" onmouseout="out('6311741688571123959');" style=""> 494                                 callbacks.bindAppsAdded(addedWorkspaceScreensFinal,                      </span>
<span class="-748486497380548647" onmouseenter="enter('-748486497380548647');" onmouseout="out('-748486497380548647');" style=""> 495                                         addNotAnimated, addAnimated, allAppsApps);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 496                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 497                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 498                     });                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 499                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 500             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 501         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 502         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 503     }                                                                                                    </span>
<span  style=""> 504                                                                                                          </span>
<span class="6011793905538310529" onmouseenter="enter('6011793905538310529');" onmouseout="out('6011793905538310529');" style=""> 505     public Bitmap getFallbackIcon() {                                                                    </span>
<span class="-671044890656554786" onmouseenter="enter('-671044890656554786');" onmouseout="out('-671044890656554786');" style=""> 506         if (mDefaultIcon == null) {                                                                      </span>
<span class="6379788101570603758" onmouseenter="enter('6379788101570603758');" onmouseout="out('6379788101570603758');" style=""> 507             final Context context = LauncherAppState.getInstance().getContext();                         </span>
<span class="-6730081374242205673" onmouseenter="enter('-6730081374242205673');" onmouseout="out('-6730081374242205673');" style=""> 508             mDefaultIcon = Utilities.createIconBitmap(                                                   </span>
<span class="-5707305257020956234" onmouseenter="enter('-5707305257020956234');" onmouseout="out('-5707305257020956234');" style=""> 509                     mIconCache.getFullResDefaultActivityIcon(), context);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 510         }                                                                                                </span>
<span class="1334413422936499318" onmouseenter="enter('1334413422936499318');" onmouseout="out('1334413422936499318');" style=""> 511         return Bitmap.createBitmap(mDefaultIcon);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 512     }                                                                                                    </span>
<span  style=""> 513                                                                                                          </span>
<span class="-2534375214054854784" onmouseenter="enter('-2534375214054854784');" onmouseout="out('-2534375214054854784');" style=""> 514     public void unbindItemInfosAndClearQueuedBindRunnables() {                                           </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 515         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="3234081821162543737" onmouseenter="enter('3234081821162543737');" onmouseout="out('3234081821162543737');" style=""> 516             throw new RuntimeException(&quot;Expected unbindLauncherItemInfos() to be called from the &quot; +     </span>
<span class="-2105866874193436772" onmouseenter="enter('-2105866874193436772');" onmouseout="out('-2105866874193436772');" style=""> 517                     &quot;main thread&quot;);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 518         }                                                                                                </span>
<span  style=""> 519                                                                                                          </span>
<span class="2920227315927506269" onmouseenter="enter('2920227315927506269');" onmouseout="out('2920227315927506269');" style=""> 520         // Clear any deferred bind runnables                                                             </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style=""> 521         mDeferredBindRunnables.clear();                                                                  </span>
<span class="8385691997542366613" onmouseenter="enter('8385691997542366613');" onmouseout="out('8385691997542366613');" style=""> 522         // Remove any queued bind runnables                                                              </span>
<span class="5230017654050637935" onmouseenter="enter('5230017654050637935');" onmouseout="out('5230017654050637935');" style=""> 523         mHandler.cancelAllRunnablesOfType(MAIN_THREAD_BINDING_RUNNABLE);                                 </span>
<span class="1897803433846165569" onmouseenter="enter('1897803433846165569');" onmouseout="out('1897803433846165569');" style=""> 524         // Unbind all the workspace items                                                                </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style=""> 525         unbindWorkspaceItemsOnMainThread();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 526     }                                                                                                    </span>
<span  style=""> 527                                                                                                          </span>
<span class="-8568492770799719308" onmouseenter="enter('-8568492770799719308');" onmouseout="out('-8568492770799719308');" style=""> 528     /** Unbinds all the sBgWorkspaceItems and sBgAppWidgets on the main thread */                        </span>
<span class="-7789072121131450728" onmouseenter="enter('-7789072121131450728');" onmouseout="out('-7789072121131450728');" style=""> 529     void unbindWorkspaceItemsOnMainThread() {                                                            </span>
<span class="7758625295624680992" onmouseenter="enter('7758625295624680992');" onmouseout="out('7758625295624680992');" style=""> 530         // Ensure that we don&#x27;t use the same workspace items data structure on the main thread           </span>
<span class="737195251801262528" onmouseenter="enter('737195251801262528');" onmouseout="out('737195251801262528');" style=""> 531         // by making a copy of workspace items first.                                                    </span>
<span class="-1398641255292585189" onmouseenter="enter('-1398641255292585189');" onmouseout="out('-1398641255292585189');" style=""> 532         final ArrayList&lt;ItemInfo&gt; tmpWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="-3814257207504512344" onmouseenter="enter('-3814257207504512344');" onmouseout="out('-3814257207504512344');" style=""> 533         final ArrayList&lt;ItemInfo&gt; tmpAppWidgets = new ArrayList&lt;ItemInfo&gt;();                             </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 534         synchronized (sBgLock) {                                                                         </span>
<span class="871827956477804030" onmouseenter="enter('871827956477804030');" onmouseout="out('871827956477804030');" style=""> 535             tmpWorkspaceItems.addAll(sBgWorkspaceItems);                                                 </span>
<span class="7232141846966659069" onmouseenter="enter('7232141846966659069');" onmouseout="out('7232141846966659069');" style=""> 536             tmpAppWidgets.addAll(sBgAppWidgets);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 537         }                                                                                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 538         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 539                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 540                 public void run() {                                                                      </span>
<span class="709208250683113430" onmouseenter="enter('709208250683113430');" onmouseout="out('709208250683113430');" style=""> 541                    for (ItemInfo item : tmpWorkspaceItems) {                                             </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 542                        item.unbind();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 543                    }                                                                                     </span>
<span class="5969585374646931804" onmouseenter="enter('5969585374646931804');" onmouseout="out('5969585374646931804');" style=""> 544                    for (ItemInfo item : tmpAppWidgets) {                                                 </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 545                        item.unbind();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 546                    }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 547                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 548             };                                                                                           </span>
<span class="7651423128405913164" onmouseenter="enter('7651423128405913164');" onmouseout="out('7651423128405913164');" style=""> 549         runOnMainThread(r);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 550     }                                                                                                    </span>
<span  style=""> 551                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 552     /**                                                                                                  </span>
<span class="1848609696039738732" onmouseenter="enter('1848609696039738732');" onmouseout="out('1848609696039738732');" style=""> 553      * Adds an item to the DB if it was not created previously, or move it to a new                      </span>
<span class="-5676820686470662639" onmouseenter="enter('-5676820686470662639');" onmouseout="out('-5676820686470662639');" style=""> 554      * &lt;container, screen, cellX, cellY&gt;                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 555      */                                                                                                  </span>
<span class="-51543303805672089" onmouseenter="enter('-51543303805672089');" onmouseout="out('-51543303805672089');" style=""> 556     static void addOrMoveItemInDatabase(Context context, ItemInfo item, long container,                  </span>
<span class="-5245876562794627197" onmouseenter="enter('-5245876562794627197');" onmouseout="out('-5245876562794627197');" style=""> 557             long screenId, int cellX, int cellY) {                                                       </span>
<span class="32392699487480265" onmouseenter="enter('32392699487480265');" onmouseout="out('32392699487480265');" style=""> 558         if (item.container == ItemInfo.NO_ID) {                                                          </span>
<span class="4419434731301535819" onmouseenter="enter('4419434731301535819');" onmouseout="out('4419434731301535819');" style=""> 559             // From all apps                                                                             </span>
<span class="-8263439540868073092" onmouseenter="enter('-8263439540868073092');" onmouseout="out('-8263439540868073092');" style=""> 560             addItemToDatabase(context, item, container, screenId, cellX, cellY, false);                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 561         } else {                                                                                         </span>
<span class="-7142861896488381117" onmouseenter="enter('-7142861896488381117');" onmouseout="out('-7142861896488381117');" style=""> 562             // From somewhere else                                                                       </span>
<span class="8117171250701950869" onmouseenter="enter('8117171250701950869');" onmouseout="out('8117171250701950869');" style=""> 563             moveItemInDatabase(context, item, container, screenId, cellX, cellY);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 564         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 565     }                                                                                                    </span>
<span  style=""> 566                                                                                                          </span>
<span class="4702100753708951937" onmouseenter="enter('4702100753708951937');" onmouseout="out('4702100753708951937');" style=""> 567     static void checkItemInfoLocked(                                                                     </span>
<span class="5364875648309494693" onmouseenter="enter('5364875648309494693');" onmouseout="out('5364875648309494693');" style=""> 568             final long itemId, final ItemInfo item, StackTraceElement[] stackTrace) {                    </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 569         ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                  </span>
<span class="2193901808277988725" onmouseenter="enter('2193901808277988725');" onmouseout="out('2193901808277988725');" style=""> 570         if (modelItem != null &amp;&amp; item != modelItem) {                                                    </span>
<span class="-6911492637937320821" onmouseenter="enter('-6911492637937320821');" onmouseout="out('-6911492637937320821');" style=""> 571             // check all the data is consistent                                                          </span>
<span class="3167281191986023088" onmouseenter="enter('3167281191986023088');" onmouseout="out('3167281191986023088');" style=""> 572             if (modelItem instanceof ShortcutInfo &amp;&amp; item instanceof ShortcutInfo) {                     </span>
<span class="-1653864946297504770" onmouseenter="enter('-1653864946297504770');" onmouseout="out('-1653864946297504770');" style=""> 573                 ShortcutInfo modelShortcut = (ShortcutInfo) modelItem;                                   </span>
<span class="-8536587564734321572" onmouseenter="enter('-8536587564734321572');" onmouseout="out('-8536587564734321572');" style=""> 574                 ShortcutInfo shortcut = (ShortcutInfo) item;                                             </span>
<span class="-7217994585765985559" onmouseenter="enter('-7217994585765985559');" onmouseout="out('-7217994585765985559');" style=""> 575                 if (modelShortcut.title.toString().equals(shortcut.title.toString()) &amp;&amp;                  </span>
<span class="7021740932722535577" onmouseenter="enter('7021740932722535577');" onmouseout="out('7021740932722535577');" style=""> 576                         modelShortcut.intent.filterEquals(shortcut.intent) &amp;&amp;                            </span>
<span class="4925161259592804600" onmouseenter="enter('4925161259592804600');" onmouseout="out('4925161259592804600');" style=""> 577                         modelShortcut.id == shortcut.id &amp;&amp;                                               </span>
<span class="-1606801806764943644" onmouseenter="enter('-1606801806764943644');" onmouseout="out('-1606801806764943644');" style=""> 578                         modelShortcut.itemType == shortcut.itemType &amp;&amp;                                   </span>
<span class="-380653198024077357" onmouseenter="enter('-380653198024077357');" onmouseout="out('-380653198024077357');" style=""> 579                         modelShortcut.container == shortcut.container &amp;&amp;                                 </span>
<span class="2095015237441904975" onmouseenter="enter('2095015237441904975');" onmouseout="out('2095015237441904975');" style=""> 580                         modelShortcut.screenId == shortcut.screenId &amp;&amp;                                   </span>
<span class="8356312788511485655" onmouseenter="enter('8356312788511485655');" onmouseout="out('8356312788511485655');" style=""> 581                         modelShortcut.cellX == shortcut.cellX &amp;&amp;                                         </span>
<span class="-8074804825298555262" onmouseenter="enter('-8074804825298555262');" onmouseout="out('-8074804825298555262');" style=""> 582                         modelShortcut.cellY == shortcut.cellY &amp;&amp;                                         </span>
<span class="-7194734667210277438" onmouseenter="enter('-7194734667210277438');" onmouseout="out('-7194734667210277438');" style=""> 583                         modelShortcut.spanX == shortcut.spanX &amp;&amp;                                         </span>
<span class="-7990526823057792041" onmouseenter="enter('-7990526823057792041');" onmouseout="out('-7990526823057792041');" style=""> 584                         modelShortcut.spanY == shortcut.spanY &amp;&amp;                                         </span>
<span class="1791877648440959041" onmouseenter="enter('1791877648440959041');" onmouseout="out('1791877648440959041');" style=""> 585                         ((modelShortcut.dropPos == null &amp;&amp; shortcut.dropPos == null) ||                  </span>
<span class="-2385997644828375020" onmouseenter="enter('-2385997644828375020');" onmouseout="out('-2385997644828375020');" style=""> 586                         (modelShortcut.dropPos != null &amp;&amp;                                                </span>
<span class="8673154118418480877" onmouseenter="enter('8673154118418480877');" onmouseout="out('8673154118418480877');" style=""> 587                                 shortcut.dropPos != null &amp;&amp;                                              </span>
<span class="1110472284758384589" onmouseenter="enter('1110472284758384589');" onmouseout="out('1110472284758384589');" style=""> 588                                 modelShortcut.dropPos[0] == shortcut.dropPos[0] &amp;&amp;                       </span>
<span class="8614743944867507225" onmouseenter="enter('8614743944867507225');" onmouseout="out('8614743944867507225');" style=""> 589                         modelShortcut.dropPos[1] == shortcut.dropPos[1]))) {                             </span>
<span class="-1826978062251207152" onmouseenter="enter('-1826978062251207152');" onmouseout="out('-1826978062251207152');" style=""> 590                     // For all intents and purposes, this is the same object                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 591                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 592                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 593             }                                                                                            </span>
<span  style=""> 594                                                                                                          </span>
<span class="-2302662152798801960" onmouseenter="enter('-2302662152798801960');" onmouseout="out('-2302662152798801960');" style=""> 595             // the modelItem needs to match up perfectly with item if our model is                       </span>
<span class="2528116919227347475" onmouseenter="enter('2528116919227347475');" onmouseout="out('2528116919227347475');" style=""> 596             // to be consistent with the database-- for now, just require                                </span>
<span class="-7120210409264493846" onmouseenter="enter('-7120210409264493846');" onmouseout="out('-7120210409264493846');" style=""> 597             // modelItem == item or the equality check above                                             </span>
<span class="-3667577266304831846" onmouseenter="enter('-3667577266304831846');" onmouseout="out('-3667577266304831846');" style=""> 598             String msg = &quot;item: &quot; + ((item != null) ? item.toString() : &quot;null&quot;) +                        </span>
<span class="-2910805653187511799" onmouseenter="enter('-2910805653187511799');" onmouseout="out('-2910805653187511799');" style=""> 599                     &quot;modelItem: &quot; +                                                                      </span>
<span class="-7298566834322238485" onmouseenter="enter('-7298566834322238485');" onmouseout="out('-7298566834322238485');" style=""> 600                     ((modelItem != null) ? modelItem.toString() : &quot;null&quot;) +                              </span>
<span class="-1970027720063810255" onmouseenter="enter('-1970027720063810255');" onmouseout="out('-1970027720063810255');" style=""> 601                     &quot;Error: ItemInfo passed to checkItemInfo doesn&#x27;t match original&quot;;                    </span>
<span class="889449931745068267" onmouseenter="enter('889449931745068267');" onmouseout="out('889449931745068267');" style=""> 602             RuntimeException e = new RuntimeException(msg);                                              </span>
<span class="746494671138810715" onmouseenter="enter('746494671138810715');" onmouseout="out('746494671138810715');" style=""> 603             if (stackTrace != null) {                                                                    </span>
<span class="6991917147302354492" onmouseenter="enter('6991917147302354492');" onmouseout="out('6991917147302354492');" style=""> 604                 e.setStackTrace(stackTrace);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 605             }                                                                                            </span>
<span class="-2532054300390783036" onmouseenter="enter('-2532054300390783036');" onmouseout="out('-2532054300390783036');" style=""> 606             throw e;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 607         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 608     }                                                                                                    </span>
<span  style=""> 609                                                                                                          </span>
<span class="8253262720993766341" onmouseenter="enter('8253262720993766341');" onmouseout="out('8253262720993766341');" style=""> 610     static void checkItemInfo(final ItemInfo item) {                                                     </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 611         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 612         final long itemId = item.id;                                                                     </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 613         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 614             public void run() {                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 615                 synchronized (sBgLock) {                                                                 </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 616                     checkItemInfoLocked(itemId, item, stackTrace);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 617                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 619         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 620         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 621     }                                                                                                    </span>
<span  style=""> 622                                                                                                          </span>
<span class="-7795546628976526290" onmouseenter="enter('-7795546628976526290');" onmouseout="out('-7795546628976526290');" style=""> 623     static void updateItemInDatabaseHelper(Context context, final ContentValues values,                  </span>
<span class="-8227938209854841132" onmouseenter="enter('-8227938209854841132');" onmouseout="out('-8227938209854841132');" style=""> 624             final ItemInfo item, final String callingFunction) {                                         </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 625         final long itemId = item.id;                                                                     </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 626         final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);                         </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 627         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style=""> 628                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 629         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 630         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 631             public void run() {                                                                          </span>
<span class="6508684228899883734" onmouseenter="enter('6508684228899883734');" onmouseout="out('6508684228899883734');" style=""> 632                 cr.update(uri, values, null, null);                                                      </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 633                 updateItemArrays(item, itemId, stackTrace);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 634             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 635         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 636         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 637     }                                                                                                    </span>
<span  style=""> 638                                                                                                          </span>
<span class="-5268011833856431518" onmouseenter="enter('-5268011833856431518');" onmouseout="out('-5268011833856431518');" style=""> 639     static void updateItemsInDatabaseHelper(Context context, final ArrayList&lt;ContentValues&gt; valuesList,  </span>
<span class="-6813896065968537303" onmouseenter="enter('-6813896065968537303');" onmouseout="out('-6813896065968537303');" style=""> 640             final ArrayList&lt;ItemInfo&gt; items, final String callingFunction) {                             </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 641         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style=""> 642                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 643         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 644         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 645             public void run() {                                                                          </span>
<span class="870344729843570934" onmouseenter="enter('870344729843570934');" onmouseout="out('870344729843570934');" style=""> 646                 ArrayList&lt;ContentProviderOperation&gt; ops =                                                </span>
<span class="9022468941674050374" onmouseenter="enter('9022468941674050374');" onmouseout="out('9022468941674050374');" style=""> 647                         new ArrayList&lt;ContentProviderOperation&gt;();                                       </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 648                 int count = items.size();                                                                </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 649                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 650                     ItemInfo item = items.get(i);                                                        </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 651                     final long itemId = item.id;                                                         </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 652                     final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);             </span>
<span class="-8860263448497272048" onmouseenter="enter('-8860263448497272048');" onmouseout="out('-8860263448497272048');" style=""> 653                     ContentValues values = valuesList.get(i);                                            </span>
<span  style=""> 654                                                                                                          </span>
<span class="2997765192602662390" onmouseenter="enter('2997765192602662390');" onmouseout="out('2997765192602662390');" style=""> 655                     ops.add(ContentProviderOperation.newUpdate(uri).withValues(values).build());         </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 656                     updateItemArrays(item, itemId, stackTrace);                                          </span>
<span  style=""> 657                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658                 }                                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 659                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style=""> 660                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 661                 } catch (Exception e) {                                                                  </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 662                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 663                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 664             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 665         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 666         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667     }                                                                                                    </span>
<span  style=""> 668                                                                                                          </span>
<span class="2082626234385770383" onmouseenter="enter('2082626234385770383');" onmouseout="out('2082626234385770383');" style=""> 669     static void updateItemArrays(ItemInfo item, long itemId, StackTraceElement[] stackTrace) {           </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 670         // Lock on mBgLock *after* the db operation                                                      </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 671         synchronized (sBgLock) {                                                                         </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 672             checkItemInfoLocked(itemId, item, stackTrace);                                               </span>
<span  style=""> 673                                                                                                          </span>
<span class="5861445851049755510" onmouseenter="enter('5861445851049755510');" onmouseout="out('5861445851049755510');" style=""> 674             if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                        </span>
<span class="-7006113140306734361" onmouseenter="enter('-7006113140306734361');" onmouseout="out('-7006113140306734361');" style=""> 675                     item.container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                    </span>
<span class="-6294566488312473300" onmouseenter="enter('-6294566488312473300');" onmouseout="out('-6294566488312473300');" style=""> 676                 // Item is in a folder, make sure this folder exists                                     </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 677                 if (!sBgFolders.containsKey(item.container)) {                                           </span>
<span class="9065703941205621353" onmouseenter="enter('9065703941205621353');" onmouseout="out('9065703941205621353');" style=""> 678                     // An items container is being set to a that of an item which is not in              </span>
<span class="-3172747387014066058" onmouseenter="enter('-3172747387014066058');" onmouseout="out('-3172747387014066058');" style=""> 679                     // the list of Folders.                                                              </span>
<span class="151828163632620756" onmouseenter="enter('151828163632620756');" onmouseout="out('151828163632620756');" style=""> 680                     String msg = &quot;item: &quot; + item + &quot; container being set to: &quot; +                         </span>
<span class="9080161357490611974" onmouseenter="enter('9080161357490611974');" onmouseout="out('9080161357490611974');" style=""> 681                             item.container + &quot;, not in the list of folders&quot;;                             </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 682                     Log.e(TAG, msg);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 683                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 684             }                                                                                            </span>
<span  style=""> 685                                                                                                          </span>
<span class="8378072337545652807" onmouseenter="enter('8378072337545652807');" onmouseout="out('8378072337545652807');" style=""> 686             // Items are added/removed from the corresponding FolderInfo elsewhere, such                 </span>
<span class="7844728369218635164" onmouseenter="enter('7844728369218635164');" onmouseout="out('7844728369218635164');" style=""> 687             // as in Workspace.onDrop. Here, we just add/remove them from the list of items              </span>
<span class="4553148780571708557" onmouseenter="enter('4553148780571708557');" onmouseout="out('4553148780571708557');" style=""> 688             // that are on the desktop, as appropriate                                                   </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 689             ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                              </span>
<span class="-8392915416586226921" onmouseenter="enter('-8392915416586226921');" onmouseout="out('-8392915416586226921');" style=""> 690             if (modelItem != null &amp;&amp;                                                                     </span>
<span class="3168075572498915363" onmouseenter="enter('3168075572498915363');" onmouseout="out('3168075572498915363');" style=""> 691                     (modelItem.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||              </span>
<span class="-2354507674725904195" onmouseenter="enter('-2354507674725904195');" onmouseout="out('-2354507674725904195');" style=""> 692                      modelItem.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {             </span>
<span class="-8474980351342559163" onmouseenter="enter('-8474980351342559163');" onmouseout="out('-8474980351342559163');" style=""> 693                 switch (modelItem.itemType) {                                                            </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style=""> 694                     case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                               </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style=""> 695                     case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                  </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 696                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                    </span>
<span class="-2945309969071223861" onmouseenter="enter('-2945309969071223861');" onmouseout="out('-2945309969071223861');" style=""> 697                         if (!sBgWorkspaceItems.contains(modelItem)) {                                    </span>
<span class="-5660475538824179031" onmouseenter="enter('-5660475538824179031');" onmouseout="out('-5660475538824179031');" style=""> 698                             sBgWorkspaceItems.add(modelItem);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699                         }                                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 700                         break;                                                                           </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 701                     default:                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 702                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 703                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 704             } else {                                                                                     </span>
<span class="-7939766627444392355" onmouseenter="enter('-7939766627444392355');" onmouseout="out('-7939766627444392355');" style=""> 705                 sBgWorkspaceItems.remove(modelItem);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 706             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 707         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 708     }                                                                                                    </span>
<span  style=""> 709                                                                                                          </span>
<span class="-4020360329970845372" onmouseenter="enter('-4020360329970845372');" onmouseout="out('-4020360329970845372');" style=""> 710     public void flushWorkerThread() {                                                                    </span>
<span class="2458440832416538563" onmouseenter="enter('2458440832416538563');" onmouseout="out('2458440832416538563');" style=""> 711         mFlushingWorkerThread = true;                                                                    </span>
<span class="2941590529192344100" onmouseenter="enter('2941590529192344100');" onmouseout="out('2941590529192344100');" style=""> 712         Runnable waiter = new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 713                 public void run() {                                                                      </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 714                     synchronized (this) {                                                                </span>
<span class="-1428047894310886643" onmouseenter="enter('-1428047894310886643');" onmouseout="out('-1428047894310886643');" style=""> 715                         notifyAll();                                                                     </span>
<span class="3926508156885202999" onmouseenter="enter('3926508156885202999');" onmouseout="out('3926508156885202999');" style=""> 716                         mFlushingWorkerThread = false;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 717                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 718                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 719             };                                                                                           </span>
<span  style=""> 720                                                                                                          </span>
<span class="-7483564469787643608" onmouseenter="enter('-7483564469787643608');" onmouseout="out('-7483564469787643608');" style=""> 721         synchronized(waiter) {                                                                           </span>
<span class="-8072658497280753067" onmouseenter="enter('-8072658497280753067');" onmouseout="out('-8072658497280753067');" style=""> 722             runOnWorkerThread(waiter);                                                                   </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style=""> 723             if (mLoaderTask != null) {                                                                   </span>
<span class="-756902833484627430" onmouseenter="enter('-756902833484627430');" onmouseout="out('-756902833484627430');" style=""> 724                 synchronized(mLoaderTask) {                                                              </span>
<span class="58891182273081261" onmouseenter="enter('58891182273081261');" onmouseout="out('58891182273081261');" style=""> 725                     mLoaderTask.notify();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 726                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 727             }                                                                                            </span>
<span class="4859668596787406566" onmouseenter="enter('4859668596787406566');" onmouseout="out('4859668596787406566');" style=""> 728             boolean success = false;                                                                     </span>
<span class="7536073198725464588" onmouseenter="enter('7536073198725464588');" onmouseout="out('7536073198725464588');" style=""> 729             while (!success) {                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 730                 try {                                                                                    </span>
<span class="8661527805225995774" onmouseenter="enter('8661527805225995774');" onmouseout="out('8661527805225995774');" style=""> 731                     waiter.wait();                                                                       </span>
<span class="-5965625035307022309" onmouseenter="enter('-5965625035307022309');" onmouseout="out('-5965625035307022309');" style=""> 732                     success = true;                                                                      </span>
<span class="-7528533024404460182" onmouseenter="enter('-7528533024404460182');" onmouseout="out('-7528533024404460182');" style=""> 733                 } catch (InterruptedException e) {                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 734                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 735             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 736         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 737     }                                                                                                    </span>
<span  style=""> 738                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 739     /**                                                                                                  </span>
<span class="6993284491606696239" onmouseenter="enter('6993284491606696239');" onmouseout="out('6993284491606696239');" style=""> 740      * Move an item in the DB to a new &lt;container, screen, cellX, cellY&gt;                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 741      */                                                                                                  </span>
<span class="4065343735615789149" onmouseenter="enter('4065343735615789149');" onmouseout="out('4065343735615789149');" style=""> 742     static void moveItemInDatabase(Context context, final ItemInfo item, final long container,           </span>
<span class="-6409391853534757752" onmouseenter="enter('-6409391853534757752');" onmouseout="out('-6409391853534757752');" style=""> 743             final long screenId, final int cellX, final int cellY) {                                     </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 744         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 745         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 746         item.cellY = cellY;                                                                              </span>
<span  style=""> 747                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 748         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 749         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 750         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 751                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 752             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 753         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 754             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 755         }                                                                                                </span>
<span  style=""> 756                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 757         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 758         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 759         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 760         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 761         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span  style=""> 762                                                                                                          </span>
<span class="-198415815572970699" onmouseenter="enter('-198415815572970699');" onmouseout="out('-198415815572970699');" style=""> 763         updateItemInDatabaseHelper(context, values, item, &quot;moveItemInDatabase&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 764     }                                                                                                    </span>
<span  style=""> 765                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 766     /**                                                                                                  </span>
<span class="-2318253408843035081" onmouseenter="enter('-2318253408843035081');" onmouseout="out('-2318253408843035081');" style=""> 767      * Move items in the DB to a new &lt;container, screen, cellX, cellY&gt;. We assume that the               </span>
<span class="9095568381627098065" onmouseenter="enter('9095568381627098065');" onmouseout="out('9095568381627098065');" style=""> 768      * cellX, cellY have already been updated on the ItemInfos.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 769      */                                                                                                  </span>
<span class="2993462226149949147" onmouseenter="enter('2993462226149949147');" onmouseout="out('2993462226149949147');" style=""> 770     static void moveItemsInDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items,                    </span>
<span class="4351605778470855925" onmouseenter="enter('4351605778470855925');" onmouseout="out('4351605778470855925');" style=""> 771             final long container, final int screen) {                                                    </span>
<span  style=""> 772                                                                                                          </span>
<span class="3335073963685886452" onmouseenter="enter('3335073963685886452');" onmouseout="out('3335073963685886452');" style=""> 773         ArrayList&lt;ContentValues&gt; contentValues = new ArrayList&lt;ContentValues&gt;();                         </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 774         int count = items.size();                                                                        </span>
<span  style=""> 775                                                                                                          </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 776         for (int i = 0; i &lt; count; i++) {                                                                </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 777             ItemInfo item = items.get(i);                                                                </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 778             item.container = container;                                                                  </span>
<span  style=""> 779                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 780             // We store hotseat items in canonical form which is this orientation invariant position     </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 781             // in the hotseat                                                                            </span>
<span class="6331311558654873539" onmouseenter="enter('6331311558654873539');" onmouseout="out('6331311558654873539');" style=""> 782             if (context instanceof Launcher &amp;&amp; screen &lt; 0 &amp;&amp;                                             </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 783                     container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                         </span>
<span class="-3476894176903330001" onmouseenter="enter('-3476894176903330001');" onmouseout="out('-3476894176903330001');" style=""> 784                 item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(item.cellX,          </span>
<span class="8891673712343428946" onmouseenter="enter('8891673712343428946');" onmouseout="out('8891673712343428946');" style=""> 785                         item.cellY);                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 786             } else {                                                                                     </span>
<span class="-4307617232085975705" onmouseenter="enter('-4307617232085975705');" onmouseout="out('-4307617232085975705');" style=""> 787                 item.screenId = screen;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 788             }                                                                                            </span>
<span  style=""> 789                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 790             final ContentValues values = new ContentValues();                                            </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 791             values.put(LauncherSettings.Favorites.CONTAINER, item.container);                            </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 792             values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                    </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 793             values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                    </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 794             values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                </span>
<span  style=""> 795                                                                                                          </span>
<span class="2833686190506555422" onmouseenter="enter('2833686190506555422');" onmouseout="out('2833686190506555422');" style=""> 796             contentValues.add(values);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 797         }                                                                                                </span>
<span class="-3017110074752693492" onmouseenter="enter('-3017110074752693492');" onmouseout="out('-3017110074752693492');" style=""> 798         updateItemsInDatabaseHelper(context, contentValues, items, &quot;moveItemInDatabase&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 799     }                                                                                                    </span>
<span  style=""> 800                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 801     /**                                                                                                  </span>
<span class="5893714151144352360" onmouseenter="enter('5893714151144352360');" onmouseout="out('5893714151144352360');" style=""> 802      * Move and/or resize item in the DB to a new &lt;container, screen, cellX, cellY, spanX, spanY&gt;        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 803      */                                                                                                  </span>
<span class="2794810618835410616" onmouseenter="enter('2794810618835410616');" onmouseout="out('2794810618835410616');" style=""> 804     static void modifyItemInDatabase(Context context, final ItemInfo item, final long container,         </span>
<span class="5104971199972279845" onmouseenter="enter('5104971199972279845');" onmouseout="out('5104971199972279845');" style=""> 805             final long screenId, final int cellX, final int cellY, final int spanX, final int spanY) {   </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 806         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 807         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 808         item.cellY = cellY;                                                                              </span>
<span class="-7444681703441257019" onmouseenter="enter('-7444681703441257019');" onmouseout="out('-7444681703441257019');" style=""> 809         item.spanX = spanX;                                                                              </span>
<span class="1797194204222415457" onmouseenter="enter('1797194204222415457');" onmouseout="out('1797194204222415457');" style=""> 810         item.spanY = spanY;                                                                              </span>
<span  style=""> 811                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 812         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 813         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 814         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 815                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 816             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 817         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 818             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 819         }                                                                                                </span>
<span  style=""> 820                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 821         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 822         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 823         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 824         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="-1263713769577317048" onmouseenter="enter('-1263713769577317048');" onmouseout="out('-1263713769577317048');" style=""> 825         values.put(LauncherSettings.Favorites.SPANX, item.spanX);                                        </span>
<span class="847673422027095164" onmouseenter="enter('847673422027095164');" onmouseout="out('847673422027095164');" style=""> 826         values.put(LauncherSettings.Favorites.SPANY, item.spanY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 827         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span  style=""> 828                                                                                                          </span>
<span class="5688211233374147409" onmouseenter="enter('5688211233374147409');" onmouseout="out('5688211233374147409');" style=""> 829         updateItemInDatabaseHelper(context, values, item, &quot;modifyItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 830     }                                                                                                    </span>
<span  style=""> 831                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 832     /**                                                                                                  </span>
<span class="3263486289839218660" onmouseenter="enter('3263486289839218660');" onmouseout="out('3263486289839218660');" style=""> 833      * Update an item to the database in a specified container.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 834      */                                                                                                  </span>
<span class="459681340980680258" onmouseenter="enter('459681340980680258');" onmouseout="out('459681340980680258');" style=""> 835     static void updateItemInDatabase(Context context, final ItemInfo item) {                             </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 836         final ContentValues values = new ContentValues();                                                </span>
<span class="5176730964422589638" onmouseenter="enter('5176730964422589638');" onmouseout="out('5176730964422589638');" style=""> 837         item.onAddToDatabase(values);                                                                    </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 838         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span class="-2640379359931023102" onmouseenter="enter('-2640379359931023102');" onmouseout="out('-2640379359931023102');" style=""> 839         updateItemInDatabaseHelper(context, values, item, &quot;updateItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 840     }                                                                                                    </span>
<span  style=""> 841                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 842     /**                                                                                                  </span>
<span class="-4717227181780328790" onmouseenter="enter('-4717227181780328790');" onmouseout="out('-4717227181780328790');" style=""> 843      * Returns true if the shortcuts already exists in the database.                                     </span>
<span class="-3331700288971341517" onmouseenter="enter('-3331700288971341517');" onmouseout="out('-3331700288971341517');" style=""> 844      * we identify a shortcut by its title and intent.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 845      */                                                                                                  </span>
<span class="-6388905982866518653" onmouseenter="enter('-6388905982866518653');" onmouseout="out('-6388905982866518653');" style=""> 846     static boolean shortcutExists(Context context, String title, Intent intent) {                        </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 847         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="2591581294492270218" onmouseenter="enter('2591581294492270218');" onmouseout="out('2591581294492270218');" style=""> 848         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI,                                      </span>
<span class="-3970764614423238561" onmouseenter="enter('-3970764614423238561');" onmouseout="out('-3970764614423238561');" style=""> 849             new String[] { &quot;title&quot;, &quot;intent&quot; }, &quot;title=? and intent=?&quot;,                                  </span>
<span class="-8386684562645849198" onmouseenter="enter('-8386684562645849198');" onmouseout="out('-8386684562645849198');" style=""> 850             new String[] { title, intent.toUri(0) }, null);                                              </span>
<span class="8422097272984539190" onmouseenter="enter('8422097272984539190');" onmouseout="out('8422097272984539190');" style=""> 851         boolean result = false;                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 852         try {                                                                                            </span>
<span class="-4458839479528090820" onmouseenter="enter('-4458839479528090820');" onmouseout="out('-4458839479528090820');" style=""> 853             result = c.moveToFirst();                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 854         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 855             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 856         }                                                                                                </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 857         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 858     }                                                                                                    </span>
<span  style=""> 859                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 860     /**                                                                                                  </span>
<span class="9160518604603288134" onmouseenter="enter('9160518604603288134');" onmouseout="out('9160518604603288134');" style=""> 861      * Returns an ItemInfo array containing all the items in the LauncherModel.                          </span>
<span class="-7541433293033039987" onmouseenter="enter('-7541433293033039987');" onmouseout="out('-7541433293033039987');" style=""> 862      * The ItemInfo.id is not set through this function.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 863      */                                                                                                  </span>
<span class="2306578838706816090" onmouseenter="enter('2306578838706816090');" onmouseout="out('2306578838706816090');" style=""> 864     static ArrayList&lt;ItemInfo&gt; getItemsInLocalCoordinates(Context context) {                             </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style=""> 865         ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                           </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 866         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="7862348045873845742" onmouseenter="enter('7862348045873845742');" onmouseout="out('7862348045873845742');" style=""> 867         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[] {                       </span>
<span class="-9030044796723696333" onmouseenter="enter('-9030044796723696333');" onmouseout="out('-9030044796723696333');" style=""> 868                 LauncherSettings.Favorites.ITEM_TYPE, LauncherSettings.Favorites.CONTAINER,              </span>
<span class="-6654705994324280685" onmouseenter="enter('-6654705994324280685');" onmouseout="out('-6654705994324280685');" style=""><abbr title=" 869                 LauncherSettings.Favorites.SCREEN, LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CELLY,"> 869                 LauncherSettings.Favorites.SCREEN, LauncherSettings.Favorites.CELLX, LauncherSettings.Fav</abbr></span>
<span class="-8466015049460674478" onmouseenter="enter('-8466015049460674478');" onmouseout="out('-8466015049460674478');" style=""> 870                 LauncherSettings.Favorites.SPANX, LauncherSettings.Favorites.SPANY }, null, null, null); </span>
<span  style=""> 871                                                                                                          </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 872         final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);         </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 873         final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);        </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 874         final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);              </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 875         final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 876         final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                </span>
<span class="-802963670489258937" onmouseenter="enter('-802963670489258937');" onmouseout="out('-802963670489258937');" style=""> 877         final int spanXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANX);                </span>
<span class="6925125615824777875" onmouseenter="enter('6925125615824777875');" onmouseout="out('6925125615824777875');" style=""> 878         final int spanYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANY);                </span>
<span  style=""> 879                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 880         try {                                                                                            </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 881             while (c.moveToNext()) {                                                                     </span>
<span class="-4116264954015845780" onmouseenter="enter('-4116264954015845780');" onmouseout="out('-4116264954015845780');" style=""> 882                 ItemInfo item = new ItemInfo();                                                          </span>
<span class="3361172632220058931" onmouseenter="enter('3361172632220058931');" onmouseout="out('3361172632220058931');" style=""> 883                 item.cellX = c.getInt(cellXIndex);                                                       </span>
<span class="-3320299110004327663" onmouseenter="enter('-3320299110004327663');" onmouseout="out('-3320299110004327663');" style=""> 884                 item.cellY = c.getInt(cellYIndex);                                                       </span>
<span class="-3998513073647472943" onmouseenter="enter('-3998513073647472943');" onmouseout="out('-3998513073647472943');" style=""> 885                 item.spanX = Math.max(1, c.getInt(spanXIndex));                                          </span>
<span class="584206030510259358" onmouseenter="enter('584206030510259358');" onmouseout="out('584206030510259358');" style=""> 886                 item.spanY = Math.max(1, c.getInt(spanYIndex));                                          </span>
<span class="7755197868117966754" onmouseenter="enter('7755197868117966754');" onmouseout="out('7755197868117966754');" style=""> 887                 item.container = c.getInt(containerIndex);                                               </span>
<span class="2520990540941204818" onmouseenter="enter('2520990540941204818');" onmouseout="out('2520990540941204818');" style=""> 888                 item.itemType = c.getInt(itemTypeIndex);                                                 </span>
<span class="-2693827439071435274" onmouseenter="enter('-2693827439071435274');" onmouseout="out('-2693827439071435274');" style=""> 889                 item.screenId = c.getInt(screenIndex);                                                   </span>
<span  style=""> 890                                                                                                          </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style=""> 891                 items.add(item);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 892             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 893         } catch (Exception e) {                                                                          </span>
<span class="4333495016815960454" onmouseenter="enter('4333495016815960454');" onmouseout="out('4333495016815960454');" style=""> 894             items.clear();                                                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 895         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 896             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 897         }                                                                                                </span>
<span  style=""> 898                                                                                                          </span>
<span class="4279419839789234429" onmouseenter="enter('4279419839789234429');" onmouseout="out('4279419839789234429');" style=""> 899         return items;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 900     }                                                                                                    </span>
<span  style=""> 901                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 902     /**                                                                                                  </span>
<span class="-8400747742808132543" onmouseenter="enter('-8400747742808132543');" onmouseout="out('-8400747742808132543');" style=""> 903      * Find a folder in the db, creating the FolderInfo if necessary, and adding it to folderList.       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 904      */                                                                                                  </span>
<span class="5907754851540050864" onmouseenter="enter('5907754851540050864');" onmouseout="out('5907754851540050864');" style=""> 905     FolderInfo getFolderById(Context context, HashMap&lt;Long,FolderInfo&gt; folderList, long id) {            </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 906         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-4509017961772931337" onmouseenter="enter('-4509017961772931337');" onmouseout="out('-4509017961772931337');" style=""> 907         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, null,                                </span>
<span class="-4259949945589236527" onmouseenter="enter('-4259949945589236527');" onmouseout="out('-4259949945589236527');" style=""> 908                 &quot;_id=? and (itemType=? or itemType=?)&quot;,                                                  </span>
<span class="6839251627547830421" onmouseenter="enter('6839251627547830421');" onmouseout="out('6839251627547830421');" style=""> 909                 new String[] { String.valueOf(id),                                                       </span>
<span class="-7910525153585982304" onmouseenter="enter('-7910525153585982304');" onmouseout="out('-7910525153585982304');" style=""> 910                         String.valueOf(LauncherSettings.Favorites.ITEM_TYPE_FOLDER)}, null);             </span>
<span  style=""> 911                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 912         try {                                                                                            </span>
<span class="-6302304746326789409" onmouseenter="enter('-6302304746326789409');" onmouseout="out('-6302304746326789409');" style=""> 913             if (c.moveToFirst()) {                                                                       </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 914                 final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE); </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style=""> 915                 final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);        </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 916                 final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);</span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 917                 final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);      </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 918                 final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);        </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 919                 final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);        </span>
<span  style=""> 920                                                                                                          </span>
<span class="7004752326616919357" onmouseenter="enter('7004752326616919357');" onmouseout="out('7004752326616919357');" style=""> 921                 FolderInfo folderInfo = null;                                                            </span>
<span class="2938602155061951308" onmouseenter="enter('2938602155061951308');" onmouseout="out('2938602155061951308');" style=""> 922                 switch (c.getInt(itemTypeIndex)) {                                                       </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 923                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                    </span>
<span class="8497686210844969517" onmouseenter="enter('8497686210844969517');" onmouseout="out('8497686210844969517');" style=""> 924                         folderInfo = findOrMakeFolder(folderList, id);                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 925                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 926                 }                                                                                        </span>
<span  style=""> 927                                                                                                          </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style=""> 928                 folderInfo.title = c.getString(titleIndex);                                              </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style=""> 929                 folderInfo.id = id;                                                                      </span>
<span class="-3770649288661071555" onmouseenter="enter('-3770649288661071555');" onmouseout="out('-3770649288661071555');" style=""> 930                 folderInfo.container = c.getInt(containerIndex);                                         </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style=""> 931                 folderInfo.screenId = c.getInt(screenIndex);                                             </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style=""> 932                 folderInfo.cellX = c.getInt(cellXIndex);                                                 </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style=""> 933                 folderInfo.cellY = c.getInt(cellYIndex);                                                 </span>
<span  style=""> 934                                                                                                          </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style=""> 935                 return folderInfo;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 936             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 937         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 938             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 939         }                                                                                                </span>
<span  style=""> 940                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 941         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 942     }                                                                                                    </span>
<span  style=""> 943                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 944     /**                                                                                                  </span>
<span class="-4485876183654335246" onmouseenter="enter('-4485876183654335246');" onmouseout="out('-4485876183654335246');" style=""> 945      * Add an item to the database in a specified container. Sets the container, screen, cellX and       </span>
<span class="5014383815638293688" onmouseenter="enter('5014383815638293688');" onmouseout="out('5014383815638293688');" style=""> 946      * cellY fields of the item. Also assigns an ID to the item.                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 947      */                                                                                                  </span>
<span class="7688823130205554121" onmouseenter="enter('7688823130205554121');" onmouseout="out('7688823130205554121');" style=""> 948     static void addItemToDatabase(Context context, final ItemInfo item, final long container,            </span>
<span class="-5047869274291255898" onmouseenter="enter('-5047869274291255898');" onmouseout="out('-5047869274291255898');" style=""> 949             final long screenId, final int cellX, final int cellY, final boolean notify) {               </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 950         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 951         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 952         item.cellY = cellY;                                                                              </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 953         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 954         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 955         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 956                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 957             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 958         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 959             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 960         }                                                                                                </span>
<span  style=""> 961                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 962         final ContentValues values = new ContentValues();                                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 963         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="5176730964422589638" onmouseenter="enter('5176730964422589638');" onmouseout="out('5176730964422589638');" style=""> 964         item.onAddToDatabase(values);                                                                    </span>
<span  style=""> 965                                                                                                          </span>
<span class="-1899316649519192705" onmouseenter="enter('-1899316649519192705');" onmouseout="out('-1899316649519192705');" style=""> 966         item.id = LauncherAppState.getLauncherProvider().generateNewItemId();                            </span>
<span class="-154850703316330893" onmouseenter="enter('-154850703316330893');" onmouseout="out('-154850703316330893');" style=""> 967         values.put(LauncherSettings.Favorites._ID, item.id);                                             </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 968         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span  style=""> 969                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 970         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 971             public void run() {                                                                          </span>
<span class="-9004016634042314269" onmouseenter="enter('-9004016634042314269');" onmouseout="out('-9004016634042314269');" style=""> 972                 cr.insert(notify ? LauncherSettings.Favorites.CONTENT_URI :                              </span>
<span class="-612779074530505821" onmouseenter="enter('-612779074530505821');" onmouseout="out('-612779074530505821');" style=""> 973                         LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, values);                 </span>
<span  style=""> 974                                                                                                          </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 975                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 976                 synchronized (sBgLock) {                                                                 </span>
<span class="7042391537046657417" onmouseenter="enter('7042391537046657417');" onmouseout="out('7042391537046657417');" style=""> 977                     checkItemInfoLocked(item.id, item, null);                                            </span>
<span class="-1016681302040734126" onmouseenter="enter('-1016681302040734126');" onmouseout="out('-1016681302040734126');" style=""> 978                     sBgItemsIdMap.put(item.id, item);                                                    </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style=""> 979                     switch (item.itemType) {                                                             </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 980                         case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                </span>
<span class="7914552456706159325" onmouseenter="enter('7914552456706159325');" onmouseout="out('7914552456706159325');" style=""> 981                             sBgFolders.put(item.id, (FolderInfo) item);                                  </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style=""> 982                             // Fall through                                                              </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style=""> 983                         case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                           </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style=""> 984                         case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                              </span>
<span class="-1329080713393586591" onmouseenter="enter('-1329080713393586591');" onmouseout="out('-1329080713393586591');" style=""> 985                             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||        </span>
<span class="-8703099407725800834" onmouseenter="enter('-8703099407725800834');" onmouseout="out('-8703099407725800834');" style=""> 986                                     item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {    </span>
<span class="-8146326631995897363" onmouseenter="enter('-8146326631995897363');" onmouseout="out('-8146326631995897363');" style=""> 987                                 sBgWorkspaceItems.add(item);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 988                             } else {                                                                     </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 989                                 if (!sBgFolders.containsKey(item.container)) {                           </span>
<span class="-54073947043614801" onmouseenter="enter('-54073947043614801');" onmouseout="out('-54073947043614801');" style=""> 990                                     // Adding an item to a folder that doesn&#x27;t exist.                    </span>
<span class="-8178862485732913035" onmouseenter="enter('-8178862485732913035');" onmouseout="out('-8178862485732913035');" style=""> 991                                     String msg = &quot;adding item: &quot; + item + &quot; to a folder that &quot; +         </span>
<span class="8069959129571777545" onmouseenter="enter('8069959129571777545');" onmouseout="out('8069959129571777545');" style=""> 992                                             &quot; doesn&#x27;t exist&quot;;                                            </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 993                                     Log.e(TAG, msg);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 994                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 995                             }                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 996                             break;                                                                       </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style=""> 997                         case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                             </span>
<span class="-7161913213134623334" onmouseenter="enter('-7161913213134623334');" onmouseout="out('-7161913213134623334');" style=""> 998                             sBgAppWidgets.add((LauncherAppWidgetInfo) item);                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 999                             break;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1000                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1001                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1002             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1003         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1004         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1005     }                                                                                                    </span>
<span  style="">1006                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1007     /**                                                                                                  </span>
<span class="7476806510728309142" onmouseenter="enter('7476806510728309142');" onmouseout="out('7476806510728309142');" style="">1008      * Creates a new unique child id, for a given cell span across all layouts.                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1009      */                                                                                                  </span>
<span class="6041396781761029986" onmouseenter="enter('6041396781761029986');" onmouseout="out('6041396781761029986');" style="">1010     static int getCellLayoutChildId(                                                                     </span>
<span class="-7149445532835734900" onmouseenter="enter('-7149445532835734900');" onmouseout="out('-7149445532835734900');" style="">1011             long container, long screen, int localCellX, int localCellY, int spanX, int spanY) {         </span>
<span class="513362613558309253" onmouseenter="enter('513362613558309253');" onmouseout="out('513362613558309253');" style="">1012         return (((int) container &amp; 0xFF) &lt;&lt; 24)                                                          </span>
<span class="-7388843269158644047" onmouseenter="enter('-7388843269158644047');" onmouseout="out('-7388843269158644047');" style="">1013                 | ((int) screen &amp; 0xFF) &lt;&lt; 16 | (localCellX &amp; 0xFF) &lt;&lt; 8 | (localCellY &amp; 0xFF);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1014     }                                                                                                    </span>
<span  style="">1015                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1016     /**                                                                                                  </span>
<span class="-1037279788887787658" onmouseenter="enter('-1037279788887787658');" onmouseout="out('-1037279788887787658');" style="">1017      * Removes the specified item from the database                                                      </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1018      * @param context                                                                                    </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1019      * @param item                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1020      */                                                                                                  </span>
<span class="6689175154077652032" onmouseenter="enter('6689175154077652032');" onmouseout="out('6689175154077652032');" style="">1021     static void deleteItemFromDatabase(Context context, final ItemInfo item) {                           </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1022         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-8662622705024005942" onmouseenter="enter('-8662622705024005942');" onmouseout="out('-8662622705024005942');" style="">1023         final Uri uriToDelete = LauncherSettings.Favorites.getContentUri(item.id, false);                </span>
<span  style="">1024                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1025         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1026             public void run() {                                                                          </span>
<span class="5853003155754312383" onmouseenter="enter('5853003155754312383');" onmouseout="out('5853003155754312383');" style="">1027                 cr.delete(uriToDelete, null, null);                                                      </span>
<span  style="">1028                                                                                                          </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1029                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1030                 synchronized (sBgLock) {                                                                 </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="">1031                     switch (item.itemType) {                                                             </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1032                         case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                </span>
<span class="-7362435803416400268" onmouseenter="enter('-7362435803416400268');" onmouseout="out('-7362435803416400268');" style="">1033                             sBgFolders.remove(item.id);                                                  </span>
<span class="-7253547809349647013" onmouseenter="enter('-7253547809349647013');" onmouseout="out('-7253547809349647013');" style="">1034                             for (ItemInfo info: sBgItemsIdMap.values()) {                                </span>
<span class="1662466266129331257" onmouseenter="enter('1662466266129331257');" onmouseout="out('1662466266129331257');" style="">1035                                 if (info.container == item.id) {                                         </span>
<span class="-1893702506185878584" onmouseenter="enter('-1893702506185878584');" onmouseout="out('-1893702506185878584');" style="">1036                                     // We are deleting a folder which still contains items that          </span>
<span class="-7314190253548819229" onmouseenter="enter('-7314190253548819229');" onmouseout="out('-7314190253548819229');" style="">1037                                     // think they are contained by that folder.                          </span>
<span class="-2989844263372177086" onmouseenter="enter('-2989844263372177086');" onmouseout="out('-2989844263372177086');" style="">1038                                     String msg = &quot;deleting a folder (&quot; + item + &quot;) which still &quot; +       </span>
<span class="-6063695738801794388" onmouseenter="enter('-6063695738801794388');" onmouseout="out('-6063695738801794388');" style="">1039                                             &quot;contains items (&quot; + info + &quot;)&quot;;                             </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="">1040                                     Log.e(TAG, msg);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1041                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1042                             }                                                                            </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1043                             sBgWorkspaceItems.remove(item);                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1044                             break;                                                                       </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1045                         case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                           </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1046                         case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                              </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1047                             sBgWorkspaceItems.remove(item);                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1048                             break;                                                                       </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">1049                         case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                             </span>
<span class="5035692159539723007" onmouseenter="enter('5035692159539723007');" onmouseout="out('5035692159539723007');" style="">1050                             sBgAppWidgets.remove((LauncherAppWidgetInfo) item);                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1051                             break;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1052                     }                                                                                    </span>
<span class="414734963826797427" onmouseenter="enter('414734963826797427');" onmouseout="out('414734963826797427');" style="">1053                     sBgItemsIdMap.remove(item.id);                                                       </span>
<span class="4282085416776692307" onmouseenter="enter('4282085416776692307');" onmouseout="out('4282085416776692307');" style="">1054                     sBgDbIconCache.remove(item);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1055                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1056             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1057         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1058         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1059     }                                                                                                    </span>
<span  style="">1060                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1061     /**                                                                                                  </span>
<span class="-7001721478473539684" onmouseenter="enter('-7001721478473539684');" onmouseout="out('-7001721478473539684');" style="">1062      * Update the order of the workspace screens in the database. The array list contains                </span>
<span class="-8575814248656839337" onmouseenter="enter('-8575814248656839337');" onmouseout="out('-8575814248656839337');" style="">1063      * a list of screen ids in the order that they should appear.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1064      */                                                                                                  </span>
<span class="8428215756529453230" onmouseenter="enter('8428215756529453230');" onmouseout="out('8428215756529453230');" style="">1065     void updateWorkspaceScreenOrder(Context context, final ArrayList&lt;Long&gt; screens) {                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1066         // Log to disk                                                                                   </span>
<span class="2597844157040813179" onmouseenter="enter('2597844157040813179');" onmouseout="out('2597844157040813179');" style="">1067         Launcher.addDumpLog(TAG, &quot;11683562 - updateWorkspaceScreenOrder()&quot;, true);                       </span>
<span class="-6712172470308057727" onmouseenter="enter('-6712172470308057727');" onmouseout="out('-6712172470308057727');" style="">1068         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; + TextUtils.join(&quot;, &quot;, screens), true);        </span>
<span  style="">1069                                                                                                          </span>
<span class="468782492563171594" onmouseenter="enter('468782492563171594');" onmouseout="out('468782492563171594');" style="">1070         final ArrayList&lt;Long&gt; screensCopy = new ArrayList&lt;Long&gt;(screens);                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1071         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="543518355232884435" onmouseenter="enter('543518355232884435');" onmouseout="out('543518355232884435');" style="">1072         final Uri uri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                                   </span>
<span  style="">1073                                                                                                          </span>
<span class="4254834681163937802" onmouseenter="enter('4254834681163937802');" onmouseout="out('4254834681163937802');" style="">1074         // Remove any negative screen ids -- these aren&#x27;t persisted                                      </span>
<span class="2152325044441302341" onmouseenter="enter('2152325044441302341');" onmouseout="out('2152325044441302341');" style="">1075         Iterator&lt;Long&gt; iter = screensCopy.iterator();                                                    </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">1076         while (iter.hasNext()) {                                                                         </span>
<span class="-927390677227055343" onmouseenter="enter('-927390677227055343');" onmouseout="out('-927390677227055343');" style="">1077             long id = iter.next();                                                                       </span>
<span class="-1178150068928662840" onmouseenter="enter('-1178150068928662840');" onmouseout="out('-1178150068928662840');" style="">1078             if (id &lt; 0) {                                                                                </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">1079                 iter.remove();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1080             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1081         }                                                                                                </span>
<span  style="">1082                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1083         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1084             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1085             public void run() {                                                                          </span>
<span class="-3030717489353459898" onmouseenter="enter('-3030717489353459898');" onmouseout="out('-3030717489353459898');" style="">1086                 ArrayList&lt;ContentProviderOperation&gt; ops = new ArrayList&lt;ContentProviderOperation&gt;();     </span>
<span class="-6225505341206658348" onmouseenter="enter('-6225505341206658348');" onmouseout="out('-6225505341206658348');" style="">1087                 // Clear the table                                                                       </span>
<span class="-429946239562688464" onmouseenter="enter('-429946239562688464');" onmouseout="out('-429946239562688464');" style="">1088                 ops.add(ContentProviderOperation.newDelete(uri).build());                                </span>
<span class="-2619892188160552062" onmouseenter="enter('-2619892188160552062');" onmouseout="out('-2619892188160552062');" style="">1089                 int count = screensCopy.size();                                                          </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style="">1090                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="4061202061343128850" onmouseenter="enter('4061202061343128850');" onmouseout="out('4061202061343128850');" style="">1091                     ContentValues v = new ContentValues();                                               </span>
<span class="-1711185173807510695" onmouseenter="enter('-1711185173807510695');" onmouseout="out('-1711185173807510695');" style="">1092                     long screenId = screensCopy.get(i);                                                  </span>
<span class="-5112420615000020353" onmouseenter="enter('-5112420615000020353');" onmouseout="out('-5112420615000020353');" style="">1093                     v.put(LauncherSettings.WorkspaceScreens._ID, screenId);                              </span>
<span class="4685968830084375092" onmouseenter="enter('4685968830084375092');" onmouseout="out('4685968830084375092');" style="">1094                     v.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, i);                             </span>
<span class="2820655584610684032" onmouseenter="enter('2820655584610684032');" onmouseout="out('2820655584610684032');" style="">1095                     ops.add(ContentProviderOperation.newInsert(uri).withValues(v).build());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1096                 }                                                                                        </span>
<span  style="">1097                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1098                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style="">1099                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style="">1100                 } catch (Exception ex) {                                                                 </span>
<span class="-9047539165825913138" onmouseenter="enter('-9047539165825913138');" onmouseout="out('-9047539165825913138');" style="">1101                     throw new RuntimeException(ex);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1102                 }                                                                                        </span>
<span  style="">1103                                                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1104                 synchronized (sBgLock) {                                                                 </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1105                     sBgWorkspaceScreens.clear();                                                         </span>
<span class="-2640283764679238318" onmouseenter="enter('-2640283764679238318');" onmouseout="out('-2640283764679238318');" style="">1106                     sBgWorkspaceScreens.addAll(screensCopy);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1107                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1108             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1109         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1110         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1111     }                                                                                                    </span>
<span  style="">1112                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1113     /**                                                                                                  </span>
<span class="-6789515923938750727" onmouseenter="enter('-6789515923938750727');" onmouseout="out('-6789515923938750727');" style="">1114      * Remove the contents of the specified folder from the database                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1115      */                                                                                                  </span>
<span class="686021856205334545" onmouseenter="enter('686021856205334545');" onmouseout="out('686021856205334545');" style="">1116     static void deleteFolderContentsFromDatabase(Context context, final FolderInfo info) {               </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1117         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style="">1118                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1119         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1120             public void run() {                                                                          </span>
<span class="-8793927488200240422" onmouseenter="enter('-8793927488200240422');" onmouseout="out('-8793927488200240422');" style="">1121                 cr.delete(LauncherSettings.Favorites.getContentUri(info.id, false), null, null);         </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1122                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1123                 synchronized (sBgLock) {                                                                 </span>
<span class="-4714602177116521128" onmouseenter="enter('-4714602177116521128');" onmouseout="out('-4714602177116521128');" style="">1124                     sBgItemsIdMap.remove(info.id);                                                       </span>
<span class="-3189879738488687685" onmouseenter="enter('-3189879738488687685');" onmouseout="out('-3189879738488687685');" style="">1125                     sBgFolders.remove(info.id);                                                          </span>
<span class="5895316081502731153" onmouseenter="enter('5895316081502731153');" onmouseout="out('5895316081502731153');" style="">1126                     sBgDbIconCache.remove(info);                                                         </span>
<span class="-6074846806723656328" onmouseenter="enter('-6074846806723656328');" onmouseout="out('-6074846806723656328');" style="">1127                     sBgWorkspaceItems.remove(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1128                 }                                                                                        </span>
<span  style="">1129                                                                                                          </span>
<span class="-1937171462652594970" onmouseenter="enter('-1937171462652594970');" onmouseout="out('-1937171462652594970');" style="">1130                 cr.delete(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION,                        </span>
<span class="9128354258649337519" onmouseenter="enter('9128354258649337519');" onmouseout="out('9128354258649337519');" style="">1131                         LauncherSettings.Favorites.CONTAINER + &quot;=&quot; + info.id, null);                     </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1132                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1133                 synchronized (sBgLock) {                                                                 </span>
<span class="7541292827914562010" onmouseenter="enter('7541292827914562010');" onmouseout="out('7541292827914562010');" style="">1134                     for (ItemInfo childInfo : info.contents) {                                           </span>
<span class="-2237983399964272530" onmouseenter="enter('-2237983399964272530');" onmouseout="out('-2237983399964272530');" style="">1135                         sBgItemsIdMap.remove(childInfo.id);                                              </span>
<span class="7662249246062224172" onmouseenter="enter('7662249246062224172');" onmouseout="out('7662249246062224172');" style="">1136                         sBgDbIconCache.remove(childInfo);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1137                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1138                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1139             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1140         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1141         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1142     }                                                                                                    </span>
<span  style="">1143                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1144     /**                                                                                                  </span>
<span class="8050600461131576642" onmouseenter="enter('8050600461131576642');" onmouseout="out('8050600461131576642');" style="">1145      * Set this as the current Launcher activity object for the loader.                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1146      */                                                                                                  </span>
<span class="8980870975348708436" onmouseenter="enter('8980870975348708436');" onmouseout="out('8980870975348708436');" style="">1147     public void initialize(Callbacks callbacks) {                                                        </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1148         synchronized (mLock) {                                                                           </span>
<span class="-641895236165954122" onmouseenter="enter('-641895236165954122');" onmouseout="out('-641895236165954122');" style="">1149             mCallbacks = new WeakReference&lt;Callbacks&gt;(callbacks);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1150         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1151     }                                                                                                    </span>
<span  style="">1152                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1153     /**                                                                                                  </span>
<span class="2369304932228112448" onmouseenter="enter('2369304932228112448');" onmouseout="out('2369304932228112448');" style="">1154      * Call from the handler for ACTION_PACKAGE_ADDED, ACTION_PACKAGE_REMOVED and                        </span>
<span class="-8845819122914862467" onmouseenter="enter('-8845819122914862467');" onmouseout="out('-8845819122914862467');" style="">1155      * ACTION_PACKAGE_CHANGED.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1156      */                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1157     @Override                                                                                            </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">1158     public void onReceive(Context context, Intent intent) {                                              </span>
<span class="-4567737324281428641" onmouseenter="enter('-4567737324281428641');" onmouseout="out('-4567737324281428641');" style="">1159         if (DEBUG_LOADERS) Log.d(TAG, &quot;onReceive intent=&quot; + intent);                                     </span>
<span  style="">1160                                                                                                          </span>
<span class="-4990819661547905021" onmouseenter="enter('-4990819661547905021');" onmouseout="out('-4990819661547905021');" style="">1161         final String action = intent.getAction();                                                        </span>
<span  style="">1162                                                                                                          </span>
<span class="3248856724191643889" onmouseenter="enter('3248856724191643889');" onmouseout="out('3248856724191643889');" style="">1163         if (Intent.ACTION_PACKAGE_CHANGED.equals(action)                                                 </span>
<span class="540624655569635000" onmouseenter="enter('540624655569635000');" onmouseout="out('540624655569635000');" style="">1164                 || Intent.ACTION_PACKAGE_REMOVED.equals(action)                                          </span>
<span class="-2497532605624583235" onmouseenter="enter('-2497532605624583235');" onmouseout="out('-2497532605624583235');" style="">1165                 || Intent.ACTION_PACKAGE_ADDED.equals(action)) {                                         </span>
<span class="3043595781762965417" onmouseenter="enter('3043595781762965417');" onmouseout="out('3043595781762965417');" style="">1166             final String packageName = intent.getData().getSchemeSpecificPart();                         </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="">1167             final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);             </span>
<span  style="">1168                                                                                                          </span>
<span class="8732681156431716097" onmouseenter="enter('8732681156431716097');" onmouseout="out('8732681156431716097');" style="">1169             int op = PackageUpdatedTask.OP_NONE;                                                         </span>
<span  style="">1170                                                                                                          </span>
<span class="226916516395269330" onmouseenter="enter('226916516395269330');" onmouseout="out('226916516395269330');" style="">1171             if (packageName == null || packageName.length() == 0) {                                      </span>
<span class="6497011882963257234" onmouseenter="enter('6497011882963257234');" onmouseout="out('6497011882963257234');" style="">1172                 // they sent us a bad intent                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1173                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1174             }                                                                                            </span>
<span  style="">1175                                                                                                          </span>
<span class="-8410954317975616940" onmouseenter="enter('-8410954317975616940');" onmouseout="out('-8410954317975616940');" style="">1176             if (Intent.ACTION_PACKAGE_CHANGED.equals(action)) {                                          </span>
<span class="-6985466686908158774" onmouseenter="enter('-6985466686908158774');" onmouseout="out('-6985466686908158774');" style="">1177                 op = PackageUpdatedTask.OP_UPDATE;                                                       </span>
<span class="-6129441538111285553" onmouseenter="enter('-6129441538111285553');" onmouseout="out('-6129441538111285553');" style="">1178             } else if (Intent.ACTION_PACKAGE_REMOVED.equals(action)) {                                   </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1179                 if (!replacing) {                                                                        </span>
<span class="-6586396537735596399" onmouseenter="enter('-6586396537735596399');" onmouseout="out('-6586396537735596399');" style="">1180                     op = PackageUpdatedTask.OP_REMOVE;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1181                 }                                                                                        </span>
<span class="596194884408948956" onmouseenter="enter('596194884408948956');" onmouseout="out('596194884408948956');" style="">1182                 // else, we are replacing the package, so a PACKAGE_ADDED will be sent                   </span>
<span class="8848734407792838356" onmouseenter="enter('8848734407792838356');" onmouseout="out('8848734407792838356');" style="">1183                 // later, we will update the package at this time                                        </span>
<span class="1584650074780198559" onmouseenter="enter('1584650074780198559');" onmouseout="out('1584650074780198559');" style="">1184             } else if (Intent.ACTION_PACKAGE_ADDED.equals(action)) {                                     </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1185                 if (!replacing) {                                                                        </span>
<span class="-8510632568607563672" onmouseenter="enter('-8510632568607563672');" onmouseout="out('-8510632568607563672');" style="">1186                     op = PackageUpdatedTask.OP_ADD;                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1187                 } else {                                                                                 </span>
<span class="-6985466686908158774" onmouseenter="enter('-6985466686908158774');" onmouseout="out('-6985466686908158774');" style="">1188                     op = PackageUpdatedTask.OP_UPDATE;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1189                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1190             }                                                                                            </span>
<span  style="">1191                                                                                                          </span>
<span class="4401752612772195970" onmouseenter="enter('4401752612772195970');" onmouseout="out('4401752612772195970');" style="">1192             if (op != PackageUpdatedTask.OP_NONE) {                                                      </span>
<span class="-3763042555791809504" onmouseenter="enter('-3763042555791809504');" onmouseout="out('-3763042555791809504');" style="">1193                 enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName }));         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1194             }                                                                                            </span>
<span  style="">1195                                                                                                          </span>
<span class="1438616399789326195" onmouseenter="enter('1438616399789326195');" onmouseout="out('1438616399789326195');" style="">1196         } else if (Intent.ACTION_EXTERNAL_APPLICATIONS_AVAILABLE.equals(action)) {                       </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="">1197             final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);             </span>
<span class="-9048118809725232135" onmouseenter="enter('-9048118809725232135');" onmouseout="out('-9048118809725232135');" style="">1198             String[] packages = intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);           </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1199             if (!replacing) {                                                                            </span>
<span class="8106264297457531305" onmouseenter="enter('8106264297457531305');" onmouseout="out('8106264297457531305');" style="">1200                 enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_ADD, packages));      </span>
<span class="796476435191708892" onmouseenter="enter('796476435191708892');" onmouseout="out('796476435191708892');" style="">1201                 if (mAppsCanBeOnRemoveableStorage) {                                                     </span>
<span class="-460878835460866964" onmouseenter="enter('-460878835460866964');" onmouseout="out('-460878835460866964');" style="">1202                     // Only rebind if we support removable storage.  It catches the case where           </span>
<span class="-4167475923329833908" onmouseenter="enter('-4167475923329833908');" onmouseout="out('-4167475923329833908');" style="">1203                     // apps on the external sd card need to be reloaded                                  </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1204                     startLoaderFromBackground();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1205                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1206             } else {                                                                                     </span>
<span class="-1596872044981704971" onmouseenter="enter('-1596872044981704971');" onmouseout="out('-1596872044981704971');" style="">1207                 // If we are replacing then just update the packages in the list                         </span>
<span class="5890557645886373945" onmouseenter="enter('5890557645886373945');" onmouseout="out('5890557645886373945');" style="">1208                 enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE,               </span>
<span class="-5628778258633473048" onmouseenter="enter('-5628778258633473048');" onmouseout="out('-5628778258633473048');" style="">1209                         packages));                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1210             }                                                                                            </span>
<span class="7043932659231673518" onmouseenter="enter('7043932659231673518');" onmouseout="out('7043932659231673518');" style="">1211         } else if (Intent.ACTION_EXTERNAL_APPLICATIONS_UNAVAILABLE.equals(action)) {                     </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="">1212             final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);             </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1213             if (!replacing) {                                                                            </span>
<span class="-9048118809725232135" onmouseenter="enter('-9048118809725232135');" onmouseout="out('-9048118809725232135');" style="">1214                 String[] packages = intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);       </span>
<span class="-7496430100396306440" onmouseenter="enter('-7496430100396306440');" onmouseout="out('-7496430100396306440');" style="">1215                 enqueuePackageUpdated(new PackageUpdatedTask(                                            </span>
<span class="296372570783844091" onmouseenter="enter('296372570783844091');" onmouseout="out('296372570783844091');" style="">1216                             PackageUpdatedTask.OP_UNAVAILABLE, packages));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1217             }                                                                                            </span>
<span class="1575594556961394504" onmouseenter="enter('1575594556961394504');" onmouseout="out('1575594556961394504');" style="">1218             // else, we are replacing the packages, so ignore this event and wait for                    </span>
<span class="-3059095335031402395" onmouseenter="enter('-3059095335031402395');" onmouseout="out('-3059095335031402395');" style="">1219             // EXTERNAL_APPLICATIONS_AVAILABLE to update the packages at that time                       </span>
<span class="-2062230633944308548" onmouseenter="enter('-2062230633944308548');" onmouseout="out('-2062230633944308548');" style="">1220         } else if (Intent.ACTION_LOCALE_CHANGED.equals(action)) {                                        </span>
<span class="-6283043286710203920" onmouseenter="enter('-6283043286710203920');" onmouseout="out('-6283043286710203920');" style="">1221             // If we have changed locale we need to clear out the labels in all apps/workspace.          </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1222             forceReload();                                                                               </span>
<span class="4348516547288755383" onmouseenter="enter('4348516547288755383');" onmouseout="out('4348516547288755383');" style="">1223         } else if (Intent.ACTION_CONFIGURATION_CHANGED.equals(action)) {                                 </span>
<span class="6164116257081582847" onmouseenter="enter('6164116257081582847');" onmouseout="out('6164116257081582847');" style="">1224              // Check if configuration change was an mcc/mnc change which would affect app resources     </span>
<span class="-1334400353911346867" onmouseenter="enter('-1334400353911346867');" onmouseout="out('-1334400353911346867');" style="">1225              // and we would need to clear out the labels in all apps/workspace. Same handling as        </span>
<span class="-5650891854452971889" onmouseenter="enter('-5650891854452971889');" onmouseout="out('-5650891854452971889');" style="">1226              // above for ACTION_LOCALE_CHANGED                                                          </span>
<span class="5411318685984925146" onmouseenter="enter('5411318685984925146');" onmouseout="out('5411318685984925146');" style="">1227              Configuration currentConfig = context.getResources().getConfiguration();                    </span>
<span class="-5822569774152959183" onmouseenter="enter('-5822569774152959183');" onmouseout="out('-5822569774152959183');" style="">1228              if (mPreviousConfigMcc != currentConfig.mcc) {                                              </span>
<span class="84255665079130844" onmouseenter="enter('84255665079130844');" onmouseout="out('84255665079130844');" style="">1229                    Log.d(TAG, &quot;Reload apps on config change. curr_mcc:&quot;                                  </span>
<span class="-5209278319615985301" onmouseenter="enter('-5209278319615985301');" onmouseout="out('-5209278319615985301');" style="">1230                        + currentConfig.mcc + &quot; prevmcc:&quot; + mPreviousConfigMcc);                          </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1231                    forceReload();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1232              }                                                                                           </span>
<span class="-3935663267934034322" onmouseenter="enter('-3935663267934034322');" onmouseout="out('-3935663267934034322');" style="">1233              // Update previousConfig                                                                    </span>
<span class="3962364908604221868" onmouseenter="enter('3962364908604221868');" onmouseout="out('3962364908604221868');" style="">1234              mPreviousConfigMcc = currentConfig.mcc;                                                     </span>
<span class="-625815149698974703" onmouseenter="enter('-625815149698974703');" onmouseout="out('-625815149698974703');" style="">1235         } else if (SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED.equals(action) ||                 </span>
<span class="-3901926890039161494" onmouseenter="enter('-3901926890039161494');" onmouseout="out('-3901926890039161494');" style="">1236                    SearchManager.INTENT_ACTION_SEARCHABLES_CHANGED.equals(action)) {                     </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1237             if (mCallbacks != null) {                                                                    </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1238                 Callbacks callbacks = mCallbacks.get();                                                  </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1239                 if (callbacks != null) {                                                                 </span>
<span class="-1936765454200843013" onmouseenter="enter('-1936765454200843013');" onmouseout="out('-1936765454200843013');" style="">1240                     callbacks.bindSearchablesChanged();                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1241                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1242             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1243         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1244     }                                                                                                    </span>
<span  style="">1245                                                                                                          </span>
<span class="-3490103774513517076" onmouseenter="enter('-3490103774513517076');" onmouseout="out('-3490103774513517076');" style="">1246     private void forceReload() {                                                                         </span>
<span class="778547048286075437" onmouseenter="enter('778547048286075437');" onmouseout="out('778547048286075437');" style="">1247         resetLoadedState(true, true);                                                                    </span>
<span  style="">1248                                                                                                          </span>
<span class="4237924176832789189" onmouseenter="enter('4237924176832789189');" onmouseout="out('4237924176832789189');" style="">1249         // Do this here because if the launcher activity is running it will be restarted.                </span>
<span class="-3504249388484505584" onmouseenter="enter('-3504249388484505584');" onmouseout="out('-3504249388484505584');" style="">1250         // If it&#x27;s not running startLoaderFromBackground will merely tell it that it needs               </span>
<span class="5637742608155670431" onmouseenter="enter('5637742608155670431');" onmouseout="out('5637742608155670431');" style="">1251         // to reload.                                                                                    </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1252         startLoaderFromBackground();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1253     }                                                                                                    </span>
<span  style="">1254                                                                                                          </span>
<span class="-4293128577464776735" onmouseenter="enter('-4293128577464776735');" onmouseout="out('-4293128577464776735');" style="">1255     public void resetLoadedState(boolean resetAllAppsLoaded, boolean resetWorkspaceLoaded) {             </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1256         synchronized (mLock) {                                                                           </span>
<span class="-2609781935860166694" onmouseenter="enter('-2609781935860166694');" onmouseout="out('-2609781935860166694');" style="">1257             // Stop any existing loaders first, so they don&#x27;t set mAllAppsLoaded or                      </span>
<span class="1916843454374538934" onmouseenter="enter('1916843454374538934');" onmouseout="out('1916843454374538934');" style="">1258             // mWorkspaceLoaded to true later                                                            </span>
<span class="-1528282254597569426" onmouseenter="enter('-1528282254597569426');" onmouseout="out('-1528282254597569426');" style="">1259             stopLoaderLocked();                                                                          </span>
<span class="-4094161784675318974" onmouseenter="enter('-4094161784675318974');" onmouseout="out('-4094161784675318974');" style="">1260             if (resetAllAppsLoaded) mAllAppsLoaded = false;                                              </span>
<span class="-3582216479388479825" onmouseenter="enter('-3582216479388479825');" onmouseout="out('-3582216479388479825');" style="">1261             if (resetWorkspaceLoaded) mWorkspaceLoaded = false;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1262         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1263     }                                                                                                    </span>
<span  style="">1264                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1265     /**                                                                                                  </span>
<span class="-2117548427273174966" onmouseenter="enter('-2117548427273174966');" onmouseout="out('-2117548427273174966');" style="">1266      * When the launcher is in the background, it&#x27;s possible for it to miss paired                       </span>
<span class="9045642034745197537" onmouseenter="enter('9045642034745197537');" onmouseout="out('9045642034745197537');" style="">1267      * configuration changes.  So whenever we trigger the loader from the background                     </span>
<span class="3717077838570548717" onmouseenter="enter('3717077838570548717');" onmouseout="out('3717077838570548717');" style="">1268      * tell the launcher that it needs to re-run the loader when it comes back instead                   </span>
<span class="8619803709595782118" onmouseenter="enter('8619803709595782118');" onmouseout="out('8619803709595782118');" style="">1269      * of doing it now.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1270      */                                                                                                  </span>
<span class="2053805597450117019" onmouseenter="enter('2053805597450117019');" onmouseout="out('2053805597450117019');" style="">1271     public void startLoaderFromBackground() {                                                            </span>
<span class="-3760886775206602162" onmouseenter="enter('-3760886775206602162');" onmouseout="out('-3760886775206602162');" style="">1272         boolean runLoader = false;                                                                       </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1273         if (mCallbacks != null) {                                                                        </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1274             Callbacks callbacks = mCallbacks.get();                                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1275             if (callbacks != null) {                                                                     </span>
<span class="-8461765931128288918" onmouseenter="enter('-8461765931128288918');" onmouseout="out('-8461765931128288918');" style="">1276                 // Only actually run the loader if they&#x27;re not paused.                                   </span>
<span class="-462943306960371545" onmouseenter="enter('-462943306960371545');" onmouseout="out('-462943306960371545');" style="">1277                 if (!callbacks.setLoadOnResume()) {                                                      </span>
<span class="-8889848208331327581" onmouseenter="enter('-8889848208331327581');" onmouseout="out('-8889848208331327581');" style="">1278                     runLoader = true;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1279                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1280             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1281         }                                                                                                </span>
<span class="-2622291522100283788" onmouseenter="enter('-2622291522100283788');" onmouseout="out('-2622291522100283788');" style="">1282         if (runLoader) {                                                                                 </span>
<span class="-8998147482804817647" onmouseenter="enter('-8998147482804817647');" onmouseout="out('-8998147482804817647');" style="">1283             startLoader(false, PagedView.INVALID_RESTORE_PAGE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1284         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1285     }                                                                                                    </span>
<span  style="">1286                                                                                                          </span>
<span class="5010903034251856801" onmouseenter="enter('5010903034251856801');" onmouseout="out('5010903034251856801');" style="">1287     // If there is already a loader task running, tell it to stop.                                       </span>
<span class="796557558969242789" onmouseenter="enter('796557558969242789');" onmouseout="out('796557558969242789');" style="">1288     // returns true if isLaunching() was true on the old task                                            </span>
<span class="-4581932122990216089" onmouseenter="enter('-4581932122990216089');" onmouseout="out('-4581932122990216089');" style="">1289     private boolean stopLoaderLocked() {                                                                 </span>
<span class="-998934784399408070" onmouseenter="enter('-998934784399408070');" onmouseout="out('-998934784399408070');" style="">1290         boolean isLaunching = false;                                                                     </span>
<span class="-7986438653599299764" onmouseenter="enter('-7986438653599299764');" onmouseout="out('-7986438653599299764');" style="">1291         LoaderTask oldTask = mLoaderTask;                                                                </span>
<span class="-2859449282457612659" onmouseenter="enter('-2859449282457612659');" onmouseout="out('-2859449282457612659');" style="">1292         if (oldTask != null) {                                                                           </span>
<span class="5507271139955657849" onmouseenter="enter('5507271139955657849');" onmouseout="out('5507271139955657849');" style="">1293             if (oldTask.isLaunching()) {                                                                 </span>
<span class="-2542349725897719409" onmouseenter="enter('-2542349725897719409');" onmouseout="out('-2542349725897719409');" style="">1294                 isLaunching = true;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1295             }                                                                                            </span>
<span class="-1151918806087352732" onmouseenter="enter('-1151918806087352732');" onmouseout="out('-1151918806087352732');" style="">1296             oldTask.stopLocked();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1297         }                                                                                                </span>
<span class="353443281501806148" onmouseenter="enter('353443281501806148');" onmouseout="out('353443281501806148');" style="">1298         return isLaunching;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1299     }                                                                                                    </span>
<span  style="">1300                                                                                                          </span>
<span class="3837278165301095000" onmouseenter="enter('3837278165301095000');" onmouseout="out('3837278165301095000');" style="">1301     public void startLoader(boolean isLaunching, int synchronousBindPage) {                              </span>
<span class="-5265370469502082000" onmouseenter="enter('-5265370469502082000');" onmouseout="out('-5265370469502082000');" style="">1302         startLoader(isLaunching, synchronousBindPage, LOADER_FLAG_NONE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1303     }                                                                                                    </span>
<span  style="">1304                                                                                                          </span>
<span class="4886983231320039031" onmouseenter="enter('4886983231320039031');" onmouseout="out('4886983231320039031');" style="">1305     public void startLoader(boolean isLaunching, int synchronousBindPage, int loadFlags) {               </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1306         synchronized (mLock) {                                                                           </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1307             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-3508213546782417324" onmouseenter="enter('-3508213546782417324');" onmouseout="out('-3508213546782417324');" style="">1308                 Log.d(TAG, &quot;startLoader isLaunching=&quot; + isLaunching);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1309             }                                                                                            </span>
<span  style="">1310                                                                                                          </span>
<span class="6333826815871699731" onmouseenter="enter('6333826815871699731');" onmouseout="out('6333826815871699731');" style="">1311             // Clear any deferred bind-runnables from the synchronized load process                      </span>
<span class="-7033809362198181476" onmouseenter="enter('-7033809362198181476');" onmouseout="out('-7033809362198181476');" style="">1312             // We must do this before any loading/binding is scheduled below.                            </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1313             mDeferredBindRunnables.clear();                                                              </span>
<span  style="">1314                                                                                                          </span>
<span class="-2785438828901225561" onmouseenter="enter('-2785438828901225561');" onmouseout="out('-2785438828901225561');" style="">1315             // Don&#x27;t bother to start the thread if we know it&#x27;s not going to do anything                 </span>
<span class="-784058118581736702" onmouseenter="enter('-784058118581736702');" onmouseout="out('-784058118581736702');" style="">1316             if (mCallbacks != null &amp;&amp; mCallbacks.get() != null) {                                        </span>
<span class="-5820527225743363271" onmouseenter="enter('-5820527225743363271');" onmouseout="out('-5820527225743363271');" style="">1317                 // If there is already one running, tell it to stop.                                     </span>
<span class="3990358955275755027" onmouseenter="enter('3990358955275755027');" onmouseout="out('3990358955275755027');" style="">1318                 // also, don&#x27;t downgrade isLaunching if we&#x27;re already running                            </span>
<span class="-6024742637751579231" onmouseenter="enter('-6024742637751579231');" onmouseout="out('-6024742637751579231');" style="">1319                 isLaunching = isLaunching || stopLoaderLocked();                                         </span>
<span class="7022676154060365524" onmouseenter="enter('7022676154060365524');" onmouseout="out('7022676154060365524');" style="">1320                 mLoaderTask = new LoaderTask(mApp.getContext(), isLaunching, loadFlags);                 </span>
<span class="1771251463067889729" onmouseenter="enter('1771251463067889729');" onmouseout="out('1771251463067889729');" style="">1321                 if (synchronousBindPage != PagedView.INVALID_RESTORE_PAGE                                </span>
<span class="7049103546590409467" onmouseenter="enter('7049103546590409467');" onmouseout="out('7049103546590409467');" style="">1322                         &amp;&amp; mAllAppsLoaded &amp;&amp; mWorkspaceLoaded) {                                         </span>
<span class="-8342371766149337044" onmouseenter="enter('-8342371766149337044');" onmouseout="out('-8342371766149337044');" style="">1323                     mLoaderTask.runBindSynchronousPage(synchronousBindPage);                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1324                 } else {                                                                                 </span>
<span class="-600387258114093875" onmouseenter="enter('-600387258114093875');" onmouseout="out('-600387258114093875');" style="">1325                     sWorkerThread.setPriority(Thread.NORM_PRIORITY);                                     </span>
<span class="7243935410050079045" onmouseenter="enter('7243935410050079045');" onmouseout="out('7243935410050079045');" style="">1326                     sWorker.post(mLoaderTask);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1328             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1329         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1330     }                                                                                                    </span>
<span  style="">1331                                                                                                          </span>
<span class="8791491145548048370" onmouseenter="enter('8791491145548048370');" onmouseout="out('8791491145548048370');" style="">1332     void bindRemainingSynchronousPages() {                                                               </span>
<span class="5033608739884582118" onmouseenter="enter('5033608739884582118');" onmouseout="out('5033608739884582118');" style="">1333         // Post the remaining side pages to be loaded                                                    </span>
<span class="-5332743236356375648" onmouseenter="enter('-5332743236356375648');" onmouseout="out('-5332743236356375648');" style="">1334         if (!mDeferredBindRunnables.isEmpty()) {                                                         </span>
<span class="5296695443187413802" onmouseenter="enter('5296695443187413802');" onmouseout="out('5296695443187413802');" style="">1335             for (final Runnable r : mDeferredBindRunnables) {                                            </span>
<span class="352794200584805787" onmouseenter="enter('352794200584805787');" onmouseout="out('352794200584805787');" style="">1336                 mHandler.post(r, MAIN_THREAD_BINDING_RUNNABLE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1337             }                                                                                            </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1338             mDeferredBindRunnables.clear();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1339         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1340     }                                                                                                    </span>
<span  style="">1341                                                                                                          </span>
<span class="2340632222115195329" onmouseenter="enter('2340632222115195329');" onmouseout="out('2340632222115195329');" style="">1342     public void stopLoader() {                                                                           </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1343         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1344             if (mLoaderTask != null) {                                                                   </span>
<span class="-3264656657741930991" onmouseenter="enter('-3264656657741930991');" onmouseout="out('-3264656657741930991');" style="">1345                 mLoaderTask.stopLocked();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1346             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1347         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1348     }                                                                                                    </span>
<span  style="">1349                                                                                                          </span>
<span class="-7250027300190670202" onmouseenter="enter('-7250027300190670202');" onmouseout="out('-7250027300190670202');" style="">1350     /** Loads the workspace screens db into a map of Rank -&gt; ScreenId */                                 </span>
<span class="122992606215727554" onmouseenter="enter('122992606215727554');" onmouseout="out('122992606215727554');" style="">1351     private static TreeMap&lt;Integer, Long&gt; loadWorkspaceScreensDb(Context context) {                      </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1352         final ContentResolver contentResolver = context.getContentResolver();                            </span>
<span class="-2220596623746218138" onmouseenter="enter('-2220596623746218138');" onmouseout="out('-2220596623746218138');" style="">1353         final Uri screensUri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                            </span>
<span class="6273592658286011909" onmouseenter="enter('6273592658286011909');" onmouseout="out('6273592658286011909');" style="">1354         final Cursor sc = contentResolver.query(screensUri, null, null, null, null);                     </span>
<span class="-750342796873513708" onmouseenter="enter('-750342796873513708');" onmouseout="out('-750342796873513708');" style="">1355         TreeMap&lt;Integer, Long&gt; orderedScreens = new TreeMap&lt;Integer, Long&gt;();                            </span>
<span  style="">1356                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1357         try {                                                                                            </span>
<span class="-8175558610564469753" onmouseenter="enter('-8175558610564469753');" onmouseout="out('-8175558610564469753');" style="">1358             final int idIndex = sc.getColumnIndexOrThrow(                                                </span>
<span class="-8946142257769661598" onmouseenter="enter('-8946142257769661598');" onmouseout="out('-8946142257769661598');" style="">1359                     LauncherSettings.WorkspaceScreens._ID);                                              </span>
<span class="-8868089630781298600" onmouseenter="enter('-8868089630781298600');" onmouseout="out('-8868089630781298600');" style="">1360             final int rankIndex = sc.getColumnIndexOrThrow(                                              </span>
<span class="5916017515631826997" onmouseenter="enter('5916017515631826997');" onmouseout="out('5916017515631826997');" style="">1361                     LauncherSettings.WorkspaceScreens.SCREEN_RANK);                                      </span>
<span class="204728523712198078" onmouseenter="enter('204728523712198078');" onmouseout="out('204728523712198078');" style="">1362             while (sc.moveToNext()) {                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1363                 try {                                                                                    </span>
<span class="-3927530459574574291" onmouseenter="enter('-3927530459574574291');" onmouseout="out('-3927530459574574291');" style="">1364                     long screenId = sc.getLong(idIndex);                                                 </span>
<span class="4944528408544996755" onmouseenter="enter('4944528408544996755');" onmouseout="out('4944528408544996755');" style="">1365                     int rank = sc.getInt(rankIndex);                                                     </span>
<span class="3308047316092947062" onmouseenter="enter('3308047316092947062');" onmouseout="out('3308047316092947062');" style="">1366                     orderedScreens.put(rank, screenId);                                                  </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1367                 } catch (Exception e) {                                                                  </span>
<span class="-7912680121623740950" onmouseenter="enter('-7912680121623740950');" onmouseout="out('-7912680121623740950');" style=""><abbr title="1368                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e, true);">1368                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e,</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1369                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1370             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1371         } finally {                                                                                      </span>
<span class="8048076729460304726" onmouseenter="enter('8048076729460304726');" onmouseout="out('8048076729460304726');" style="">1372             sc.close();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1373         }                                                                                                </span>
<span  style="">1374                                                                                                          </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1375         // Log to disk                                                                                   </span>
<span class="395286336309272035" onmouseenter="enter('395286336309272035');" onmouseout="out('395286336309272035');" style="">1376         Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspaceScreensDb()&quot;, true);                           </span>
<span class="218635510720911915" onmouseenter="enter('218635510720911915');" onmouseout="out('218635510720911915');" style="">1377         ArrayList&lt;String&gt; orderedScreensPairs= new ArrayList&lt;String&gt;();                                  </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">1378         for (Integer i : orderedScreens.keySet()) {                                                      </span>
<span class="7491860136402808405" onmouseenter="enter('7491860136402808405');" onmouseout="out('7491860136402808405');" style="">1379             orderedScreensPairs.add(&quot;{ &quot; + i + &quot;: &quot; + orderedScreens.get(i) + &quot; }&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1380         }                                                                                                </span>
<span class="-1337084683171534745" onmouseenter="enter('-1337084683171534745');" onmouseout="out('-1337084683171534745');" style="">1381         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; +                                              </span>
<span class="-2164573057986762020" onmouseenter="enter('-2164573057986762020');" onmouseout="out('-2164573057986762020');" style="">1382                 TextUtils.join(&quot;, &quot;, orderedScreensPairs), true);                                        </span>
<span class="1470292219769535286" onmouseenter="enter('1470292219769535286');" onmouseout="out('1470292219769535286');" style="">1383         return orderedScreens;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1384     }                                                                                                    </span>
<span  style="">1385                                                                                                          </span>
<span class="3555732154070898598" onmouseenter="enter('3555732154070898598');" onmouseout="out('3555732154070898598');" style="">1386     public boolean isAllAppsLoaded() {                                                                   </span>
<span class="-4479372220598901856" onmouseenter="enter('-4479372220598901856');" onmouseout="out('-4479372220598901856');" style="">1387         return mAllAppsLoaded;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1388     }                                                                                                    </span>
<span  style="">1389                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1390     boolean isLoadingWorkspace() {                                                                       </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1391         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1392             if (mLoaderTask != null) {                                                                   </span>
<span class="-8784543184221518678" onmouseenter="enter('-8784543184221518678');" onmouseout="out('-8784543184221518678');" style="">1393                 return mLoaderTask.isLoadingWorkspace();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1394             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1395         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1396         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1397     }                                                                                                    </span>
<span  style="">1398                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1399     /**                                                                                                  </span>
<span class="2155822975232422030" onmouseenter="enter('2155822975232422030');" onmouseout="out('2155822975232422030');" style="">1400      * Runnable for the thread that loads the contents of the launcher:                                  </span>
<span class="2245504796345070456" onmouseenter="enter('2245504796345070456');" onmouseout="out('2245504796345070456');" style="">1401      *   - workspace icons                                                                               </span>
<span class="3748531824399873232" onmouseenter="enter('3748531824399873232');" onmouseout="out('3748531824399873232');" style="">1402      *   - widgets                                                                                       </span>
<span class="-1174287823865228312" onmouseenter="enter('-1174287823865228312');" onmouseout="out('-1174287823865228312');" style="">1403      *   - all apps icons                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1404      */                                                                                                  </span>
<span class="5152324394883908677" onmouseenter="enter('5152324394883908677');" onmouseout="out('5152324394883908677');" style="">1405     private class LoaderTask implements Runnable {                                                       </span>
<span class="6683852815807951473" onmouseenter="enter('6683852815807951473');" onmouseout="out('6683852815807951473');" style="">1406         private Context mContext;                                                                        </span>
<span class="-8892613002903674576" onmouseenter="enter('-8892613002903674576');" onmouseout="out('-8892613002903674576');" style="">1407         private boolean mIsLaunching;                                                                    </span>
<span class="-8472062509666230595" onmouseenter="enter('-8472062509666230595');" onmouseout="out('-8472062509666230595');" style="">1408         private boolean mIsLoadingAndBindingWorkspace;                                                   </span>
<span class="840925515877441947" onmouseenter="enter('840925515877441947');" onmouseout="out('840925515877441947');" style="">1409         private boolean mStopped;                                                                        </span>
<span class="-1108993435799622018" onmouseenter="enter('-1108993435799622018');" onmouseout="out('-1108993435799622018');" style="">1410         private boolean mLoadAndBindStepFinished;                                                        </span>
<span class="2080823019438326837" onmouseenter="enter('2080823019438326837');" onmouseout="out('2080823019438326837');" style="">1411         private int mFlags;                                                                              </span>
<span  style="">1412                                                                                                          </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">1413         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span  style="">1414                                                                                                          </span>
<span class="-3637406926963361525" onmouseenter="enter('-3637406926963361525');" onmouseout="out('-3637406926963361525');" style="">1415         LoaderTask(Context context, boolean isLaunching, int flags) {                                    </span>
<span class="7260904205784329196" onmouseenter="enter('7260904205784329196');" onmouseout="out('7260904205784329196');" style="">1416             mContext = context;                                                                          </span>
<span class="7512260519858493354" onmouseenter="enter('7512260519858493354');" onmouseout="out('7512260519858493354');" style="">1417             mIsLaunching = isLaunching;                                                                  </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">1418             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="6183718553459964087" onmouseenter="enter('6183718553459964087');" onmouseout="out('6183718553459964087');" style="">1419             mFlags = flags;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1420         }                                                                                                </span>
<span  style="">1421                                                                                                          </span>
<span class="-3427713478562425776" onmouseenter="enter('-3427713478562425776');" onmouseout="out('-3427713478562425776');" style="">1422         boolean isLaunching() {                                                                          </span>
<span class="-4684239236966951132" onmouseenter="enter('-4684239236966951132');" onmouseout="out('-4684239236966951132');" style="">1423             return mIsLaunching;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1424         }                                                                                                </span>
<span  style="">1425                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1426         boolean isLoadingWorkspace() {                                                                   </span>
<span class="-1565626489511429864" onmouseenter="enter('-1565626489511429864');" onmouseout="out('-1565626489511429864');" style="">1427             return mIsLoadingAndBindingWorkspace;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1428         }                                                                                                </span>
<span  style="">1429                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1430         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-4912644643880785787" onmouseenter="enter('-4912644643880785787');" onmouseout="out('-4912644643880785787');" style="">1431         private boolean loadAndBindWorkspace() {                                                         </span>
<span class="3221067006114111971" onmouseenter="enter('3221067006114111971');" onmouseout="out('3221067006114111971');" style="">1432             mIsLoadingAndBindingWorkspace = true;                                                        </span>
<span  style="">1433                                                                                                          </span>
<span class="1537270917172214589" onmouseenter="enter('1537270917172214589');" onmouseout="out('1537270917172214589');" style="">1434             // Load the workspace                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1435             if (DEBUG_LOADERS) {                                                                         </span>
<span class="8901273111544619292" onmouseenter="enter('8901273111544619292');" onmouseout="out('8901273111544619292');" style="">1436                 Log.d(TAG, &quot;loadAndBindWorkspace mWorkspaceLoaded=&quot; + mWorkspaceLoaded);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1437             }                                                                                            </span>
<span  style="">1438                                                                                                          </span>
<span class="-7050118912026035967" onmouseenter="enter('-7050118912026035967');" onmouseout="out('-7050118912026035967');" style="">1439             boolean isUpgradePath = false;                                                               </span>
<span class="-6627511839388696673" onmouseenter="enter('-6627511839388696673');" onmouseout="out('-6627511839388696673');" style="">1440             if (!mWorkspaceLoaded) {                                                                     </span>
<span class="-5751837054227838000" onmouseenter="enter('-5751837054227838000');" onmouseout="out('-5751837054227838000');" style="">1441                 isUpgradePath = loadWorkspace();                                                         </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1442                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1443                     if (mStopped) {                                                                      </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1444                         return isUpgradePath;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1445                     }                                                                                    </span>
<span class="3247008524984054391" onmouseenter="enter('3247008524984054391');" onmouseout="out('3247008524984054391');" style="">1446                     mWorkspaceLoaded = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1447                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1448             }                                                                                            </span>
<span  style="">1449                                                                                                          </span>
<span class="8161409494754485761" onmouseenter="enter('8161409494754485761');" onmouseout="out('8161409494754485761');" style="">1450             // Bind the workspace                                                                        </span>
<span class="7984749853310309686" onmouseenter="enter('7984749853310309686');" onmouseout="out('7984749853310309686');" style="">1451             bindWorkspace(-1, isUpgradePath);                                                            </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1452             return isUpgradePath;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1453         }                                                                                                </span>
<span  style="">1454                                                                                                          </span>
<span class="-1989226029052835978" onmouseenter="enter('-1989226029052835978');" onmouseout="out('-1989226029052835978');" style="">1455         private void waitForIdle() {                                                                     </span>
<span class="755597645611528735" onmouseenter="enter('755597645611528735');" onmouseout="out('755597645611528735');" style="">1456             // Wait until the either we&#x27;re stopped or the other threads are done.                        </span>
<span class="-8727414813590658044" onmouseenter="enter('-8727414813590658044');" onmouseout="out('-8727414813590658044');" style="">1457             // This way we don&#x27;t start loading all apps until the workspace has settled                  </span>
<span class="519327046885180501" onmouseenter="enter('519327046885180501');" onmouseout="out('519327046885180501');" style="">1458             // down.                                                                                     </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1459             synchronized (LoaderTask.this) {                                                             </span>
<span class="-83798755248439808" onmouseenter="enter('-83798755248439808');" onmouseout="out('-83798755248439808');" style="">1460                 final long workspaceWaitTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;           </span>
<span  style="">1461                                                                                                          </span>
<span class="-8997106023930440912" onmouseenter="enter('-8997106023930440912');" onmouseout="out('-8997106023930440912');" style="">1462                 mHandler.postIdle(new Runnable() {                                                       </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1463                         public void run() {                                                              </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1464                             synchronized (LoaderTask.this) {                                             </span>
<span class="-4593766760064909367" onmouseenter="enter('-4593766760064909367');" onmouseout="out('-4593766760064909367');" style="">1465                                 mLoadAndBindStepFinished = true;                                         </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1466                                 if (DEBUG_LOADERS) {                                                     </span>
<span class="-7140275656523627984" onmouseenter="enter('-7140275656523627984');" onmouseout="out('-7140275656523627984');" style="">1467                                     Log.d(TAG, &quot;done with previous binding step&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1468                                 }                                                                        </span>
<span class="8111819661104992685" onmouseenter="enter('8111819661104992685');" onmouseout="out('8111819661104992685');" style="">1469                                 LoaderTask.this.notify();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1471                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1472                     });                                                                                  </span>
<span  style="">1473                                                                                                          </span>
<span class="7673579852599691461" onmouseenter="enter('7673579852599691461');" onmouseout="out('7673579852599691461');" style="">1474                 while (!mStopped &amp;&amp; !mLoadAndBindStepFinished &amp;&amp; !mFlushingWorkerThread) {               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1475                     try {                                                                                </span>
<span class="-1997675543177729859" onmouseenter="enter('-1997675543177729859');" onmouseout="out('-1997675543177729859');" style="">1476                         // Just in case mFlushingWorkerThread changes but we aren&#x27;t woken up,            </span>
<span class="4998753984474875942" onmouseenter="enter('4998753984474875942');" onmouseout="out('4998753984474875942');" style="">1477                         // wait no longer than 1sec at a time                                            </span>
<span class="1515790047903299628" onmouseenter="enter('1515790047903299628');" onmouseout="out('1515790047903299628');" style="">1478                         this.wait(1000);                                                                 </span>
<span class="3493957724480568133" onmouseenter="enter('3493957724480568133');" onmouseout="out('3493957724480568133');" style="">1479                     } catch (InterruptedException ex) {                                                  </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style="">1480                         // Ignore                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1481                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1482                 }                                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1483                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="-72139740866353106" onmouseenter="enter('-72139740866353106');" onmouseout="out('-72139740866353106');" style="">1484                     Log.d(TAG, &quot;waited &quot;                                                                 </span>
<span class="3094974955332165680" onmouseenter="enter('3094974955332165680');" onmouseout="out('3094974955332165680');" style="">1485                             + (SystemClock.uptimeMillis()-workspaceWaitTime)                             </span>
<span class="4719480645001782920" onmouseenter="enter('4719480645001782920');" onmouseout="out('4719480645001782920');" style="">1486                             + &quot;ms for previous step to finish binding&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1487                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1488             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1489         }                                                                                                </span>
<span  style="">1490                                                                                                          </span>
<span class="6003497491863497289" onmouseenter="enter('6003497491863497289');" onmouseout="out('6003497491863497289');" style="">1491         void runBindSynchronousPage(int synchronousBindPage) {                                           </span>
<span class="26631348189854486" onmouseenter="enter('26631348189854486');" onmouseout="out('26631348189854486');" style="">1492             if (synchronousBindPage == PagedView.INVALID_RESTORE_PAGE) {                                 </span>
<span class="-8503902330989669437" onmouseenter="enter('-8503902330989669437');" onmouseout="out('-8503902330989669437');" style="">1493                 // Ensure that we have a valid page index to load synchronously                          </span>
<span class="4351877111278684588" onmouseenter="enter('4351877111278684588');" onmouseout="out('4351877111278684588');" style="">1494                 throw new RuntimeException(&quot;Should not call runBindSynchronousPage() without &quot; +         </span>
<span class="-7231071987017264740" onmouseenter="enter('-7231071987017264740');" onmouseout="out('-7231071987017264740');" style="">1495                         &quot;valid page index&quot;);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1496             }                                                                                            </span>
<span class="-1078848978706070277" onmouseenter="enter('-1078848978706070277');" onmouseout="out('-1078848978706070277');" style="">1497             if (!mAllAppsLoaded || !mWorkspaceLoaded) {                                                  </span>
<span class="2879437365312389694" onmouseenter="enter('2879437365312389694');" onmouseout="out('2879437365312389694');" style="">1498                 // Ensure that we don&#x27;t try and bind a specified page when the pages have not been       </span>
<span class="169159946226030638" onmouseenter="enter('169159946226030638');" onmouseout="out('169159946226030638');" style="">1499                 // loaded already (we should load everything asynchronously in that case)                </span>
<span class="2803547673173241327" onmouseenter="enter('2803547673173241327');" onmouseout="out('2803547673173241327');" style="">1500                 throw new RuntimeException(&quot;Expecting AllApps and Workspace to be loaded&quot;);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1501             }                                                                                            </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1502             synchronized (mLock) {                                                                       </span>
<span class="6834879657722268045" onmouseenter="enter('6834879657722268045');" onmouseout="out('6834879657722268045');" style="">1503                 if (mIsLoaderTaskRunning) {                                                              </span>
<span class="3479473486057258175" onmouseenter="enter('3479473486057258175');" onmouseout="out('3479473486057258175');" style="">1504                     // Ensure that we are never running the background loading at this point since       </span>
<span class="5690931735845958615" onmouseenter="enter('5690931735845958615');" onmouseout="out('5690931735845958615');" style="">1505                     // we also touch the background collections                                          </span>
<span class="-8789687649412956769" onmouseenter="enter('-8789687649412956769');" onmouseout="out('-8789687649412956769');" style="">1506                     throw new RuntimeException(&quot;Error! Background loading is already running&quot;);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1507                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1508             }                                                                                            </span>
<span  style="">1509                                                                                                          </span>
<span class="4081886748823582405" onmouseenter="enter('4081886748823582405');" onmouseout="out('4081886748823582405');" style="">1510             // XXX: Throw an exception if we are already loading (since we touch the worker thread       </span>
<span class="-98490365064007765" onmouseenter="enter('-98490365064007765');" onmouseout="out('-98490365064007765');" style="">1511             //      data structures, we can&#x27;t allow any other thread to touch that data, but because     </span>
<span class="4680477662519922026" onmouseenter="enter('4680477662519922026');" onmouseout="out('4680477662519922026');" style="">1512             //      this call is synchronous, we can get away with not locking).                         </span>
<span  style="">1513                                                                                                          </span>
<span class="-6012373927983533730" onmouseenter="enter('-6012373927983533730');" onmouseout="out('-6012373927983533730');" style="">1514             // The LauncherModel is static in the LauncherAppState and mHandler may have queued          </span>
<span class="7586418927072898518" onmouseenter="enter('7586418927072898518');" onmouseout="out('7586418927072898518');" style="">1515             // operations from the previous activity.  We need to ensure that all queued operations      </span>
<span class="-70743228311848279" onmouseenter="enter('-70743228311848279');" onmouseout="out('-70743228311848279');" style="">1516             // are executed before any synchronous binding work is done.                                 </span>
<span class="-4498008587479034521" onmouseenter="enter('-4498008587479034521');" onmouseout="out('-4498008587479034521');" style="">1517             mHandler.flush();                                                                            </span>
<span  style="">1518                                                                                                          </span>
<span class="-3771221013488357479" onmouseenter="enter('-3771221013488357479');" onmouseout="out('-3771221013488357479');" style="">1519             // Divide the set of loaded items into those that we are binding synchronously, and          </span>
<span class="5224432435633178726" onmouseenter="enter('5224432435633178726');" onmouseout="out('5224432435633178726');" style="">1520             // everything else that is to be bound normally (asynchronously).                            </span>
<span class="-6685180061336045314" onmouseenter="enter('-6685180061336045314');" onmouseout="out('-6685180061336045314');" style="">1521             bindWorkspace(synchronousBindPage, false);                                                   </span>
<span class="6689685850222943783" onmouseenter="enter('6689685850222943783');" onmouseout="out('6689685850222943783');" style="">1522             // XXX: For now, continue posting the binding of AllApps as there are other issues that      </span>
<span class="-1574502332056641514" onmouseenter="enter('-1574502332056641514');" onmouseout="out('-1574502332056641514');" style="">1523             //      arise from that.                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">1524             onlyBindAllApps();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1525         }                                                                                                </span>
<span  style="">1526                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1527         public void run() {                                                                              </span>
<span class="5752535899438246447" onmouseenter="enter('5752535899438246447');" onmouseout="out('5752535899438246447');" style="">1528             boolean isUpgrade = false;                                                                   </span>
<span  style="">1529                                                                                                          </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1530             synchronized (mLock) {                                                                       </span>
<span class="4738665752688002399" onmouseenter="enter('4738665752688002399');" onmouseout="out('4738665752688002399');" style="">1531                 mIsLoaderTaskRunning = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1532             }                                                                                            </span>
<span class="-1737494436521525410" onmouseenter="enter('-1737494436521525410');" onmouseout="out('-1737494436521525410');" style="">1533             // Optimize for end-user experience: if the Launcher is up and // running with the           </span>
<span class="892988660615454533" onmouseenter="enter('892988660615454533');" onmouseout="out('892988660615454533');" style="">1534             // All Apps interface in the foreground, load All Apps first. Otherwise, load the            </span>
<span class="-1944482210197593446" onmouseenter="enter('-1944482210197593446');" onmouseout="out('-1944482210197593446');" style="">1535             // workspace first (default).                                                                </span>
<span class="-8128861992085659189" onmouseenter="enter('-8128861992085659189');" onmouseout="out('-8128861992085659189');" style="">1536             keep_running: {                                                                              </span>
<span class="2293067736949718284" onmouseenter="enter('2293067736949718284');" onmouseout="out('2293067736949718284');" style="">1537                 // Elevate priority when Home launches for the first time to avoid                       </span>
<span class="-1381926741216219064" onmouseenter="enter('-1381926741216219064');" onmouseout="out('-1381926741216219064');" style="">1538                 // starving at boot time. Staring at a blank home is not cool.                           </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1539                 synchronized (mLock) {                                                                   </span>
<span class="8946499537685848583" onmouseenter="enter('8946499537685848583');" onmouseout="out('8946499537685848583');" style="">1540                     if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to &quot; +                        </span>
<span class="1787109731546912352" onmouseenter="enter('1787109731546912352');" onmouseout="out('1787109731546912352');" style="">1541                             (mIsLaunching ? &quot;DEFAULT&quot; : &quot;BACKGROUND&quot;));                                  </span>
<span class="-1912109441925598991" onmouseenter="enter('-1912109441925598991');" onmouseout="out('-1912109441925598991');" style="">1542                     android.os.Process.setThreadPriority(mIsLaunching                                    </span>
<span class="-5572949467661441178" onmouseenter="enter('-5572949467661441178');" onmouseout="out('-5572949467661441178');" style="">1543                             ? Process.THREAD_PRIORITY_DEFAULT : Process.THREAD_PRIORITY_BACKGROUND);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1544                 }                                                                                        </span>
<span class="9220749004793568337" onmouseenter="enter('9220749004793568337');" onmouseout="out('9220749004793568337');" style="">1545                 if (DEBUG_LOADERS) Log.d(TAG, &quot;step 1: loading workspace&quot;);                              </span>
<span class="8482653655407072483" onmouseenter="enter('8482653655407072483');" onmouseout="out('8482653655407072483');" style="">1546                 isUpgrade = loadAndBindWorkspace();                                                      </span>
<span  style="">1547                                                                                                          </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1548                 if (mStopped) {                                                                          </span>
<span class="-6818805659412975442" onmouseenter="enter('-6818805659412975442');" onmouseout="out('-6818805659412975442');" style="">1549                     break keep_running;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1550                 }                                                                                        </span>
<span  style="">1551                                                                                                          </span>
<span class="-5777092162251517407" onmouseenter="enter('-5777092162251517407');" onmouseout="out('-5777092162251517407');" style="">1552                 // Whew! Hard work done.  Slow us down, and wait until the UI thread has                 </span>
<span class="-4075896614387769686" onmouseenter="enter('-4075896614387769686');" onmouseout="out('-4075896614387769686');" style="">1553                 // settled down.                                                                         </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1554                 synchronized (mLock) {                                                                   </span>
<span class="1926990202484285414" onmouseenter="enter('1926990202484285414');" onmouseout="out('1926990202484285414');" style="">1555                     if (mIsLaunching) {                                                                  </span>
<span class="-8046035155088057723" onmouseenter="enter('-8046035155088057723');" onmouseout="out('-8046035155088057723');" style="">1556                         if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to BACKGROUND&quot;);          </span>
<span class="6194754511830950532" onmouseenter="enter('6194754511830950532');" onmouseout="out('6194754511830950532');" style="">1557                         android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1558                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1559                 }                                                                                        </span>
<span class="2443484392604792624" onmouseenter="enter('2443484392604792624');" onmouseout="out('2443484392604792624');" style="">1560                 waitForIdle();                                                                           </span>
<span  style="">1561                                                                                                          </span>
<span class="1529750222663563109" onmouseenter="enter('1529750222663563109');" onmouseout="out('1529750222663563109');" style="">1562                 // second step                                                                           </span>
<span class="4805812105190008803" onmouseenter="enter('4805812105190008803');" onmouseout="out('4805812105190008803');" style="">1563                 if (DEBUG_LOADERS) Log.d(TAG, &quot;step 2: loading all apps&quot;);                               </span>
<span class="3758302759319518479" onmouseenter="enter('3758302759319518479');" onmouseout="out('3758302759319518479');" style="">1564                 loadAndBindAllApps();                                                                    </span>
<span  style="">1565                                                                                                          </span>
<span class="4031538869478111" onmouseenter="enter('4031538869478111');" onmouseout="out('4031538869478111');" style="">1566                 // Restore the default thread priority after we are done loading items                   </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1567                 synchronized (mLock) {                                                                   </span>
<span class="6299511964324687923" onmouseenter="enter('6299511964324687923');" onmouseout="out('6299511964324687923');" style="">1568                     android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_DEFAULT);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1569                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1570             }                                                                                            </span>
<span  style="">1571                                                                                                          </span>
<span class="3508545587953199453" onmouseenter="enter('3508545587953199453');" onmouseout="out('3508545587953199453');" style="">1572             // Update the saved icons if necessary                                                       </span>
<span class="-4757805943857079956" onmouseenter="enter('-4757805943857079956');" onmouseout="out('-4757805943857079956');" style="">1573             if (DEBUG_LOADERS) Log.d(TAG, &quot;Comparing loaded icons to database icons&quot;);                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1574             synchronized (sBgLock) {                                                                     </span>
<span class="5900553346724410681" onmouseenter="enter('5900553346724410681');" onmouseout="out('5900553346724410681');" style="">1575                 for (Object key : sBgDbIconCache.keySet()) {                                             </span>
<span class="404633043401473554" onmouseenter="enter('404633043401473554');" onmouseout="out('404633043401473554');" style="">1576                     updateSavedIcon(mContext, (ShortcutInfo) key, sBgDbIconCache.get(key));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1577                 }                                                                                        </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1578                 sBgDbIconCache.clear();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1579             }                                                                                            </span>
<span  style="">1580                                                                                                          </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">1581             if (LauncherAppState.isDisableAllApps()) {                                                   </span>
<span class="6125270178763735331" onmouseenter="enter('6125270178763735331');" onmouseout="out('6125270178763735331');" style="">1582                 // Ensure that all the applications that are in the system are                           </span>
<span class="305725628855266005" onmouseenter="enter('305725628855266005');" onmouseout="out('305725628855266005');" style="">1583                 // represented on the home screen.                                                       </span>
<span class="3562864863119627268" onmouseenter="enter('3562864863119627268');" onmouseout="out('3562864863119627268');" style="">1584                 if (!UPGRADE_USE_MORE_APPS_FOLDER || !isUpgrade) {                                       </span>
<span class="5095093339904195112" onmouseenter="enter('5095093339904195112');" onmouseout="out('5095093339904195112');" style="">1585                     verifyApplications();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1586                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1587             }                                                                                            </span>
<span  style="">1588                                                                                                          </span>
<span class="-745190257815883733" onmouseenter="enter('-745190257815883733');" onmouseout="out('-745190257815883733');" style="">1589             // Clear out this reference, otherwise we end up holding it until all of the                 </span>
<span class="4646172956484107396" onmouseenter="enter('4646172956484107396');" onmouseout="out('4646172956484107396');" style="">1590             // callback runnables are done.                                                              </span>
<span class="-5116782011037529434" onmouseenter="enter('-5116782011037529434');" onmouseout="out('-5116782011037529434');" style="">1591             mContext = null;                                                                             </span>
<span  style="">1592                                                                                                          </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1593             synchronized (mLock) {                                                                       </span>
<span class="-2953553521466488464" onmouseenter="enter('-2953553521466488464');" onmouseout="out('-2953553521466488464');" style="">1594                 // If we are still the last one to be scheduled, remove ourselves.                       </span>
<span class="-1560897046285527036" onmouseenter="enter('-1560897046285527036');" onmouseout="out('-1560897046285527036');" style="">1595                 if (mLoaderTask == this) {                                                               </span>
<span class="-8540970856372433004" onmouseenter="enter('-8540970856372433004');" onmouseout="out('-8540970856372433004');" style="">1596                     mLoaderTask = null;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1597                 }                                                                                        </span>
<span class="8472658350888958885" onmouseenter="enter('8472658350888958885');" onmouseout="out('8472658350888958885');" style="">1598                 mIsLoaderTaskRunning = false;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1599             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1600         }                                                                                                </span>
<span  style="">1601                                                                                                          </span>
<span class="200135487053889456" onmouseenter="enter('200135487053889456');" onmouseout="out('200135487053889456');" style="">1602         public void stopLocked() {                                                                       </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1603             synchronized (LoaderTask.this) {                                                             </span>
<span class="8214677179915027824" onmouseenter="enter('8214677179915027824');" onmouseout="out('8214677179915027824');" style="">1604                 mStopped = true;                                                                         </span>
<span class="3056713147428312392" onmouseenter="enter('3056713147428312392');" onmouseout="out('3056713147428312392');" style="">1605                 this.notify();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1606             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1607         }                                                                                                </span>
<span  style="">1608                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1609         /**                                                                                              </span>
<span class="8543020973836575883" onmouseenter="enter('8543020973836575883');" onmouseout="out('8543020973836575883');" style="">1610          * Gets the callbacks object.  If we&#x27;ve been stopped, or if the launcher object                  </span>
<span class="-5710779889390340322" onmouseenter="enter('-5710779889390340322');" onmouseout="out('-5710779889390340322');" style="">1611          * has somehow been garbage collected, return null instead.  Pass in the Callbacks               </span>
<span class="1695163395735776366" onmouseenter="enter('1695163395735776366');" onmouseout="out('1695163395735776366');" style="">1612          * object that was around when the deferred message was scheduled, and if there&#x27;s                </span>
<span class="7856411153887025232" onmouseenter="enter('7856411153887025232');" onmouseout="out('7856411153887025232');" style="">1613          * a new Callbacks object around then also return null.  This will save us from                  </span>
<span class="2242983124447893975" onmouseenter="enter('2242983124447893975');" onmouseout="out('2242983124447893975');" style="">1614          * calling onto it with data that will be ignored.                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1615          */                                                                                              </span>
<span class="-2719659093140206912" onmouseenter="enter('-2719659093140206912');" onmouseout="out('-2719659093140206912');" style="">1616         Callbacks tryGetCallbacks(Callbacks oldCallbacks) {                                              </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1617             synchronized (mLock) {                                                                       </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1618                 if (mStopped) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1619                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1620                 }                                                                                        </span>
<span  style="">1621                                                                                                          </span>
<span class="-1148437149844317216" onmouseenter="enter('-1148437149844317216');" onmouseout="out('-1148437149844317216');" style="">1622                 if (mCallbacks == null) {                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1623                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1624                 }                                                                                        </span>
<span  style="">1625                                                                                                          </span>
<span class="4487336468213395696" onmouseenter="enter('4487336468213395696');" onmouseout="out('4487336468213395696');" style="">1626                 final Callbacks callbacks = mCallbacks.get();                                            </span>
<span class="-1088473782403214817" onmouseenter="enter('-1088473782403214817');" onmouseout="out('-1088473782403214817');" style="">1627                 if (callbacks != oldCallbacks) {                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1628                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1629                 }                                                                                        </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">1630                 if (callbacks == null) {                                                                 </span>
<span class="-94531209925935523" onmouseenter="enter('-94531209925935523');" onmouseout="out('-94531209925935523');" style="">1631                     Log.w(TAG, &quot;no mCallbacks&quot;);                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1632                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1633                 }                                                                                        </span>
<span  style="">1634                                                                                                          </span>
<span class="7316466478630645098" onmouseenter="enter('7316466478630645098');" onmouseout="out('7316466478630645098');" style="">1635                 return callbacks;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1636             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1637         }                                                                                                </span>
<span  style="">1638                                                                                                          </span>
<span class="-732845747997402687" onmouseenter="enter('-732845747997402687');" onmouseout="out('-732845747997402687');" style="">1639         private void verifyApplications() {                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">1640             final Context context = mApp.getContext();                                                   </span>
<span  style="">1641                                                                                                          </span>
<span class="-895975897487385508" onmouseenter="enter('-895975897487385508');" onmouseout="out('-895975897487385508');" style="">1642             // Cross reference all the applications in our apps list with items in the workspace         </span>
<span class="-10165714367555844" onmouseenter="enter('-10165714367555844');" onmouseout="out('-10165714367555844');" style="">1643             ArrayList&lt;ItemInfo&gt; tmpInfos;                                                                </span>
<span class="-1498611641211142735" onmouseenter="enter('-1498611641211142735');" onmouseout="out('-1498611641211142735');" style="">1644             ArrayList&lt;ItemInfo&gt; added = new ArrayList&lt;ItemInfo&gt;();                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1645             synchronized (sBgLock) {                                                                     </span>
<span class="-8503045385813305184" onmouseenter="enter('-8503045385813305184');" onmouseout="out('-8503045385813305184');" style="">1646                 for (AppInfo app : mBgAllAppsList.data) {                                                </span>
<span class="8719756079786944918" onmouseenter="enter('8719756079786944918');" onmouseout="out('8719756079786944918');" style="">1647                     tmpInfos = getItemInfoForComponentName(app.componentName);                           </span>
<span class="2520781471180992241" onmouseenter="enter('2520781471180992241');" onmouseout="out('2520781471180992241');" style="">1648                     if (tmpInfos.isEmpty()) {                                                            </span>
<span class="-8553694446545507920" onmouseenter="enter('-8553694446545507920');" onmouseout="out('-8553694446545507920');" style="">1649                         // We are missing an application icon, so add this to the workspace              </span>
<span class="-4039639638749761552" onmouseenter="enter('-4039639638749761552');" onmouseout="out('-4039639638749761552');" style="">1650                         added.add(app);                                                                  </span>
<span class="-6087209586339664607" onmouseenter="enter('-6087209586339664607');" onmouseout="out('-6087209586339664607');" style="">1651                         // This is a rare event, so lets log it                                          </span>
<span class="-8409193735080295855" onmouseenter="enter('-8409193735080295855');" onmouseout="out('-8409193735080295855');" style="">1652                         Log.e(TAG, &quot;Missing Application on load: &quot; + app);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1653                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1654                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1655             }                                                                                            </span>
<span class="-3228275885243238792" onmouseenter="enter('-3228275885243238792');" onmouseout="out('-3228275885243238792');" style="">1656             if (!added.isEmpty()) {                                                                      </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">1657                 Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                             </span>
<span class="-7750968314744672785" onmouseenter="enter('-7750968314744672785');" onmouseout="out('-7750968314744672785');" style="">1658                 addAndBindAddedApps(context, added, cb, new ArrayList&lt;AppInfo&gt;());                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1659             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1660         }                                                                                                </span>
<span  style="">1661                                                                                                          </span>
<span class="1799876722918383990" onmouseenter="enter('1799876722918383990');" onmouseout="out('1799876722918383990');" style="">1662         // check &amp; update map of what&#x27;s occupied; used to discard overlapping/invalid items              </span>
<span class="1369641317894879083" onmouseenter="enter('1369641317894879083');" onmouseout="out('1369641317894879083');" style="">1663         private boolean checkItemPlacement(HashMap&lt;Long, ItemInfo[][]&gt; occupied, ItemInfo item,          </span>
<span class="-1114457745240921120" onmouseenter="enter('-1114457745240921120');" onmouseout="out('-1114457745240921120');" style="">1664                                            AtomicBoolean deleteOnInvalidPlacement) {                     </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1665             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1666             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="2610967815704817337" onmouseenter="enter('2610967815704817337');" onmouseout="out('2610967815704817337');" style="">1667             final int countX = (int) grid.numColumns;                                                    </span>
<span class="-4666114634626787340" onmouseenter="enter('-4666114634626787340');" onmouseout="out('-4666114634626787340');" style="">1668             final int countY = (int) grid.numRows;                                                       </span>
<span  style="">1669                                                                                                          </span>
<span class="6034161250987228772" onmouseenter="enter('6034161250987228772');" onmouseout="out('6034161250987228772');" style="">1670             long containerIndex = item.screenId;                                                         </span>
<span class="-7373493273183889597" onmouseenter="enter('-7373493273183889597');" onmouseout="out('-7373493273183889597');" style="">1671             if (item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                        </span>
<span class="2673995963777381740" onmouseenter="enter('2673995963777381740');" onmouseout="out('2673995963777381740');" style="">1672                 // Return early if we detect that an item is under the hotseat button                    </span>
<span class="8439501161968406722" onmouseenter="enter('8439501161968406722');" onmouseout="out('8439501161968406722');" style="">1673                 if (mCallbacks == null ||                                                                </span>
<span class="2765367117287235525" onmouseenter="enter('2765367117287235525');" onmouseout="out('2765367117287235525');" style="">1674                         mCallbacks.get().isAllAppsButtonRank((int) item.screenId)) {                     </span>
<span class="-5585792196891628830" onmouseenter="enter('-5585792196891628830');" onmouseout="out('-5585792196891628830');" style="">1675                     deleteOnInvalidPlacement.set(true);                                                  </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1676                     Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                             </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1677                             + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;                </span>
<span class="-6945266911057923165" onmouseenter="enter('-6945266911057923165');" onmouseout="out('-6945266911057923165');" style="">1678                             + item.cellY + &quot;) occupied by all apps&quot;);                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1679                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1680                 }                                                                                        </span>
<span  style="">1681                                                                                                          </span>
<span class="1283283798458548935" onmouseenter="enter('1283283798458548935');" onmouseout="out('1283283798458548935');" style="">1682                 final ItemInfo[][] hotseatItems =                                                        </span>
<span class="1949963606333422560" onmouseenter="enter('1949963606333422560');" onmouseout="out('1949963606333422560');" style="">1683                         occupied.get((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT);               </span>
<span  style="">1684                                                                                                          </span>
<span class="4306415300339150674" onmouseenter="enter('4306415300339150674');" onmouseout="out('4306415300339150674');" style="">1685                 if (item.screenId &gt;= grid.numHotseatIcons) {                                             </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1686                     Log.e(TAG, &quot;Error loading shortcut &quot; + item                                          </span>
<span class="5751503886607422325" onmouseenter="enter('5751503886607422325');" onmouseout="out('5751503886607422325');" style="">1687                             + &quot; into hotseat position &quot; + item.screenId                                  </span>
<span class="8586084608145250937" onmouseenter="enter('8586084608145250937');" onmouseout="out('8586084608145250937');" style="">1688                             + &quot;, position out of bounds: (0 to &quot; + (grid.numHotseatIcons - 1)            </span>
<span class="4670108460576455524" onmouseenter="enter('4670108460576455524');" onmouseout="out('4670108460576455524');" style="">1689                             + &quot;)&quot;);                                                                      </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1690                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1691                 }                                                                                        </span>
<span  style="">1692                                                                                                          </span>
<span class="-96711597696201103" onmouseenter="enter('-96711597696201103');" onmouseout="out('-96711597696201103');" style="">1693                 if (hotseatItems != null) {                                                              </span>
<span class="-5719492878362044891" onmouseenter="enter('-5719492878362044891');" onmouseout="out('-5719492878362044891');" style="">1694                     if (hotseatItems[(int) item.screenId][0] != null) {                                  </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1695                         Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                         </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1696                                 + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;            </span>
<span class="-5608765342526697238" onmouseenter="enter('-5608765342526697238');" onmouseout="out('-5608765342526697238');" style="">1697                                 + item.cellY + &quot;) occupied by &quot;                                          </span>
<span class="-9216450188742256868" onmouseenter="enter('-9216450188742256868');" onmouseout="out('-9216450188742256868');" style="">1698                                 + occupied.get(LauncherSettings.Favorites.CONTAINER_HOTSEAT)             </span>
<span class="8078550196904492215" onmouseenter="enter('8078550196904492215');" onmouseout="out('8078550196904492215');" style="">1699                                 [(int) item.screenId][0]);                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1700                             return false;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1701                     } else {                                                                             </span>
<span class="774944626646586019" onmouseenter="enter('774944626646586019');" onmouseout="out('774944626646586019');" style="">1702                         hotseatItems[(int) item.screenId][0] = item;                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1703                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1704                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1705                 } else {                                                                                 </span>
<span class="7358314474516221203" onmouseenter="enter('7358314474516221203');" onmouseout="out('7358314474516221203');" style="">1706                     final ItemInfo[][] items = new ItemInfo[(int) grid.numHotseatIcons][1];              </span>
<span class="-9070162012537345427" onmouseenter="enter('-9070162012537345427');" onmouseout="out('-9070162012537345427');" style="">1707                     items[(int) item.screenId][0] = item;                                                </span>
<span class="-8158366679753027651" onmouseenter="enter('-8158366679753027651');" onmouseout="out('-8158366679753027651');" style="">1708                     occupied.put((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT, items);            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1709                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1710                 }                                                                                        </span>
<span class="-303831338253138618" onmouseenter="enter('-303831338253138618');" onmouseout="out('-303831338253138618');" style="">1711             } else if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) {                 </span>
<span class="2023083187637338837" onmouseenter="enter('2023083187637338837');" onmouseout="out('2023083187637338837');" style="">1712                 // Skip further checking if it is not the hotseat or workspace container                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1713                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1714             }                                                                                            </span>
<span  style="">1715                                                                                                          </span>
<span class="4900594953050523912" onmouseenter="enter('4900594953050523912');" onmouseout="out('4900594953050523912');" style="">1716             if (!occupied.containsKey(item.screenId)) {                                                  </span>
<span class="4145930087010840378" onmouseenter="enter('4145930087010840378');" onmouseout="out('4145930087010840378');" style="">1717                 ItemInfo[][] items = new ItemInfo[countX + 1][countY + 1];                               </span>
<span class="1227421706021504577" onmouseenter="enter('1227421706021504577');" onmouseout="out('1227421706021504577');" style="">1718                 occupied.put(item.screenId, items);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1719             }                                                                                            </span>
<span  style="">1720                                                                                                          </span>
<span class="1896300602190974138" onmouseenter="enter('1896300602190974138');" onmouseout="out('1896300602190974138');" style="">1721             final ItemInfo[][] screens = occupied.get(item.screenId);                                    </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">1722             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                        </span>
<span class="-5368423457014206987" onmouseenter="enter('-5368423457014206987');" onmouseout="out('-5368423457014206987');" style="">1723                     item.cellX &lt; 0 || item.cellY &lt; 0 ||                                                  </span>
<span class="-4742334469567284144" onmouseenter="enter('-4742334469567284144');" onmouseout="out('-4742334469567284144');" style="">1724                     item.cellX + item.spanX &gt; countX || item.cellY + item.spanY &gt; countY) {              </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1725                 Log.e(TAG, &quot;Error loading shortcut &quot; + item                                              </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1726                         + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                    </span>
<span class="6594976635866090975" onmouseenter="enter('6594976635866090975');" onmouseout="out('6594976635866090975');" style="">1727                         + item.cellX + &quot;,&quot; + item.cellY                                                  </span>
<span class="7810872796641797088" onmouseenter="enter('7810872796641797088');" onmouseout="out('7810872796641797088');" style="">1728                         + &quot;) out of screen bounds ( &quot; + countX + &quot;x&quot; + countY + &quot;)&quot;);                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1729                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1730             }                                                                                            </span>
<span  style="">1731                                                                                                          </span>
<span class="-5156128896960485993" onmouseenter="enter('-5156128896960485993');" onmouseout="out('-5156128896960485993');" style="">1732             // Check if any workspace icons overlap with each other                                      </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1733             for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                 </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1734                 for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                             </span>
<span class="-6569355555223387047" onmouseenter="enter('-6569355555223387047');" onmouseout="out('-6569355555223387047');" style="">1735                     if (screens[x][y] != null) {                                                         </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1736                         Log.e(TAG, &quot;Error loading shortcut &quot; + item                                      </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1737                             + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                </span>
<span class="6817243246217428495" onmouseenter="enter('6817243246217428495');" onmouseout="out('6817243246217428495');" style="">1738                             + x + &quot;,&quot; + y                                                                </span>
<span class="5682441617128381013" onmouseenter="enter('5682441617128381013');" onmouseout="out('5682441617128381013');" style="">1739                             + &quot;) occupied by &quot;                                                           </span>
<span class="-1033476021967432581" onmouseenter="enter('-1033476021967432581');" onmouseout="out('-1033476021967432581');" style="">1740                             + screens[x][y]);                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1741                         return false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1742                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1743                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1744             }                                                                                            </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1745             for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                 </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1746                 for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                             </span>
<span class="4088526838574697064" onmouseenter="enter('4088526838574697064');" onmouseout="out('4088526838574697064');" style="">1747                     screens[x][y] = item;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1748                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1749             }                                                                                            </span>
<span  style="">1750                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1751             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1752         }                                                                                                </span>
<span  style="">1753                                                                                                          </span>
<span class="-7185136003210132674" onmouseenter="enter('-7185136003210132674');" onmouseout="out('-7185136003210132674');" style="">1754         /** Clears all the sBg data structures */                                                        </span>
<span class="1801132344752176061" onmouseenter="enter('1801132344752176061');" onmouseout="out('1801132344752176061');" style="">1755         private void clearSBgDataStructures() {                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1756             synchronized (sBgLock) {                                                                     </span>
<span class="-7129433888089157992" onmouseenter="enter('-7129433888089157992');" onmouseout="out('-7129433888089157992');" style="">1757                 sBgWorkspaceItems.clear();                                                               </span>
<span class="5052861278193385910" onmouseenter="enter('5052861278193385910');" onmouseout="out('5052861278193385910');" style="">1758                 sBgAppWidgets.clear();                                                                   </span>
<span class="3133219754838100126" onmouseenter="enter('3133219754838100126');" onmouseout="out('3133219754838100126');" style="">1759                 sBgFolders.clear();                                                                      </span>
<span class="-8505695193908377238" onmouseenter="enter('-8505695193908377238');" onmouseout="out('-8505695193908377238');" style="">1760                 sBgItemsIdMap.clear();                                                                   </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1761                 sBgDbIconCache.clear();                                                                  </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1762                 sBgWorkspaceScreens.clear();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1763             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1764         }                                                                                                </span>
<span  style="">1765                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1766         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-134197683999376379" onmouseenter="enter('-134197683999376379');" onmouseout="out('-134197683999376379');" style="">1767         private boolean loadWorkspace() {                                                                </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1768             // Log to disk                                                                               </span>
<span class="-1716174542198683127" onmouseenter="enter('-1716174542198683127');" onmouseout="out('-1716174542198683127');" style="">1769             Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspace()&quot;, true);                                </span>
<span  style="">1770                                                                                                          </span>
<span class="-1293377954506719064" onmouseenter="enter('-1293377954506719064');" onmouseout="out('-1293377954506719064');" style="">1771             final long t = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                               </span>
<span  style="">1772                                                                                                          </span>
<span class="-7540672363138308565" onmouseenter="enter('-7540672363138308565');" onmouseout="out('-7540672363138308565');" style="">1773             final Context context = mContext;                                                            </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1774             final ContentResolver contentResolver = context.getContentResolver();                        </span>
<span class="-2531056455834918617" onmouseenter="enter('-2531056455834918617');" onmouseout="out('-2531056455834918617');" style="">1775             final PackageManager manager = context.getPackageManager();                                  </span>
<span class="9164904653123292763" onmouseenter="enter('9164904653123292763');" onmouseout="out('9164904653123292763');" style="">1776             final AppWidgetManager widgets = AppWidgetManager.getInstance(context);                      </span>
<span class="-100432956626051671" onmouseenter="enter('-100432956626051671');" onmouseout="out('-100432956626051671');" style="">1777             final boolean isSafeMode = manager.isSafeMode();                                             </span>
<span  style="">1778                                                                                                          </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1779             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1780             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="-1268645472287944818" onmouseenter="enter('-1268645472287944818');" onmouseout="out('-1268645472287944818');" style="">1781             int countX = (int) grid.numColumns;                                                          </span>
<span class="5825733578535079508" onmouseenter="enter('5825733578535079508');" onmouseout="out('5825733578535079508');" style="">1782             int countY = (int) grid.numRows;                                                             </span>
<span  style="">1783                                                                                                          </span>
<span class="4685154999280536885" onmouseenter="enter('4685154999280536885');" onmouseout="out('4685154999280536885');" style="">1784             if ((mFlags &amp; LOADER_FLAG_CLEAR_WORKSPACE) != 0) {                                           </span>
<span class="1874866184467615023" onmouseenter="enter('1874866184467615023');" onmouseout="out('1874866184467615023');" style="">1785                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: resetting launcher database&quot;, true);            </span>
<span class="7130003991883838563" onmouseenter="enter('7130003991883838563');" onmouseout="out('7130003991883838563');" style="">1786                 LauncherAppState.getLauncherProvider().deleteDatabase();                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1787             }                                                                                            </span>
<span  style="">1788                                                                                                          </span>
<span class="1786245758308608184" onmouseenter="enter('1786245758308608184');" onmouseout="out('1786245758308608184');" style="">1789             if ((mFlags &amp; LOADER_FLAG_MIGRATE_SHORTCUTS) != 0) {                                         </span>
<span class="2622187273755861990" onmouseenter="enter('2622187273755861990');" onmouseout="out('2622187273755861990');" style="">1790                 // append the user&#x27;s Launcher2 shortcuts                                                 </span>
<span class="7991450201866933364" onmouseenter="enter('7991450201866933364');" onmouseout="out('7991450201866933364');" style="">1791                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: migrating from launcher2&quot;, true);               </span>
<span class="-4928149528895358870" onmouseenter="enter('-4928149528895358870');" onmouseout="out('-4928149528895358870');" style="">1792                 LauncherAppState.getLauncherProvider().migrateLauncher2Shortcuts();                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1793             } else {                                                                                     </span>
<span class="-6772917437561183819" onmouseenter="enter('-6772917437561183819');" onmouseout="out('-6772917437561183819');" style="">1794                 // Make sure the default workspace is loaded                                             </span>
<span class="3161347234478650527" onmouseenter="enter('3161347234478650527');" onmouseout="out('3161347234478650527');" style="">1795                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: loading default favorites&quot;, false);             </span>
<span class="8096870978202898311" onmouseenter="enter('8096870978202898311');" onmouseout="out('8096870978202898311');" style="">1796                 LauncherAppState.getLauncherProvider().loadDefaultFavoritesIfNecessary(0);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1797             }                                                                                            </span>
<span  style="">1798                                                                                                          </span>
<span class="-8222313360488017709" onmouseenter="enter('-8222313360488017709');" onmouseout="out('-8222313360488017709');" style="">1799             // Check if we need to do any upgrade-path logic                                             </span>
<span class="-995379543715394793" onmouseenter="enter('-995379543715394793');" onmouseout="out('-995379543715394793');" style="">1800             // (Includes having just imported default favorites)                                         </span>
<span class="-2313666044770114963" onmouseenter="enter('-2313666044770114963');" onmouseout="out('-2313666044770114963');" style="">1801             boolean loadedOldDb = LauncherAppState.getLauncherProvider().justLoadedOldDb();              </span>
<span  style="">1802                                                                                                          </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1803             // Log to disk                                                                               </span>
<span class="4915608034810943289" onmouseenter="enter('4915608034810943289');" onmouseout="out('4915608034810943289');" style="">1804             Launcher.addDumpLog(TAG, &quot;11683562 -   loadedOldDb: &quot; + loadedOldDb, true);                  </span>
<span  style="">1805                                                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1806             synchronized (sBgLock) {                                                                     </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">1807                 clearSBgDataStructures();                                                                </span>
<span  style="">1808                                                                                                          </span>
<span class="4830013596372552761" onmouseenter="enter('4830013596372552761');" onmouseout="out('4830013596372552761');" style="">1809                 final ArrayList&lt;Long&gt; itemsToRemove = new ArrayList&lt;Long&gt;();                             </span>
<span class="-771425693233218078" onmouseenter="enter('-771425693233218078');" onmouseout="out('-771425693233218078');" style="">1810                 final ArrayList&lt;Long&gt; restoredRows = new ArrayList&lt;Long&gt;();                              </span>
<span class="1337367669825309510" onmouseenter="enter('1337367669825309510');" onmouseout="out('1337367669825309510');" style="">1811                 final Uri contentUri = LauncherSettings.Favorites.CONTENT_URI;                           </span>
<span class="6883183902805060832" onmouseenter="enter('6883183902805060832');" onmouseout="out('6883183902805060832');" style="">1812                 if (DEBUG_LOADERS) Log.d(TAG, &quot;loading model from &quot; + contentUri);                       </span>
<span class="4124323585340312806" onmouseenter="enter('4124323585340312806');" onmouseout="out('4124323585340312806');" style="">1813                 final Cursor c = contentResolver.query(contentUri, null, null, null, null);              </span>
<span  style="">1814                                                                                                          </span>
<span class="-6846195559440228008" onmouseenter="enter('-6846195559440228008');" onmouseout="out('-6846195559440228008');" style="">1815                 // +1 for the hotseat (it can be larger than the workspace)                              </span>
<span class="-6570434370371395868" onmouseenter="enter('-6570434370371395868');" onmouseout="out('-6570434370371395868');" style="">1816                 // Load workspace in reverse order to ensure that latest items are loaded first (and     </span>
<span class="-2496742724026288329" onmouseenter="enter('-2496742724026288329');" onmouseout="out('-2496742724026288329');" style="">1817                 // before any earlier duplicates)                                                        </span>
<span class="-575539041300461201" onmouseenter="enter('-575539041300461201');" onmouseout="out('-575539041300461201');" style="">1818                 final HashMap&lt;Long, ItemInfo[][]&gt; occupied = new HashMap&lt;Long, ItemInfo[][]&gt;();          </span>
<span  style="">1819                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1820                 try {                                                                                    </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style="">1821                     final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);         </span>
<span class="498695732843703978" onmouseenter="enter('498695732843703978');" onmouseout="out('498695732843703978');" style="">1822                     final int intentIndex = c.getColumnIndexOrThrow                                      </span>
<span class="-2710863683168773760" onmouseenter="enter('-2710863683168773760');" onmouseout="out('-2710863683168773760');" style="">1823                             (LauncherSettings.Favorites.INTENT);                                         </span>
<span class="3135911520873448784" onmouseenter="enter('3135911520873448784');" onmouseout="out('3135911520873448784');" style="">1824                     final int titleIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-7080768452290664563" onmouseenter="enter('-7080768452290664563');" onmouseout="out('-7080768452290664563');" style="">1825                             (LauncherSettings.Favorites.TITLE);                                          </span>
<span class="-4350901823494792660" onmouseenter="enter('-4350901823494792660');" onmouseout="out('-4350901823494792660');" style="">1826                     final int iconTypeIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="3108347623629035166" onmouseenter="enter('3108347623629035166');" onmouseout="out('3108347623629035166');" style="">1827                             LauncherSettings.Favorites.ICON_TYPE);                                       </span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style="">1828                     final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);      </span>
<span class="-3909234361304575452" onmouseenter="enter('-3909234361304575452');" onmouseout="out('-3909234361304575452');" style="">1829                     final int iconPackageIndex = c.getColumnIndexOrThrow(                                </span>
<span class="-6787190495105525864" onmouseenter="enter('-6787190495105525864');" onmouseout="out('-6787190495105525864');" style="">1830                             LauncherSettings.Favorites.ICON_PACKAGE);                                    </span>
<span class="7790246664646081463" onmouseenter="enter('7790246664646081463');" onmouseout="out('7790246664646081463');" style="">1831                     final int iconResourceIndex = c.getColumnIndexOrThrow(                               </span>
<span class="-1781116612765105159" onmouseenter="enter('-1781116612765105159');" onmouseout="out('-1781116612765105159');" style="">1832                             LauncherSettings.Favorites.ICON_RESOURCE);                                   </span>
<span class="3335971636920715852" onmouseenter="enter('3335971636920715852');" onmouseout="out('3335971636920715852');" style="">1833                     final int containerIndex = c.getColumnIndexOrThrow(                                  </span>
<span class="6570903028117113418" onmouseenter="enter('6570903028117113418');" onmouseout="out('6570903028117113418');" style="">1834                             LauncherSettings.Favorites.CONTAINER);                                       </span>
<span class="-8309152441179821869" onmouseenter="enter('-8309152441179821869');" onmouseout="out('-8309152441179821869');" style="">1835                     final int itemTypeIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="7255885825914282267" onmouseenter="enter('7255885825914282267');" onmouseout="out('7255885825914282267');" style="">1836                             LauncherSettings.Favorites.ITEM_TYPE);                                       </span>
<span class="-9034335384452522965" onmouseenter="enter('-9034335384452522965');" onmouseout="out('-9034335384452522965');" style="">1837                     final int appWidgetIdIndex = c.getColumnIndexOrThrow(                                </span>
<span class="6807201781176448908" onmouseenter="enter('6807201781176448908');" onmouseout="out('6807201781176448908');" style="">1838                             LauncherSettings.Favorites.APPWIDGET_ID);                                    </span>
<span class="-6125671603078297888" onmouseenter="enter('-6125671603078297888');" onmouseout="out('-6125671603078297888');" style="">1839                     final int appWidgetProviderIndex = c.getColumnIndexOrThrow(                          </span>
<span class="4426033877353236522" onmouseenter="enter('4426033877353236522');" onmouseout="out('4426033877353236522');" style="">1840                             LauncherSettings.Favorites.APPWIDGET_PROVIDER);                              </span>
<span class="-3079236723582024955" onmouseenter="enter('-3079236723582024955');" onmouseout="out('-3079236723582024955');" style="">1841                     final int screenIndex = c.getColumnIndexOrThrow(                                     </span>
<span class="-6667712815858132414" onmouseenter="enter('-6667712815858132414');" onmouseout="out('-6667712815858132414');" style="">1842                             LauncherSettings.Favorites.SCREEN);                                          </span>
<span class="-6867547874094352828" onmouseenter="enter('-6867547874094352828');" onmouseout="out('-6867547874094352828');" style="">1843                     final int cellXIndex = c.getColumnIndexOrThrow                                       </span>
<span class="5262774206366152748" onmouseenter="enter('5262774206366152748');" onmouseout="out('5262774206366152748');" style="">1844                             (LauncherSettings.Favorites.CELLX);                                          </span>
<span class="8831781951312982826" onmouseenter="enter('8831781951312982826');" onmouseout="out('8831781951312982826');" style="">1845                     final int cellYIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-5037082342925021952" onmouseenter="enter('-5037082342925021952');" onmouseout="out('-5037082342925021952');" style="">1846                             (LauncherSettings.Favorites.CELLY);                                          </span>
<span class="4727532435646923125" onmouseenter="enter('4727532435646923125');" onmouseout="out('4727532435646923125');" style="">1847                     final int spanXIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-4661771410814353054" onmouseenter="enter('-4661771410814353054');" onmouseout="out('-4661771410814353054');" style="">1848                             (LauncherSettings.Favorites.SPANX);                                          </span>
<span class="-2910068933310438864" onmouseenter="enter('-2910068933310438864');" onmouseout="out('-2910068933310438864');" style="">1849                     final int spanYIndex = c.getColumnIndexOrThrow(                                      </span>
<span class="99270330838913893" onmouseenter="enter('99270330838913893');" onmouseout="out('99270330838913893');" style="">1850                             LauncherSettings.Favorites.SPANY);                                           </span>
<span class="4436227568732015168" onmouseenter="enter('4436227568732015168');" onmouseout="out('4436227568732015168');" style="">1851                     final int restoredIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="6353272533239034373" onmouseenter="enter('6353272533239034373');" onmouseout="out('6353272533239034373');" style="">1852                             LauncherSettings.Favorites.RESTORED);                                        </span>
<span class="4456964937873623262" onmouseenter="enter('4456964937873623262');" onmouseout="out('4456964937873623262');" style="">1853                     //final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);      </span>
<span class="2905983584052764586" onmouseenter="enter('2905983584052764586');" onmouseout="out('2905983584052764586');" style="">1854                     //final int displayModeIndex = c.getColumnIndexOrThrow(                              </span>
<span class="-8556687182597342656" onmouseenter="enter('-8556687182597342656');" onmouseout="out('-8556687182597342656');" style="">1855                     //        LauncherSettings.Favorites.DISPLAY_MODE);                                  </span>
<span  style="">1856                                                                                                          </span>
<span class="-6687913296565100881" onmouseenter="enter('-6687913296565100881');" onmouseout="out('-6687913296565100881');" style="">1857                     ShortcutInfo info;                                                                   </span>
<span class="-4294155297126257121" onmouseenter="enter('-4294155297126257121');" onmouseout="out('-4294155297126257121');" style="">1858                     String intentDescription;                                                            </span>
<span class="1875374791140575019" onmouseenter="enter('1875374791140575019');" onmouseout="out('1875374791140575019');" style="">1859                     LauncherAppWidgetInfo appWidgetInfo;                                                 </span>
<span class="-7299509265635558160" onmouseenter="enter('-7299509265635558160');" onmouseout="out('-7299509265635558160');" style="">1860                     int container;                                                                       </span>
<span class="3268793718289878117" onmouseenter="enter('3268793718289878117');" onmouseout="out('3268793718289878117');" style="">1861                     long id;                                                                             </span>
<span class="-7461708883398711413" onmouseenter="enter('-7461708883398711413');" onmouseout="out('-7461708883398711413');" style="">1862                     Intent intent;                                                                       </span>
<span  style="">1863                                                                                                          </span>
<span class="1538645125823697533" onmouseenter="enter('1538645125823697533');" onmouseout="out('1538645125823697533');" style="">1864                     while (!mStopped &amp;&amp; c.moveToNext()) {                                                </span>
<span class="-3056870665611820276" onmouseenter="enter('-3056870665611820276');" onmouseout="out('-3056870665611820276');" style="">1865                         AtomicBoolean deleteOnInvalidPlacement = new AtomicBoolean(false);               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1866                         try {                                                                            </span>
<span class="-4443967809239824632" onmouseenter="enter('-4443967809239824632');" onmouseout="out('-4443967809239824632');" style="">1867                             int itemType = c.getInt(itemTypeIndex);                                      </span>
<span class="7426878920983746504" onmouseenter="enter('7426878920983746504');" onmouseout="out('7426878920983746504');" style="">1868                             boolean restored = 0 != c.getInt(restoredIndex);                             </span>
<span  style="">1869                                                                                                          </span>
<span class="-5665081285487591411" onmouseenter="enter('-5665081285487591411');" onmouseout="out('-5665081285487591411');" style="">1870                             switch (itemType) {                                                          </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1871                             case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                       </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1872                             case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                          </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1873                                 id = c.getLong(idIndex);                                                 </span>
<span class="8199742400390876563" onmouseenter="enter('8199742400390876563');" onmouseout="out('8199742400390876563');" style="">1874                                 intentDescription = c.getString(intentIndex);                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1875                                 try {                                                                    </span>
<span class="-1059471947143689601" onmouseenter="enter('-1059471947143689601');" onmouseout="out('-1059471947143689601');" style="">1876                                     intent = Intent.parseUri(intentDescription, 0);                      </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style="">1877                                     ComponentName cn = intent.getComponent();                            </span>
<span class="6294222122453554998" onmouseenter="enter('6294222122453554998');" onmouseout="out('6294222122453554998');" style="">1878                                     if (cn != null &amp;&amp; !isValidPackageComponent(manager, cn)) {           </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1879                                         if (restored) {                                                  </span>
<span class="-4075692845887634995" onmouseenter="enter('-4075692845887634995');" onmouseout="out('-4075692845887634995');" style="">1880                                             // might be installed later                                  </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1881                                             Launcher.addDumpLog(TAG,                                     </span>
<span class="1853248294024116603" onmouseenter="enter('1853248294024116603');" onmouseout="out('1853248294024116603');" style="">1882                                                     &quot;package not yet restored: &quot; + cn, true);            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1883                                         } else {                                                         </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">1884                                             if (!mAppsCanBeOnRemoveableStorage) {                        </span>
<span class="-1319340498640723993" onmouseenter="enter('-1319340498640723993');" onmouseout="out('-1319340498640723993');" style="">1885                                                 // Log the invalid package, and remove it                </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1886                                                 Launcher.addDumpLog(TAG,                                 </span>
<span class="556389557067898835" onmouseenter="enter('556389557067898835');" onmouseout="out('556389557067898835');" style="">1887                                                         &quot;Invalid package removed: &quot; + cn, true);         </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1888                                                 itemsToRemove.add(id);                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1889                                             } else {                                                     </span>
<span class="1135766729630553535" onmouseenter="enter('1135766729630553535');" onmouseout="out('1135766729630553535');" style="">1890                                                 // If apps can be on external storage, then we just      </span>
<span class="5840340868837727294" onmouseenter="enter('5840340868837727294');" onmouseout="out('5840340868837727294');" style="">1891                                                 // leave them for the user to remove (maybe add          </span>
<span class="1838795663890338817" onmouseenter="enter('1838795663890338817');" onmouseout="out('1838795663890338817');" style="">1892                                                 // visual treatment to it)                               </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1893                                                 Launcher.addDumpLog(TAG,                                 </span>
<span class="2228900775203516519" onmouseenter="enter('2228900775203516519');" onmouseout="out('2228900775203516519');" style="">1894                                                         &quot;Invalid package found: &quot; + cn, true);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1895                                             }                                                            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1896                                             continue;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1897                                         }                                                                </span>
<span class="8327580054957946681" onmouseenter="enter('8327580054957946681');" onmouseout="out('8327580054957946681');" style="">1898                                     } else if (restored) {                                               </span>
<span class="-9024381775763282363" onmouseenter="enter('-9024381775763282363');" onmouseout="out('-9024381775763282363');" style="">1899                                         // no special handling necessary for this restored item          </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">1900                                         restoredRows.add(id);                                            </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">1901                                         restored = false;                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1902                                     }                                                                    </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">1903                                 } catch (URISyntaxException e) {                                         </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1904                                     Launcher.addDumpLog(TAG,                                             </span>
<span class="-68540878136764174" onmouseenter="enter('-68540878136764174');" onmouseout="out('-68540878136764174');" style="">1905                                             &quot;Invalid uri: &quot; + intentDescription, true);                  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1906                                     continue;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1907                                 }                                                                        </span>
<span  style="">1908                                                                                                          </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1909                                 if (restored) {                                                          </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1910                                     Launcher.addDumpLog(TAG,                                             </span>
<span class="-7520999071046454576" onmouseenter="enter('-7520999071046454576');" onmouseout="out('-7520999071046454576');" style="">1911                                             &quot;constructing info for partially restored package&quot;,          </span>
<span class="-159362617709534437" onmouseenter="enter('-159362617709534437');" onmouseout="out('-159362617709534437');" style="">1912                                             true);                                                       </span>
<span class="2209760928415101992" onmouseenter="enter('2209760928415101992');" onmouseout="out('2209760928415101992');" style="">1913                                     info = getRestoredItemInfo(c, titleIndex);                           </span>
<span class="1789530273111871261" onmouseenter="enter('1789530273111871261');" onmouseout="out('1789530273111871261');" style="">1914                                     intent = getRestoredItemIntent(c, context, intent);                  </span>
<span class="2485815571182318046" onmouseenter="enter('2485815571182318046');" onmouseout="out('2485815571182318046');" style="">1915                                 } else if (itemType ==                                                   </span>
<span class="2369871960694556087" onmouseenter="enter('2369871960694556087');" onmouseout="out('2369871960694556087');" style="">1916                                         LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) {              </span>
<span class="8194872455546731015" onmouseenter="enter('8194872455546731015');" onmouseout="out('8194872455546731015');" style="">1917                                     info = getShortcutInfo(manager, intent, context, c, iconIndex,       </span>
<span class="-2187398528357571993" onmouseenter="enter('-2187398528357571993');" onmouseout="out('-2187398528357571993');" style="">1918                                             titleIndex, mLabelCache);                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1919                                 } else {                                                                 </span>
<span class="-7258494880704199189" onmouseenter="enter('-7258494880704199189');" onmouseout="out('-7258494880704199189');" style="">1920                                     info = getShortcutInfo(c, context, iconTypeIndex,                    </span>
<span class="6962748064109777554" onmouseenter="enter('6962748064109777554');" onmouseout="out('6962748064109777554');" style="">1921                                             iconPackageIndex, iconResourceIndex, iconIndex,              </span>
<span class="-1562426884587851404" onmouseenter="enter('-1562426884587851404');" onmouseout="out('-1562426884587851404');" style="">1922                                             titleIndex);                                                 </span>
<span  style="">1923                                                                                                          </span>
<span class="8787316375412349400" onmouseenter="enter('8787316375412349400');" onmouseout="out('8787316375412349400');" style="">1924                                     // App shortcuts that used to be automatically added to Launcher     </span>
<span class="4423348586531939182" onmouseenter="enter('4423348586531939182');" onmouseout="out('4423348586531939182');" style="">1925                                     // didn&#x27;t always have the correct intent flags set, so do that       </span>
<span class="906874877447394391" onmouseenter="enter('906874877447394391');" onmouseout="out('906874877447394391');" style="">1926                                     // here                                                              </span>
<span class="-8302893811746412301" onmouseenter="enter('-8302893811746412301');" onmouseout="out('-8302893811746412301');" style="">1927                                     if (intent.getAction() != null &amp;&amp;                                    </span>
<span class="-6792431597223839871" onmouseenter="enter('-6792431597223839871');" onmouseout="out('-6792431597223839871');" style="">1928                                         intent.getCategories() != null &amp;&amp;                                </span>
<span class="-4482526573741019726" onmouseenter="enter('-4482526573741019726');" onmouseout="out('-4482526573741019726');" style="">1929                                         intent.getAction().equals(Intent.ACTION_MAIN) &amp;&amp;                 </span>
<span class="8802373298636081036" onmouseenter="enter('8802373298636081036');" onmouseout="out('8802373298636081036');" style="">1930                                         intent.getCategories().contains(Intent.CATEGORY_LAUNCHER)) {     </span>
<span class="-1437204964726011747" onmouseenter="enter('-1437204964726011747');" onmouseout="out('-1437204964726011747');" style="">1931                                         intent.addFlags(                                                 </span>
<span class="7533444403523837279" onmouseenter="enter('7533444403523837279');" onmouseout="out('7533444403523837279');" style="">1932                                             Intent.FLAG_ACTIVITY_NEW_TASK |                              </span>
<span class="754211306232040187" onmouseenter="enter('754211306232040187');" onmouseout="out('754211306232040187');" style="">1933                                             Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1934                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1935                                 }                                                                        </span>
<span  style="">1936                                                                                                          </span>
<span class="-1845287058566655413" onmouseenter="enter('-1845287058566655413');" onmouseout="out('-1845287058566655413');" style="">1937                                 if (info != null) {                                                      </span>
<span class="-7372776081672801393" onmouseenter="enter('-7372776081672801393');" onmouseout="out('-7372776081672801393');" style="">1938                                     info.id = id;                                                        </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">1939                                     info.intent = intent;                                                </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">1940                                     container = c.getInt(containerIndex);                                </span>
<span class="5031599210604047094" onmouseenter="enter('5031599210604047094');" onmouseout="out('5031599210604047094');" style="">1941                                     info.container = container;                                          </span>
<span class="8385513109144822406" onmouseenter="enter('8385513109144822406');" onmouseout="out('8385513109144822406');" style="">1942                                     info.screenId = c.getInt(screenIndex);                               </span>
<span class="8733666235794055799" onmouseenter="enter('8733666235794055799');" onmouseout="out('8733666235794055799');" style="">1943                                     info.cellX = c.getInt(cellXIndex);                                   </span>
<span class="4988345900238836581" onmouseenter="enter('4988345900238836581');" onmouseout="out('4988345900238836581');" style="">1944                                     info.cellY = c.getInt(cellYIndex);                                   </span>
<span class="6314319831626461685" onmouseenter="enter('6314319831626461685');" onmouseout="out('6314319831626461685');" style="">1945                                     info.spanX = 1;                                                      </span>
<span class="-7635592400178984643" onmouseenter="enter('-7635592400178984643');" onmouseout="out('-7635592400178984643');" style="">1946                                     info.spanY = 1;                                                      </span>
<span  style="">1947                                                                                                          </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">1948                                     // check &amp; update map of what&#x27;s occupied                             </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">1949                                     deleteOnInvalidPlacement.set(false);                                 </span>
<span class="8488570468437690238" onmouseenter="enter('8488570468437690238');" onmouseout="out('8488570468437690238');" style="">1950                                     if (!checkItemPlacement(occupied, info, deleteOnInvalidPlacement)) { </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">1951                                         if (deleteOnInvalidPlacement.get()) {                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1952                                             itemsToRemove.add(id);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1953                                         }                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1954                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1955                                     }                                                                    </span>
<span  style="">1956                                                                                                          </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">1957                                     switch (container) {                                                 </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">1958                                     case LauncherSettings.Favorites.CONTAINER_DESKTOP:                   </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">1959                                     case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                   </span>
<span class="-3665356032627215639" onmouseenter="enter('-3665356032627215639');" onmouseout="out('-3665356032627215639');" style="">1960                                         sBgWorkspaceItems.add(info);                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1961                                         break;                                                           </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">1962                                     default:                                                             </span>
<span class="3928258456344537563" onmouseenter="enter('3928258456344537563');" onmouseout="out('3928258456344537563');" style="">1963                                         // Item is in a user folder                                      </span>
<span class="7253808449036323039" onmouseenter="enter('7253808449036323039');" onmouseout="out('7253808449036323039');" style="">1964                                         FolderInfo folderInfo =                                          </span>
<span class="5827700611550420594" onmouseenter="enter('5827700611550420594');" onmouseout="out('5827700611550420594');" style="">1965                                                 findOrMakeFolder(sBgFolders, container);                 </span>
<span class="4210631970925384436" onmouseenter="enter('4210631970925384436');" onmouseout="out('4210631970925384436');" style="">1966                                         folderInfo.add(info);                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1967                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1968                                     }                                                                    </span>
<span class="-3593974647070903374" onmouseenter="enter('-3593974647070903374');" onmouseout="out('-3593974647070903374');" style="">1969                                     sBgItemsIdMap.put(info.id, info);                                    </span>
<span  style="">1970                                                                                                          </span>
<span class="-8292894264257510493" onmouseenter="enter('-8292894264257510493');" onmouseout="out('-8292894264257510493');" style="">1971                                     // now that we&#x27;ve loaded everthing re-save it with the               </span>
<span class="-1917607236140731811" onmouseenter="enter('-1917607236140731811');" onmouseout="out('-1917607236140731811');" style="">1972                                     // icon in case it disappears somehow.                               </span>
<span class="-3056528193758781985" onmouseenter="enter('-3056528193758781985');" onmouseout="out('-3056528193758781985');" style="">1973                                     queueIconToBeChecked(sBgDbIconCache, info, c, iconIndex);            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1974                                 } else {                                                                 </span>
<span class="477637279977673890" onmouseenter="enter('477637279977673890');" onmouseout="out('477637279977673890');" style="">1975                                     throw new RuntimeException(&quot;Unexpected null ShortcutInfo&quot;);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1976                                 }                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1977                                 break;                                                                   </span>
<span  style="">1978                                                                                                          </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1979                             case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                            </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1980                                 id = c.getLong(idIndex);                                                 </span>
<span class="-711784092642716417" onmouseenter="enter('-711784092642716417');" onmouseout="out('-711784092642716417');" style="">1981                                 FolderInfo folderInfo = findOrMakeFolder(sBgFolders, id);                </span>
<span  style="">1982                                                                                                          </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style="">1983                                 folderInfo.title = c.getString(titleIndex);                              </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style="">1984                                 folderInfo.id = id;                                                      </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">1985                                 container = c.getInt(containerIndex);                                    </span>
<span class="-7029361904102133577" onmouseenter="enter('-7029361904102133577');" onmouseout="out('-7029361904102133577');" style="">1986                                 folderInfo.container = container;                                        </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style="">1987                                 folderInfo.screenId = c.getInt(screenIndex);                             </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style="">1988                                 folderInfo.cellX = c.getInt(cellXIndex);                                 </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style="">1989                                 folderInfo.cellY = c.getInt(cellYIndex);                                 </span>
<span class="5610283855861400391" onmouseenter="enter('5610283855861400391');" onmouseout="out('5610283855861400391');" style="">1990                                 folderInfo.spanX = 1;                                                    </span>
<span class="-3495026741287589829" onmouseenter="enter('-3495026741287589829');" onmouseout="out('-3495026741287589829');" style="">1991                                 folderInfo.spanY = 1;                                                    </span>
<span  style="">1992                                                                                                          </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">1993                                 // check &amp; update map of what&#x27;s occupied                                 </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">1994                                 deleteOnInvalidPlacement.set(false);                                     </span>
<span class="-7285209150210174951" onmouseenter="enter('-7285209150210174951');" onmouseout="out('-7285209150210174951');" style="">1995                                 if (!checkItemPlacement(occupied, folderInfo,                            </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">1996                                         deleteOnInvalidPlacement)) {                                     </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">1997                                     if (deleteOnInvalidPlacement.get()) {                                </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1998                                         itemsToRemove.add(id);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1999                                     }                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2000                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2001                                 }                                                                        </span>
<span  style="">2002                                                                                                          </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">2003                                 switch (container) {                                                     </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">2004                                     case LauncherSettings.Favorites.CONTAINER_DESKTOP:                   </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">2005                                     case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                   </span>
<span class="-8699935089398023363" onmouseenter="enter('-8699935089398023363');" onmouseout="out('-8699935089398023363');" style="">2006                                         sBgWorkspaceItems.add(folderInfo);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2007                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2008                                 }                                                                        </span>
<span  style="">2009                                                                                                          </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">2010                                 if (restored) {                                                          </span>
<span class="-4442362781295313201" onmouseenter="enter('-4442362781295313201');" onmouseout="out('-4442362781295313201');" style="">2011                                     // no special handling required for restored folders                 </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2012                                     restoredRows.add(id);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2013                                 }                                                                        </span>
<span  style="">2014                                                                                                          </span>
<span class="-3375208674862622715" onmouseenter="enter('-3375208674862622715');" onmouseout="out('-3375208674862622715');" style="">2015                                 sBgItemsIdMap.put(folderInfo.id, folderInfo);                            </span>
<span class="642717865586237287" onmouseenter="enter('642717865586237287');" onmouseout="out('642717865586237287');" style="">2016                                 sBgFolders.put(folderInfo.id, folderInfo);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2017                                 break;                                                                   </span>
<span  style="">2018                                                                                                          </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">2019                             case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                         </span>
<span class="-7956270215965694003" onmouseenter="enter('-7956270215965694003');" onmouseout="out('-7956270215965694003');" style="">2020                                 // Read all Launcher-specific widget details                             </span>
<span class="-1812352292626846958" onmouseenter="enter('-1812352292626846958');" onmouseout="out('-1812352292626846958');" style="">2021                                 int appWidgetId = c.getInt(appWidgetIdIndex);                            </span>
<span class="7731617805561144619" onmouseenter="enter('7731617805561144619');" onmouseout="out('7731617805561144619');" style="">2022                                 String savedProvider = c.getString(appWidgetProviderIndex);              </span>
<span  style="">2023                                                                                                          </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2024                                 id = c.getLong(idIndex);                                                 </span>
<span  style="">2025                                                                                                          </span>
<span class="-94114412789236238" onmouseenter="enter('-94114412789236238');" onmouseout="out('-94114412789236238');" style="">2026                                 final AppWidgetProviderInfo provider =                                   </span>
<span class="1226551708060925883" onmouseenter="enter('1226551708060925883');" onmouseout="out('1226551708060925883');" style="">2027                                         widgets.getAppWidgetInfo(appWidgetId);                           </span>
<span  style="">2028                                                                                                          </span>
<span class="-3663768974834964011" onmouseenter="enter('-3663768974834964011');" onmouseout="out('-3663768974834964011');" style="">2029                                 if (!isSafeMode &amp;&amp; (provider == null || provider.provider == null ||     </span>
<span class="5896854251752877894" onmouseenter="enter('5896854251752877894');" onmouseout="out('5896854251752877894');" style="">2030                                         provider.provider.getPackageName() == null)) {                   </span>
<span class="6295139059851294613" onmouseenter="enter('6295139059851294613');" onmouseout="out('6295139059851294613');" style="">2031                                     String log = &quot;Deleting widget that isn&#x27;t installed anymore: id=&quot;     </span>
<span class="-582482747679217469" onmouseenter="enter('-582482747679217469');" onmouseout="out('-582482747679217469');" style="">2032                                         + id + &quot; appWidgetId=&quot; + appWidgetId;                            </span>
<span class="-1161653447976501517" onmouseenter="enter('-1161653447976501517');" onmouseout="out('-1161653447976501517');" style="">2033                                     Log.e(TAG, log);                                                     </span>
<span class="-8769286334876902652" onmouseenter="enter('-8769286334876902652');" onmouseout="out('-8769286334876902652');" style="">2034                                     Launcher.addDumpLog(TAG, log, false);                                </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2035                                     itemsToRemove.add(id);                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2036                                 } else {                                                                 </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="">2037                                     appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,               </span>
<span class="-1699940082949791423" onmouseenter="enter('-1699940082949791423');" onmouseout="out('-1699940082949791423');" style="">2038                                             provider.provider);                                          </span>
<span class="-3490214853915757695" onmouseenter="enter('-3490214853915757695');" onmouseout="out('-3490214853915757695');" style="">2039                                     appWidgetInfo.id = id;                                               </span>
<span class="-299823112742514494" onmouseenter="enter('-299823112742514494');" onmouseout="out('-299823112742514494');" style="">2040                                     appWidgetInfo.screenId = c.getInt(screenIndex);                      </span>
<span class="-3031374252236192886" onmouseenter="enter('-3031374252236192886');" onmouseout="out('-3031374252236192886');" style="">2041                                     appWidgetInfo.cellX = c.getInt(cellXIndex);                          </span>
<span class="-6373958662014470902" onmouseenter="enter('-6373958662014470902');" onmouseout="out('-6373958662014470902');" style="">2042                                     appWidgetInfo.cellY = c.getInt(cellYIndex);                          </span>
<span class="-1172974300892817728" onmouseenter="enter('-1172974300892817728');" onmouseout="out('-1172974300892817728');" style="">2043                                     appWidgetInfo.spanX = c.getInt(spanXIndex);                          </span>
<span class="948367348399442562" onmouseenter="enter('948367348399442562');" onmouseout="out('948367348399442562');" style="">2044                                     appWidgetInfo.spanY = c.getInt(spanYIndex);                          </span>
<span class="-5791068135067534357" onmouseenter="enter('-5791068135067534357');" onmouseout="out('-5791068135067534357');" style="">2045                                     int[] minSpan = Launcher.getMinSpanForWidget(context, provider);     </span>
<span class="663337698221632344" onmouseenter="enter('663337698221632344');" onmouseout="out('663337698221632344');" style="">2046                                     appWidgetInfo.minSpanX = minSpan[0];                                 </span>
<span class="-1876557735779698161" onmouseenter="enter('-1876557735779698161');" onmouseout="out('-1876557735779698161');" style="">2047                                     appWidgetInfo.minSpanY = minSpan[1];                                 </span>
<span  style="">2048                                                                                                          </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2049                                     container = c.getInt(containerIndex);                                </span>
<span class="8804482754730728288" onmouseenter="enter('8804482754730728288');" onmouseout="out('8804482754730728288');" style="">2050                                     if (container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;     </span>
<span class="-8875646165072629077" onmouseenter="enter('-8875646165072629077');" onmouseout="out('-8875646165072629077');" style="">2051                                         container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {     </span>
<span class="8088576139032825639" onmouseenter="enter('8088576139032825639');" onmouseout="out('8088576139032825639');" style="">2052                                         Log.e(TAG, &quot;Widget found where container != &quot; +                  </span>
<span class="8462700098092543731" onmouseenter="enter('8462700098092543731');" onmouseout="out('8462700098092543731');" style="">2053                                             &quot;CONTAINER_DESKTOP nor CONTAINER_HOTSEAT - ignoring!&quot;);      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2054                                         continue;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2055                                     }                                                                    </span>
<span  style="">2056                                                                                                          </span>
<span class="3497044279011134930" onmouseenter="enter('3497044279011134930');" onmouseout="out('3497044279011134930');" style="">2057                                     appWidgetInfo.container = c.getInt(containerIndex);                  </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2058                                     // check &amp; update map of what&#x27;s occupied                             </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2059                                     deleteOnInvalidPlacement.set(false);                                 </span>
<span class="8646654463595497950" onmouseenter="enter('8646654463595497950');" onmouseout="out('8646654463595497950');" style="">2060                                     if (!checkItemPlacement(occupied, appWidgetInfo,                     </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">2061                                             deleteOnInvalidPlacement)) {                                 </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2062                                         if (deleteOnInvalidPlacement.get()) {                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2063                                             itemsToRemove.add(id);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2064                                         }                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2065                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2066                                     }                                                                    </span>
<span class="1434382407220101710" onmouseenter="enter('1434382407220101710');" onmouseout="out('1434382407220101710');" style="">2067                                     String providerName = provider.provider.flattenToString();           </span>
<span class="-497618701172789575" onmouseenter="enter('-497618701172789575');" onmouseout="out('-497618701172789575');" style="">2068                                     if (!providerName.equals(savedProvider)) {                           </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2069                                         ContentValues values = new ContentValues();                      </span>
<span class="-1769279011780203877" onmouseenter="enter('-1769279011780203877');" onmouseout="out('-1769279011780203877');" style="">2070                                         values.put(LauncherSettings.Favorites.APPWIDGET_PROVIDER,        </span>
<span class="-4101567385035018098" onmouseenter="enter('-4101567385035018098');" onmouseout="out('-4101567385035018098');" style="">2071                                                 providerName);                                           </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2072                                         String where = BaseColumns._ID + &quot;= ?&quot;;                          </span>
<span class="7642359228989935564" onmouseenter="enter('7642359228989935564');" onmouseout="out('7642359228989935564');" style="">2073                                         String[] args = {Integer.toString(c.getInt(idIndex))};           </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="">2074                                         contentResolver.update(contentUri, values, where, args);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2075                                     }                                                                    </span>
<span class="-5618854840311135348" onmouseenter="enter('-5618854840311135348');" onmouseout="out('-5618854840311135348');" style="">2076                                     sBgItemsIdMap.put(appWidgetInfo.id, appWidgetInfo);                  </span>
<span class="-6085617845739613540" onmouseenter="enter('-6085617845739613540');" onmouseout="out('-6085617845739613540');" style="">2077                                     sBgAppWidgets.add(appWidgetInfo);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2078                                 }                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2079                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2080                             }                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">2081                         } catch (Exception e) {                                                          </span>
<span class="5473197829797399592" onmouseenter="enter('5473197829797399592');" onmouseout="out('5473197829797399592');" style="">2082                             Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted&quot;, e, true);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2083                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2084                     }                                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2085                 } finally {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2086                     if (c != null) {                                                                     </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">2087                         c.close();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2088                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2089                 }                                                                                        </span>
<span  style="">2090                                                                                                          </span>
<span class="3320499870953658089" onmouseenter="enter('3320499870953658089');" onmouseout="out('3320499870953658089');" style="">2091                 // Break early if we&#x27;ve stopped loading                                                  </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2092                 if (mStopped) {                                                                          </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">2093                     clearSBgDataStructures();                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2094                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2095                 }                                                                                        </span>
<span  style="">2096                                                                                                          </span>
<span class="-1044970196577970229" onmouseenter="enter('-1044970196577970229');" onmouseout="out('-1044970196577970229');" style="">2097                 if (itemsToRemove.size() &gt; 0) {                                                          </span>
<span class="5677517768170489521" onmouseenter="enter('5677517768170489521');" onmouseout="out('5677517768170489521');" style="">2098                     ContentProviderClient client = contentResolver.acquireContentProviderClient(         </span>
<span class="-41995321024364961" onmouseenter="enter('-41995321024364961');" onmouseout="out('-41995321024364961');" style="">2099                             LauncherSettings.Favorites.CONTENT_URI);                                     </span>
<span class="-6328990658741073682" onmouseenter="enter('-6328990658741073682');" onmouseout="out('-6328990658741073682');" style="">2100                     // Remove dead items                                                                 </span>
<span class="-2206673557334024830" onmouseenter="enter('-2206673557334024830');" onmouseout="out('-2206673557334024830');" style="">2101                     for (long id : itemsToRemove) {                                                      </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2102                         if (DEBUG_LOADERS) {                                                             </span>
<span class="1693656419727492070" onmouseenter="enter('1693656419727492070');" onmouseout="out('1693656419727492070');" style="">2103                             Log.d(TAG, &quot;Removed id = &quot; + id);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2104                         }                                                                                </span>
<span class="-756547997470617115" onmouseenter="enter('-756547997470617115');" onmouseout="out('-756547997470617115');" style="">2105                         // Don&#x27;t notify content observers                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2106                         try {                                                                            </span>
<span class="-2525008622658612811" onmouseenter="enter('-2525008622658612811');" onmouseout="out('-2525008622658612811');" style="">2107                             client.delete(LauncherSettings.Favorites.getContentUri(id, false),           </span>
<span class="789653475627010164" onmouseenter="enter('789653475627010164');" onmouseout="out('789653475627010164');" style="">2108                                     null, null);                                                         </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2109                         } catch (RemoteException e) {                                                    </span>
<span class="1576133554677134200" onmouseenter="enter('1576133554677134200');" onmouseout="out('1576133554677134200');" style="">2110                             Log.w(TAG, &quot;Could not remove id = &quot; + id);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2111                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2112                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2113                 }                                                                                        </span>
<span  style="">2114                                                                                                          </span>
<span class="5384601782943406631" onmouseenter="enter('5384601782943406631');" onmouseout="out('5384601782943406631');" style="">2115                 if (restoredRows.size() &gt; 0) {                                                           </span>
<span class="-7146881939578869751" onmouseenter="enter('-7146881939578869751');" onmouseout="out('-7146881939578869751');" style="">2116                     ContentProviderClient updater = contentResolver.acquireContentProviderClient(        </span>
<span class="-41995321024364961" onmouseenter="enter('-41995321024364961');" onmouseout="out('-41995321024364961');" style="">2117                             LauncherSettings.Favorites.CONTENT_URI);                                     </span>
<span class="7218829760546841504" onmouseenter="enter('7218829760546841504');" onmouseout="out('7218829760546841504');" style="">2118                     // Update restored items that no longer require special handling                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2119                     try {                                                                                </span>
<span class="-9131750597640912652" onmouseenter="enter('-9131750597640912652');" onmouseout="out('-9131750597640912652');" style="">2120                         StringBuilder selectionBuilder = new StringBuilder();                            </span>
<span class="-2095273116509361612" onmouseenter="enter('-2095273116509361612');" onmouseout="out('-2095273116509361612');" style="">2121                         selectionBuilder.append(LauncherSettings.Favorites._ID);                         </span>
<span class="6461653116160679746" onmouseenter="enter('6461653116160679746');" onmouseout="out('6461653116160679746');" style="">2122                         selectionBuilder.append(&quot; IN (&quot;);                                                </span>
<span class="5779162458108712939" onmouseenter="enter('5779162458108712939');" onmouseout="out('5779162458108712939');" style="">2123                         selectionBuilder.append(TextUtils.join(&quot;, &quot;, restoredRows));                     </span>
<span class="-266914319355369866" onmouseenter="enter('-266914319355369866');" onmouseout="out('-266914319355369866');" style="">2124                         selectionBuilder.append(&quot;)&quot;);                                                    </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2125                         ContentValues values = new ContentValues();                                      </span>
<span class="-8469115157851156621" onmouseenter="enter('-8469115157851156621');" onmouseout="out('-8469115157851156621');" style="">2126                         values.put(LauncherSettings.Favorites.RESTORED, 0);                              </span>
<span class="8477028357087705336" onmouseenter="enter('8477028357087705336');" onmouseout="out('8477028357087705336');" style="">2127                         updater.update(LauncherSettings.Favorites.CONTENT_URI,                           </span>
<span class="-593768018781143118" onmouseenter="enter('-593768018781143118');" onmouseout="out('-593768018781143118');" style="">2128                                 values, selectionBuilder.toString(), null);                              </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2129                     } catch (RemoteException e) {                                                        </span>
<span class="-2048384695223094681" onmouseenter="enter('-2048384695223094681');" onmouseout="out('-2048384695223094681');" style="">2130                         Log.w(TAG, &quot;Could not update restored rows&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2131                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2132                 }                                                                                        </span>
<span  style="">2133                                                                                                          </span>
<span class="-4804263783578470698" onmouseenter="enter('-4804263783578470698');" onmouseout="out('-4804263783578470698');" style="">2134                 if (loadedOldDb) {                                                                       </span>
<span class="7600073100480404232" onmouseenter="enter('7600073100480404232');" onmouseout="out('7600073100480404232');" style="">2135                     long maxScreenId = 0;                                                                </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2136                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2137                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2138                         long screenId = item.screenId;                                                   </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2139                         if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;            </span>
<span class="2624616925341674614" onmouseenter="enter('2624616925341674614');" onmouseout="out('2624616925341674614');" style="">2140                                 !sBgWorkspaceScreens.contains(screenId)) {                               </span>
<span class="-7031445051311703943" onmouseenter="enter('-7031445051311703943');" onmouseout="out('-7031445051311703943');" style="">2141                             sBgWorkspaceScreens.add(screenId);                                           </span>
<span class="3854679960473080150" onmouseenter="enter('3854679960473080150');" onmouseout="out('3854679960473080150');" style="">2142                             if (screenId &gt; maxScreenId) {                                                </span>
<span class="1021049293401799489" onmouseenter="enter('1021049293401799489');" onmouseout="out('1021049293401799489');" style="">2143                                 maxScreenId = screenId;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2144                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2145                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2146                     }                                                                                    </span>
<span class="6350361387624057443" onmouseenter="enter('6350361387624057443');" onmouseout="out('6350361387624057443');" style="">2147                     Collections.sort(sBgWorkspaceScreens);                                               </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2148                     // Log to disk                                                                       </span>
<span class="866898408466051726" onmouseenter="enter('866898408466051726');" onmouseout="out('866898408466051726');" style="">2149                     Launcher.addDumpLog(TAG, &quot;11683562 -   maxScreenId: &quot; + maxScreenId, true);          </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2150                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                      </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2151                             TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                            </span>
<span  style="">2152                                                                                                          </span>
<span class="7230913638388732518" onmouseenter="enter('7230913638388732518');" onmouseout="out('7230913638388732518');" style="">2153                     LauncherAppState.getLauncherProvider().updateMaxScreenId(maxScreenId);               </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2154                     updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                            </span>
<span  style="">2155                                                                                                          </span>
<span class="7660079450024453672" onmouseenter="enter('7660079450024453672');" onmouseout="out('7660079450024453672');" style="">2156                     // Update the max item id after we load an old db                                    </span>
<span class="-1395936485676380465" onmouseenter="enter('-1395936485676380465');" onmouseout="out('-1395936485676380465');" style="">2157                     long maxItemId = 0;                                                                  </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2158                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2159                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="570221416877950678" onmouseenter="enter('570221416877950678');" onmouseout="out('570221416877950678');" style="">2160                         maxItemId = Math.max(maxItemId, item.id);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2161                     }                                                                                    </span>
<span class="-9163109107539651846" onmouseenter="enter('-9163109107539651846');" onmouseout="out('-9163109107539651846');" style="">2162                     LauncherAppState.getLauncherProvider().updateMaxItemId(maxItemId);                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2163                 } else {                                                                                 </span>
<span class="-2685559954044032059" onmouseenter="enter('-2685559954044032059');" onmouseout="out('-2685559954044032059');" style="">2164                     TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(mContext);            </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">2165                     for (Integer i : orderedScreens.keySet()) {                                          </span>
<span class="6018672691004586758" onmouseenter="enter('6018672691004586758');" onmouseout="out('6018672691004586758');" style="">2166                         sBgWorkspaceScreens.add(orderedScreens.get(i));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2167                     }                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2168                     // Log to disk                                                                       </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2169                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                      </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2170                             TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                            </span>
<span  style="">2171                                                                                                          </span>
<span class="4349099944219760178" onmouseenter="enter('4349099944219760178');" onmouseout="out('4349099944219760178');" style="">2172                     // Remove any empty screens                                                          </span>
<span class="4802911702169047278" onmouseenter="enter('4802911702169047278');" onmouseout="out('4802911702169047278');" style="">2173                     ArrayList&lt;Long&gt; unusedScreens = new ArrayList&lt;Long&gt;(sBgWorkspaceScreens);            </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2174                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2175                         long screenId = item.screenId;                                                   </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2176                         if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;            </span>
<span class="2084246428391599841" onmouseenter="enter('2084246428391599841');" onmouseout="out('2084246428391599841');" style="">2177                                 unusedScreens.contains(screenId)) {                                      </span>
<span class="2563817896724806900" onmouseenter="enter('2563817896724806900');" onmouseout="out('2563817896724806900');" style="">2178                             unusedScreens.remove(screenId);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2179                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2180                     }                                                                                    </span>
<span  style="">2181                                                                                                          </span>
<span class="589140823506694046" onmouseenter="enter('589140823506694046');" onmouseout="out('589140823506694046');" style="">2182                     // If there are any empty screens remove them, and update.                           </span>
<span class="-6359391369875412389" onmouseenter="enter('-6359391369875412389');" onmouseout="out('-6359391369875412389');" style="">2183                     if (unusedScreens.size() != 0) {                                                     </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2184                         // Log to disk                                                                   </span>
<span class="7523849534574985307" onmouseenter="enter('7523849534574985307');" onmouseout="out('7523849534574985307');" style="">2185                         Launcher.addDumpLog(TAG, &quot;11683562 -   unusedScreens (to be removed): &quot; +        </span>
<span class="-5777150032383965255" onmouseenter="enter('-5777150032383965255');" onmouseout="out('-5777150032383965255');" style="">2186                                 TextUtils.join(&quot;, &quot;, unusedScreens), true);                              </span>
<span  style="">2187                                                                                                          </span>
<span class="672027419163159367" onmouseenter="enter('672027419163159367');" onmouseout="out('672027419163159367');" style="">2188                         sBgWorkspaceScreens.removeAll(unusedScreens);                                    </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2189                         updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2190                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2191                 }                                                                                        </span>
<span  style="">2192                                                                                                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2193                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="7893701829803555503" onmouseenter="enter('7893701829803555503');" onmouseout="out('7893701829803555503');" style="">2194                     Log.d(TAG, &quot;loaded workspace in &quot; + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);          </span>
<span class="-4264600990510120523" onmouseenter="enter('-4264600990510120523');" onmouseout="out('-4264600990510120523');" style="">2195                     Log.d(TAG, &quot;workspace layout: &quot;);                                                    </span>
<span class="-7545020173780618827" onmouseenter="enter('-7545020173780618827');" onmouseout="out('-7545020173780618827');" style="">2196                     int nScreens = occupied.size();                                                      </span>
<span class="-1430677680506572849" onmouseenter="enter('-1430677680506572849');" onmouseout="out('-1430677680506572849');" style="">2197                     for (int y = 0; y &lt; countY; y++) {                                                   </span>
<span class="7912371425440139270" onmouseenter="enter('7912371425440139270');" onmouseout="out('7912371425440139270');" style="">2198                         String line = &quot;&quot;;                                                                </span>
<span  style="">2199                                                                                                          </span>
<span class="6696569755228044488" onmouseenter="enter('6696569755228044488');" onmouseout="out('6696569755228044488');" style="">2200                         Iterator&lt;Long&gt; iter = occupied.keySet().iterator();                              </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2201                         while (iter.hasNext()) {                                                         </span>
<span class="5362610809116292523" onmouseenter="enter('5362610809116292523');" onmouseout="out('5362610809116292523');" style="">2202                             long screenId = iter.next();                                                 </span>
<span class="-6362485911021715109" onmouseenter="enter('-6362485911021715109');" onmouseout="out('-6362485911021715109');" style="">2203                             if (screenId &gt; 0) {                                                          </span>
<span class="6140668759815587097" onmouseenter="enter('6140668759815587097');" onmouseout="out('6140668759815587097');" style="">2204                                 line += &quot; | &quot;;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2205                             }                                                                            </span>
<span class="5745233440242438196" onmouseenter="enter('5745233440242438196');" onmouseout="out('5745233440242438196');" style="">2206                             for (int x = 0; x &lt; countX; x++) {                                           </span>
<span class="5427490612738327413" onmouseenter="enter('5427490612738327413');" onmouseout="out('5427490612738327413');" style="">2207                                 line += ((occupied.get(screenId)[x][y] != null) ? &quot;#&quot; : &quot;.&quot;);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2208                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2209                         }                                                                                </span>
<span class="-6176135763032133271" onmouseenter="enter('-6176135763032133271');" onmouseout="out('-6176135763032133271');" style="">2210                         Log.d(TAG, &quot;[ &quot; + line + &quot; ]&quot;);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2211                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2212                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2213             }                                                                                            </span>
<span class="-4220264685598194490" onmouseenter="enter('-4220264685598194490');" onmouseout="out('-4220264685598194490');" style="">2214             return loadedOldDb;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2215         }                                                                                                </span>
<span  style="">2216                                                                                                          </span>
<span class="2277304499071840713" onmouseenter="enter('2277304499071840713');" onmouseout="out('2277304499071840713');" style="">2217         /** Filters the set of items who are directly or indirectly (via another container) on the       </span>
<span class="1409652257454698285" onmouseenter="enter('1409652257454698285');" onmouseout="out('1409652257454698285');" style="">2218          * specified screen. */                                                                          </span>
<span class="8795548304182075511" onmouseenter="enter('8795548304182075511');" onmouseout="out('8795548304182075511');" style="">2219         private void filterCurrentWorkspaceItems(long currentScreenId,                                   </span>
<span class="6681054994536048179" onmouseenter="enter('6681054994536048179');" onmouseout="out('6681054994536048179');" style="">2220                 ArrayList&lt;ItemInfo&gt; allWorkspaceItems,                                                   </span>
<span class="-22694560885899086" onmouseenter="enter('-22694560885899086');" onmouseout="out('-22694560885899086');" style="">2221                 ArrayList&lt;ItemInfo&gt; currentScreenItems,                                                  </span>
<span class="-4268074281529251610" onmouseenter="enter('-4268074281529251610');" onmouseout="out('-4268074281529251610');" style="">2222                 ArrayList&lt;ItemInfo&gt; otherScreenItems) {                                                  </span>
<span class="-3054856766549342984" onmouseenter="enter('-3054856766549342984');" onmouseout="out('-3054856766549342984');" style="">2223             // Purge any null ItemInfos                                                                  </span>
<span class="4510640209834542816" onmouseenter="enter('4510640209834542816');" onmouseout="out('4510640209834542816');" style="">2224             Iterator&lt;ItemInfo&gt; iter = allWorkspaceItems.iterator();                                      </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2225             while (iter.hasNext()) {                                                                     </span>
<span class="1859715860533284250" onmouseenter="enter('1859715860533284250');" onmouseout="out('1859715860533284250');" style="">2226                 ItemInfo i = iter.next();                                                                </span>
<span class="-7805046366392198151" onmouseenter="enter('-7805046366392198151');" onmouseout="out('-7805046366392198151');" style="">2227                 if (i == null) {                                                                         </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">2228                     iter.remove();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2229                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2230             }                                                                                            </span>
<span  style="">2231                                                                                                          </span>
<span class="-717820765531723775" onmouseenter="enter('-717820765531723775');" onmouseout="out('-717820765531723775');" style="">2232             // Order the set of items by their containers first, this allows use to walk through the     </span>
<span class="603841325148737819" onmouseenter="enter('603841325148737819');" onmouseout="out('603841325148737819');" style="">2233             // list sequentially, build up a list of containers that are in the specified screen,        </span>
<span class="4141488165570775341" onmouseenter="enter('4141488165570775341');" onmouseout="out('4141488165570775341');" style="">2234             // as well as all items in those containers.                                                 </span>
<span class="-9034158841912487174" onmouseenter="enter('-9034158841912487174');" onmouseout="out('-9034158841912487174');" style="">2235             Set&lt;Long&gt; itemsOnScreen = new HashSet&lt;Long&gt;();                                               </span>
<span class="8519661802904254165" onmouseenter="enter('8519661802904254165');" onmouseout="out('8519661802904254165');" style="">2236             Collections.sort(allWorkspaceItems, new Comparator&lt;ItemInfo&gt;() {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2237                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2238                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="-1156155221818606914" onmouseenter="enter('-1156155221818606914');" onmouseout="out('-1156155221818606914');" style="">2239                     return (int) (lhs.container - rhs.container);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2240                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2241             });                                                                                          </span>
<span class="8857216393150717712" onmouseenter="enter('8857216393150717712');" onmouseout="out('8857216393150717712');" style="">2242             for (ItemInfo info : allWorkspaceItems) {                                                    </span>
<span class="6411036295955728093" onmouseenter="enter('6411036295955728093');" onmouseout="out('6411036295955728093');" style="">2243                 if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                    </span>
<span class="243509375570472667" onmouseenter="enter('243509375570472667');" onmouseout="out('243509375570472667');" style="">2244                     if (info.screenId == currentScreenId) {                                              </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2245                         currentScreenItems.add(info);                                                    </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2246                         itemsOnScreen.add(info.id);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2247                     } else {                                                                             </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2248                         otherScreenItems.add(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2249                     }                                                                                    </span>
<span class="8644731164584182238" onmouseenter="enter('8644731164584182238');" onmouseout="out('8644731164584182238');" style="">2250                 } else if (info.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {             </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2251                     currentScreenItems.add(info);                                                        </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2252                     itemsOnScreen.add(info.id);                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2253                 } else {                                                                                 </span>
<span class="580654991680085358" onmouseenter="enter('580654991680085358');" onmouseout="out('580654991680085358');" style="">2254                     if (itemsOnScreen.contains(info.container)) {                                        </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2255                         currentScreenItems.add(info);                                                    </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2256                         itemsOnScreen.add(info.id);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2257                     } else {                                                                             </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2258                         otherScreenItems.add(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2259                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2260                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2261             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2262         }                                                                                                </span>
<span  style="">2263                                                                                                          </span>
<span class="-2345588268248786161" onmouseenter="enter('-2345588268248786161');" onmouseout="out('-2345588268248786161');" style="">2264         /** Filters the set of widgets which are on the specified screen. */                             </span>
<span class="7796530082634599981" onmouseenter="enter('7796530082634599981');" onmouseout="out('7796530082634599981');" style="">2265         private void filterCurrentAppWidgets(long currentScreenId,                                       </span>
<span class="-6457080946795761374" onmouseenter="enter('-6457080946795761374');" onmouseout="out('-6457080946795761374');" style="">2266                 ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                             </span>
<span class="-4085190208868862406" onmouseenter="enter('-4085190208868862406');" onmouseout="out('-4085190208868862406');" style="">2267                 ArrayList&lt;LauncherAppWidgetInfo&gt; currentScreenWidgets,                                   </span>
<span class="-9000722418092093369" onmouseenter="enter('-9000722418092093369');" onmouseout="out('-9000722418092093369');" style="">2268                 ArrayList&lt;LauncherAppWidgetInfo&gt; otherScreenWidgets) {                                   </span>
<span  style="">2269                                                                                                          </span>
<span class="298213435107913715" onmouseenter="enter('298213435107913715');" onmouseout="out('298213435107913715');" style="">2270             for (LauncherAppWidgetInfo widget : appWidgets) {                                            </span>
<span class="2476844624609784590" onmouseenter="enter('2476844624609784590');" onmouseout="out('2476844624609784590');" style="">2271                 if (widget == null) continue;                                                            </span>
<span class="8795712760973120755" onmouseenter="enter('8795712760973120755');" onmouseout="out('8795712760973120755');" style="">2272                 if (widget.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                  </span>
<span class="-573639449604607321" onmouseenter="enter('-573639449604607321');" onmouseout="out('-573639449604607321');" style="">2273                         widget.screenId == currentScreenId) {                                            </span>
<span class="-7467860973438659792" onmouseenter="enter('-7467860973438659792');" onmouseout="out('-7467860973438659792');" style="">2274                     currentScreenWidgets.add(widget);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2275                 } else {                                                                                 </span>
<span class="918127297832417083" onmouseenter="enter('918127297832417083');" onmouseout="out('918127297832417083');" style="">2276                     otherScreenWidgets.add(widget);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2277                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2278             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2279         }                                                                                                </span>
<span  style="">2280                                                                                                          </span>
<span class="2890739696266248059" onmouseenter="enter('2890739696266248059');" onmouseout="out('2890739696266248059');" style="">2281         /** Filters the set of folders which are on the specified screen. */                             </span>
<span class="1006156668309097499" onmouseenter="enter('1006156668309097499');" onmouseout="out('1006156668309097499');" style="">2282         private void filterCurrentFolders(long currentScreenId,                                          </span>
<span class="5542015090877593488" onmouseenter="enter('5542015090877593488');" onmouseout="out('5542015090877593488');" style="">2283                 HashMap&lt;Long, ItemInfo&gt; itemsIdMap,                                                      </span>
<span class="5439463415012784721" onmouseenter="enter('5439463415012784721');" onmouseout="out('5439463415012784721');" style="">2284                 HashMap&lt;Long, FolderInfo&gt; folders,                                                       </span>
<span class="-835326304871961386" onmouseenter="enter('-835326304871961386');" onmouseout="out('-835326304871961386');" style="">2285                 HashMap&lt;Long, FolderInfo&gt; currentScreenFolders,                                          </span>
<span class="-5337898381804311151" onmouseenter="enter('-5337898381804311151');" onmouseout="out('-5337898381804311151');" style="">2286                 HashMap&lt;Long, FolderInfo&gt; otherScreenFolders) {                                          </span>
<span  style="">2287                                                                                                          </span>
<span class="5476103458254751398" onmouseenter="enter('5476103458254751398');" onmouseout="out('5476103458254751398');" style="">2288             for (long id : folders.keySet()) {                                                           </span>
<span class="-1043527829048640643" onmouseenter="enter('-1043527829048640643');" onmouseout="out('-1043527829048640643');" style="">2289                 ItemInfo info = itemsIdMap.get(id);                                                      </span>
<span class="2660177146353218833" onmouseenter="enter('2660177146353218833');" onmouseout="out('2660177146353218833');" style="">2290                 FolderInfo folder = folders.get(id);                                                     </span>
<span class="1070396563257369459" onmouseenter="enter('1070396563257369459');" onmouseout="out('1070396563257369459');" style="">2291                 if (info == null || folder == null) continue;                                            </span>
<span class="-2700526009056688618" onmouseenter="enter('-2700526009056688618');" onmouseout="out('-2700526009056688618');" style="">2292                 if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                    </span>
<span class="-6694119585175412501" onmouseenter="enter('-6694119585175412501');" onmouseout="out('-6694119585175412501');" style="">2293                         info.screenId == currentScreenId) {                                              </span>
<span class="9103793645851851238" onmouseenter="enter('9103793645851851238');" onmouseout="out('9103793645851851238');" style="">2294                     currentScreenFolders.put(id, folder);                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2295                 } else {                                                                                 </span>
<span class="2209694610169579401" onmouseenter="enter('2209694610169579401');" onmouseout="out('2209694610169579401');" style="">2296                     otherScreenFolders.put(id, folder);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2297                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2298             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2299         }                                                                                                </span>
<span  style="">2300                                                                                                          </span>
<span class="-1404838629334872973" onmouseenter="enter('-1404838629334872973');" onmouseout="out('-1404838629334872973');" style="">2301         /** Sorts the set of items by hotseat, workspace (spatially from top to bottom, left to          </span>
<span class="2331484748997422212" onmouseenter="enter('2331484748997422212');" onmouseout="out('2331484748997422212');" style="">2302          * right) */                                                                                     </span>
<span class="4197577433481844567" onmouseenter="enter('4197577433481844567');" onmouseout="out('4197577433481844567');" style="">2303         private void sortWorkspaceItemsSpatially(ArrayList&lt;ItemInfo&gt; workspaceItems) {                   </span>
<span class="1185328747399966274" onmouseenter="enter('1185328747399966274');" onmouseout="out('1185328747399966274');" style="">2304             final LauncherAppState app = LauncherAppState.getInstance();                                 </span>
<span class="7124839587395892858" onmouseenter="enter('7124839587395892858');" onmouseout="out('7124839587395892858');" style="">2305             final DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                          </span>
<span class="7420301678455304067" onmouseenter="enter('7420301678455304067');" onmouseout="out('7420301678455304067');" style="">2306             // XXX: review this                                                                          </span>
<span class="5036789581710507500" onmouseenter="enter('5036789581710507500');" onmouseout="out('5036789581710507500');" style="">2307             Collections.sort(workspaceItems, new Comparator&lt;ItemInfo&gt;() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2308                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2309                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="7519014981914073063" onmouseenter="enter('7519014981914073063');" onmouseout="out('7519014981914073063');" style="">2310                     int cellCountX = (int) grid.numColumns;                                              </span>
<span class="5038685396458105053" onmouseenter="enter('5038685396458105053');" onmouseout="out('5038685396458105053');" style="">2311                     int cellCountY = (int) grid.numRows;                                                 </span>
<span class="2270724071285143981" onmouseenter="enter('2270724071285143981');" onmouseout="out('2270724071285143981');" style="">2312                     int screenOffset = cellCountX * cellCountY;                                          </span>
<span class="-1359829540566141263" onmouseenter="enter('-1359829540566141263');" onmouseout="out('-1359829540566141263');" style="">2313                     int containerOffset = screenOffset * (Launcher.SCREEN_COUNT + 1); // +1 hotseat      </span>
<span class="-5686828087182476360" onmouseenter="enter('-5686828087182476360');" onmouseout="out('-5686828087182476360');" style="">2314                     long lr = (lhs.container * containerOffset + lhs.screenId * screenOffset +           </span>
<span class="7712455780852264002" onmouseenter="enter('7712455780852264002');" onmouseout="out('7712455780852264002');" style="">2315                             lhs.cellY * cellCountX + lhs.cellX);                                         </span>
<span class="4979104026657461493" onmouseenter="enter('4979104026657461493');" onmouseout="out('4979104026657461493');" style="">2316                     long rr = (rhs.container * containerOffset + rhs.screenId * screenOffset +           </span>
<span class="-2381270400025166051" onmouseenter="enter('-2381270400025166051');" onmouseout="out('-2381270400025166051');" style="">2317                             rhs.cellY * cellCountX + rhs.cellX);                                         </span>
<span class="-4118467969899844825" onmouseenter="enter('-4118467969899844825');" onmouseout="out('-4118467969899844825');" style="">2318                     return (int) (lr - rr);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2319                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2320             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2321         }                                                                                                </span>
<span  style="">2322                                                                                                          </span>
<span class="-2914095713166652734" onmouseenter="enter('-2914095713166652734');" onmouseout="out('-2914095713166652734');" style="">2323         private void bindWorkspaceScreens(final Callbacks oldCallbacks,                                  </span>
<span class="-4834279311466229697" onmouseenter="enter('-4834279311466229697');" onmouseout="out('-4834279311466229697');" style="">2324                 final ArrayList&lt;Long&gt; orderedScreens) {                                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2325             final Runnable r = new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2326                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2327                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2328                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2329                     if (callbacks != null) {                                                             </span>
<span class="-657438592163932392" onmouseenter="enter('-657438592163932392');" onmouseout="out('-657438592163932392');" style="">2330                         callbacks.bindScreens(orderedScreens);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2331                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2332                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2333             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2334             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2335         }                                                                                                </span>
<span  style="">2336                                                                                                          </span>
<span class="2462723938814167389" onmouseenter="enter('2462723938814167389');" onmouseout="out('2462723938814167389');" style="">2337         private void bindWorkspaceItems(final Callbacks oldCallbacks,                                    </span>
<span class="3131608111144182051" onmouseenter="enter('3131608111144182051');" onmouseout="out('3131608111144182051');" style="">2338                 final ArrayList&lt;ItemInfo&gt; workspaceItems,                                                </span>
<span class="-9171435870290402492" onmouseenter="enter('-9171435870290402492');" onmouseout="out('-9171435870290402492');" style="">2339                 final ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                       </span>
<span class="-215271553361392889" onmouseenter="enter('-215271553361392889');" onmouseout="out('-215271553361392889');" style="">2340                 final HashMap&lt;Long, FolderInfo&gt; folders,                                                 </span>
<span class="8358584326194096705" onmouseenter="enter('8358584326194096705');" onmouseout="out('8358584326194096705');" style="">2341                 ArrayList&lt;Runnable&gt; deferredBindRunnables) {                                             </span>
<span  style="">2342                                                                                                          </span>
<span class="6705996702729308966" onmouseenter="enter('6705996702729308966');" onmouseout="out('6705996702729308966');" style="">2343             final boolean postOnMainThread = (deferredBindRunnables != null);                            </span>
<span  style="">2344                                                                                                          </span>
<span class="-8582136977498244048" onmouseenter="enter('-8582136977498244048');" onmouseout="out('-8582136977498244048');" style="">2345             // Bind the workspace items                                                                  </span>
<span class="-7354566132986496753" onmouseenter="enter('-7354566132986496753');" onmouseout="out('-7354566132986496753');" style="">2346             int N = workspaceItems.size();                                                               </span>
<span class="8316943469476905111" onmouseenter="enter('8316943469476905111');" onmouseout="out('8316943469476905111');" style="">2347             for (int i = 0; i &lt; N; i += ITEMS_CHUNK) {                                                   </span>
<span class="4892427267481855411" onmouseenter="enter('4892427267481855411');" onmouseout="out('4892427267481855411');" style="">2348                 final int start = i;                                                                     </span>
<span class="-1876539668545683746" onmouseenter="enter('-1876539668545683746');" onmouseout="out('-1876539668545683746');" style="">2349                 final int chunkSize = (i+ITEMS_CHUNK &lt;= N) ? ITEMS_CHUNK : (N-i);                        </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2350                 final Runnable r = new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2351                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2352                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2353                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2354                         if (callbacks != null) {                                                         </span>
<span class="5089922212197568209" onmouseenter="enter('5089922212197568209');" onmouseout="out('5089922212197568209');" style="">2355                             callbacks.bindItems(workspaceItems, start, start+chunkSize,                  </span>
<span class="9106099237950392606" onmouseenter="enter('9106099237950392606');" onmouseout="out('9106099237950392606');" style="">2356                                     false);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2357                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2358                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2359                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2360                 if (postOnMainThread) {                                                                  </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2361                     deferredBindRunnables.add(r);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2362                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2363                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2364                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2365             }                                                                                            </span>
<span  style="">2366                                                                                                          </span>
<span class="-3289339942871725334" onmouseenter="enter('-3289339942871725334');" onmouseout="out('-3289339942871725334');" style="">2367             // Bind the folders                                                                          </span>
<span class="-7483796215228262161" onmouseenter="enter('-7483796215228262161');" onmouseout="out('-7483796215228262161');" style="">2368             if (!folders.isEmpty()) {                                                                    </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2369                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2370                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2371                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2372                         if (callbacks != null) {                                                         </span>
<span class="-5386182796873001970" onmouseenter="enter('-5386182796873001970');" onmouseout="out('-5386182796873001970');" style="">2373                             callbacks.bindFolders(folders);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2374                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2375                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2376                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2377                 if (postOnMainThread) {                                                                  </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2378                     deferredBindRunnables.add(r);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2379                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2380                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2381                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2382             }                                                                                            </span>
<span  style="">2383                                                                                                          </span>
<span class="-3655716380766613611" onmouseenter="enter('-3655716380766613611');" onmouseout="out('-3655716380766613611');" style="">2384             // Bind the widgets, one at a time                                                           </span>
<span class="-8489280060790503293" onmouseenter="enter('-8489280060790503293');" onmouseout="out('-8489280060790503293');" style="">2385             N = appWidgets.size();                                                                       </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2386             for (int i = 0; i &lt; N; i++) {                                                                </span>
<span class="1244623159456991119" onmouseenter="enter('1244623159456991119');" onmouseout="out('1244623159456991119');" style="">2387                 final LauncherAppWidgetInfo widget = appWidgets.get(i);                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2388                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2389                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2390                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2391                         if (callbacks != null) {                                                         </span>
<span class="-6128295543460120155" onmouseenter="enter('-6128295543460120155');" onmouseout="out('-6128295543460120155');" style="">2392                             callbacks.bindAppWidget(widget);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2393                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2394                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2395                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2396                 if (postOnMainThread) {                                                                  </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2397                     deferredBindRunnables.add(r);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2398                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2399                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2400                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2401             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2402         }                                                                                                </span>
<span  style="">2403                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2404         /**                                                                                              </span>
<span class="2657234197326019604" onmouseenter="enter('2657234197326019604');" onmouseout="out('2657234197326019604');" style="">2405          * Binds all loaded data to actual views on the main thread.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2406          */                                                                                              </span>
<span class="2515782410575020505" onmouseenter="enter('2515782410575020505');" onmouseout="out('2515782410575020505');" style="">2407         private void bindWorkspace(int synchronizeBindPage, final boolean isUpgradePath) {               </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2408             final long t = SystemClock.uptimeMillis();                                                   </span>
<span class="-6867724507948428803" onmouseenter="enter('-6867724507948428803');" onmouseout="out('-6867724507948428803');" style="">2409             Runnable r;                                                                                  </span>
<span  style="">2410                                                                                                          </span>
<span class="7433359470613785749" onmouseenter="enter('7433359470613785749');" onmouseout="out('7433359470613785749');" style="">2411             // Don&#x27;t use these two variables in any of the callback runnables.                           </span>
<span class="-3941343762342876699" onmouseenter="enter('-3941343762342876699');" onmouseout="out('-3941343762342876699');" style="">2412             // Otherwise we hold a reference to them.                                                    </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2413             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2414             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2415                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="3451244406562267616" onmouseenter="enter('3451244406562267616');" onmouseout="out('3451244406562267616');" style="">2416                 Log.w(TAG, &quot;LoaderTask running with no launcher&quot;);                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2417                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2418             }                                                                                            </span>
<span  style="">2419                                                                                                          </span>
<span class="1896400737527502430" onmouseenter="enter('1896400737527502430');" onmouseout="out('1896400737527502430');" style="">2420             // Save a copy of all the bg-thread collections                                              </span>
<span class="8376150118125167095" onmouseenter="enter('8376150118125167095');" onmouseout="out('8376150118125167095');" style="">2421             ArrayList&lt;ItemInfo&gt; workspaceItems = new ArrayList&lt;ItemInfo&gt;();                              </span>
<span class="-9044996375001817267" onmouseenter="enter('-9044996375001817267');" onmouseout="out('-9044996375001817267');" style="">2422             ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets =                                                </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2423                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="1486993560554459234" onmouseenter="enter('1486993560554459234');" onmouseout="out('1486993560554459234');" style="">2424             HashMap&lt;Long, FolderInfo&gt; folders = new HashMap&lt;Long, FolderInfo&gt;();                         </span>
<span class="-2531396011753159513" onmouseenter="enter('-2531396011753159513');" onmouseout="out('-2531396011753159513');" style="">2425             HashMap&lt;Long, ItemInfo&gt; itemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                          </span>
<span class="2122428953856879736" onmouseenter="enter('2122428953856879736');" onmouseout="out('2122428953856879736');" style="">2426             ArrayList&lt;Long&gt; orderedScreenIds = new ArrayList&lt;Long&gt;();                                    </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2427             synchronized (sBgLock) {                                                                     </span>
<span class="2318166879831487746" onmouseenter="enter('2318166879831487746');" onmouseout="out('2318166879831487746');" style="">2428                 workspaceItems.addAll(sBgWorkspaceItems);                                                </span>
<span class="5776161881735381038" onmouseenter="enter('5776161881735381038');" onmouseout="out('5776161881735381038');" style="">2429                 appWidgets.addAll(sBgAppWidgets);                                                        </span>
<span class="1929780610659636161" onmouseenter="enter('1929780610659636161');" onmouseout="out('1929780610659636161');" style="">2430                 folders.putAll(sBgFolders);                                                              </span>
<span class="3382494184063613290" onmouseenter="enter('3382494184063613290');" onmouseout="out('3382494184063613290');" style="">2431                 itemsIdMap.putAll(sBgItemsIdMap);                                                        </span>
<span class="-8476373911620507604" onmouseenter="enter('-8476373911620507604');" onmouseout="out('-8476373911620507604');" style="">2432                 orderedScreenIds.addAll(sBgWorkspaceScreens);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2433             }                                                                                            </span>
<span  style="">2434                                                                                                          </span>
<span class="-6727444800593242016" onmouseenter="enter('-6727444800593242016');" onmouseout="out('-6727444800593242016');" style="">2435             final boolean isLoadingSynchronously =                                                       </span>
<span class="-5819807820500279130" onmouseenter="enter('-5819807820500279130');" onmouseout="out('-5819807820500279130');" style="">2436                     synchronizeBindPage != PagedView.INVALID_RESTORE_PAGE;                               </span>
<span class="2949253642379813881" onmouseenter="enter('2949253642379813881');" onmouseout="out('2949253642379813881');" style="">2437             int currScreen = isLoadingSynchronously ? synchronizeBindPage :                              </span>
<span class="-3178994835189561329" onmouseenter="enter('-3178994835189561329');" onmouseout="out('-3178994835189561329');" style="">2438                 oldCallbacks.getCurrentWorkspaceScreen();                                                </span>
<span class="-8072033936298463796" onmouseenter="enter('-8072033936298463796');" onmouseout="out('-8072033936298463796');" style="">2439             if (currScreen &gt;= orderedScreenIds.size()) {                                                 </span>
<span class="6825640116866860115" onmouseenter="enter('6825640116866860115');" onmouseout="out('6825640116866860115');" style="">2440                 // There may be no workspace screens (just hotseat items and an empty page).             </span>
<span class="-1349681419310339536" onmouseenter="enter('-1349681419310339536');" onmouseout="out('-1349681419310339536');" style="">2441                 currScreen = PagedView.INVALID_RESTORE_PAGE;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2442             }                                                                                            </span>
<span class="-335994314648006585" onmouseenter="enter('-335994314648006585');" onmouseout="out('-335994314648006585');" style="">2443             final int currentScreen = currScreen;                                                        </span>
<span class="2351793782480240365" onmouseenter="enter('2351793782480240365');" onmouseout="out('2351793782480240365');" style="">2444             final long currentScreenId = currentScreen &lt; 0                                               </span>
<span class="-3569859106639415689" onmouseenter="enter('-3569859106639415689');" onmouseout="out('-3569859106639415689');" style="">2445                     ? INVALID_SCREEN_ID : orderedScreenIds.get(currentScreen);                           </span>
<span  style="">2446                                                                                                          </span>
<span class="6814554556760518768" onmouseenter="enter('6814554556760518768');" onmouseout="out('6814554556760518768');" style="">2447             // Load all the items that are on the current page first (and in the process, unbind         </span>
<span class="-8025412368184811901" onmouseenter="enter('-8025412368184811901');" onmouseout="out('-8025412368184811901');" style="">2448             // all the existing workspace items before we call startBinding() below.                     </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style="">2449             unbindWorkspaceItemsOnMainThread();                                                          </span>
<span  style="">2450                                                                                                          </span>
<span class="-2890632990436762470" onmouseenter="enter('-2890632990436762470');" onmouseout="out('-2890632990436762470');" style="">2451             // Separate the items that are on the current screen, and all the other remaining items      </span>
<span class="-1725873569461296561" onmouseenter="enter('-1725873569461296561');" onmouseout="out('-1725873569461296561');" style="">2452             ArrayList&lt;ItemInfo&gt; currentWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                       </span>
<span class="-3652813720009519444" onmouseenter="enter('-3652813720009519444');" onmouseout="out('-3652813720009519444');" style="">2453             ArrayList&lt;ItemInfo&gt; otherWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="1957921863279922763" onmouseenter="enter('1957921863279922763');" onmouseout="out('1957921863279922763');" style="">2454             ArrayList&lt;LauncherAppWidgetInfo&gt; currentAppWidgets =                                         </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2455                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="-340469327534164281" onmouseenter="enter('-340469327534164281');" onmouseout="out('-340469327534164281');" style="">2456             ArrayList&lt;LauncherAppWidgetInfo&gt; otherAppWidgets =                                           </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2457                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="1678682221916250445" onmouseenter="enter('1678682221916250445');" onmouseout="out('1678682221916250445');" style="">2458             HashMap&lt;Long, FolderInfo&gt; currentFolders = new HashMap&lt;Long, FolderInfo&gt;();                  </span>
<span class="6055163357301009248" onmouseenter="enter('6055163357301009248');" onmouseout="out('6055163357301009248');" style="">2459             HashMap&lt;Long, FolderInfo&gt; otherFolders = new HashMap&lt;Long, FolderInfo&gt;();                    </span>
<span  style="">2460                                                                                                          </span>
<span class="-6089822518842723893" onmouseenter="enter('-6089822518842723893');" onmouseout="out('-6089822518842723893');" style="">2461             filterCurrentWorkspaceItems(currentScreenId, workspaceItems, currentWorkspaceItems,          </span>
<span class="-8375758480995422912" onmouseenter="enter('-8375758480995422912');" onmouseout="out('-8375758480995422912');" style="">2462                     otherWorkspaceItems);                                                                </span>
<span class="-866463348054163616" onmouseenter="enter('-866463348054163616');" onmouseout="out('-866463348054163616');" style="">2463             filterCurrentAppWidgets(currentScreenId, appWidgets, currentAppWidgets,                      </span>
<span class="4579895579276341407" onmouseenter="enter('4579895579276341407');" onmouseout="out('4579895579276341407');" style="">2464                     otherAppWidgets);                                                                    </span>
<span class="-8098352111604685386" onmouseenter="enter('-8098352111604685386');" onmouseout="out('-8098352111604685386');" style="">2465             filterCurrentFolders(currentScreenId, itemsIdMap, folders, currentFolders,                   </span>
<span class="9146999591596374961" onmouseenter="enter('9146999591596374961');" onmouseout="out('9146999591596374961');" style="">2466                     otherFolders);                                                                       </span>
<span class="-3334490908115707670" onmouseenter="enter('-3334490908115707670');" onmouseout="out('-3334490908115707670');" style="">2467             sortWorkspaceItemsSpatially(currentWorkspaceItems);                                          </span>
<span class="7557616132302919391" onmouseenter="enter('7557616132302919391');" onmouseout="out('7557616132302919391');" style="">2468             sortWorkspaceItemsSpatially(otherWorkspaceItems);                                            </span>
<span  style="">2469                                                                                                          </span>
<span class="-5681027322920042460" onmouseenter="enter('-5681027322920042460');" onmouseout="out('-5681027322920042460');" style="">2470             // Tell the workspace that we&#x27;re about to start binding items                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2471             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2472                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2473                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2474                     if (callbacks != null) {                                                             </span>
<span class="-4858717627969339167" onmouseenter="enter('-4858717627969339167');" onmouseout="out('-4858717627969339167');" style="">2475                         callbacks.startBinding();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2476                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2477                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2478             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2479             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span  style="">2480                                                                                                          </span>
<span class="5270406270692369283" onmouseenter="enter('5270406270692369283');" onmouseout="out('5270406270692369283');" style="">2481             bindWorkspaceScreens(oldCallbacks, orderedScreenIds);                                        </span>
<span  style="">2482                                                                                                          </span>
<span class="-8614752954403058095" onmouseenter="enter('-8614752954403058095');" onmouseout="out('-8614752954403058095');" style="">2483             // Load items on the current page                                                            </span>
<span class="7514755776427017102" onmouseenter="enter('7514755776427017102');" onmouseout="out('7514755776427017102');" style="">2484             bindWorkspaceItems(oldCallbacks, currentWorkspaceItems, currentAppWidgets,                   </span>
<span class="-6104188658851873503" onmouseenter="enter('-6104188658851873503');" onmouseout="out('-6104188658851873503');" style="">2485                     currentFolders, null);                                                               </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2486             if (isLoadingSynchronously) {                                                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2487                 r = new Runnable() {                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2488                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2489                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="1520569606497568986" onmouseenter="enter('1520569606497568986');" onmouseout="out('1520569606497568986');" style="">2490                         if (callbacks != null &amp;&amp; currentScreen != PagedView.INVALID_RESTORE_PAGE) {      </span>
<span class="-8453570054408401460" onmouseenter="enter('-8453570054408401460');" onmouseout="out('-8453570054408401460');" style="">2491                             callbacks.onPageBoundSynchronously(currentScreen);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2492                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2493                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2494                 };                                                                                       </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2495                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2496             }                                                                                            </span>
<span  style="">2497                                                                                                          </span>
<span class="-5413736965388393233" onmouseenter="enter('-5413736965388393233');" onmouseout="out('-5413736965388393233');" style="">2498             // Load all the remaining pages (if we are loading synchronously, we want to defer this      </span>
<span class="-2955787106587599134" onmouseenter="enter('-2955787106587599134');" onmouseout="out('-2955787106587599134');" style="">2499             // work until after the first render)                                                        </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">2500             mDeferredBindRunnables.clear();                                                              </span>
<span class="5032352887958756295" onmouseenter="enter('5032352887958756295');" onmouseout="out('5032352887958756295');" style="">2501             bindWorkspaceItems(oldCallbacks, otherWorkspaceItems, otherAppWidgets, otherFolders,         </span>
<span class="-2167949041803207061" onmouseenter="enter('-2167949041803207061');" onmouseout="out('-2167949041803207061');" style="">2502                     (isLoadingSynchronously ? mDeferredBindRunnables : null));                           </span>
<span  style="">2503                                                                                                          </span>
<span class="4011061048965913553" onmouseenter="enter('4011061048965913553');" onmouseout="out('4011061048965913553');" style="">2504             // Tell the workspace that we&#x27;re done binding items                                          </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2505             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2506                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2507                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2508                     if (callbacks != null) {                                                             </span>
<span class="4571657590383009749" onmouseenter="enter('4571657590383009749');" onmouseout="out('4571657590383009749');" style="">2509                         callbacks.finishBindingItems(isUpgradePath);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2510                     }                                                                                    </span>
<span  style="">2511                                                                                                          </span>
<span class="3327220122133784387" onmouseenter="enter('3327220122133784387');" onmouseout="out('3327220122133784387');" style="">2512                     // If we&#x27;re profiling, ensure this is the last thing in the queue.                   </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2513                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="355954012869630075" onmouseenter="enter('355954012869630075');" onmouseout="out('355954012869630075');" style="">2514                         Log.d(TAG, &quot;bound workspace in &quot;                                                 </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2515                             + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2516                     }                                                                                    </span>
<span  style="">2517                                                                                                          </span>
<span class="-2372807547969983284" onmouseenter="enter('-2372807547969983284');" onmouseout="out('-2372807547969983284');" style="">2518                     mIsLoadingAndBindingWorkspace = false;                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2519                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2520             };                                                                                           </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2521             if (isLoadingSynchronously) {                                                                </span>
<span class="-7585940083186897617" onmouseenter="enter('-7585940083186897617');" onmouseout="out('-7585940083186897617');" style="">2522                 mDeferredBindRunnables.add(r);                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2523             } else {                                                                                     </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2524                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2525             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2526         }                                                                                                </span>
<span  style="">2527                                                                                                          </span>
<span class="-8837645024880398734" onmouseenter="enter('-8837645024880398734');" onmouseout="out('-8837645024880398734');" style="">2528         private void loadAndBindAllApps() {                                                              </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2529             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-2830976254331120227" onmouseenter="enter('-2830976254331120227');" onmouseout="out('-2830976254331120227');" style="">2530                 Log.d(TAG, &quot;loadAndBindAllApps mAllAppsLoaded=&quot; + mAllAppsLoaded);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2531             }                                                                                            </span>
<span class="-6125216986221494355" onmouseenter="enter('-6125216986221494355');" onmouseout="out('-6125216986221494355');" style="">2532             if (!mAllAppsLoaded) {                                                                       </span>
<span class="5842757820135196564" onmouseenter="enter('5842757820135196564');" onmouseout="out('5842757820135196564');" style="">2533                 loadAllApps();                                                                           </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">2534                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2535                     if (mStopped) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2536                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2537                     }                                                                                    </span>
<span class="4623635226903027710" onmouseenter="enter('4623635226903027710');" onmouseout="out('4623635226903027710');" style="">2538                     mAllAppsLoaded = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2539                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2540             } else {                                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">2541                 onlyBindAllApps();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2542             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2543         }                                                                                                </span>
<span  style="">2544                                                                                                          </span>
<span class="4707433981787810272" onmouseenter="enter('4707433981787810272');" onmouseout="out('4707433981787810272');" style="">2545         private void onlyBindAllApps() {                                                                 </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2546             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2547             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2548                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="1659909424723635951" onmouseenter="enter('1659909424723635951');" onmouseout="out('1659909424723635951');" style="">2549                 Log.w(TAG, &quot;LoaderTask running with no launcher (onlyBindAllApps)&quot;);                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2550                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2551             }                                                                                            </span>
<span  style="">2552                                                                                                          </span>
<span class="904073869424416989" onmouseenter="enter('904073869424416989');" onmouseout="out('904073869424416989');" style="">2553             // shallow copy                                                                              </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">2554             @SuppressWarnings(&quot;unchecked&quot;)                                                               </span>
<span class="6400779648201267598" onmouseenter="enter('6400779648201267598');" onmouseout="out('6400779648201267598');" style="">2555             final ArrayList&lt;AppInfo&gt; list                                                                </span>
<span class="-2385577679344520462" onmouseenter="enter('-2385577679344520462');" onmouseout="out('-2385577679344520462');" style="">2556                     = (ArrayList&lt;AppInfo&gt;) mBgAllAppsList.data.clone();                                  </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">2557             Runnable r = new Runnable() {                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2558                 public void run() {                                                                      </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2559                     final long t = SystemClock.uptimeMillis();                                           </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2560                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2561                     if (callbacks != null) {                                                             </span>
<span class="-4175293191087427555" onmouseenter="enter('-4175293191087427555');" onmouseout="out('-4175293191087427555');" style="">2562                         callbacks.bindAllApplications(list);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2563                     }                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2564                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="-8852680552322187165" onmouseenter="enter('-8852680552322187165');" onmouseout="out('-8852680552322187165');" style="">2565                         Log.d(TAG, &quot;bound all &quot; + list.size() + &quot; apps from cache in &quot;                   </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2566                                 + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2567                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2568                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2569             };                                                                                           </span>
<span class="1625697599418198126" onmouseenter="enter('1625697599418198126');" onmouseout="out('1625697599418198126');" style="">2570             boolean isRunningOnMainThread = !(sWorkerThread.getThreadId() == Process.myTid());           </span>
<span class="-5455987777066046644" onmouseenter="enter('-5455987777066046644');" onmouseout="out('-5455987777066046644');" style="">2571             if (isRunningOnMainThread) {                                                                 </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style="">2572                 r.run();                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2573             } else {                                                                                     </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="">2574                 mHandler.post(r);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2575             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2576         }                                                                                                </span>
<span  style="">2577                                                                                                          </span>
<span class="-6895852158956881814" onmouseenter="enter('-6895852158956881814');" onmouseout="out('-6895852158956881814');" style="">2578         private void loadAllApps() {                                                                     </span>
<span class="3240137791137450764" onmouseenter="enter('3240137791137450764');" onmouseout="out('3240137791137450764');" style="">2579             final long loadTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                        </span>
<span  style="">2580                                                                                                          </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2581             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2582             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2583                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="-6509823964207432628" onmouseenter="enter('-6509823964207432628');" onmouseout="out('-6509823964207432628');" style="">2584                 Log.w(TAG, &quot;LoaderTask running with no launcher (loadAllApps)&quot;);                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2585                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2586             }                                                                                            </span>
<span  style="">2587                                                                                                          </span>
<span class="1501892088590866369" onmouseenter="enter('1501892088590866369');" onmouseout="out('1501892088590866369');" style="">2588             final PackageManager packageManager = mContext.getPackageManager();                          </span>
<span class="3249044048564826962" onmouseenter="enter('3249044048564826962');" onmouseout="out('3249044048564826962');" style="">2589             final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);                              </span>
<span class="7749064114250496515" onmouseenter="enter('7749064114250496515');" onmouseout="out('7749064114250496515');" style="">2590             mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                            </span>
<span  style="">2591                                                                                                          </span>
<span class="2323997493385795900" onmouseenter="enter('2323997493385795900');" onmouseout="out('2323997493385795900');" style="">2592             // Clear the list of apps                                                                    </span>
<span class="-3100741238331493656" onmouseenter="enter('-3100741238331493656');" onmouseout="out('-3100741238331493656');" style="">2593             mBgAllAppsList.clear();                                                                      </span>
<span  style="">2594                                                                                                          </span>
<span class="-4489177435133431981" onmouseenter="enter('-4489177435133431981');" onmouseout="out('-4489177435133431981');" style="">2595             // Query for the set of apps                                                                 </span>
<span class="6799319218362813943" onmouseenter="enter('6799319218362813943');" onmouseout="out('6799319218362813943');" style="">2596             final long qiaTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                         </span>
<span class="-7993784721640929386" onmouseenter="enter('-7993784721640929386');" onmouseout="out('-7993784721640929386');" style="">2597             List&lt;ResolveInfo&gt; apps = packageManager.queryIntentActivities(mainIntent, 0);                </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2598             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-8953089628779584367" onmouseenter="enter('-8953089628779584367');" onmouseout="out('-8953089628779584367');" style="">2599                 Log.d(TAG, &quot;queryIntentActivities took &quot;                                                 </span>
<span class="8237341079980485738" onmouseenter="enter('8237341079980485738');" onmouseout="out('8237341079980485738');" style="">2600                         + (SystemClock.uptimeMillis()-qiaTime) + &quot;ms&quot;);                                  </span>
<span class="-9015079490762020933" onmouseenter="enter('-9015079490762020933');" onmouseout="out('-9015079490762020933');" style="">2601                 Log.d(TAG, &quot;queryIntentActivities got &quot; + apps.size() + &quot; apps&quot;);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2602             }                                                                                            </span>
<span class="-1144129018602551066" onmouseenter="enter('-1144129018602551066');" onmouseout="out('-1144129018602551066');" style="">2603             // Fail if we don&#x27;t have any apps                                                            </span>
<span class="-1385682343056466434" onmouseenter="enter('-1385682343056466434');" onmouseout="out('-1385682343056466434');" style="">2604             if (apps == null || apps.isEmpty()) {                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2605                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2606             }                                                                                            </span>
<span class="-5585112001695951885" onmouseenter="enter('-5585112001695951885');" onmouseout="out('-5585112001695951885');" style="">2607             // Sort the applications by name                                                             </span>
<span class="5879018485786384871" onmouseenter="enter('5879018485786384871');" onmouseout="out('5879018485786384871');" style="">2608             final long sortTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                        </span>
<span class="3347614076781191804" onmouseenter="enter('3347614076781191804');" onmouseout="out('3347614076781191804');" style="">2609             Collections.sort(apps,                                                                       </span>
<span class="-8211974845882715204" onmouseenter="enter('-8211974845882715204');" onmouseout="out('-8211974845882715204');" style="">2610                     new LauncherModel.ShortcutNameComparator(packageManager, mLabelCache));              </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2611             if (DEBUG_LOADERS) {                                                                         </span>
<span class="8116347759372038508" onmouseenter="enter('8116347759372038508');" onmouseout="out('8116347759372038508');" style="">2612                 Log.d(TAG, &quot;sort took &quot;                                                                  </span>
<span class="992817212926202968" onmouseenter="enter('992817212926202968');" onmouseout="out('992817212926202968');" style="">2613                         + (SystemClock.uptimeMillis()-sortTime) + &quot;ms&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2614             }                                                                                            </span>
<span  style="">2615                                                                                                          </span>
<span class="7729934896614039986" onmouseenter="enter('7729934896614039986');" onmouseout="out('7729934896614039986');" style="">2616             // Create the ApplicationInfos                                                               </span>
<span class="-5895751517948944509" onmouseenter="enter('-5895751517948944509');" onmouseout="out('-5895751517948944509');" style="">2617             for (int i = 0; i &lt; apps.size(); i++) {                                                      </span>
<span class="2626157602240887809" onmouseenter="enter('2626157602240887809');" onmouseout="out('2626157602240887809');" style="">2618                 ResolveInfo app = apps.get(i);                                                           </span>
<span class="3586781851650279349" onmouseenter="enter('3586781851650279349');" onmouseout="out('3586781851650279349');" style="">2619                 // This builds the icon bitmaps.                                                         </span>
<span class="-6607005785467864621" onmouseenter="enter('-6607005785467864621');" onmouseout="out('-6607005785467864621');" style="">2620                 mBgAllAppsList.add(new AppInfo(packageManager, app,                                      </span>
<span class="-2018038209439913805" onmouseenter="enter('-2018038209439913805');" onmouseout="out('-2018038209439913805');" style="">2621                         mIconCache, mLabelCache));                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2622             }                                                                                            </span>
<span  style="">2623                                                                                                          </span>
<span class="-5221747652878631284" onmouseenter="enter('-5221747652878631284');" onmouseout="out('-5221747652878631284');" style="">2624             // Huh? Shouldn&#x27;t this be inside the Runnable below?                                         </span>
<span class="4457761250277868019" onmouseenter="enter('4457761250277868019');" onmouseout="out('4457761250277868019');" style="">2625             final ArrayList&lt;AppInfo&gt; added = mBgAllAppsList.added;                                       </span>
<span class="3218431008368817671" onmouseenter="enter('3218431008368817671');" onmouseout="out('3218431008368817671');" style="">2626             mBgAllAppsList.added = new ArrayList&lt;AppInfo&gt;();                                             </span>
<span  style="">2627                                                                                                          </span>
<span class="2526791049904400058" onmouseenter="enter('2526791049904400058');" onmouseout="out('2526791049904400058');" style="">2628             // Post callback on main thread                                                              </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2629             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2630                 public void run() {                                                                      </span>
<span class="-2007882421121122273" onmouseenter="enter('-2007882421121122273');" onmouseout="out('-2007882421121122273');" style="">2631                     final long bindTime = SystemClock.uptimeMillis();                                    </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2632                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2633                     if (callbacks != null) {                                                             </span>
<span class="8095088373687662981" onmouseenter="enter('8095088373687662981');" onmouseout="out('8095088373687662981');" style="">2634                         callbacks.bindAllApplications(added);                                            </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2635                         if (DEBUG_LOADERS) {                                                             </span>
<span class="1059969227192257889" onmouseenter="enter('1059969227192257889');" onmouseout="out('1059969227192257889');" style="">2636                             Log.d(TAG, &quot;bound &quot; + added.size() + &quot; apps in &quot;                             </span>
<span class="-7437359873458345222" onmouseenter="enter('-7437359873458345222');" onmouseout="out('-7437359873458345222');" style="">2637                                 + (SystemClock.uptimeMillis() - bindTime) + &quot;ms&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2638                         }                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2639                     } else {                                                                             </span>
<span class="7641212838781589328" onmouseenter="enter('7641212838781589328');" onmouseout="out('7641212838781589328');" style="">2640                         Log.i(TAG, &quot;not binding apps: no Launcher activity&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2641                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2642                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2643             });                                                                                          </span>
<span  style="">2644                                                                                                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2645             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-4702241865893587262" onmouseenter="enter('-4702241865893587262');" onmouseout="out('-4702241865893587262');" style="">2646                 Log.d(TAG, &quot;Icons processed in &quot;                                                         </span>
<span class="-1277503613614461490" onmouseenter="enter('-1277503613614461490');" onmouseout="out('-1277503613614461490');" style="">2647                         + (SystemClock.uptimeMillis() - loadTime) + &quot;ms&quot;);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2648             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2649         }                                                                                                </span>
<span  style="">2650                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">2651         public void dumpState() {                                                                        </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2652             synchronized (sBgLock) {                                                                     </span>
<span class="8510692516384923340" onmouseenter="enter('8510692516384923340');" onmouseout="out('8510692516384923340');" style="">2653                 Log.d(TAG, &quot;mLoaderTask.mContext=&quot; + mContext);                                          </span>
<span class="-5057473576968780754" onmouseenter="enter('-5057473576968780754');" onmouseout="out('-5057473576968780754');" style="">2654                 Log.d(TAG, &quot;mLoaderTask.mIsLaunching=&quot; + mIsLaunching);                                  </span>
<span class="5394362584347621452" onmouseenter="enter('5394362584347621452');" onmouseout="out('5394362584347621452');" style="">2655                 Log.d(TAG, &quot;mLoaderTask.mStopped=&quot; + mStopped);                                          </span>
<span class="2283901653600186000" onmouseenter="enter('2283901653600186000');" onmouseout="out('2283901653600186000');" style="">2656                 Log.d(TAG, &quot;mLoaderTask.mLoadAndBindStepFinished=&quot; + mLoadAndBindStepFinished);          </span>
<span class="-259407417202798794" onmouseenter="enter('-259407417202798794');" onmouseout="out('-259407417202798794');" style="">2657                 Log.d(TAG, &quot;mItems size=&quot; + sBgWorkspaceItems.size());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2658             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2659         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2660     }                                                                                                    </span>
<span  style="">2661                                                                                                          </span>
<span class="7630100460211487014" onmouseenter="enter('7630100460211487014');" onmouseout="out('7630100460211487014');" style="">2662     void enqueuePackageUpdated(PackageUpdatedTask task) {                                                </span>
<span class="5827584276449890800" onmouseenter="enter('5827584276449890800');" onmouseout="out('5827584276449890800');" style="">2663         sWorker.post(task);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2664     }                                                                                                    </span>
<span  style="">2665                                                                                                          </span>
<span class="4517543426948493114" onmouseenter="enter('4517543426948493114');" onmouseout="out('4517543426948493114');" style="">2666     private class PackageUpdatedTask implements Runnable {                                               </span>
<span class="-2369313534963024986" onmouseenter="enter('-2369313534963024986');" onmouseout="out('-2369313534963024986');" style="">2667         int mOp;                                                                                         </span>
<span class="1329266106484135476" onmouseenter="enter('1329266106484135476');" onmouseout="out('1329266106484135476');" style="">2668         String[] mPackages;                                                                              </span>
<span  style="">2669                                                                                                          </span>
<span class="7962554983790751070" onmouseenter="enter('7962554983790751070');" onmouseout="out('7962554983790751070');" style="">2670         public static final int OP_NONE = 0;                                                             </span>
<span class="2199739460496975128" onmouseenter="enter('2199739460496975128');" onmouseout="out('2199739460496975128');" style="">2671         public static final int OP_ADD = 1;                                                              </span>
<span class="-6492257742329868745" onmouseenter="enter('-6492257742329868745');" onmouseout="out('-6492257742329868745');" style="">2672         public static final int OP_UPDATE = 2;                                                           </span>
<span class="7223750328294921743" onmouseenter="enter('7223750328294921743');" onmouseout="out('7223750328294921743');" style="">2673         public static final int OP_REMOVE = 3; // uninstlled                                             </span>
<span class="8627918612960647103" onmouseenter="enter('8627918612960647103');" onmouseout="out('8627918612960647103');" style="">2674         public static final int OP_UNAVAILABLE = 4; // external media unmounted                          </span>
<span  style="">2675                                                                                                          </span>
<span  style="">2676                                                                                                          </span>
<span class="-2899951589874278155" onmouseenter="enter('-2899951589874278155');" onmouseout="out('-2899951589874278155');" style="">2677         public PackageUpdatedTask(int op, String[] packages) {                                           </span>
<span class="191999664456871419" onmouseenter="enter('191999664456871419');" onmouseout="out('191999664456871419');" style="">2678             mOp = op;                                                                                    </span>
<span class="-8641118446551244060" onmouseenter="enter('-8641118446551244060');" onmouseout="out('-8641118446551244060');" style="">2679             mPackages = packages;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2680         }                                                                                                </span>
<span  style="">2681                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2682         public void run() {                                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">2683             final Context context = mApp.getContext();                                                   </span>
<span  style="">2684                                                                                                          </span>
<span class="-8513751550533795426" onmouseenter="enter('-8513751550533795426');" onmouseout="out('-8513751550533795426');" style="">2685             final String[] packages = mPackages;                                                         </span>
<span class="3997761927841529422" onmouseenter="enter('3997761927841529422');" onmouseout="out('3997761927841529422');" style="">2686             final int N = packages.length;                                                               </span>
<span class="-2883270888213154035" onmouseenter="enter('-2883270888213154035');" onmouseout="out('-2883270888213154035');" style="">2687             switch (mOp) {                                                                               </span>
<span class="449333994232188305" onmouseenter="enter('449333994232188305');" onmouseout="out('449333994232188305');" style="">2688                 case OP_ADD:                                                                             </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">2689                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="8529503526854951097" onmouseenter="enter('8529503526854951097');" onmouseout="out('8529503526854951097');" style="">2690                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.addPackage &quot; + packages[i]);         </span>
<span class="-7654565316708220659" onmouseenter="enter('-7654565316708220659');" onmouseout="out('-7654565316708220659');" style="">2691                         mIconCache.remove(packages[i]);                                                  </span>
<span class="-2949849672001849759" onmouseenter="enter('-2949849672001849759');" onmouseout="out('-2949849672001849759');" style="">2692                         mBgAllAppsList.addPackage(context, packages[i]);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2693                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2694                     break;                                                                               </span>
<span class="-4770369244410347850" onmouseenter="enter('-4770369244410347850');" onmouseout="out('-4770369244410347850');" style="">2695                 case OP_UPDATE:                                                                          </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">2696                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="-3432436938232924374" onmouseenter="enter('-3432436938232924374');" onmouseout="out('-3432436938232924374');" style="">2697                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.updatePackage &quot; + packages[i]);      </span>
<span class="-272128531266392722" onmouseenter="enter('-272128531266392722');" onmouseout="out('-272128531266392722');" style="">2698                         mBgAllAppsList.updatePackage(context, packages[i]);                              </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">2699                         WidgetPreviewLoader.removePackageFromDb(                                         </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">2700                                 mApp.getWidgetPreviewCacheDb(), packages[i]);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2701                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2702                     break;                                                                               </span>
<span class="-5474983820901132713" onmouseenter="enter('-5474983820901132713');" onmouseout="out('-5474983820901132713');" style="">2703                 case OP_REMOVE:                                                                          </span>
<span class="9130220194739024640" onmouseenter="enter('9130220194739024640');" onmouseout="out('9130220194739024640');" style="">2704                 case OP_UNAVAILABLE:                                                                     </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">2705                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="3815138171377980553" onmouseenter="enter('3815138171377980553');" onmouseout="out('3815138171377980553');" style="">2706                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.removePackage &quot; + packages[i]);      </span>
<span class="7669526743413608016" onmouseenter="enter('7669526743413608016');" onmouseout="out('7669526743413608016');" style="">2707                         mBgAllAppsList.removePackage(packages[i]);                                       </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">2708                         WidgetPreviewLoader.removePackageFromDb(                                         </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">2709                                 mApp.getWidgetPreviewCacheDb(), packages[i]);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2710                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2711                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2712             }                                                                                            </span>
<span  style="">2713                                                                                                          </span>
<span class="1572309132673002234" onmouseenter="enter('1572309132673002234');" onmouseout="out('1572309132673002234');" style="">2714             ArrayList&lt;AppInfo&gt; added = null;                                                             </span>
<span class="-3271065843717738915" onmouseenter="enter('-3271065843717738915');" onmouseout="out('-3271065843717738915');" style="">2715             ArrayList&lt;AppInfo&gt; modified = null;                                                          </span>
<span class="-5760221660526082511" onmouseenter="enter('-5760221660526082511');" onmouseout="out('-5760221660526082511');" style="">2716             final ArrayList&lt;AppInfo&gt; removedApps = new ArrayList&lt;AppInfo&gt;();                             </span>
<span  style="">2717                                                                                                          </span>
<span class="5103344907876037986" onmouseenter="enter('5103344907876037986');" onmouseout="out('5103344907876037986');" style="">2718             if (mBgAllAppsList.added.size() &gt; 0) {                                                       </span>
<span class="-6832117111735480722" onmouseenter="enter('-6832117111735480722');" onmouseout="out('-6832117111735480722');" style="">2719                 added = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.added);                                    </span>
<span class="7424740575354292437" onmouseenter="enter('7424740575354292437');" onmouseout="out('7424740575354292437');" style="">2720                 mBgAllAppsList.added.clear();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2721             }                                                                                            </span>
<span class="-2487689472149982581" onmouseenter="enter('-2487689472149982581');" onmouseout="out('-2487689472149982581');" style="">2722             if (mBgAllAppsList.modified.size() &gt; 0) {                                                    </span>
<span class="-263080790556278433" onmouseenter="enter('-263080790556278433');" onmouseout="out('-263080790556278433');" style="">2723                 modified = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.modified);                              </span>
<span class="7356755564467619497" onmouseenter="enter('7356755564467619497');" onmouseout="out('7356755564467619497');" style="">2724                 mBgAllAppsList.modified.clear();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2725             }                                                                                            </span>
<span class="1067177803970588976" onmouseenter="enter('1067177803970588976');" onmouseout="out('1067177803970588976');" style="">2726             if (mBgAllAppsList.removed.size() &gt; 0) {                                                     </span>
<span class="7103303915069909513" onmouseenter="enter('7103303915069909513');" onmouseout="out('7103303915069909513');" style="">2727                 removedApps.addAll(mBgAllAppsList.removed);                                              </span>
<span class="6489927836548040849" onmouseenter="enter('6489927836548040849');" onmouseout="out('6489927836548040849');" style="">2728                 mBgAllAppsList.removed.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2729             }                                                                                            </span>
<span  style="">2730                                                                                                          </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="">2731             final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                    </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">2732             if (callbacks == null) {                                                                     </span>
<span class="8755914139287185296" onmouseenter="enter('8755914139287185296');" onmouseout="out('8755914139287185296');" style="">2733                 Log.w(TAG, &quot;Nobody to tell about the new app.  Launcher is probably loading.&quot;);          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2734                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2735             }                                                                                            </span>
<span  style="">2736                                                                                                          </span>
<span class="-6581952787492343966" onmouseenter="enter('-6581952787492343966');" onmouseout="out('-6581952787492343966');" style="">2737             if (added != null) {                                                                         </span>
<span class="2110051729201547029" onmouseenter="enter('2110051729201547029');" onmouseout="out('2110051729201547029');" style="">2738                 // Ensure that we add all the workspace applications to the db                           </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2739                 Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                             </span>
<span class="-6277587630605553211" onmouseenter="enter('-6277587630605553211');" onmouseout="out('-6277587630605553211');" style="">2740                 if (!LauncherAppState.isDisableAllApps()) {                                              </span>
<span class="4785144545835380546" onmouseenter="enter('4785144545835380546');" onmouseout="out('4785144545835380546');" style="">2741                     addAndBindAddedApps(context, new ArrayList&lt;ItemInfo&gt;(), cb, added);                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2742                 } else {                                                                                 </span>
<span class="7560882443822012182" onmouseenter="enter('7560882443822012182');" onmouseout="out('7560882443822012182');" style="">2743                     final ArrayList&lt;ItemInfo&gt; addedInfos = new ArrayList&lt;ItemInfo&gt;(added);               </span>
<span class="620263930069644182" onmouseenter="enter('620263930069644182');" onmouseout="out('620263930069644182');" style="">2744                     addAndBindAddedApps(context, addedInfos, cb, added);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2745                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2746             }                                                                                            </span>
<span class="4007684711155860753" onmouseenter="enter('4007684711155860753');" onmouseout="out('4007684711155860753');" style="">2747             if (modified != null) {                                                                      </span>
<span class="-853311881612082067" onmouseenter="enter('-853311881612082067');" onmouseout="out('-853311881612082067');" style="">2748                 final ArrayList&lt;AppInfo&gt; modifiedFinal = modified;                                       </span>
<span  style="">2749                                                                                                          </span>
<span class="417723722259394800" onmouseenter="enter('417723722259394800');" onmouseout="out('417723722259394800');" style="">2750                 // Update the launcher db to reflect the changes                                         </span>
<span class="3799410015074169733" onmouseenter="enter('3799410015074169733');" onmouseout="out('3799410015074169733');" style="">2751                 for (AppInfo a : modifiedFinal) {                                                        </span>
<span class="9185020132746469320" onmouseenter="enter('9185020132746469320');" onmouseout="out('9185020132746469320');" style="">2752                     ArrayList&lt;ItemInfo&gt; infos =                                                          </span>
<span class="1259644807303209381" onmouseenter="enter('1259644807303209381');" onmouseout="out('1259644807303209381');" style="">2753                             getItemInfoForComponentName(a.componentName);                                </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2754                     for (ItemInfo i : infos) {                                                           </span>
<span class="5214363519588275687" onmouseenter="enter('5214363519588275687');" onmouseout="out('5214363519588275687');" style="">2755                         if (isShortcutInfoUpdateable(i)) {                                               </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">2756                             ShortcutInfo info = (ShortcutInfo) i;                                        </span>
<span class="8144150917785227032" onmouseenter="enter('8144150917785227032');" onmouseout="out('8144150917785227032');" style="">2757                             info.title = a.title.toString();                                             </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">2758                             updateItemInDatabase(context, info);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2759                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2760                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2761                 }                                                                                        </span>
<span  style="">2762                                                                                                          </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2763                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2764                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2765                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2766                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="-2589314362702357801" onmouseenter="enter('-2589314362702357801');" onmouseout="out('-2589314362702357801');" style="">2767                             callbacks.bindAppsUpdated(modifiedFinal);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2768                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2769                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2770                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2771             }                                                                                            </span>
<span  style="">2772                                                                                                          </span>
<span class="-1170284362245625596" onmouseenter="enter('-1170284362245625596');" onmouseout="out('-1170284362245625596');" style="">2773             final ArrayList&lt;String&gt; removedPackageNames =                                                </span>
<span class="-5690129641574664711" onmouseenter="enter('-5690129641574664711');" onmouseout="out('-5690129641574664711');" style="">2774                     new ArrayList&lt;String&gt;();                                                             </span>
<span class="-5885531662055245301" onmouseenter="enter('-5885531662055245301');" onmouseout="out('-5885531662055245301');" style="">2775             if (mOp == OP_REMOVE) {                                                                      </span>
<span class="6542623662317418523" onmouseenter="enter('6542623662317418523');" onmouseout="out('6542623662317418523');" style="">2776                 // Mark all packages in the broadcast to be removed                                      </span>
<span class="7356949459385151824" onmouseenter="enter('7356949459385151824');" onmouseout="out('7356949459385151824');" style="">2777                 removedPackageNames.addAll(Arrays.asList(packages));                                     </span>
<span class="-2422536769068214973" onmouseenter="enter('-2422536769068214973');" onmouseout="out('-2422536769068214973');" style="">2778             } else if (mOp == OP_UPDATE) {                                                               </span>
<span class="3231313637982916616" onmouseenter="enter('3231313637982916616');" onmouseout="out('3231313637982916616');" style="">2779                 // Mark disabled packages in the broadcast to be removed                                 </span>
<span class="-2640468621226648159" onmouseenter="enter('-2640468621226648159');" onmouseout="out('-2640468621226648159');" style="">2780                 final PackageManager pm = context.getPackageManager();                                   </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">2781                 for (int i=0; i&lt;N; i++) {                                                                </span>
<span class="2935426733804348481" onmouseenter="enter('2935426733804348481');" onmouseout="out('2935426733804348481');" style="">2782                     if (isPackageDisabled(pm, packages[i])) {                                            </span>
<span class="3041794132682496657" onmouseenter="enter('3041794132682496657');" onmouseout="out('3041794132682496657');" style="">2783                         removedPackageNames.add(packages[i]);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2784                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2785                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2786             }                                                                                            </span>
<span class="-6735782234278978643" onmouseenter="enter('-6735782234278978643');" onmouseout="out('-6735782234278978643');" style="">2787             // Remove all the components associated with this package                                    </span>
<span class="8695538150112490085" onmouseenter="enter('8695538150112490085');" onmouseout="out('8695538150112490085');" style="">2788             for (String pn : removedPackageNames) {                                                      </span>
<span class="-8111972255125637177" onmouseenter="enter('-8111972255125637177');" onmouseout="out('-8111972255125637177');" style="">2789                 ArrayList&lt;ItemInfo&gt; infos = getItemInfoForPackageName(pn);                               </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2790                 for (ItemInfo i : infos) {                                                               </span>
<span class="3909885620637543615" onmouseenter="enter('3909885620637543615');" onmouseout="out('3909885620637543615');" style="">2791                     deleteItemFromDatabase(context, i);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2792                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2793             }                                                                                            </span>
<span class="-2056292254334887175" onmouseenter="enter('-2056292254334887175');" onmouseout="out('-2056292254334887175');" style="">2794             // Remove all the specific components                                                        </span>
<span class="-974749610616658114" onmouseenter="enter('-974749610616658114');" onmouseout="out('-974749610616658114');" style="">2795             for (AppInfo a : removedApps) {                                                              </span>
<span class="-8237639399264107586" onmouseenter="enter('-8237639399264107586');" onmouseout="out('-8237639399264107586');" style="">2796                 ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName);                </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2797                 for (ItemInfo i : infos) {                                                               </span>
<span class="3909885620637543615" onmouseenter="enter('3909885620637543615');" onmouseout="out('3909885620637543615');" style="">2798                     deleteItemFromDatabase(context, i);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2799                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2800             }                                                                                            </span>
<span class="5309180485107849948" onmouseenter="enter('5309180485107849948');" onmouseout="out('5309180485107849948');" style="">2801             if (!removedPackageNames.isEmpty() || !removedApps.isEmpty()) {                              </span>
<span class="-8579411662137624168" onmouseenter="enter('-8579411662137624168');" onmouseout="out('-8579411662137624168');" style="">2802                 // Remove any queued items from the install queue                                        </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style="">2803                 String spKey = LauncherAppState.getSharedPreferencesKey();                               </span>
<span class="-4155822077911930566" onmouseenter="enter('-4155822077911930566');" onmouseout="out('-4155822077911930566');" style="">2804                 SharedPreferences sp =                                                                   </span>
<span class="-7232857049720959502" onmouseenter="enter('-7232857049720959502');" onmouseout="out('-7232857049720959502');" style="">2805                         context.getSharedPreferences(spKey, Context.MODE_PRIVATE);                       </span>
<span class="3942499314707869646" onmouseenter="enter('3942499314707869646');" onmouseout="out('3942499314707869646');" style="">2806                 InstallShortcutReceiver.removeFromInstallQueue(sp, removedPackageNames);                 </span>
<span class="-3818855430394316108" onmouseenter="enter('-3818855430394316108');" onmouseout="out('-3818855430394316108');" style="">2807                 // Call the components-removed callback                                                  </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2808                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2809                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2810                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2811                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="7123425932844918056" onmouseenter="enter('7123425932844918056');" onmouseout="out('7123425932844918056');" style="">2812                             callbacks.bindComponentsRemoved(removedPackageNames, removedApps);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2813                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2814                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2815                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2816             }                                                                                            </span>
<span  style="">2817                                                                                                          </span>
<span class="4263868642545515204" onmouseenter="enter('4263868642545515204');" onmouseout="out('4263868642545515204');" style="">2818             final ArrayList&lt;Object&gt; widgetsAndShortcuts =                                                </span>
<span class="-4925739004532916789" onmouseenter="enter('-4925739004532916789');" onmouseout="out('-4925739004532916789');" style="">2819                 getSortedWidgetsAndShortcuts(context);                                                   </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2820             mHandler.post(new Runnable() {                                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2821                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2822                 public void run() {                                                                      </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2823                     Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                         </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2824                     if (callbacks == cb &amp;&amp; cb != null) {                                                 </span>
<span class="-5360632898061832848" onmouseenter="enter('-5360632898061832848');" onmouseout="out('-5360632898061832848');" style="">2825                         callbacks.bindPackagesUpdated(widgetsAndShortcuts);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2826                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2827                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2828             });                                                                                          </span>
<span  style="">2829                                                                                                          </span>
<span class="2246235439938918294" onmouseenter="enter('2246235439938918294');" onmouseout="out('2246235439938918294');" style="">2830             // Write all the logs to disk                                                                </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2831             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2832                 public void run() {                                                                      </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2833                     Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                         </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2834                     if (callbacks == cb &amp;&amp; cb != null) {                                                 </span>
<span class="-3509183204751013036" onmouseenter="enter('-3509183204751013036');" onmouseout="out('-3509183204751013036');" style="">2835                         callbacks.dumpLogsToLocalData();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2836                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2837                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2838             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2839         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2840     }                                                                                                    </span>
<span  style="">2841                                                                                                          </span>
<span class="5799248721363180071" onmouseenter="enter('5799248721363180071');" onmouseout="out('5799248721363180071');" style="">2842     // Returns a list of ResolveInfos/AppWindowInfos in sorted order                                     </span>
<span class="-3838691324560082495" onmouseenter="enter('-3838691324560082495');" onmouseout="out('-3838691324560082495');" style="">2843     public static ArrayList&lt;Object&gt; getSortedWidgetsAndShortcuts(Context context) {                      </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">2844         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-7530033640159092210" onmouseenter="enter('-7530033640159092210');" onmouseout="out('-7530033640159092210');" style="">2845         final ArrayList&lt;Object&gt; widgetsAndShortcuts = new ArrayList&lt;Object&gt;();                           </span>
<span class="-3206018607877806445" onmouseenter="enter('-3206018607877806445');" onmouseout="out('-3206018607877806445');" style="">2846         widgetsAndShortcuts.addAll(AppWidgetManager.getInstance(context).getInstalledProviders());       </span>
<span class="7483011368565278291" onmouseenter="enter('7483011368565278291');" onmouseout="out('7483011368565278291');" style="">2847         Intent shortcutsIntent = new Intent(Intent.ACTION_CREATE_SHORTCUT);                              </span>
<span class="-1563771411674199697" onmouseenter="enter('-1563771411674199697');" onmouseout="out('-1563771411674199697');" style="">2848         widgetsAndShortcuts.addAll(packageManager.queryIntentActivities(shortcutsIntent, 0));            </span>
<span class="-1102952865112100125" onmouseenter="enter('-1102952865112100125');" onmouseout="out('-1102952865112100125');" style="">2849         Collections.sort(widgetsAndShortcuts,                                                            </span>
<span class="-1681839338823179912" onmouseenter="enter('-1681839338823179912');" onmouseout="out('-1681839338823179912');" style="">2850             new LauncherModel.WidgetAndShortcutNameComparator(packageManager));                          </span>
<span class="4818388040543649614" onmouseenter="enter('4818388040543649614');" onmouseout="out('4818388040543649614');" style="">2851         return widgetsAndShortcuts;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2852     }                                                                                                    </span>
<span  style="">2853                                                                                                          </span>
<span class="8250241672786329916" onmouseenter="enter('8250241672786329916');" onmouseout="out('8250241672786329916');" style="">2854     private static boolean isPackageDisabled(PackageManager pm, String packageName) {                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2855         try {                                                                                            </span>
<span class="4500642088138919346" onmouseenter="enter('4500642088138919346');" onmouseout="out('4500642088138919346');" style="">2856             PackageInfo pi = pm.getPackageInfo(packageName, 0);                                          </span>
<span class="-3710685366547959245" onmouseenter="enter('-3710685366547959245');" onmouseout="out('-3710685366547959245');" style="">2857             return !pi.applicationInfo.enabled;                                                          </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="">2858         } catch (NameNotFoundException e) {                                                              </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style="">2859             // Fall through                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2860         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2861         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2862     }                                                                                                    </span>
<span  style="">2863                                                                                                          </span>
<span class="5484824579758440772" onmouseenter="enter('5484824579758440772');" onmouseout="out('5484824579758440772');" style="">2864     public static boolean isValidPackageComponent(PackageManager pm, ComponentName cn) {                 </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style="">2865         if (cn == null) {                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2866             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2867         }                                                                                                </span>
<span class="3920598161938602311" onmouseenter="enter('3920598161938602311');" onmouseout="out('3920598161938602311');" style="">2868         if (isPackageDisabled(pm, cn.getPackageName())) {                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2869             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2870         }                                                                                                </span>
<span  style="">2871                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2872         try {                                                                                            </span>
<span class="5148337441661745301" onmouseenter="enter('5148337441661745301');" onmouseout="out('5148337441661745301');" style="">2873             // Check the activity                                                                        </span>
<span class="-3548512208842411383" onmouseenter="enter('-3548512208842411383');" onmouseout="out('-3548512208842411383');" style="">2874             PackageInfo pi = pm.getPackageInfo(cn.getPackageName(), 0);                                  </span>
<span class="-7304348613249571904" onmouseenter="enter('-7304348613249571904');" onmouseout="out('-7304348613249571904');" style="">2875             return (pm.getActivityInfo(cn, 0) != null);                                                  </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="">2876         } catch (NameNotFoundException e) {                                                              </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2877             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2878         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2879     }                                                                                                    </span>
<span  style="">2880                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2881     /**                                                                                                  </span>
<span class="-1422058377481062223" onmouseenter="enter('-1422058377481062223');" onmouseout="out('-1422058377481062223');" style="">2882      * Make an ShortcutInfo object for a restored application or shortcut item that points               </span>
<span class="-3240825039404734763" onmouseenter="enter('-3240825039404734763');" onmouseout="out('-3240825039404734763');" style="">2883      * to a package that is not yet installed on the system.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2884      */                                                                                                  </span>
<span class="1063415479211056267" onmouseenter="enter('1063415479211056267');" onmouseout="out('1063415479211056267');" style="">2885     public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex) {                             </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">2886         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style="">2887         if (cursor != null) {                                                                            </span>
<span class="-7858065958686887242" onmouseenter="enter('-7858065958686887242');" onmouseout="out('-7858065958686887242');" style="">2888             info.title =  cursor.getString(titleIndex);                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2889         } else {                                                                                         </span>
<span class="-9179287796133695880" onmouseenter="enter('-9179287796133695880');" onmouseout="out('-9179287796133695880');" style="">2890             info.title = &quot;&quot;;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2891         }                                                                                                </span>
<span class="-1591268116362889652" onmouseenter="enter('-1591268116362889652');" onmouseout="out('-1591268116362889652');" style="">2892         info.setIcon(mIconCache.getIcon(intent, info.title.toString()));                                 </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">2893         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">2894         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2895     }                                                                                                    </span>
<span  style="">2896                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2897     /**                                                                                                  </span>
<span class="3086315656576237338" onmouseenter="enter('3086315656576237338');" onmouseout="out('3086315656576237338');" style="">2898      * Make an Intent object for a restored application or shortcut item that points                     </span>
<span class="-6367188518910147180" onmouseenter="enter('-6367188518910147180');" onmouseout="out('-6367188518910147180');" style="">2899      * to the market page for the item.                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2900      */                                                                                                  </span>
<span class="-6647643744207470673" onmouseenter="enter('-6647643744207470673');" onmouseout="out('-6647643744207470673');" style="">2901     private Intent getRestoredItemIntent(Cursor c, Context context, Intent intent) {                     </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">2902         ComponentName componentName = intent.getComponent();                                             </span>
<span class="5230577021520033618" onmouseenter="enter('5230577021520033618');" onmouseout="out('5230577021520033618');" style="">2903         Intent marketIntent = new Intent(Intent.ACTION_VIEW);                                            </span>
<span class="-6224205935725503646" onmouseenter="enter('-6224205935725503646');" onmouseout="out('-6224205935725503646');" style="">2904         Uri marketUri = new Uri.Builder()                                                                </span>
<span class="-9027153585574964790" onmouseenter="enter('-9027153585574964790');" onmouseout="out('-9027153585574964790');" style="">2905                 .scheme(&quot;market&quot;)                                                                        </span>
<span class="-1106866791415129127" onmouseenter="enter('-1106866791415129127');" onmouseout="out('-1106866791415129127');" style="">2906                 .authority(&quot;details&quot;)                                                                    </span>
<span class="-6156875340655442296" onmouseenter="enter('-6156875340655442296');" onmouseout="out('-6156875340655442296');" style="">2907                 .appendQueryParameter(&quot;id&quot;, componentName.getPackageName())                              </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="">2908                 .build();                                                                                </span>
<span class="-8203346918939498134" onmouseenter="enter('-8203346918939498134');" onmouseout="out('-8203346918939498134');" style="">2909         Log.d(TAG, &quot;manufactured intent uri: &quot; + marketUri.toString());                                  </span>
<span class="8200775736438266685" onmouseenter="enter('8200775736438266685');" onmouseout="out('8200775736438266685');" style="">2910         marketIntent.setData(marketUri);                                                                 </span>
<span class="-840031405639981960" onmouseenter="enter('-840031405639981960');" onmouseout="out('-840031405639981960');" style="">2911         return marketIntent;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2912     }                                                                                                    </span>
<span  style="">2913                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2914     /**                                                                                                  </span>
<span class="6759547650823633948" onmouseenter="enter('6759547650823633948');" onmouseout="out('6759547650823633948');" style="">2915      * This is called from the code that adds shortcuts from the intent receiver.  This                  </span>
<span class="1598280755109073179" onmouseenter="enter('1598280755109073179');" onmouseout="out('1598280755109073179');" style="">2916      * doesn&#x27;t have a Cursor, but                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2917      */                                                                                                  </span>
<span class="5614106103309211810" onmouseenter="enter('5614106103309211810');" onmouseout="out('5614106103309211810');" style="">2918     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context) {        </span>
<span class="-3335806789481426156" onmouseenter="enter('-3335806789481426156');" onmouseout="out('-3335806789481426156');" style="">2919         return getShortcutInfo(manager, intent, context, null, -1, -1, null);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2920     }                                                                                                    </span>
<span  style="">2921                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2922     /**                                                                                                  </span>
<span class="-1467760634860339139" onmouseenter="enter('-1467760634860339139');" onmouseout="out('-1467760634860339139');" style="">2923      * Make an ShortcutInfo object for a shortcut that is an application.                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2924      *                                                                                                   </span>
<span class="-3542647944112672905" onmouseenter="enter('-3542647944112672905');" onmouseout="out('-3542647944112672905');" style="">2925      * If c is not null, then it will be used to fill in missing data like the title and icon.           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2926      */                                                                                                  </span>
<span class="1276500584496912228" onmouseenter="enter('1276500584496912228');" onmouseout="out('1276500584496912228');" style="">2927     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context,          </span>
<span class="-7918747784600027039" onmouseenter="enter('-7918747784600027039');" onmouseout="out('-7918747784600027039');" style="">2928             Cursor c, int iconIndex, int titleIndex, HashMap&lt;Object, CharSequence&gt; labelCache) {         </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">2929         ComponentName componentName = intent.getComponent();                                             </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">2930         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="444940595441544179" onmouseenter="enter('444940595441544179');" onmouseout="out('444940595441544179');" style="">2931         if (componentName != null &amp;&amp; !isValidPackageComponent(manager, componentName)) {                 </span>
<span class="-409027952341615484" onmouseenter="enter('-409027952341615484');" onmouseout="out('-409027952341615484');" style="">2932             Log.d(TAG, &quot;Invalid package found in getShortcutInfo: &quot; + componentName);                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">2933             return null;                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2934         } else {                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2935             try {                                                                                        </span>
<span class="4294749985361673643" onmouseenter="enter('4294749985361673643');" onmouseout="out('4294749985361673643');" style="">2936                 PackageInfo pi = manager.getPackageInfo(componentName.getPackageName(), 0);              </span>
<span class="3308885914817688196" onmouseenter="enter('3308885914817688196');" onmouseout="out('3308885914817688196');" style="">2937                 info.initFlagsAndFirstInstallTime(pi);                                                   </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="">2938             } catch (NameNotFoundException e) {                                                          </span>
<span class="-3402401844985211338" onmouseenter="enter('-3402401844985211338');" onmouseout="out('-3402401844985211338');" style="">2939                 Log.d(TAG, &quot;getPackInfo failed for package &quot; +                                           </span>
<span class="-7617949507024469990" onmouseenter="enter('-7617949507024469990');" onmouseout="out('-7617949507024469990');" style="">2940                         componentName.getPackageName());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2941             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2942         }                                                                                                </span>
<span  style="">2943                                                                                                          </span>
<span class="-5839804976451698217" onmouseenter="enter('-5839804976451698217');" onmouseout="out('-5839804976451698217');" style="">2944         // TODO: See if the PackageManager knows about this case.  If it doesn&#x27;t                         </span>
<span class="-575420847374711684" onmouseenter="enter('-575420847374711684');" onmouseout="out('-575420847374711684');" style="">2945         // then return null &amp; delete this.                                                               </span>
<span  style="">2946                                                                                                          </span>
<span class="5323402181664282980" onmouseenter="enter('5323402181664282980');" onmouseout="out('5323402181664282980');" style="">2947         // the resource -- This may implicitly give us back the fallback icon,                           </span>
<span class="-798092997962515080" onmouseenter="enter('-798092997962515080');" onmouseout="out('-798092997962515080');" style="">2948         // but don&#x27;t worry about that.  All we&#x27;re doing with usingFallbackIcon is                        </span>
<span class="4614559195454825202" onmouseenter="enter('4614559195454825202');" onmouseout="out('4614559195454825202');" style="">2949         // to avoid saving lots of copies of that in the database, and most apps                         </span>
<span class="2042041324737915810" onmouseenter="enter('2042041324737915810');" onmouseout="out('2042041324737915810');" style="">2950         // have icons anyway.                                                                            </span>
<span  style="">2951                                                                                                          </span>
<span class="1748721733354639816" onmouseenter="enter('1748721733354639816');" onmouseout="out('1748721733354639816');" style="">2952         // Attempt to use queryIntentActivities to get the ResolveInfo (with IntentFilter info) and      </span>
<span class="-6676021501376744578" onmouseenter="enter('-6676021501376744578');" onmouseout="out('-6676021501376744578');" style="">2953         // if that fails, or is ambiguious, fallback to the standard way of getting the resolve info     </span>
<span class="-6094266232633177049" onmouseenter="enter('-6094266232633177049');" onmouseout="out('-6094266232633177049');" style="">2954         // via resolveActivity().                                                                        </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">2955         Bitmap icon = null;                                                                              </span>
<span class="-12205607414596767" onmouseenter="enter('-12205607414596767');" onmouseout="out('-12205607414596767');" style="">2956         ResolveInfo resolveInfo = null;                                                                  </span>
<span class="5248255614039346565" onmouseenter="enter('5248255614039346565');" onmouseout="out('5248255614039346565');" style="">2957         ComponentName oldComponent = intent.getComponent();                                              </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="">2958         Intent newIntent = new Intent(intent.getAction(), null);                                         </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="">2959         newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                 </span>
<span class="-4528672120988578527" onmouseenter="enter('-4528672120988578527');" onmouseout="out('-4528672120988578527');" style="">2960         newIntent.setPackage(oldComponent.getPackageName());                                             </span>
<span class="-4266560778617611378" onmouseenter="enter('-4266560778617611378');" onmouseout="out('-4266560778617611378');" style="">2961         List&lt;ResolveInfo&gt; infos = manager.queryIntentActivities(newIntent, 0);                           </span>
<span class="-1258353831095463835" onmouseenter="enter('-1258353831095463835');" onmouseout="out('-1258353831095463835');" style="">2962         for (ResolveInfo i : infos) {                                                                    </span>
<span class="5094763243037624802" onmouseenter="enter('5094763243037624802');" onmouseout="out('5094763243037624802');" style="">2963             ComponentName cn = new ComponentName(i.activityInfo.packageName,                             </span>
<span class="1720373740013823268" onmouseenter="enter('1720373740013823268');" onmouseout="out('1720373740013823268');" style="">2964                     i.activityInfo.name);                                                                </span>
<span class="-7290368567659218563" onmouseenter="enter('-7290368567659218563');" onmouseout="out('-7290368567659218563');" style="">2965             if (cn.equals(oldComponent)) {                                                               </span>
<span class="-6794055892963959667" onmouseenter="enter('-6794055892963959667');" onmouseout="out('-6794055892963959667');" style="">2966                 resolveInfo = i;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2967             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2968         }                                                                                                </span>
<span class="6326898777629576914" onmouseenter="enter('6326898777629576914');" onmouseout="out('6326898777629576914');" style="">2969         if (resolveInfo == null) {                                                                       </span>
<span class="8776212146813846258" onmouseenter="enter('8776212146813846258');" onmouseout="out('8776212146813846258');" style="">2970             resolveInfo = manager.resolveActivity(intent, 0);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2971         }                                                                                                </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="">2972         if (resolveInfo != null) {                                                                       </span>
<span class="-7448006110826377930" onmouseenter="enter('-7448006110826377930');" onmouseout="out('-7448006110826377930');" style="">2973             icon = mIconCache.getIcon(componentName, resolveInfo, labelCache);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2974         }                                                                                                </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">2975         // the db                                                                                        </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">2976         if (icon == null) {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2977             if (c != null) {                                                                             </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">2978                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2979             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2980         }                                                                                                </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">2981         // the fallback icon                                                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">2982         if (icon == null) {                                                                              </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">2983             icon = getFallbackIcon();                                                                    </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">2984             info.usingFallbackIcon = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2985         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">2986         info.setIcon(icon);                                                                              </span>
<span  style="">2987                                                                                                          </span>
<span class="7054767873271725898" onmouseenter="enter('7054767873271725898');" onmouseout="out('7054767873271725898');" style="">2988         // from the resource                                                                             </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="">2989         if (resolveInfo != null) {                                                                       </span>
<span class="4800110805856691594" onmouseenter="enter('4800110805856691594');" onmouseout="out('4800110805856691594');" style="">2990             ComponentName key = LauncherModel.getComponentNameFromResolveInfo(resolveInfo);              </span>
<span class="8748582400169036217" onmouseenter="enter('8748582400169036217');" onmouseout="out('8748582400169036217');" style="">2991             if (labelCache != null &amp;&amp; labelCache.containsKey(key)) {                                     </span>
<span class="3192670581922801839" onmouseenter="enter('3192670581922801839');" onmouseout="out('3192670581922801839');" style="">2992                 info.title = labelCache.get(key);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2993             } else {                                                                                     </span>
<span class="-2714967885034418454" onmouseenter="enter('-2714967885034418454');" onmouseout="out('-2714967885034418454');" style="">2994                 info.title = resolveInfo.activityInfo.loadLabel(manager);                                </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="">2995                 if (labelCache != null) {                                                                </span>
<span class="-7678945850387299322" onmouseenter="enter('-7678945850387299322');" onmouseout="out('-7678945850387299322');" style="">2996                     labelCache.put(key, info.title);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2997                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2998             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2999         }                                                                                                </span>
<span class="-7465759676168587687" onmouseenter="enter('-7465759676168587687');" onmouseout="out('-7465759676168587687');" style="">3000         // from the db                                                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">3001         if (info.title == null) {                                                                        </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">3002             if (c != null) {                                                                             </span>
<span class="-3184821142709825057" onmouseenter="enter('-3184821142709825057');" onmouseout="out('-3184821142709825057');" style="">3003                 info.title =  c.getString(titleIndex);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3004             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3005         }                                                                                                </span>
<span class="-3300288691074588674" onmouseenter="enter('-3300288691074588674');" onmouseout="out('-3300288691074588674');" style="">3006         // fall back to the class name of the activity                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">3007         if (info.title == null) {                                                                        </span>
<span class="-8852275649252281641" onmouseenter="enter('-8852275649252281641');" onmouseout="out('-8852275649252281641');" style="">3008             info.title = componentName.getClassName();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3009         }                                                                                                </span>
<span class="7933897515512130399" onmouseenter="enter('7933897515512130399');" onmouseout="out('7933897515512130399');" style="">3010         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_APPLICATION;                                </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3011         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3012     }                                                                                                    </span>
<span  style="">3013                                                                                                          </span>
<span class="4439425861689174202" onmouseenter="enter('4439425861689174202');" onmouseout="out('4439425861689174202');" style="">3014     static ArrayList&lt;ItemInfo&gt; filterItemInfos(Collection&lt;ItemInfo&gt; infos,                               </span>
<span class="6562040460462558270" onmouseenter="enter('6562040460462558270');" onmouseout="out('6562040460462558270');" style="">3015             ItemInfoFilter f) {                                                                          </span>
<span class="-341948731893176054" onmouseenter="enter('-341948731893176054');" onmouseout="out('-341948731893176054');" style="">3016         HashSet&lt;ItemInfo&gt; filtered = new HashSet&lt;ItemInfo&gt;();                                            </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">3017         for (ItemInfo i : infos) {                                                                       </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3018             if (i instanceof ShortcutInfo) {                                                             </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3019                 ShortcutInfo info = (ShortcutInfo) i;                                                    </span>
<span class="299648897077832064" onmouseenter="enter('299648897077832064');" onmouseout="out('299648897077832064');" style="">3020                 ComponentName cn = info.intent.getComponent();                                           </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3021                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3022                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3023                 }                                                                                        </span>
<span class="-3991875190988320435" onmouseenter="enter('-3991875190988320435');" onmouseout="out('-3991875190988320435');" style="">3024             } else if (i instanceof FolderInfo) {                                                        </span>
<span class="5655388972065239375" onmouseenter="enter('5655388972065239375');" onmouseout="out('5655388972065239375');" style="">3025                 FolderInfo info = (FolderInfo) i;                                                        </span>
<span class="551974476971988370" onmouseenter="enter('551974476971988370');" onmouseout="out('551974476971988370');" style="">3026                 for (ShortcutInfo s : info.contents) {                                                   </span>
<span class="2331162999822676145" onmouseenter="enter('2331162999822676145');" onmouseout="out('2331162999822676145');" style="">3027                     ComponentName cn = s.intent.getComponent();                                          </span>
<span class="-203564141906270755" onmouseenter="enter('-203564141906270755');" onmouseout="out('-203564141906270755');" style="">3028                     if (cn != null &amp;&amp; f.filterItem(info, s, cn)) {                                       </span>
<span class="-3396286072640698031" onmouseenter="enter('-3396286072640698031');" onmouseout="out('-3396286072640698031');" style="">3029                         filtered.add(s);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3030                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3031                 }                                                                                        </span>
<span class="-6245773261295261120" onmouseenter="enter('-6245773261295261120');" onmouseout="out('-6245773261295261120');" style="">3032             } else if (i instanceof LauncherAppWidgetInfo) {                                             </span>
<span class="-9066656906031581030" onmouseenter="enter('-9066656906031581030');" onmouseout="out('-9066656906031581030');" style="">3033                 LauncherAppWidgetInfo info = (LauncherAppWidgetInfo) i;                                  </span>
<span class="7149829203308063306" onmouseenter="enter('7149829203308063306');" onmouseout="out('7149829203308063306');" style="">3034                 ComponentName cn = info.providerName;                                                    </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3035                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3036                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3037                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3038             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3039         }                                                                                                </span>
<span class="-61899809234431084" onmouseenter="enter('-61899809234431084');" onmouseout="out('-61899809234431084');" style="">3040         return new ArrayList&lt;ItemInfo&gt;(filtered);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3041     }                                                                                                    </span>
<span  style="">3042                                                                                                          </span>
<span class="-3045683366231863679" onmouseenter="enter('-3045683366231863679');" onmouseout="out('-3045683366231863679');" style="">3043     private ArrayList&lt;ItemInfo&gt; getItemInfoForPackageName(final String pn) {                             </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">3044         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3045             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">3046             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="4366277958827250658" onmouseenter="enter('4366277958827250658');" onmouseout="out('4366277958827250658');" style="">3047                 return cn.getPackageName().equals(pn);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3048             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3049         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">3050         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3051     }                                                                                                    </span>
<span  style="">3052                                                                                                          </span>
<span class="5278497386445713053" onmouseenter="enter('5278497386445713053');" onmouseout="out('5278497386445713053');" style="">3053     private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname) {                 </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">3054         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3055             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">3056             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="">3057                 return cn.equals(cname);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3058             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3059         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">3060         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3061     }                                                                                                    </span>
<span  style="">3062                                                                                                          </span>
<span class="1124396970102851152" onmouseenter="enter('1124396970102851152');" onmouseout="out('1124396970102851152');" style="">3063     public static boolean isShortcutInfoUpdateable(ItemInfo i) {                                         </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3064         if (i instanceof ShortcutInfo) {                                                                 </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3065             ShortcutInfo info = (ShortcutInfo) i;                                                        </span>
<span class="-4176416752413564182" onmouseenter="enter('-4176416752413564182');" onmouseout="out('-4176416752413564182');" style="">3066             // We need to check for ACTION_MAIN otherwise getComponent() might                           </span>
<span class="-4431177575884820054" onmouseenter="enter('-4431177575884820054');" onmouseout="out('-4431177575884820054');" style="">3067             // return null for some shortcuts (for instance, for shortcuts to                            </span>
<span class="5405126151757999271" onmouseenter="enter('5405126151757999271');" onmouseout="out('5405126151757999271');" style="">3068             // web pages.)                                                                               </span>
<span class="2400775771645829424" onmouseenter="enter('2400775771645829424');" onmouseout="out('2400775771645829424');" style="">3069             Intent intent = info.intent;                                                                 </span>
<span class="5515215321882412237" onmouseenter="enter('5515215321882412237');" onmouseout="out('5515215321882412237');" style="">3070             ComponentName name = intent.getComponent();                                                  </span>
<span class="-7226540389871247766" onmouseenter="enter('-7226540389871247766');" onmouseout="out('-7226540389871247766');" style="">3071             if (info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION &amp;&amp;                     </span>
<span class="-3498713534944595637" onmouseenter="enter('-3498713534944595637');" onmouseout="out('-3498713534944595637');" style="">3072                     Intent.ACTION_MAIN.equals(intent.getAction()) &amp;&amp; name != null) {                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3073                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3074             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3075         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3076         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3077     }                                                                                                    </span>
<span  style="">3078                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3079     /**                                                                                                  </span>
<span class="-7383302121747425580" onmouseenter="enter('-7383302121747425580');" onmouseout="out('-7383302121747425580');" style="">3080      * Make an ShortcutInfo object for a shortcut that isn&#x27;t an application.                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3081      */                                                                                                  </span>
<span class="-832588879686874653" onmouseenter="enter('-832588879686874653');" onmouseout="out('-832588879686874653');" style="">3082     private ShortcutInfo getShortcutInfo(Cursor c, Context context,                                      </span>
<span class="4905943326370352288" onmouseenter="enter('4905943326370352288');" onmouseout="out('4905943326370352288');" style="">3083             int iconTypeIndex, int iconPackageIndex, int iconResourceIndex, int iconIndex,               </span>
<span class="483103881605747557" onmouseenter="enter('483103881605747557');" onmouseout="out('483103881605747557');" style="">3084             int titleIndex) {                                                                            </span>
<span  style="">3085                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3086         Bitmap icon = null;                                                                              </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3087         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">3088         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span  style="">3089                                                                                                          </span>
<span class="7613558771605813536" onmouseenter="enter('7613558771605813536');" onmouseout="out('7613558771605813536');" style="">3090         // TODO: If there&#x27;s an explicit component and we can&#x27;t install that, delete it.                  </span>
<span  style="">3091                                                                                                          </span>
<span class="7288105011746485932" onmouseenter="enter('7288105011746485932');" onmouseout="out('7288105011746485932');" style="">3092         info.title = c.getString(titleIndex);                                                            </span>
<span  style="">3093                                                                                                          </span>
<span class="3612299538514072472" onmouseenter="enter('3612299538514072472');" onmouseout="out('3612299538514072472');" style="">3094         int iconType = c.getInt(iconTypeIndex);                                                          </span>
<span class="587586912378863553" onmouseenter="enter('587586912378863553');" onmouseout="out('587586912378863553');" style="">3095         switch (iconType) {                                                                              </span>
<span class="-349524516714147238" onmouseenter="enter('-349524516714147238');" onmouseout="out('-349524516714147238');" style="">3096         case LauncherSettings.Favorites.ICON_TYPE_RESOURCE:                                              </span>
<span class="-8135410904448428370" onmouseenter="enter('-8135410904448428370');" onmouseout="out('-8135410904448428370');" style="">3097             String packageName = c.getString(iconPackageIndex);                                          </span>
<span class="-8435258133535712396" onmouseenter="enter('-8435258133535712396');" onmouseout="out('-8435258133535712396');" style="">3098             String resourceName = c.getString(iconResourceIndex);                                        </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">3099             PackageManager packageManager = context.getPackageManager();                                 </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3100             info.customIcon = false;                                                                     </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style="">3101             // the resource                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3102             try {                                                                                        </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style="">3103                 Resources resources = packageManager.getResourcesForApplication(packageName);            </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style="">3104                 if (resources != null) {                                                                 </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style="">3105                     final int id = resources.getIdentifier(resourceName, null, null);                    </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3106                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="">3107                             mIconCache.getFullResIcon(resources, id), context);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3108                 }                                                                                        </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3109             } catch (Exception e) {                                                                      </span>
<span class="5772476326804770264" onmouseenter="enter('5772476326804770264');" onmouseout="out('5772476326804770264');" style="">3110                 // drop this.  we have other places to look for icons                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3111             }                                                                                            </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">3112             // the db                                                                                    </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3113             if (icon == null) {                                                                          </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3114                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3115             }                                                                                            </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">3116             // the fallback icon                                                                         </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3117             if (icon == null) {                                                                          </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">3118                 icon = getFallbackIcon();                                                                </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3119                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3120             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3121             break;                                                                                       </span>
<span class="8287056964614325383" onmouseenter="enter('8287056964614325383');" onmouseout="out('8287056964614325383');" style="">3122         case LauncherSettings.Favorites.ICON_TYPE_BITMAP:                                                </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3123             icon = getIconFromCursor(c, iconIndex, context);                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3124             if (icon == null) {                                                                          </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">3125                 icon = getFallbackIcon();                                                                </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3126                 info.customIcon = false;                                                                 </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3127                 info.usingFallbackIcon = true;                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3128             } else {                                                                                     </span>
<span class="5065693686602940755" onmouseenter="enter('5065693686602940755');" onmouseout="out('5065693686602940755');" style="">3129                 info.customIcon = true;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3130             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3131             break;                                                                                       </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">3132         default:                                                                                         </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">3133             icon = getFallbackIcon();                                                                    </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3134             info.usingFallbackIcon = true;                                                               </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3135             info.customIcon = false;                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3136             break;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3137         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3138         info.setIcon(icon);                                                                              </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3139         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3140     }                                                                                                    </span>
<span  style="">3141                                                                                                          </span>
<span class="6654370236660323989" onmouseenter="enter('6654370236660323989');" onmouseout="out('6654370236660323989');" style="">3142     Bitmap getIconFromCursor(Cursor c, int iconIndex, Context context) {                                 </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style="">3143         @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                           </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style="">3144         final boolean debug = false;                                                                     </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style="">3145         if (debug) {                                                                                     </span>
<span class="-6059745727821652987" onmouseenter="enter('-6059745727821652987');" onmouseout="out('-6059745727821652987');" style="">3146             Log.d(TAG, &quot;getIconFromCursor app=&quot;                                                          </span>
<span class="3938717124241653137" onmouseenter="enter('3938717124241653137');" onmouseout="out('3938717124241653137');" style="">3147                     + c.getString(c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE)));           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3148         }                                                                                                </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="">3149         byte[] data = c.getBlob(iconIndex);                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3150         try {                                                                                            </span>
<span class="-8927216840433750458" onmouseenter="enter('-8927216840433750458');" onmouseout="out('-8927216840433750458');" style="">3151             return Utilities.createIconBitmap(                                                           </span>
<span class="5146235978369237158" onmouseenter="enter('5146235978369237158');" onmouseout="out('5146235978369237158');" style="">3152                     BitmapFactory.decodeByteArray(data, 0, data.length), context);                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3153         } catch (Exception e) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3154             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3155         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3156     }                                                                                                    </span>
<span  style="">3157                                                                                                          </span>
<span class="-7359014031490826383" onmouseenter="enter('-7359014031490826383');" onmouseout="out('-7359014031490826383');" style="">3158     ShortcutInfo addShortcut(Context context, Intent data, long container, int screen,                   </span>
<span class="6268414987721391526" onmouseenter="enter('6268414987721391526');" onmouseout="out('6268414987721391526');" style="">3159             int cellX, int cellY, boolean notify) {                                                      </span>
<span class="2628174670305655041" onmouseenter="enter('2628174670305655041');" onmouseout="out('2628174670305655041');" style="">3160         final ShortcutInfo info = infoFromShortcutIntent(context, data, null);                           </span>
<span class="164903852834130891" onmouseenter="enter('164903852834130891');" onmouseout="out('164903852834130891');" style="">3161         if (info == null) {                                                                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3162             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3163         }                                                                                                </span>
<span class="-221445018295793081" onmouseenter="enter('-221445018295793081');" onmouseout="out('-221445018295793081');" style="">3164         addItemToDatabase(context, info, container, screen, cellX, cellY, notify);                       </span>
<span  style="">3165                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3166         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3167     }                                                                                                    </span>
<span  style="">3168                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3169     /**                                                                                                  </span>
<span class="-2170604135443496089" onmouseenter="enter('-2170604135443496089');" onmouseout="out('-2170604135443496089');" style="">3170      * Attempts to find an AppWidgetProviderInfo that matches the given component.                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3171      */                                                                                                  </span>
<span class="-5080859468016274115" onmouseenter="enter('-5080859468016274115');" onmouseout="out('-5080859468016274115');" style="">3172     AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context,                        </span>
<span class="2095123178876202639" onmouseenter="enter('2095123178876202639');" onmouseout="out('2095123178876202639');" style="">3173             ComponentName component) {                                                                   </span>
<span class="-6575430528437366773" onmouseenter="enter('-6575430528437366773');" onmouseout="out('-6575430528437366773');" style="">3174         List&lt;AppWidgetProviderInfo&gt; widgets =                                                            </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="">3175             AppWidgetManager.getInstance(context).getInstalledProviders();                               </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">3176         for (AppWidgetProviderInfo info : widgets) {                                                     </span>
<span class="444529726636175405" onmouseenter="enter('444529726636175405');" onmouseout="out('444529726636175405');" style="">3177             if (info.provider.equals(component)) {                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3178                 return info;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3179             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3180         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3181         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3182     }                                                                                                    </span>
<span  style="">3183                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3184     /**                                                                                                  </span>
<span class="7439199513195640847" onmouseenter="enter('7439199513195640847');" onmouseout="out('7439199513195640847');" style="">3185      * Returns a list of all the widgets that can handle configuration with a particular mimeType.       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3186      */                                                                                                  </span>
<span class="6325854662222182070" onmouseenter="enter('6325854662222182070');" onmouseout="out('6325854662222182070');" style="">3187     List&lt;WidgetMimeTypeHandlerData&gt; resolveWidgetsForMimeType(Context context, String mimeType) {        </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">3188         final PackageManager packageManager = context.getPackageManager();                               </span>
<span class="3847705782231652914" onmouseenter="enter('3847705782231652914');" onmouseout="out('3847705782231652914');" style="">3189         final List&lt;WidgetMimeTypeHandlerData&gt; supportedConfigurationActivities =                         </span>
<span class="-5417931937414580646" onmouseenter="enter('-5417931937414580646');" onmouseout="out('-5417931937414580646');" style="">3190             new ArrayList&lt;WidgetMimeTypeHandlerData&gt;();                                                  </span>
<span  style="">3191                                                                                                          </span>
<span class="3700104316520923099" onmouseenter="enter('3700104316520923099');" onmouseout="out('3700104316520923099');" style="">3192         final Intent supportsIntent =                                                                    </span>
<span class="-5996974504874484707" onmouseenter="enter('-5996974504874484707');" onmouseout="out('-5996974504874484707');" style="">3193             new Intent(InstallWidgetReceiver.ACTION_SUPPORTS_CLIPDATA_MIMETYPE);                         </span>
<span class="6679063100467623292" onmouseenter="enter('6679063100467623292');" onmouseout="out('6679063100467623292');" style="">3194         supportsIntent.setType(mimeType);                                                                </span>
<span  style="">3195                                                                                                          </span>
<span class="6275845746944894373" onmouseenter="enter('6275845746944894373');" onmouseout="out('6275845746944894373');" style="">3196         // Create a set of widget configuration components that we can test against                      </span>
<span class="361965435897470734" onmouseenter="enter('361965435897470734');" onmouseout="out('361965435897470734');" style="">3197         final List&lt;AppWidgetProviderInfo&gt; widgets =                                                      </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="">3198             AppWidgetManager.getInstance(context).getInstalledProviders();                               </span>
<span class="9185108259439406491" onmouseenter="enter('9185108259439406491');" onmouseout="out('9185108259439406491');" style="">3199         final HashMap&lt;ComponentName, AppWidgetProviderInfo&gt; configurationComponentToWidget =             </span>
<span class="-4320342521313681795" onmouseenter="enter('-4320342521313681795');" onmouseout="out('-4320342521313681795');" style="">3200             new HashMap&lt;ComponentName, AppWidgetProviderInfo&gt;();                                         </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">3201         for (AppWidgetProviderInfo info : widgets) {                                                     </span>
<span class="-5537825176935075872" onmouseenter="enter('-5537825176935075872');" onmouseout="out('-5537825176935075872');" style="">3202             configurationComponentToWidget.put(info.configure, info);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3203         }                                                                                                </span>
<span  style="">3204                                                                                                          </span>
<span class="7227984661430491714" onmouseenter="enter('7227984661430491714');" onmouseout="out('7227984661430491714');" style="">3205         // Run through each of the intents that can handle this type of clip data, and cross             </span>
<span class="-5312515598910931459" onmouseenter="enter('-5312515598910931459');" onmouseout="out('-5312515598910931459');" style="">3206         // reference them with the components that are actual configuration components                   </span>
<span class="96188399651153294" onmouseenter="enter('96188399651153294');" onmouseout="out('96188399651153294');" style="">3207         final List&lt;ResolveInfo&gt; activities = packageManager.queryIntentActivities(supportsIntent,        </span>
<span class="2456166036476176214" onmouseenter="enter('2456166036476176214');" onmouseout="out('2456166036476176214');" style="">3208                 PackageManager.MATCH_DEFAULT_ONLY);                                                      </span>
<span class="-6210771211908512935" onmouseenter="enter('-6210771211908512935');" onmouseout="out('-6210771211908512935');" style="">3209         for (ResolveInfo info : activities) {                                                            </span>
<span class="4178492805266676194" onmouseenter="enter('4178492805266676194');" onmouseout="out('4178492805266676194');" style="">3210             final ActivityInfo activityInfo = info.activityInfo;                                         </span>
<span class="5911001791562559694" onmouseenter="enter('5911001791562559694');" onmouseout="out('5911001791562559694');" style="">3211             final ComponentName infoComponent = new ComponentName(activityInfo.packageName,              </span>
<span class="2224927995621460603" onmouseenter="enter('2224927995621460603');" onmouseout="out('2224927995621460603');" style="">3212                     activityInfo.name);                                                                  </span>
<span class="5227428239073058925" onmouseenter="enter('5227428239073058925');" onmouseout="out('5227428239073058925');" style="">3213             if (configurationComponentToWidget.containsKey(infoComponent)) {                             </span>
<span class="1978663855217064477" onmouseenter="enter('1978663855217064477');" onmouseout="out('1978663855217064477');" style="">3214                 supportedConfigurationActivities.add(                                                    </span>
<span class="-7165755523548006690" onmouseenter="enter('-7165755523548006690');" onmouseout="out('-7165755523548006690');" style="">3215                         new InstallWidgetReceiver.WidgetMimeTypeHandlerData(info,                        </span>
<span class="-7657609803705245302" onmouseenter="enter('-7657609803705245302');" onmouseout="out('-7657609803705245302');" style="">3216                                 configurationComponentToWidget.get(infoComponent)));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3217             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3218         }                                                                                                </span>
<span class="8087136273107515292" onmouseenter="enter('8087136273107515292');" onmouseout="out('8087136273107515292');" style="">3219         return supportedConfigurationActivities;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3220     }                                                                                                    </span>
<span  style="">3221                                                                                                          </span>
<span class="-5347330719934774268" onmouseenter="enter('-5347330719934774268');" onmouseout="out('-5347330719934774268');" style="">3222     ShortcutInfo infoFromShortcutIntent(Context context, Intent data, Bitmap fallbackIcon) {             </span>
<span class="8885065625084988978" onmouseenter="enter('8885065625084988978');" onmouseout="out('8885065625084988978');" style="">3223         Intent intent = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_INTENT);                           </span>
<span class="8754707358466729356" onmouseenter="enter('8754707358466729356');" onmouseout="out('8754707358466729356');" style="">3224         String name = data.getStringExtra(Intent.EXTRA_SHORTCUT_NAME);                                   </span>
<span class="-6415007334509386725" onmouseenter="enter('-6415007334509386725');" onmouseout="out('-6415007334509386725');" style="">3225         Parcelable bitmap = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON);                         </span>
<span  style="">3226                                                                                                          </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">3227         if (intent == null) {                                                                            </span>
<span class="-7222749280640950660" onmouseenter="enter('-7222749280640950660');" onmouseout="out('-7222749280640950660');" style="">3228             // If the intent is null, we can&#x27;t construct a valid ShortcutInfo, so we return null         </span>
<span class="2086461264164088394" onmouseenter="enter('2086461264164088394');" onmouseout="out('2086461264164088394');" style="">3229             Log.e(TAG, &quot;Can&#x27;t construct ShorcutInfo with null intent&quot;);                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3230             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3231         }                                                                                                </span>
<span  style="">3232                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3233         Bitmap icon = null;                                                                              </span>
<span class="-5201738827927049970" onmouseenter="enter('-5201738827927049970');" onmouseout="out('-5201738827927049970');" style="">3234         boolean customIcon = false;                                                                      </span>
<span class="7106370779598857182" onmouseenter="enter('7106370779598857182');" onmouseout="out('7106370779598857182');" style="">3235         ShortcutIconResource iconResource = null;                                                        </span>
<span  style="">3236                                                                                                          </span>
<span class="4708321654003878831" onmouseenter="enter('4708321654003878831');" onmouseout="out('4708321654003878831');" style="">3237         if (bitmap != null &amp;&amp; bitmap instanceof Bitmap) {                                                </span>
<span class="-4792971395534249505" onmouseenter="enter('-4792971395534249505');" onmouseout="out('-4792971395534249505');" style="">3238             icon = Utilities.createIconBitmap(new FastBitmapDrawable((Bitmap)bitmap), context);          </span>
<span class="398283090594517644" onmouseenter="enter('398283090594517644');" onmouseout="out('398283090594517644');" style="">3239             customIcon = true;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3240         } else {                                                                                         </span>
<span class="8053278256512428939" onmouseenter="enter('8053278256512428939');" onmouseout="out('8053278256512428939');" style="">3241             Parcelable extra = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE);             </span>
<span class="1150112908884585569" onmouseenter="enter('1150112908884585569');" onmouseout="out('1150112908884585569');" style="">3242             if (extra != null &amp;&amp; extra instanceof ShortcutIconResource) {                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3243                 try {                                                                                    </span>
<span class="7381422411731402038" onmouseenter="enter('7381422411731402038');" onmouseout="out('7381422411731402038');" style="">3244                     iconResource = (ShortcutIconResource) extra;                                         </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">3245                     final PackageManager packageManager = context.getPackageManager();                   </span>
<span class="8040670109966211806" onmouseenter="enter('8040670109966211806');" onmouseout="out('8040670109966211806');" style="">3246                     Resources resources = packageManager.getResourcesForApplication(                     </span>
<span class="6486160691197808360" onmouseenter="enter('6486160691197808360');" onmouseout="out('6486160691197808360');" style="">3247                             iconResource.packageName);                                                   </span>
<span class="8660063882056417771" onmouseenter="enter('8660063882056417771');" onmouseout="out('8660063882056417771');" style="">3248                     final int id = resources.getIdentifier(iconResource.resourceName, null, null);       </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3249                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="">3250                             mIconCache.getFullResIcon(resources, id), context);                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3251                 } catch (Exception e) {                                                                  </span>
<span class="3904703345331845179" onmouseenter="enter('3904703345331845179');" onmouseout="out('3904703345331845179');" style="">3252                     Log.w(TAG, &quot;Could not load shortcut icon: &quot; + extra);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3253                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3254             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3255         }                                                                                                </span>
<span  style="">3256                                                                                                          </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3257         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span  style="">3258                                                                                                          </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3259         if (icon == null) {                                                                              </span>
<span class="-5102432251092900261" onmouseenter="enter('-5102432251092900261');" onmouseout="out('-5102432251092900261');" style="">3260             if (fallbackIcon != null) {                                                                  </span>
<span class="5793590417920465615" onmouseenter="enter('5793590417920465615');" onmouseout="out('5793590417920465615');" style="">3261                 icon = fallbackIcon;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3262             } else {                                                                                     </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">3263                 icon = getFallbackIcon();                                                                </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3264                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3265             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3266         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3267         info.setIcon(icon);                                                                              </span>
<span  style="">3268                                                                                                          </span>
<span class="-1829710476241369792" onmouseenter="enter('-1829710476241369792');" onmouseout="out('-1829710476241369792');" style="">3269         info.title = name;                                                                               </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">3270         info.intent = intent;                                                                            </span>
<span class="4633184714742215751" onmouseenter="enter('4633184714742215751');" onmouseout="out('4633184714742215751');" style="">3271         info.customIcon = customIcon;                                                                    </span>
<span class="6083484121682275347" onmouseenter="enter('6083484121682275347');" onmouseout="out('6083484121682275347');" style="">3272         info.iconResource = iconResource;                                                                </span>
<span  style="">3273                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3274         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3275     }                                                                                                    </span>
<span  style="">3276                                                                                                          </span>
<span class="869799550823252877" onmouseenter="enter('869799550823252877');" onmouseout="out('869799550823252877');" style="">3277     boolean queueIconToBeChecked(HashMap&lt;Object, byte[]&gt; cache, ShortcutInfo info, Cursor c,             </span>
<span class="650460935465639981" onmouseenter="enter('650460935465639981');" onmouseout="out('650460935465639981');" style="">3278             int iconIndex) {                                                                             </span>
<span class="63801910951777151" onmouseenter="enter('63801910951777151');" onmouseout="out('63801910951777151');" style="">3279         // If apps can&#x27;t be on SD, don&#x27;t even bother.                                                    </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">3280         if (!mAppsCanBeOnRemoveableStorage) {                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3281             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3282         }                                                                                                </span>
<span class="861653016939823039" onmouseenter="enter('861653016939823039');" onmouseout="out('861653016939823039');" style="">3283         // If this icon doesn&#x27;t have a custom icon, check to see                                         </span>
<span class="-1631525504415382572" onmouseenter="enter('-1631525504415382572');" onmouseout="out('-1631525504415382572');" style="">3284         // what&#x27;s stored in the DB, and if it doesn&#x27;t match what                                         </span>
<span class="-2833764056931958051" onmouseenter="enter('-2833764056931958051');" onmouseout="out('-2833764056931958051');" style="">3285         // we&#x27;re going to show, store what we are going to show back                                     </span>
<span class="6822044102664419432" onmouseenter="enter('6822044102664419432');" onmouseout="out('6822044102664419432');" style="">3286         // into the DB.  We do this so when we&#x27;re loading, if the                                        </span>
<span class="2186475696045222856" onmouseenter="enter('2186475696045222856');" onmouseout="out('2186475696045222856');" style="">3287         // package manager can&#x27;t find an icon (for example because                                       </span>
<span class="-3178081182524516354" onmouseenter="enter('-3178081182524516354');" onmouseout="out('-3178081182524516354');" style="">3288         // the app is on SD) then we can use that instead.                                               </span>
<span class="6478679774718804760" onmouseenter="enter('6478679774718804760');" onmouseout="out('6478679774718804760');" style="">3289         if (!info.customIcon &amp;&amp; !info.usingFallbackIcon) {                                               </span>
<span class="9182700683168292388" onmouseenter="enter('9182700683168292388');" onmouseout="out('9182700683168292388');" style="">3290             cache.put(info, c.getBlob(iconIndex));                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3291             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3292         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3293         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3294     }                                                                                                    </span>
<span class="1654527872685192879" onmouseenter="enter('1654527872685192879');" onmouseout="out('1654527872685192879');" style="">3295     void updateSavedIcon(Context context, ShortcutInfo info, byte[] data) {                              </span>
<span class="2739424845963553299" onmouseenter="enter('2739424845963553299');" onmouseout="out('2739424845963553299');" style="">3296         boolean needSave = false;                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3297         try {                                                                                            </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="">3298             if (data != null) {                                                                          </span>
<span class="-7759318311620721467" onmouseenter="enter('-7759318311620721467');" onmouseout="out('-7759318311620721467');" style="">3299                 Bitmap saved = BitmapFactory.decodeByteArray(data, 0, data.length);                      </span>
<span class="5601916118931842920" onmouseenter="enter('5601916118931842920');" onmouseout="out('5601916118931842920');" style="">3300                 Bitmap loaded = info.getIcon(mIconCache);                                                </span>
<span class="3622333829210083937" onmouseenter="enter('3622333829210083937');" onmouseout="out('3622333829210083937');" style="">3301                 needSave = !saved.sameAs(loaded);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3302             } else {                                                                                     </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3303                 needSave = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3304             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3305         } catch (Exception e) {                                                                          </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3306             needSave = true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3307         }                                                                                                </span>
<span class="-1391846982631217245" onmouseenter="enter('-1391846982631217245');" onmouseout="out('-1391846982631217245');" style="">3308         if (needSave) {                                                                                  </span>
<span class="3557323548661765982" onmouseenter="enter('3557323548661765982');" onmouseout="out('3557323548661765982');" style="">3309             Log.d(TAG, &quot;going to save icon bitmap for info=&quot; + info);                                    </span>
<span class="2982884345620001266" onmouseenter="enter('2982884345620001266');" onmouseout="out('2982884345620001266');" style="">3310             // This is slower than is ideal, but this only happens once                                  </span>
<span class="6026812495787058898" onmouseenter="enter('6026812495787058898');" onmouseout="out('6026812495787058898');" style="">3311             // or when the app is updated with a new icon.                                               </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">3312             updateItemInDatabase(context, info);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3313         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3314     }                                                                                                    </span>
<span  style="">3315                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3316     /**                                                                                                  </span>
<span class="4855649975001229153" onmouseenter="enter('4855649975001229153');" onmouseout="out('4855649975001229153');" style="">3317      * Return an existing FolderInfo object if we have encountered this ID previously,                   </span>
<span class="1965046356881977619" onmouseenter="enter('1965046356881977619');" onmouseout="out('1965046356881977619');" style="">3318      * or make a new one.                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3319      */                                                                                                  </span>
<span class="-2475696420152943641" onmouseenter="enter('-2475696420152943641');" onmouseout="out('-2475696420152943641');" style="">3320     private static FolderInfo findOrMakeFolder(HashMap&lt;Long, FolderInfo&gt; folders, long id) {             </span>
<span class="4702055422209629108" onmouseenter="enter('4702055422209629108');" onmouseout="out('4702055422209629108');" style="">3321         // See if a placeholder was created for us already                                               </span>
<span class="5369947662598537472" onmouseenter="enter('5369947662598537472');" onmouseout="out('5369947662598537472');" style="">3322         FolderInfo folderInfo = folders.get(id);                                                         </span>
<span class="-1935655509058582330" onmouseenter="enter('-1935655509058582330');" onmouseout="out('-1935655509058582330');" style="">3323         if (folderInfo == null) {                                                                        </span>
<span class="-2837885610668527269" onmouseenter="enter('-2837885610668527269');" onmouseout="out('-2837885610668527269');" style="">3324             // No placeholder -- create a new instance                                                   </span>
<span class="-1173144769562528834" onmouseenter="enter('-1173144769562528834');" onmouseout="out('-1173144769562528834');" style="">3325             folderInfo = new FolderInfo();                                                               </span>
<span class="-6364759527041918506" onmouseenter="enter('-6364759527041918506');" onmouseout="out('-6364759527041918506');" style="">3326             folders.put(id, folderInfo);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3327         }                                                                                                </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style="">3328         return folderInfo;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3329     }                                                                                                    </span>
<span  style="">3330                                                                                                          </span>
<span class="-958488581416967596" onmouseenter="enter('-958488581416967596');" onmouseout="out('-958488581416967596');" style="">3331     public static final Comparator&lt;AppInfo&gt; getAppNameComparator() {                                     </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">3332         final Collator collator = Collator.getInstance();                                                </span>
<span class="-5613048777706091935" onmouseenter="enter('-5613048777706091935');" onmouseout="out('-5613048777706091935');" style="">3333         return new Comparator&lt;AppInfo&gt;() {                                                               </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3334             public final int compare(AppInfo a, AppInfo b) {                                             </span>
<span class="-7549376093488495011" onmouseenter="enter('-7549376093488495011');" onmouseout="out('-7549376093488495011');" style="">3335                 int result = collator.compare(a.title.toString().trim(),                                 </span>
<span class="1811873973139560730" onmouseenter="enter('1811873973139560730');" onmouseout="out('1811873973139560730');" style="">3336                         b.title.toString().trim());                                                      </span>
<span class="8606135965292633507" onmouseenter="enter('8606135965292633507');" onmouseout="out('8606135965292633507');" style="">3337                 if (result == 0) {                                                                       </span>
<span class="3669915132885915948" onmouseenter="enter('3669915132885915948');" onmouseout="out('3669915132885915948');" style="">3338                     result = a.componentName.compareTo(b.componentName);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3339                 }                                                                                        </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">3340                 return result;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3341             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3342         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3343     }                                                                                                    </span>
<span class="394292360646743486" onmouseenter="enter('394292360646743486');" onmouseout="out('394292360646743486');" style="">3344     public static final Comparator&lt;AppInfo&gt; APP_INSTALL_TIME_COMPARATOR                                  </span>
<span class="-2973469265380285464" onmouseenter="enter('-2973469265380285464');" onmouseout="out('-2973469265380285464');" style="">3345             = new Comparator&lt;AppInfo&gt;() {                                                                </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3346         public final int compare(AppInfo a, AppInfo b) {                                                 </span>
<span class="4743139001154708795" onmouseenter="enter('4743139001154708795');" onmouseout="out('4743139001154708795');" style="">3347             if (a.firstInstallTime &lt; b.firstInstallTime) return 1;                                       </span>
<span class="2246013200960361834" onmouseenter="enter('2246013200960361834');" onmouseout="out('2246013200960361834');" style="">3348             if (a.firstInstallTime &gt; b.firstInstallTime) return -1;                                      </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style="">3349             return 0;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3350         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3351     };                                                                                                   </span>
<span class="-8609474311948503984" onmouseenter="enter('-8609474311948503984');" onmouseout="out('-8609474311948503984');" style="">3352     public static final Comparator&lt;AppWidgetProviderInfo&gt; getWidgetNameComparator() {                    </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">3353         final Collator collator = Collator.getInstance();                                                </span>
<span class="-2259377864696368534" onmouseenter="enter('-2259377864696368534');" onmouseout="out('-2259377864696368534');" style="">3354         return new Comparator&lt;AppWidgetProviderInfo&gt;() {                                                 </span>
<span class="-678507615594739242" onmouseenter="enter('-678507615594739242');" onmouseout="out('-678507615594739242');" style="">3355             public final int compare(AppWidgetProviderInfo a, AppWidgetProviderInfo b) {                 </span>
<span class="2077578932126968211" onmouseenter="enter('2077578932126968211');" onmouseout="out('2077578932126968211');" style="">3356                 return collator.compare(a.label.toString().trim(), b.label.toString().trim());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3357             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3358         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3359     }                                                                                                    </span>
<span class="-2741084556110057526" onmouseenter="enter('-2741084556110057526');" onmouseout="out('-2741084556110057526');" style="">3360     static ComponentName getComponentNameFromResolveInfo(ResolveInfo info) {                             </span>
<span class="5044967282776033452" onmouseenter="enter('5044967282776033452');" onmouseout="out('5044967282776033452');" style="">3361         if (info.activityInfo != null) {                                                                 </span>
<span class="4524084479320544608" onmouseenter="enter('4524084479320544608');" onmouseout="out('4524084479320544608');" style="">3362             return new ComponentName(info.activityInfo.packageName, info.activityInfo.name);             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3363         } else {                                                                                         </span>
<span class="-6175863207819175779" onmouseenter="enter('-6175863207819175779');" onmouseout="out('-6175863207819175779');" style="">3364             return new ComponentName(info.serviceInfo.packageName, info.serviceInfo.name);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3365         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3366     }                                                                                                    </span>
<span class="-1238156797468239183" onmouseenter="enter('-1238156797468239183');" onmouseout="out('-1238156797468239183');" style="">3367     public static class ShortcutNameComparator implements Comparator&lt;ResolveInfo&gt; {                      </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">3368         private Collator mCollator;                                                                      </span>
<span class="3738582539680694944" onmouseenter="enter('3738582539680694944');" onmouseout="out('3738582539680694944');" style="">3369         private PackageManager mPackageManager;                                                          </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">3370         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span class="-5960404209194449161" onmouseenter="enter('-5960404209194449161');" onmouseout="out('-5960404209194449161');" style="">3371         ShortcutNameComparator(PackageManager pm) {                                                      </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="">3372             mPackageManager = pm;                                                                        </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">3373             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3374             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3375         }                                                                                                </span>
<span class="-5325604689380562785" onmouseenter="enter('-5325604689380562785');" onmouseout="out('-5325604689380562785');" style="">3376         ShortcutNameComparator(PackageManager pm, HashMap&lt;Object, CharSequence&gt; labelCache) {            </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="">3377             mPackageManager = pm;                                                                        </span>
<span class="-1230739904022851098" onmouseenter="enter('-1230739904022851098');" onmouseout="out('-1230739904022851098');" style="">3378             mLabelCache = labelCache;                                                                    </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3379             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3380         }                                                                                                </span>
<span class="2504403784205444317" onmouseenter="enter('2504403784205444317');" onmouseout="out('2504403784205444317');" style="">3381         public final int compare(ResolveInfo a, ResolveInfo b) {                                         </span>
<span class="177946296771916785" onmouseenter="enter('177946296771916785');" onmouseout="out('177946296771916785');" style="">3382             CharSequence labelA, labelB;                                                                 </span>
<span class="2313389288092914550" onmouseenter="enter('2313389288092914550');" onmouseout="out('2313389288092914550');" style="">3383             ComponentName keyA = LauncherModel.getComponentNameFromResolveInfo(a);                       </span>
<span class="1313017237584786738" onmouseenter="enter('1313017237584786738');" onmouseout="out('1313017237584786738');" style="">3384             ComponentName keyB = LauncherModel.getComponentNameFromResolveInfo(b);                       </span>
<span class="6987605502838603761" onmouseenter="enter('6987605502838603761');" onmouseout="out('6987605502838603761');" style="">3385             if (mLabelCache.containsKey(keyA)) {                                                         </span>
<span class="-8432555163859180221" onmouseenter="enter('-8432555163859180221');" onmouseout="out('-8432555163859180221');" style="">3386                 labelA = mLabelCache.get(keyA);                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3387             } else {                                                                                     </span>
<span class="-2584626643586656789" onmouseenter="enter('-2584626643586656789');" onmouseout="out('-2584626643586656789');" style="">3388                 labelA = a.loadLabel(mPackageManager).toString().trim();                                 </span>
<span  style="">3389                                                                                                          </span>
<span class="-8431652685509449538" onmouseenter="enter('-8431652685509449538');" onmouseout="out('-8431652685509449538');" style="">3390                 mLabelCache.put(keyA, labelA);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3391             }                                                                                            </span>
<span class="-6450873724396873776" onmouseenter="enter('-6450873724396873776');" onmouseout="out('-6450873724396873776');" style="">3392             if (mLabelCache.containsKey(keyB)) {                                                         </span>
<span class="-3184391819650288160" onmouseenter="enter('-3184391819650288160');" onmouseout="out('-3184391819650288160');" style="">3393                 labelB = mLabelCache.get(keyB);                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3394             } else {                                                                                     </span>
<span class="-6035042839601081566" onmouseenter="enter('-6035042839601081566');" onmouseout="out('-6035042839601081566');" style="">3395                 labelB = b.loadLabel(mPackageManager).toString().trim();                                 </span>
<span  style="">3396                                                                                                          </span>
<span class="6304111994442836155" onmouseenter="enter('6304111994442836155');" onmouseout="out('6304111994442836155');" style="">3397                 mLabelCache.put(keyB, labelB);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3398             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3399             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3400         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3401     };                                                                                                   </span>
<span class="-9068712813001281029" onmouseenter="enter('-9068712813001281029');" onmouseout="out('-9068712813001281029');" style="">3402     public static class WidgetAndShortcutNameComparator implements Comparator&lt;Object&gt; {                  </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">3403         private Collator mCollator;                                                                      </span>
<span class="3738582539680694944" onmouseenter="enter('3738582539680694944');" onmouseout="out('3738582539680694944');" style="">3404         private PackageManager mPackageManager;                                                          </span>
<span class="-3647203189121938913" onmouseenter="enter('-3647203189121938913');" onmouseout="out('-3647203189121938913');" style="">3405         private HashMap&lt;Object, String&gt; mLabelCache;                                                     </span>
<span class="-7973787508768304552" onmouseenter="enter('-7973787508768304552');" onmouseout="out('-7973787508768304552');" style="">3406         WidgetAndShortcutNameComparator(PackageManager pm) {                                             </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="">3407             mPackageManager = pm;                                                                        </span>
<span class="240497455152177218" onmouseenter="enter('240497455152177218');" onmouseout="out('240497455152177218');" style="">3408             mLabelCache = new HashMap&lt;Object, String&gt;();                                                 </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3409             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3410         }                                                                                                </span>
<span class="6735042653098150116" onmouseenter="enter('6735042653098150116');" onmouseout="out('6735042653098150116');" style="">3411         public final int compare(Object a, Object b) {                                                   </span>
<span class="-655692707583917271" onmouseenter="enter('-655692707583917271');" onmouseout="out('-655692707583917271');" style="">3412             String labelA, labelB;                                                                       </span>
<span class="-5754282386436968390" onmouseenter="enter('-5754282386436968390');" onmouseout="out('-5754282386436968390');" style="">3413             if (mLabelCache.containsKey(a)) {                                                            </span>
<span class="9174303291338212675" onmouseenter="enter('9174303291338212675');" onmouseout="out('9174303291338212675');" style="">3414                 labelA = mLabelCache.get(a);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3415             } else {                                                                                     </span>
<span class="-5230674800178108876" onmouseenter="enter('-5230674800178108876');" onmouseout="out('-5230674800178108876');" style="">3416                 labelA = (a instanceof AppWidgetProviderInfo) ?                                          </span>
<span class="8106329842535817312" onmouseenter="enter('8106329842535817312');" onmouseout="out('8106329842535817312');" style="">3417                     ((AppWidgetProviderInfo) a).label :                                                  </span>
<span class="2303647925533744119" onmouseenter="enter('2303647925533744119');" onmouseout="out('2303647925533744119');" style="">3418                     ((ResolveInfo) a).loadLabel(mPackageManager).toString().trim();                      </span>
<span class="-6757493580793216382" onmouseenter="enter('-6757493580793216382');" onmouseout="out('-6757493580793216382');" style="">3419                 mLabelCache.put(a, labelA);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3420             }                                                                                            </span>
<span class="2173723640298609502" onmouseenter="enter('2173723640298609502');" onmouseout="out('2173723640298609502');" style="">3421             if (mLabelCache.containsKey(b)) {                                                            </span>
<span class="-253401768434607465" onmouseenter="enter('-253401768434607465');" onmouseout="out('-253401768434607465');" style="">3422                 labelB = mLabelCache.get(b);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3423             } else {                                                                                     </span>
<span class="2760475927841141319" onmouseenter="enter('2760475927841141319');" onmouseout="out('2760475927841141319');" style="">3424                 labelB = (b instanceof AppWidgetProviderInfo) ?                                          </span>
<span class="-8579211562497370011" onmouseenter="enter('-8579211562497370011');" onmouseout="out('-8579211562497370011');" style="">3425                     ((AppWidgetProviderInfo) b).label :                                                  </span>
<span class="-7445104582750098413" onmouseenter="enter('-7445104582750098413');" onmouseout="out('-7445104582750098413');" style="">3426                     ((ResolveInfo) b).loadLabel(mPackageManager).toString().trim();                      </span>
<span class="1041849722861633477" onmouseenter="enter('1041849722861633477');" onmouseout="out('1041849722861633477');" style="">3427                 mLabelCache.put(b, labelB);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3428             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3429             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3430         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3431     };                                                                                                   </span>
<span  style="">3432                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">3433     public void dumpState() {                                                                            </span>
<span class="-8509686920730582178" onmouseenter="enter('-8509686920730582178');" onmouseout="out('-8509686920730582178');" style="">3434         Log.d(TAG, &quot;mCallbacks=&quot; + mCallbacks);                                                          </span>
<span class="-6032216957883964740" onmouseenter="enter('-6032216957883964740');" onmouseout="out('-6032216957883964740');" style="">3435         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.data&quot;, mBgAllAppsList.data);                  </span>
<span class="8779182816240818818" onmouseenter="enter('8779182816240818818');" onmouseout="out('8779182816240818818');" style="">3436         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.added&quot;, mBgAllAppsList.added);                </span>
<span class="5513048904999210121" onmouseenter="enter('5513048904999210121');" onmouseout="out('5513048904999210121');" style="">3437         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.removed&quot;, mBgAllAppsList.removed);            </span>
<span class="-6417320778911436113" onmouseenter="enter('-6417320778911436113');" onmouseout="out('-6417320778911436113');" style="">3438         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.modified&quot;, mBgAllAppsList.modified);          </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">3439         if (mLoaderTask != null) {                                                                       </span>
<span class="-1961259503181318170" onmouseenter="enter('-1961259503181318170');" onmouseout="out('-1961259503181318170');" style="">3440             mLoaderTask.dumpState();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3441         } else {                                                                                         </span>
<span class="-4934836822377624371" onmouseenter="enter('-4934836822377624371');" onmouseout="out('-4934836822377624371');" style="">3442             Log.d(TAG, &quot;mLoaderTask=null&quot;);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3443         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3444     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3445 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  19 import android.app.SearchManager;                                                                        </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  20 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  21 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="-984325520036959693" onmouseenter="enter('-984325520036959693');" onmouseout="out('-984325520036959693');" style="">  22 import android.content.*;                                                                                </span>
<span class="-8524679231303418936" onmouseenter="enter('-8524679231303418936');" onmouseout="out('-8524679231303418936');" style="">  23 import android.content.Intent.ShortcutIconResource;                                                      </span>
<span class="-9183914406029598577" onmouseenter="enter('-9183914406029598577');" onmouseout="out('-9183914406029598577');" style="">  24 import android.content.pm.ActivityInfo;                                                                  </span>
<span class="-5891303348447418015" onmouseenter="enter('-5891303348447418015');" onmouseout="out('-5891303348447418015');" style="">  25 import android.content.pm.PackageInfo;                                                                   </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  26 import android.content.pm.PackageManager;                                                                </span>
<span class="-2097531830514422912" onmouseenter="enter('-2097531830514422912');" onmouseout="out('-2097531830514422912');" style="">  27 import android.content.pm.PackageManager.NameNotFoundException;                                          </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  28 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">  29 import android.content.res.Configuration;                                                                </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  30 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  31 import android.database.Cursor;                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  32 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  33 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  34 import android.net.Uri;                                                                                  </span>
<span class="-5861542142927414420" onmouseenter="enter('-5861542142927414420');" onmouseout="out('-5861542142927414420');" style="">  35 import android.os.Environment;                                                                           </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  36 import android.os.Handler;                                                                               </span>
<span class="5075624728668821268" onmouseenter="enter('5075624728668821268');" onmouseout="out('5075624728668821268');" style="">  37 import android.os.HandlerThread;                                                                         </span>
<span class="-3467845820974384276" onmouseenter="enter('-3467845820974384276');" onmouseout="out('-3467845820974384276');" style="">  38 import android.os.Parcelable;                                                                            </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  39 import android.os.Process;                                                                               </span>
<span class="2671599330745315048" onmouseenter="enter('2671599330745315048');" onmouseout="out('2671599330745315048');" style="">  40 import android.os.RemoteException;                                                                       </span>
<span class="2720528326800018495" onmouseenter="enter('2720528326800018495');" onmouseout="out('2720528326800018495');" style="">  41 import android.os.SystemClock;                                                                           </span>
<span class="9209739606564279934" onmouseenter="enter('9209739606564279934');" onmouseout="out('9209739606564279934');" style="">  42 import android.provider.BaseColumns;                                                                     </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  43 import android.text.TextUtils;                                                                           </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  44 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  45 import android.util.Pair;                                                                                </span>
<span  style="">  46                                                                                                          </span>
<span class="2480987830742885141" onmouseenter="enter('2480987830742885141');" onmouseout="out('2480987830742885141');" style="">  47 import com.android.launcher3.InstallWidgetReceiver.WidgetMimeTypeHandlerData;                            </span>
<span  style="">  48                                                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  49 import java.lang.ref.WeakReference;                                                                      </span>
<span class="7911689652558139170" onmouseenter="enter('7911689652558139170');" onmouseout="out('7911689652558139170');" style="">  50 import java.net.URISyntaxException;                                                                      </span>
<span class="-2082349054173013619" onmouseenter="enter('-2082349054173013619');" onmouseout="out('-2082349054173013619');" style="">  51 import java.text.Collator;                                                                               </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  52 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  53 import java.util.Arrays;                                                                                 </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  54 import java.util.Collection;                                                                             </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  55 import java.util.Collections;                                                                            </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  56 import java.util.Comparator;                                                                             </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  57 import java.util.HashMap;                                                                                </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  58 import java.util.HashSet;                                                                                </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  59 import java.util.Iterator;                                                                               </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  60 import java.util.List;                                                                                   </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  61 import java.util.Set;                                                                                    </span>
<span class="7536840878424124946" onmouseenter="enter('7536840878424124946');" onmouseout="out('7536840878424124946');" style="">  62 import java.util.TreeMap;                                                                                </span>
<span class="-2705241621224930031" onmouseenter="enter('-2705241621224930031');" onmouseout="out('-2705241621224930031');" style="">  63 import java.util.concurrent.atomic.AtomicBoolean;                                                        </span>
<span  style="">  64                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  65 /**                                                                                                      </span>
<span class="-4436404655378914540" onmouseenter="enter('-4436404655378914540');" onmouseout="out('-4436404655378914540');" style="">  66  * Maintains in-memory state of the Launcher. It is expected that there should be only one               </span>
<span class="-4273357065044936134" onmouseenter="enter('-4273357065044936134');" onmouseout="out('-4273357065044936134');" style="">  67  * LauncherModel object held in a static. Also provide APIs for updating the database state              </span>
<span class="-4398933382026523538" onmouseenter="enter('-4398933382026523538');" onmouseout="out('-4398933382026523538');" style="">  68  * for the Launcher.                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  69  */                                                                                                      </span>
<span class="-1237709953007126496" onmouseenter="enter('-1237709953007126496');" onmouseout="out('-1237709953007126496');" style="">  70 public class LauncherModel extends BroadcastReceiver {                                                   </span>
<span class="4817350607901898392" onmouseenter="enter('4817350607901898392');" onmouseout="out('4817350607901898392');" style="">  71     static final boolean DEBUG_LOADERS = false;                                                          </span>
<span class="7166020908404799948" onmouseenter="enter('7166020908404799948');" onmouseout="out('7166020908404799948');" style="">  72     static final String TAG = &quot;Launcher.Model&quot;;                                                          </span>
<span  style="">  73                                                                                                          </span>
<span class="-110249828783225872" onmouseenter="enter('-110249828783225872');" onmouseout="out('-110249828783225872');" style="">  74     // true = use a &quot;More Apps&quot; folder for non-workspace apps on upgrade                                 </span>
<span class="2480947255658609927" onmouseenter="enter('2480947255658609927');" onmouseout="out('2480947255658609927');" style="">  75     // false = strew non-workspace apps across the workspace on upgrade                                  </span>
<span class="-258177193926802879" onmouseenter="enter('-258177193926802879');" onmouseout="out('-258177193926802879');" style="">  76     public static final boolean UPGRADE_USE_MORE_APPS_FOLDER = false;                                    </span>
<span  style="">  77                                                                                                          </span>
<span class="2412961508740342038" onmouseenter="enter('2412961508740342038');" onmouseout="out('2412961508740342038');" style="">  78     public static final int LOADER_FLAG_NONE = 0;                                                        </span>
<span class="-3582007365816200905" onmouseenter="enter('-3582007365816200905');" onmouseout="out('-3582007365816200905');" style="">  79     public static final int LOADER_FLAG_CLEAR_WORKSPACE = 1 &lt;&lt; 0;                                        </span>
<span class="2276565639346953559" onmouseenter="enter('2276565639346953559');" onmouseout="out('2276565639346953559');" style="">  80     public static final int LOADER_FLAG_MIGRATE_SHORTCUTS = 1 &lt;&lt; 1;                                      </span>
<span  style="">  81                                                                                                          </span>
<span class="-4154694662050657236" onmouseenter="enter('-4154694662050657236');" onmouseout="out('-4154694662050657236');" style="">  82     private static final int ITEMS_CHUNK = 6; // batch size for the workspace icons                      </span>
<span class="-5674768092661618077" onmouseenter="enter('-5674768092661618077');" onmouseout="out('-5674768092661618077');" style="">  83     private static final long INVALID_SCREEN_ID = -1L;                                                   </span>
<span  style="">  84                                                                                                          </span>
<span class="-2106715535373822300" onmouseenter="enter('-2106715535373822300');" onmouseout="out('-2106715535373822300');" style="">  85     private final boolean mAppsCanBeOnRemoveableStorage;                                                 </span>
<span class="4731979794377415890" onmouseenter="enter('4731979794377415890');" onmouseout="out('4731979794377415890');" style="">  86     private final boolean mOldContentProviderExists;                                                     </span>
<span  style="">  87                                                                                                          </span>
<span class="3718007027314914184" onmouseenter="enter('3718007027314914184');" onmouseout="out('3718007027314914184');" style="">  88     private final LauncherAppState mApp;                                                                 </span>
<span class="-7373075918619999414" onmouseenter="enter('-7373075918619999414');" onmouseout="out('-7373075918619999414');" style="">  89     private final Object mLock = new Object();                                                           </span>
<span class="6556510276342102272" onmouseenter="enter('6556510276342102272');" onmouseout="out('6556510276342102272');" style="">  90     private DeferredHandler mHandler = new DeferredHandler();                                            </span>
<span class="-7862379002163915329" onmouseenter="enter('-7862379002163915329');" onmouseout="out('-7862379002163915329');" style="">  91     private LoaderTask mLoaderTask;                                                                      </span>
<span class="-3485037850110155122" onmouseenter="enter('-3485037850110155122');" onmouseout="out('-3485037850110155122');" style="">  92     private boolean mIsLoaderTaskRunning;                                                                </span>
<span class="7419034271767928159" onmouseenter="enter('7419034271767928159');" onmouseout="out('7419034271767928159');" style="">  93     private volatile boolean mFlushingWorkerThread;                                                      </span>
<span  style="">  94                                                                                                          </span>
<span class="7008336552769109798" onmouseenter="enter('7008336552769109798');" onmouseout="out('7008336552769109798');" style="">  95     // Specific runnable types that are run on the main thread deferred handler, this allows us to       </span>
<span class="-2862621427901202146" onmouseenter="enter('-2862621427901202146');" onmouseout="out('-2862621427901202146');" style="">  96     // clear all queued binding runnables when the Launcher activity is destroyed.                       </span>
<span class="2773124109533293313" onmouseenter="enter('2773124109533293313');" onmouseout="out('2773124109533293313');" style="">  97     private static final int MAIN_THREAD_NORMAL_RUNNABLE = 0;                                            </span>
<span class="3742092121997602406" onmouseenter="enter('3742092121997602406');" onmouseout="out('3742092121997602406');" style="">  98     private static final int MAIN_THREAD_BINDING_RUNNABLE = 1;                                           </span>
<span  style="">  99                                                                                                          </span>
<span  style=""> 100                                                                                                          </span>
<span class="1887278082230738056" onmouseenter="enter('1887278082230738056');" onmouseout="out('1887278082230738056');" style=""> 101     private static final HandlerThread sWorkerThread = new HandlerThread(&quot;launcher-loader&quot;);             </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style=""> 102     static {                                                                                             </span>
<span class="3211376391739143126" onmouseenter="enter('3211376391739143126');" onmouseout="out('3211376391739143126');" style=""> 103         sWorkerThread.start();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104     }                                                                                                    </span>
<span class="2264102646027284513" onmouseenter="enter('2264102646027284513');" onmouseout="out('2264102646027284513');" style=""> 105     private static final Handler sWorker = new Handler(sWorkerThread.getLooper());                       </span>
<span  style=""> 106                                                                                                          </span>
<span class="3535035959074757881" onmouseenter="enter('3535035959074757881');" onmouseout="out('3535035959074757881');" style=""> 107     // We start off with everything not loaded.  After that, we assume that                              </span>
<span class="2643799052940090988" onmouseenter="enter('2643799052940090988');" onmouseout="out('2643799052940090988');" style=""> 108     // our monitoring of the package manager provides all updates and we never                           </span>
<span class="-1838192547825761021" onmouseenter="enter('-1838192547825761021');" onmouseout="out('-1838192547825761021');" style=""> 109     // need to do a requery.  These are only ever touched from the loader thread.                        </span>
<span class="-8758726942217087840" onmouseenter="enter('-8758726942217087840');" onmouseout="out('-8758726942217087840');" style=""> 110     private boolean mWorkspaceLoaded;                                                                    </span>
<span class="-1682003936594375249" onmouseenter="enter('-1682003936594375249');" onmouseout="out('-1682003936594375249');" style=""> 111     private boolean mAllAppsLoaded;                                                                      </span>
<span  style=""> 112                                                                                                          </span>
<span class="4437381645098142172" onmouseenter="enter('4437381645098142172');" onmouseout="out('4437381645098142172');" style=""> 113     // When we are loading pages synchronously, we can&#x27;t just post the binding of items on the side      </span>
<span class="3512738277131757196" onmouseenter="enter('3512738277131757196');" onmouseout="out('3512738277131757196');" style=""> 114     // pages as this delays the rotation process.  Instead, we wait for a callback from the first        </span>
<span class="1019766179129744653" onmouseenter="enter('1019766179129744653');" onmouseout="out('1019766179129744653');" style=""> 115     // draw (in Workspace) to initiate the binding of the remaining side pages.  Any time we start       </span>
<span class="7373070490167110663" onmouseenter="enter('7373070490167110663');" onmouseout="out('7373070490167110663');" style=""> 116     // a normal load, we also clear this set of Runnables.                                               </span>
<span class="4843369785562403466" onmouseenter="enter('4843369785562403466');" onmouseout="out('4843369785562403466');" style=""> 117     static final ArrayList&lt;Runnable&gt; mDeferredBindRunnables = new ArrayList&lt;Runnable&gt;();                 </span>
<span  style=""> 118                                                                                                          </span>
<span class="5593309185710650450" onmouseenter="enter('5593309185710650450');" onmouseout="out('5593309185710650450');" style=""> 119     private WeakReference&lt;Callbacks&gt; mCallbacks;                                                         </span>
<span  style=""> 120                                                                                                          </span>
<span class="-4825633287564006425" onmouseenter="enter('-4825633287564006425');" onmouseout="out('-4825633287564006425');" style=""> 121     // &lt; only access in worker thread &gt;                                                                  </span>
<span class="-7893410053402242276" onmouseenter="enter('-7893410053402242276');" onmouseout="out('-7893410053402242276');" style=""> 122     AllAppsList mBgAllAppsList;                                                                          </span>
<span  style=""> 123                                                                                                          </span>
<span class="-4696524037009093502" onmouseenter="enter('-4696524037009093502');" onmouseout="out('-4696524037009093502');" style=""> 124     // The lock that must be acquired before referencing any static bg data structures.  Unlike          </span>
<span class="-2471307598696798987" onmouseenter="enter('-2471307598696798987');" onmouseout="out('-2471307598696798987');" style=""> 125     // other locks, this one can generally be held long-term because we never expect any of these        </span>
<span class="4310884307601416106" onmouseenter="enter('4310884307601416106');" onmouseout="out('4310884307601416106');" style=""> 126     // static data structures to be referenced outside of the worker thread except on the first          </span>
<span class="2260118264672300125" onmouseenter="enter('2260118264672300125');" onmouseout="out('2260118264672300125');" style=""> 127     // load after configuration change.                                                                  </span>
<span class="-8652324765300755578" onmouseenter="enter('-8652324765300755578');" onmouseout="out('-8652324765300755578');" style=""> 128     static final Object sBgLock = new Object();                                                          </span>
<span  style=""> 129                                                                                                          </span>
<span class="861828438456678075" onmouseenter="enter('861828438456678075');" onmouseout="out('861828438456678075');" style=""> 130     // sBgItemsIdMap maps *all* the ItemInfos (shortcuts, folders, and widgets) created by               </span>
<span class="3964854605559074701" onmouseenter="enter('3964854605559074701');" onmouseout="out('3964854605559074701');" style=""> 131     // LauncherModel to their ids                                                                        </span>
<span class="8713038185903703074" onmouseenter="enter('8713038185903703074');" onmouseout="out('8713038185903703074');" style=""> 132     static final HashMap&lt;Long, ItemInfo&gt; sBgItemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                  </span>
<span  style=""> 133                                                                                                          </span>
<span class="-4875305940507672487" onmouseenter="enter('-4875305940507672487');" onmouseout="out('-4875305940507672487');" style=""> 134     // sBgWorkspaceItems is passed to bindItems, which expects a list of all folders and shortcuts       </span>
<span class="5836863726682543660" onmouseenter="enter('5836863726682543660');" onmouseout="out('5836863726682543660');" style=""> 135     //       created by LauncherModel that are directly on the home screen (however, no widgets or       </span>
<span class="4941255916545901139" onmouseenter="enter('4941255916545901139');" onmouseout="out('4941255916545901139');" style=""> 136     //       shortcuts within folders).                                                                  </span>
<span class="4770535944422974992" onmouseenter="enter('4770535944422974992');" onmouseout="out('4770535944422974992');" style=""> 137     static final ArrayList&lt;ItemInfo&gt; sBgWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                      </span>
<span  style=""> 138                                                                                                          </span>
<span class="1795288911868581126" onmouseenter="enter('1795288911868581126');" onmouseout="out('1795288911868581126');" style=""> 139     // sBgAppWidgets is all LauncherAppWidgetInfo created by LauncherModel. Passed to bindAppWidget()    </span>
<span class="2792930227258213532" onmouseenter="enter('2792930227258213532');" onmouseout="out('2792930227258213532');" style=""> 140     static final ArrayList&lt;LauncherAppWidgetInfo&gt; sBgAppWidgets =                                        </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style=""> 141         new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                          </span>
<span  style=""> 142                                                                                                          </span>
<span class="8356003681152445460" onmouseenter="enter('8356003681152445460');" onmouseout="out('8356003681152445460');" style=""> 143     // sBgFolders is all FolderInfos created by LauncherModel. Passed to bindFolders()                   </span>
<span class="8065187755370300271" onmouseenter="enter('8065187755370300271');" onmouseout="out('8065187755370300271');" style=""> 144     static final HashMap&lt;Long, FolderInfo&gt; sBgFolders = new HashMap&lt;Long, FolderInfo&gt;();                 </span>
<span  style=""> 145                                                                                                          </span>
<span class="-6906235458204319724" onmouseenter="enter('-6906235458204319724');" onmouseout="out('-6906235458204319724');" style=""> 146     // sBgDbIconCache is the set of ItemInfos that need to have their icons updated in the database      </span>
<span class="-2979801471293813396" onmouseenter="enter('-2979801471293813396');" onmouseout="out('-2979801471293813396');" style=""> 147     static final HashMap&lt;Object, byte[]&gt; sBgDbIconCache = new HashMap&lt;Object, byte[]&gt;();                 </span>
<span  style=""> 148                                                                                                          </span>
<span class="8536603216028959604" onmouseenter="enter('8536603216028959604');" onmouseout="out('8536603216028959604');" style=""> 149     // sBgWorkspaceScreens is the ordered set of workspace screens.                                      </span>
<span class="-1373680151983800221" onmouseenter="enter('-1373680151983800221');" onmouseout="out('-1373680151983800221');" style=""> 150     static final ArrayList&lt;Long&gt; sBgWorkspaceScreens = new ArrayList&lt;Long&gt;();                            </span>
<span  style=""> 151                                                                                                          </span>
<span class="-5356624270019806590" onmouseenter="enter('-5356624270019806590');" onmouseout="out('-5356624270019806590');" style=""> 152     // &lt;/ only access in worker thread &gt;                                                                 </span>
<span  style=""> 153                                                                                                          </span>
<span class="-3446390922171092190" onmouseenter="enter('-3446390922171092190');" onmouseout="out('-3446390922171092190');" style=""> 154     private IconCache mIconCache;                                                                        </span>
<span class="7327140815403295852" onmouseenter="enter('7327140815403295852');" onmouseout="out('7327140815403295852');" style=""> 155     private Bitmap mDefaultIcon;                                                                         </span>
<span  style=""> 156                                                                                                          </span>
<span class="-1428370913368008087" onmouseenter="enter('-1428370913368008087');" onmouseout="out('-1428370913368008087');" style=""> 157     protected int mPreviousConfigMcc;                                                                    </span>
<span  style=""> 158                                                                                                          </span>
<span class="-3338718885622541528" onmouseenter="enter('-3338718885622541528');" onmouseout="out('-3338718885622541528');" style=""> 159     public interface Callbacks {                                                                         </span>
<span class="-4231961333511672310" onmouseenter="enter('-4231961333511672310');" onmouseout="out('-4231961333511672310');" style=""> 160         public boolean setLoadOnResume();                                                                </span>
<span class="803814078537529918" onmouseenter="enter('803814078537529918');" onmouseout="out('803814078537529918');" style=""> 161         public int getCurrentWorkspaceScreen();                                                          </span>
<span class="9018975241375557324" onmouseenter="enter('9018975241375557324');" onmouseout="out('9018975241375557324');" style=""> 162         public void startBinding();                                                                      </span>
<span class="3160017311795321748" onmouseenter="enter('3160017311795321748');" onmouseout="out('3160017311795321748');" style=""> 163         public void bindItems(ArrayList&lt;ItemInfo&gt; shortcuts, int start, int end,                         </span>
<span class="2581406714293150955" onmouseenter="enter('2581406714293150955');" onmouseout="out('2581406714293150955');" style=""> 164                               boolean forceAnimateIcons);                                                </span>
<span class="5464078408309929972" onmouseenter="enter('5464078408309929972');" onmouseout="out('5464078408309929972');" style=""> 165         public void bindScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                       </span>
<span class="8828153861812868297" onmouseenter="enter('8828153861812868297');" onmouseout="out('8828153861812868297');" style=""> 166         public void bindAddScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                    </span>
<span class="6163649300164694862" onmouseenter="enter('6163649300164694862');" onmouseout="out('6163649300164694862');" style=""> 167         public void bindFolders(HashMap&lt;Long,FolderInfo&gt; folders);                                       </span>
<span class="-3241982460320043016" onmouseenter="enter('-3241982460320043016');" onmouseout="out('-3241982460320043016');" style=""> 168         public void finishBindingItems(boolean upgradePath);                                             </span>
<span class="-1509675786278068914" onmouseenter="enter('-1509675786278068914');" onmouseout="out('-1509675786278068914');" style=""> 169         public void bindAppWidget(LauncherAppWidgetInfo info);                                           </span>
<span class="-8847143600952784869" onmouseenter="enter('-8847143600952784869');" onmouseout="out('-8847143600952784869');" style=""> 170         public void bindAllApplications(ArrayList&lt;AppInfo&gt; apps);                                        </span>
<span class="1774766681438121710" onmouseenter="enter('1774766681438121710');" onmouseout="out('1774766681438121710');" style=""> 171         public void bindAppsAdded(ArrayList&lt;Long&gt; newScreens,                                            </span>
<span class="-4634129325608240116" onmouseenter="enter('-4634129325608240116');" onmouseout="out('-4634129325608240116');" style=""> 172                                   ArrayList&lt;ItemInfo&gt; addNotAnimated,                                    </span>
<span class="-7991947031099209517" onmouseenter="enter('-7991947031099209517');" onmouseout="out('-7991947031099209517');" style=""> 173                                   ArrayList&lt;ItemInfo&gt; addAnimated,                                       </span>
<span class="7647862954797634111" onmouseenter="enter('7647862954797634111');" onmouseout="out('7647862954797634111');" style=""> 174                                   ArrayList&lt;AppInfo&gt; addedApps);                                         </span>
<span class="4809991796097108143" onmouseenter="enter('4809991796097108143');" onmouseout="out('4809991796097108143');" style=""> 175         public void bindAppsUpdated(ArrayList&lt;AppInfo&gt; apps);                                            </span>
<span class="-3322135261875169793" onmouseenter="enter('-3322135261875169793');" onmouseout="out('-3322135261875169793');" style=""> 176         public void bindComponentsRemoved(ArrayList&lt;String&gt; packageNames,                                </span>
<span class="-4070092502400219459" onmouseenter="enter('-4070092502400219459');" onmouseout="out('-4070092502400219459');" style=""> 177                         ArrayList&lt;AppInfo&gt; appInfos);                                                    </span>
<span class="-5054203298075540925" onmouseenter="enter('-5054203298075540925');" onmouseout="out('-5054203298075540925');" style=""> 178         public void bindPackagesUpdated(ArrayList&lt;Object&gt; widgetsAndShortcuts);                          </span>
<span class="7466294501708892199" onmouseenter="enter('7466294501708892199');" onmouseout="out('7466294501708892199');" style=""> 179         public void bindSearchablesChanged();                                                            </span>
<span class="-4863664490041232492" onmouseenter="enter('-4863664490041232492');" onmouseout="out('-4863664490041232492');" style=""> 180         public boolean isAllAppsButtonRank(int rank);                                                    </span>
<span class="-6469605959563265863" onmouseenter="enter('-6469605959563265863');" onmouseout="out('-6469605959563265863');" style=""> 181         public void onPageBoundSynchronously(int page);                                                  </span>
<span class="2927470839806734779" onmouseenter="enter('2927470839806734779');" onmouseout="out('2927470839806734779');" style=""> 182         public void dumpLogsToLocalData();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183     }                                                                                                    </span>
<span  style=""> 184                                                                                                          </span>
<span class="6660553528201779332" onmouseenter="enter('6660553528201779332');" onmouseout="out('6660553528201779332');" style=""> 185     public interface ItemInfoFilter {                                                                    </span>
<span class="-4205302945183309423" onmouseenter="enter('-4205302945183309423');" onmouseout="out('-4205302945183309423');" style=""> 186         public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187     }                                                                                                    </span>
<span  style=""> 188                                                                                                          </span>
<span class="-7540253694606934273" onmouseenter="enter('-7540253694606934273');" onmouseout="out('-7540253694606934273');" style=""> 189     LauncherModel(LauncherAppState app, IconCache iconCache, AppFilter appFilter) {                      </span>
<span class="-3815285143453777974" onmouseenter="enter('-3815285143453777974');" onmouseout="out('-3815285143453777974');" style=""> 190         Context context = app.getContext();                                                              </span>
<span class="5049533599805126653" onmouseenter="enter('5049533599805126653');" onmouseout="out('5049533599805126653');" style=""> 191         ContentResolver contentResolver = context.getContentResolver();                                  </span>
<span  style=""> 192                                                                                                          </span>
<span class="1644001329477881511" onmouseenter="enter('1644001329477881511');" onmouseout="out('1644001329477881511');" style=""> 193         mAppsCanBeOnRemoveableStorage = Environment.isExternalStorageRemovable();                        </span>
<span class="953599912945541719" onmouseenter="enter('953599912945541719');" onmouseout="out('953599912945541719');" style=""> 194         mOldContentProviderExists = (contentResolver.acquireContentProviderClient(                       </span>
<span class="6680469959813031014" onmouseenter="enter('6680469959813031014');" onmouseout="out('6680469959813031014');" style=""> 195                 LauncherSettings.Favorites.OLD_CONTENT_URI) != null);                                    </span>
<span class="8987557410347250467" onmouseenter="enter('8987557410347250467');" onmouseout="out('8987557410347250467');" style=""> 196         mApp = app;                                                                                      </span>
<span class="-1240051748269974178" onmouseenter="enter('-1240051748269974178');" onmouseout="out('-1240051748269974178');" style=""> 197         mBgAllAppsList = new AllAppsList(iconCache, appFilter);                                          </span>
<span class="1920389422449187498" onmouseenter="enter('1920389422449187498');" onmouseout="out('1920389422449187498');" style=""> 198         mIconCache = iconCache;                                                                          </span>
<span  style=""> 199                                                                                                          </span>
<span class="3654972388535142593" onmouseenter="enter('3654972388535142593');" onmouseout="out('3654972388535142593');" style=""> 200         final Resources res = context.getResources();                                                    </span>
<span class="-4708036118337437843" onmouseenter="enter('-4708036118337437843');" onmouseout="out('-4708036118337437843');" style=""> 201         Configuration config = res.getConfiguration();                                                   </span>
<span class="-32775646941108504" onmouseenter="enter('-32775646941108504');" onmouseout="out('-32775646941108504');" style=""> 202         mPreviousConfigMcc = config.mcc;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203     }                                                                                                    </span>
<span  style=""> 204                                                                                                          </span>
<span class="7032781054018231449" onmouseenter="enter('7032781054018231449');" onmouseout="out('7032781054018231449');" style=""> 205     /** Runs the specified runnable immediately if called from the main thread, otherwise it is          </span>
<span class="7688515897456092220" onmouseenter="enter('7688515897456092220');" onmouseout="out('7688515897456092220');" style=""> 206      * posted on the main thread handler. */                                                             </span>
<span class="-3461925467760565643" onmouseenter="enter('-3461925467760565643');" onmouseout="out('-3461925467760565643');" style=""> 207     private void runOnMainThread(Runnable r) {                                                           </span>
<span class="-8277339055128647976" onmouseenter="enter('-8277339055128647976');" onmouseout="out('-8277339055128647976');" style=""> 208         runOnMainThread(r, 0);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209     }                                                                                                    </span>
<span class="2979979552252814736" onmouseenter="enter('2979979552252814736');" onmouseout="out('2979979552252814736');" style=""> 210     private void runOnMainThread(Runnable r, int type) {                                                 </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 211         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="-8713172384634047131" onmouseenter="enter('-8713172384634047131');" onmouseout="out('-8713172384634047131');" style=""> 212             // If we are on the worker thread, post onto the main handler                                </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 213             mHandler.post(r);                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 214         } else {                                                                                         </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 215             r.run();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217     }                                                                                                    </span>
<span  style=""> 218                                                                                                          </span>
<span class="3207003836565128" onmouseenter="enter('3207003836565128');" onmouseout="out('3207003836565128');" style=""> 219     /** Runs the specified runnable immediately if called from the worker thread, otherwise it is        </span>
<span class="-2756655390038865740" onmouseenter="enter('-2756655390038865740');" onmouseout="out('-2756655390038865740');" style=""> 220      * posted on the worker thread handler. */                                                           </span>
<span class="-6815764929820931194" onmouseenter="enter('-6815764929820931194');" onmouseout="out('-6815764929820931194');" style=""> 221     private static void runOnWorkerThread(Runnable r) {                                                  </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 222         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 223             r.run();                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 224         } else {                                                                                         </span>
<span class="4127612692606453253" onmouseenter="enter('4127612692606453253');" onmouseout="out('4127612692606453253');" style=""> 225             // If we are not on the worker thread, then post to the worker handler                       </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style=""> 226             sWorker.post(r);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228     }                                                                                                    </span>
<span  style=""> 229                                                                                                          </span>
<span class="-7044369129545244866" onmouseenter="enter('-7044369129545244866');" onmouseout="out('-7044369129545244866');" style=""> 230     boolean canMigrateFromOldLauncherDb(Launcher launcher) {                                             </span>
<span class="7588769537569950934" onmouseenter="enter('7588769537569950934');" onmouseout="out('7588769537569950934');" style=""> 231         return mOldContentProviderExists &amp;&amp; !launcher.isLauncherPreinstalled() ;                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232     }                                                                                                    </span>
<span  style=""> 233                                                                                                          </span>
<span class="7006856679254675514" onmouseenter="enter('7006856679254675514');" onmouseout="out('7006856679254675514');" style=""> 234     static boolean findNextAvailableIconSpaceInScreen(ArrayList&lt;ItemInfo&gt; items, int[] xy,               </span>
<span class="-6492711054324248109" onmouseenter="enter('-6492711054324248109');" onmouseout="out('-6492711054324248109');" style=""> 235                                  long screen) {                                                          </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 236         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style=""> 237         DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                    </span>
<span class="559481881935924132" onmouseenter="enter('559481881935924132');" onmouseout="out('559481881935924132');" style=""> 238         final int xCount = (int) grid.numColumns;                                                        </span>
<span class="-3430391683121642487" onmouseenter="enter('-3430391683121642487');" onmouseout="out('-3430391683121642487');" style=""> 239         final int yCount = (int) grid.numRows;                                                           </span>
<span class="9207855715228317472" onmouseenter="enter('9207855715228317472');" onmouseout="out('9207855715228317472');" style=""> 240         boolean[][] occupied = new boolean[xCount][yCount];                                              </span>
<span  style=""> 241                                                                                                          </span>
<span class="2963072137114824070" onmouseenter="enter('2963072137114824070');" onmouseout="out('2963072137114824070');" style=""> 242         int cellX, cellY, spanX, spanY;                                                                  </span>
<span class="5020765328610170980" onmouseenter="enter('5020765328610170980');" onmouseout="out('5020765328610170980');" style=""> 243         for (int i = 0; i &lt; items.size(); ++i) {                                                         </span>
<span class="3181415890192694055" onmouseenter="enter('3181415890192694055');" onmouseout="out('3181415890192694055');" style=""> 244             final ItemInfo item = items.get(i);                                                          </span>
<span class="-4074076028767186492" onmouseenter="enter('-4074076028767186492');" onmouseout="out('-4074076028767186492');" style=""> 245             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                        </span>
<span class="4879929299303230054" onmouseenter="enter('4879929299303230054');" onmouseout="out('4879929299303230054');" style=""> 246                 if (item.screenId == screen) {                                                           </span>
<span class="-5253640052908660766" onmouseenter="enter('-5253640052908660766');" onmouseout="out('-5253640052908660766');" style=""> 247                     cellX = item.cellX;                                                                  </span>
<span class="8289808867760126989" onmouseenter="enter('8289808867760126989');" onmouseout="out('8289808867760126989');" style=""> 248                     cellY = item.cellY;                                                                  </span>
<span class="-1153670204852401248" onmouseenter="enter('-1153670204852401248');" onmouseout="out('-1153670204852401248');" style=""> 249                     spanX = item.spanX;                                                                  </span>
<span class="-1841066671071348880" onmouseenter="enter('-1841066671071348880');" onmouseout="out('-1841066671071348880');" style=""> 250                     spanY = item.spanY;                                                                  </span>
<span class="3713894754787265371" onmouseenter="enter('3713894754787265371');" onmouseout="out('3713894754787265371');" style=""> 251                     for (int x = cellX; 0 &lt;= x &amp;&amp; x &lt; cellX + spanX &amp;&amp; x &lt; xCount; x++) {                </span>
<span class="1312990358377437379" onmouseenter="enter('1312990358377437379');" onmouseout="out('1312990358377437379');" style=""> 252                         for (int y = cellY; 0 &lt;= y &amp;&amp; y &lt; cellY + spanY &amp;&amp; y &lt; yCount; y++) {            </span>
<span class="-8702463444488690423" onmouseenter="enter('-8702463444488690423');" onmouseout="out('-8702463444488690423');" style=""> 253                             occupied[x][y] = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 258         }                                                                                                </span>
<span  style=""> 259                                                                                                          </span>
<span class="-8431133162249858978" onmouseenter="enter('-8431133162249858978');" onmouseout="out('-8431133162249858978');" style=""> 260         return CellLayout.findVacantCell(xy, 1, 1, xCount, yCount, occupied);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261     }                                                                                                    </span>
<span class="-6259456544478400180" onmouseenter="enter('-6259456544478400180');" onmouseout="out('-6259456544478400180');" style=""> 262     static Pair&lt;Long, int[]&gt; findNextAvailableIconSpace(Context context, String name,                    </span>
<span class="-5771883199866145387" onmouseenter="enter('-5771883199866145387');" onmouseout="out('-5771883199866145387');" style=""> 263                                                         Intent launchIntent,                             </span>
<span class="245504953411362786" onmouseenter="enter('245504953411362786');" onmouseout="out('245504953411362786');" style=""> 264                                                         int firstScreenIndex,                            </span>
<span class="-3030748495081078938" onmouseenter="enter('-3030748495081078938');" onmouseout="out('-3030748495081078938');" style=""> 265                                                         ArrayList&lt;Long&gt; workspaceScreens) {              </span>
<span class="721182088367487597" onmouseenter="enter('721182088367487597');" onmouseout="out('721182088367487597');" style=""> 266         // Lock on the app so that we don&#x27;t try and get the items while apps are being added             </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 267         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-2530158852228207709" onmouseenter="enter('-2530158852228207709');" onmouseout="out('-2530158852228207709');" style=""> 268         LauncherModel model = app.getModel();                                                            </span>
<span class="-7742650363035610838" onmouseenter="enter('-7742650363035610838');" onmouseout="out('-7742650363035610838');" style=""> 269         boolean found = false;                                                                           </span>
<span class="8915607661092661586" onmouseenter="enter('8915607661092661586');" onmouseout="out('8915607661092661586');" style=""> 270         synchronized (app) {                                                                             </span>
<span class="7297018345010768725" onmouseenter="enter('7297018345010768725');" onmouseout="out('7297018345010768725');" style=""> 271             if (sWorkerThread.getThreadId() != Process.myTid()) {                                        </span>
<span class="-8468687854737954991" onmouseenter="enter('-8468687854737954991');" onmouseout="out('-8468687854737954991');" style=""> 272                 // Flush the LauncherModel worker thread, so that if we just did another                 </span>
<span class="-8915737001643417667" onmouseenter="enter('-8915737001643417667');" onmouseout="out('-8915737001643417667');" style=""> 273                 // processInstallShortcut, we give it time for its shortcut to get added to the          </span>
<span class="2341850028976611589" onmouseenter="enter('2341850028976611589');" onmouseout="out('2341850028976611589');" style=""> 274                 // database (getItemsInLocalCoordinates reads the database)                              </span>
<span class="-3308163450517263024" onmouseenter="enter('-3308163450517263024');" onmouseout="out('-3308163450517263024');" style=""> 275                 model.flushWorkerThread();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276             }                                                                                            </span>
<span class="8797318797001481965" onmouseenter="enter('8797318797001481965');" onmouseout="out('8797318797001481965');" style=""> 277             final ArrayList&lt;ItemInfo&gt; items = LauncherModel.getItemsInLocalCoordinates(context);         </span>
<span  style=""> 278                                                                                                          </span>
<span class="2319873497820841755" onmouseenter="enter('2319873497820841755');" onmouseout="out('2319873497820841755');" style=""> 279             // Try adding to the workspace screens incrementally, starting at the default or center      </span>
<span class="1139467458780899300" onmouseenter="enter('1139467458780899300');" onmouseout="out('1139467458780899300');" style=""> 280             // screen and alternating between +1, -1, +2, -2, etc. (using ~ ceil(i/2f)*(-1)^(i-1))       </span>
<span class="8331999200789555153" onmouseenter="enter('8331999200789555153');" onmouseout="out('8331999200789555153');" style=""> 281             firstScreenIndex = Math.min(firstScreenIndex, workspaceScreens.size());                      </span>
<span class="-5057452471390749214" onmouseenter="enter('-5057452471390749214');" onmouseout="out('-5057452471390749214');" style=""> 282             int count = workspaceScreens.size();                                                         </span>
<span class="6323561107141122979" onmouseenter="enter('6323561107141122979');" onmouseout="out('6323561107141122979');" style=""> 283             for (int screen = firstScreenIndex; screen &lt; count &amp;&amp; !found; screen++) {                    </span>
<span class="-2680594161355971081" onmouseenter="enter('-2680594161355971081');" onmouseout="out('-2680594161355971081');" style=""> 284                 int[] tmpCoordinates = new int[2];                                                       </span>
<span class="7117247924377105749" onmouseenter="enter('7117247924377105749');" onmouseout="out('7117247924377105749');" style=""> 285                 if (findNextAvailableIconSpaceInScreen(items, tmpCoordinates,                            </span>
<span class="-6258224581011394116" onmouseenter="enter('-6258224581011394116');" onmouseout="out('-6258224581011394116');" style=""> 286                         workspaceScreens.get(screen))) {                                                 </span>
<span class="-4461607076234575183" onmouseenter="enter('-4461607076234575183');" onmouseout="out('-4461607076234575183');" style=""> 287                     // Update the Launcher db                                                            </span>
<span class="-6316225509374818886" onmouseenter="enter('-6316225509374818886');" onmouseout="out('-6316225509374818886');" style=""> 288                     return new Pair&lt;Long, int[]&gt;(workspaceScreens.get(screen), tmpCoordinates);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 292         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293     }                                                                                                    </span>
<span  style=""> 294                                                                                                          </span>
<span class="-6660098263631534032" onmouseenter="enter('-6660098263631534032');" onmouseout="out('-6660098263631534032');" style=""> 295     public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps,      </span>
<span class="9200705866279837671" onmouseenter="enter('9200705866279837671');" onmouseout="out('9200705866279837671');" style=""> 296                                     final ArrayList&lt;AppInfo&gt; allAppsApps) {                              </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style=""> 297         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                     </span>
<span class="-5825036277829220629" onmouseenter="enter('-5825036277829220629');" onmouseout="out('-5825036277829220629');" style=""> 298         addAndBindAddedApps(context, workspaceApps, cb, allAppsApps);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299     }                                                                                                    </span>
<span class="-6660098263631534032" onmouseenter="enter('-6660098263631534032');" onmouseout="out('-6660098263631534032');" style=""> 300     public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps,      </span>
<span class="-6487660545798143403" onmouseenter="enter('-6487660545798143403');" onmouseout="out('-6487660545798143403');" style=""> 301                                 final Callbacks callbacks, final ArrayList&lt;AppInfo&gt; allAppsApps) {       </span>
<span class="-1944739770126231100" onmouseenter="enter('-1944739770126231100');" onmouseout="out('-1944739770126231100');" style=""> 302         if (workspaceApps == null || allAppsApps == null) {                                              </span>
<span class="-5351072863300047246" onmouseenter="enter('-5351072863300047246');" onmouseout="out('-5351072863300047246');" style=""> 303             throw new RuntimeException(&quot;workspaceApps and allAppsApps must not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304         }                                                                                                </span>
<span class="6140956863670038829" onmouseenter="enter('6140956863670038829');" onmouseout="out('6140956863670038829');" style=""> 305         if (workspaceApps.isEmpty() &amp;&amp; allAppsApps.isEmpty()) {                                          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 306             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 307         }                                                                                                </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 308         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 309         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 310             public void run() {                                                                          </span>
<span class="5854603691017442546" onmouseenter="enter('5854603691017442546');" onmouseout="out('5854603691017442546');" style=""> 311                 final ArrayList&lt;ItemInfo&gt; addedShortcutsFinal = new ArrayList&lt;ItemInfo&gt;();               </span>
<span class="4777543170844968619" onmouseenter="enter('4777543170844968619');" onmouseout="out('4777543170844968619');" style=""> 312                 final ArrayList&lt;Long&gt; addedWorkspaceScreensFinal = new ArrayList&lt;Long&gt;();                </span>
<span  style=""> 313                                                                                                          </span>
<span class="4915887978102159996" onmouseenter="enter('4915887978102159996');" onmouseout="out('4915887978102159996');" style=""> 314                 // Get the list of workspace screens.  We need to append to this list and                </span>
<span class="-2543969750120350255" onmouseenter="enter('-2543969750120350255');" onmouseout="out('-2543969750120350255');" style=""> 315                 // can not use sBgWorkspaceScreens because loadWorkspace() may not have been             </span>
<span class="-1621475725142003189" onmouseenter="enter('-1621475725142003189');" onmouseout="out('-1621475725142003189');" style=""> 316                 // called.                                                                               </span>
<span class="-3443356389434560072" onmouseenter="enter('-3443356389434560072');" onmouseout="out('-3443356389434560072');" style=""> 317                 ArrayList&lt;Long&gt; workspaceScreens = new ArrayList&lt;Long&gt;();                                </span>
<span class="-7213068701168456094" onmouseenter="enter('-7213068701168456094');" onmouseout="out('-7213068701168456094');" style=""> 318                 TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(context);                 </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style=""> 319                 for (Integer i : orderedScreens.keySet()) {                                              </span>
<span class="3611014469778353319" onmouseenter="enter('3611014469778353319');" onmouseout="out('3611014469778353319');" style=""> 320                     long screenId = orderedScreens.get(i);                                               </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 321                     workspaceScreens.add(screenId);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 322                 }                                                                                        </span>
<span  style=""> 323                                                                                                          </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 324                 synchronized(sBgLock) {                                                                  </span>
<span class="8076980411968102032" onmouseenter="enter('8076980411968102032');" onmouseout="out('8076980411968102032');" style=""> 325                     Iterator&lt;ItemInfo&gt; iter = workspaceApps.iterator();                                  </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 326                     while (iter.hasNext()) {                                                             </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 327                         ItemInfo a = iter.next();                                                        </span>
<span class="5754535581277543167" onmouseenter="enter('5754535581277543167');" onmouseout="out('5754535581277543167');" style=""> 328                         final String name = a.title.toString();                                          </span>
<span class="586533724609175080" onmouseenter="enter('586533724609175080');" onmouseout="out('586533724609175080');" style=""> 329                         final Intent launchIntent = a.getIntent();                                       </span>
<span  style=""> 330                                                                                                          </span>
<span class="-3621515927242872869" onmouseenter="enter('-3621515927242872869');" onmouseout="out('-3621515927242872869');" style=""> 331                         // Short-circuit this logic if the icon exists somewhere on the workspace        </span>
<span class="-636823087841001444" onmouseenter="enter('-636823087841001444');" onmouseout="out('-636823087841001444');" style=""> 332                         if (LauncherModel.shortcutExists(context, name, launchIntent)) {                 </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 333                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334                         }                                                                                </span>
<span  style=""> 335                                                                                                          </span>
<span class="7211587366126774382" onmouseenter="enter('7211587366126774382');" onmouseout="out('7211587366126774382');" style=""> 336                         // Add this icon to the db, creating a new page if necessary.  If there          </span>
<span class="1191339950892304982" onmouseenter="enter('1191339950892304982');" onmouseout="out('1191339950892304982');" style=""> 337                         // is only the empty page then we just add items to the first page.              </span>
<span class="1496171924920860168" onmouseenter="enter('1496171924920860168');" onmouseout="out('1496171924920860168');" style=""> 338                         // Otherwise, we add them to the next pages.                                     </span>
<span class="-506120048723665625" onmouseenter="enter('-506120048723665625');" onmouseout="out('-506120048723665625');" style=""> 339                         int startSearchPageIndex = workspaceScreens.isEmpty() ? 0 : 1;                   </span>
<span class="89807873419961601" onmouseenter="enter('89807873419961601');" onmouseout="out('89807873419961601');" style=""> 340                         Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context,     </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 341                                 name, launchIntent, startSearchPageIndex, workspaceScreens);             </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 342                         if (coords == null) {                                                            </span>
<span class="-1977519011864878718" onmouseenter="enter('-1977519011864878718');" onmouseout="out('-1977519011864878718');" style=""> 343                             LauncherProvider lp = LauncherAppState.getLauncherProvider();                </span>
<span  style=""> 344                                                                                                          </span>
<span class="-6633238510673534076" onmouseenter="enter('-6633238510673534076');" onmouseout="out('-6633238510673534076');" style=""> 345                             // If we can&#x27;t find a valid position, then just add a new screen.            </span>
<span class="9059050260314553422" onmouseenter="enter('9059050260314553422');" onmouseout="out('9059050260314553422');" style=""> 346                             // This takes time so we need to re-queue the add until the new              </span>
<span class="-5280811079167182328" onmouseenter="enter('-5280811079167182328');" onmouseout="out('-5280811079167182328');" style=""> 347                             // page is added.  Create as many screens as necessary to satisfy            </span>
<span class="8455829478477151409" onmouseenter="enter('8455829478477151409');" onmouseout="out('8455829478477151409');" style=""> 348                             // the startSearchPageIndex.                                                 </span>
<span class="8487048175242917271" onmouseenter="enter('8487048175242917271');" onmouseout="out('8487048175242917271');" style=""> 349                             int numPagesToAdd = Math.max(1, startSearchPageIndex + 1 -                   </span>
<span class="-1324774811555943949" onmouseenter="enter('-1324774811555943949');" onmouseout="out('-1324774811555943949');" style=""> 350                                     workspaceScreens.size());                                            </span>
<span class="1483283720296841413" onmouseenter="enter('1483283720296841413');" onmouseout="out('1483283720296841413');" style=""> 351                             while (numPagesToAdd &gt; 0) {                                                  </span>
<span class="5474653119612683837" onmouseenter="enter('5474653119612683837');" onmouseout="out('5474653119612683837');" style=""> 352                                 long screenId = lp.generateNewScreenId();                                </span>
<span class="-5141234047937446124" onmouseenter="enter('-5141234047937446124');" onmouseout="out('-5141234047937446124');" style=""> 353                                 // Save the screen id for binding in the workspace                       </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 354                                 workspaceScreens.add(screenId);                                          </span>
<span class="-3696618646623922220" onmouseenter="enter('-3696618646623922220');" onmouseout="out('-3696618646623922220');" style=""> 355                                 addedWorkspaceScreensFinal.add(screenId);                                </span>
<span class="6351530934092402455" onmouseenter="enter('6351530934092402455');" onmouseout="out('6351530934092402455');" style=""> 356                                 numPagesToAdd--;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357                             }                                                                            </span>
<span  style=""> 358                                                                                                          </span>
<span class="3901243562383099159" onmouseenter="enter('3901243562383099159');" onmouseout="out('3901243562383099159');" style=""> 359                             // Find the coordinate again                                                 </span>
<span class="-3135847744636951602" onmouseenter="enter('-3135847744636951602');" onmouseout="out('-3135847744636951602');" style=""> 360                             coords = LauncherModel.findNextAvailableIconSpace(context,                   </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 361                                     name, launchIntent, startSearchPageIndex, workspaceScreens);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 362                         }                                                                                </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 363                         if (coords == null) {                                                            </span>
<span class="-5449977300326458327" onmouseenter="enter('-5449977300326458327');" onmouseout="out('-5449977300326458327');" style=""> 364                             throw new RuntimeException(&quot;Coordinates should not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365                         }                                                                                </span>
<span  style=""> 366                                                                                                          </span>
<span class="2174473495010763804" onmouseenter="enter('2174473495010763804');" onmouseout="out('2174473495010763804');" style=""> 367                         ShortcutInfo shortcutInfo;                                                       </span>
<span class="3426516810566896093" onmouseenter="enter('3426516810566896093');" onmouseout="out('3426516810566896093');" style=""> 368                         if (a instanceof ShortcutInfo) {                                                 </span>
<span class="-5249556100657982245" onmouseenter="enter('-5249556100657982245');" onmouseout="out('-5249556100657982245');" style=""> 369                             shortcutInfo = (ShortcutInfo) a;                                             </span>
<span class="-6332708218117638716" onmouseenter="enter('-6332708218117638716');" onmouseout="out('-6332708218117638716');" style=""> 370                         } else if (a instanceof AppInfo) {                                               </span>
<span class="1865505886056520689" onmouseenter="enter('1865505886056520689');" onmouseout="out('1865505886056520689');" style=""> 371                             shortcutInfo = ((AppInfo) a).makeShortcut();                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 372                         } else {                                                                         </span>
<span class="-2299195794588473913" onmouseenter="enter('-2299195794588473913');" onmouseout="out('-2299195794588473913');" style=""> 373                             throw new RuntimeException(&quot;Unexpected info type&quot;);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374                         }                                                                                </span>
<span  style=""> 375                                                                                                          </span>
<span class="-2461182371641304570" onmouseenter="enter('-2461182371641304570');" onmouseout="out('-2461182371641304570');" style=""> 376                         // Add the shortcut to the db                                                    </span>
<span class="-7320352620243561318" onmouseenter="enter('-7320352620243561318');" onmouseout="out('-7320352620243561318');" style=""> 377                         addItemToDatabase(context, shortcutInfo,                                         </span>
<span class="-99165044777853060" onmouseenter="enter('-99165044777853060');" onmouseout="out('-99165044777853060');" style=""> 378                                 LauncherSettings.Favorites.CONTAINER_DESKTOP,                            </span>
<span class="-5434732926326446745" onmouseenter="enter('-5434732926326446745');" onmouseout="out('-5434732926326446745');" style=""> 379                                 coords.first, coords.second[0], coords.second[1], false);                </span>
<span class="-9035556179028036770" onmouseenter="enter('-9035556179028036770');" onmouseout="out('-9035556179028036770');" style=""> 380                         // Save the ShortcutInfo for binding in the workspace                            </span>
<span class="-7926664864188687285" onmouseenter="enter('-7926664864188687285');" onmouseout="out('-7926664864188687285');" style=""> 381                         addedShortcutsFinal.add(shortcutInfo);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383                 }                                                                                        </span>
<span  style=""> 384                                                                                                          </span>
<span class="-4345643046227374009" onmouseenter="enter('-4345643046227374009');" onmouseout="out('-4345643046227374009');" style=""> 385                 // Update the workspace screens                                                          </span>
<span class="-8595972794596504077" onmouseenter="enter('-8595972794596504077');" onmouseout="out('-8595972794596504077');" style=""> 386                 updateWorkspaceScreenOrder(context, workspaceScreens);                                   </span>
<span  style=""> 387                                                                                                          </span>
<span class="6328421283494006334" onmouseenter="enter('6328421283494006334');" onmouseout="out('6328421283494006334');" style=""> 388                 if (!addedShortcutsFinal.isEmpty() || !allAppsApps.isEmpty()) {                          </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 389                     runOnMainThread(new Runnable() {                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 390                         public void run() {                                                              </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style=""> 391                             Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                 </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style=""> 392                             if (callbacks == cb &amp;&amp; cb != null) {                                         </span>
<span class="-1019372697145415139" onmouseenter="enter('-1019372697145415139');" onmouseout="out('-1019372697145415139');" style=""> 393                                 final ArrayList&lt;ItemInfo&gt; addAnimated = new ArrayList&lt;ItemInfo&gt;();       </span>
<span class="2118444153049166132" onmouseenter="enter('2118444153049166132');" onmouseout="out('2118444153049166132');" style=""> 394                                 final ArrayList&lt;ItemInfo&gt; addNotAnimated = new ArrayList&lt;ItemInfo&gt;();    </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 395                                 if (!addedShortcutsFinal.isEmpty()) {                                    </span>
<span class="-7025153910539821495" onmouseenter="enter('-7025153910539821495');" onmouseout="out('-7025153910539821495');" style=""><abbr title=" 396                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - 1);"> 396                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - </abbr></span>
<span class="2594218988288672349" onmouseenter="enter('2594218988288672349');" onmouseout="out('2594218988288672349');" style=""> 397                                     long lastScreenId = info.screenId;                                   </span>
<span class="-1990558815210533549" onmouseenter="enter('-1990558815210533549');" onmouseout="out('-1990558815210533549');" style=""> 398                                     for (ItemInfo i : addedShortcutsFinal) {                             </span>
<span class="493217455474284777" onmouseenter="enter('493217455474284777');" onmouseout="out('493217455474284777');" style=""> 399                                         if (i.screenId == lastScreenId) {                                </span>
<span class="-1039209268317612440" onmouseenter="enter('-1039209268317612440');" onmouseout="out('-1039209268317612440');" style=""> 400                                             addAnimated.add(i);                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 401                                         } else {                                                         </span>
<span class="-1143244035417449650" onmouseenter="enter('-1143244035417449650');" onmouseout="out('-1143244035417449650');" style=""> 402                                             addNotAnimated.add(i);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405                                 }                                                                        </span>
<span class="6311741688571123959" onmouseenter="enter('6311741688571123959');" onmouseout="out('6311741688571123959');" style=""> 406                                 callbacks.bindAppsAdded(addedWorkspaceScreensFinal,                      </span>
<span class="-748486497380548647" onmouseenter="enter('-748486497380548647');" onmouseout="out('-748486497380548647');" style=""> 407                                         addNotAnimated, addAnimated, allAppsApps);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 408                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 409                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 410                     });                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 411                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 412             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 413         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 414         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415     }                                                                                                    </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 416 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 417 ||||||| BASE                                                                                             </span>
<span class="7557267594336804520" onmouseenter="enter('7557267594336804520');" onmouseout="out('7557267594336804520');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 418 public void addAppsToAllApps(final Context ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {                  </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 419         final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 420                                                                                                          </span>
<span class="-3382977171164412937" onmouseenter="enter('-3382977171164412937');" onmouseout="out('-3382977171164412937');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 421         if (allAppsApps == null) {                                                                       </span>
<span class="6531664792630326104" onmouseenter="enter('6531664792630326104');" onmouseout="out('6531664792630326104');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 422             throw new RuntimeException(&quot;allAppsApps must not be null&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 423         }                                                                                                </span>
<span class="9083517779694379730" onmouseenter="enter('9083517779694379730');" onmouseout="out('9083517779694379730');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 424         if (allAppsApps.isEmpty()) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 425             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 426         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 427                                                                                                          </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 428         final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                           </span>
<span class="-1645043148265833418" onmouseenter="enter('-1645043148265833418');" onmouseout="out('-1645043148265833418');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 429         Iterator&lt;AppInfo&gt; iter = allAppsApps.iterator();                                                 </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 430         while (iter.hasNext()) {                                                                         </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 431             ItemInfo a = iter.next();                                                                    </span>
<span class="-1900793198524744852" onmouseenter="enter('-1900793198524744852');" onmouseout="out('-1900793198524744852');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 432             if (LauncherModel.appWasRestored(ctx, a.getIntent())) {                                      </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 433                 restoredAppsFinal.add((AppInfo) a);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 434             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 435         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 436                                                                                                          </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 437         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 438         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 439             public void run() {                                                                          </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 440                 runOnMainThread(new Runnable() {                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 441                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 442                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 443                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="2546703397119558662" onmouseenter="enter('2546703397119558662');" onmouseout="out('2546703397119558662');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 444                             callbacks.bindAppsAdded(null, null, null, allAppsApps);                      </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 445                             if (!restoredAppsFinal.isEmpty()) {                                          </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 446                                 callbacks.bindAppsUpdated(restoredAppsFinal);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 447                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 448                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 449                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 450                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 451             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 452         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 453         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 454     }                                                                                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 455 =======                                                                                                  </span>
<span class="7557267594336804520" onmouseenter="enter('7557267594336804520');" onmouseout="out('7557267594336804520');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 456 public void addAppsToAllApps(final Context ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {                  </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 457         final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                        </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 458                                                                                                          </span>
<span class="-3382977171164412937" onmouseenter="enter('-3382977171164412937');" onmouseout="out('-3382977171164412937');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 459         if (allAppsApps == null) {                                                                       </span>
<span class="6531664792630326104" onmouseenter="enter('6531664792630326104');" onmouseout="out('6531664792630326104');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 460             throw new RuntimeException(&quot;allAppsApps must not be null&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 461         }                                                                                                </span>
<span class="9083517779694379730" onmouseenter="enter('9083517779694379730');" onmouseout="out('9083517779694379730');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 462         if (allAppsApps.isEmpty()) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 463             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 464         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 465                                                                                                          </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 466         final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                           </span>
<span class="-1645043148265833418" onmouseenter="enter('-1645043148265833418');" onmouseout="out('-1645043148265833418');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 467         Iterator&lt;AppInfo&gt; iter = allAppsApps.iterator();                                                 </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 468         while (iter.hasNext()) {                                                                         </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 469             ItemInfo a = iter.next();                                                                    </span>
<span class="-1900793198524744852" onmouseenter="enter('-1900793198524744852');" onmouseout="out('-1900793198524744852');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 470             if (LauncherModel.appWasRestored(ctx, a.getIntent())) {                                      </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 471                 restoredAppsFinal.add((AppInfo) a);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 472             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 473         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 474                                                                                                          </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 475         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 476         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 477             public void run() {                                                                          </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 478                 runOnMainThread(new Runnable() {                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 479                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 480                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 481                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 482                             if (!restoredAppsFinal.isEmpty()) {                                          </span>
<span class="74801564058707670" onmouseenter="enter('74801564058707670');" onmouseout="out('74801564058707670');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 483                                 for (AppInfo info : restoredAppsFinal) {                                 </span>
<span class="5803126433316087462" onmouseenter="enter('5803126433316087462');" onmouseout="out('5803126433316087462');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 484                                     final Intent intent = info.getIntent();                              </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 485                                     if (intent != null) {                                                </span>
<span class="-1988411798343692534" onmouseenter="enter('-1988411798343692534');" onmouseout="out('-1988411798343692534');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 486                                         mIconCache.deletePreloadedIcon(intent.getComponent());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 487                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 488                                 }                                                                        </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 489                                 callbacks.bindAppsUpdated(restoredAppsFinal);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 490                             }                                                                            </span>
<span class="2546703397119558662" onmouseenter="enter('2546703397119558662');" onmouseout="out('2546703397119558662');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 491                             callbacks.bindAppsAdded(null, null, null, allAppsApps);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 492                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 493                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 494                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 495             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 496         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 497         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 498     }                                                                                                    </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 499 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span  style=""> 500                                                                                                          </span>
<span  style=""> 501                                                                                                          </span>
<span class="6011793905538310529" onmouseenter="enter('6011793905538310529');" onmouseout="out('6011793905538310529');" style=""> 502     public Bitmap getFallbackIcon() {                                                                    </span>
<span class="-671044890656554786" onmouseenter="enter('-671044890656554786');" onmouseout="out('-671044890656554786');" style=""> 503         if (mDefaultIcon == null) {                                                                      </span>
<span class="6379788101570603758" onmouseenter="enter('6379788101570603758');" onmouseout="out('6379788101570603758');" style=""> 504             final Context context = LauncherAppState.getInstance().getContext();                         </span>
<span class="-6730081374242205673" onmouseenter="enter('-6730081374242205673');" onmouseout="out('-6730081374242205673');" style=""> 505             mDefaultIcon = Utilities.createIconBitmap(                                                   </span>
<span class="-5707305257020956234" onmouseenter="enter('-5707305257020956234');" onmouseout="out('-5707305257020956234');" style=""> 506                     mIconCache.getFullResDefaultActivityIcon(), context);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 507         }                                                                                                </span>
<span class="1334413422936499318" onmouseenter="enter('1334413422936499318');" onmouseout="out('1334413422936499318');" style=""> 508         return Bitmap.createBitmap(mDefaultIcon);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 509     }                                                                                                    </span>
<span  style=""> 510                                                                                                          </span>
<span class="-2534375214054854784" onmouseenter="enter('-2534375214054854784');" onmouseout="out('-2534375214054854784');" style=""> 511     public void unbindItemInfosAndClearQueuedBindRunnables() {                                           </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 512         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="3234081821162543737" onmouseenter="enter('3234081821162543737');" onmouseout="out('3234081821162543737');" style=""> 513             throw new RuntimeException(&quot;Expected unbindLauncherItemInfos() to be called from the &quot; +     </span>
<span class="-2105866874193436772" onmouseenter="enter('-2105866874193436772');" onmouseout="out('-2105866874193436772');" style=""> 514                     &quot;main thread&quot;);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 515         }                                                                                                </span>
<span  style=""> 516                                                                                                          </span>
<span class="2920227315927506269" onmouseenter="enter('2920227315927506269');" onmouseout="out('2920227315927506269');" style=""> 517         // Clear any deferred bind runnables                                                             </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style=""> 518         mDeferredBindRunnables.clear();                                                                  </span>
<span class="8385691997542366613" onmouseenter="enter('8385691997542366613');" onmouseout="out('8385691997542366613');" style=""> 519         // Remove any queued bind runnables                                                              </span>
<span class="5230017654050637935" onmouseenter="enter('5230017654050637935');" onmouseout="out('5230017654050637935');" style=""> 520         mHandler.cancelAllRunnablesOfType(MAIN_THREAD_BINDING_RUNNABLE);                                 </span>
<span class="1897803433846165569" onmouseenter="enter('1897803433846165569');" onmouseout="out('1897803433846165569');" style=""> 521         // Unbind all the workspace items                                                                </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style=""> 522         unbindWorkspaceItemsOnMainThread();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523     }                                                                                                    </span>
<span  style=""> 524                                                                                                          </span>
<span class="-8568492770799719308" onmouseenter="enter('-8568492770799719308');" onmouseout="out('-8568492770799719308');" style=""> 525     /** Unbinds all the sBgWorkspaceItems and sBgAppWidgets on the main thread */                        </span>
<span class="-7789072121131450728" onmouseenter="enter('-7789072121131450728');" onmouseout="out('-7789072121131450728');" style=""> 526     void unbindWorkspaceItemsOnMainThread() {                                                            </span>
<span class="7758625295624680992" onmouseenter="enter('7758625295624680992');" onmouseout="out('7758625295624680992');" style=""> 527         // Ensure that we don&#x27;t use the same workspace items data structure on the main thread           </span>
<span class="737195251801262528" onmouseenter="enter('737195251801262528');" onmouseout="out('737195251801262528');" style=""> 528         // by making a copy of workspace items first.                                                    </span>
<span class="-1398641255292585189" onmouseenter="enter('-1398641255292585189');" onmouseout="out('-1398641255292585189');" style=""> 529         final ArrayList&lt;ItemInfo&gt; tmpWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="-3814257207504512344" onmouseenter="enter('-3814257207504512344');" onmouseout="out('-3814257207504512344');" style=""> 530         final ArrayList&lt;ItemInfo&gt; tmpAppWidgets = new ArrayList&lt;ItemInfo&gt;();                             </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 531         synchronized (sBgLock) {                                                                         </span>
<span class="871827956477804030" onmouseenter="enter('871827956477804030');" onmouseout="out('871827956477804030');" style=""> 532             tmpWorkspaceItems.addAll(sBgWorkspaceItems);                                                 </span>
<span class="7232141846966659069" onmouseenter="enter('7232141846966659069');" onmouseout="out('7232141846966659069');" style=""> 533             tmpAppWidgets.addAll(sBgAppWidgets);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534         }                                                                                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 535         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 536                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 537                 public void run() {                                                                      </span>
<span class="709208250683113430" onmouseenter="enter('709208250683113430');" onmouseout="out('709208250683113430');" style=""> 538                    for (ItemInfo item : tmpWorkspaceItems) {                                             </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 539                        item.unbind();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 540                    }                                                                                     </span>
<span class="5969585374646931804" onmouseenter="enter('5969585374646931804');" onmouseout="out('5969585374646931804');" style=""> 541                    for (ItemInfo item : tmpAppWidgets) {                                                 </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 542                        item.unbind();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 543                    }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 544                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 545             };                                                                                           </span>
<span class="7651423128405913164" onmouseenter="enter('7651423128405913164');" onmouseout="out('7651423128405913164');" style=""> 546         runOnMainThread(r);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 547     }                                                                                                    </span>
<span  style=""> 548                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 549     /**                                                                                                  </span>
<span class="1848609696039738732" onmouseenter="enter('1848609696039738732');" onmouseout="out('1848609696039738732');" style=""> 550      * Adds an item to the DB if it was not created previously, or move it to a new                      </span>
<span class="-5676820686470662639" onmouseenter="enter('-5676820686470662639');" onmouseout="out('-5676820686470662639');" style=""> 551      * &lt;container, screen, cellX, cellY&gt;                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 552      */                                                                                                  </span>
<span class="-51543303805672089" onmouseenter="enter('-51543303805672089');" onmouseout="out('-51543303805672089');" style=""> 553     static void addOrMoveItemInDatabase(Context context, ItemInfo item, long container,                  </span>
<span class="-5245876562794627197" onmouseenter="enter('-5245876562794627197');" onmouseout="out('-5245876562794627197');" style=""> 554             long screenId, int cellX, int cellY) {                                                       </span>
<span class="32392699487480265" onmouseenter="enter('32392699487480265');" onmouseout="out('32392699487480265');" style=""> 555         if (item.container == ItemInfo.NO_ID) {                                                          </span>
<span class="4419434731301535819" onmouseenter="enter('4419434731301535819');" onmouseout="out('4419434731301535819');" style=""> 556             // From all apps                                                                             </span>
<span class="-8263439540868073092" onmouseenter="enter('-8263439540868073092');" onmouseout="out('-8263439540868073092');" style=""> 557             addItemToDatabase(context, item, container, screenId, cellX, cellY, false);                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 558         } else {                                                                                         </span>
<span class="-7142861896488381117" onmouseenter="enter('-7142861896488381117');" onmouseout="out('-7142861896488381117');" style=""> 559             // From somewhere else                                                                       </span>
<span class="8117171250701950869" onmouseenter="enter('8117171250701950869');" onmouseout="out('8117171250701950869');" style=""> 560             moveItemInDatabase(context, item, container, screenId, cellX, cellY);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 561         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562     }                                                                                                    </span>
<span  style=""> 563                                                                                                          </span>
<span class="4702100753708951937" onmouseenter="enter('4702100753708951937');" onmouseout="out('4702100753708951937');" style=""> 564     static void checkItemInfoLocked(                                                                     </span>
<span class="5364875648309494693" onmouseenter="enter('5364875648309494693');" onmouseout="out('5364875648309494693');" style=""> 565             final long itemId, final ItemInfo item, StackTraceElement[] stackTrace) {                    </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 566         ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                  </span>
<span class="2193901808277988725" onmouseenter="enter('2193901808277988725');" onmouseout="out('2193901808277988725');" style=""> 567         if (modelItem != null &amp;&amp; item != modelItem) {                                                    </span>
<span class="-6911492637937320821" onmouseenter="enter('-6911492637937320821');" onmouseout="out('-6911492637937320821');" style=""> 568             // check all the data is consistent                                                          </span>
<span class="3167281191986023088" onmouseenter="enter('3167281191986023088');" onmouseout="out('3167281191986023088');" style=""> 569             if (modelItem instanceof ShortcutInfo &amp;&amp; item instanceof ShortcutInfo) {                     </span>
<span class="-1653864946297504770" onmouseenter="enter('-1653864946297504770');" onmouseout="out('-1653864946297504770');" style=""> 570                 ShortcutInfo modelShortcut = (ShortcutInfo) modelItem;                                   </span>
<span class="-8536587564734321572" onmouseenter="enter('-8536587564734321572');" onmouseout="out('-8536587564734321572');" style=""> 571                 ShortcutInfo shortcut = (ShortcutInfo) item;                                             </span>
<span class="-7217994585765985559" onmouseenter="enter('-7217994585765985559');" onmouseout="out('-7217994585765985559');" style=""> 572                 if (modelShortcut.title.toString().equals(shortcut.title.toString()) &amp;&amp;                  </span>
<span class="7021740932722535577" onmouseenter="enter('7021740932722535577');" onmouseout="out('7021740932722535577');" style=""> 573                         modelShortcut.intent.filterEquals(shortcut.intent) &amp;&amp;                            </span>
<span class="4925161259592804600" onmouseenter="enter('4925161259592804600');" onmouseout="out('4925161259592804600');" style=""> 574                         modelShortcut.id == shortcut.id &amp;&amp;                                               </span>
<span class="-1606801806764943644" onmouseenter="enter('-1606801806764943644');" onmouseout="out('-1606801806764943644');" style=""> 575                         modelShortcut.itemType == shortcut.itemType &amp;&amp;                                   </span>
<span class="-380653198024077357" onmouseenter="enter('-380653198024077357');" onmouseout="out('-380653198024077357');" style=""> 576                         modelShortcut.container == shortcut.container &amp;&amp;                                 </span>
<span class="2095015237441904975" onmouseenter="enter('2095015237441904975');" onmouseout="out('2095015237441904975');" style=""> 577                         modelShortcut.screenId == shortcut.screenId &amp;&amp;                                   </span>
<span class="8356312788511485655" onmouseenter="enter('8356312788511485655');" onmouseout="out('8356312788511485655');" style=""> 578                         modelShortcut.cellX == shortcut.cellX &amp;&amp;                                         </span>
<span class="-8074804825298555262" onmouseenter="enter('-8074804825298555262');" onmouseout="out('-8074804825298555262');" style=""> 579                         modelShortcut.cellY == shortcut.cellY &amp;&amp;                                         </span>
<span class="-7194734667210277438" onmouseenter="enter('-7194734667210277438');" onmouseout="out('-7194734667210277438');" style=""> 580                         modelShortcut.spanX == shortcut.spanX &amp;&amp;                                         </span>
<span class="-7990526823057792041" onmouseenter="enter('-7990526823057792041');" onmouseout="out('-7990526823057792041');" style=""> 581                         modelShortcut.spanY == shortcut.spanY &amp;&amp;                                         </span>
<span class="1791877648440959041" onmouseenter="enter('1791877648440959041');" onmouseout="out('1791877648440959041');" style=""> 582                         ((modelShortcut.dropPos == null &amp;&amp; shortcut.dropPos == null) ||                  </span>
<span class="-2385997644828375020" onmouseenter="enter('-2385997644828375020');" onmouseout="out('-2385997644828375020');" style=""> 583                         (modelShortcut.dropPos != null &amp;&amp;                                                </span>
<span class="8673154118418480877" onmouseenter="enter('8673154118418480877');" onmouseout="out('8673154118418480877');" style=""> 584                                 shortcut.dropPos != null &amp;&amp;                                              </span>
<span class="1110472284758384589" onmouseenter="enter('1110472284758384589');" onmouseout="out('1110472284758384589');" style=""> 585                                 modelShortcut.dropPos[0] == shortcut.dropPos[0] &amp;&amp;                       </span>
<span class="8614743944867507225" onmouseenter="enter('8614743944867507225');" onmouseout="out('8614743944867507225');" style=""> 586                         modelShortcut.dropPos[1] == shortcut.dropPos[1]))) {                             </span>
<span class="-1826978062251207152" onmouseenter="enter('-1826978062251207152');" onmouseout="out('-1826978062251207152');" style=""> 587                     // For all intents and purposes, this is the same object                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 588                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 589                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 590             }                                                                                            </span>
<span  style=""> 591                                                                                                          </span>
<span class="-2302662152798801960" onmouseenter="enter('-2302662152798801960');" onmouseout="out('-2302662152798801960');" style=""> 592             // the modelItem needs to match up perfectly with item if our model is                       </span>
<span class="2528116919227347475" onmouseenter="enter('2528116919227347475');" onmouseout="out('2528116919227347475');" style=""> 593             // to be consistent with the database-- for now, just require                                </span>
<span class="-7120210409264493846" onmouseenter="enter('-7120210409264493846');" onmouseout="out('-7120210409264493846');" style=""> 594             // modelItem == item or the equality check above                                             </span>
<span class="-3667577266304831846" onmouseenter="enter('-3667577266304831846');" onmouseout="out('-3667577266304831846');" style=""> 595             String msg = &quot;item: &quot; + ((item != null) ? item.toString() : &quot;null&quot;) +                        </span>
<span class="-2910805653187511799" onmouseenter="enter('-2910805653187511799');" onmouseout="out('-2910805653187511799');" style=""> 596                     &quot;modelItem: &quot; +                                                                      </span>
<span class="-7298566834322238485" onmouseenter="enter('-7298566834322238485');" onmouseout="out('-7298566834322238485');" style=""> 597                     ((modelItem != null) ? modelItem.toString() : &quot;null&quot;) +                              </span>
<span class="-1970027720063810255" onmouseenter="enter('-1970027720063810255');" onmouseout="out('-1970027720063810255');" style=""> 598                     &quot;Error: ItemInfo passed to checkItemInfo doesn&#x27;t match original&quot;;                    </span>
<span class="889449931745068267" onmouseenter="enter('889449931745068267');" onmouseout="out('889449931745068267');" style=""> 599             RuntimeException e = new RuntimeException(msg);                                              </span>
<span class="746494671138810715" onmouseenter="enter('746494671138810715');" onmouseout="out('746494671138810715');" style=""> 600             if (stackTrace != null) {                                                                    </span>
<span class="6991917147302354492" onmouseenter="enter('6991917147302354492');" onmouseout="out('6991917147302354492');" style=""> 601                 e.setStackTrace(stackTrace);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 602             }                                                                                            </span>
<span class="-2532054300390783036" onmouseenter="enter('-2532054300390783036');" onmouseout="out('-2532054300390783036');" style=""> 603             throw e;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 604         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 605     }                                                                                                    </span>
<span  style=""> 606                                                                                                          </span>
<span class="8253262720993766341" onmouseenter="enter('8253262720993766341');" onmouseout="out('8253262720993766341');" style=""> 607     static void checkItemInfo(final ItemInfo item) {                                                     </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 608         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 609         final long itemId = item.id;                                                                     </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 610         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 611             public void run() {                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 612                 synchronized (sBgLock) {                                                                 </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 613                     checkItemInfoLocked(itemId, item, stackTrace);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 615             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 616         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 617         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618     }                                                                                                    </span>
<span  style=""> 619                                                                                                          </span>
<span class="-7795546628976526290" onmouseenter="enter('-7795546628976526290');" onmouseout="out('-7795546628976526290');" style=""> 620     static void updateItemInDatabaseHelper(Context context, final ContentValues values,                  </span>
<span class="-8227938209854841132" onmouseenter="enter('-8227938209854841132');" onmouseout="out('-8227938209854841132');" style=""> 621             final ItemInfo item, final String callingFunction) {                                         </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 622         final long itemId = item.id;                                                                     </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 623         final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);                         </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 624         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style=""> 625                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 626         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 627         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 628             public void run() {                                                                          </span>
<span class="6508684228899883734" onmouseenter="enter('6508684228899883734');" onmouseout="out('6508684228899883734');" style=""> 629                 cr.update(uri, values, null, null);                                                      </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 630                 updateItemArrays(item, itemId, stackTrace);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 631             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 632         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 633         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 634     }                                                                                                    </span>
<span  style=""> 635                                                                                                          </span>
<span class="-5268011833856431518" onmouseenter="enter('-5268011833856431518');" onmouseout="out('-5268011833856431518');" style=""> 636     static void updateItemsInDatabaseHelper(Context context, final ArrayList&lt;ContentValues&gt; valuesList,  </span>
<span class="-6813896065968537303" onmouseenter="enter('-6813896065968537303');" onmouseout="out('-6813896065968537303');" style=""> 637             final ArrayList&lt;ItemInfo&gt; items, final String callingFunction) {                             </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 638         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style=""> 639                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 640         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 641         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 642             public void run() {                                                                          </span>
<span class="870344729843570934" onmouseenter="enter('870344729843570934');" onmouseout="out('870344729843570934');" style=""> 643                 ArrayList&lt;ContentProviderOperation&gt; ops =                                                </span>
<span class="9022468941674050374" onmouseenter="enter('9022468941674050374');" onmouseout="out('9022468941674050374');" style=""> 644                         new ArrayList&lt;ContentProviderOperation&gt;();                                       </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 645                 int count = items.size();                                                                </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 646                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 647                     ItemInfo item = items.get(i);                                                        </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 648                     final long itemId = item.id;                                                         </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 649                     final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);             </span>
<span class="-8860263448497272048" onmouseenter="enter('-8860263448497272048');" onmouseout="out('-8860263448497272048');" style=""> 650                     ContentValues values = valuesList.get(i);                                            </span>
<span  style=""> 651                                                                                                          </span>
<span class="2997765192602662390" onmouseenter="enter('2997765192602662390');" onmouseout="out('2997765192602662390');" style=""> 652                     ops.add(ContentProviderOperation.newUpdate(uri).withValues(values).build());         </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 653                     updateItemArrays(item, itemId, stackTrace);                                          </span>
<span  style=""> 654                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655                 }                                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 656                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style=""> 657                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 658                 } catch (Exception e) {                                                                  </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 659                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 662         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 663         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 664     }                                                                                                    </span>
<span  style=""> 665                                                                                                          </span>
<span class="2082626234385770383" onmouseenter="enter('2082626234385770383');" onmouseout="out('2082626234385770383');" style=""> 666     static void updateItemArrays(ItemInfo item, long itemId, StackTraceElement[] stackTrace) {           </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 667         // Lock on mBgLock *after* the db operation                                                      </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 668         synchronized (sBgLock) {                                                                         </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 669             checkItemInfoLocked(itemId, item, stackTrace);                                               </span>
<span  style=""> 670                                                                                                          </span>
<span class="5861445851049755510" onmouseenter="enter('5861445851049755510');" onmouseout="out('5861445851049755510');" style=""> 671             if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                        </span>
<span class="-7006113140306734361" onmouseenter="enter('-7006113140306734361');" onmouseout="out('-7006113140306734361');" style=""> 672                     item.container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                    </span>
<span class="-6294566488312473300" onmouseenter="enter('-6294566488312473300');" onmouseout="out('-6294566488312473300');" style=""> 673                 // Item is in a folder, make sure this folder exists                                     </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 674                 if (!sBgFolders.containsKey(item.container)) {                                           </span>
<span class="9065703941205621353" onmouseenter="enter('9065703941205621353');" onmouseout="out('9065703941205621353');" style=""> 675                     // An items container is being set to a that of an item which is not in              </span>
<span class="-3172747387014066058" onmouseenter="enter('-3172747387014066058');" onmouseout="out('-3172747387014066058');" style=""> 676                     // the list of Folders.                                                              </span>
<span class="151828163632620756" onmouseenter="enter('151828163632620756');" onmouseout="out('151828163632620756');" style=""> 677                     String msg = &quot;item: &quot; + item + &quot; container being set to: &quot; +                         </span>
<span class="9080161357490611974" onmouseenter="enter('9080161357490611974');" onmouseout="out('9080161357490611974');" style=""> 678                             item.container + &quot;, not in the list of folders&quot;;                             </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 679                     Log.e(TAG, msg);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 681             }                                                                                            </span>
<span  style=""> 682                                                                                                          </span>
<span class="8378072337545652807" onmouseenter="enter('8378072337545652807');" onmouseout="out('8378072337545652807');" style=""> 683             // Items are added/removed from the corresponding FolderInfo elsewhere, such                 </span>
<span class="7844728369218635164" onmouseenter="enter('7844728369218635164');" onmouseout="out('7844728369218635164');" style=""> 684             // as in Workspace.onDrop. Here, we just add/remove them from the list of items              </span>
<span class="4553148780571708557" onmouseenter="enter('4553148780571708557');" onmouseout="out('4553148780571708557');" style=""> 685             // that are on the desktop, as appropriate                                                   </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 686             ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                              </span>
<span class="-8392915416586226921" onmouseenter="enter('-8392915416586226921');" onmouseout="out('-8392915416586226921');" style=""> 687             if (modelItem != null &amp;&amp;                                                                     </span>
<span class="3168075572498915363" onmouseenter="enter('3168075572498915363');" onmouseout="out('3168075572498915363');" style=""> 688                     (modelItem.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||              </span>
<span class="-2354507674725904195" onmouseenter="enter('-2354507674725904195');" onmouseout="out('-2354507674725904195');" style=""> 689                      modelItem.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {             </span>
<span class="-8474980351342559163" onmouseenter="enter('-8474980351342559163');" onmouseout="out('-8474980351342559163');" style=""> 690                 switch (modelItem.itemType) {                                                            </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style=""> 691                     case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                               </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style=""> 692                     case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                  </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 693                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                    </span>
<span class="-2945309969071223861" onmouseenter="enter('-2945309969071223861');" onmouseout="out('-2945309969071223861');" style=""> 694                         if (!sBgWorkspaceItems.contains(modelItem)) {                                    </span>
<span class="-5660475538824179031" onmouseenter="enter('-5660475538824179031');" onmouseout="out('-5660475538824179031');" style=""> 695                             sBgWorkspaceItems.add(modelItem);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 696                         }                                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 697                         break;                                                                           </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 698                     default:                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 699                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 700                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 701             } else {                                                                                     </span>
<span class="-7939766627444392355" onmouseenter="enter('-7939766627444392355');" onmouseout="out('-7939766627444392355');" style=""> 702                 sBgWorkspaceItems.remove(modelItem);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 703             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 704         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 705     }                                                                                                    </span>
<span  style=""> 706                                                                                                          </span>
<span class="-4020360329970845372" onmouseenter="enter('-4020360329970845372');" onmouseout="out('-4020360329970845372');" style=""> 707     public void flushWorkerThread() {                                                                    </span>
<span class="2458440832416538563" onmouseenter="enter('2458440832416538563');" onmouseout="out('2458440832416538563');" style=""> 708         mFlushingWorkerThread = true;                                                                    </span>
<span class="2941590529192344100" onmouseenter="enter('2941590529192344100');" onmouseout="out('2941590529192344100');" style=""> 709         Runnable waiter = new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 710                 public void run() {                                                                      </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 711                     synchronized (this) {                                                                </span>
<span class="-1428047894310886643" onmouseenter="enter('-1428047894310886643');" onmouseout="out('-1428047894310886643');" style=""> 712                         notifyAll();                                                                     </span>
<span class="3926508156885202999" onmouseenter="enter('3926508156885202999');" onmouseout="out('3926508156885202999');" style=""> 713                         mFlushingWorkerThread = false;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 715                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 716             };                                                                                           </span>
<span  style=""> 717                                                                                                          </span>
<span class="-7483564469787643608" onmouseenter="enter('-7483564469787643608');" onmouseout="out('-7483564469787643608');" style=""> 718         synchronized(waiter) {                                                                           </span>
<span class="-8072658497280753067" onmouseenter="enter('-8072658497280753067');" onmouseout="out('-8072658497280753067');" style=""> 719             runOnWorkerThread(waiter);                                                                   </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style=""> 720             if (mLoaderTask != null) {                                                                   </span>
<span class="-756902833484627430" onmouseenter="enter('-756902833484627430');" onmouseout="out('-756902833484627430');" style=""> 721                 synchronized(mLoaderTask) {                                                              </span>
<span class="58891182273081261" onmouseenter="enter('58891182273081261');" onmouseout="out('58891182273081261');" style=""> 722                     mLoaderTask.notify();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 723                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724             }                                                                                            </span>
<span class="4859668596787406566" onmouseenter="enter('4859668596787406566');" onmouseout="out('4859668596787406566');" style=""> 725             boolean success = false;                                                                     </span>
<span class="7536073198725464588" onmouseenter="enter('7536073198725464588');" onmouseout="out('7536073198725464588');" style=""> 726             while (!success) {                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 727                 try {                                                                                    </span>
<span class="8661527805225995774" onmouseenter="enter('8661527805225995774');" onmouseout="out('8661527805225995774');" style=""> 728                     waiter.wait();                                                                       </span>
<span class="-5965625035307022309" onmouseenter="enter('-5965625035307022309');" onmouseout="out('-5965625035307022309');" style=""> 729                     success = true;                                                                      </span>
<span class="-7528533024404460182" onmouseenter="enter('-7528533024404460182');" onmouseout="out('-7528533024404460182');" style=""> 730                 } catch (InterruptedException e) {                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 731                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 734     }                                                                                                    </span>
<span  style=""> 735                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 736     /**                                                                                                  </span>
<span class="6993284491606696239" onmouseenter="enter('6993284491606696239');" onmouseout="out('6993284491606696239');" style=""> 737      * Move an item in the DB to a new &lt;container, screen, cellX, cellY&gt;                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 738      */                                                                                                  </span>
<span class="4065343735615789149" onmouseenter="enter('4065343735615789149');" onmouseout="out('4065343735615789149');" style=""> 739     static void moveItemInDatabase(Context context, final ItemInfo item, final long container,           </span>
<span class="-6409391853534757752" onmouseenter="enter('-6409391853534757752');" onmouseout="out('-6409391853534757752');" style=""> 740             final long screenId, final int cellX, final int cellY) {                                     </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 741         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 742         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 743         item.cellY = cellY;                                                                              </span>
<span  style=""> 744                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 745         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 746         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 747         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 748                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 749             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 750         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 751             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 752         }                                                                                                </span>
<span  style=""> 753                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 754         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 755         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 756         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 757         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 758         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span  style=""> 759                                                                                                          </span>
<span class="-198415815572970699" onmouseenter="enter('-198415815572970699');" onmouseout="out('-198415815572970699');" style=""> 760         updateItemInDatabaseHelper(context, values, item, &quot;moveItemInDatabase&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 761     }                                                                                                    </span>
<span  style=""> 762                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 763     /**                                                                                                  </span>
<span class="-2318253408843035081" onmouseenter="enter('-2318253408843035081');" onmouseout="out('-2318253408843035081');" style=""> 764      * Move items in the DB to a new &lt;container, screen, cellX, cellY&gt;. We assume that the               </span>
<span class="9095568381627098065" onmouseenter="enter('9095568381627098065');" onmouseout="out('9095568381627098065');" style=""> 765      * cellX, cellY have already been updated on the ItemInfos.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 766      */                                                                                                  </span>
<span class="2993462226149949147" onmouseenter="enter('2993462226149949147');" onmouseout="out('2993462226149949147');" style=""> 767     static void moveItemsInDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items,                    </span>
<span class="4351605778470855925" onmouseenter="enter('4351605778470855925');" onmouseout="out('4351605778470855925');" style=""> 768             final long container, final int screen) {                                                    </span>
<span  style=""> 769                                                                                                          </span>
<span class="3335073963685886452" onmouseenter="enter('3335073963685886452');" onmouseout="out('3335073963685886452');" style=""> 770         ArrayList&lt;ContentValues&gt; contentValues = new ArrayList&lt;ContentValues&gt;();                         </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 771         int count = items.size();                                                                        </span>
<span  style=""> 772                                                                                                          </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 773         for (int i = 0; i &lt; count; i++) {                                                                </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 774             ItemInfo item = items.get(i);                                                                </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 775             item.container = container;                                                                  </span>
<span  style=""> 776                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 777             // We store hotseat items in canonical form which is this orientation invariant position     </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 778             // in the hotseat                                                                            </span>
<span class="6331311558654873539" onmouseenter="enter('6331311558654873539');" onmouseout="out('6331311558654873539');" style=""> 779             if (context instanceof Launcher &amp;&amp; screen &lt; 0 &amp;&amp;                                             </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 780                     container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                         </span>
<span class="-3476894176903330001" onmouseenter="enter('-3476894176903330001');" onmouseout="out('-3476894176903330001');" style=""> 781                 item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(item.cellX,          </span>
<span class="8891673712343428946" onmouseenter="enter('8891673712343428946');" onmouseout="out('8891673712343428946');" style=""> 782                         item.cellY);                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 783             } else {                                                                                     </span>
<span class="-4307617232085975705" onmouseenter="enter('-4307617232085975705');" onmouseout="out('-4307617232085975705');" style=""> 784                 item.screenId = screen;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 785             }                                                                                            </span>
<span  style=""> 786                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 787             final ContentValues values = new ContentValues();                                            </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 788             values.put(LauncherSettings.Favorites.CONTAINER, item.container);                            </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 789             values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                    </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 790             values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                    </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 791             values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                </span>
<span  style=""> 792                                                                                                          </span>
<span class="2833686190506555422" onmouseenter="enter('2833686190506555422');" onmouseout="out('2833686190506555422');" style=""> 793             contentValues.add(values);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 794         }                                                                                                </span>
<span class="-3017110074752693492" onmouseenter="enter('-3017110074752693492');" onmouseout="out('-3017110074752693492');" style=""> 795         updateItemsInDatabaseHelper(context, contentValues, items, &quot;moveItemInDatabase&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 796     }                                                                                                    </span>
<span  style=""> 797                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 798     /**                                                                                                  </span>
<span class="5893714151144352360" onmouseenter="enter('5893714151144352360');" onmouseout="out('5893714151144352360');" style=""> 799      * Move and/or resize item in the DB to a new &lt;container, screen, cellX, cellY, spanX, spanY&gt;        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 800      */                                                                                                  </span>
<span class="2794810618835410616" onmouseenter="enter('2794810618835410616');" onmouseout="out('2794810618835410616');" style=""> 801     static void modifyItemInDatabase(Context context, final ItemInfo item, final long container,         </span>
<span class="5104971199972279845" onmouseenter="enter('5104971199972279845');" onmouseout="out('5104971199972279845');" style=""> 802             final long screenId, final int cellX, final int cellY, final int spanX, final int spanY) {   </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 803         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 804         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 805         item.cellY = cellY;                                                                              </span>
<span class="-7444681703441257019" onmouseenter="enter('-7444681703441257019');" onmouseout="out('-7444681703441257019');" style=""> 806         item.spanX = spanX;                                                                              </span>
<span class="1797194204222415457" onmouseenter="enter('1797194204222415457');" onmouseout="out('1797194204222415457');" style=""> 807         item.spanY = spanY;                                                                              </span>
<span  style=""> 808                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 809         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 810         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 811         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 812                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 813             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 814         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 815             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 816         }                                                                                                </span>
<span  style=""> 817                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 818         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 819         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 820         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 821         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="-1263713769577317048" onmouseenter="enter('-1263713769577317048');" onmouseout="out('-1263713769577317048');" style=""> 822         values.put(LauncherSettings.Favorites.SPANX, item.spanX);                                        </span>
<span class="847673422027095164" onmouseenter="enter('847673422027095164');" onmouseout="out('847673422027095164');" style=""> 823         values.put(LauncherSettings.Favorites.SPANY, item.spanY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 824         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span  style=""> 825                                                                                                          </span>
<span class="5688211233374147409" onmouseenter="enter('5688211233374147409');" onmouseout="out('5688211233374147409');" style=""> 826         updateItemInDatabaseHelper(context, values, item, &quot;modifyItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 827     }                                                                                                    </span>
<span  style=""> 828                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 829     /**                                                                                                  </span>
<span class="3263486289839218660" onmouseenter="enter('3263486289839218660');" onmouseout="out('3263486289839218660');" style=""> 830      * Update an item to the database in a specified container.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 831      */                                                                                                  </span>
<span class="459681340980680258" onmouseenter="enter('459681340980680258');" onmouseout="out('459681340980680258');" style=""> 832     static void updateItemInDatabase(Context context, final ItemInfo item) {                             </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 833         final ContentValues values = new ContentValues();                                                </span>
<span class="5176730964422589638" onmouseenter="enter('5176730964422589638');" onmouseout="out('5176730964422589638');" style=""> 834         item.onAddToDatabase(values);                                                                    </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 835         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span class="-2640379359931023102" onmouseenter="enter('-2640379359931023102');" onmouseout="out('-2640379359931023102');" style=""> 836         updateItemInDatabaseHelper(context, values, item, &quot;updateItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 837     }                                                                                                    </span>
<span  style=""> 838                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 839     /**                                                                                                  </span>
<span class="-4717227181780328790" onmouseenter="enter('-4717227181780328790');" onmouseout="out('-4717227181780328790');" style=""> 840      * Returns true if the shortcuts already exists in the database.                                     </span>
<span class="-3331700288971341517" onmouseenter="enter('-3331700288971341517');" onmouseout="out('-3331700288971341517');" style=""> 841      * we identify a shortcut by its title and intent.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 842      */                                                                                                  </span>
<span class="-6388905982866518653" onmouseenter="enter('-6388905982866518653');" onmouseout="out('-6388905982866518653');" style=""> 843     static boolean shortcutExists(Context context, String title, Intent intent) {                        </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 844         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="2591581294492270218" onmouseenter="enter('2591581294492270218');" onmouseout="out('2591581294492270218');" style=""> 845         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI,                                      </span>
<span class="-3970764614423238561" onmouseenter="enter('-3970764614423238561');" onmouseout="out('-3970764614423238561');" style=""> 846             new String[] { &quot;title&quot;, &quot;intent&quot; }, &quot;title=? and intent=?&quot;,                                  </span>
<span class="-8386684562645849198" onmouseenter="enter('-8386684562645849198');" onmouseout="out('-8386684562645849198');" style=""> 847             new String[] { title, intent.toUri(0) }, null);                                              </span>
<span class="8422097272984539190" onmouseenter="enter('8422097272984539190');" onmouseout="out('8422097272984539190');" style=""> 848         boolean result = false;                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 849         try {                                                                                            </span>
<span class="-4458839479528090820" onmouseenter="enter('-4458839479528090820');" onmouseout="out('-4458839479528090820');" style=""> 850             result = c.moveToFirst();                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 851         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 852             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 853         }                                                                                                </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 854         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 855     }                                                                                                    </span>
<span  style=""> 856                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 857     /**                                                                                                  </span>
<span class="9160518604603288134" onmouseenter="enter('9160518604603288134');" onmouseout="out('9160518604603288134');" style=""> 858      * Returns an ItemInfo array containing all the items in the LauncherModel.                          </span>
<span class="-7541433293033039987" onmouseenter="enter('-7541433293033039987');" onmouseout="out('-7541433293033039987');" style=""> 859      * The ItemInfo.id is not set through this function.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 860      */                                                                                                  </span>
<span class="2306578838706816090" onmouseenter="enter('2306578838706816090');" onmouseout="out('2306578838706816090');" style=""> 861     static ArrayList&lt;ItemInfo&gt; getItemsInLocalCoordinates(Context context) {                             </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style=""> 862         ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                           </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 863         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="7862348045873845742" onmouseenter="enter('7862348045873845742');" onmouseout="out('7862348045873845742');" style=""> 864         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[] {                       </span>
<span class="-9030044796723696333" onmouseenter="enter('-9030044796723696333');" onmouseout="out('-9030044796723696333');" style=""> 865                 LauncherSettings.Favorites.ITEM_TYPE, LauncherSettings.Favorites.CONTAINER,              </span>
<span class="-6654705994324280685" onmouseenter="enter('-6654705994324280685');" onmouseout="out('-6654705994324280685');" style=""><abbr title=" 866                 LauncherSettings.Favorites.SCREEN, LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CELLY,"> 866                 LauncherSettings.Favorites.SCREEN, LauncherSettings.Favorites.CELLX, LauncherSettings.Fav</abbr></span>
<span class="-8466015049460674478" onmouseenter="enter('-8466015049460674478');" onmouseout="out('-8466015049460674478');" style=""> 867                 LauncherSettings.Favorites.SPANX, LauncherSettings.Favorites.SPANY }, null, null, null); </span>
<span  style=""> 868                                                                                                          </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 869         final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);         </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 870         final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);        </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 871         final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);              </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 872         final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 873         final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                </span>
<span class="-802963670489258937" onmouseenter="enter('-802963670489258937');" onmouseout="out('-802963670489258937');" style=""> 874         final int spanXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANX);                </span>
<span class="6925125615824777875" onmouseenter="enter('6925125615824777875');" onmouseout="out('6925125615824777875');" style=""> 875         final int spanYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANY);                </span>
<span  style=""> 876                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 877         try {                                                                                            </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 878             while (c.moveToNext()) {                                                                     </span>
<span class="-4116264954015845780" onmouseenter="enter('-4116264954015845780');" onmouseout="out('-4116264954015845780');" style=""> 879                 ItemInfo item = new ItemInfo();                                                          </span>
<span class="3361172632220058931" onmouseenter="enter('3361172632220058931');" onmouseout="out('3361172632220058931');" style=""> 880                 item.cellX = c.getInt(cellXIndex);                                                       </span>
<span class="-3320299110004327663" onmouseenter="enter('-3320299110004327663');" onmouseout="out('-3320299110004327663');" style=""> 881                 item.cellY = c.getInt(cellYIndex);                                                       </span>
<span class="-3998513073647472943" onmouseenter="enter('-3998513073647472943');" onmouseout="out('-3998513073647472943');" style=""> 882                 item.spanX = Math.max(1, c.getInt(spanXIndex));                                          </span>
<span class="584206030510259358" onmouseenter="enter('584206030510259358');" onmouseout="out('584206030510259358');" style=""> 883                 item.spanY = Math.max(1, c.getInt(spanYIndex));                                          </span>
<span class="7755197868117966754" onmouseenter="enter('7755197868117966754');" onmouseout="out('7755197868117966754');" style=""> 884                 item.container = c.getInt(containerIndex);                                               </span>
<span class="2520990540941204818" onmouseenter="enter('2520990540941204818');" onmouseout="out('2520990540941204818');" style=""> 885                 item.itemType = c.getInt(itemTypeIndex);                                                 </span>
<span class="-2693827439071435274" onmouseenter="enter('-2693827439071435274');" onmouseout="out('-2693827439071435274');" style=""> 886                 item.screenId = c.getInt(screenIndex);                                                   </span>
<span  style=""> 887                                                                                                          </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style=""> 888                 items.add(item);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 889             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 890         } catch (Exception e) {                                                                          </span>
<span class="4333495016815960454" onmouseenter="enter('4333495016815960454');" onmouseout="out('4333495016815960454');" style=""> 891             items.clear();                                                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 892         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 893             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 894         }                                                                                                </span>
<span  style=""> 895                                                                                                          </span>
<span class="4279419839789234429" onmouseenter="enter('4279419839789234429');" onmouseout="out('4279419839789234429');" style=""> 896         return items;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 897     }                                                                                                    </span>
<span  style=""> 898                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 899     /**                                                                                                  </span>
<span class="-8400747742808132543" onmouseenter="enter('-8400747742808132543');" onmouseout="out('-8400747742808132543');" style=""> 900      * Find a folder in the db, creating the FolderInfo if necessary, and adding it to folderList.       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 901      */                                                                                                  </span>
<span class="5907754851540050864" onmouseenter="enter('5907754851540050864');" onmouseout="out('5907754851540050864');" style=""> 902     FolderInfo getFolderById(Context context, HashMap&lt;Long,FolderInfo&gt; folderList, long id) {            </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 903         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-4509017961772931337" onmouseenter="enter('-4509017961772931337');" onmouseout="out('-4509017961772931337');" style=""> 904         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, null,                                </span>
<span class="-4259949945589236527" onmouseenter="enter('-4259949945589236527');" onmouseout="out('-4259949945589236527');" style=""> 905                 &quot;_id=? and (itemType=? or itemType=?)&quot;,                                                  </span>
<span class="6839251627547830421" onmouseenter="enter('6839251627547830421');" onmouseout="out('6839251627547830421');" style=""> 906                 new String[] { String.valueOf(id),                                                       </span>
<span class="-7910525153585982304" onmouseenter="enter('-7910525153585982304');" onmouseout="out('-7910525153585982304');" style=""> 907                         String.valueOf(LauncherSettings.Favorites.ITEM_TYPE_FOLDER)}, null);             </span>
<span  style=""> 908                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 909         try {                                                                                            </span>
<span class="-6302304746326789409" onmouseenter="enter('-6302304746326789409');" onmouseout="out('-6302304746326789409');" style=""> 910             if (c.moveToFirst()) {                                                                       </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 911                 final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE); </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style=""> 912                 final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);        </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 913                 final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);</span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 914                 final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);      </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 915                 final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);        </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 916                 final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);        </span>
<span  style=""> 917                                                                                                          </span>
<span class="7004752326616919357" onmouseenter="enter('7004752326616919357');" onmouseout="out('7004752326616919357');" style=""> 918                 FolderInfo folderInfo = null;                                                            </span>
<span class="2938602155061951308" onmouseenter="enter('2938602155061951308');" onmouseout="out('2938602155061951308');" style=""> 919                 switch (c.getInt(itemTypeIndex)) {                                                       </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 920                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                    </span>
<span class="8497686210844969517" onmouseenter="enter('8497686210844969517');" onmouseout="out('8497686210844969517');" style=""> 921                         folderInfo = findOrMakeFolder(folderList, id);                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 922                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 923                 }                                                                                        </span>
<span  style=""> 924                                                                                                          </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style=""> 925                 folderInfo.title = c.getString(titleIndex);                                              </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style=""> 926                 folderInfo.id = id;                                                                      </span>
<span class="-3770649288661071555" onmouseenter="enter('-3770649288661071555');" onmouseout="out('-3770649288661071555');" style=""> 927                 folderInfo.container = c.getInt(containerIndex);                                         </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style=""> 928                 folderInfo.screenId = c.getInt(screenIndex);                                             </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style=""> 929                 folderInfo.cellX = c.getInt(cellXIndex);                                                 </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style=""> 930                 folderInfo.cellY = c.getInt(cellYIndex);                                                 </span>
<span  style=""> 931                                                                                                          </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style=""> 932                 return folderInfo;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 933             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 934         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 935             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 936         }                                                                                                </span>
<span  style=""> 937                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 938         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 939     }                                                                                                    </span>
<span  style=""> 940                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 941     /**                                                                                                  </span>
<span class="-4485876183654335246" onmouseenter="enter('-4485876183654335246');" onmouseout="out('-4485876183654335246');" style=""> 942      * Add an item to the database in a specified container. Sets the container, screen, cellX and       </span>
<span class="5014383815638293688" onmouseenter="enter('5014383815638293688');" onmouseout="out('5014383815638293688');" style=""> 943      * cellY fields of the item. Also assigns an ID to the item.                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 944      */                                                                                                  </span>
<span class="7688823130205554121" onmouseenter="enter('7688823130205554121');" onmouseout="out('7688823130205554121');" style=""> 945     static void addItemToDatabase(Context context, final ItemInfo item, final long container,            </span>
<span class="-5047869274291255898" onmouseenter="enter('-5047869274291255898');" onmouseout="out('-5047869274291255898');" style=""> 946             final long screenId, final int cellX, final int cellY, final boolean notify) {               </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 947         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 948         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 949         item.cellY = cellY;                                                                              </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 950         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 951         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 952         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 953                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 954             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 955         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 956             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 957         }                                                                                                </span>
<span  style=""> 958                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 959         final ContentValues values = new ContentValues();                                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 960         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="5176730964422589638" onmouseenter="enter('5176730964422589638');" onmouseout="out('5176730964422589638');" style=""> 961         item.onAddToDatabase(values);                                                                    </span>
<span  style=""> 962                                                                                                          </span>
<span class="-1899316649519192705" onmouseenter="enter('-1899316649519192705');" onmouseout="out('-1899316649519192705');" style=""> 963         item.id = LauncherAppState.getLauncherProvider().generateNewItemId();                            </span>
<span class="-154850703316330893" onmouseenter="enter('-154850703316330893');" onmouseout="out('-154850703316330893');" style=""> 964         values.put(LauncherSettings.Favorites._ID, item.id);                                             </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 965         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span  style=""> 966                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 967         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 968             public void run() {                                                                          </span>
<span class="-9004016634042314269" onmouseenter="enter('-9004016634042314269');" onmouseout="out('-9004016634042314269');" style=""> 969                 cr.insert(notify ? LauncherSettings.Favorites.CONTENT_URI :                              </span>
<span class="-612779074530505821" onmouseenter="enter('-612779074530505821');" onmouseout="out('-612779074530505821');" style=""> 970                         LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, values);                 </span>
<span  style=""> 971                                                                                                          </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 972                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 973                 synchronized (sBgLock) {                                                                 </span>
<span class="7042391537046657417" onmouseenter="enter('7042391537046657417');" onmouseout="out('7042391537046657417');" style=""> 974                     checkItemInfoLocked(item.id, item, null);                                            </span>
<span class="-1016681302040734126" onmouseenter="enter('-1016681302040734126');" onmouseout="out('-1016681302040734126');" style=""> 975                     sBgItemsIdMap.put(item.id, item);                                                    </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style=""> 976                     switch (item.itemType) {                                                             </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 977                         case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                </span>
<span class="7914552456706159325" onmouseenter="enter('7914552456706159325');" onmouseout="out('7914552456706159325');" style=""> 978                             sBgFolders.put(item.id, (FolderInfo) item);                                  </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style=""> 979                             // Fall through                                                              </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style=""> 980                         case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                           </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style=""> 981                         case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                              </span>
<span class="-1329080713393586591" onmouseenter="enter('-1329080713393586591');" onmouseout="out('-1329080713393586591');" style=""> 982                             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||        </span>
<span class="-8703099407725800834" onmouseenter="enter('-8703099407725800834');" onmouseout="out('-8703099407725800834');" style=""> 983                                     item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {    </span>
<span class="-8146326631995897363" onmouseenter="enter('-8146326631995897363');" onmouseout="out('-8146326631995897363');" style=""> 984                                 sBgWorkspaceItems.add(item);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 985                             } else {                                                                     </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 986                                 if (!sBgFolders.containsKey(item.container)) {                           </span>
<span class="-54073947043614801" onmouseenter="enter('-54073947043614801');" onmouseout="out('-54073947043614801');" style=""> 987                                     // Adding an item to a folder that doesn&#x27;t exist.                    </span>
<span class="-8178862485732913035" onmouseenter="enter('-8178862485732913035');" onmouseout="out('-8178862485732913035');" style=""> 988                                     String msg = &quot;adding item: &quot; + item + &quot; to a folder that &quot; +         </span>
<span class="8069959129571777545" onmouseenter="enter('8069959129571777545');" onmouseout="out('8069959129571777545');" style=""> 989                                             &quot; doesn&#x27;t exist&quot;;                                            </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 990                                     Log.e(TAG, msg);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 991                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 992                             }                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 993                             break;                                                                       </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style=""> 994                         case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                             </span>
<span class="-7161913213134623334" onmouseenter="enter('-7161913213134623334');" onmouseout="out('-7161913213134623334');" style=""> 995                             sBgAppWidgets.add((LauncherAppWidgetInfo) item);                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 996                             break;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 997                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 998                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 999             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1000         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1001         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1002     }                                                                                                    </span>
<span  style="">1003                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1004     /**                                                                                                  </span>
<span class="7476806510728309142" onmouseenter="enter('7476806510728309142');" onmouseout="out('7476806510728309142');" style="">1005      * Creates a new unique child id, for a given cell span across all layouts.                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1006      */                                                                                                  </span>
<span class="6041396781761029986" onmouseenter="enter('6041396781761029986');" onmouseout="out('6041396781761029986');" style="">1007     static int getCellLayoutChildId(                                                                     </span>
<span class="-7149445532835734900" onmouseenter="enter('-7149445532835734900');" onmouseout="out('-7149445532835734900');" style="">1008             long container, long screen, int localCellX, int localCellY, int spanX, int spanY) {         </span>
<span class="513362613558309253" onmouseenter="enter('513362613558309253');" onmouseout="out('513362613558309253');" style="">1009         return (((int) container &amp; 0xFF) &lt;&lt; 24)                                                          </span>
<span class="-7388843269158644047" onmouseenter="enter('-7388843269158644047');" onmouseout="out('-7388843269158644047');" style="">1010                 | ((int) screen &amp; 0xFF) &lt;&lt; 16 | (localCellX &amp; 0xFF) &lt;&lt; 8 | (localCellY &amp; 0xFF);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1011     }                                                                                                    </span>
<span  style="">1012                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1013     /**                                                                                                  </span>
<span class="-1037279788887787658" onmouseenter="enter('-1037279788887787658');" onmouseout="out('-1037279788887787658');" style="">1014      * Removes the specified item from the database                                                      </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1015      * @param context                                                                                    </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1016      * @param item                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1017      */                                                                                                  </span>
<span class="6689175154077652032" onmouseenter="enter('6689175154077652032');" onmouseout="out('6689175154077652032');" style="">1018     static void deleteItemFromDatabase(Context context, final ItemInfo item) {                           </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1019         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-8662622705024005942" onmouseenter="enter('-8662622705024005942');" onmouseout="out('-8662622705024005942');" style="">1020         final Uri uriToDelete = LauncherSettings.Favorites.getContentUri(item.id, false);                </span>
<span  style="">1021                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1022         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1023             public void run() {                                                                          </span>
<span class="5853003155754312383" onmouseenter="enter('5853003155754312383');" onmouseout="out('5853003155754312383');" style="">1024                 cr.delete(uriToDelete, null, null);                                                      </span>
<span  style="">1025                                                                                                          </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1026                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1027                 synchronized (sBgLock) {                                                                 </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="">1028                     switch (item.itemType) {                                                             </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1029                         case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                </span>
<span class="-7362435803416400268" onmouseenter="enter('-7362435803416400268');" onmouseout="out('-7362435803416400268');" style="">1030                             sBgFolders.remove(item.id);                                                  </span>
<span class="-7253547809349647013" onmouseenter="enter('-7253547809349647013');" onmouseout="out('-7253547809349647013');" style="">1031                             for (ItemInfo info: sBgItemsIdMap.values()) {                                </span>
<span class="1662466266129331257" onmouseenter="enter('1662466266129331257');" onmouseout="out('1662466266129331257');" style="">1032                                 if (info.container == item.id) {                                         </span>
<span class="-1893702506185878584" onmouseenter="enter('-1893702506185878584');" onmouseout="out('-1893702506185878584');" style="">1033                                     // We are deleting a folder which still contains items that          </span>
<span class="-7314190253548819229" onmouseenter="enter('-7314190253548819229');" onmouseout="out('-7314190253548819229');" style="">1034                                     // think they are contained by that folder.                          </span>
<span class="-2989844263372177086" onmouseenter="enter('-2989844263372177086');" onmouseout="out('-2989844263372177086');" style="">1035                                     String msg = &quot;deleting a folder (&quot; + item + &quot;) which still &quot; +       </span>
<span class="-6063695738801794388" onmouseenter="enter('-6063695738801794388');" onmouseout="out('-6063695738801794388');" style="">1036                                             &quot;contains items (&quot; + info + &quot;)&quot;;                             </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="">1037                                     Log.e(TAG, msg);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1038                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1039                             }                                                                            </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1040                             sBgWorkspaceItems.remove(item);                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1041                             break;                                                                       </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1042                         case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                           </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1043                         case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                              </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1044                             sBgWorkspaceItems.remove(item);                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1045                             break;                                                                       </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">1046                         case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                             </span>
<span class="5035692159539723007" onmouseenter="enter('5035692159539723007');" onmouseout="out('5035692159539723007');" style="">1047                             sBgAppWidgets.remove((LauncherAppWidgetInfo) item);                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1048                             break;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1049                     }                                                                                    </span>
<span class="414734963826797427" onmouseenter="enter('414734963826797427');" onmouseout="out('414734963826797427');" style="">1050                     sBgItemsIdMap.remove(item.id);                                                       </span>
<span class="4282085416776692307" onmouseenter="enter('4282085416776692307');" onmouseout="out('4282085416776692307');" style="">1051                     sBgDbIconCache.remove(item);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1052                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1053             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1054         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1055         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1056     }                                                                                                    </span>
<span  style="">1057                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1058     /**                                                                                                  </span>
<span class="-7001721478473539684" onmouseenter="enter('-7001721478473539684');" onmouseout="out('-7001721478473539684');" style="">1059      * Update the order of the workspace screens in the database. The array list contains                </span>
<span class="-8575814248656839337" onmouseenter="enter('-8575814248656839337');" onmouseout="out('-8575814248656839337');" style="">1060      * a list of screen ids in the order that they should appear.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1061      */                                                                                                  </span>
<span class="8428215756529453230" onmouseenter="enter('8428215756529453230');" onmouseout="out('8428215756529453230');" style="">1062     void updateWorkspaceScreenOrder(Context context, final ArrayList&lt;Long&gt; screens) {                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1063         // Log to disk                                                                                   </span>
<span class="2597844157040813179" onmouseenter="enter('2597844157040813179');" onmouseout="out('2597844157040813179');" style="">1064         Launcher.addDumpLog(TAG, &quot;11683562 - updateWorkspaceScreenOrder()&quot;, true);                       </span>
<span class="-6712172470308057727" onmouseenter="enter('-6712172470308057727');" onmouseout="out('-6712172470308057727');" style="">1065         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; + TextUtils.join(&quot;, &quot;, screens), true);        </span>
<span  style="">1066                                                                                                          </span>
<span class="468782492563171594" onmouseenter="enter('468782492563171594');" onmouseout="out('468782492563171594');" style="">1067         final ArrayList&lt;Long&gt; screensCopy = new ArrayList&lt;Long&gt;(screens);                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1068         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="543518355232884435" onmouseenter="enter('543518355232884435');" onmouseout="out('543518355232884435');" style="">1069         final Uri uri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                                   </span>
<span  style="">1070                                                                                                          </span>
<span class="4254834681163937802" onmouseenter="enter('4254834681163937802');" onmouseout="out('4254834681163937802');" style="">1071         // Remove any negative screen ids -- these aren&#x27;t persisted                                      </span>
<span class="2152325044441302341" onmouseenter="enter('2152325044441302341');" onmouseout="out('2152325044441302341');" style="">1072         Iterator&lt;Long&gt; iter = screensCopy.iterator();                                                    </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">1073         while (iter.hasNext()) {                                                                         </span>
<span class="-927390677227055343" onmouseenter="enter('-927390677227055343');" onmouseout="out('-927390677227055343');" style="">1074             long id = iter.next();                                                                       </span>
<span class="-1178150068928662840" onmouseenter="enter('-1178150068928662840');" onmouseout="out('-1178150068928662840');" style="">1075             if (id &lt; 0) {                                                                                </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">1076                 iter.remove();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1077             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1078         }                                                                                                </span>
<span  style="">1079                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1080         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1081             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1082             public void run() {                                                                          </span>
<span class="-3030717489353459898" onmouseenter="enter('-3030717489353459898');" onmouseout="out('-3030717489353459898');" style="">1083                 ArrayList&lt;ContentProviderOperation&gt; ops = new ArrayList&lt;ContentProviderOperation&gt;();     </span>
<span class="-6225505341206658348" onmouseenter="enter('-6225505341206658348');" onmouseout="out('-6225505341206658348');" style="">1084                 // Clear the table                                                                       </span>
<span class="-429946239562688464" onmouseenter="enter('-429946239562688464');" onmouseout="out('-429946239562688464');" style="">1085                 ops.add(ContentProviderOperation.newDelete(uri).build());                                </span>
<span class="-2619892188160552062" onmouseenter="enter('-2619892188160552062');" onmouseout="out('-2619892188160552062');" style="">1086                 int count = screensCopy.size();                                                          </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style="">1087                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="4061202061343128850" onmouseenter="enter('4061202061343128850');" onmouseout="out('4061202061343128850');" style="">1088                     ContentValues v = new ContentValues();                                               </span>
<span class="-1711185173807510695" onmouseenter="enter('-1711185173807510695');" onmouseout="out('-1711185173807510695');" style="">1089                     long screenId = screensCopy.get(i);                                                  </span>
<span class="-5112420615000020353" onmouseenter="enter('-5112420615000020353');" onmouseout="out('-5112420615000020353');" style="">1090                     v.put(LauncherSettings.WorkspaceScreens._ID, screenId);                              </span>
<span class="4685968830084375092" onmouseenter="enter('4685968830084375092');" onmouseout="out('4685968830084375092');" style="">1091                     v.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, i);                             </span>
<span class="2820655584610684032" onmouseenter="enter('2820655584610684032');" onmouseout="out('2820655584610684032');" style="">1092                     ops.add(ContentProviderOperation.newInsert(uri).withValues(v).build());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1093                 }                                                                                        </span>
<span  style="">1094                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1095                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style="">1096                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style="">1097                 } catch (Exception ex) {                                                                 </span>
<span class="-9047539165825913138" onmouseenter="enter('-9047539165825913138');" onmouseout="out('-9047539165825913138');" style="">1098                     throw new RuntimeException(ex);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1099                 }                                                                                        </span>
<span  style="">1100                                                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1101                 synchronized (sBgLock) {                                                                 </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1102                     sBgWorkspaceScreens.clear();                                                         </span>
<span class="-2640283764679238318" onmouseenter="enter('-2640283764679238318');" onmouseout="out('-2640283764679238318');" style="">1103                     sBgWorkspaceScreens.addAll(screensCopy);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1104                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1105             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1106         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1107         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1108     }                                                                                                    </span>
<span  style="">1109                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1110     /**                                                                                                  </span>
<span class="-6789515923938750727" onmouseenter="enter('-6789515923938750727');" onmouseout="out('-6789515923938750727');" style="">1111      * Remove the contents of the specified folder from the database                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1112      */                                                                                                  </span>
<span class="686021856205334545" onmouseenter="enter('686021856205334545');" onmouseout="out('686021856205334545');" style="">1113     static void deleteFolderContentsFromDatabase(Context context, final FolderInfo info) {               </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1114         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style="">1115                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1116         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1117             public void run() {                                                                          </span>
<span class="-8793927488200240422" onmouseenter="enter('-8793927488200240422');" onmouseout="out('-8793927488200240422');" style="">1118                 cr.delete(LauncherSettings.Favorites.getContentUri(info.id, false), null, null);         </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1119                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1120                 synchronized (sBgLock) {                                                                 </span>
<span class="-4714602177116521128" onmouseenter="enter('-4714602177116521128');" onmouseout="out('-4714602177116521128');" style="">1121                     sBgItemsIdMap.remove(info.id);                                                       </span>
<span class="-3189879738488687685" onmouseenter="enter('-3189879738488687685');" onmouseout="out('-3189879738488687685');" style="">1122                     sBgFolders.remove(info.id);                                                          </span>
<span class="5895316081502731153" onmouseenter="enter('5895316081502731153');" onmouseout="out('5895316081502731153');" style="">1123                     sBgDbIconCache.remove(info);                                                         </span>
<span class="-6074846806723656328" onmouseenter="enter('-6074846806723656328');" onmouseout="out('-6074846806723656328');" style="">1124                     sBgWorkspaceItems.remove(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125                 }                                                                                        </span>
<span  style="">1126                                                                                                          </span>
<span class="-1937171462652594970" onmouseenter="enter('-1937171462652594970');" onmouseout="out('-1937171462652594970');" style="">1127                 cr.delete(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION,                        </span>
<span class="9128354258649337519" onmouseenter="enter('9128354258649337519');" onmouseout="out('9128354258649337519');" style="">1128                         LauncherSettings.Favorites.CONTAINER + &quot;=&quot; + info.id, null);                     </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1129                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1130                 synchronized (sBgLock) {                                                                 </span>
<span class="7541292827914562010" onmouseenter="enter('7541292827914562010');" onmouseout="out('7541292827914562010');" style="">1131                     for (ItemInfo childInfo : info.contents) {                                           </span>
<span class="-2237983399964272530" onmouseenter="enter('-2237983399964272530');" onmouseout="out('-2237983399964272530');" style="">1132                         sBgItemsIdMap.remove(childInfo.id);                                              </span>
<span class="7662249246062224172" onmouseenter="enter('7662249246062224172');" onmouseout="out('7662249246062224172');" style="">1133                         sBgDbIconCache.remove(childInfo);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1134                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1135                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1136             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1137         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1138         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1139     }                                                                                                    </span>
<span  style="">1140                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1141     /**                                                                                                  </span>
<span class="8050600461131576642" onmouseenter="enter('8050600461131576642');" onmouseout="out('8050600461131576642');" style="">1142      * Set this as the current Launcher activity object for the loader.                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1143      */                                                                                                  </span>
<span class="8980870975348708436" onmouseenter="enter('8980870975348708436');" onmouseout="out('8980870975348708436');" style="">1144     public void initialize(Callbacks callbacks) {                                                        </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1145         synchronized (mLock) {                                                                           </span>
<span class="-641895236165954122" onmouseenter="enter('-641895236165954122');" onmouseout="out('-641895236165954122');" style="">1146             mCallbacks = new WeakReference&lt;Callbacks&gt;(callbacks);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1147         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1148     }                                                                                                    </span>
<span  style="">1149                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1150     /**                                                                                                  </span>
<span class="2369304932228112448" onmouseenter="enter('2369304932228112448');" onmouseout="out('2369304932228112448');" style="">1151      * Call from the handler for ACTION_PACKAGE_ADDED, ACTION_PACKAGE_REMOVED and                        </span>
<span class="-8845819122914862467" onmouseenter="enter('-8845819122914862467');" onmouseout="out('-8845819122914862467');" style="">1152      * ACTION_PACKAGE_CHANGED.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1153      */                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1154     @Override                                                                                            </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">1155     public void onReceive(Context context, Intent intent) {                                              </span>
<span class="-4567737324281428641" onmouseenter="enter('-4567737324281428641');" onmouseout="out('-4567737324281428641');" style="">1156         if (DEBUG_LOADERS) Log.d(TAG, &quot;onReceive intent=&quot; + intent);                                     </span>
<span  style="">1157                                                                                                          </span>
<span class="-4990819661547905021" onmouseenter="enter('-4990819661547905021');" onmouseout="out('-4990819661547905021');" style="">1158         final String action = intent.getAction();                                                        </span>
<span  style="">1159                                                                                                          </span>
<span class="3248856724191643889" onmouseenter="enter('3248856724191643889');" onmouseout="out('3248856724191643889');" style="">1160         if (Intent.ACTION_PACKAGE_CHANGED.equals(action)                                                 </span>
<span class="540624655569635000" onmouseenter="enter('540624655569635000');" onmouseout="out('540624655569635000');" style="">1161                 || Intent.ACTION_PACKAGE_REMOVED.equals(action)                                          </span>
<span class="-2497532605624583235" onmouseenter="enter('-2497532605624583235');" onmouseout="out('-2497532605624583235');" style="">1162                 || Intent.ACTION_PACKAGE_ADDED.equals(action)) {                                         </span>
<span class="3043595781762965417" onmouseenter="enter('3043595781762965417');" onmouseout="out('3043595781762965417');" style="">1163             final String packageName = intent.getData().getSchemeSpecificPart();                         </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="">1164             final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);             </span>
<span  style="">1165                                                                                                          </span>
<span class="8732681156431716097" onmouseenter="enter('8732681156431716097');" onmouseout="out('8732681156431716097');" style="">1166             int op = PackageUpdatedTask.OP_NONE;                                                         </span>
<span  style="">1167                                                                                                          </span>
<span class="226916516395269330" onmouseenter="enter('226916516395269330');" onmouseout="out('226916516395269330');" style="">1168             if (packageName == null || packageName.length() == 0) {                                      </span>
<span class="6497011882963257234" onmouseenter="enter('6497011882963257234');" onmouseout="out('6497011882963257234');" style="">1169                 // they sent us a bad intent                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1170                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1171             }                                                                                            </span>
<span  style="">1172                                                                                                          </span>
<span class="-8410954317975616940" onmouseenter="enter('-8410954317975616940');" onmouseout="out('-8410954317975616940');" style="">1173             if (Intent.ACTION_PACKAGE_CHANGED.equals(action)) {                                          </span>
<span class="-6985466686908158774" onmouseenter="enter('-6985466686908158774');" onmouseout="out('-6985466686908158774');" style="">1174                 op = PackageUpdatedTask.OP_UPDATE;                                                       </span>
<span class="-6129441538111285553" onmouseenter="enter('-6129441538111285553');" onmouseout="out('-6129441538111285553');" style="">1175             } else if (Intent.ACTION_PACKAGE_REMOVED.equals(action)) {                                   </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1176                 if (!replacing) {                                                                        </span>
<span class="-6586396537735596399" onmouseenter="enter('-6586396537735596399');" onmouseout="out('-6586396537735596399');" style="">1177                     op = PackageUpdatedTask.OP_REMOVE;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1178                 }                                                                                        </span>
<span class="596194884408948956" onmouseenter="enter('596194884408948956');" onmouseout="out('596194884408948956');" style="">1179                 // else, we are replacing the package, so a PACKAGE_ADDED will be sent                   </span>
<span class="8848734407792838356" onmouseenter="enter('8848734407792838356');" onmouseout="out('8848734407792838356');" style="">1180                 // later, we will update the package at this time                                        </span>
<span class="1584650074780198559" onmouseenter="enter('1584650074780198559');" onmouseout="out('1584650074780198559');" style="">1181             } else if (Intent.ACTION_PACKAGE_ADDED.equals(action)) {                                     </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1182                 if (!replacing) {                                                                        </span>
<span class="-8510632568607563672" onmouseenter="enter('-8510632568607563672');" onmouseout="out('-8510632568607563672');" style="">1183                     op = PackageUpdatedTask.OP_ADD;                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1184                 } else {                                                                                 </span>
<span class="-6985466686908158774" onmouseenter="enter('-6985466686908158774');" onmouseout="out('-6985466686908158774');" style="">1185                     op = PackageUpdatedTask.OP_UPDATE;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1186                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1187             }                                                                                            </span>
<span  style="">1188                                                                                                          </span>
<span class="4401752612772195970" onmouseenter="enter('4401752612772195970');" onmouseout="out('4401752612772195970');" style="">1189             if (op != PackageUpdatedTask.OP_NONE) {                                                      </span>
<span class="-3763042555791809504" onmouseenter="enter('-3763042555791809504');" onmouseout="out('-3763042555791809504');" style="">1190                 enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName }));         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1191             }                                                                                            </span>
<span  style="">1192                                                                                                          </span>
<span class="1438616399789326195" onmouseenter="enter('1438616399789326195');" onmouseout="out('1438616399789326195');" style="">1193         } else if (Intent.ACTION_EXTERNAL_APPLICATIONS_AVAILABLE.equals(action)) {                       </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="">1194             final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);             </span>
<span class="-9048118809725232135" onmouseenter="enter('-9048118809725232135');" onmouseout="out('-9048118809725232135');" style="">1195             String[] packages = intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);           </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1196             if (!replacing) {                                                                            </span>
<span class="8106264297457531305" onmouseenter="enter('8106264297457531305');" onmouseout="out('8106264297457531305');" style="">1197                 enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_ADD, packages));      </span>
<span class="796476435191708892" onmouseenter="enter('796476435191708892');" onmouseout="out('796476435191708892');" style="">1198                 if (mAppsCanBeOnRemoveableStorage) {                                                     </span>
<span class="-460878835460866964" onmouseenter="enter('-460878835460866964');" onmouseout="out('-460878835460866964');" style="">1199                     // Only rebind if we support removable storage.  It catches the case where           </span>
<span class="-4167475923329833908" onmouseenter="enter('-4167475923329833908');" onmouseout="out('-4167475923329833908');" style="">1200                     // apps on the external sd card need to be reloaded                                  </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1201                     startLoaderFromBackground();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1202                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1203             } else {                                                                                     </span>
<span class="-1596872044981704971" onmouseenter="enter('-1596872044981704971');" onmouseout="out('-1596872044981704971');" style="">1204                 // If we are replacing then just update the packages in the list                         </span>
<span class="5890557645886373945" onmouseenter="enter('5890557645886373945');" onmouseout="out('5890557645886373945');" style="">1205                 enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE,               </span>
<span class="-5628778258633473048" onmouseenter="enter('-5628778258633473048');" onmouseout="out('-5628778258633473048');" style="">1206                         packages));                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1207             }                                                                                            </span>
<span class="7043932659231673518" onmouseenter="enter('7043932659231673518');" onmouseout="out('7043932659231673518');" style="">1208         } else if (Intent.ACTION_EXTERNAL_APPLICATIONS_UNAVAILABLE.equals(action)) {                     </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="">1209             final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);             </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1210             if (!replacing) {                                                                            </span>
<span class="-9048118809725232135" onmouseenter="enter('-9048118809725232135');" onmouseout="out('-9048118809725232135');" style="">1211                 String[] packages = intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);       </span>
<span class="-7496430100396306440" onmouseenter="enter('-7496430100396306440');" onmouseout="out('-7496430100396306440');" style="">1212                 enqueuePackageUpdated(new PackageUpdatedTask(                                            </span>
<span class="296372570783844091" onmouseenter="enter('296372570783844091');" onmouseout="out('296372570783844091');" style="">1213                             PackageUpdatedTask.OP_UNAVAILABLE, packages));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1214             }                                                                                            </span>
<span class="1575594556961394504" onmouseenter="enter('1575594556961394504');" onmouseout="out('1575594556961394504');" style="">1215             // else, we are replacing the packages, so ignore this event and wait for                    </span>
<span class="-3059095335031402395" onmouseenter="enter('-3059095335031402395');" onmouseout="out('-3059095335031402395');" style="">1216             // EXTERNAL_APPLICATIONS_AVAILABLE to update the packages at that time                       </span>
<span class="-2062230633944308548" onmouseenter="enter('-2062230633944308548');" onmouseout="out('-2062230633944308548');" style="">1217         } else if (Intent.ACTION_LOCALE_CHANGED.equals(action)) {                                        </span>
<span class="-6283043286710203920" onmouseenter="enter('-6283043286710203920');" onmouseout="out('-6283043286710203920');" style="">1218             // If we have changed locale we need to clear out the labels in all apps/workspace.          </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1219             forceReload();                                                                               </span>
<span class="4348516547288755383" onmouseenter="enter('4348516547288755383');" onmouseout="out('4348516547288755383');" style="">1220         } else if (Intent.ACTION_CONFIGURATION_CHANGED.equals(action)) {                                 </span>
<span class="6164116257081582847" onmouseenter="enter('6164116257081582847');" onmouseout="out('6164116257081582847');" style="">1221              // Check if configuration change was an mcc/mnc change which would affect app resources     </span>
<span class="-1334400353911346867" onmouseenter="enter('-1334400353911346867');" onmouseout="out('-1334400353911346867');" style="">1222              // and we would need to clear out the labels in all apps/workspace. Same handling as        </span>
<span class="-5650891854452971889" onmouseenter="enter('-5650891854452971889');" onmouseout="out('-5650891854452971889');" style="">1223              // above for ACTION_LOCALE_CHANGED                                                          </span>
<span class="5411318685984925146" onmouseenter="enter('5411318685984925146');" onmouseout="out('5411318685984925146');" style="">1224              Configuration currentConfig = context.getResources().getConfiguration();                    </span>
<span class="-5822569774152959183" onmouseenter="enter('-5822569774152959183');" onmouseout="out('-5822569774152959183');" style="">1225              if (mPreviousConfigMcc != currentConfig.mcc) {                                              </span>
<span class="84255665079130844" onmouseenter="enter('84255665079130844');" onmouseout="out('84255665079130844');" style="">1226                    Log.d(TAG, &quot;Reload apps on config change. curr_mcc:&quot;                                  </span>
<span class="-5209278319615985301" onmouseenter="enter('-5209278319615985301');" onmouseout="out('-5209278319615985301');" style="">1227                        + currentConfig.mcc + &quot; prevmcc:&quot; + mPreviousConfigMcc);                          </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1228                    forceReload();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229              }                                                                                           </span>
<span class="-3935663267934034322" onmouseenter="enter('-3935663267934034322');" onmouseout="out('-3935663267934034322');" style="">1230              // Update previousConfig                                                                    </span>
<span class="3962364908604221868" onmouseenter="enter('3962364908604221868');" onmouseout="out('3962364908604221868');" style="">1231              mPreviousConfigMcc = currentConfig.mcc;                                                     </span>
<span class="-625815149698974703" onmouseenter="enter('-625815149698974703');" onmouseout="out('-625815149698974703');" style="">1232         } else if (SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED.equals(action) ||                 </span>
<span class="-3901926890039161494" onmouseenter="enter('-3901926890039161494');" onmouseout="out('-3901926890039161494');" style="">1233                    SearchManager.INTENT_ACTION_SEARCHABLES_CHANGED.equals(action)) {                     </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1234             if (mCallbacks != null) {                                                                    </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1235                 Callbacks callbacks = mCallbacks.get();                                                  </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1236                 if (callbacks != null) {                                                                 </span>
<span class="-1936765454200843013" onmouseenter="enter('-1936765454200843013');" onmouseout="out('-1936765454200843013');" style="">1237                     callbacks.bindSearchablesChanged();                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1238                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1239             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1240         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1241     }                                                                                                    </span>
<span  style="">1242                                                                                                          </span>
<span class="-3490103774513517076" onmouseenter="enter('-3490103774513517076');" onmouseout="out('-3490103774513517076');" style="">1243     private void forceReload() {                                                                         </span>
<span class="778547048286075437" onmouseenter="enter('778547048286075437');" onmouseout="out('778547048286075437');" style="">1244         resetLoadedState(true, true);                                                                    </span>
<span  style="">1245                                                                                                          </span>
<span class="4237924176832789189" onmouseenter="enter('4237924176832789189');" onmouseout="out('4237924176832789189');" style="">1246         // Do this here because if the launcher activity is running it will be restarted.                </span>
<span class="-3504249388484505584" onmouseenter="enter('-3504249388484505584');" onmouseout="out('-3504249388484505584');" style="">1247         // If it&#x27;s not running startLoaderFromBackground will merely tell it that it needs               </span>
<span class="5637742608155670431" onmouseenter="enter('5637742608155670431');" onmouseout="out('5637742608155670431');" style="">1248         // to reload.                                                                                    </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1249         startLoaderFromBackground();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1250     }                                                                                                    </span>
<span  style="">1251                                                                                                          </span>
<span class="-4293128577464776735" onmouseenter="enter('-4293128577464776735');" onmouseout="out('-4293128577464776735');" style="">1252     public void resetLoadedState(boolean resetAllAppsLoaded, boolean resetWorkspaceLoaded) {             </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1253         synchronized (mLock) {                                                                           </span>
<span class="-2609781935860166694" onmouseenter="enter('-2609781935860166694');" onmouseout="out('-2609781935860166694');" style="">1254             // Stop any existing loaders first, so they don&#x27;t set mAllAppsLoaded or                      </span>
<span class="1916843454374538934" onmouseenter="enter('1916843454374538934');" onmouseout="out('1916843454374538934');" style="">1255             // mWorkspaceLoaded to true later                                                            </span>
<span class="-1528282254597569426" onmouseenter="enter('-1528282254597569426');" onmouseout="out('-1528282254597569426');" style="">1256             stopLoaderLocked();                                                                          </span>
<span class="-4094161784675318974" onmouseenter="enter('-4094161784675318974');" onmouseout="out('-4094161784675318974');" style="">1257             if (resetAllAppsLoaded) mAllAppsLoaded = false;                                              </span>
<span class="-3582216479388479825" onmouseenter="enter('-3582216479388479825');" onmouseout="out('-3582216479388479825');" style="">1258             if (resetWorkspaceLoaded) mWorkspaceLoaded = false;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1259         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1260     }                                                                                                    </span>
<span  style="">1261                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1262     /**                                                                                                  </span>
<span class="-2117548427273174966" onmouseenter="enter('-2117548427273174966');" onmouseout="out('-2117548427273174966');" style="">1263      * When the launcher is in the background, it&#x27;s possible for it to miss paired                       </span>
<span class="9045642034745197537" onmouseenter="enter('9045642034745197537');" onmouseout="out('9045642034745197537');" style="">1264      * configuration changes.  So whenever we trigger the loader from the background                     </span>
<span class="3717077838570548717" onmouseenter="enter('3717077838570548717');" onmouseout="out('3717077838570548717');" style="">1265      * tell the launcher that it needs to re-run the loader when it comes back instead                   </span>
<span class="8619803709595782118" onmouseenter="enter('8619803709595782118');" onmouseout="out('8619803709595782118');" style="">1266      * of doing it now.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1267      */                                                                                                  </span>
<span class="2053805597450117019" onmouseenter="enter('2053805597450117019');" onmouseout="out('2053805597450117019');" style="">1268     public void startLoaderFromBackground() {                                                            </span>
<span class="-3760886775206602162" onmouseenter="enter('-3760886775206602162');" onmouseout="out('-3760886775206602162');" style="">1269         boolean runLoader = false;                                                                       </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1270         if (mCallbacks != null) {                                                                        </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1271             Callbacks callbacks = mCallbacks.get();                                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1272             if (callbacks != null) {                                                                     </span>
<span class="-8461765931128288918" onmouseenter="enter('-8461765931128288918');" onmouseout="out('-8461765931128288918');" style="">1273                 // Only actually run the loader if they&#x27;re not paused.                                   </span>
<span class="-462943306960371545" onmouseenter="enter('-462943306960371545');" onmouseout="out('-462943306960371545');" style="">1274                 if (!callbacks.setLoadOnResume()) {                                                      </span>
<span class="-8889848208331327581" onmouseenter="enter('-8889848208331327581');" onmouseout="out('-8889848208331327581');" style="">1275                     runLoader = true;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1276                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1277             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1278         }                                                                                                </span>
<span class="-2622291522100283788" onmouseenter="enter('-2622291522100283788');" onmouseout="out('-2622291522100283788');" style="">1279         if (runLoader) {                                                                                 </span>
<span class="-8998147482804817647" onmouseenter="enter('-8998147482804817647');" onmouseout="out('-8998147482804817647');" style="">1280             startLoader(false, PagedView.INVALID_RESTORE_PAGE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1281         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1282     }                                                                                                    </span>
<span  style="">1283                                                                                                          </span>
<span class="5010903034251856801" onmouseenter="enter('5010903034251856801');" onmouseout="out('5010903034251856801');" style="">1284     // If there is already a loader task running, tell it to stop.                                       </span>
<span class="796557558969242789" onmouseenter="enter('796557558969242789');" onmouseout="out('796557558969242789');" style="">1285     // returns true if isLaunching() was true on the old task                                            </span>
<span class="-4581932122990216089" onmouseenter="enter('-4581932122990216089');" onmouseout="out('-4581932122990216089');" style="">1286     private boolean stopLoaderLocked() {                                                                 </span>
<span class="-998934784399408070" onmouseenter="enter('-998934784399408070');" onmouseout="out('-998934784399408070');" style="">1287         boolean isLaunching = false;                                                                     </span>
<span class="-7986438653599299764" onmouseenter="enter('-7986438653599299764');" onmouseout="out('-7986438653599299764');" style="">1288         LoaderTask oldTask = mLoaderTask;                                                                </span>
<span class="-2859449282457612659" onmouseenter="enter('-2859449282457612659');" onmouseout="out('-2859449282457612659');" style="">1289         if (oldTask != null) {                                                                           </span>
<span class="5507271139955657849" onmouseenter="enter('5507271139955657849');" onmouseout="out('5507271139955657849');" style="">1290             if (oldTask.isLaunching()) {                                                                 </span>
<span class="-2542349725897719409" onmouseenter="enter('-2542349725897719409');" onmouseout="out('-2542349725897719409');" style="">1291                 isLaunching = true;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1292             }                                                                                            </span>
<span class="-1151918806087352732" onmouseenter="enter('-1151918806087352732');" onmouseout="out('-1151918806087352732');" style="">1293             oldTask.stopLocked();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1294         }                                                                                                </span>
<span class="353443281501806148" onmouseenter="enter('353443281501806148');" onmouseout="out('353443281501806148');" style="">1295         return isLaunching;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1296     }                                                                                                    </span>
<span  style="">1297                                                                                                          </span>
<span class="3837278165301095000" onmouseenter="enter('3837278165301095000');" onmouseout="out('3837278165301095000');" style="">1298     public void startLoader(boolean isLaunching, int synchronousBindPage) {                              </span>
<span class="-5265370469502082000" onmouseenter="enter('-5265370469502082000');" onmouseout="out('-5265370469502082000');" style="">1299         startLoader(isLaunching, synchronousBindPage, LOADER_FLAG_NONE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1300     }                                                                                                    </span>
<span  style="">1301                                                                                                          </span>
<span class="4886983231320039031" onmouseenter="enter('4886983231320039031');" onmouseout="out('4886983231320039031');" style="">1302     public void startLoader(boolean isLaunching, int synchronousBindPage, int loadFlags) {               </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1303         synchronized (mLock) {                                                                           </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1304             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-3508213546782417324" onmouseenter="enter('-3508213546782417324');" onmouseout="out('-3508213546782417324');" style="">1305                 Log.d(TAG, &quot;startLoader isLaunching=&quot; + isLaunching);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1306             }                                                                                            </span>
<span  style="">1307                                                                                                          </span>
<span class="6333826815871699731" onmouseenter="enter('6333826815871699731');" onmouseout="out('6333826815871699731');" style="">1308             // Clear any deferred bind-runnables from the synchronized load process                      </span>
<span class="-7033809362198181476" onmouseenter="enter('-7033809362198181476');" onmouseout="out('-7033809362198181476');" style="">1309             // We must do this before any loading/binding is scheduled below.                            </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1310             mDeferredBindRunnables.clear();                                                              </span>
<span  style="">1311                                                                                                          </span>
<span class="-2785438828901225561" onmouseenter="enter('-2785438828901225561');" onmouseout="out('-2785438828901225561');" style="">1312             // Don&#x27;t bother to start the thread if we know it&#x27;s not going to do anything                 </span>
<span class="-784058118581736702" onmouseenter="enter('-784058118581736702');" onmouseout="out('-784058118581736702');" style="">1313             if (mCallbacks != null &amp;&amp; mCallbacks.get() != null) {                                        </span>
<span class="-5820527225743363271" onmouseenter="enter('-5820527225743363271');" onmouseout="out('-5820527225743363271');" style="">1314                 // If there is already one running, tell it to stop.                                     </span>
<span class="3990358955275755027" onmouseenter="enter('3990358955275755027');" onmouseout="out('3990358955275755027');" style="">1315                 // also, don&#x27;t downgrade isLaunching if we&#x27;re already running                            </span>
<span class="-6024742637751579231" onmouseenter="enter('-6024742637751579231');" onmouseout="out('-6024742637751579231');" style="">1316                 isLaunching = isLaunching || stopLoaderLocked();                                         </span>
<span class="7022676154060365524" onmouseenter="enter('7022676154060365524');" onmouseout="out('7022676154060365524');" style="">1317                 mLoaderTask = new LoaderTask(mApp.getContext(), isLaunching, loadFlags);                 </span>
<span class="1771251463067889729" onmouseenter="enter('1771251463067889729');" onmouseout="out('1771251463067889729');" style="">1318                 if (synchronousBindPage != PagedView.INVALID_RESTORE_PAGE                                </span>
<span class="7049103546590409467" onmouseenter="enter('7049103546590409467');" onmouseout="out('7049103546590409467');" style="">1319                         &amp;&amp; mAllAppsLoaded &amp;&amp; mWorkspaceLoaded) {                                         </span>
<span class="-8342371766149337044" onmouseenter="enter('-8342371766149337044');" onmouseout="out('-8342371766149337044');" style="">1320                     mLoaderTask.runBindSynchronousPage(synchronousBindPage);                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1321                 } else {                                                                                 </span>
<span class="-600387258114093875" onmouseenter="enter('-600387258114093875');" onmouseout="out('-600387258114093875');" style="">1322                     sWorkerThread.setPriority(Thread.NORM_PRIORITY);                                     </span>
<span class="7243935410050079045" onmouseenter="enter('7243935410050079045');" onmouseout="out('7243935410050079045');" style="">1323                     sWorker.post(mLoaderTask);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1324                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1325             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1326         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327     }                                                                                                    </span>
<span  style="">1328                                                                                                          </span>
<span class="8791491145548048370" onmouseenter="enter('8791491145548048370');" onmouseout="out('8791491145548048370');" style="">1329     void bindRemainingSynchronousPages() {                                                               </span>
<span class="5033608739884582118" onmouseenter="enter('5033608739884582118');" onmouseout="out('5033608739884582118');" style="">1330         // Post the remaining side pages to be loaded                                                    </span>
<span class="-5332743236356375648" onmouseenter="enter('-5332743236356375648');" onmouseout="out('-5332743236356375648');" style="">1331         if (!mDeferredBindRunnables.isEmpty()) {                                                         </span>
<span class="5296695443187413802" onmouseenter="enter('5296695443187413802');" onmouseout="out('5296695443187413802');" style="">1332             for (final Runnable r : mDeferredBindRunnables) {                                            </span>
<span class="352794200584805787" onmouseenter="enter('352794200584805787');" onmouseout="out('352794200584805787');" style="">1333                 mHandler.post(r, MAIN_THREAD_BINDING_RUNNABLE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1334             }                                                                                            </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1335             mDeferredBindRunnables.clear();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1336         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1337     }                                                                                                    </span>
<span  style="">1338                                                                                                          </span>
<span class="2340632222115195329" onmouseenter="enter('2340632222115195329');" onmouseout="out('2340632222115195329');" style="">1339     public void stopLoader() {                                                                           </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1340         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1341             if (mLoaderTask != null) {                                                                   </span>
<span class="-3264656657741930991" onmouseenter="enter('-3264656657741930991');" onmouseout="out('-3264656657741930991');" style="">1342                 mLoaderTask.stopLocked();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1343             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1344         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1345     }                                                                                                    </span>
<span  style="">1346                                                                                                          </span>
<span class="-7250027300190670202" onmouseenter="enter('-7250027300190670202');" onmouseout="out('-7250027300190670202');" style="">1347     /** Loads the workspace screens db into a map of Rank -&gt; ScreenId */                                 </span>
<span class="122992606215727554" onmouseenter="enter('122992606215727554');" onmouseout="out('122992606215727554');" style="">1348     private static TreeMap&lt;Integer, Long&gt; loadWorkspaceScreensDb(Context context) {                      </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1349         final ContentResolver contentResolver = context.getContentResolver();                            </span>
<span class="-2220596623746218138" onmouseenter="enter('-2220596623746218138');" onmouseout="out('-2220596623746218138');" style="">1350         final Uri screensUri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                            </span>
<span class="6273592658286011909" onmouseenter="enter('6273592658286011909');" onmouseout="out('6273592658286011909');" style="">1351         final Cursor sc = contentResolver.query(screensUri, null, null, null, null);                     </span>
<span class="-750342796873513708" onmouseenter="enter('-750342796873513708');" onmouseout="out('-750342796873513708');" style="">1352         TreeMap&lt;Integer, Long&gt; orderedScreens = new TreeMap&lt;Integer, Long&gt;();                            </span>
<span  style="">1353                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1354         try {                                                                                            </span>
<span class="-8175558610564469753" onmouseenter="enter('-8175558610564469753');" onmouseout="out('-8175558610564469753');" style="">1355             final int idIndex = sc.getColumnIndexOrThrow(                                                </span>
<span class="-8946142257769661598" onmouseenter="enter('-8946142257769661598');" onmouseout="out('-8946142257769661598');" style="">1356                     LauncherSettings.WorkspaceScreens._ID);                                              </span>
<span class="-8868089630781298600" onmouseenter="enter('-8868089630781298600');" onmouseout="out('-8868089630781298600');" style="">1357             final int rankIndex = sc.getColumnIndexOrThrow(                                              </span>
<span class="5916017515631826997" onmouseenter="enter('5916017515631826997');" onmouseout="out('5916017515631826997');" style="">1358                     LauncherSettings.WorkspaceScreens.SCREEN_RANK);                                      </span>
<span class="204728523712198078" onmouseenter="enter('204728523712198078');" onmouseout="out('204728523712198078');" style="">1359             while (sc.moveToNext()) {                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1360                 try {                                                                                    </span>
<span class="-3927530459574574291" onmouseenter="enter('-3927530459574574291');" onmouseout="out('-3927530459574574291');" style="">1361                     long screenId = sc.getLong(idIndex);                                                 </span>
<span class="4944528408544996755" onmouseenter="enter('4944528408544996755');" onmouseout="out('4944528408544996755');" style="">1362                     int rank = sc.getInt(rankIndex);                                                     </span>
<span class="3308047316092947062" onmouseenter="enter('3308047316092947062');" onmouseout="out('3308047316092947062');" style="">1363                     orderedScreens.put(rank, screenId);                                                  </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1364                 } catch (Exception e) {                                                                  </span>
<span class="-7912680121623740950" onmouseenter="enter('-7912680121623740950');" onmouseout="out('-7912680121623740950');" style=""><abbr title="1365                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e, true);">1365                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e,</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1366                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1367             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1368         } finally {                                                                                      </span>
<span class="8048076729460304726" onmouseenter="enter('8048076729460304726');" onmouseout="out('8048076729460304726');" style="">1369             sc.close();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1370         }                                                                                                </span>
<span  style="">1371                                                                                                          </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1372         // Log to disk                                                                                   </span>
<span class="395286336309272035" onmouseenter="enter('395286336309272035');" onmouseout="out('395286336309272035');" style="">1373         Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspaceScreensDb()&quot;, true);                           </span>
<span class="218635510720911915" onmouseenter="enter('218635510720911915');" onmouseout="out('218635510720911915');" style="">1374         ArrayList&lt;String&gt; orderedScreensPairs= new ArrayList&lt;String&gt;();                                  </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">1375         for (Integer i : orderedScreens.keySet()) {                                                      </span>
<span class="7491860136402808405" onmouseenter="enter('7491860136402808405');" onmouseout="out('7491860136402808405');" style="">1376             orderedScreensPairs.add(&quot;{ &quot; + i + &quot;: &quot; + orderedScreens.get(i) + &quot; }&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1377         }                                                                                                </span>
<span class="-1337084683171534745" onmouseenter="enter('-1337084683171534745');" onmouseout="out('-1337084683171534745');" style="">1378         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; +                                              </span>
<span class="-2164573057986762020" onmouseenter="enter('-2164573057986762020');" onmouseout="out('-2164573057986762020');" style="">1379                 TextUtils.join(&quot;, &quot;, orderedScreensPairs), true);                                        </span>
<span class="1470292219769535286" onmouseenter="enter('1470292219769535286');" onmouseout="out('1470292219769535286');" style="">1380         return orderedScreens;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1381     }                                                                                                    </span>
<span  style="">1382                                                                                                          </span>
<span class="3555732154070898598" onmouseenter="enter('3555732154070898598');" onmouseout="out('3555732154070898598');" style="">1383     public boolean isAllAppsLoaded() {                                                                   </span>
<span class="-4479372220598901856" onmouseenter="enter('-4479372220598901856');" onmouseout="out('-4479372220598901856');" style="">1384         return mAllAppsLoaded;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1385     }                                                                                                    </span>
<span  style="">1386                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1387     boolean isLoadingWorkspace() {                                                                       </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1388         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1389             if (mLoaderTask != null) {                                                                   </span>
<span class="-8784543184221518678" onmouseenter="enter('-8784543184221518678');" onmouseout="out('-8784543184221518678');" style="">1390                 return mLoaderTask.isLoadingWorkspace();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1391             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1392         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1393         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1394     }                                                                                                    </span>
<span  style="">1395                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1396     /**                                                                                                  </span>
<span class="2155822975232422030" onmouseenter="enter('2155822975232422030');" onmouseout="out('2155822975232422030');" style="">1397      * Runnable for the thread that loads the contents of the launcher:                                  </span>
<span class="2245504796345070456" onmouseenter="enter('2245504796345070456');" onmouseout="out('2245504796345070456');" style="">1398      *   - workspace icons                                                                               </span>
<span class="3748531824399873232" onmouseenter="enter('3748531824399873232');" onmouseout="out('3748531824399873232');" style="">1399      *   - widgets                                                                                       </span>
<span class="-1174287823865228312" onmouseenter="enter('-1174287823865228312');" onmouseout="out('-1174287823865228312');" style="">1400      *   - all apps icons                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1401      */                                                                                                  </span>
<span class="5152324394883908677" onmouseenter="enter('5152324394883908677');" onmouseout="out('5152324394883908677');" style="">1402     private class LoaderTask implements Runnable {                                                       </span>
<span class="6683852815807951473" onmouseenter="enter('6683852815807951473');" onmouseout="out('6683852815807951473');" style="">1403         private Context mContext;                                                                        </span>
<span class="-8892613002903674576" onmouseenter="enter('-8892613002903674576');" onmouseout="out('-8892613002903674576');" style="">1404         private boolean mIsLaunching;                                                                    </span>
<span class="-8472062509666230595" onmouseenter="enter('-8472062509666230595');" onmouseout="out('-8472062509666230595');" style="">1405         private boolean mIsLoadingAndBindingWorkspace;                                                   </span>
<span class="840925515877441947" onmouseenter="enter('840925515877441947');" onmouseout="out('840925515877441947');" style="">1406         private boolean mStopped;                                                                        </span>
<span class="-1108993435799622018" onmouseenter="enter('-1108993435799622018');" onmouseout="out('-1108993435799622018');" style="">1407         private boolean mLoadAndBindStepFinished;                                                        </span>
<span class="2080823019438326837" onmouseenter="enter('2080823019438326837');" onmouseout="out('2080823019438326837');" style="">1408         private int mFlags;                                                                              </span>
<span  style="">1409                                                                                                          </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">1410         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span  style="">1411                                                                                                          </span>
<span class="-3637406926963361525" onmouseenter="enter('-3637406926963361525');" onmouseout="out('-3637406926963361525');" style="">1412         LoaderTask(Context context, boolean isLaunching, int flags) {                                    </span>
<span class="7260904205784329196" onmouseenter="enter('7260904205784329196');" onmouseout="out('7260904205784329196');" style="">1413             mContext = context;                                                                          </span>
<span class="7512260519858493354" onmouseenter="enter('7512260519858493354');" onmouseout="out('7512260519858493354');" style="">1414             mIsLaunching = isLaunching;                                                                  </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">1415             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="6183718553459964087" onmouseenter="enter('6183718553459964087');" onmouseout="out('6183718553459964087');" style="">1416             mFlags = flags;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1417         }                                                                                                </span>
<span  style="">1418                                                                                                          </span>
<span class="-3427713478562425776" onmouseenter="enter('-3427713478562425776');" onmouseout="out('-3427713478562425776');" style="">1419         boolean isLaunching() {                                                                          </span>
<span class="-4684239236966951132" onmouseenter="enter('-4684239236966951132');" onmouseout="out('-4684239236966951132');" style="">1420             return mIsLaunching;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1421         }                                                                                                </span>
<span  style="">1422                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1423         boolean isLoadingWorkspace() {                                                                   </span>
<span class="-1565626489511429864" onmouseenter="enter('-1565626489511429864');" onmouseout="out('-1565626489511429864');" style="">1424             return mIsLoadingAndBindingWorkspace;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1425         }                                                                                                </span>
<span  style="">1426                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1427         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-4912644643880785787" onmouseenter="enter('-4912644643880785787');" onmouseout="out('-4912644643880785787');" style="">1428         private boolean loadAndBindWorkspace() {                                                         </span>
<span class="3221067006114111971" onmouseenter="enter('3221067006114111971');" onmouseout="out('3221067006114111971');" style="">1429             mIsLoadingAndBindingWorkspace = true;                                                        </span>
<span  style="">1430                                                                                                          </span>
<span class="1537270917172214589" onmouseenter="enter('1537270917172214589');" onmouseout="out('1537270917172214589');" style="">1431             // Load the workspace                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1432             if (DEBUG_LOADERS) {                                                                         </span>
<span class="8901273111544619292" onmouseenter="enter('8901273111544619292');" onmouseout="out('8901273111544619292');" style="">1433                 Log.d(TAG, &quot;loadAndBindWorkspace mWorkspaceLoaded=&quot; + mWorkspaceLoaded);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1434             }                                                                                            </span>
<span  style="">1435                                                                                                          </span>
<span class="-7050118912026035967" onmouseenter="enter('-7050118912026035967');" onmouseout="out('-7050118912026035967');" style="">1436             boolean isUpgradePath = false;                                                               </span>
<span class="-6627511839388696673" onmouseenter="enter('-6627511839388696673');" onmouseout="out('-6627511839388696673');" style="">1437             if (!mWorkspaceLoaded) {                                                                     </span>
<span class="-5751837054227838000" onmouseenter="enter('-5751837054227838000');" onmouseout="out('-5751837054227838000');" style="">1438                 isUpgradePath = loadWorkspace();                                                         </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1439                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1440                     if (mStopped) {                                                                      </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1441                         return isUpgradePath;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1442                     }                                                                                    </span>
<span class="3247008524984054391" onmouseenter="enter('3247008524984054391');" onmouseout="out('3247008524984054391');" style="">1443                     mWorkspaceLoaded = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1444                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1445             }                                                                                            </span>
<span  style="">1446                                                                                                          </span>
<span class="8161409494754485761" onmouseenter="enter('8161409494754485761');" onmouseout="out('8161409494754485761');" style="">1447             // Bind the workspace                                                                        </span>
<span class="7984749853310309686" onmouseenter="enter('7984749853310309686');" onmouseout="out('7984749853310309686');" style="">1448             bindWorkspace(-1, isUpgradePath);                                                            </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1449             return isUpgradePath;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1450         }                                                                                                </span>
<span  style="">1451                                                                                                          </span>
<span class="-1989226029052835978" onmouseenter="enter('-1989226029052835978');" onmouseout="out('-1989226029052835978');" style="">1452         private void waitForIdle() {                                                                     </span>
<span class="755597645611528735" onmouseenter="enter('755597645611528735');" onmouseout="out('755597645611528735');" style="">1453             // Wait until the either we&#x27;re stopped or the other threads are done.                        </span>
<span class="-8727414813590658044" onmouseenter="enter('-8727414813590658044');" onmouseout="out('-8727414813590658044');" style="">1454             // This way we don&#x27;t start loading all apps until the workspace has settled                  </span>
<span class="519327046885180501" onmouseenter="enter('519327046885180501');" onmouseout="out('519327046885180501');" style="">1455             // down.                                                                                     </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1456             synchronized (LoaderTask.this) {                                                             </span>
<span class="-83798755248439808" onmouseenter="enter('-83798755248439808');" onmouseout="out('-83798755248439808');" style="">1457                 final long workspaceWaitTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;           </span>
<span  style="">1458                                                                                                          </span>
<span class="-8997106023930440912" onmouseenter="enter('-8997106023930440912');" onmouseout="out('-8997106023930440912');" style="">1459                 mHandler.postIdle(new Runnable() {                                                       </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1460                         public void run() {                                                              </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1461                             synchronized (LoaderTask.this) {                                             </span>
<span class="-4593766760064909367" onmouseenter="enter('-4593766760064909367');" onmouseout="out('-4593766760064909367');" style="">1462                                 mLoadAndBindStepFinished = true;                                         </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1463                                 if (DEBUG_LOADERS) {                                                     </span>
<span class="-7140275656523627984" onmouseenter="enter('-7140275656523627984');" onmouseout="out('-7140275656523627984');" style="">1464                                     Log.d(TAG, &quot;done with previous binding step&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1465                                 }                                                                        </span>
<span class="8111819661104992685" onmouseenter="enter('8111819661104992685');" onmouseout="out('8111819661104992685');" style="">1466                                 LoaderTask.this.notify();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1467                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1468                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1469                     });                                                                                  </span>
<span  style="">1470                                                                                                          </span>
<span class="7673579852599691461" onmouseenter="enter('7673579852599691461');" onmouseout="out('7673579852599691461');" style="">1471                 while (!mStopped &amp;&amp; !mLoadAndBindStepFinished &amp;&amp; !mFlushingWorkerThread) {               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1472                     try {                                                                                </span>
<span class="-1997675543177729859" onmouseenter="enter('-1997675543177729859');" onmouseout="out('-1997675543177729859');" style="">1473                         // Just in case mFlushingWorkerThread changes but we aren&#x27;t woken up,            </span>
<span class="4998753984474875942" onmouseenter="enter('4998753984474875942');" onmouseout="out('4998753984474875942');" style="">1474                         // wait no longer than 1sec at a time                                            </span>
<span class="1515790047903299628" onmouseenter="enter('1515790047903299628');" onmouseout="out('1515790047903299628');" style="">1475                         this.wait(1000);                                                                 </span>
<span class="3493957724480568133" onmouseenter="enter('3493957724480568133');" onmouseout="out('3493957724480568133');" style="">1476                     } catch (InterruptedException ex) {                                                  </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style="">1477                         // Ignore                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1478                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1479                 }                                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1480                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="-72139740866353106" onmouseenter="enter('-72139740866353106');" onmouseout="out('-72139740866353106');" style="">1481                     Log.d(TAG, &quot;waited &quot;                                                                 </span>
<span class="3094974955332165680" onmouseenter="enter('3094974955332165680');" onmouseout="out('3094974955332165680');" style="">1482                             + (SystemClock.uptimeMillis()-workspaceWaitTime)                             </span>
<span class="4719480645001782920" onmouseenter="enter('4719480645001782920');" onmouseout="out('4719480645001782920');" style="">1483                             + &quot;ms for previous step to finish binding&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1484                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1485             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1486         }                                                                                                </span>
<span  style="">1487                                                                                                          </span>
<span class="6003497491863497289" onmouseenter="enter('6003497491863497289');" onmouseout="out('6003497491863497289');" style="">1488         void runBindSynchronousPage(int synchronousBindPage) {                                           </span>
<span class="26631348189854486" onmouseenter="enter('26631348189854486');" onmouseout="out('26631348189854486');" style="">1489             if (synchronousBindPage == PagedView.INVALID_RESTORE_PAGE) {                                 </span>
<span class="-8503902330989669437" onmouseenter="enter('-8503902330989669437');" onmouseout="out('-8503902330989669437');" style="">1490                 // Ensure that we have a valid page index to load synchronously                          </span>
<span class="4351877111278684588" onmouseenter="enter('4351877111278684588');" onmouseout="out('4351877111278684588');" style="">1491                 throw new RuntimeException(&quot;Should not call runBindSynchronousPage() without &quot; +         </span>
<span class="-7231071987017264740" onmouseenter="enter('-7231071987017264740');" onmouseout="out('-7231071987017264740');" style="">1492                         &quot;valid page index&quot;);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1493             }                                                                                            </span>
<span class="-1078848978706070277" onmouseenter="enter('-1078848978706070277');" onmouseout="out('-1078848978706070277');" style="">1494             if (!mAllAppsLoaded || !mWorkspaceLoaded) {                                                  </span>
<span class="2879437365312389694" onmouseenter="enter('2879437365312389694');" onmouseout="out('2879437365312389694');" style="">1495                 // Ensure that we don&#x27;t try and bind a specified page when the pages have not been       </span>
<span class="169159946226030638" onmouseenter="enter('169159946226030638');" onmouseout="out('169159946226030638');" style="">1496                 // loaded already (we should load everything asynchronously in that case)                </span>
<span class="2803547673173241327" onmouseenter="enter('2803547673173241327');" onmouseout="out('2803547673173241327');" style="">1497                 throw new RuntimeException(&quot;Expecting AllApps and Workspace to be loaded&quot;);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1498             }                                                                                            </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1499             synchronized (mLock) {                                                                       </span>
<span class="6834879657722268045" onmouseenter="enter('6834879657722268045');" onmouseout="out('6834879657722268045');" style="">1500                 if (mIsLoaderTaskRunning) {                                                              </span>
<span class="3479473486057258175" onmouseenter="enter('3479473486057258175');" onmouseout="out('3479473486057258175');" style="">1501                     // Ensure that we are never running the background loading at this point since       </span>
<span class="5690931735845958615" onmouseenter="enter('5690931735845958615');" onmouseout="out('5690931735845958615');" style="">1502                     // we also touch the background collections                                          </span>
<span class="-8789687649412956769" onmouseenter="enter('-8789687649412956769');" onmouseout="out('-8789687649412956769');" style="">1503                     throw new RuntimeException(&quot;Error! Background loading is already running&quot;);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1504                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1505             }                                                                                            </span>
<span  style="">1506                                                                                                          </span>
<span class="4081886748823582405" onmouseenter="enter('4081886748823582405');" onmouseout="out('4081886748823582405');" style="">1507             // XXX: Throw an exception if we are already loading (since we touch the worker thread       </span>
<span class="-98490365064007765" onmouseenter="enter('-98490365064007765');" onmouseout="out('-98490365064007765');" style="">1508             //      data structures, we can&#x27;t allow any other thread to touch that data, but because     </span>
<span class="4680477662519922026" onmouseenter="enter('4680477662519922026');" onmouseout="out('4680477662519922026');" style="">1509             //      this call is synchronous, we can get away with not locking).                         </span>
<span  style="">1510                                                                                                          </span>
<span class="-6012373927983533730" onmouseenter="enter('-6012373927983533730');" onmouseout="out('-6012373927983533730');" style="">1511             // The LauncherModel is static in the LauncherAppState and mHandler may have queued          </span>
<span class="7586418927072898518" onmouseenter="enter('7586418927072898518');" onmouseout="out('7586418927072898518');" style="">1512             // operations from the previous activity.  We need to ensure that all queued operations      </span>
<span class="-70743228311848279" onmouseenter="enter('-70743228311848279');" onmouseout="out('-70743228311848279');" style="">1513             // are executed before any synchronous binding work is done.                                 </span>
<span class="-4498008587479034521" onmouseenter="enter('-4498008587479034521');" onmouseout="out('-4498008587479034521');" style="">1514             mHandler.flush();                                                                            </span>
<span  style="">1515                                                                                                          </span>
<span class="-3771221013488357479" onmouseenter="enter('-3771221013488357479');" onmouseout="out('-3771221013488357479');" style="">1516             // Divide the set of loaded items into those that we are binding synchronously, and          </span>
<span class="5224432435633178726" onmouseenter="enter('5224432435633178726');" onmouseout="out('5224432435633178726');" style="">1517             // everything else that is to be bound normally (asynchronously).                            </span>
<span class="-6685180061336045314" onmouseenter="enter('-6685180061336045314');" onmouseout="out('-6685180061336045314');" style="">1518             bindWorkspace(synchronousBindPage, false);                                                   </span>
<span class="6689685850222943783" onmouseenter="enter('6689685850222943783');" onmouseout="out('6689685850222943783');" style="">1519             // XXX: For now, continue posting the binding of AllApps as there are other issues that      </span>
<span class="-1574502332056641514" onmouseenter="enter('-1574502332056641514');" onmouseout="out('-1574502332056641514');" style="">1520             //      arise from that.                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">1521             onlyBindAllApps();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1522         }                                                                                                </span>
<span  style="">1523                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1524         public void run() {                                                                              </span>
<span class="5752535899438246447" onmouseenter="enter('5752535899438246447');" onmouseout="out('5752535899438246447');" style="">1525             boolean isUpgrade = false;                                                                   </span>
<span  style="">1526                                                                                                          </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1527             synchronized (mLock) {                                                                       </span>
<span class="4738665752688002399" onmouseenter="enter('4738665752688002399');" onmouseout="out('4738665752688002399');" style="">1528                 mIsLoaderTaskRunning = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1529             }                                                                                            </span>
<span class="-1737494436521525410" onmouseenter="enter('-1737494436521525410');" onmouseout="out('-1737494436521525410');" style="">1530             // Optimize for end-user experience: if the Launcher is up and // running with the           </span>
<span class="892988660615454533" onmouseenter="enter('892988660615454533');" onmouseout="out('892988660615454533');" style="">1531             // All Apps interface in the foreground, load All Apps first. Otherwise, load the            </span>
<span class="-1944482210197593446" onmouseenter="enter('-1944482210197593446');" onmouseout="out('-1944482210197593446');" style="">1532             // workspace first (default).                                                                </span>
<span class="-8128861992085659189" onmouseenter="enter('-8128861992085659189');" onmouseout="out('-8128861992085659189');" style="">1533             keep_running: {                                                                              </span>
<span class="2293067736949718284" onmouseenter="enter('2293067736949718284');" onmouseout="out('2293067736949718284');" style="">1534                 // Elevate priority when Home launches for the first time to avoid                       </span>
<span class="-1381926741216219064" onmouseenter="enter('-1381926741216219064');" onmouseout="out('-1381926741216219064');" style="">1535                 // starving at boot time. Staring at a blank home is not cool.                           </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1536                 synchronized (mLock) {                                                                   </span>
<span class="8946499537685848583" onmouseenter="enter('8946499537685848583');" onmouseout="out('8946499537685848583');" style="">1537                     if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to &quot; +                        </span>
<span class="1787109731546912352" onmouseenter="enter('1787109731546912352');" onmouseout="out('1787109731546912352');" style="">1538                             (mIsLaunching ? &quot;DEFAULT&quot; : &quot;BACKGROUND&quot;));                                  </span>
<span class="-1912109441925598991" onmouseenter="enter('-1912109441925598991');" onmouseout="out('-1912109441925598991');" style="">1539                     android.os.Process.setThreadPriority(mIsLaunching                                    </span>
<span class="-5572949467661441178" onmouseenter="enter('-5572949467661441178');" onmouseout="out('-5572949467661441178');" style="">1540                             ? Process.THREAD_PRIORITY_DEFAULT : Process.THREAD_PRIORITY_BACKGROUND);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1541                 }                                                                                        </span>
<span class="9220749004793568337" onmouseenter="enter('9220749004793568337');" onmouseout="out('9220749004793568337');" style="">1542                 if (DEBUG_LOADERS) Log.d(TAG, &quot;step 1: loading workspace&quot;);                              </span>
<span class="8482653655407072483" onmouseenter="enter('8482653655407072483');" onmouseout="out('8482653655407072483');" style="">1543                 isUpgrade = loadAndBindWorkspace();                                                      </span>
<span  style="">1544                                                                                                          </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1545                 if (mStopped) {                                                                          </span>
<span class="-6818805659412975442" onmouseenter="enter('-6818805659412975442');" onmouseout="out('-6818805659412975442');" style="">1546                     break keep_running;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1547                 }                                                                                        </span>
<span  style="">1548                                                                                                          </span>
<span class="-5777092162251517407" onmouseenter="enter('-5777092162251517407');" onmouseout="out('-5777092162251517407');" style="">1549                 // Whew! Hard work done.  Slow us down, and wait until the UI thread has                 </span>
<span class="-4075896614387769686" onmouseenter="enter('-4075896614387769686');" onmouseout="out('-4075896614387769686');" style="">1550                 // settled down.                                                                         </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1551                 synchronized (mLock) {                                                                   </span>
<span class="1926990202484285414" onmouseenter="enter('1926990202484285414');" onmouseout="out('1926990202484285414');" style="">1552                     if (mIsLaunching) {                                                                  </span>
<span class="-8046035155088057723" onmouseenter="enter('-8046035155088057723');" onmouseout="out('-8046035155088057723');" style="">1553                         if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to BACKGROUND&quot;);          </span>
<span class="6194754511830950532" onmouseenter="enter('6194754511830950532');" onmouseout="out('6194754511830950532');" style="">1554                         android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1555                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1556                 }                                                                                        </span>
<span class="2443484392604792624" onmouseenter="enter('2443484392604792624');" onmouseout="out('2443484392604792624');" style="">1557                 waitForIdle();                                                                           </span>
<span  style="">1558                                                                                                          </span>
<span class="1529750222663563109" onmouseenter="enter('1529750222663563109');" onmouseout="out('1529750222663563109');" style="">1559                 // second step                                                                           </span>
<span class="4805812105190008803" onmouseenter="enter('4805812105190008803');" onmouseout="out('4805812105190008803');" style="">1560                 if (DEBUG_LOADERS) Log.d(TAG, &quot;step 2: loading all apps&quot;);                               </span>
<span class="3758302759319518479" onmouseenter="enter('3758302759319518479');" onmouseout="out('3758302759319518479');" style="">1561                 loadAndBindAllApps();                                                                    </span>
<span  style="">1562                                                                                                          </span>
<span class="4031538869478111" onmouseenter="enter('4031538869478111');" onmouseout="out('4031538869478111');" style="">1563                 // Restore the default thread priority after we are done loading items                   </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1564                 synchronized (mLock) {                                                                   </span>
<span class="6299511964324687923" onmouseenter="enter('6299511964324687923');" onmouseout="out('6299511964324687923');" style="">1565                     android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_DEFAULT);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1566                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1567             }                                                                                            </span>
<span  style="">1568                                                                                                          </span>
<span class="3508545587953199453" onmouseenter="enter('3508545587953199453');" onmouseout="out('3508545587953199453');" style="">1569             // Update the saved icons if necessary                                                       </span>
<span class="-4757805943857079956" onmouseenter="enter('-4757805943857079956');" onmouseout="out('-4757805943857079956');" style="">1570             if (DEBUG_LOADERS) Log.d(TAG, &quot;Comparing loaded icons to database icons&quot;);                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1571             synchronized (sBgLock) {                                                                     </span>
<span class="5900553346724410681" onmouseenter="enter('5900553346724410681');" onmouseout="out('5900553346724410681');" style="">1572                 for (Object key : sBgDbIconCache.keySet()) {                                             </span>
<span class="404633043401473554" onmouseenter="enter('404633043401473554');" onmouseout="out('404633043401473554');" style="">1573                     updateSavedIcon(mContext, (ShortcutInfo) key, sBgDbIconCache.get(key));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1574                 }                                                                                        </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1575                 sBgDbIconCache.clear();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1576             }                                                                                            </span>
<span  style="">1577                                                                                                          </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">1578             if (LauncherAppState.isDisableAllApps()) {                                                   </span>
<span class="6125270178763735331" onmouseenter="enter('6125270178763735331');" onmouseout="out('6125270178763735331');" style="">1579                 // Ensure that all the applications that are in the system are                           </span>
<span class="305725628855266005" onmouseenter="enter('305725628855266005');" onmouseout="out('305725628855266005');" style="">1580                 // represented on the home screen.                                                       </span>
<span class="3562864863119627268" onmouseenter="enter('3562864863119627268');" onmouseout="out('3562864863119627268');" style="">1581                 if (!UPGRADE_USE_MORE_APPS_FOLDER || !isUpgrade) {                                       </span>
<span class="5095093339904195112" onmouseenter="enter('5095093339904195112');" onmouseout="out('5095093339904195112');" style="">1582                     verifyApplications();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1583                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1584             }                                                                                            </span>
<span  style="">1585                                                                                                          </span>
<span class="-745190257815883733" onmouseenter="enter('-745190257815883733');" onmouseout="out('-745190257815883733');" style="">1586             // Clear out this reference, otherwise we end up holding it until all of the                 </span>
<span class="4646172956484107396" onmouseenter="enter('4646172956484107396');" onmouseout="out('4646172956484107396');" style="">1587             // callback runnables are done.                                                              </span>
<span class="-5116782011037529434" onmouseenter="enter('-5116782011037529434');" onmouseout="out('-5116782011037529434');" style="">1588             mContext = null;                                                                             </span>
<span  style="">1589                                                                                                          </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1590             synchronized (mLock) {                                                                       </span>
<span class="-2953553521466488464" onmouseenter="enter('-2953553521466488464');" onmouseout="out('-2953553521466488464');" style="">1591                 // If we are still the last one to be scheduled, remove ourselves.                       </span>
<span class="-1560897046285527036" onmouseenter="enter('-1560897046285527036');" onmouseout="out('-1560897046285527036');" style="">1592                 if (mLoaderTask == this) {                                                               </span>
<span class="-8540970856372433004" onmouseenter="enter('-8540970856372433004');" onmouseout="out('-8540970856372433004');" style="">1593                     mLoaderTask = null;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1594                 }                                                                                        </span>
<span class="8472658350888958885" onmouseenter="enter('8472658350888958885');" onmouseout="out('8472658350888958885');" style="">1595                 mIsLoaderTaskRunning = false;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1596             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1597         }                                                                                                </span>
<span  style="">1598                                                                                                          </span>
<span class="200135487053889456" onmouseenter="enter('200135487053889456');" onmouseout="out('200135487053889456');" style="">1599         public void stopLocked() {                                                                       </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1600             synchronized (LoaderTask.this) {                                                             </span>
<span class="8214677179915027824" onmouseenter="enter('8214677179915027824');" onmouseout="out('8214677179915027824');" style="">1601                 mStopped = true;                                                                         </span>
<span class="3056713147428312392" onmouseenter="enter('3056713147428312392');" onmouseout="out('3056713147428312392');" style="">1602                 this.notify();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1603             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1604         }                                                                                                </span>
<span  style="">1605                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1606         /**                                                                                              </span>
<span class="8543020973836575883" onmouseenter="enter('8543020973836575883');" onmouseout="out('8543020973836575883');" style="">1607          * Gets the callbacks object.  If we&#x27;ve been stopped, or if the launcher object                  </span>
<span class="-5710779889390340322" onmouseenter="enter('-5710779889390340322');" onmouseout="out('-5710779889390340322');" style="">1608          * has somehow been garbage collected, return null instead.  Pass in the Callbacks               </span>
<span class="1695163395735776366" onmouseenter="enter('1695163395735776366');" onmouseout="out('1695163395735776366');" style="">1609          * object that was around when the deferred message was scheduled, and if there&#x27;s                </span>
<span class="7856411153887025232" onmouseenter="enter('7856411153887025232');" onmouseout="out('7856411153887025232');" style="">1610          * a new Callbacks object around then also return null.  This will save us from                  </span>
<span class="2242983124447893975" onmouseenter="enter('2242983124447893975');" onmouseout="out('2242983124447893975');" style="">1611          * calling onto it with data that will be ignored.                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1612          */                                                                                              </span>
<span class="-2719659093140206912" onmouseenter="enter('-2719659093140206912');" onmouseout="out('-2719659093140206912');" style="">1613         Callbacks tryGetCallbacks(Callbacks oldCallbacks) {                                              </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1614             synchronized (mLock) {                                                                       </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1615                 if (mStopped) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1616                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1617                 }                                                                                        </span>
<span  style="">1618                                                                                                          </span>
<span class="-1148437149844317216" onmouseenter="enter('-1148437149844317216');" onmouseout="out('-1148437149844317216');" style="">1619                 if (mCallbacks == null) {                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1620                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1621                 }                                                                                        </span>
<span  style="">1622                                                                                                          </span>
<span class="4487336468213395696" onmouseenter="enter('4487336468213395696');" onmouseout="out('4487336468213395696');" style="">1623                 final Callbacks callbacks = mCallbacks.get();                                            </span>
<span class="-1088473782403214817" onmouseenter="enter('-1088473782403214817');" onmouseout="out('-1088473782403214817');" style="">1624                 if (callbacks != oldCallbacks) {                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1625                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1626                 }                                                                                        </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">1627                 if (callbacks == null) {                                                                 </span>
<span class="-94531209925935523" onmouseenter="enter('-94531209925935523');" onmouseout="out('-94531209925935523');" style="">1628                     Log.w(TAG, &quot;no mCallbacks&quot;);                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1629                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1630                 }                                                                                        </span>
<span  style="">1631                                                                                                          </span>
<span class="7316466478630645098" onmouseenter="enter('7316466478630645098');" onmouseout="out('7316466478630645098');" style="">1632                 return callbacks;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1633             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1634         }                                                                                                </span>
<span  style="">1635                                                                                                          </span>
<span class="-732845747997402687" onmouseenter="enter('-732845747997402687');" onmouseout="out('-732845747997402687');" style="">1636         private void verifyApplications() {                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">1637             final Context context = mApp.getContext();                                                   </span>
<span  style="">1638                                                                                                          </span>
<span class="-895975897487385508" onmouseenter="enter('-895975897487385508');" onmouseout="out('-895975897487385508');" style="">1639             // Cross reference all the applications in our apps list with items in the workspace         </span>
<span class="-10165714367555844" onmouseenter="enter('-10165714367555844');" onmouseout="out('-10165714367555844');" style="">1640             ArrayList&lt;ItemInfo&gt; tmpInfos;                                                                </span>
<span class="-1498611641211142735" onmouseenter="enter('-1498611641211142735');" onmouseout="out('-1498611641211142735');" style="">1641             ArrayList&lt;ItemInfo&gt; added = new ArrayList&lt;ItemInfo&gt;();                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1642             synchronized (sBgLock) {                                                                     </span>
<span class="-8503045385813305184" onmouseenter="enter('-8503045385813305184');" onmouseout="out('-8503045385813305184');" style="">1643                 for (AppInfo app : mBgAllAppsList.data) {                                                </span>
<span class="8719756079786944918" onmouseenter="enter('8719756079786944918');" onmouseout="out('8719756079786944918');" style="">1644                     tmpInfos = getItemInfoForComponentName(app.componentName);                           </span>
<span class="2520781471180992241" onmouseenter="enter('2520781471180992241');" onmouseout="out('2520781471180992241');" style="">1645                     if (tmpInfos.isEmpty()) {                                                            </span>
<span class="-8553694446545507920" onmouseenter="enter('-8553694446545507920');" onmouseout="out('-8553694446545507920');" style="">1646                         // We are missing an application icon, so add this to the workspace              </span>
<span class="-4039639638749761552" onmouseenter="enter('-4039639638749761552');" onmouseout="out('-4039639638749761552');" style="">1647                         added.add(app);                                                                  </span>
<span class="-6087209586339664607" onmouseenter="enter('-6087209586339664607');" onmouseout="out('-6087209586339664607');" style="">1648                         // This is a rare event, so lets log it                                          </span>
<span class="-8409193735080295855" onmouseenter="enter('-8409193735080295855');" onmouseout="out('-8409193735080295855');" style="">1649                         Log.e(TAG, &quot;Missing Application on load: &quot; + app);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1650                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1651                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1652             }                                                                                            </span>
<span class="-3228275885243238792" onmouseenter="enter('-3228275885243238792');" onmouseout="out('-3228275885243238792');" style="">1653             if (!added.isEmpty()) {                                                                      </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">1654                 Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                             </span>
<span class="-7750968314744672785" onmouseenter="enter('-7750968314744672785');" onmouseout="out('-7750968314744672785');" style="">1655                 addAndBindAddedApps(context, added, cb, new ArrayList&lt;AppInfo&gt;());                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1656             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1657         }                                                                                                </span>
<span  style="">1658                                                                                                          </span>
<span class="1799876722918383990" onmouseenter="enter('1799876722918383990');" onmouseout="out('1799876722918383990');" style="">1659         // check &amp; update map of what&#x27;s occupied; used to discard overlapping/invalid items              </span>
<span class="1369641317894879083" onmouseenter="enter('1369641317894879083');" onmouseout="out('1369641317894879083');" style="">1660         private boolean checkItemPlacement(HashMap&lt;Long, ItemInfo[][]&gt; occupied, ItemInfo item,          </span>
<span class="-1114457745240921120" onmouseenter="enter('-1114457745240921120');" onmouseout="out('-1114457745240921120');" style="">1661                                            AtomicBoolean deleteOnInvalidPlacement) {                     </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1662             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1663             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="2610967815704817337" onmouseenter="enter('2610967815704817337');" onmouseout="out('2610967815704817337');" style="">1664             final int countX = (int) grid.numColumns;                                                    </span>
<span class="-4666114634626787340" onmouseenter="enter('-4666114634626787340');" onmouseout="out('-4666114634626787340');" style="">1665             final int countY = (int) grid.numRows;                                                       </span>
<span  style="">1666                                                                                                          </span>
<span class="6034161250987228772" onmouseenter="enter('6034161250987228772');" onmouseout="out('6034161250987228772');" style="">1667             long containerIndex = item.screenId;                                                         </span>
<span class="-7373493273183889597" onmouseenter="enter('-7373493273183889597');" onmouseout="out('-7373493273183889597');" style="">1668             if (item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                        </span>
<span class="2673995963777381740" onmouseenter="enter('2673995963777381740');" onmouseout="out('2673995963777381740');" style="">1669                 // Return early if we detect that an item is under the hotseat button                    </span>
<span class="8439501161968406722" onmouseenter="enter('8439501161968406722');" onmouseout="out('8439501161968406722');" style="">1670                 if (mCallbacks == null ||                                                                </span>
<span class="2765367117287235525" onmouseenter="enter('2765367117287235525');" onmouseout="out('2765367117287235525');" style="">1671                         mCallbacks.get().isAllAppsButtonRank((int) item.screenId)) {                     </span>
<span class="-5585792196891628830" onmouseenter="enter('-5585792196891628830');" onmouseout="out('-5585792196891628830');" style="">1672                     deleteOnInvalidPlacement.set(true);                                                  </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1673                     Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                             </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1674                             + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;                </span>
<span class="-6945266911057923165" onmouseenter="enter('-6945266911057923165');" onmouseout="out('-6945266911057923165');" style="">1675                             + item.cellY + &quot;) occupied by all apps&quot;);                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1676                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1677                 }                                                                                        </span>
<span  style="">1678                                                                                                          </span>
<span class="1283283798458548935" onmouseenter="enter('1283283798458548935');" onmouseout="out('1283283798458548935');" style="">1679                 final ItemInfo[][] hotseatItems =                                                        </span>
<span class="1949963606333422560" onmouseenter="enter('1949963606333422560');" onmouseout="out('1949963606333422560');" style="">1680                         occupied.get((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT);               </span>
<span  style="">1681                                                                                                          </span>
<span class="4306415300339150674" onmouseenter="enter('4306415300339150674');" onmouseout="out('4306415300339150674');" style="">1682                 if (item.screenId &gt;= grid.numHotseatIcons) {                                             </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1683                     Log.e(TAG, &quot;Error loading shortcut &quot; + item                                          </span>
<span class="5751503886607422325" onmouseenter="enter('5751503886607422325');" onmouseout="out('5751503886607422325');" style="">1684                             + &quot; into hotseat position &quot; + item.screenId                                  </span>
<span class="8586084608145250937" onmouseenter="enter('8586084608145250937');" onmouseout="out('8586084608145250937');" style="">1685                             + &quot;, position out of bounds: (0 to &quot; + (grid.numHotseatIcons - 1)            </span>
<span class="4670108460576455524" onmouseenter="enter('4670108460576455524');" onmouseout="out('4670108460576455524');" style="">1686                             + &quot;)&quot;);                                                                      </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1687                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1688                 }                                                                                        </span>
<span  style="">1689                                                                                                          </span>
<span class="-96711597696201103" onmouseenter="enter('-96711597696201103');" onmouseout="out('-96711597696201103');" style="">1690                 if (hotseatItems != null) {                                                              </span>
<span class="-5719492878362044891" onmouseenter="enter('-5719492878362044891');" onmouseout="out('-5719492878362044891');" style="">1691                     if (hotseatItems[(int) item.screenId][0] != null) {                                  </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1692                         Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                         </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1693                                 + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;            </span>
<span class="-5608765342526697238" onmouseenter="enter('-5608765342526697238');" onmouseout="out('-5608765342526697238');" style="">1694                                 + item.cellY + &quot;) occupied by &quot;                                          </span>
<span class="-9216450188742256868" onmouseenter="enter('-9216450188742256868');" onmouseout="out('-9216450188742256868');" style="">1695                                 + occupied.get(LauncherSettings.Favorites.CONTAINER_HOTSEAT)             </span>
<span class="8078550196904492215" onmouseenter="enter('8078550196904492215');" onmouseout="out('8078550196904492215');" style="">1696                                 [(int) item.screenId][0]);                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1697                             return false;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1698                     } else {                                                                             </span>
<span class="774944626646586019" onmouseenter="enter('774944626646586019');" onmouseout="out('774944626646586019');" style="">1699                         hotseatItems[(int) item.screenId][0] = item;                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1700                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1701                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1702                 } else {                                                                                 </span>
<span class="7358314474516221203" onmouseenter="enter('7358314474516221203');" onmouseout="out('7358314474516221203');" style="">1703                     final ItemInfo[][] items = new ItemInfo[(int) grid.numHotseatIcons][1];              </span>
<span class="-9070162012537345427" onmouseenter="enter('-9070162012537345427');" onmouseout="out('-9070162012537345427');" style="">1704                     items[(int) item.screenId][0] = item;                                                </span>
<span class="-8158366679753027651" onmouseenter="enter('-8158366679753027651');" onmouseout="out('-8158366679753027651');" style="">1705                     occupied.put((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT, items);            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1706                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1707                 }                                                                                        </span>
<span class="-303831338253138618" onmouseenter="enter('-303831338253138618');" onmouseout="out('-303831338253138618');" style="">1708             } else if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) {                 </span>
<span class="2023083187637338837" onmouseenter="enter('2023083187637338837');" onmouseout="out('2023083187637338837');" style="">1709                 // Skip further checking if it is not the hotseat or workspace container                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1710                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1711             }                                                                                            </span>
<span  style="">1712                                                                                                          </span>
<span class="4900594953050523912" onmouseenter="enter('4900594953050523912');" onmouseout="out('4900594953050523912');" style="">1713             if (!occupied.containsKey(item.screenId)) {                                                  </span>
<span class="4145930087010840378" onmouseenter="enter('4145930087010840378');" onmouseout="out('4145930087010840378');" style="">1714                 ItemInfo[][] items = new ItemInfo[countX + 1][countY + 1];                               </span>
<span class="1227421706021504577" onmouseenter="enter('1227421706021504577');" onmouseout="out('1227421706021504577');" style="">1715                 occupied.put(item.screenId, items);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1716             }                                                                                            </span>
<span  style="">1717                                                                                                          </span>
<span class="1896300602190974138" onmouseenter="enter('1896300602190974138');" onmouseout="out('1896300602190974138');" style="">1718             final ItemInfo[][] screens = occupied.get(item.screenId);                                    </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">1719             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                        </span>
<span class="-5368423457014206987" onmouseenter="enter('-5368423457014206987');" onmouseout="out('-5368423457014206987');" style="">1720                     item.cellX &lt; 0 || item.cellY &lt; 0 ||                                                  </span>
<span class="-4742334469567284144" onmouseenter="enter('-4742334469567284144');" onmouseout="out('-4742334469567284144');" style="">1721                     item.cellX + item.spanX &gt; countX || item.cellY + item.spanY &gt; countY) {              </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1722                 Log.e(TAG, &quot;Error loading shortcut &quot; + item                                              </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1723                         + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                    </span>
<span class="6594976635866090975" onmouseenter="enter('6594976635866090975');" onmouseout="out('6594976635866090975');" style="">1724                         + item.cellX + &quot;,&quot; + item.cellY                                                  </span>
<span class="7810872796641797088" onmouseenter="enter('7810872796641797088');" onmouseout="out('7810872796641797088');" style="">1725                         + &quot;) out of screen bounds ( &quot; + countX + &quot;x&quot; + countY + &quot;)&quot;);                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1726                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1727             }                                                                                            </span>
<span  style="">1728                                                                                                          </span>
<span class="-5156128896960485993" onmouseenter="enter('-5156128896960485993');" onmouseout="out('-5156128896960485993');" style="">1729             // Check if any workspace icons overlap with each other                                      </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1730             for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                 </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1731                 for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                             </span>
<span class="-6569355555223387047" onmouseenter="enter('-6569355555223387047');" onmouseout="out('-6569355555223387047');" style="">1732                     if (screens[x][y] != null) {                                                         </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1733                         Log.e(TAG, &quot;Error loading shortcut &quot; + item                                      </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1734                             + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                </span>
<span class="6817243246217428495" onmouseenter="enter('6817243246217428495');" onmouseout="out('6817243246217428495');" style="">1735                             + x + &quot;,&quot; + y                                                                </span>
<span class="5682441617128381013" onmouseenter="enter('5682441617128381013');" onmouseout="out('5682441617128381013');" style="">1736                             + &quot;) occupied by &quot;                                                           </span>
<span class="-1033476021967432581" onmouseenter="enter('-1033476021967432581');" onmouseout="out('-1033476021967432581');" style="">1737                             + screens[x][y]);                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1738                         return false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1739                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1740                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1741             }                                                                                            </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1742             for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                 </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1743                 for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                             </span>
<span class="4088526838574697064" onmouseenter="enter('4088526838574697064');" onmouseout="out('4088526838574697064');" style="">1744                     screens[x][y] = item;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1745                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1746             }                                                                                            </span>
<span  style="">1747                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1748             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1749         }                                                                                                </span>
<span  style="">1750                                                                                                          </span>
<span class="-7185136003210132674" onmouseenter="enter('-7185136003210132674');" onmouseout="out('-7185136003210132674');" style="">1751         /** Clears all the sBg data structures */                                                        </span>
<span class="1801132344752176061" onmouseenter="enter('1801132344752176061');" onmouseout="out('1801132344752176061');" style="">1752         private void clearSBgDataStructures() {                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1753             synchronized (sBgLock) {                                                                     </span>
<span class="-7129433888089157992" onmouseenter="enter('-7129433888089157992');" onmouseout="out('-7129433888089157992');" style="">1754                 sBgWorkspaceItems.clear();                                                               </span>
<span class="5052861278193385910" onmouseenter="enter('5052861278193385910');" onmouseout="out('5052861278193385910');" style="">1755                 sBgAppWidgets.clear();                                                                   </span>
<span class="3133219754838100126" onmouseenter="enter('3133219754838100126');" onmouseout="out('3133219754838100126');" style="">1756                 sBgFolders.clear();                                                                      </span>
<span class="-8505695193908377238" onmouseenter="enter('-8505695193908377238');" onmouseout="out('-8505695193908377238');" style="">1757                 sBgItemsIdMap.clear();                                                                   </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1758                 sBgDbIconCache.clear();                                                                  </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1759                 sBgWorkspaceScreens.clear();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1760             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1761         }                                                                                                </span>
<span  style="">1762                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1763         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-134197683999376379" onmouseenter="enter('-134197683999376379');" onmouseout="out('-134197683999376379');" style="">1764         private boolean loadWorkspace() {                                                                </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1765             // Log to disk                                                                               </span>
<span class="-1716174542198683127" onmouseenter="enter('-1716174542198683127');" onmouseout="out('-1716174542198683127');" style="">1766             Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspace()&quot;, true);                                </span>
<span  style="">1767                                                                                                          </span>
<span class="-1293377954506719064" onmouseenter="enter('-1293377954506719064');" onmouseout="out('-1293377954506719064');" style="">1768             final long t = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                               </span>
<span  style="">1769                                                                                                          </span>
<span class="-7540672363138308565" onmouseenter="enter('-7540672363138308565');" onmouseout="out('-7540672363138308565');" style="">1770             final Context context = mContext;                                                            </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1771             final ContentResolver contentResolver = context.getContentResolver();                        </span>
<span class="-2531056455834918617" onmouseenter="enter('-2531056455834918617');" onmouseout="out('-2531056455834918617');" style="">1772             final PackageManager manager = context.getPackageManager();                                  </span>
<span class="9164904653123292763" onmouseenter="enter('9164904653123292763');" onmouseout="out('9164904653123292763');" style="">1773             final AppWidgetManager widgets = AppWidgetManager.getInstance(context);                      </span>
<span class="-100432956626051671" onmouseenter="enter('-100432956626051671');" onmouseout="out('-100432956626051671');" style="">1774             final boolean isSafeMode = manager.isSafeMode();                                             </span>
<span  style="">1775                                                                                                          </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1776             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1777             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="-1268645472287944818" onmouseenter="enter('-1268645472287944818');" onmouseout="out('-1268645472287944818');" style="">1778             int countX = (int) grid.numColumns;                                                          </span>
<span class="5825733578535079508" onmouseenter="enter('5825733578535079508');" onmouseout="out('5825733578535079508');" style="">1779             int countY = (int) grid.numRows;                                                             </span>
<span  style="">1780                                                                                                          </span>
<span class="4685154999280536885" onmouseenter="enter('4685154999280536885');" onmouseout="out('4685154999280536885');" style="">1781             if ((mFlags &amp; LOADER_FLAG_CLEAR_WORKSPACE) != 0) {                                           </span>
<span class="1874866184467615023" onmouseenter="enter('1874866184467615023');" onmouseout="out('1874866184467615023');" style="">1782                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: resetting launcher database&quot;, true);            </span>
<span class="7130003991883838563" onmouseenter="enter('7130003991883838563');" onmouseout="out('7130003991883838563');" style="">1783                 LauncherAppState.getLauncherProvider().deleteDatabase();                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1784             }                                                                                            </span>
<span  style="">1785                                                                                                          </span>
<span class="1786245758308608184" onmouseenter="enter('1786245758308608184');" onmouseout="out('1786245758308608184');" style="">1786             if ((mFlags &amp; LOADER_FLAG_MIGRATE_SHORTCUTS) != 0) {                                         </span>
<span class="2622187273755861990" onmouseenter="enter('2622187273755861990');" onmouseout="out('2622187273755861990');" style="">1787                 // append the user&#x27;s Launcher2 shortcuts                                                 </span>
<span class="7991450201866933364" onmouseenter="enter('7991450201866933364');" onmouseout="out('7991450201866933364');" style="">1788                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: migrating from launcher2&quot;, true);               </span>
<span class="-4928149528895358870" onmouseenter="enter('-4928149528895358870');" onmouseout="out('-4928149528895358870');" style="">1789                 LauncherAppState.getLauncherProvider().migrateLauncher2Shortcuts();                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1790             } else {                                                                                     </span>
<span class="-6772917437561183819" onmouseenter="enter('-6772917437561183819');" onmouseout="out('-6772917437561183819');" style="">1791                 // Make sure the default workspace is loaded                                             </span>
<span class="3161347234478650527" onmouseenter="enter('3161347234478650527');" onmouseout="out('3161347234478650527');" style="">1792                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: loading default favorites&quot;, false);             </span>
<span class="8096870978202898311" onmouseenter="enter('8096870978202898311');" onmouseout="out('8096870978202898311');" style="">1793                 LauncherAppState.getLauncherProvider().loadDefaultFavoritesIfNecessary(0);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1794             }                                                                                            </span>
<span  style="">1795                                                                                                          </span>
<span class="-8222313360488017709" onmouseenter="enter('-8222313360488017709');" onmouseout="out('-8222313360488017709');" style="">1796             // Check if we need to do any upgrade-path logic                                             </span>
<span class="-995379543715394793" onmouseenter="enter('-995379543715394793');" onmouseout="out('-995379543715394793');" style="">1797             // (Includes having just imported default favorites)                                         </span>
<span class="-2313666044770114963" onmouseenter="enter('-2313666044770114963');" onmouseout="out('-2313666044770114963');" style="">1798             boolean loadedOldDb = LauncherAppState.getLauncherProvider().justLoadedOldDb();              </span>
<span  style="">1799                                                                                                          </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1800             // Log to disk                                                                               </span>
<span class="4915608034810943289" onmouseenter="enter('4915608034810943289');" onmouseout="out('4915608034810943289');" style="">1801             Launcher.addDumpLog(TAG, &quot;11683562 -   loadedOldDb: &quot; + loadedOldDb, true);                  </span>
<span  style="">1802                                                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1803             synchronized (sBgLock) {                                                                     </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">1804                 clearSBgDataStructures();                                                                </span>
<span  style="">1805                                                                                                          </span>
<span class="4830013596372552761" onmouseenter="enter('4830013596372552761');" onmouseout="out('4830013596372552761');" style="">1806                 final ArrayList&lt;Long&gt; itemsToRemove = new ArrayList&lt;Long&gt;();                             </span>
<span class="-771425693233218078" onmouseenter="enter('-771425693233218078');" onmouseout="out('-771425693233218078');" style="">1807                 final ArrayList&lt;Long&gt; restoredRows = new ArrayList&lt;Long&gt;();                              </span>
<span class="1337367669825309510" onmouseenter="enter('1337367669825309510');" onmouseout="out('1337367669825309510');" style="">1808                 final Uri contentUri = LauncherSettings.Favorites.CONTENT_URI;                           </span>
<span class="6883183902805060832" onmouseenter="enter('6883183902805060832');" onmouseout="out('6883183902805060832');" style="">1809                 if (DEBUG_LOADERS) Log.d(TAG, &quot;loading model from &quot; + contentUri);                       </span>
<span class="4124323585340312806" onmouseenter="enter('4124323585340312806');" onmouseout="out('4124323585340312806');" style="">1810                 final Cursor c = contentResolver.query(contentUri, null, null, null, null);              </span>
<span  style="">1811                                                                                                          </span>
<span class="-6846195559440228008" onmouseenter="enter('-6846195559440228008');" onmouseout="out('-6846195559440228008');" style="">1812                 // +1 for the hotseat (it can be larger than the workspace)                              </span>
<span class="-6570434370371395868" onmouseenter="enter('-6570434370371395868');" onmouseout="out('-6570434370371395868');" style="">1813                 // Load workspace in reverse order to ensure that latest items are loaded first (and     </span>
<span class="-2496742724026288329" onmouseenter="enter('-2496742724026288329');" onmouseout="out('-2496742724026288329');" style="">1814                 // before any earlier duplicates)                                                        </span>
<span class="-575539041300461201" onmouseenter="enter('-575539041300461201');" onmouseout="out('-575539041300461201');" style="">1815                 final HashMap&lt;Long, ItemInfo[][]&gt; occupied = new HashMap&lt;Long, ItemInfo[][]&gt;();          </span>
<span  style="">1816                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1817                 try {                                                                                    </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style="">1818                     final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);         </span>
<span class="498695732843703978" onmouseenter="enter('498695732843703978');" onmouseout="out('498695732843703978');" style="">1819                     final int intentIndex = c.getColumnIndexOrThrow                                      </span>
<span class="-2710863683168773760" onmouseenter="enter('-2710863683168773760');" onmouseout="out('-2710863683168773760');" style="">1820                             (LauncherSettings.Favorites.INTENT);                                         </span>
<span class="3135911520873448784" onmouseenter="enter('3135911520873448784');" onmouseout="out('3135911520873448784');" style="">1821                     final int titleIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-7080768452290664563" onmouseenter="enter('-7080768452290664563');" onmouseout="out('-7080768452290664563');" style="">1822                             (LauncherSettings.Favorites.TITLE);                                          </span>
<span class="-4350901823494792660" onmouseenter="enter('-4350901823494792660');" onmouseout="out('-4350901823494792660');" style="">1823                     final int iconTypeIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="3108347623629035166" onmouseenter="enter('3108347623629035166');" onmouseout="out('3108347623629035166');" style="">1824                             LauncherSettings.Favorites.ICON_TYPE);                                       </span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style="">1825                     final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);      </span>
<span class="-3909234361304575452" onmouseenter="enter('-3909234361304575452');" onmouseout="out('-3909234361304575452');" style="">1826                     final int iconPackageIndex = c.getColumnIndexOrThrow(                                </span>
<span class="-6787190495105525864" onmouseenter="enter('-6787190495105525864');" onmouseout="out('-6787190495105525864');" style="">1827                             LauncherSettings.Favorites.ICON_PACKAGE);                                    </span>
<span class="7790246664646081463" onmouseenter="enter('7790246664646081463');" onmouseout="out('7790246664646081463');" style="">1828                     final int iconResourceIndex = c.getColumnIndexOrThrow(                               </span>
<span class="-1781116612765105159" onmouseenter="enter('-1781116612765105159');" onmouseout="out('-1781116612765105159');" style="">1829                             LauncherSettings.Favorites.ICON_RESOURCE);                                   </span>
<span class="3335971636920715852" onmouseenter="enter('3335971636920715852');" onmouseout="out('3335971636920715852');" style="">1830                     final int containerIndex = c.getColumnIndexOrThrow(                                  </span>
<span class="6570903028117113418" onmouseenter="enter('6570903028117113418');" onmouseout="out('6570903028117113418');" style="">1831                             LauncherSettings.Favorites.CONTAINER);                                       </span>
<span class="-8309152441179821869" onmouseenter="enter('-8309152441179821869');" onmouseout="out('-8309152441179821869');" style="">1832                     final int itemTypeIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="7255885825914282267" onmouseenter="enter('7255885825914282267');" onmouseout="out('7255885825914282267');" style="">1833                             LauncherSettings.Favorites.ITEM_TYPE);                                       </span>
<span class="-9034335384452522965" onmouseenter="enter('-9034335384452522965');" onmouseout="out('-9034335384452522965');" style="">1834                     final int appWidgetIdIndex = c.getColumnIndexOrThrow(                                </span>
<span class="6807201781176448908" onmouseenter="enter('6807201781176448908');" onmouseout="out('6807201781176448908');" style="">1835                             LauncherSettings.Favorites.APPWIDGET_ID);                                    </span>
<span class="-6125671603078297888" onmouseenter="enter('-6125671603078297888');" onmouseout="out('-6125671603078297888');" style="">1836                     final int appWidgetProviderIndex = c.getColumnIndexOrThrow(                          </span>
<span class="4426033877353236522" onmouseenter="enter('4426033877353236522');" onmouseout="out('4426033877353236522');" style="">1837                             LauncherSettings.Favorites.APPWIDGET_PROVIDER);                              </span>
<span class="-3079236723582024955" onmouseenter="enter('-3079236723582024955');" onmouseout="out('-3079236723582024955');" style="">1838                     final int screenIndex = c.getColumnIndexOrThrow(                                     </span>
<span class="-6667712815858132414" onmouseenter="enter('-6667712815858132414');" onmouseout="out('-6667712815858132414');" style="">1839                             LauncherSettings.Favorites.SCREEN);                                          </span>
<span class="-6867547874094352828" onmouseenter="enter('-6867547874094352828');" onmouseout="out('-6867547874094352828');" style="">1840                     final int cellXIndex = c.getColumnIndexOrThrow                                       </span>
<span class="5262774206366152748" onmouseenter="enter('5262774206366152748');" onmouseout="out('5262774206366152748');" style="">1841                             (LauncherSettings.Favorites.CELLX);                                          </span>
<span class="8831781951312982826" onmouseenter="enter('8831781951312982826');" onmouseout="out('8831781951312982826');" style="">1842                     final int cellYIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-5037082342925021952" onmouseenter="enter('-5037082342925021952');" onmouseout="out('-5037082342925021952');" style="">1843                             (LauncherSettings.Favorites.CELLY);                                          </span>
<span class="4727532435646923125" onmouseenter="enter('4727532435646923125');" onmouseout="out('4727532435646923125');" style="">1844                     final int spanXIndex = c.getColumnIndexOrThrow                                       </span>
<span class="-4661771410814353054" onmouseenter="enter('-4661771410814353054');" onmouseout="out('-4661771410814353054');" style="">1845                             (LauncherSettings.Favorites.SPANX);                                          </span>
<span class="-2910068933310438864" onmouseenter="enter('-2910068933310438864');" onmouseout="out('-2910068933310438864');" style="">1846                     final int spanYIndex = c.getColumnIndexOrThrow(                                      </span>
<span class="99270330838913893" onmouseenter="enter('99270330838913893');" onmouseout="out('99270330838913893');" style="">1847                             LauncherSettings.Favorites.SPANY);                                           </span>
<span class="4436227568732015168" onmouseenter="enter('4436227568732015168');" onmouseout="out('4436227568732015168');" style="">1848                     final int restoredIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="6353272533239034373" onmouseenter="enter('6353272533239034373');" onmouseout="out('6353272533239034373');" style="">1849                             LauncherSettings.Favorites.RESTORED);                                        </span>
<span class="4456964937873623262" onmouseenter="enter('4456964937873623262');" onmouseout="out('4456964937873623262');" style="">1850                     //final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);      </span>
<span class="2905983584052764586" onmouseenter="enter('2905983584052764586');" onmouseout="out('2905983584052764586');" style="">1851                     //final int displayModeIndex = c.getColumnIndexOrThrow(                              </span>
<span class="-8556687182597342656" onmouseenter="enter('-8556687182597342656');" onmouseout="out('-8556687182597342656');" style="">1852                     //        LauncherSettings.Favorites.DISPLAY_MODE);                                  </span>
<span  style="">1853                                                                                                          </span>
<span class="-6687913296565100881" onmouseenter="enter('-6687913296565100881');" onmouseout="out('-6687913296565100881');" style="">1854                     ShortcutInfo info;                                                                   </span>
<span class="-4294155297126257121" onmouseenter="enter('-4294155297126257121');" onmouseout="out('-4294155297126257121');" style="">1855                     String intentDescription;                                                            </span>
<span class="1875374791140575019" onmouseenter="enter('1875374791140575019');" onmouseout="out('1875374791140575019');" style="">1856                     LauncherAppWidgetInfo appWidgetInfo;                                                 </span>
<span class="-7299509265635558160" onmouseenter="enter('-7299509265635558160');" onmouseout="out('-7299509265635558160');" style="">1857                     int container;                                                                       </span>
<span class="3268793718289878117" onmouseenter="enter('3268793718289878117');" onmouseout="out('3268793718289878117');" style="">1858                     long id;                                                                             </span>
<span class="-7461708883398711413" onmouseenter="enter('-7461708883398711413');" onmouseout="out('-7461708883398711413');" style="">1859                     Intent intent;                                                                       </span>
<span  style="">1860                                                                                                          </span>
<span class="1538645125823697533" onmouseenter="enter('1538645125823697533');" onmouseout="out('1538645125823697533');" style="">1861                     while (!mStopped &amp;&amp; c.moveToNext()) {                                                </span>
<span class="-3056870665611820276" onmouseenter="enter('-3056870665611820276');" onmouseout="out('-3056870665611820276');" style="">1862                         AtomicBoolean deleteOnInvalidPlacement = new AtomicBoolean(false);               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1863                         try {                                                                            </span>
<span class="-4443967809239824632" onmouseenter="enter('-4443967809239824632');" onmouseout="out('-4443967809239824632');" style="">1864                             int itemType = c.getInt(itemTypeIndex);                                      </span>
<span class="7426878920983746504" onmouseenter="enter('7426878920983746504');" onmouseout="out('7426878920983746504');" style="">1865                             boolean restored = 0 != c.getInt(restoredIndex);                             </span>
<span  style="">1866                                                                                                          </span>
<span class="-5665081285487591411" onmouseenter="enter('-5665081285487591411');" onmouseout="out('-5665081285487591411');" style="">1867                             switch (itemType) {                                                          </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1868                             case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                       </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1869                             case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                          </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1870                                 id = c.getLong(idIndex);                                                 </span>
<span class="8199742400390876563" onmouseenter="enter('8199742400390876563');" onmouseout="out('8199742400390876563');" style="">1871                                 intentDescription = c.getString(intentIndex);                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1872                                 try {                                                                    </span>
<span class="-1059471947143689601" onmouseenter="enter('-1059471947143689601');" onmouseout="out('-1059471947143689601');" style="">1873                                     intent = Intent.parseUri(intentDescription, 0);                      </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style="">1874                                     ComponentName cn = intent.getComponent();                            </span>
<span class="6294222122453554998" onmouseenter="enter('6294222122453554998');" onmouseout="out('6294222122453554998');" style="">1875                                     if (cn != null &amp;&amp; !isValidPackageComponent(manager, cn)) {           </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1876                                         if (restored) {                                                  </span>
<span class="-4075692845887634995" onmouseenter="enter('-4075692845887634995');" onmouseout="out('-4075692845887634995');" style="">1877                                             // might be installed later                                  </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1878                                             Launcher.addDumpLog(TAG,                                     </span>
<span class="1853248294024116603" onmouseenter="enter('1853248294024116603');" onmouseout="out('1853248294024116603');" style="">1879                                                     &quot;package not yet restored: &quot; + cn, true);            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1880                                         } else {                                                         </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">1881                                             if (!mAppsCanBeOnRemoveableStorage) {                        </span>
<span class="-1319340498640723993" onmouseenter="enter('-1319340498640723993');" onmouseout="out('-1319340498640723993');" style="">1882                                                 // Log the invalid package, and remove it                </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1883                                                 Launcher.addDumpLog(TAG,                                 </span>
<span class="556389557067898835" onmouseenter="enter('556389557067898835');" onmouseout="out('556389557067898835');" style="">1884                                                         &quot;Invalid package removed: &quot; + cn, true);         </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1885                                                 itemsToRemove.add(id);                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1886                                             } else {                                                     </span>
<span class="1135766729630553535" onmouseenter="enter('1135766729630553535');" onmouseout="out('1135766729630553535');" style="">1887                                                 // If apps can be on external storage, then we just      </span>
<span class="5840340868837727294" onmouseenter="enter('5840340868837727294');" onmouseout="out('5840340868837727294');" style="">1888                                                 // leave them for the user to remove (maybe add          </span>
<span class="1838795663890338817" onmouseenter="enter('1838795663890338817');" onmouseout="out('1838795663890338817');" style="">1889                                                 // visual treatment to it)                               </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1890                                                 Launcher.addDumpLog(TAG,                                 </span>
<span class="2228900775203516519" onmouseenter="enter('2228900775203516519');" onmouseout="out('2228900775203516519');" style="">1891                                                         &quot;Invalid package found: &quot; + cn, true);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1892                                             }                                                            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1893                                             continue;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1894                                         }                                                                </span>
<span class="8327580054957946681" onmouseenter="enter('8327580054957946681');" onmouseout="out('8327580054957946681');" style="">1895                                     } else if (restored) {                                               </span>
<span class="-9024381775763282363" onmouseenter="enter('-9024381775763282363');" onmouseout="out('-9024381775763282363');" style="">1896                                         // no special handling necessary for this restored item          </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">1897                                         restoredRows.add(id);                                            </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">1898                                         restored = false;                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1899                                     }                                                                    </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">1900                                 } catch (URISyntaxException e) {                                         </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1901                                     Launcher.addDumpLog(TAG,                                             </span>
<span class="-68540878136764174" onmouseenter="enter('-68540878136764174');" onmouseout="out('-68540878136764174');" style="">1902                                             &quot;Invalid uri: &quot; + intentDescription, true);                  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1903                                     continue;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1904                                 }                                                                        </span>
<span  style="">1905                                                                                                          </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1906                                 if (restored) {                                                          </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1907                                     Launcher.addDumpLog(TAG,                                             </span>
<span class="-7520999071046454576" onmouseenter="enter('-7520999071046454576');" onmouseout="out('-7520999071046454576');" style="">1908                                             &quot;constructing info for partially restored package&quot;,          </span>
<span class="-159362617709534437" onmouseenter="enter('-159362617709534437');" onmouseout="out('-159362617709534437');" style="">1909                                             true);                                                       </span>
<span class="2209760928415101992" onmouseenter="enter('2209760928415101992');" onmouseout="out('2209760928415101992');" style="">1910                                     info = getRestoredItemInfo(c, titleIndex);                           </span>
<span class="1789530273111871261" onmouseenter="enter('1789530273111871261');" onmouseout="out('1789530273111871261');" style="">1911                                     intent = getRestoredItemIntent(c, context, intent);                  </span>
<span class="2485815571182318046" onmouseenter="enter('2485815571182318046');" onmouseout="out('2485815571182318046');" style="">1912                                 } else if (itemType ==                                                   </span>
<span class="2369871960694556087" onmouseenter="enter('2369871960694556087');" onmouseout="out('2369871960694556087');" style="">1913                                         LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) {              </span>
<span class="8194872455546731015" onmouseenter="enter('8194872455546731015');" onmouseout="out('8194872455546731015');" style="">1914                                     info = getShortcutInfo(manager, intent, context, c, iconIndex,       </span>
<span class="-2187398528357571993" onmouseenter="enter('-2187398528357571993');" onmouseout="out('-2187398528357571993');" style="">1915                                             titleIndex, mLabelCache);                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1916                                 } else {                                                                 </span>
<span class="-7258494880704199189" onmouseenter="enter('-7258494880704199189');" onmouseout="out('-7258494880704199189');" style="">1917                                     info = getShortcutInfo(c, context, iconTypeIndex,                    </span>
<span class="6962748064109777554" onmouseenter="enter('6962748064109777554');" onmouseout="out('6962748064109777554');" style="">1918                                             iconPackageIndex, iconResourceIndex, iconIndex,              </span>
<span class="-1562426884587851404" onmouseenter="enter('-1562426884587851404');" onmouseout="out('-1562426884587851404');" style="">1919                                             titleIndex);                                                 </span>
<span  style="">1920                                                                                                          </span>
<span class="8787316375412349400" onmouseenter="enter('8787316375412349400');" onmouseout="out('8787316375412349400');" style="">1921                                     // App shortcuts that used to be automatically added to Launcher     </span>
<span class="4423348586531939182" onmouseenter="enter('4423348586531939182');" onmouseout="out('4423348586531939182');" style="">1922                                     // didn&#x27;t always have the correct intent flags set, so do that       </span>
<span class="906874877447394391" onmouseenter="enter('906874877447394391');" onmouseout="out('906874877447394391');" style="">1923                                     // here                                                              </span>
<span class="-8302893811746412301" onmouseenter="enter('-8302893811746412301');" onmouseout="out('-8302893811746412301');" style="">1924                                     if (intent.getAction() != null &amp;&amp;                                    </span>
<span class="-6792431597223839871" onmouseenter="enter('-6792431597223839871');" onmouseout="out('-6792431597223839871');" style="">1925                                         intent.getCategories() != null &amp;&amp;                                </span>
<span class="-4482526573741019726" onmouseenter="enter('-4482526573741019726');" onmouseout="out('-4482526573741019726');" style="">1926                                         intent.getAction().equals(Intent.ACTION_MAIN) &amp;&amp;                 </span>
<span class="8802373298636081036" onmouseenter="enter('8802373298636081036');" onmouseout="out('8802373298636081036');" style="">1927                                         intent.getCategories().contains(Intent.CATEGORY_LAUNCHER)) {     </span>
<span class="-1437204964726011747" onmouseenter="enter('-1437204964726011747');" onmouseout="out('-1437204964726011747');" style="">1928                                         intent.addFlags(                                                 </span>
<span class="7533444403523837279" onmouseenter="enter('7533444403523837279');" onmouseout="out('7533444403523837279');" style="">1929                                             Intent.FLAG_ACTIVITY_NEW_TASK |                              </span>
<span class="754211306232040187" onmouseenter="enter('754211306232040187');" onmouseout="out('754211306232040187');" style="">1930                                             Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1931                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1932                                 }                                                                        </span>
<span  style="">1933                                                                                                          </span>
<span class="-1845287058566655413" onmouseenter="enter('-1845287058566655413');" onmouseout="out('-1845287058566655413');" style="">1934                                 if (info != null) {                                                      </span>
<span class="-7372776081672801393" onmouseenter="enter('-7372776081672801393');" onmouseout="out('-7372776081672801393');" style="">1935                                     info.id = id;                                                        </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">1936                                     info.intent = intent;                                                </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">1937                                     container = c.getInt(containerIndex);                                </span>
<span class="5031599210604047094" onmouseenter="enter('5031599210604047094');" onmouseout="out('5031599210604047094');" style="">1938                                     info.container = container;                                          </span>
<span class="8385513109144822406" onmouseenter="enter('8385513109144822406');" onmouseout="out('8385513109144822406');" style="">1939                                     info.screenId = c.getInt(screenIndex);                               </span>
<span class="8733666235794055799" onmouseenter="enter('8733666235794055799');" onmouseout="out('8733666235794055799');" style="">1940                                     info.cellX = c.getInt(cellXIndex);                                   </span>
<span class="4988345900238836581" onmouseenter="enter('4988345900238836581');" onmouseout="out('4988345900238836581');" style="">1941                                     info.cellY = c.getInt(cellYIndex);                                   </span>
<span class="6314319831626461685" onmouseenter="enter('6314319831626461685');" onmouseout="out('6314319831626461685');" style="">1942                                     info.spanX = 1;                                                      </span>
<span class="-7635592400178984643" onmouseenter="enter('-7635592400178984643');" onmouseout="out('-7635592400178984643');" style="">1943                                     info.spanY = 1;                                                      </span>
<span  style="">1944                                                                                                          </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">1945                                     // check &amp; update map of what&#x27;s occupied                             </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">1946                                     deleteOnInvalidPlacement.set(false);                                 </span>
<span class="8488570468437690238" onmouseenter="enter('8488570468437690238');" onmouseout="out('8488570468437690238');" style="">1947                                     if (!checkItemPlacement(occupied, info, deleteOnInvalidPlacement)) { </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">1948                                         if (deleteOnInvalidPlacement.get()) {                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1949                                             itemsToRemove.add(id);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1950                                         }                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1951                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1952                                     }                                                                    </span>
<span  style="">1953                                                                                                          </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">1954                                     switch (container) {                                                 </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">1955                                     case LauncherSettings.Favorites.CONTAINER_DESKTOP:                   </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">1956                                     case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                   </span>
<span class="-3665356032627215639" onmouseenter="enter('-3665356032627215639');" onmouseout="out('-3665356032627215639');" style="">1957                                         sBgWorkspaceItems.add(info);                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1958                                         break;                                                           </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">1959                                     default:                                                             </span>
<span class="3928258456344537563" onmouseenter="enter('3928258456344537563');" onmouseout="out('3928258456344537563');" style="">1960                                         // Item is in a user folder                                      </span>
<span class="7253808449036323039" onmouseenter="enter('7253808449036323039');" onmouseout="out('7253808449036323039');" style="">1961                                         FolderInfo folderInfo =                                          </span>
<span class="5827700611550420594" onmouseenter="enter('5827700611550420594');" onmouseout="out('5827700611550420594');" style="">1962                                                 findOrMakeFolder(sBgFolders, container);                 </span>
<span class="4210631970925384436" onmouseenter="enter('4210631970925384436');" onmouseout="out('4210631970925384436');" style="">1963                                         folderInfo.add(info);                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1964                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1965                                     }                                                                    </span>
<span class="-3593974647070903374" onmouseenter="enter('-3593974647070903374');" onmouseout="out('-3593974647070903374');" style="">1966                                     sBgItemsIdMap.put(info.id, info);                                    </span>
<span  style="">1967                                                                                                          </span>
<span class="-8292894264257510493" onmouseenter="enter('-8292894264257510493');" onmouseout="out('-8292894264257510493');" style="">1968                                     // now that we&#x27;ve loaded everthing re-save it with the               </span>
<span class="-1917607236140731811" onmouseenter="enter('-1917607236140731811');" onmouseout="out('-1917607236140731811');" style="">1969                                     // icon in case it disappears somehow.                               </span>
<span class="-3056528193758781985" onmouseenter="enter('-3056528193758781985');" onmouseout="out('-3056528193758781985');" style="">1970                                     queueIconToBeChecked(sBgDbIconCache, info, c, iconIndex);            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1971                                 } else {                                                                 </span>
<span class="477637279977673890" onmouseenter="enter('477637279977673890');" onmouseout="out('477637279977673890');" style="">1972                                     throw new RuntimeException(&quot;Unexpected null ShortcutInfo&quot;);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1973                                 }                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1974                                 break;                                                                   </span>
<span  style="">1975                                                                                                          </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1976                             case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                            </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1977                                 id = c.getLong(idIndex);                                                 </span>
<span class="-711784092642716417" onmouseenter="enter('-711784092642716417');" onmouseout="out('-711784092642716417');" style="">1978                                 FolderInfo folderInfo = findOrMakeFolder(sBgFolders, id);                </span>
<span  style="">1979                                                                                                          </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style="">1980                                 folderInfo.title = c.getString(titleIndex);                              </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style="">1981                                 folderInfo.id = id;                                                      </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">1982                                 container = c.getInt(containerIndex);                                    </span>
<span class="-7029361904102133577" onmouseenter="enter('-7029361904102133577');" onmouseout="out('-7029361904102133577');" style="">1983                                 folderInfo.container = container;                                        </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style="">1984                                 folderInfo.screenId = c.getInt(screenIndex);                             </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style="">1985                                 folderInfo.cellX = c.getInt(cellXIndex);                                 </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style="">1986                                 folderInfo.cellY = c.getInt(cellYIndex);                                 </span>
<span class="5610283855861400391" onmouseenter="enter('5610283855861400391');" onmouseout="out('5610283855861400391');" style="">1987                                 folderInfo.spanX = 1;                                                    </span>
<span class="-3495026741287589829" onmouseenter="enter('-3495026741287589829');" onmouseout="out('-3495026741287589829');" style="">1988                                 folderInfo.spanY = 1;                                                    </span>
<span  style="">1989                                                                                                          </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">1990                                 // check &amp; update map of what&#x27;s occupied                                 </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">1991                                 deleteOnInvalidPlacement.set(false);                                     </span>
<span class="-7285209150210174951" onmouseenter="enter('-7285209150210174951');" onmouseout="out('-7285209150210174951');" style="">1992                                 if (!checkItemPlacement(occupied, folderInfo,                            </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">1993                                         deleteOnInvalidPlacement)) {                                     </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">1994                                     if (deleteOnInvalidPlacement.get()) {                                </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1995                                         itemsToRemove.add(id);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1996                                     }                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1997                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1998                                 }                                                                        </span>
<span  style="">1999                                                                                                          </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">2000                                 switch (container) {                                                     </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">2001                                     case LauncherSettings.Favorites.CONTAINER_DESKTOP:                   </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">2002                                     case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                   </span>
<span class="-8699935089398023363" onmouseenter="enter('-8699935089398023363');" onmouseout="out('-8699935089398023363');" style="">2003                                         sBgWorkspaceItems.add(folderInfo);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2004                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2005                                 }                                                                        </span>
<span  style="">2006                                                                                                          </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">2007                                 if (restored) {                                                          </span>
<span class="-4442362781295313201" onmouseenter="enter('-4442362781295313201');" onmouseout="out('-4442362781295313201');" style="">2008                                     // no special handling required for restored folders                 </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2009                                     restoredRows.add(id);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2010                                 }                                                                        </span>
<span  style="">2011                                                                                                          </span>
<span class="-3375208674862622715" onmouseenter="enter('-3375208674862622715');" onmouseout="out('-3375208674862622715');" style="">2012                                 sBgItemsIdMap.put(folderInfo.id, folderInfo);                            </span>
<span class="642717865586237287" onmouseenter="enter('642717865586237287');" onmouseout="out('642717865586237287');" style="">2013                                 sBgFolders.put(folderInfo.id, folderInfo);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2014                                 break;                                                                   </span>
<span  style="">2015                                                                                                          </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">2016                             case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                         </span>
<span class="-7956270215965694003" onmouseenter="enter('-7956270215965694003');" onmouseout="out('-7956270215965694003');" style="">2017                                 // Read all Launcher-specific widget details                             </span>
<span class="-1812352292626846958" onmouseenter="enter('-1812352292626846958');" onmouseout="out('-1812352292626846958');" style="">2018                                 int appWidgetId = c.getInt(appWidgetIdIndex);                            </span>
<span class="7731617805561144619" onmouseenter="enter('7731617805561144619');" onmouseout="out('7731617805561144619');" style="">2019                                 String savedProvider = c.getString(appWidgetProviderIndex);              </span>
<span  style="">2020                                                                                                          </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2021                                 id = c.getLong(idIndex);                                                 </span>
<span  style="">2022                                                                                                          </span>
<span class="-94114412789236238" onmouseenter="enter('-94114412789236238');" onmouseout="out('-94114412789236238');" style="">2023                                 final AppWidgetProviderInfo provider =                                   </span>
<span class="1226551708060925883" onmouseenter="enter('1226551708060925883');" onmouseout="out('1226551708060925883');" style="">2024                                         widgets.getAppWidgetInfo(appWidgetId);                           </span>
<span  style="">2025                                                                                                          </span>
<span class="-3663768974834964011" onmouseenter="enter('-3663768974834964011');" onmouseout="out('-3663768974834964011');" style="">2026                                 if (!isSafeMode &amp;&amp; (provider == null || provider.provider == null ||     </span>
<span class="5896854251752877894" onmouseenter="enter('5896854251752877894');" onmouseout="out('5896854251752877894');" style="">2027                                         provider.provider.getPackageName() == null)) {                   </span>
<span class="6295139059851294613" onmouseenter="enter('6295139059851294613');" onmouseout="out('6295139059851294613');" style="">2028                                     String log = &quot;Deleting widget that isn&#x27;t installed anymore: id=&quot;     </span>
<span class="-582482747679217469" onmouseenter="enter('-582482747679217469');" onmouseout="out('-582482747679217469');" style="">2029                                         + id + &quot; appWidgetId=&quot; + appWidgetId;                            </span>
<span class="-1161653447976501517" onmouseenter="enter('-1161653447976501517');" onmouseout="out('-1161653447976501517');" style="">2030                                     Log.e(TAG, log);                                                     </span>
<span class="-8769286334876902652" onmouseenter="enter('-8769286334876902652');" onmouseout="out('-8769286334876902652');" style="">2031                                     Launcher.addDumpLog(TAG, log, false);                                </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2032                                     itemsToRemove.add(id);                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2033                                 } else {                                                                 </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="">2034                                     appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,               </span>
<span class="-1699940082949791423" onmouseenter="enter('-1699940082949791423');" onmouseout="out('-1699940082949791423');" style="">2035                                             provider.provider);                                          </span>
<span class="-3490214853915757695" onmouseenter="enter('-3490214853915757695');" onmouseout="out('-3490214853915757695');" style="">2036                                     appWidgetInfo.id = id;                                               </span>
<span class="-299823112742514494" onmouseenter="enter('-299823112742514494');" onmouseout="out('-299823112742514494');" style="">2037                                     appWidgetInfo.screenId = c.getInt(screenIndex);                      </span>
<span class="-3031374252236192886" onmouseenter="enter('-3031374252236192886');" onmouseout="out('-3031374252236192886');" style="">2038                                     appWidgetInfo.cellX = c.getInt(cellXIndex);                          </span>
<span class="-6373958662014470902" onmouseenter="enter('-6373958662014470902');" onmouseout="out('-6373958662014470902');" style="">2039                                     appWidgetInfo.cellY = c.getInt(cellYIndex);                          </span>
<span class="-1172974300892817728" onmouseenter="enter('-1172974300892817728');" onmouseout="out('-1172974300892817728');" style="">2040                                     appWidgetInfo.spanX = c.getInt(spanXIndex);                          </span>
<span class="948367348399442562" onmouseenter="enter('948367348399442562');" onmouseout="out('948367348399442562');" style="">2041                                     appWidgetInfo.spanY = c.getInt(spanYIndex);                          </span>
<span class="-5791068135067534357" onmouseenter="enter('-5791068135067534357');" onmouseout="out('-5791068135067534357');" style="">2042                                     int[] minSpan = Launcher.getMinSpanForWidget(context, provider);     </span>
<span class="663337698221632344" onmouseenter="enter('663337698221632344');" onmouseout="out('663337698221632344');" style="">2043                                     appWidgetInfo.minSpanX = minSpan[0];                                 </span>
<span class="-1876557735779698161" onmouseenter="enter('-1876557735779698161');" onmouseout="out('-1876557735779698161');" style="">2044                                     appWidgetInfo.minSpanY = minSpan[1];                                 </span>
<span  style="">2045                                                                                                          </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2046                                     container = c.getInt(containerIndex);                                </span>
<span class="8804482754730728288" onmouseenter="enter('8804482754730728288');" onmouseout="out('8804482754730728288');" style="">2047                                     if (container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;     </span>
<span class="-8875646165072629077" onmouseenter="enter('-8875646165072629077');" onmouseout="out('-8875646165072629077');" style="">2048                                         container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {     </span>
<span class="8088576139032825639" onmouseenter="enter('8088576139032825639');" onmouseout="out('8088576139032825639');" style="">2049                                         Log.e(TAG, &quot;Widget found where container != &quot; +                  </span>
<span class="8462700098092543731" onmouseenter="enter('8462700098092543731');" onmouseout="out('8462700098092543731');" style="">2050                                             &quot;CONTAINER_DESKTOP nor CONTAINER_HOTSEAT - ignoring!&quot;);      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2051                                         continue;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2052                                     }                                                                    </span>
<span  style="">2053                                                                                                          </span>
<span class="3497044279011134930" onmouseenter="enter('3497044279011134930');" onmouseout="out('3497044279011134930');" style="">2054                                     appWidgetInfo.container = c.getInt(containerIndex);                  </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2055                                     // check &amp; update map of what&#x27;s occupied                             </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2056                                     deleteOnInvalidPlacement.set(false);                                 </span>
<span class="8646654463595497950" onmouseenter="enter('8646654463595497950');" onmouseout="out('8646654463595497950');" style="">2057                                     if (!checkItemPlacement(occupied, appWidgetInfo,                     </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">2058                                             deleteOnInvalidPlacement)) {                                 </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2059                                         if (deleteOnInvalidPlacement.get()) {                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2060                                             itemsToRemove.add(id);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2061                                         }                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2062                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2063                                     }                                                                    </span>
<span class="1434382407220101710" onmouseenter="enter('1434382407220101710');" onmouseout="out('1434382407220101710');" style="">2064                                     String providerName = provider.provider.flattenToString();           </span>
<span class="-497618701172789575" onmouseenter="enter('-497618701172789575');" onmouseout="out('-497618701172789575');" style="">2065                                     if (!providerName.equals(savedProvider)) {                           </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2066                                         ContentValues values = new ContentValues();                      </span>
<span class="-1769279011780203877" onmouseenter="enter('-1769279011780203877');" onmouseout="out('-1769279011780203877');" style="">2067                                         values.put(LauncherSettings.Favorites.APPWIDGET_PROVIDER,        </span>
<span class="-4101567385035018098" onmouseenter="enter('-4101567385035018098');" onmouseout="out('-4101567385035018098');" style="">2068                                                 providerName);                                           </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2069                                         String where = BaseColumns._ID + &quot;= ?&quot;;                          </span>
<span class="7642359228989935564" onmouseenter="enter('7642359228989935564');" onmouseout="out('7642359228989935564');" style="">2070                                         String[] args = {Integer.toString(c.getInt(idIndex))};           </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="">2071                                         contentResolver.update(contentUri, values, where, args);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2072                                     }                                                                    </span>
<span class="-5618854840311135348" onmouseenter="enter('-5618854840311135348');" onmouseout="out('-5618854840311135348');" style="">2073                                     sBgItemsIdMap.put(appWidgetInfo.id, appWidgetInfo);                  </span>
<span class="-6085617845739613540" onmouseenter="enter('-6085617845739613540');" onmouseout="out('-6085617845739613540');" style="">2074                                     sBgAppWidgets.add(appWidgetInfo);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2075                                 }                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2076                                 break;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2077                             }                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">2078                         } catch (Exception e) {                                                          </span>
<span class="5473197829797399592" onmouseenter="enter('5473197829797399592');" onmouseout="out('5473197829797399592');" style="">2079                             Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted&quot;, e, true);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2080                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2081                     }                                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2082                 } finally {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2083                     if (c != null) {                                                                     </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">2084                         c.close();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2085                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2086                 }                                                                                        </span>
<span  style="">2087                                                                                                          </span>
<span class="3320499870953658089" onmouseenter="enter('3320499870953658089');" onmouseout="out('3320499870953658089');" style="">2088                 // Break early if we&#x27;ve stopped loading                                                  </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2089                 if (mStopped) {                                                                          </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">2090                     clearSBgDataStructures();                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2091                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2092                 }                                                                                        </span>
<span  style="">2093                                                                                                          </span>
<span class="-1044970196577970229" onmouseenter="enter('-1044970196577970229');" onmouseout="out('-1044970196577970229');" style="">2094                 if (itemsToRemove.size() &gt; 0) {                                                          </span>
<span class="5677517768170489521" onmouseenter="enter('5677517768170489521');" onmouseout="out('5677517768170489521');" style="">2095                     ContentProviderClient client = contentResolver.acquireContentProviderClient(         </span>
<span class="-41995321024364961" onmouseenter="enter('-41995321024364961');" onmouseout="out('-41995321024364961');" style="">2096                             LauncherSettings.Favorites.CONTENT_URI);                                     </span>
<span class="-6328990658741073682" onmouseenter="enter('-6328990658741073682');" onmouseout="out('-6328990658741073682');" style="">2097                     // Remove dead items                                                                 </span>
<span class="-2206673557334024830" onmouseenter="enter('-2206673557334024830');" onmouseout="out('-2206673557334024830');" style="">2098                     for (long id : itemsToRemove) {                                                      </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2099                         if (DEBUG_LOADERS) {                                                             </span>
<span class="1693656419727492070" onmouseenter="enter('1693656419727492070');" onmouseout="out('1693656419727492070');" style="">2100                             Log.d(TAG, &quot;Removed id = &quot; + id);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2101                         }                                                                                </span>
<span class="-756547997470617115" onmouseenter="enter('-756547997470617115');" onmouseout="out('-756547997470617115');" style="">2102                         // Don&#x27;t notify content observers                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2103                         try {                                                                            </span>
<span class="-2525008622658612811" onmouseenter="enter('-2525008622658612811');" onmouseout="out('-2525008622658612811');" style="">2104                             client.delete(LauncherSettings.Favorites.getContentUri(id, false),           </span>
<span class="789653475627010164" onmouseenter="enter('789653475627010164');" onmouseout="out('789653475627010164');" style="">2105                                     null, null);                                                         </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2106                         } catch (RemoteException e) {                                                    </span>
<span class="1576133554677134200" onmouseenter="enter('1576133554677134200');" onmouseout="out('1576133554677134200');" style="">2107                             Log.w(TAG, &quot;Could not remove id = &quot; + id);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2108                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2109                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2110                 }                                                                                        </span>
<span  style="">2111                                                                                                          </span>
<span class="5384601782943406631" onmouseenter="enter('5384601782943406631');" onmouseout="out('5384601782943406631');" style="">2112                 if (restoredRows.size() &gt; 0) {                                                           </span>
<span class="-7146881939578869751" onmouseenter="enter('-7146881939578869751');" onmouseout="out('-7146881939578869751');" style="">2113                     ContentProviderClient updater = contentResolver.acquireContentProviderClient(        </span>
<span class="-41995321024364961" onmouseenter="enter('-41995321024364961');" onmouseout="out('-41995321024364961');" style="">2114                             LauncherSettings.Favorites.CONTENT_URI);                                     </span>
<span class="7218829760546841504" onmouseenter="enter('7218829760546841504');" onmouseout="out('7218829760546841504');" style="">2115                     // Update restored items that no longer require special handling                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2116                     try {                                                                                </span>
<span class="-9131750597640912652" onmouseenter="enter('-9131750597640912652');" onmouseout="out('-9131750597640912652');" style="">2117                         StringBuilder selectionBuilder = new StringBuilder();                            </span>
<span class="-2095273116509361612" onmouseenter="enter('-2095273116509361612');" onmouseout="out('-2095273116509361612');" style="">2118                         selectionBuilder.append(LauncherSettings.Favorites._ID);                         </span>
<span class="6461653116160679746" onmouseenter="enter('6461653116160679746');" onmouseout="out('6461653116160679746');" style="">2119                         selectionBuilder.append(&quot; IN (&quot;);                                                </span>
<span class="5779162458108712939" onmouseenter="enter('5779162458108712939');" onmouseout="out('5779162458108712939');" style="">2120                         selectionBuilder.append(TextUtils.join(&quot;, &quot;, restoredRows));                     </span>
<span class="-266914319355369866" onmouseenter="enter('-266914319355369866');" onmouseout="out('-266914319355369866');" style="">2121                         selectionBuilder.append(&quot;)&quot;);                                                    </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2122                         ContentValues values = new ContentValues();                                      </span>
<span class="-8469115157851156621" onmouseenter="enter('-8469115157851156621');" onmouseout="out('-8469115157851156621');" style="">2123                         values.put(LauncherSettings.Favorites.RESTORED, 0);                              </span>
<span class="8477028357087705336" onmouseenter="enter('8477028357087705336');" onmouseout="out('8477028357087705336');" style="">2124                         updater.update(LauncherSettings.Favorites.CONTENT_URI,                           </span>
<span class="-593768018781143118" onmouseenter="enter('-593768018781143118');" onmouseout="out('-593768018781143118');" style="">2125                                 values, selectionBuilder.toString(), null);                              </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2126                     } catch (RemoteException e) {                                                        </span>
<span class="-2048384695223094681" onmouseenter="enter('-2048384695223094681');" onmouseout="out('-2048384695223094681');" style="">2127                         Log.w(TAG, &quot;Could not update restored rows&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2128                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2129                 }                                                                                        </span>
<span  style="">2130                                                                                                          </span>
<span class="-4804263783578470698" onmouseenter="enter('-4804263783578470698');" onmouseout="out('-4804263783578470698');" style="">2131                 if (loadedOldDb) {                                                                       </span>
<span class="7600073100480404232" onmouseenter="enter('7600073100480404232');" onmouseout="out('7600073100480404232');" style="">2132                     long maxScreenId = 0;                                                                </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2133                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2134                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2135                         long screenId = item.screenId;                                                   </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2136                         if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;            </span>
<span class="2624616925341674614" onmouseenter="enter('2624616925341674614');" onmouseout="out('2624616925341674614');" style="">2137                                 !sBgWorkspaceScreens.contains(screenId)) {                               </span>
<span class="-7031445051311703943" onmouseenter="enter('-7031445051311703943');" onmouseout="out('-7031445051311703943');" style="">2138                             sBgWorkspaceScreens.add(screenId);                                           </span>
<span class="3854679960473080150" onmouseenter="enter('3854679960473080150');" onmouseout="out('3854679960473080150');" style="">2139                             if (screenId &gt; maxScreenId) {                                                </span>
<span class="1021049293401799489" onmouseenter="enter('1021049293401799489');" onmouseout="out('1021049293401799489');" style="">2140                                 maxScreenId = screenId;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2141                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2142                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2143                     }                                                                                    </span>
<span class="6350361387624057443" onmouseenter="enter('6350361387624057443');" onmouseout="out('6350361387624057443');" style="">2144                     Collections.sort(sBgWorkspaceScreens);                                               </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2145                     // Log to disk                                                                       </span>
<span class="866898408466051726" onmouseenter="enter('866898408466051726');" onmouseout="out('866898408466051726');" style="">2146                     Launcher.addDumpLog(TAG, &quot;11683562 -   maxScreenId: &quot; + maxScreenId, true);          </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2147                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                      </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2148                             TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                            </span>
<span  style="">2149                                                                                                          </span>
<span class="7230913638388732518" onmouseenter="enter('7230913638388732518');" onmouseout="out('7230913638388732518');" style="">2150                     LauncherAppState.getLauncherProvider().updateMaxScreenId(maxScreenId);               </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2151                     updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                            </span>
<span  style="">2152                                                                                                          </span>
<span class="7660079450024453672" onmouseenter="enter('7660079450024453672');" onmouseout="out('7660079450024453672');" style="">2153                     // Update the max item id after we load an old db                                    </span>
<span class="-1395936485676380465" onmouseenter="enter('-1395936485676380465');" onmouseout="out('-1395936485676380465');" style="">2154                     long maxItemId = 0;                                                                  </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2155                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2156                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="570221416877950678" onmouseenter="enter('570221416877950678');" onmouseout="out('570221416877950678');" style="">2157                         maxItemId = Math.max(maxItemId, item.id);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2158                     }                                                                                    </span>
<span class="-9163109107539651846" onmouseenter="enter('-9163109107539651846');" onmouseout="out('-9163109107539651846');" style="">2159                     LauncherAppState.getLauncherProvider().updateMaxItemId(maxItemId);                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2160                 } else {                                                                                 </span>
<span class="-2685559954044032059" onmouseenter="enter('-2685559954044032059');" onmouseout="out('-2685559954044032059');" style="">2161                     TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(mContext);            </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">2162                     for (Integer i : orderedScreens.keySet()) {                                          </span>
<span class="6018672691004586758" onmouseenter="enter('6018672691004586758');" onmouseout="out('6018672691004586758');" style="">2163                         sBgWorkspaceScreens.add(orderedScreens.get(i));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2164                     }                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2165                     // Log to disk                                                                       </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2166                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                      </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2167                             TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                            </span>
<span  style="">2168                                                                                                          </span>
<span class="4349099944219760178" onmouseenter="enter('4349099944219760178');" onmouseout="out('4349099944219760178');" style="">2169                     // Remove any empty screens                                                          </span>
<span class="4802911702169047278" onmouseenter="enter('4802911702169047278');" onmouseout="out('4802911702169047278');" style="">2170                     ArrayList&lt;Long&gt; unusedScreens = new ArrayList&lt;Long&gt;(sBgWorkspaceScreens);            </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2171                     for (ItemInfo item: sBgItemsIdMap.values()) {                                        </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2172                         long screenId = item.screenId;                                                   </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2173                         if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;            </span>
<span class="2084246428391599841" onmouseenter="enter('2084246428391599841');" onmouseout="out('2084246428391599841');" style="">2174                                 unusedScreens.contains(screenId)) {                                      </span>
<span class="2563817896724806900" onmouseenter="enter('2563817896724806900');" onmouseout="out('2563817896724806900');" style="">2175                             unusedScreens.remove(screenId);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2176                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2177                     }                                                                                    </span>
<span  style="">2178                                                                                                          </span>
<span class="589140823506694046" onmouseenter="enter('589140823506694046');" onmouseout="out('589140823506694046');" style="">2179                     // If there are any empty screens remove them, and update.                           </span>
<span class="-6359391369875412389" onmouseenter="enter('-6359391369875412389');" onmouseout="out('-6359391369875412389');" style="">2180                     if (unusedScreens.size() != 0) {                                                     </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2181                         // Log to disk                                                                   </span>
<span class="7523849534574985307" onmouseenter="enter('7523849534574985307');" onmouseout="out('7523849534574985307');" style="">2182                         Launcher.addDumpLog(TAG, &quot;11683562 -   unusedScreens (to be removed): &quot; +        </span>
<span class="-5777150032383965255" onmouseenter="enter('-5777150032383965255');" onmouseout="out('-5777150032383965255');" style="">2183                                 TextUtils.join(&quot;, &quot;, unusedScreens), true);                              </span>
<span  style="">2184                                                                                                          </span>
<span class="672027419163159367" onmouseenter="enter('672027419163159367');" onmouseout="out('672027419163159367');" style="">2185                         sBgWorkspaceScreens.removeAll(unusedScreens);                                    </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2186                         updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2187                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2188                 }                                                                                        </span>
<span  style="">2189                                                                                                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2190                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="7893701829803555503" onmouseenter="enter('7893701829803555503');" onmouseout="out('7893701829803555503');" style="">2191                     Log.d(TAG, &quot;loaded workspace in &quot; + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);          </span>
<span class="-4264600990510120523" onmouseenter="enter('-4264600990510120523');" onmouseout="out('-4264600990510120523');" style="">2192                     Log.d(TAG, &quot;workspace layout: &quot;);                                                    </span>
<span class="-7545020173780618827" onmouseenter="enter('-7545020173780618827');" onmouseout="out('-7545020173780618827');" style="">2193                     int nScreens = occupied.size();                                                      </span>
<span class="-1430677680506572849" onmouseenter="enter('-1430677680506572849');" onmouseout="out('-1430677680506572849');" style="">2194                     for (int y = 0; y &lt; countY; y++) {                                                   </span>
<span class="7912371425440139270" onmouseenter="enter('7912371425440139270');" onmouseout="out('7912371425440139270');" style="">2195                         String line = &quot;&quot;;                                                                </span>
<span  style="">2196                                                                                                          </span>
<span class="6696569755228044488" onmouseenter="enter('6696569755228044488');" onmouseout="out('6696569755228044488');" style="">2197                         Iterator&lt;Long&gt; iter = occupied.keySet().iterator();                              </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2198                         while (iter.hasNext()) {                                                         </span>
<span class="5362610809116292523" onmouseenter="enter('5362610809116292523');" onmouseout="out('5362610809116292523');" style="">2199                             long screenId = iter.next();                                                 </span>
<span class="-6362485911021715109" onmouseenter="enter('-6362485911021715109');" onmouseout="out('-6362485911021715109');" style="">2200                             if (screenId &gt; 0) {                                                          </span>
<span class="6140668759815587097" onmouseenter="enter('6140668759815587097');" onmouseout="out('6140668759815587097');" style="">2201                                 line += &quot; | &quot;;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2202                             }                                                                            </span>
<span class="5745233440242438196" onmouseenter="enter('5745233440242438196');" onmouseout="out('5745233440242438196');" style="">2203                             for (int x = 0; x &lt; countX; x++) {                                           </span>
<span class="5427490612738327413" onmouseenter="enter('5427490612738327413');" onmouseout="out('5427490612738327413');" style="">2204                                 line += ((occupied.get(screenId)[x][y] != null) ? &quot;#&quot; : &quot;.&quot;);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2205                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2206                         }                                                                                </span>
<span class="-6176135763032133271" onmouseenter="enter('-6176135763032133271');" onmouseout="out('-6176135763032133271');" style="">2207                         Log.d(TAG, &quot;[ &quot; + line + &quot; ]&quot;);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2208                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2209                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2210             }                                                                                            </span>
<span class="-4220264685598194490" onmouseenter="enter('-4220264685598194490');" onmouseout="out('-4220264685598194490');" style="">2211             return loadedOldDb;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2212         }                                                                                                </span>
<span  style="">2213                                                                                                          </span>
<span class="2277304499071840713" onmouseenter="enter('2277304499071840713');" onmouseout="out('2277304499071840713');" style="">2214         /** Filters the set of items who are directly or indirectly (via another container) on the       </span>
<span class="1409652257454698285" onmouseenter="enter('1409652257454698285');" onmouseout="out('1409652257454698285');" style="">2215          * specified screen. */                                                                          </span>
<span class="8795548304182075511" onmouseenter="enter('8795548304182075511');" onmouseout="out('8795548304182075511');" style="">2216         private void filterCurrentWorkspaceItems(long currentScreenId,                                   </span>
<span class="6681054994536048179" onmouseenter="enter('6681054994536048179');" onmouseout="out('6681054994536048179');" style="">2217                 ArrayList&lt;ItemInfo&gt; allWorkspaceItems,                                                   </span>
<span class="-22694560885899086" onmouseenter="enter('-22694560885899086');" onmouseout="out('-22694560885899086');" style="">2218                 ArrayList&lt;ItemInfo&gt; currentScreenItems,                                                  </span>
<span class="-4268074281529251610" onmouseenter="enter('-4268074281529251610');" onmouseout="out('-4268074281529251610');" style="">2219                 ArrayList&lt;ItemInfo&gt; otherScreenItems) {                                                  </span>
<span class="-3054856766549342984" onmouseenter="enter('-3054856766549342984');" onmouseout="out('-3054856766549342984');" style="">2220             // Purge any null ItemInfos                                                                  </span>
<span class="4510640209834542816" onmouseenter="enter('4510640209834542816');" onmouseout="out('4510640209834542816');" style="">2221             Iterator&lt;ItemInfo&gt; iter = allWorkspaceItems.iterator();                                      </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2222             while (iter.hasNext()) {                                                                     </span>
<span class="1859715860533284250" onmouseenter="enter('1859715860533284250');" onmouseout="out('1859715860533284250');" style="">2223                 ItemInfo i = iter.next();                                                                </span>
<span class="-7805046366392198151" onmouseenter="enter('-7805046366392198151');" onmouseout="out('-7805046366392198151');" style="">2224                 if (i == null) {                                                                         </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">2225                     iter.remove();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2226                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2227             }                                                                                            </span>
<span  style="">2228                                                                                                          </span>
<span class="-717820765531723775" onmouseenter="enter('-717820765531723775');" onmouseout="out('-717820765531723775');" style="">2229             // Order the set of items by their containers first, this allows use to walk through the     </span>
<span class="603841325148737819" onmouseenter="enter('603841325148737819');" onmouseout="out('603841325148737819');" style="">2230             // list sequentially, build up a list of containers that are in the specified screen,        </span>
<span class="4141488165570775341" onmouseenter="enter('4141488165570775341');" onmouseout="out('4141488165570775341');" style="">2231             // as well as all items in those containers.                                                 </span>
<span class="-9034158841912487174" onmouseenter="enter('-9034158841912487174');" onmouseout="out('-9034158841912487174');" style="">2232             Set&lt;Long&gt; itemsOnScreen = new HashSet&lt;Long&gt;();                                               </span>
<span class="8519661802904254165" onmouseenter="enter('8519661802904254165');" onmouseout="out('8519661802904254165');" style="">2233             Collections.sort(allWorkspaceItems, new Comparator&lt;ItemInfo&gt;() {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2234                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2235                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="-1156155221818606914" onmouseenter="enter('-1156155221818606914');" onmouseout="out('-1156155221818606914');" style="">2236                     return (int) (lhs.container - rhs.container);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2237                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2238             });                                                                                          </span>
<span class="8857216393150717712" onmouseenter="enter('8857216393150717712');" onmouseout="out('8857216393150717712');" style="">2239             for (ItemInfo info : allWorkspaceItems) {                                                    </span>
<span class="6411036295955728093" onmouseenter="enter('6411036295955728093');" onmouseout="out('6411036295955728093');" style="">2240                 if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                    </span>
<span class="243509375570472667" onmouseenter="enter('243509375570472667');" onmouseout="out('243509375570472667');" style="">2241                     if (info.screenId == currentScreenId) {                                              </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2242                         currentScreenItems.add(info);                                                    </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2243                         itemsOnScreen.add(info.id);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2244                     } else {                                                                             </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2245                         otherScreenItems.add(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2246                     }                                                                                    </span>
<span class="8644731164584182238" onmouseenter="enter('8644731164584182238');" onmouseout="out('8644731164584182238');" style="">2247                 } else if (info.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {             </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2248                     currentScreenItems.add(info);                                                        </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2249                     itemsOnScreen.add(info.id);                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2250                 } else {                                                                                 </span>
<span class="580654991680085358" onmouseenter="enter('580654991680085358');" onmouseout="out('580654991680085358');" style="">2251                     if (itemsOnScreen.contains(info.container)) {                                        </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2252                         currentScreenItems.add(info);                                                    </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2253                         itemsOnScreen.add(info.id);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2254                     } else {                                                                             </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2255                         otherScreenItems.add(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2256                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2257                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2258             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2259         }                                                                                                </span>
<span  style="">2260                                                                                                          </span>
<span class="-2345588268248786161" onmouseenter="enter('-2345588268248786161');" onmouseout="out('-2345588268248786161');" style="">2261         /** Filters the set of widgets which are on the specified screen. */                             </span>
<span class="7796530082634599981" onmouseenter="enter('7796530082634599981');" onmouseout="out('7796530082634599981');" style="">2262         private void filterCurrentAppWidgets(long currentScreenId,                                       </span>
<span class="-6457080946795761374" onmouseenter="enter('-6457080946795761374');" onmouseout="out('-6457080946795761374');" style="">2263                 ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                             </span>
<span class="-4085190208868862406" onmouseenter="enter('-4085190208868862406');" onmouseout="out('-4085190208868862406');" style="">2264                 ArrayList&lt;LauncherAppWidgetInfo&gt; currentScreenWidgets,                                   </span>
<span class="-9000722418092093369" onmouseenter="enter('-9000722418092093369');" onmouseout="out('-9000722418092093369');" style="">2265                 ArrayList&lt;LauncherAppWidgetInfo&gt; otherScreenWidgets) {                                   </span>
<span  style="">2266                                                                                                          </span>
<span class="298213435107913715" onmouseenter="enter('298213435107913715');" onmouseout="out('298213435107913715');" style="">2267             for (LauncherAppWidgetInfo widget : appWidgets) {                                            </span>
<span class="2476844624609784590" onmouseenter="enter('2476844624609784590');" onmouseout="out('2476844624609784590');" style="">2268                 if (widget == null) continue;                                                            </span>
<span class="8795712760973120755" onmouseenter="enter('8795712760973120755');" onmouseout="out('8795712760973120755');" style="">2269                 if (widget.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                  </span>
<span class="-573639449604607321" onmouseenter="enter('-573639449604607321');" onmouseout="out('-573639449604607321');" style="">2270                         widget.screenId == currentScreenId) {                                            </span>
<span class="-7467860973438659792" onmouseenter="enter('-7467860973438659792');" onmouseout="out('-7467860973438659792');" style="">2271                     currentScreenWidgets.add(widget);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2272                 } else {                                                                                 </span>
<span class="918127297832417083" onmouseenter="enter('918127297832417083');" onmouseout="out('918127297832417083');" style="">2273                     otherScreenWidgets.add(widget);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2274                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2275             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2276         }                                                                                                </span>
<span  style="">2277                                                                                                          </span>
<span class="2890739696266248059" onmouseenter="enter('2890739696266248059');" onmouseout="out('2890739696266248059');" style="">2278         /** Filters the set of folders which are on the specified screen. */                             </span>
<span class="1006156668309097499" onmouseenter="enter('1006156668309097499');" onmouseout="out('1006156668309097499');" style="">2279         private void filterCurrentFolders(long currentScreenId,                                          </span>
<span class="5542015090877593488" onmouseenter="enter('5542015090877593488');" onmouseout="out('5542015090877593488');" style="">2280                 HashMap&lt;Long, ItemInfo&gt; itemsIdMap,                                                      </span>
<span class="5439463415012784721" onmouseenter="enter('5439463415012784721');" onmouseout="out('5439463415012784721');" style="">2281                 HashMap&lt;Long, FolderInfo&gt; folders,                                                       </span>
<span class="-835326304871961386" onmouseenter="enter('-835326304871961386');" onmouseout="out('-835326304871961386');" style="">2282                 HashMap&lt;Long, FolderInfo&gt; currentScreenFolders,                                          </span>
<span class="-5337898381804311151" onmouseenter="enter('-5337898381804311151');" onmouseout="out('-5337898381804311151');" style="">2283                 HashMap&lt;Long, FolderInfo&gt; otherScreenFolders) {                                          </span>
<span  style="">2284                                                                                                          </span>
<span class="5476103458254751398" onmouseenter="enter('5476103458254751398');" onmouseout="out('5476103458254751398');" style="">2285             for (long id : folders.keySet()) {                                                           </span>
<span class="-1043527829048640643" onmouseenter="enter('-1043527829048640643');" onmouseout="out('-1043527829048640643');" style="">2286                 ItemInfo info = itemsIdMap.get(id);                                                      </span>
<span class="2660177146353218833" onmouseenter="enter('2660177146353218833');" onmouseout="out('2660177146353218833');" style="">2287                 FolderInfo folder = folders.get(id);                                                     </span>
<span class="1070396563257369459" onmouseenter="enter('1070396563257369459');" onmouseout="out('1070396563257369459');" style="">2288                 if (info == null || folder == null) continue;                                            </span>
<span class="-2700526009056688618" onmouseenter="enter('-2700526009056688618');" onmouseout="out('-2700526009056688618');" style="">2289                 if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                    </span>
<span class="-6694119585175412501" onmouseenter="enter('-6694119585175412501');" onmouseout="out('-6694119585175412501');" style="">2290                         info.screenId == currentScreenId) {                                              </span>
<span class="9103793645851851238" onmouseenter="enter('9103793645851851238');" onmouseout="out('9103793645851851238');" style="">2291                     currentScreenFolders.put(id, folder);                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2292                 } else {                                                                                 </span>
<span class="2209694610169579401" onmouseenter="enter('2209694610169579401');" onmouseout="out('2209694610169579401');" style="">2293                     otherScreenFolders.put(id, folder);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2294                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2295             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2296         }                                                                                                </span>
<span  style="">2297                                                                                                          </span>
<span class="-1404838629334872973" onmouseenter="enter('-1404838629334872973');" onmouseout="out('-1404838629334872973');" style="">2298         /** Sorts the set of items by hotseat, workspace (spatially from top to bottom, left to          </span>
<span class="2331484748997422212" onmouseenter="enter('2331484748997422212');" onmouseout="out('2331484748997422212');" style="">2299          * right) */                                                                                     </span>
<span class="4197577433481844567" onmouseenter="enter('4197577433481844567');" onmouseout="out('4197577433481844567');" style="">2300         private void sortWorkspaceItemsSpatially(ArrayList&lt;ItemInfo&gt; workspaceItems) {                   </span>
<span class="1185328747399966274" onmouseenter="enter('1185328747399966274');" onmouseout="out('1185328747399966274');" style="">2301             final LauncherAppState app = LauncherAppState.getInstance();                                 </span>
<span class="7124839587395892858" onmouseenter="enter('7124839587395892858');" onmouseout="out('7124839587395892858');" style="">2302             final DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                          </span>
<span class="7420301678455304067" onmouseenter="enter('7420301678455304067');" onmouseout="out('7420301678455304067');" style="">2303             // XXX: review this                                                                          </span>
<span class="5036789581710507500" onmouseenter="enter('5036789581710507500');" onmouseout="out('5036789581710507500');" style="">2304             Collections.sort(workspaceItems, new Comparator&lt;ItemInfo&gt;() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2305                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2306                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="7519014981914073063" onmouseenter="enter('7519014981914073063');" onmouseout="out('7519014981914073063');" style="">2307                     int cellCountX = (int) grid.numColumns;                                              </span>
<span class="5038685396458105053" onmouseenter="enter('5038685396458105053');" onmouseout="out('5038685396458105053');" style="">2308                     int cellCountY = (int) grid.numRows;                                                 </span>
<span class="2270724071285143981" onmouseenter="enter('2270724071285143981');" onmouseout="out('2270724071285143981');" style="">2309                     int screenOffset = cellCountX * cellCountY;                                          </span>
<span class="-1359829540566141263" onmouseenter="enter('-1359829540566141263');" onmouseout="out('-1359829540566141263');" style="">2310                     int containerOffset = screenOffset * (Launcher.SCREEN_COUNT + 1); // +1 hotseat      </span>
<span class="-5686828087182476360" onmouseenter="enter('-5686828087182476360');" onmouseout="out('-5686828087182476360');" style="">2311                     long lr = (lhs.container * containerOffset + lhs.screenId * screenOffset +           </span>
<span class="7712455780852264002" onmouseenter="enter('7712455780852264002');" onmouseout="out('7712455780852264002');" style="">2312                             lhs.cellY * cellCountX + lhs.cellX);                                         </span>
<span class="4979104026657461493" onmouseenter="enter('4979104026657461493');" onmouseout="out('4979104026657461493');" style="">2313                     long rr = (rhs.container * containerOffset + rhs.screenId * screenOffset +           </span>
<span class="-2381270400025166051" onmouseenter="enter('-2381270400025166051');" onmouseout="out('-2381270400025166051');" style="">2314                             rhs.cellY * cellCountX + rhs.cellX);                                         </span>
<span class="-4118467969899844825" onmouseenter="enter('-4118467969899844825');" onmouseout="out('-4118467969899844825');" style="">2315                     return (int) (lr - rr);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2316                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2317             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2318         }                                                                                                </span>
<span  style="">2319                                                                                                          </span>
<span class="-2914095713166652734" onmouseenter="enter('-2914095713166652734');" onmouseout="out('-2914095713166652734');" style="">2320         private void bindWorkspaceScreens(final Callbacks oldCallbacks,                                  </span>
<span class="-4834279311466229697" onmouseenter="enter('-4834279311466229697');" onmouseout="out('-4834279311466229697');" style="">2321                 final ArrayList&lt;Long&gt; orderedScreens) {                                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2322             final Runnable r = new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2323                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2324                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2325                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2326                     if (callbacks != null) {                                                             </span>
<span class="-657438592163932392" onmouseenter="enter('-657438592163932392');" onmouseout="out('-657438592163932392');" style="">2327                         callbacks.bindScreens(orderedScreens);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2328                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2329                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2330             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2331             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2332         }                                                                                                </span>
<span  style="">2333                                                                                                          </span>
<span class="2462723938814167389" onmouseenter="enter('2462723938814167389');" onmouseout="out('2462723938814167389');" style="">2334         private void bindWorkspaceItems(final Callbacks oldCallbacks,                                    </span>
<span class="3131608111144182051" onmouseenter="enter('3131608111144182051');" onmouseout="out('3131608111144182051');" style="">2335                 final ArrayList&lt;ItemInfo&gt; workspaceItems,                                                </span>
<span class="-9171435870290402492" onmouseenter="enter('-9171435870290402492');" onmouseout="out('-9171435870290402492');" style="">2336                 final ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                       </span>
<span class="-215271553361392889" onmouseenter="enter('-215271553361392889');" onmouseout="out('-215271553361392889');" style="">2337                 final HashMap&lt;Long, FolderInfo&gt; folders,                                                 </span>
<span class="8358584326194096705" onmouseenter="enter('8358584326194096705');" onmouseout="out('8358584326194096705');" style="">2338                 ArrayList&lt;Runnable&gt; deferredBindRunnables) {                                             </span>
<span  style="">2339                                                                                                          </span>
<span class="6705996702729308966" onmouseenter="enter('6705996702729308966');" onmouseout="out('6705996702729308966');" style="">2340             final boolean postOnMainThread = (deferredBindRunnables != null);                            </span>
<span  style="">2341                                                                                                          </span>
<span class="-8582136977498244048" onmouseenter="enter('-8582136977498244048');" onmouseout="out('-8582136977498244048');" style="">2342             // Bind the workspace items                                                                  </span>
<span class="-7354566132986496753" onmouseenter="enter('-7354566132986496753');" onmouseout="out('-7354566132986496753');" style="">2343             int N = workspaceItems.size();                                                               </span>
<span class="8316943469476905111" onmouseenter="enter('8316943469476905111');" onmouseout="out('8316943469476905111');" style="">2344             for (int i = 0; i &lt; N; i += ITEMS_CHUNK) {                                                   </span>
<span class="4892427267481855411" onmouseenter="enter('4892427267481855411');" onmouseout="out('4892427267481855411');" style="">2345                 final int start = i;                                                                     </span>
<span class="-1876539668545683746" onmouseenter="enter('-1876539668545683746');" onmouseout="out('-1876539668545683746');" style="">2346                 final int chunkSize = (i+ITEMS_CHUNK &lt;= N) ? ITEMS_CHUNK : (N-i);                        </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2347                 final Runnable r = new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2348                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2349                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2350                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2351                         if (callbacks != null) {                                                         </span>
<span class="5089922212197568209" onmouseenter="enter('5089922212197568209');" onmouseout="out('5089922212197568209');" style="">2352                             callbacks.bindItems(workspaceItems, start, start+chunkSize,                  </span>
<span class="9106099237950392606" onmouseenter="enter('9106099237950392606');" onmouseout="out('9106099237950392606');" style="">2353                                     false);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2354                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2355                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2356                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2357                 if (postOnMainThread) {                                                                  </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2358                     deferredBindRunnables.add(r);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2359                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2360                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2361                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2362             }                                                                                            </span>
<span  style="">2363                                                                                                          </span>
<span class="-3289339942871725334" onmouseenter="enter('-3289339942871725334');" onmouseout="out('-3289339942871725334');" style="">2364             // Bind the folders                                                                          </span>
<span class="-7483796215228262161" onmouseenter="enter('-7483796215228262161');" onmouseout="out('-7483796215228262161');" style="">2365             if (!folders.isEmpty()) {                                                                    </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2366                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2367                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2368                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2369                         if (callbacks != null) {                                                         </span>
<span class="-5386182796873001970" onmouseenter="enter('-5386182796873001970');" onmouseout="out('-5386182796873001970');" style="">2370                             callbacks.bindFolders(folders);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2371                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2372                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2373                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2374                 if (postOnMainThread) {                                                                  </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2375                     deferredBindRunnables.add(r);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2376                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2377                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2378                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2379             }                                                                                            </span>
<span  style="">2380                                                                                                          </span>
<span class="-3655716380766613611" onmouseenter="enter('-3655716380766613611');" onmouseout="out('-3655716380766613611');" style="">2381             // Bind the widgets, one at a time                                                           </span>
<span class="-8489280060790503293" onmouseenter="enter('-8489280060790503293');" onmouseout="out('-8489280060790503293');" style="">2382             N = appWidgets.size();                                                                       </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2383             for (int i = 0; i &lt; N; i++) {                                                                </span>
<span class="1244623159456991119" onmouseenter="enter('1244623159456991119');" onmouseout="out('1244623159456991119');" style="">2384                 final LauncherAppWidgetInfo widget = appWidgets.get(i);                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2385                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2386                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2387                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2388                         if (callbacks != null) {                                                         </span>
<span class="-6128295543460120155" onmouseenter="enter('-6128295543460120155');" onmouseout="out('-6128295543460120155');" style="">2389                             callbacks.bindAppWidget(widget);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2390                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2391                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2392                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2393                 if (postOnMainThread) {                                                                  </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2394                     deferredBindRunnables.add(r);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2395                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2396                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2397                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2398             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2399         }                                                                                                </span>
<span  style="">2400                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2401         /**                                                                                              </span>
<span class="2657234197326019604" onmouseenter="enter('2657234197326019604');" onmouseout="out('2657234197326019604');" style="">2402          * Binds all loaded data to actual views on the main thread.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2403          */                                                                                              </span>
<span class="2515782410575020505" onmouseenter="enter('2515782410575020505');" onmouseout="out('2515782410575020505');" style="">2404         private void bindWorkspace(int synchronizeBindPage, final boolean isUpgradePath) {               </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2405             final long t = SystemClock.uptimeMillis();                                                   </span>
<span class="-6867724507948428803" onmouseenter="enter('-6867724507948428803');" onmouseout="out('-6867724507948428803');" style="">2406             Runnable r;                                                                                  </span>
<span  style="">2407                                                                                                          </span>
<span class="7433359470613785749" onmouseenter="enter('7433359470613785749');" onmouseout="out('7433359470613785749');" style="">2408             // Don&#x27;t use these two variables in any of the callback runnables.                           </span>
<span class="-3941343762342876699" onmouseenter="enter('-3941343762342876699');" onmouseout="out('-3941343762342876699');" style="">2409             // Otherwise we hold a reference to them.                                                    </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2410             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2411             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2412                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="3451244406562267616" onmouseenter="enter('3451244406562267616');" onmouseout="out('3451244406562267616');" style="">2413                 Log.w(TAG, &quot;LoaderTask running with no launcher&quot;);                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2414                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2415             }                                                                                            </span>
<span  style="">2416                                                                                                          </span>
<span class="1896400737527502430" onmouseenter="enter('1896400737527502430');" onmouseout="out('1896400737527502430');" style="">2417             // Save a copy of all the bg-thread collections                                              </span>
<span class="8376150118125167095" onmouseenter="enter('8376150118125167095');" onmouseout="out('8376150118125167095');" style="">2418             ArrayList&lt;ItemInfo&gt; workspaceItems = new ArrayList&lt;ItemInfo&gt;();                              </span>
<span class="-9044996375001817267" onmouseenter="enter('-9044996375001817267');" onmouseout="out('-9044996375001817267');" style="">2419             ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets =                                                </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2420                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="1486993560554459234" onmouseenter="enter('1486993560554459234');" onmouseout="out('1486993560554459234');" style="">2421             HashMap&lt;Long, FolderInfo&gt; folders = new HashMap&lt;Long, FolderInfo&gt;();                         </span>
<span class="-2531396011753159513" onmouseenter="enter('-2531396011753159513');" onmouseout="out('-2531396011753159513');" style="">2422             HashMap&lt;Long, ItemInfo&gt; itemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                          </span>
<span class="2122428953856879736" onmouseenter="enter('2122428953856879736');" onmouseout="out('2122428953856879736');" style="">2423             ArrayList&lt;Long&gt; orderedScreenIds = new ArrayList&lt;Long&gt;();                                    </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2424             synchronized (sBgLock) {                                                                     </span>
<span class="2318166879831487746" onmouseenter="enter('2318166879831487746');" onmouseout="out('2318166879831487746');" style="">2425                 workspaceItems.addAll(sBgWorkspaceItems);                                                </span>
<span class="5776161881735381038" onmouseenter="enter('5776161881735381038');" onmouseout="out('5776161881735381038');" style="">2426                 appWidgets.addAll(sBgAppWidgets);                                                        </span>
<span class="1929780610659636161" onmouseenter="enter('1929780610659636161');" onmouseout="out('1929780610659636161');" style="">2427                 folders.putAll(sBgFolders);                                                              </span>
<span class="3382494184063613290" onmouseenter="enter('3382494184063613290');" onmouseout="out('3382494184063613290');" style="">2428                 itemsIdMap.putAll(sBgItemsIdMap);                                                        </span>
<span class="-8476373911620507604" onmouseenter="enter('-8476373911620507604');" onmouseout="out('-8476373911620507604');" style="">2429                 orderedScreenIds.addAll(sBgWorkspaceScreens);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2430             }                                                                                            </span>
<span  style="">2431                                                                                                          </span>
<span class="-6727444800593242016" onmouseenter="enter('-6727444800593242016');" onmouseout="out('-6727444800593242016');" style="">2432             final boolean isLoadingSynchronously =                                                       </span>
<span class="-5819807820500279130" onmouseenter="enter('-5819807820500279130');" onmouseout="out('-5819807820500279130');" style="">2433                     synchronizeBindPage != PagedView.INVALID_RESTORE_PAGE;                               </span>
<span class="2949253642379813881" onmouseenter="enter('2949253642379813881');" onmouseout="out('2949253642379813881');" style="">2434             int currScreen = isLoadingSynchronously ? synchronizeBindPage :                              </span>
<span class="-3178994835189561329" onmouseenter="enter('-3178994835189561329');" onmouseout="out('-3178994835189561329');" style="">2435                 oldCallbacks.getCurrentWorkspaceScreen();                                                </span>
<span class="-8072033936298463796" onmouseenter="enter('-8072033936298463796');" onmouseout="out('-8072033936298463796');" style="">2436             if (currScreen &gt;= orderedScreenIds.size()) {                                                 </span>
<span class="6825640116866860115" onmouseenter="enter('6825640116866860115');" onmouseout="out('6825640116866860115');" style="">2437                 // There may be no workspace screens (just hotseat items and an empty page).             </span>
<span class="-1349681419310339536" onmouseenter="enter('-1349681419310339536');" onmouseout="out('-1349681419310339536');" style="">2438                 currScreen = PagedView.INVALID_RESTORE_PAGE;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2439             }                                                                                            </span>
<span class="-335994314648006585" onmouseenter="enter('-335994314648006585');" onmouseout="out('-335994314648006585');" style="">2440             final int currentScreen = currScreen;                                                        </span>
<span class="2351793782480240365" onmouseenter="enter('2351793782480240365');" onmouseout="out('2351793782480240365');" style="">2441             final long currentScreenId = currentScreen &lt; 0                                               </span>
<span class="-3569859106639415689" onmouseenter="enter('-3569859106639415689');" onmouseout="out('-3569859106639415689');" style="">2442                     ? INVALID_SCREEN_ID : orderedScreenIds.get(currentScreen);                           </span>
<span  style="">2443                                                                                                          </span>
<span class="6814554556760518768" onmouseenter="enter('6814554556760518768');" onmouseout="out('6814554556760518768');" style="">2444             // Load all the items that are on the current page first (and in the process, unbind         </span>
<span class="-8025412368184811901" onmouseenter="enter('-8025412368184811901');" onmouseout="out('-8025412368184811901');" style="">2445             // all the existing workspace items before we call startBinding() below.                     </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style="">2446             unbindWorkspaceItemsOnMainThread();                                                          </span>
<span  style="">2447                                                                                                          </span>
<span class="-2890632990436762470" onmouseenter="enter('-2890632990436762470');" onmouseout="out('-2890632990436762470');" style="">2448             // Separate the items that are on the current screen, and all the other remaining items      </span>
<span class="-1725873569461296561" onmouseenter="enter('-1725873569461296561');" onmouseout="out('-1725873569461296561');" style="">2449             ArrayList&lt;ItemInfo&gt; currentWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                       </span>
<span class="-3652813720009519444" onmouseenter="enter('-3652813720009519444');" onmouseout="out('-3652813720009519444');" style="">2450             ArrayList&lt;ItemInfo&gt; otherWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="1957921863279922763" onmouseenter="enter('1957921863279922763');" onmouseout="out('1957921863279922763');" style="">2451             ArrayList&lt;LauncherAppWidgetInfo&gt; currentAppWidgets =                                         </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2452                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="-340469327534164281" onmouseenter="enter('-340469327534164281');" onmouseout="out('-340469327534164281');" style="">2453             ArrayList&lt;LauncherAppWidgetInfo&gt; otherAppWidgets =                                           </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2454                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="1678682221916250445" onmouseenter="enter('1678682221916250445');" onmouseout="out('1678682221916250445');" style="">2455             HashMap&lt;Long, FolderInfo&gt; currentFolders = new HashMap&lt;Long, FolderInfo&gt;();                  </span>
<span class="6055163357301009248" onmouseenter="enter('6055163357301009248');" onmouseout="out('6055163357301009248');" style="">2456             HashMap&lt;Long, FolderInfo&gt; otherFolders = new HashMap&lt;Long, FolderInfo&gt;();                    </span>
<span  style="">2457                                                                                                          </span>
<span class="-6089822518842723893" onmouseenter="enter('-6089822518842723893');" onmouseout="out('-6089822518842723893');" style="">2458             filterCurrentWorkspaceItems(currentScreenId, workspaceItems, currentWorkspaceItems,          </span>
<span class="-8375758480995422912" onmouseenter="enter('-8375758480995422912');" onmouseout="out('-8375758480995422912');" style="">2459                     otherWorkspaceItems);                                                                </span>
<span class="-866463348054163616" onmouseenter="enter('-866463348054163616');" onmouseout="out('-866463348054163616');" style="">2460             filterCurrentAppWidgets(currentScreenId, appWidgets, currentAppWidgets,                      </span>
<span class="4579895579276341407" onmouseenter="enter('4579895579276341407');" onmouseout="out('4579895579276341407');" style="">2461                     otherAppWidgets);                                                                    </span>
<span class="-8098352111604685386" onmouseenter="enter('-8098352111604685386');" onmouseout="out('-8098352111604685386');" style="">2462             filterCurrentFolders(currentScreenId, itemsIdMap, folders, currentFolders,                   </span>
<span class="9146999591596374961" onmouseenter="enter('9146999591596374961');" onmouseout="out('9146999591596374961');" style="">2463                     otherFolders);                                                                       </span>
<span class="-3334490908115707670" onmouseenter="enter('-3334490908115707670');" onmouseout="out('-3334490908115707670');" style="">2464             sortWorkspaceItemsSpatially(currentWorkspaceItems);                                          </span>
<span class="7557616132302919391" onmouseenter="enter('7557616132302919391');" onmouseout="out('7557616132302919391');" style="">2465             sortWorkspaceItemsSpatially(otherWorkspaceItems);                                            </span>
<span  style="">2466                                                                                                          </span>
<span class="-5681027322920042460" onmouseenter="enter('-5681027322920042460');" onmouseout="out('-5681027322920042460');" style="">2467             // Tell the workspace that we&#x27;re about to start binding items                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2468             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2469                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2470                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2471                     if (callbacks != null) {                                                             </span>
<span class="-4858717627969339167" onmouseenter="enter('-4858717627969339167');" onmouseout="out('-4858717627969339167');" style="">2472                         callbacks.startBinding();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2473                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2474                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2475             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2476             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span  style="">2477                                                                                                          </span>
<span class="5270406270692369283" onmouseenter="enter('5270406270692369283');" onmouseout="out('5270406270692369283');" style="">2478             bindWorkspaceScreens(oldCallbacks, orderedScreenIds);                                        </span>
<span  style="">2479                                                                                                          </span>
<span class="-8614752954403058095" onmouseenter="enter('-8614752954403058095');" onmouseout="out('-8614752954403058095');" style="">2480             // Load items on the current page                                                            </span>
<span class="7514755776427017102" onmouseenter="enter('7514755776427017102');" onmouseout="out('7514755776427017102');" style="">2481             bindWorkspaceItems(oldCallbacks, currentWorkspaceItems, currentAppWidgets,                   </span>
<span class="-6104188658851873503" onmouseenter="enter('-6104188658851873503');" onmouseout="out('-6104188658851873503');" style="">2482                     currentFolders, null);                                                               </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2483             if (isLoadingSynchronously) {                                                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2484                 r = new Runnable() {                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2485                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2486                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="1520569606497568986" onmouseenter="enter('1520569606497568986');" onmouseout="out('1520569606497568986');" style="">2487                         if (callbacks != null &amp;&amp; currentScreen != PagedView.INVALID_RESTORE_PAGE) {      </span>
<span class="-8453570054408401460" onmouseenter="enter('-8453570054408401460');" onmouseout="out('-8453570054408401460');" style="">2488                             callbacks.onPageBoundSynchronously(currentScreen);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2489                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2490                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2491                 };                                                                                       </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2492                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2493             }                                                                                            </span>
<span  style="">2494                                                                                                          </span>
<span class="-5413736965388393233" onmouseenter="enter('-5413736965388393233');" onmouseout="out('-5413736965388393233');" style="">2495             // Load all the remaining pages (if we are loading synchronously, we want to defer this      </span>
<span class="-2955787106587599134" onmouseenter="enter('-2955787106587599134');" onmouseout="out('-2955787106587599134');" style="">2496             // work until after the first render)                                                        </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">2497             mDeferredBindRunnables.clear();                                                              </span>
<span class="5032352887958756295" onmouseenter="enter('5032352887958756295');" onmouseout="out('5032352887958756295');" style="">2498             bindWorkspaceItems(oldCallbacks, otherWorkspaceItems, otherAppWidgets, otherFolders,         </span>
<span class="-2167949041803207061" onmouseenter="enter('-2167949041803207061');" onmouseout="out('-2167949041803207061');" style="">2499                     (isLoadingSynchronously ? mDeferredBindRunnables : null));                           </span>
<span  style="">2500                                                                                                          </span>
<span class="4011061048965913553" onmouseenter="enter('4011061048965913553');" onmouseout="out('4011061048965913553');" style="">2501             // Tell the workspace that we&#x27;re done binding items                                          </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2502             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2503                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2504                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2505                     if (callbacks != null) {                                                             </span>
<span class="4571657590383009749" onmouseenter="enter('4571657590383009749');" onmouseout="out('4571657590383009749');" style="">2506                         callbacks.finishBindingItems(isUpgradePath);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2507                     }                                                                                    </span>
<span  style="">2508                                                                                                          </span>
<span class="3327220122133784387" onmouseenter="enter('3327220122133784387');" onmouseout="out('3327220122133784387');" style="">2509                     // If we&#x27;re profiling, ensure this is the last thing in the queue.                   </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2510                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="355954012869630075" onmouseenter="enter('355954012869630075');" onmouseout="out('355954012869630075');" style="">2511                         Log.d(TAG, &quot;bound workspace in &quot;                                                 </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2512                             + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2513                     }                                                                                    </span>
<span  style="">2514                                                                                                          </span>
<span class="-2372807547969983284" onmouseenter="enter('-2372807547969983284');" onmouseout="out('-2372807547969983284');" style="">2515                     mIsLoadingAndBindingWorkspace = false;                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2516                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2517             };                                                                                           </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2518             if (isLoadingSynchronously) {                                                                </span>
<span class="-7585940083186897617" onmouseenter="enter('-7585940083186897617');" onmouseout="out('-7585940083186897617');" style="">2519                 mDeferredBindRunnables.add(r);                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2520             } else {                                                                                     </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2521                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2522             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2523         }                                                                                                </span>
<span  style="">2524                                                                                                          </span>
<span class="-8837645024880398734" onmouseenter="enter('-8837645024880398734');" onmouseout="out('-8837645024880398734');" style="">2525         private void loadAndBindAllApps() {                                                              </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2526             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-2830976254331120227" onmouseenter="enter('-2830976254331120227');" onmouseout="out('-2830976254331120227');" style="">2527                 Log.d(TAG, &quot;loadAndBindAllApps mAllAppsLoaded=&quot; + mAllAppsLoaded);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2528             }                                                                                            </span>
<span class="-6125216986221494355" onmouseenter="enter('-6125216986221494355');" onmouseout="out('-6125216986221494355');" style="">2529             if (!mAllAppsLoaded) {                                                                       </span>
<span class="5842757820135196564" onmouseenter="enter('5842757820135196564');" onmouseout="out('5842757820135196564');" style="">2530                 loadAllApps();                                                                           </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">2531                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2532                     if (mStopped) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2533                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2534                     }                                                                                    </span>
<span class="4623635226903027710" onmouseenter="enter('4623635226903027710');" onmouseout="out('4623635226903027710');" style="">2535                     mAllAppsLoaded = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2536                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2537             } else {                                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">2538                 onlyBindAllApps();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2539             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2540         }                                                                                                </span>
<span  style="">2541                                                                                                          </span>
<span class="4707433981787810272" onmouseenter="enter('4707433981787810272');" onmouseout="out('4707433981787810272');" style="">2542         private void onlyBindAllApps() {                                                                 </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2543             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2544             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2545                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="1659909424723635951" onmouseenter="enter('1659909424723635951');" onmouseout="out('1659909424723635951');" style="">2546                 Log.w(TAG, &quot;LoaderTask running with no launcher (onlyBindAllApps)&quot;);                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2547                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2548             }                                                                                            </span>
<span  style="">2549                                                                                                          </span>
<span class="904073869424416989" onmouseenter="enter('904073869424416989');" onmouseout="out('904073869424416989');" style="">2550             // shallow copy                                                                              </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">2551             @SuppressWarnings(&quot;unchecked&quot;)                                                               </span>
<span class="6400779648201267598" onmouseenter="enter('6400779648201267598');" onmouseout="out('6400779648201267598');" style="">2552             final ArrayList&lt;AppInfo&gt; list                                                                </span>
<span class="-2385577679344520462" onmouseenter="enter('-2385577679344520462');" onmouseout="out('-2385577679344520462');" style="">2553                     = (ArrayList&lt;AppInfo&gt;) mBgAllAppsList.data.clone();                                  </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">2554             Runnable r = new Runnable() {                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2555                 public void run() {                                                                      </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2556                     final long t = SystemClock.uptimeMillis();                                           </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2557                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2558                     if (callbacks != null) {                                                             </span>
<span class="-4175293191087427555" onmouseenter="enter('-4175293191087427555');" onmouseout="out('-4175293191087427555');" style="">2559                         callbacks.bindAllApplications(list);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2560                     }                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2561                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="-8852680552322187165" onmouseenter="enter('-8852680552322187165');" onmouseout="out('-8852680552322187165');" style="">2562                         Log.d(TAG, &quot;bound all &quot; + list.size() + &quot; apps from cache in &quot;                   </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2563                                 + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2564                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2565                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2566             };                                                                                           </span>
<span class="1625697599418198126" onmouseenter="enter('1625697599418198126');" onmouseout="out('1625697599418198126');" style="">2567             boolean isRunningOnMainThread = !(sWorkerThread.getThreadId() == Process.myTid());           </span>
<span class="-5455987777066046644" onmouseenter="enter('-5455987777066046644');" onmouseout="out('-5455987777066046644');" style="">2568             if (isRunningOnMainThread) {                                                                 </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style="">2569                 r.run();                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2570             } else {                                                                                     </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="">2571                 mHandler.post(r);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2572             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2573         }                                                                                                </span>
<span  style="">2574                                                                                                          </span>
<span class="-6895852158956881814" onmouseenter="enter('-6895852158956881814');" onmouseout="out('-6895852158956881814');" style="">2575         private void loadAllApps() {                                                                     </span>
<span class="3240137791137450764" onmouseenter="enter('3240137791137450764');" onmouseout="out('3240137791137450764');" style="">2576             final long loadTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                        </span>
<span  style="">2577                                                                                                          </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2578             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2579             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2580                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="-6509823964207432628" onmouseenter="enter('-6509823964207432628');" onmouseout="out('-6509823964207432628');" style="">2581                 Log.w(TAG, &quot;LoaderTask running with no launcher (loadAllApps)&quot;);                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2582                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2583             }                                                                                            </span>
<span  style="">2584                                                                                                          </span>
<span class="1501892088590866369" onmouseenter="enter('1501892088590866369');" onmouseout="out('1501892088590866369');" style="">2585             final PackageManager packageManager = mContext.getPackageManager();                          </span>
<span class="3249044048564826962" onmouseenter="enter('3249044048564826962');" onmouseout="out('3249044048564826962');" style="">2586             final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);                              </span>
<span class="7749064114250496515" onmouseenter="enter('7749064114250496515');" onmouseout="out('7749064114250496515');" style="">2587             mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                            </span>
<span  style="">2588                                                                                                          </span>
<span class="2323997493385795900" onmouseenter="enter('2323997493385795900');" onmouseout="out('2323997493385795900');" style="">2589             // Clear the list of apps                                                                    </span>
<span class="-3100741238331493656" onmouseenter="enter('-3100741238331493656');" onmouseout="out('-3100741238331493656');" style="">2590             mBgAllAppsList.clear();                                                                      </span>
<span  style="">2591                                                                                                          </span>
<span class="-4489177435133431981" onmouseenter="enter('-4489177435133431981');" onmouseout="out('-4489177435133431981');" style="">2592             // Query for the set of apps                                                                 </span>
<span class="6799319218362813943" onmouseenter="enter('6799319218362813943');" onmouseout="out('6799319218362813943');" style="">2593             final long qiaTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                         </span>
<span class="-7993784721640929386" onmouseenter="enter('-7993784721640929386');" onmouseout="out('-7993784721640929386');" style="">2594             List&lt;ResolveInfo&gt; apps = packageManager.queryIntentActivities(mainIntent, 0);                </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2595             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-8953089628779584367" onmouseenter="enter('-8953089628779584367');" onmouseout="out('-8953089628779584367');" style="">2596                 Log.d(TAG, &quot;queryIntentActivities took &quot;                                                 </span>
<span class="8237341079980485738" onmouseenter="enter('8237341079980485738');" onmouseout="out('8237341079980485738');" style="">2597                         + (SystemClock.uptimeMillis()-qiaTime) + &quot;ms&quot;);                                  </span>
<span class="-9015079490762020933" onmouseenter="enter('-9015079490762020933');" onmouseout="out('-9015079490762020933');" style="">2598                 Log.d(TAG, &quot;queryIntentActivities got &quot; + apps.size() + &quot; apps&quot;);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2599             }                                                                                            </span>
<span class="-1144129018602551066" onmouseenter="enter('-1144129018602551066');" onmouseout="out('-1144129018602551066');" style="">2600             // Fail if we don&#x27;t have any apps                                                            </span>
<span class="-1385682343056466434" onmouseenter="enter('-1385682343056466434');" onmouseout="out('-1385682343056466434');" style="">2601             if (apps == null || apps.isEmpty()) {                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2602                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2603             }                                                                                            </span>
<span class="-5585112001695951885" onmouseenter="enter('-5585112001695951885');" onmouseout="out('-5585112001695951885');" style="">2604             // Sort the applications by name                                                             </span>
<span class="5879018485786384871" onmouseenter="enter('5879018485786384871');" onmouseout="out('5879018485786384871');" style="">2605             final long sortTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                        </span>
<span class="3347614076781191804" onmouseenter="enter('3347614076781191804');" onmouseout="out('3347614076781191804');" style="">2606             Collections.sort(apps,                                                                       </span>
<span class="-8211974845882715204" onmouseenter="enter('-8211974845882715204');" onmouseout="out('-8211974845882715204');" style="">2607                     new LauncherModel.ShortcutNameComparator(packageManager, mLabelCache));              </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2608             if (DEBUG_LOADERS) {                                                                         </span>
<span class="8116347759372038508" onmouseenter="enter('8116347759372038508');" onmouseout="out('8116347759372038508');" style="">2609                 Log.d(TAG, &quot;sort took &quot;                                                                  </span>
<span class="992817212926202968" onmouseenter="enter('992817212926202968');" onmouseout="out('992817212926202968');" style="">2610                         + (SystemClock.uptimeMillis()-sortTime) + &quot;ms&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2611             }                                                                                            </span>
<span  style="">2612                                                                                                          </span>
<span class="7729934896614039986" onmouseenter="enter('7729934896614039986');" onmouseout="out('7729934896614039986');" style="">2613             // Create the ApplicationInfos                                                               </span>
<span class="-5895751517948944509" onmouseenter="enter('-5895751517948944509');" onmouseout="out('-5895751517948944509');" style="">2614             for (int i = 0; i &lt; apps.size(); i++) {                                                      </span>
<span class="2626157602240887809" onmouseenter="enter('2626157602240887809');" onmouseout="out('2626157602240887809');" style="">2615                 ResolveInfo app = apps.get(i);                                                           </span>
<span class="3586781851650279349" onmouseenter="enter('3586781851650279349');" onmouseout="out('3586781851650279349');" style="">2616                 // This builds the icon bitmaps.                                                         </span>
<span class="-6607005785467864621" onmouseenter="enter('-6607005785467864621');" onmouseout="out('-6607005785467864621');" style="">2617                 mBgAllAppsList.add(new AppInfo(packageManager, app,                                      </span>
<span class="-2018038209439913805" onmouseenter="enter('-2018038209439913805');" onmouseout="out('-2018038209439913805');" style="">2618                         mIconCache, mLabelCache));                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2619             }                                                                                            </span>
<span  style="">2620                                                                                                          </span>
<span class="-5221747652878631284" onmouseenter="enter('-5221747652878631284');" onmouseout="out('-5221747652878631284');" style="">2621             // Huh? Shouldn&#x27;t this be inside the Runnable below?                                         </span>
<span class="4457761250277868019" onmouseenter="enter('4457761250277868019');" onmouseout="out('4457761250277868019');" style="">2622             final ArrayList&lt;AppInfo&gt; added = mBgAllAppsList.added;                                       </span>
<span class="3218431008368817671" onmouseenter="enter('3218431008368817671');" onmouseout="out('3218431008368817671');" style="">2623             mBgAllAppsList.added = new ArrayList&lt;AppInfo&gt;();                                             </span>
<span  style="">2624                                                                                                          </span>
<span class="2526791049904400058" onmouseenter="enter('2526791049904400058');" onmouseout="out('2526791049904400058');" style="">2625             // Post callback on main thread                                                              </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2626             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2627                 public void run() {                                                                      </span>
<span class="-2007882421121122273" onmouseenter="enter('-2007882421121122273');" onmouseout="out('-2007882421121122273');" style="">2628                     final long bindTime = SystemClock.uptimeMillis();                                    </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2629                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2630                     if (callbacks != null) {                                                             </span>
<span class="8095088373687662981" onmouseenter="enter('8095088373687662981');" onmouseout="out('8095088373687662981');" style="">2631                         callbacks.bindAllApplications(added);                                            </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2632                         if (DEBUG_LOADERS) {                                                             </span>
<span class="1059969227192257889" onmouseenter="enter('1059969227192257889');" onmouseout="out('1059969227192257889');" style="">2633                             Log.d(TAG, &quot;bound &quot; + added.size() + &quot; apps in &quot;                             </span>
<span class="-7437359873458345222" onmouseenter="enter('-7437359873458345222');" onmouseout="out('-7437359873458345222');" style="">2634                                 + (SystemClock.uptimeMillis() - bindTime) + &quot;ms&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2635                         }                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2636                     } else {                                                                             </span>
<span class="7641212838781589328" onmouseenter="enter('7641212838781589328');" onmouseout="out('7641212838781589328');" style="">2637                         Log.i(TAG, &quot;not binding apps: no Launcher activity&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2638                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2639                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2640             });                                                                                          </span>
<span  style="">2641                                                                                                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2642             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-4702241865893587262" onmouseenter="enter('-4702241865893587262');" onmouseout="out('-4702241865893587262');" style="">2643                 Log.d(TAG, &quot;Icons processed in &quot;                                                         </span>
<span class="-1277503613614461490" onmouseenter="enter('-1277503613614461490');" onmouseout="out('-1277503613614461490');" style="">2644                         + (SystemClock.uptimeMillis() - loadTime) + &quot;ms&quot;);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2645             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2646         }                                                                                                </span>
<span  style="">2647                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">2648         public void dumpState() {                                                                        </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2649             synchronized (sBgLock) {                                                                     </span>
<span class="8510692516384923340" onmouseenter="enter('8510692516384923340');" onmouseout="out('8510692516384923340');" style="">2650                 Log.d(TAG, &quot;mLoaderTask.mContext=&quot; + mContext);                                          </span>
<span class="-5057473576968780754" onmouseenter="enter('-5057473576968780754');" onmouseout="out('-5057473576968780754');" style="">2651                 Log.d(TAG, &quot;mLoaderTask.mIsLaunching=&quot; + mIsLaunching);                                  </span>
<span class="5394362584347621452" onmouseenter="enter('5394362584347621452');" onmouseout="out('5394362584347621452');" style="">2652                 Log.d(TAG, &quot;mLoaderTask.mStopped=&quot; + mStopped);                                          </span>
<span class="2283901653600186000" onmouseenter="enter('2283901653600186000');" onmouseout="out('2283901653600186000');" style="">2653                 Log.d(TAG, &quot;mLoaderTask.mLoadAndBindStepFinished=&quot; + mLoadAndBindStepFinished);          </span>
<span class="-259407417202798794" onmouseenter="enter('-259407417202798794');" onmouseout="out('-259407417202798794');" style="">2654                 Log.d(TAG, &quot;mItems size=&quot; + sBgWorkspaceItems.size());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2655             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2656         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2657     }                                                                                                    </span>
<span  style="">2658                                                                                                          </span>
<span class="7630100460211487014" onmouseenter="enter('7630100460211487014');" onmouseout="out('7630100460211487014');" style="">2659     void enqueuePackageUpdated(PackageUpdatedTask task) {                                                </span>
<span class="5827584276449890800" onmouseenter="enter('5827584276449890800');" onmouseout="out('5827584276449890800');" style="">2660         sWorker.post(task);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2661     }                                                                                                    </span>
<span  style="">2662                                                                                                          </span>
<span class="4517543426948493114" onmouseenter="enter('4517543426948493114');" onmouseout="out('4517543426948493114');" style="">2663     private class PackageUpdatedTask implements Runnable {                                               </span>
<span class="-2369313534963024986" onmouseenter="enter('-2369313534963024986');" onmouseout="out('-2369313534963024986');" style="">2664         int mOp;                                                                                         </span>
<span class="1329266106484135476" onmouseenter="enter('1329266106484135476');" onmouseout="out('1329266106484135476');" style="">2665         String[] mPackages;                                                                              </span>
<span  style="">2666                                                                                                          </span>
<span class="7962554983790751070" onmouseenter="enter('7962554983790751070');" onmouseout="out('7962554983790751070');" style="">2667         public static final int OP_NONE = 0;                                                             </span>
<span class="2199739460496975128" onmouseenter="enter('2199739460496975128');" onmouseout="out('2199739460496975128');" style="">2668         public static final int OP_ADD = 1;                                                              </span>
<span class="-6492257742329868745" onmouseenter="enter('-6492257742329868745');" onmouseout="out('-6492257742329868745');" style="">2669         public static final int OP_UPDATE = 2;                                                           </span>
<span class="7223750328294921743" onmouseenter="enter('7223750328294921743');" onmouseout="out('7223750328294921743');" style="">2670         public static final int OP_REMOVE = 3; // uninstlled                                             </span>
<span class="8627918612960647103" onmouseenter="enter('8627918612960647103');" onmouseout="out('8627918612960647103');" style="">2671         public static final int OP_UNAVAILABLE = 4; // external media unmounted                          </span>
<span  style="">2672                                                                                                          </span>
<span  style="">2673                                                                                                          </span>
<span class="-2899951589874278155" onmouseenter="enter('-2899951589874278155');" onmouseout="out('-2899951589874278155');" style="">2674         public PackageUpdatedTask(int op, String[] packages) {                                           </span>
<span class="191999664456871419" onmouseenter="enter('191999664456871419');" onmouseout="out('191999664456871419');" style="">2675             mOp = op;                                                                                    </span>
<span class="-8641118446551244060" onmouseenter="enter('-8641118446551244060');" onmouseout="out('-8641118446551244060');" style="">2676             mPackages = packages;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2677         }                                                                                                </span>
<span  style="">2678                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2679         public void run() {                                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">2680             final Context context = mApp.getContext();                                                   </span>
<span  style="">2681                                                                                                          </span>
<span class="-8513751550533795426" onmouseenter="enter('-8513751550533795426');" onmouseout="out('-8513751550533795426');" style="">2682             final String[] packages = mPackages;                                                         </span>
<span class="3997761927841529422" onmouseenter="enter('3997761927841529422');" onmouseout="out('3997761927841529422');" style="">2683             final int N = packages.length;                                                               </span>
<span class="-2883270888213154035" onmouseenter="enter('-2883270888213154035');" onmouseout="out('-2883270888213154035');" style="">2684             switch (mOp) {                                                                               </span>
<span class="449333994232188305" onmouseenter="enter('449333994232188305');" onmouseout="out('449333994232188305');" style="">2685                 case OP_ADD:                                                                             </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">2686                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="8529503526854951097" onmouseenter="enter('8529503526854951097');" onmouseout="out('8529503526854951097');" style="">2687                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.addPackage &quot; + packages[i]);         </span>
<span class="-7654565316708220659" onmouseenter="enter('-7654565316708220659');" onmouseout="out('-7654565316708220659');" style="">2688                         mIconCache.remove(packages[i]);                                                  </span>
<span class="-2949849672001849759" onmouseenter="enter('-2949849672001849759');" onmouseout="out('-2949849672001849759');" style="">2689                         mBgAllAppsList.addPackage(context, packages[i]);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2690                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2691                     break;                                                                               </span>
<span class="-4770369244410347850" onmouseenter="enter('-4770369244410347850');" onmouseout="out('-4770369244410347850');" style="">2692                 case OP_UPDATE:                                                                          </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">2693                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="-3432436938232924374" onmouseenter="enter('-3432436938232924374');" onmouseout="out('-3432436938232924374');" style="">2694                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.updatePackage &quot; + packages[i]);      </span>
<span class="-272128531266392722" onmouseenter="enter('-272128531266392722');" onmouseout="out('-272128531266392722');" style="">2695                         mBgAllAppsList.updatePackage(context, packages[i]);                              </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">2696                         WidgetPreviewLoader.removePackageFromDb(                                         </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">2697                                 mApp.getWidgetPreviewCacheDb(), packages[i]);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2698                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2699                     break;                                                                               </span>
<span class="-5474983820901132713" onmouseenter="enter('-5474983820901132713');" onmouseout="out('-5474983820901132713');" style="">2700                 case OP_REMOVE:                                                                          </span>
<span class="9130220194739024640" onmouseenter="enter('9130220194739024640');" onmouseout="out('9130220194739024640');" style="">2701                 case OP_UNAVAILABLE:                                                                     </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">2702                     for (int i=0; i&lt;N; i++) {                                                            </span>
<span class="3815138171377980553" onmouseenter="enter('3815138171377980553');" onmouseout="out('3815138171377980553');" style="">2703                         if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.removePackage &quot; + packages[i]);      </span>
<span class="7669526743413608016" onmouseenter="enter('7669526743413608016');" onmouseout="out('7669526743413608016');" style="">2704                         mBgAllAppsList.removePackage(packages[i]);                                       </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">2705                         WidgetPreviewLoader.removePackageFromDb(                                         </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">2706                                 mApp.getWidgetPreviewCacheDb(), packages[i]);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2707                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2708                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2709             }                                                                                            </span>
<span  style="">2710                                                                                                          </span>
<span class="1572309132673002234" onmouseenter="enter('1572309132673002234');" onmouseout="out('1572309132673002234');" style="">2711             ArrayList&lt;AppInfo&gt; added = null;                                                             </span>
<span class="-3271065843717738915" onmouseenter="enter('-3271065843717738915');" onmouseout="out('-3271065843717738915');" style="">2712             ArrayList&lt;AppInfo&gt; modified = null;                                                          </span>
<span class="-5760221660526082511" onmouseenter="enter('-5760221660526082511');" onmouseout="out('-5760221660526082511');" style="">2713             final ArrayList&lt;AppInfo&gt; removedApps = new ArrayList&lt;AppInfo&gt;();                             </span>
<span  style="">2714                                                                                                          </span>
<span class="5103344907876037986" onmouseenter="enter('5103344907876037986');" onmouseout="out('5103344907876037986');" style="">2715             if (mBgAllAppsList.added.size() &gt; 0) {                                                       </span>
<span class="-6832117111735480722" onmouseenter="enter('-6832117111735480722');" onmouseout="out('-6832117111735480722');" style="">2716                 added = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.added);                                    </span>
<span class="7424740575354292437" onmouseenter="enter('7424740575354292437');" onmouseout="out('7424740575354292437');" style="">2717                 mBgAllAppsList.added.clear();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2718             }                                                                                            </span>
<span class="-2487689472149982581" onmouseenter="enter('-2487689472149982581');" onmouseout="out('-2487689472149982581');" style="">2719             if (mBgAllAppsList.modified.size() &gt; 0) {                                                    </span>
<span class="-263080790556278433" onmouseenter="enter('-263080790556278433');" onmouseout="out('-263080790556278433');" style="">2720                 modified = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.modified);                              </span>
<span class="7356755564467619497" onmouseenter="enter('7356755564467619497');" onmouseout="out('7356755564467619497');" style="">2721                 mBgAllAppsList.modified.clear();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2722             }                                                                                            </span>
<span class="1067177803970588976" onmouseenter="enter('1067177803970588976');" onmouseout="out('1067177803970588976');" style="">2723             if (mBgAllAppsList.removed.size() &gt; 0) {                                                     </span>
<span class="7103303915069909513" onmouseenter="enter('7103303915069909513');" onmouseout="out('7103303915069909513');" style="">2724                 removedApps.addAll(mBgAllAppsList.removed);                                              </span>
<span class="6489927836548040849" onmouseenter="enter('6489927836548040849');" onmouseout="out('6489927836548040849');" style="">2725                 mBgAllAppsList.removed.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2726             }                                                                                            </span>
<span  style="">2727                                                                                                          </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="">2728             final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                    </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">2729             if (callbacks == null) {                                                                     </span>
<span class="8755914139287185296" onmouseenter="enter('8755914139287185296');" onmouseout="out('8755914139287185296');" style="">2730                 Log.w(TAG, &quot;Nobody to tell about the new app.  Launcher is probably loading.&quot;);          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2731                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2732             }                                                                                            </span>
<span  style="">2733                                                                                                          </span>
<span class="-6581952787492343966" onmouseenter="enter('-6581952787492343966');" onmouseout="out('-6581952787492343966');" style="">2734             if (added != null) {                                                                         </span>
<span class="2110051729201547029" onmouseenter="enter('2110051729201547029');" onmouseout="out('2110051729201547029');" style="">2735                 // Ensure that we add all the workspace applications to the db                           </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2736                 Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                             </span>
<span class="-6277587630605553211" onmouseenter="enter('-6277587630605553211');" onmouseout="out('-6277587630605553211');" style="">2737                 if (!LauncherAppState.isDisableAllApps()) {                                              </span>
<span class="4785144545835380546" onmouseenter="enter('4785144545835380546');" onmouseout="out('4785144545835380546');" style="">2738                     addAndBindAddedApps(context, new ArrayList&lt;ItemInfo&gt;(), cb, added);                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2739                 } else {                                                                                 </span>
<span class="7560882443822012182" onmouseenter="enter('7560882443822012182');" onmouseout="out('7560882443822012182');" style="">2740                     final ArrayList&lt;ItemInfo&gt; addedInfos = new ArrayList&lt;ItemInfo&gt;(added);               </span>
<span class="620263930069644182" onmouseenter="enter('620263930069644182');" onmouseout="out('620263930069644182');" style="">2741                     addAndBindAddedApps(context, addedInfos, cb, added);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2742                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2743             }                                                                                            </span>
<span class="4007684711155860753" onmouseenter="enter('4007684711155860753');" onmouseout="out('4007684711155860753');" style="">2744             if (modified != null) {                                                                      </span>
<span class="-853311881612082067" onmouseenter="enter('-853311881612082067');" onmouseout="out('-853311881612082067');" style="">2745                 final ArrayList&lt;AppInfo&gt; modifiedFinal = modified;                                       </span>
<span  style="">2746                                                                                                          </span>
<span class="417723722259394800" onmouseenter="enter('417723722259394800');" onmouseout="out('417723722259394800');" style="">2747                 // Update the launcher db to reflect the changes                                         </span>
<span class="3799410015074169733" onmouseenter="enter('3799410015074169733');" onmouseout="out('3799410015074169733');" style="">2748                 for (AppInfo a : modifiedFinal) {                                                        </span>
<span class="9185020132746469320" onmouseenter="enter('9185020132746469320');" onmouseout="out('9185020132746469320');" style="">2749                     ArrayList&lt;ItemInfo&gt; infos =                                                          </span>
<span class="1259644807303209381" onmouseenter="enter('1259644807303209381');" onmouseout="out('1259644807303209381');" style="">2750                             getItemInfoForComponentName(a.componentName);                                </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2751                     for (ItemInfo i : infos) {                                                           </span>
<span class="5214363519588275687" onmouseenter="enter('5214363519588275687');" onmouseout="out('5214363519588275687');" style="">2752                         if (isShortcutInfoUpdateable(i)) {                                               </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">2753                             ShortcutInfo info = (ShortcutInfo) i;                                        </span>
<span class="8144150917785227032" onmouseenter="enter('8144150917785227032');" onmouseout="out('8144150917785227032');" style="">2754                             info.title = a.title.toString();                                             </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">2755                             updateItemInDatabase(context, info);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2756                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2757                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2758                 }                                                                                        </span>
<span  style="">2759                                                                                                          </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2760                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2761                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2762                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2763                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="-2589314362702357801" onmouseenter="enter('-2589314362702357801');" onmouseout="out('-2589314362702357801');" style="">2764                             callbacks.bindAppsUpdated(modifiedFinal);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2765                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2766                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2767                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2768             }                                                                                            </span>
<span  style="">2769                                                                                                          </span>
<span class="-1170284362245625596" onmouseenter="enter('-1170284362245625596');" onmouseout="out('-1170284362245625596');" style="">2770             final ArrayList&lt;String&gt; removedPackageNames =                                                </span>
<span class="-5690129641574664711" onmouseenter="enter('-5690129641574664711');" onmouseout="out('-5690129641574664711');" style="">2771                     new ArrayList&lt;String&gt;();                                                             </span>
<span class="-5885531662055245301" onmouseenter="enter('-5885531662055245301');" onmouseout="out('-5885531662055245301');" style="">2772             if (mOp == OP_REMOVE) {                                                                      </span>
<span class="6542623662317418523" onmouseenter="enter('6542623662317418523');" onmouseout="out('6542623662317418523');" style="">2773                 // Mark all packages in the broadcast to be removed                                      </span>
<span class="7356949459385151824" onmouseenter="enter('7356949459385151824');" onmouseout="out('7356949459385151824');" style="">2774                 removedPackageNames.addAll(Arrays.asList(packages));                                     </span>
<span class="-2422536769068214973" onmouseenter="enter('-2422536769068214973');" onmouseout="out('-2422536769068214973');" style="">2775             } else if (mOp == OP_UPDATE) {                                                               </span>
<span class="3231313637982916616" onmouseenter="enter('3231313637982916616');" onmouseout="out('3231313637982916616');" style="">2776                 // Mark disabled packages in the broadcast to be removed                                 </span>
<span class="-2640468621226648159" onmouseenter="enter('-2640468621226648159');" onmouseout="out('-2640468621226648159');" style="">2777                 final PackageManager pm = context.getPackageManager();                                   </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">2778                 for (int i=0; i&lt;N; i++) {                                                                </span>
<span class="2935426733804348481" onmouseenter="enter('2935426733804348481');" onmouseout="out('2935426733804348481');" style="">2779                     if (isPackageDisabled(pm, packages[i])) {                                            </span>
<span class="3041794132682496657" onmouseenter="enter('3041794132682496657');" onmouseout="out('3041794132682496657');" style="">2780                         removedPackageNames.add(packages[i]);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2781                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2782                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2783             }                                                                                            </span>
<span class="-6735782234278978643" onmouseenter="enter('-6735782234278978643');" onmouseout="out('-6735782234278978643');" style="">2784             // Remove all the components associated with this package                                    </span>
<span class="8695538150112490085" onmouseenter="enter('8695538150112490085');" onmouseout="out('8695538150112490085');" style="">2785             for (String pn : removedPackageNames) {                                                      </span>
<span class="-8111972255125637177" onmouseenter="enter('-8111972255125637177');" onmouseout="out('-8111972255125637177');" style="">2786                 ArrayList&lt;ItemInfo&gt; infos = getItemInfoForPackageName(pn);                               </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2787                 for (ItemInfo i : infos) {                                                               </span>
<span class="3909885620637543615" onmouseenter="enter('3909885620637543615');" onmouseout="out('3909885620637543615');" style="">2788                     deleteItemFromDatabase(context, i);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2789                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2790             }                                                                                            </span>
<span class="-2056292254334887175" onmouseenter="enter('-2056292254334887175');" onmouseout="out('-2056292254334887175');" style="">2791             // Remove all the specific components                                                        </span>
<span class="-974749610616658114" onmouseenter="enter('-974749610616658114');" onmouseout="out('-974749610616658114');" style="">2792             for (AppInfo a : removedApps) {                                                              </span>
<span class="-8237639399264107586" onmouseenter="enter('-8237639399264107586');" onmouseout="out('-8237639399264107586');" style="">2793                 ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName);                </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2794                 for (ItemInfo i : infos) {                                                               </span>
<span class="3909885620637543615" onmouseenter="enter('3909885620637543615');" onmouseout="out('3909885620637543615');" style="">2795                     deleteItemFromDatabase(context, i);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2796                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2797             }                                                                                            </span>
<span class="5309180485107849948" onmouseenter="enter('5309180485107849948');" onmouseout="out('5309180485107849948');" style="">2798             if (!removedPackageNames.isEmpty() || !removedApps.isEmpty()) {                              </span>
<span class="-8579411662137624168" onmouseenter="enter('-8579411662137624168');" onmouseout="out('-8579411662137624168');" style="">2799                 // Remove any queued items from the install queue                                        </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style="">2800                 String spKey = LauncherAppState.getSharedPreferencesKey();                               </span>
<span class="-4155822077911930566" onmouseenter="enter('-4155822077911930566');" onmouseout="out('-4155822077911930566');" style="">2801                 SharedPreferences sp =                                                                   </span>
<span class="-7232857049720959502" onmouseenter="enter('-7232857049720959502');" onmouseout="out('-7232857049720959502');" style="">2802                         context.getSharedPreferences(spKey, Context.MODE_PRIVATE);                       </span>
<span class="3942499314707869646" onmouseenter="enter('3942499314707869646');" onmouseout="out('3942499314707869646');" style="">2803                 InstallShortcutReceiver.removeFromInstallQueue(sp, removedPackageNames);                 </span>
<span class="-3818855430394316108" onmouseenter="enter('-3818855430394316108');" onmouseout="out('-3818855430394316108');" style="">2804                 // Call the components-removed callback                                                  </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2805                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2806                     public void run() {                                                                  </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2807                         Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                     </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2808                         if (callbacks == cb &amp;&amp; cb != null) {                                             </span>
<span class="7123425932844918056" onmouseenter="enter('7123425932844918056');" onmouseout="out('7123425932844918056');" style="">2809                             callbacks.bindComponentsRemoved(removedPackageNames, removedApps);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2810                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2811                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2812                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2813             }                                                                                            </span>
<span  style="">2814                                                                                                          </span>
<span class="4263868642545515204" onmouseenter="enter('4263868642545515204');" onmouseout="out('4263868642545515204');" style="">2815             final ArrayList&lt;Object&gt; widgetsAndShortcuts =                                                </span>
<span class="-4925739004532916789" onmouseenter="enter('-4925739004532916789');" onmouseout="out('-4925739004532916789');" style="">2816                 getSortedWidgetsAndShortcuts(context);                                                   </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2817             mHandler.post(new Runnable() {                                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2818                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2819                 public void run() {                                                                      </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2820                     Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                         </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2821                     if (callbacks == cb &amp;&amp; cb != null) {                                                 </span>
<span class="-5360632898061832848" onmouseenter="enter('-5360632898061832848');" onmouseout="out('-5360632898061832848');" style="">2822                         callbacks.bindPackagesUpdated(widgetsAndShortcuts);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2823                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2824                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2825             });                                                                                          </span>
<span  style="">2826                                                                                                          </span>
<span class="2246235439938918294" onmouseenter="enter('2246235439938918294');" onmouseout="out('2246235439938918294');" style="">2827             // Write all the logs to disk                                                                </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2828             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2829                 public void run() {                                                                      </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2830                     Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                         </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2831                     if (callbacks == cb &amp;&amp; cb != null) {                                                 </span>
<span class="-3509183204751013036" onmouseenter="enter('-3509183204751013036');" onmouseout="out('-3509183204751013036');" style="">2832                         callbacks.dumpLogsToLocalData();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2833                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2834                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2835             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2836         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2837     }                                                                                                    </span>
<span  style="">2838                                                                                                          </span>
<span class="5799248721363180071" onmouseenter="enter('5799248721363180071');" onmouseout="out('5799248721363180071');" style="">2839     // Returns a list of ResolveInfos/AppWindowInfos in sorted order                                     </span>
<span class="-3838691324560082495" onmouseenter="enter('-3838691324560082495');" onmouseout="out('-3838691324560082495');" style="">2840     public static ArrayList&lt;Object&gt; getSortedWidgetsAndShortcuts(Context context) {                      </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">2841         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-7530033640159092210" onmouseenter="enter('-7530033640159092210');" onmouseout="out('-7530033640159092210');" style="">2842         final ArrayList&lt;Object&gt; widgetsAndShortcuts = new ArrayList&lt;Object&gt;();                           </span>
<span class="-3206018607877806445" onmouseenter="enter('-3206018607877806445');" onmouseout="out('-3206018607877806445');" style="">2843         widgetsAndShortcuts.addAll(AppWidgetManager.getInstance(context).getInstalledProviders());       </span>
<span class="7483011368565278291" onmouseenter="enter('7483011368565278291');" onmouseout="out('7483011368565278291');" style="">2844         Intent shortcutsIntent = new Intent(Intent.ACTION_CREATE_SHORTCUT);                              </span>
<span class="-1563771411674199697" onmouseenter="enter('-1563771411674199697');" onmouseout="out('-1563771411674199697');" style="">2845         widgetsAndShortcuts.addAll(packageManager.queryIntentActivities(shortcutsIntent, 0));            </span>
<span class="-1102952865112100125" onmouseenter="enter('-1102952865112100125');" onmouseout="out('-1102952865112100125');" style="">2846         Collections.sort(widgetsAndShortcuts,                                                            </span>
<span class="-1681839338823179912" onmouseenter="enter('-1681839338823179912');" onmouseout="out('-1681839338823179912');" style="">2847             new LauncherModel.WidgetAndShortcutNameComparator(packageManager));                          </span>
<span class="4818388040543649614" onmouseenter="enter('4818388040543649614');" onmouseout="out('4818388040543649614');" style="">2848         return widgetsAndShortcuts;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2849     }                                                                                                    </span>
<span  style="">2850                                                                                                          </span>
<span class="8250241672786329916" onmouseenter="enter('8250241672786329916');" onmouseout="out('8250241672786329916');" style="">2851     private static boolean isPackageDisabled(PackageManager pm, String packageName) {                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2852         try {                                                                                            </span>
<span class="4500642088138919346" onmouseenter="enter('4500642088138919346');" onmouseout="out('4500642088138919346');" style="">2853             PackageInfo pi = pm.getPackageInfo(packageName, 0);                                          </span>
<span class="-3710685366547959245" onmouseenter="enter('-3710685366547959245');" onmouseout="out('-3710685366547959245');" style="">2854             return !pi.applicationInfo.enabled;                                                          </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="">2855         } catch (NameNotFoundException e) {                                                              </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style="">2856             // Fall through                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2857         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2858         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2859     }                                                                                                    </span>
<span  style="">2860                                                                                                          </span>
<span class="5484824579758440772" onmouseenter="enter('5484824579758440772');" onmouseout="out('5484824579758440772');" style="">2861     public static boolean isValidPackageComponent(PackageManager pm, ComponentName cn) {                 </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style="">2862         if (cn == null) {                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2863             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2864         }                                                                                                </span>
<span class="3920598161938602311" onmouseenter="enter('3920598161938602311');" onmouseout="out('3920598161938602311');" style="">2865         if (isPackageDisabled(pm, cn.getPackageName())) {                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2866             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2867         }                                                                                                </span>
<span  style="">2868                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2869         try {                                                                                            </span>
<span class="5148337441661745301" onmouseenter="enter('5148337441661745301');" onmouseout="out('5148337441661745301');" style="">2870             // Check the activity                                                                        </span>
<span class="-3548512208842411383" onmouseenter="enter('-3548512208842411383');" onmouseout="out('-3548512208842411383');" style="">2871             PackageInfo pi = pm.getPackageInfo(cn.getPackageName(), 0);                                  </span>
<span class="-7304348613249571904" onmouseenter="enter('-7304348613249571904');" onmouseout="out('-7304348613249571904');" style="">2872             return (pm.getActivityInfo(cn, 0) != null);                                                  </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="">2873         } catch (NameNotFoundException e) {                                                              </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2874             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2875         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2876     }                                                                                                    </span>
<span  style="">2877                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2878     /**                                                                                                  </span>
<span class="-1422058377481062223" onmouseenter="enter('-1422058377481062223');" onmouseout="out('-1422058377481062223');" style="">2879      * Make an ShortcutInfo object for a restored application or shortcut item that points               </span>
<span class="-3240825039404734763" onmouseenter="enter('-3240825039404734763');" onmouseout="out('-3240825039404734763');" style="">2880      * to a package that is not yet installed on the system.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2881      */                                                                                                  </span>
<span class="1063415479211056267" onmouseenter="enter('1063415479211056267');" onmouseout="out('1063415479211056267');" style="">2882     public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex) {                             </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">2883         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style="">2884         if (cursor != null) {                                                                            </span>
<span class="-7858065958686887242" onmouseenter="enter('-7858065958686887242');" onmouseout="out('-7858065958686887242');" style="">2885             info.title =  cursor.getString(titleIndex);                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2886         } else {                                                                                         </span>
<span class="-9179287796133695880" onmouseenter="enter('-9179287796133695880');" onmouseout="out('-9179287796133695880');" style="">2887             info.title = &quot;&quot;;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2888         }                                                                                                </span>
<span class="-1591268116362889652" onmouseenter="enter('-1591268116362889652');" onmouseout="out('-1591268116362889652');" style="">2889         info.setIcon(mIconCache.getIcon(intent, info.title.toString()));                                 </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">2890         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">2891         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2892     }                                                                                                    </span>
<span  style="">2893                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2894     /**                                                                                                  </span>
<span class="3086315656576237338" onmouseenter="enter('3086315656576237338');" onmouseout="out('3086315656576237338');" style="">2895      * Make an Intent object for a restored application or shortcut item that points                     </span>
<span class="-6367188518910147180" onmouseenter="enter('-6367188518910147180');" onmouseout="out('-6367188518910147180');" style="">2896      * to the market page for the item.                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2897      */                                                                                                  </span>
<span class="-6647643744207470673" onmouseenter="enter('-6647643744207470673');" onmouseout="out('-6647643744207470673');" style="">2898     private Intent getRestoredItemIntent(Cursor c, Context context, Intent intent) {                     </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">2899         ComponentName componentName = intent.getComponent();                                             </span>
<span class="5230577021520033618" onmouseenter="enter('5230577021520033618');" onmouseout="out('5230577021520033618');" style="">2900         Intent marketIntent = new Intent(Intent.ACTION_VIEW);                                            </span>
<span class="-6224205935725503646" onmouseenter="enter('-6224205935725503646');" onmouseout="out('-6224205935725503646');" style="">2901         Uri marketUri = new Uri.Builder()                                                                </span>
<span class="-9027153585574964790" onmouseenter="enter('-9027153585574964790');" onmouseout="out('-9027153585574964790');" style="">2902                 .scheme(&quot;market&quot;)                                                                        </span>
<span class="-1106866791415129127" onmouseenter="enter('-1106866791415129127');" onmouseout="out('-1106866791415129127');" style="">2903                 .authority(&quot;details&quot;)                                                                    </span>
<span class="-6156875340655442296" onmouseenter="enter('-6156875340655442296');" onmouseout="out('-6156875340655442296');" style="">2904                 .appendQueryParameter(&quot;id&quot;, componentName.getPackageName())                              </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="">2905                 .build();                                                                                </span>
<span class="-8203346918939498134" onmouseenter="enter('-8203346918939498134');" onmouseout="out('-8203346918939498134');" style="">2906         Log.d(TAG, &quot;manufactured intent uri: &quot; + marketUri.toString());                                  </span>
<span class="8200775736438266685" onmouseenter="enter('8200775736438266685');" onmouseout="out('8200775736438266685');" style="">2907         marketIntent.setData(marketUri);                                                                 </span>
<span class="-840031405639981960" onmouseenter="enter('-840031405639981960');" onmouseout="out('-840031405639981960');" style="">2908         return marketIntent;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2909     }                                                                                                    </span>
<span  style="">2910                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2911     /**                                                                                                  </span>
<span class="6759547650823633948" onmouseenter="enter('6759547650823633948');" onmouseout="out('6759547650823633948');" style="">2912      * This is called from the code that adds shortcuts from the intent receiver.  This                  </span>
<span class="1598280755109073179" onmouseenter="enter('1598280755109073179');" onmouseout="out('1598280755109073179');" style="">2913      * doesn&#x27;t have a Cursor, but                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2914      */                                                                                                  </span>
<span class="5614106103309211810" onmouseenter="enter('5614106103309211810');" onmouseout="out('5614106103309211810');" style="">2915     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context) {        </span>
<span class="-3335806789481426156" onmouseenter="enter('-3335806789481426156');" onmouseout="out('-3335806789481426156');" style="">2916         return getShortcutInfo(manager, intent, context, null, -1, -1, null);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2917     }                                                                                                    </span>
<span  style="">2918                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2919     /**                                                                                                  </span>
<span class="-1467760634860339139" onmouseenter="enter('-1467760634860339139');" onmouseout="out('-1467760634860339139');" style="">2920      * Make an ShortcutInfo object for a shortcut that is an application.                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2921      *                                                                                                   </span>
<span class="-3542647944112672905" onmouseenter="enter('-3542647944112672905');" onmouseout="out('-3542647944112672905');" style="">2922      * If c is not null, then it will be used to fill in missing data like the title and icon.           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2923      */                                                                                                  </span>
<span class="1276500584496912228" onmouseenter="enter('1276500584496912228');" onmouseout="out('1276500584496912228');" style="">2924     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context,          </span>
<span class="-7918747784600027039" onmouseenter="enter('-7918747784600027039');" onmouseout="out('-7918747784600027039');" style="">2925             Cursor c, int iconIndex, int titleIndex, HashMap&lt;Object, CharSequence&gt; labelCache) {         </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">2926         ComponentName componentName = intent.getComponent();                                             </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">2927         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="444940595441544179" onmouseenter="enter('444940595441544179');" onmouseout="out('444940595441544179');" style="">2928         if (componentName != null &amp;&amp; !isValidPackageComponent(manager, componentName)) {                 </span>
<span class="-409027952341615484" onmouseenter="enter('-409027952341615484');" onmouseout="out('-409027952341615484');" style="">2929             Log.d(TAG, &quot;Invalid package found in getShortcutInfo: &quot; + componentName);                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">2930             return null;                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2931         } else {                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2932             try {                                                                                        </span>
<span class="4294749985361673643" onmouseenter="enter('4294749985361673643');" onmouseout="out('4294749985361673643');" style="">2933                 PackageInfo pi = manager.getPackageInfo(componentName.getPackageName(), 0);              </span>
<span class="3308885914817688196" onmouseenter="enter('3308885914817688196');" onmouseout="out('3308885914817688196');" style="">2934                 info.initFlagsAndFirstInstallTime(pi);                                                   </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="">2935             } catch (NameNotFoundException e) {                                                          </span>
<span class="-3402401844985211338" onmouseenter="enter('-3402401844985211338');" onmouseout="out('-3402401844985211338');" style="">2936                 Log.d(TAG, &quot;getPackInfo failed for package &quot; +                                           </span>
<span class="-7617949507024469990" onmouseenter="enter('-7617949507024469990');" onmouseout="out('-7617949507024469990');" style="">2937                         componentName.getPackageName());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2938             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2939         }                                                                                                </span>
<span  style="">2940                                                                                                          </span>
<span class="-5839804976451698217" onmouseenter="enter('-5839804976451698217');" onmouseout="out('-5839804976451698217');" style="">2941         // TODO: See if the PackageManager knows about this case.  If it doesn&#x27;t                         </span>
<span class="-575420847374711684" onmouseenter="enter('-575420847374711684');" onmouseout="out('-575420847374711684');" style="">2942         // then return null &amp; delete this.                                                               </span>
<span  style="">2943                                                                                                          </span>
<span class="5323402181664282980" onmouseenter="enter('5323402181664282980');" onmouseout="out('5323402181664282980');" style="">2944         // the resource -- This may implicitly give us back the fallback icon,                           </span>
<span class="-798092997962515080" onmouseenter="enter('-798092997962515080');" onmouseout="out('-798092997962515080');" style="">2945         // but don&#x27;t worry about that.  All we&#x27;re doing with usingFallbackIcon is                        </span>
<span class="4614559195454825202" onmouseenter="enter('4614559195454825202');" onmouseout="out('4614559195454825202');" style="">2946         // to avoid saving lots of copies of that in the database, and most apps                         </span>
<span class="2042041324737915810" onmouseenter="enter('2042041324737915810');" onmouseout="out('2042041324737915810');" style="">2947         // have icons anyway.                                                                            </span>
<span  style="">2948                                                                                                          </span>
<span class="1748721733354639816" onmouseenter="enter('1748721733354639816');" onmouseout="out('1748721733354639816');" style="">2949         // Attempt to use queryIntentActivities to get the ResolveInfo (with IntentFilter info) and      </span>
<span class="-6676021501376744578" onmouseenter="enter('-6676021501376744578');" onmouseout="out('-6676021501376744578');" style="">2950         // if that fails, or is ambiguious, fallback to the standard way of getting the resolve info     </span>
<span class="-6094266232633177049" onmouseenter="enter('-6094266232633177049');" onmouseout="out('-6094266232633177049');" style="">2951         // via resolveActivity().                                                                        </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">2952         Bitmap icon = null;                                                                              </span>
<span class="-12205607414596767" onmouseenter="enter('-12205607414596767');" onmouseout="out('-12205607414596767');" style="">2953         ResolveInfo resolveInfo = null;                                                                  </span>
<span class="5248255614039346565" onmouseenter="enter('5248255614039346565');" onmouseout="out('5248255614039346565');" style="">2954         ComponentName oldComponent = intent.getComponent();                                              </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="">2955         Intent newIntent = new Intent(intent.getAction(), null);                                         </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="">2956         newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                 </span>
<span class="-4528672120988578527" onmouseenter="enter('-4528672120988578527');" onmouseout="out('-4528672120988578527');" style="">2957         newIntent.setPackage(oldComponent.getPackageName());                                             </span>
<span class="-4266560778617611378" onmouseenter="enter('-4266560778617611378');" onmouseout="out('-4266560778617611378');" style="">2958         List&lt;ResolveInfo&gt; infos = manager.queryIntentActivities(newIntent, 0);                           </span>
<span class="-1258353831095463835" onmouseenter="enter('-1258353831095463835');" onmouseout="out('-1258353831095463835');" style="">2959         for (ResolveInfo i : infos) {                                                                    </span>
<span class="5094763243037624802" onmouseenter="enter('5094763243037624802');" onmouseout="out('5094763243037624802');" style="">2960             ComponentName cn = new ComponentName(i.activityInfo.packageName,                             </span>
<span class="1720373740013823268" onmouseenter="enter('1720373740013823268');" onmouseout="out('1720373740013823268');" style="">2961                     i.activityInfo.name);                                                                </span>
<span class="-7290368567659218563" onmouseenter="enter('-7290368567659218563');" onmouseout="out('-7290368567659218563');" style="">2962             if (cn.equals(oldComponent)) {                                                               </span>
<span class="-6794055892963959667" onmouseenter="enter('-6794055892963959667');" onmouseout="out('-6794055892963959667');" style="">2963                 resolveInfo = i;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2964             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2965         }                                                                                                </span>
<span class="6326898777629576914" onmouseenter="enter('6326898777629576914');" onmouseout="out('6326898777629576914');" style="">2966         if (resolveInfo == null) {                                                                       </span>
<span class="8776212146813846258" onmouseenter="enter('8776212146813846258');" onmouseout="out('8776212146813846258');" style="">2967             resolveInfo = manager.resolveActivity(intent, 0);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2968         }                                                                                                </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="">2969         if (resolveInfo != null) {                                                                       </span>
<span class="-7448006110826377930" onmouseenter="enter('-7448006110826377930');" onmouseout="out('-7448006110826377930');" style="">2970             icon = mIconCache.getIcon(componentName, resolveInfo, labelCache);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2971         }                                                                                                </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">2972         // the db                                                                                        </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">2973         if (icon == null) {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2974             if (c != null) {                                                                             </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">2975                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2976             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2977         }                                                                                                </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">2978         // the fallback icon                                                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">2979         if (icon == null) {                                                                              </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">2980             icon = getFallbackIcon();                                                                    </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">2981             info.usingFallbackIcon = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2982         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">2983         info.setIcon(icon);                                                                              </span>
<span  style="">2984                                                                                                          </span>
<span class="7054767873271725898" onmouseenter="enter('7054767873271725898');" onmouseout="out('7054767873271725898');" style="">2985         // from the resource                                                                             </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="">2986         if (resolveInfo != null) {                                                                       </span>
<span class="4800110805856691594" onmouseenter="enter('4800110805856691594');" onmouseout="out('4800110805856691594');" style="">2987             ComponentName key = LauncherModel.getComponentNameFromResolveInfo(resolveInfo);              </span>
<span class="8748582400169036217" onmouseenter="enter('8748582400169036217');" onmouseout="out('8748582400169036217');" style="">2988             if (labelCache != null &amp;&amp; labelCache.containsKey(key)) {                                     </span>
<span class="3192670581922801839" onmouseenter="enter('3192670581922801839');" onmouseout="out('3192670581922801839');" style="">2989                 info.title = labelCache.get(key);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2990             } else {                                                                                     </span>
<span class="-2714967885034418454" onmouseenter="enter('-2714967885034418454');" onmouseout="out('-2714967885034418454');" style="">2991                 info.title = resolveInfo.activityInfo.loadLabel(manager);                                </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="">2992                 if (labelCache != null) {                                                                </span>
<span class="-7678945850387299322" onmouseenter="enter('-7678945850387299322');" onmouseout="out('-7678945850387299322');" style="">2993                     labelCache.put(key, info.title);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2994                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2995             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2996         }                                                                                                </span>
<span class="-7465759676168587687" onmouseenter="enter('-7465759676168587687');" onmouseout="out('-7465759676168587687');" style="">2997         // from the db                                                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">2998         if (info.title == null) {                                                                        </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2999             if (c != null) {                                                                             </span>
<span class="-3184821142709825057" onmouseenter="enter('-3184821142709825057');" onmouseout="out('-3184821142709825057');" style="">3000                 info.title =  c.getString(titleIndex);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3001             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3002         }                                                                                                </span>
<span class="-3300288691074588674" onmouseenter="enter('-3300288691074588674');" onmouseout="out('-3300288691074588674');" style="">3003         // fall back to the class name of the activity                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">3004         if (info.title == null) {                                                                        </span>
<span class="-8852275649252281641" onmouseenter="enter('-8852275649252281641');" onmouseout="out('-8852275649252281641');" style="">3005             info.title = componentName.getClassName();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3006         }                                                                                                </span>
<span class="7933897515512130399" onmouseenter="enter('7933897515512130399');" onmouseout="out('7933897515512130399');" style="">3007         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_APPLICATION;                                </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3008         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3009     }                                                                                                    </span>
<span  style="">3010                                                                                                          </span>
<span class="4439425861689174202" onmouseenter="enter('4439425861689174202');" onmouseout="out('4439425861689174202');" style="">3011     static ArrayList&lt;ItemInfo&gt; filterItemInfos(Collection&lt;ItemInfo&gt; infos,                               </span>
<span class="6562040460462558270" onmouseenter="enter('6562040460462558270');" onmouseout="out('6562040460462558270');" style="">3012             ItemInfoFilter f) {                                                                          </span>
<span class="-341948731893176054" onmouseenter="enter('-341948731893176054');" onmouseout="out('-341948731893176054');" style="">3013         HashSet&lt;ItemInfo&gt; filtered = new HashSet&lt;ItemInfo&gt;();                                            </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">3014         for (ItemInfo i : infos) {                                                                       </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3015             if (i instanceof ShortcutInfo) {                                                             </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3016                 ShortcutInfo info = (ShortcutInfo) i;                                                    </span>
<span class="299648897077832064" onmouseenter="enter('299648897077832064');" onmouseout="out('299648897077832064');" style="">3017                 ComponentName cn = info.intent.getComponent();                                           </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3018                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3019                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3020                 }                                                                                        </span>
<span class="-3991875190988320435" onmouseenter="enter('-3991875190988320435');" onmouseout="out('-3991875190988320435');" style="">3021             } else if (i instanceof FolderInfo) {                                                        </span>
<span class="5655388972065239375" onmouseenter="enter('5655388972065239375');" onmouseout="out('5655388972065239375');" style="">3022                 FolderInfo info = (FolderInfo) i;                                                        </span>
<span class="551974476971988370" onmouseenter="enter('551974476971988370');" onmouseout="out('551974476971988370');" style="">3023                 for (ShortcutInfo s : info.contents) {                                                   </span>
<span class="2331162999822676145" onmouseenter="enter('2331162999822676145');" onmouseout="out('2331162999822676145');" style="">3024                     ComponentName cn = s.intent.getComponent();                                          </span>
<span class="-203564141906270755" onmouseenter="enter('-203564141906270755');" onmouseout="out('-203564141906270755');" style="">3025                     if (cn != null &amp;&amp; f.filterItem(info, s, cn)) {                                       </span>
<span class="-3396286072640698031" onmouseenter="enter('-3396286072640698031');" onmouseout="out('-3396286072640698031');" style="">3026                         filtered.add(s);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3027                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3028                 }                                                                                        </span>
<span class="-6245773261295261120" onmouseenter="enter('-6245773261295261120');" onmouseout="out('-6245773261295261120');" style="">3029             } else if (i instanceof LauncherAppWidgetInfo) {                                             </span>
<span class="-9066656906031581030" onmouseenter="enter('-9066656906031581030');" onmouseout="out('-9066656906031581030');" style="">3030                 LauncherAppWidgetInfo info = (LauncherAppWidgetInfo) i;                                  </span>
<span class="7149829203308063306" onmouseenter="enter('7149829203308063306');" onmouseout="out('7149829203308063306');" style="">3031                 ComponentName cn = info.providerName;                                                    </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3032                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3033                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3034                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3035             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3036         }                                                                                                </span>
<span class="-61899809234431084" onmouseenter="enter('-61899809234431084');" onmouseout="out('-61899809234431084');" style="">3037         return new ArrayList&lt;ItemInfo&gt;(filtered);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3038     }                                                                                                    </span>
<span  style="">3039                                                                                                          </span>
<span class="-3045683366231863679" onmouseenter="enter('-3045683366231863679');" onmouseout="out('-3045683366231863679');" style="">3040     private ArrayList&lt;ItemInfo&gt; getItemInfoForPackageName(final String pn) {                             </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">3041         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3042             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">3043             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="4366277958827250658" onmouseenter="enter('4366277958827250658');" onmouseout="out('4366277958827250658');" style="">3044                 return cn.getPackageName().equals(pn);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3045             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3046         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">3047         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3048     }                                                                                                    </span>
<span  style="">3049                                                                                                          </span>
<span class="5278497386445713053" onmouseenter="enter('5278497386445713053');" onmouseout="out('5278497386445713053');" style="">3050     private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname) {                 </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">3051         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3052             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">3053             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="">3054                 return cn.equals(cname);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3055             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3056         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">3057         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3058     }                                                                                                    </span>
<span  style="">3059                                                                                                          </span>
<span class="1124396970102851152" onmouseenter="enter('1124396970102851152');" onmouseout="out('1124396970102851152');" style="">3060     public static boolean isShortcutInfoUpdateable(ItemInfo i) {                                         </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3061         if (i instanceof ShortcutInfo) {                                                                 </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3062             ShortcutInfo info = (ShortcutInfo) i;                                                        </span>
<span class="-4176416752413564182" onmouseenter="enter('-4176416752413564182');" onmouseout="out('-4176416752413564182');" style="">3063             // We need to check for ACTION_MAIN otherwise getComponent() might                           </span>
<span class="-4431177575884820054" onmouseenter="enter('-4431177575884820054');" onmouseout="out('-4431177575884820054');" style="">3064             // return null for some shortcuts (for instance, for shortcuts to                            </span>
<span class="5405126151757999271" onmouseenter="enter('5405126151757999271');" onmouseout="out('5405126151757999271');" style="">3065             // web pages.)                                                                               </span>
<span class="2400775771645829424" onmouseenter="enter('2400775771645829424');" onmouseout="out('2400775771645829424');" style="">3066             Intent intent = info.intent;                                                                 </span>
<span class="5515215321882412237" onmouseenter="enter('5515215321882412237');" onmouseout="out('5515215321882412237');" style="">3067             ComponentName name = intent.getComponent();                                                  </span>
<span class="-7226540389871247766" onmouseenter="enter('-7226540389871247766');" onmouseout="out('-7226540389871247766');" style="">3068             if (info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION &amp;&amp;                     </span>
<span class="-3498713534944595637" onmouseenter="enter('-3498713534944595637');" onmouseout="out('-3498713534944595637');" style="">3069                     Intent.ACTION_MAIN.equals(intent.getAction()) &amp;&amp; name != null) {                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3070                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3071             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3072         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3073         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3074     }                                                                                                    </span>
<span  style="">3075                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3076     /**                                                                                                  </span>
<span class="-7383302121747425580" onmouseenter="enter('-7383302121747425580');" onmouseout="out('-7383302121747425580');" style="">3077      * Make an ShortcutInfo object for a shortcut that isn&#x27;t an application.                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3078      */                                                                                                  </span>
<span class="-832588879686874653" onmouseenter="enter('-832588879686874653');" onmouseout="out('-832588879686874653');" style="">3079     private ShortcutInfo getShortcutInfo(Cursor c, Context context,                                      </span>
<span class="4905943326370352288" onmouseenter="enter('4905943326370352288');" onmouseout="out('4905943326370352288');" style="">3080             int iconTypeIndex, int iconPackageIndex, int iconResourceIndex, int iconIndex,               </span>
<span class="483103881605747557" onmouseenter="enter('483103881605747557');" onmouseout="out('483103881605747557');" style="">3081             int titleIndex) {                                                                            </span>
<span  style="">3082                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3083         Bitmap icon = null;                                                                              </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3084         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">3085         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span  style="">3086                                                                                                          </span>
<span class="7613558771605813536" onmouseenter="enter('7613558771605813536');" onmouseout="out('7613558771605813536');" style="">3087         // TODO: If there&#x27;s an explicit component and we can&#x27;t install that, delete it.                  </span>
<span  style="">3088                                                                                                          </span>
<span class="7288105011746485932" onmouseenter="enter('7288105011746485932');" onmouseout="out('7288105011746485932');" style="">3089         info.title = c.getString(titleIndex);                                                            </span>
<span  style="">3090                                                                                                          </span>
<span class="3612299538514072472" onmouseenter="enter('3612299538514072472');" onmouseout="out('3612299538514072472');" style="">3091         int iconType = c.getInt(iconTypeIndex);                                                          </span>
<span class="587586912378863553" onmouseenter="enter('587586912378863553');" onmouseout="out('587586912378863553');" style="">3092         switch (iconType) {                                                                              </span>
<span class="-349524516714147238" onmouseenter="enter('-349524516714147238');" onmouseout="out('-349524516714147238');" style="">3093         case LauncherSettings.Favorites.ICON_TYPE_RESOURCE:                                              </span>
<span class="-8135410904448428370" onmouseenter="enter('-8135410904448428370');" onmouseout="out('-8135410904448428370');" style="">3094             String packageName = c.getString(iconPackageIndex);                                          </span>
<span class="-8435258133535712396" onmouseenter="enter('-8435258133535712396');" onmouseout="out('-8435258133535712396');" style="">3095             String resourceName = c.getString(iconResourceIndex);                                        </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">3096             PackageManager packageManager = context.getPackageManager();                                 </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3097             info.customIcon = false;                                                                     </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style="">3098             // the resource                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3099             try {                                                                                        </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style="">3100                 Resources resources = packageManager.getResourcesForApplication(packageName);            </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style="">3101                 if (resources != null) {                                                                 </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style="">3102                     final int id = resources.getIdentifier(resourceName, null, null);                    </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3103                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="">3104                             mIconCache.getFullResIcon(resources, id), context);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3105                 }                                                                                        </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3106             } catch (Exception e) {                                                                      </span>
<span class="5772476326804770264" onmouseenter="enter('5772476326804770264');" onmouseout="out('5772476326804770264');" style="">3107                 // drop this.  we have other places to look for icons                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3108             }                                                                                            </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">3109             // the db                                                                                    </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3110             if (icon == null) {                                                                          </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3111                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3112             }                                                                                            </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">3113             // the fallback icon                                                                         </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3114             if (icon == null) {                                                                          </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">3115                 icon = getFallbackIcon();                                                                </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3116                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3117             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3118             break;                                                                                       </span>
<span class="8287056964614325383" onmouseenter="enter('8287056964614325383');" onmouseout="out('8287056964614325383');" style="">3119         case LauncherSettings.Favorites.ICON_TYPE_BITMAP:                                                </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3120             icon = getIconFromCursor(c, iconIndex, context);                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3121             if (icon == null) {                                                                          </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">3122                 icon = getFallbackIcon();                                                                </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3123                 info.customIcon = false;                                                                 </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3124                 info.usingFallbackIcon = true;                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3125             } else {                                                                                     </span>
<span class="5065693686602940755" onmouseenter="enter('5065693686602940755');" onmouseout="out('5065693686602940755');" style="">3126                 info.customIcon = true;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3127             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3128             break;                                                                                       </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">3129         default:                                                                                         </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">3130             icon = getFallbackIcon();                                                                    </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3131             info.usingFallbackIcon = true;                                                               </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3132             info.customIcon = false;                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3133             break;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3134         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3135         info.setIcon(icon);                                                                              </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3136         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3137     }                                                                                                    </span>
<span  style="">3138                                                                                                          </span>
<span class="6654370236660323989" onmouseenter="enter('6654370236660323989');" onmouseout="out('6654370236660323989');" style="">3139     Bitmap getIconFromCursor(Cursor c, int iconIndex, Context context) {                                 </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style="">3140         @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                           </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style="">3141         final boolean debug = false;                                                                     </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style="">3142         if (debug) {                                                                                     </span>
<span class="-6059745727821652987" onmouseenter="enter('-6059745727821652987');" onmouseout="out('-6059745727821652987');" style="">3143             Log.d(TAG, &quot;getIconFromCursor app=&quot;                                                          </span>
<span class="3938717124241653137" onmouseenter="enter('3938717124241653137');" onmouseout="out('3938717124241653137');" style="">3144                     + c.getString(c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE)));           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3145         }                                                                                                </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="">3146         byte[] data = c.getBlob(iconIndex);                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3147         try {                                                                                            </span>
<span class="-8927216840433750458" onmouseenter="enter('-8927216840433750458');" onmouseout="out('-8927216840433750458');" style="">3148             return Utilities.createIconBitmap(                                                           </span>
<span class="5146235978369237158" onmouseenter="enter('5146235978369237158');" onmouseout="out('5146235978369237158');" style="">3149                     BitmapFactory.decodeByteArray(data, 0, data.length), context);                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3150         } catch (Exception e) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3151             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3152         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3153     }                                                                                                    </span>
<span  style="">3154                                                                                                          </span>
<span class="-7359014031490826383" onmouseenter="enter('-7359014031490826383');" onmouseout="out('-7359014031490826383');" style="">3155     ShortcutInfo addShortcut(Context context, Intent data, long container, int screen,                   </span>
<span class="6268414987721391526" onmouseenter="enter('6268414987721391526');" onmouseout="out('6268414987721391526');" style="">3156             int cellX, int cellY, boolean notify) {                                                      </span>
<span class="2628174670305655041" onmouseenter="enter('2628174670305655041');" onmouseout="out('2628174670305655041');" style="">3157         final ShortcutInfo info = infoFromShortcutIntent(context, data, null);                           </span>
<span class="164903852834130891" onmouseenter="enter('164903852834130891');" onmouseout="out('164903852834130891');" style="">3158         if (info == null) {                                                                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3159             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3160         }                                                                                                </span>
<span class="-221445018295793081" onmouseenter="enter('-221445018295793081');" onmouseout="out('-221445018295793081');" style="">3161         addItemToDatabase(context, info, container, screen, cellX, cellY, notify);                       </span>
<span  style="">3162                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3163         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3164     }                                                                                                    </span>
<span  style="">3165                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3166     /**                                                                                                  </span>
<span class="-2170604135443496089" onmouseenter="enter('-2170604135443496089');" onmouseout="out('-2170604135443496089');" style="">3167      * Attempts to find an AppWidgetProviderInfo that matches the given component.                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3168      */                                                                                                  </span>
<span class="-5080859468016274115" onmouseenter="enter('-5080859468016274115');" onmouseout="out('-5080859468016274115');" style="">3169     AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context,                        </span>
<span class="2095123178876202639" onmouseenter="enter('2095123178876202639');" onmouseout="out('2095123178876202639');" style="">3170             ComponentName component) {                                                                   </span>
<span class="-6575430528437366773" onmouseenter="enter('-6575430528437366773');" onmouseout="out('-6575430528437366773');" style="">3171         List&lt;AppWidgetProviderInfo&gt; widgets =                                                            </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="">3172             AppWidgetManager.getInstance(context).getInstalledProviders();                               </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">3173         for (AppWidgetProviderInfo info : widgets) {                                                     </span>
<span class="444529726636175405" onmouseenter="enter('444529726636175405');" onmouseout="out('444529726636175405');" style="">3174             if (info.provider.equals(component)) {                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3175                 return info;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3176             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3177         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3178         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3179     }                                                                                                    </span>
<span  style="">3180                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3181     /**                                                                                                  </span>
<span class="7439199513195640847" onmouseenter="enter('7439199513195640847');" onmouseout="out('7439199513195640847');" style="">3182      * Returns a list of all the widgets that can handle configuration with a particular mimeType.       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3183      */                                                                                                  </span>
<span class="6325854662222182070" onmouseenter="enter('6325854662222182070');" onmouseout="out('6325854662222182070');" style="">3184     List&lt;WidgetMimeTypeHandlerData&gt; resolveWidgetsForMimeType(Context context, String mimeType) {        </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">3185         final PackageManager packageManager = context.getPackageManager();                               </span>
<span class="3847705782231652914" onmouseenter="enter('3847705782231652914');" onmouseout="out('3847705782231652914');" style="">3186         final List&lt;WidgetMimeTypeHandlerData&gt; supportedConfigurationActivities =                         </span>
<span class="-5417931937414580646" onmouseenter="enter('-5417931937414580646');" onmouseout="out('-5417931937414580646');" style="">3187             new ArrayList&lt;WidgetMimeTypeHandlerData&gt;();                                                  </span>
<span  style="">3188                                                                                                          </span>
<span class="3700104316520923099" onmouseenter="enter('3700104316520923099');" onmouseout="out('3700104316520923099');" style="">3189         final Intent supportsIntent =                                                                    </span>
<span class="-5996974504874484707" onmouseenter="enter('-5996974504874484707');" onmouseout="out('-5996974504874484707');" style="">3190             new Intent(InstallWidgetReceiver.ACTION_SUPPORTS_CLIPDATA_MIMETYPE);                         </span>
<span class="6679063100467623292" onmouseenter="enter('6679063100467623292');" onmouseout="out('6679063100467623292');" style="">3191         supportsIntent.setType(mimeType);                                                                </span>
<span  style="">3192                                                                                                          </span>
<span class="6275845746944894373" onmouseenter="enter('6275845746944894373');" onmouseout="out('6275845746944894373');" style="">3193         // Create a set of widget configuration components that we can test against                      </span>
<span class="361965435897470734" onmouseenter="enter('361965435897470734');" onmouseout="out('361965435897470734');" style="">3194         final List&lt;AppWidgetProviderInfo&gt; widgets =                                                      </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="">3195             AppWidgetManager.getInstance(context).getInstalledProviders();                               </span>
<span class="9185108259439406491" onmouseenter="enter('9185108259439406491');" onmouseout="out('9185108259439406491');" style="">3196         final HashMap&lt;ComponentName, AppWidgetProviderInfo&gt; configurationComponentToWidget =             </span>
<span class="-4320342521313681795" onmouseenter="enter('-4320342521313681795');" onmouseout="out('-4320342521313681795');" style="">3197             new HashMap&lt;ComponentName, AppWidgetProviderInfo&gt;();                                         </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">3198         for (AppWidgetProviderInfo info : widgets) {                                                     </span>
<span class="-5537825176935075872" onmouseenter="enter('-5537825176935075872');" onmouseout="out('-5537825176935075872');" style="">3199             configurationComponentToWidget.put(info.configure, info);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3200         }                                                                                                </span>
<span  style="">3201                                                                                                          </span>
<span class="7227984661430491714" onmouseenter="enter('7227984661430491714');" onmouseout="out('7227984661430491714');" style="">3202         // Run through each of the intents that can handle this type of clip data, and cross             </span>
<span class="-5312515598910931459" onmouseenter="enter('-5312515598910931459');" onmouseout="out('-5312515598910931459');" style="">3203         // reference them with the components that are actual configuration components                   </span>
<span class="96188399651153294" onmouseenter="enter('96188399651153294');" onmouseout="out('96188399651153294');" style="">3204         final List&lt;ResolveInfo&gt; activities = packageManager.queryIntentActivities(supportsIntent,        </span>
<span class="2456166036476176214" onmouseenter="enter('2456166036476176214');" onmouseout="out('2456166036476176214');" style="">3205                 PackageManager.MATCH_DEFAULT_ONLY);                                                      </span>
<span class="-6210771211908512935" onmouseenter="enter('-6210771211908512935');" onmouseout="out('-6210771211908512935');" style="">3206         for (ResolveInfo info : activities) {                                                            </span>
<span class="4178492805266676194" onmouseenter="enter('4178492805266676194');" onmouseout="out('4178492805266676194');" style="">3207             final ActivityInfo activityInfo = info.activityInfo;                                         </span>
<span class="5911001791562559694" onmouseenter="enter('5911001791562559694');" onmouseout="out('5911001791562559694');" style="">3208             final ComponentName infoComponent = new ComponentName(activityInfo.packageName,              </span>
<span class="2224927995621460603" onmouseenter="enter('2224927995621460603');" onmouseout="out('2224927995621460603');" style="">3209                     activityInfo.name);                                                                  </span>
<span class="5227428239073058925" onmouseenter="enter('5227428239073058925');" onmouseout="out('5227428239073058925');" style="">3210             if (configurationComponentToWidget.containsKey(infoComponent)) {                             </span>
<span class="1978663855217064477" onmouseenter="enter('1978663855217064477');" onmouseout="out('1978663855217064477');" style="">3211                 supportedConfigurationActivities.add(                                                    </span>
<span class="-7165755523548006690" onmouseenter="enter('-7165755523548006690');" onmouseout="out('-7165755523548006690');" style="">3212                         new InstallWidgetReceiver.WidgetMimeTypeHandlerData(info,                        </span>
<span class="-7657609803705245302" onmouseenter="enter('-7657609803705245302');" onmouseout="out('-7657609803705245302');" style="">3213                                 configurationComponentToWidget.get(infoComponent)));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3214             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3215         }                                                                                                </span>
<span class="8087136273107515292" onmouseenter="enter('8087136273107515292');" onmouseout="out('8087136273107515292');" style="">3216         return supportedConfigurationActivities;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3217     }                                                                                                    </span>
<span  style="">3218                                                                                                          </span>
<span class="-5347330719934774268" onmouseenter="enter('-5347330719934774268');" onmouseout="out('-5347330719934774268');" style="">3219     ShortcutInfo infoFromShortcutIntent(Context context, Intent data, Bitmap fallbackIcon) {             </span>
<span class="8885065625084988978" onmouseenter="enter('8885065625084988978');" onmouseout="out('8885065625084988978');" style="">3220         Intent intent = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_INTENT);                           </span>
<span class="8754707358466729356" onmouseenter="enter('8754707358466729356');" onmouseout="out('8754707358466729356');" style="">3221         String name = data.getStringExtra(Intent.EXTRA_SHORTCUT_NAME);                                   </span>
<span class="-6415007334509386725" onmouseenter="enter('-6415007334509386725');" onmouseout="out('-6415007334509386725');" style="">3222         Parcelable bitmap = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON);                         </span>
<span  style="">3223                                                                                                          </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">3224         if (intent == null) {                                                                            </span>
<span class="-7222749280640950660" onmouseenter="enter('-7222749280640950660');" onmouseout="out('-7222749280640950660');" style="">3225             // If the intent is null, we can&#x27;t construct a valid ShortcutInfo, so we return null         </span>
<span class="2086461264164088394" onmouseenter="enter('2086461264164088394');" onmouseout="out('2086461264164088394');" style="">3226             Log.e(TAG, &quot;Can&#x27;t construct ShorcutInfo with null intent&quot;);                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3227             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3228         }                                                                                                </span>
<span  style="">3229                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3230         Bitmap icon = null;                                                                              </span>
<span class="-5201738827927049970" onmouseenter="enter('-5201738827927049970');" onmouseout="out('-5201738827927049970');" style="">3231         boolean customIcon = false;                                                                      </span>
<span class="7106370779598857182" onmouseenter="enter('7106370779598857182');" onmouseout="out('7106370779598857182');" style="">3232         ShortcutIconResource iconResource = null;                                                        </span>
<span  style="">3233                                                                                                          </span>
<span class="4708321654003878831" onmouseenter="enter('4708321654003878831');" onmouseout="out('4708321654003878831');" style="">3234         if (bitmap != null &amp;&amp; bitmap instanceof Bitmap) {                                                </span>
<span class="-4792971395534249505" onmouseenter="enter('-4792971395534249505');" onmouseout="out('-4792971395534249505');" style="">3235             icon = Utilities.createIconBitmap(new FastBitmapDrawable((Bitmap)bitmap), context);          </span>
<span class="398283090594517644" onmouseenter="enter('398283090594517644');" onmouseout="out('398283090594517644');" style="">3236             customIcon = true;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3237         } else {                                                                                         </span>
<span class="8053278256512428939" onmouseenter="enter('8053278256512428939');" onmouseout="out('8053278256512428939');" style="">3238             Parcelable extra = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE);             </span>
<span class="1150112908884585569" onmouseenter="enter('1150112908884585569');" onmouseout="out('1150112908884585569');" style="">3239             if (extra != null &amp;&amp; extra instanceof ShortcutIconResource) {                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3240                 try {                                                                                    </span>
<span class="7381422411731402038" onmouseenter="enter('7381422411731402038');" onmouseout="out('7381422411731402038');" style="">3241                     iconResource = (ShortcutIconResource) extra;                                         </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">3242                     final PackageManager packageManager = context.getPackageManager();                   </span>
<span class="8040670109966211806" onmouseenter="enter('8040670109966211806');" onmouseout="out('8040670109966211806');" style="">3243                     Resources resources = packageManager.getResourcesForApplication(                     </span>
<span class="6486160691197808360" onmouseenter="enter('6486160691197808360');" onmouseout="out('6486160691197808360');" style="">3244                             iconResource.packageName);                                                   </span>
<span class="8660063882056417771" onmouseenter="enter('8660063882056417771');" onmouseout="out('8660063882056417771');" style="">3245                     final int id = resources.getIdentifier(iconResource.resourceName, null, null);       </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3246                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="">3247                             mIconCache.getFullResIcon(resources, id), context);                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3248                 } catch (Exception e) {                                                                  </span>
<span class="3904703345331845179" onmouseenter="enter('3904703345331845179');" onmouseout="out('3904703345331845179');" style="">3249                     Log.w(TAG, &quot;Could not load shortcut icon: &quot; + extra);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3250                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3251             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3252         }                                                                                                </span>
<span  style="">3253                                                                                                          </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3254         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span  style="">3255                                                                                                          </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3256         if (icon == null) {                                                                              </span>
<span class="-5102432251092900261" onmouseenter="enter('-5102432251092900261');" onmouseout="out('-5102432251092900261');" style="">3257             if (fallbackIcon != null) {                                                                  </span>
<span class="5793590417920465615" onmouseenter="enter('5793590417920465615');" onmouseout="out('5793590417920465615');" style="">3258                 icon = fallbackIcon;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3259             } else {                                                                                     </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">3260                 icon = getFallbackIcon();                                                                </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3261                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3262             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3263         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3264         info.setIcon(icon);                                                                              </span>
<span  style="">3265                                                                                                          </span>
<span class="-1829710476241369792" onmouseenter="enter('-1829710476241369792');" onmouseout="out('-1829710476241369792');" style="">3266         info.title = name;                                                                               </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">3267         info.intent = intent;                                                                            </span>
<span class="4633184714742215751" onmouseenter="enter('4633184714742215751');" onmouseout="out('4633184714742215751');" style="">3268         info.customIcon = customIcon;                                                                    </span>
<span class="6083484121682275347" onmouseenter="enter('6083484121682275347');" onmouseout="out('6083484121682275347');" style="">3269         info.iconResource = iconResource;                                                                </span>
<span  style="">3270                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3271         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3272     }                                                                                                    </span>
<span  style="">3273                                                                                                          </span>
<span class="869799550823252877" onmouseenter="enter('869799550823252877');" onmouseout="out('869799550823252877');" style="">3274     boolean queueIconToBeChecked(HashMap&lt;Object, byte[]&gt; cache, ShortcutInfo info, Cursor c,             </span>
<span class="650460935465639981" onmouseenter="enter('650460935465639981');" onmouseout="out('650460935465639981');" style="">3275             int iconIndex) {                                                                             </span>
<span class="63801910951777151" onmouseenter="enter('63801910951777151');" onmouseout="out('63801910951777151');" style="">3276         // If apps can&#x27;t be on SD, don&#x27;t even bother.                                                    </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">3277         if (!mAppsCanBeOnRemoveableStorage) {                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3278             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3279         }                                                                                                </span>
<span class="861653016939823039" onmouseenter="enter('861653016939823039');" onmouseout="out('861653016939823039');" style="">3280         // If this icon doesn&#x27;t have a custom icon, check to see                                         </span>
<span class="-1631525504415382572" onmouseenter="enter('-1631525504415382572');" onmouseout="out('-1631525504415382572');" style="">3281         // what&#x27;s stored in the DB, and if it doesn&#x27;t match what                                         </span>
<span class="-2833764056931958051" onmouseenter="enter('-2833764056931958051');" onmouseout="out('-2833764056931958051');" style="">3282         // we&#x27;re going to show, store what we are going to show back                                     </span>
<span class="6822044102664419432" onmouseenter="enter('6822044102664419432');" onmouseout="out('6822044102664419432');" style="">3283         // into the DB.  We do this so when we&#x27;re loading, if the                                        </span>
<span class="2186475696045222856" onmouseenter="enter('2186475696045222856');" onmouseout="out('2186475696045222856');" style="">3284         // package manager can&#x27;t find an icon (for example because                                       </span>
<span class="-3178081182524516354" onmouseenter="enter('-3178081182524516354');" onmouseout="out('-3178081182524516354');" style="">3285         // the app is on SD) then we can use that instead.                                               </span>
<span class="6478679774718804760" onmouseenter="enter('6478679774718804760');" onmouseout="out('6478679774718804760');" style="">3286         if (!info.customIcon &amp;&amp; !info.usingFallbackIcon) {                                               </span>
<span class="9182700683168292388" onmouseenter="enter('9182700683168292388');" onmouseout="out('9182700683168292388');" style="">3287             cache.put(info, c.getBlob(iconIndex));                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3288             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3289         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3290         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3291     }                                                                                                    </span>
<span class="1654527872685192879" onmouseenter="enter('1654527872685192879');" onmouseout="out('1654527872685192879');" style="">3292     void updateSavedIcon(Context context, ShortcutInfo info, byte[] data) {                              </span>
<span class="2739424845963553299" onmouseenter="enter('2739424845963553299');" onmouseout="out('2739424845963553299');" style="">3293         boolean needSave = false;                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3294         try {                                                                                            </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="">3295             if (data != null) {                                                                          </span>
<span class="-7759318311620721467" onmouseenter="enter('-7759318311620721467');" onmouseout="out('-7759318311620721467');" style="">3296                 Bitmap saved = BitmapFactory.decodeByteArray(data, 0, data.length);                      </span>
<span class="5601916118931842920" onmouseenter="enter('5601916118931842920');" onmouseout="out('5601916118931842920');" style="">3297                 Bitmap loaded = info.getIcon(mIconCache);                                                </span>
<span class="3622333829210083937" onmouseenter="enter('3622333829210083937');" onmouseout="out('3622333829210083937');" style="">3298                 needSave = !saved.sameAs(loaded);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3299             } else {                                                                                     </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3300                 needSave = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3301             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3302         } catch (Exception e) {                                                                          </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3303             needSave = true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3304         }                                                                                                </span>
<span class="-1391846982631217245" onmouseenter="enter('-1391846982631217245');" onmouseout="out('-1391846982631217245');" style="">3305         if (needSave) {                                                                                  </span>
<span class="3557323548661765982" onmouseenter="enter('3557323548661765982');" onmouseout="out('3557323548661765982');" style="">3306             Log.d(TAG, &quot;going to save icon bitmap for info=&quot; + info);                                    </span>
<span class="2982884345620001266" onmouseenter="enter('2982884345620001266');" onmouseout="out('2982884345620001266');" style="">3307             // This is slower than is ideal, but this only happens once                                  </span>
<span class="6026812495787058898" onmouseenter="enter('6026812495787058898');" onmouseout="out('6026812495787058898');" style="">3308             // or when the app is updated with a new icon.                                               </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">3309             updateItemInDatabase(context, info);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3310         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3311     }                                                                                                    </span>
<span  style="">3312                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3313     /**                                                                                                  </span>
<span class="4855649975001229153" onmouseenter="enter('4855649975001229153');" onmouseout="out('4855649975001229153');" style="">3314      * Return an existing FolderInfo object if we have encountered this ID previously,                   </span>
<span class="1965046356881977619" onmouseenter="enter('1965046356881977619');" onmouseout="out('1965046356881977619');" style="">3315      * or make a new one.                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3316      */                                                                                                  </span>
<span class="-2475696420152943641" onmouseenter="enter('-2475696420152943641');" onmouseout="out('-2475696420152943641');" style="">3317     private static FolderInfo findOrMakeFolder(HashMap&lt;Long, FolderInfo&gt; folders, long id) {             </span>
<span class="4702055422209629108" onmouseenter="enter('4702055422209629108');" onmouseout="out('4702055422209629108');" style="">3318         // See if a placeholder was created for us already                                               </span>
<span class="5369947662598537472" onmouseenter="enter('5369947662598537472');" onmouseout="out('5369947662598537472');" style="">3319         FolderInfo folderInfo = folders.get(id);                                                         </span>
<span class="-1935655509058582330" onmouseenter="enter('-1935655509058582330');" onmouseout="out('-1935655509058582330');" style="">3320         if (folderInfo == null) {                                                                        </span>
<span class="-2837885610668527269" onmouseenter="enter('-2837885610668527269');" onmouseout="out('-2837885610668527269');" style="">3321             // No placeholder -- create a new instance                                                   </span>
<span class="-1173144769562528834" onmouseenter="enter('-1173144769562528834');" onmouseout="out('-1173144769562528834');" style="">3322             folderInfo = new FolderInfo();                                                               </span>
<span class="-6364759527041918506" onmouseenter="enter('-6364759527041918506');" onmouseout="out('-6364759527041918506');" style="">3323             folders.put(id, folderInfo);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3324         }                                                                                                </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style="">3325         return folderInfo;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3326     }                                                                                                    </span>
<span  style="">3327                                                                                                          </span>
<span class="-958488581416967596" onmouseenter="enter('-958488581416967596');" onmouseout="out('-958488581416967596');" style="">3328     public static final Comparator&lt;AppInfo&gt; getAppNameComparator() {                                     </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">3329         final Collator collator = Collator.getInstance();                                                </span>
<span class="-5613048777706091935" onmouseenter="enter('-5613048777706091935');" onmouseout="out('-5613048777706091935');" style="">3330         return new Comparator&lt;AppInfo&gt;() {                                                               </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3331             public final int compare(AppInfo a, AppInfo b) {                                             </span>
<span class="-7549376093488495011" onmouseenter="enter('-7549376093488495011');" onmouseout="out('-7549376093488495011');" style="">3332                 int result = collator.compare(a.title.toString().trim(),                                 </span>
<span class="1811873973139560730" onmouseenter="enter('1811873973139560730');" onmouseout="out('1811873973139560730');" style="">3333                         b.title.toString().trim());                                                      </span>
<span class="8606135965292633507" onmouseenter="enter('8606135965292633507');" onmouseout="out('8606135965292633507');" style="">3334                 if (result == 0) {                                                                       </span>
<span class="3669915132885915948" onmouseenter="enter('3669915132885915948');" onmouseout="out('3669915132885915948');" style="">3335                     result = a.componentName.compareTo(b.componentName);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3336                 }                                                                                        </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">3337                 return result;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3338             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3339         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3340     }                                                                                                    </span>
<span class="394292360646743486" onmouseenter="enter('394292360646743486');" onmouseout="out('394292360646743486');" style="">3341     public static final Comparator&lt;AppInfo&gt; APP_INSTALL_TIME_COMPARATOR                                  </span>
<span class="-2973469265380285464" onmouseenter="enter('-2973469265380285464');" onmouseout="out('-2973469265380285464');" style="">3342             = new Comparator&lt;AppInfo&gt;() {                                                                </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3343         public final int compare(AppInfo a, AppInfo b) {                                                 </span>
<span class="4743139001154708795" onmouseenter="enter('4743139001154708795');" onmouseout="out('4743139001154708795');" style="">3344             if (a.firstInstallTime &lt; b.firstInstallTime) return 1;                                       </span>
<span class="2246013200960361834" onmouseenter="enter('2246013200960361834');" onmouseout="out('2246013200960361834');" style="">3345             if (a.firstInstallTime &gt; b.firstInstallTime) return -1;                                      </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style="">3346             return 0;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3347         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3348     };                                                                                                   </span>
<span class="-8609474311948503984" onmouseenter="enter('-8609474311948503984');" onmouseout="out('-8609474311948503984');" style="">3349     public static final Comparator&lt;AppWidgetProviderInfo&gt; getWidgetNameComparator() {                    </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">3350         final Collator collator = Collator.getInstance();                                                </span>
<span class="-2259377864696368534" onmouseenter="enter('-2259377864696368534');" onmouseout="out('-2259377864696368534');" style="">3351         return new Comparator&lt;AppWidgetProviderInfo&gt;() {                                                 </span>
<span class="-678507615594739242" onmouseenter="enter('-678507615594739242');" onmouseout="out('-678507615594739242');" style="">3352             public final int compare(AppWidgetProviderInfo a, AppWidgetProviderInfo b) {                 </span>
<span class="2077578932126968211" onmouseenter="enter('2077578932126968211');" onmouseout="out('2077578932126968211');" style="">3353                 return collator.compare(a.label.toString().trim(), b.label.toString().trim());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3354             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3355         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3356     }                                                                                                    </span>
<span class="-2741084556110057526" onmouseenter="enter('-2741084556110057526');" onmouseout="out('-2741084556110057526');" style="">3357     static ComponentName getComponentNameFromResolveInfo(ResolveInfo info) {                             </span>
<span class="5044967282776033452" onmouseenter="enter('5044967282776033452');" onmouseout="out('5044967282776033452');" style="">3358         if (info.activityInfo != null) {                                                                 </span>
<span class="4524084479320544608" onmouseenter="enter('4524084479320544608');" onmouseout="out('4524084479320544608');" style="">3359             return new ComponentName(info.activityInfo.packageName, info.activityInfo.name);             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3360         } else {                                                                                         </span>
<span class="-6175863207819175779" onmouseenter="enter('-6175863207819175779');" onmouseout="out('-6175863207819175779');" style="">3361             return new ComponentName(info.serviceInfo.packageName, info.serviceInfo.name);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3362         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3363     }                                                                                                    </span>
<span class="-1238156797468239183" onmouseenter="enter('-1238156797468239183');" onmouseout="out('-1238156797468239183');" style="">3364     public static class ShortcutNameComparator implements Comparator&lt;ResolveInfo&gt; {                      </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">3365         private Collator mCollator;                                                                      </span>
<span class="3738582539680694944" onmouseenter="enter('3738582539680694944');" onmouseout="out('3738582539680694944');" style="">3366         private PackageManager mPackageManager;                                                          </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">3367         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span class="-5960404209194449161" onmouseenter="enter('-5960404209194449161');" onmouseout="out('-5960404209194449161');" style="">3368         ShortcutNameComparator(PackageManager pm) {                                                      </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="">3369             mPackageManager = pm;                                                                        </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">3370             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3371             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3372         }                                                                                                </span>
<span class="-5325604689380562785" onmouseenter="enter('-5325604689380562785');" onmouseout="out('-5325604689380562785');" style="">3373         ShortcutNameComparator(PackageManager pm, HashMap&lt;Object, CharSequence&gt; labelCache) {            </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="">3374             mPackageManager = pm;                                                                        </span>
<span class="-1230739904022851098" onmouseenter="enter('-1230739904022851098');" onmouseout="out('-1230739904022851098');" style="">3375             mLabelCache = labelCache;                                                                    </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3376             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3377         }                                                                                                </span>
<span class="2504403784205444317" onmouseenter="enter('2504403784205444317');" onmouseout="out('2504403784205444317');" style="">3378         public final int compare(ResolveInfo a, ResolveInfo b) {                                         </span>
<span class="177946296771916785" onmouseenter="enter('177946296771916785');" onmouseout="out('177946296771916785');" style="">3379             CharSequence labelA, labelB;                                                                 </span>
<span class="2313389288092914550" onmouseenter="enter('2313389288092914550');" onmouseout="out('2313389288092914550');" style="">3380             ComponentName keyA = LauncherModel.getComponentNameFromResolveInfo(a);                       </span>
<span class="1313017237584786738" onmouseenter="enter('1313017237584786738');" onmouseout="out('1313017237584786738');" style="">3381             ComponentName keyB = LauncherModel.getComponentNameFromResolveInfo(b);                       </span>
<span class="6987605502838603761" onmouseenter="enter('6987605502838603761');" onmouseout="out('6987605502838603761');" style="">3382             if (mLabelCache.containsKey(keyA)) {                                                         </span>
<span class="-8432555163859180221" onmouseenter="enter('-8432555163859180221');" onmouseout="out('-8432555163859180221');" style="">3383                 labelA = mLabelCache.get(keyA);                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3384             } else {                                                                                     </span>
<span class="-2584626643586656789" onmouseenter="enter('-2584626643586656789');" onmouseout="out('-2584626643586656789');" style="">3385                 labelA = a.loadLabel(mPackageManager).toString().trim();                                 </span>
<span  style="">3386                                                                                                          </span>
<span class="-8431652685509449538" onmouseenter="enter('-8431652685509449538');" onmouseout="out('-8431652685509449538');" style="">3387                 mLabelCache.put(keyA, labelA);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3388             }                                                                                            </span>
<span class="-6450873724396873776" onmouseenter="enter('-6450873724396873776');" onmouseout="out('-6450873724396873776');" style="">3389             if (mLabelCache.containsKey(keyB)) {                                                         </span>
<span class="-3184391819650288160" onmouseenter="enter('-3184391819650288160');" onmouseout="out('-3184391819650288160');" style="">3390                 labelB = mLabelCache.get(keyB);                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3391             } else {                                                                                     </span>
<span class="-6035042839601081566" onmouseenter="enter('-6035042839601081566');" onmouseout="out('-6035042839601081566');" style="">3392                 labelB = b.loadLabel(mPackageManager).toString().trim();                                 </span>
<span  style="">3393                                                                                                          </span>
<span class="6304111994442836155" onmouseenter="enter('6304111994442836155');" onmouseout="out('6304111994442836155');" style="">3394                 mLabelCache.put(keyB, labelB);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3395             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3396             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3397         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3398     }                                                                                                    </span>
<span class="-9068712813001281029" onmouseenter="enter('-9068712813001281029');" onmouseout="out('-9068712813001281029');" style="">3399     public static class WidgetAndShortcutNameComparator implements Comparator&lt;Object&gt; {                  </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">3400         private Collator mCollator;                                                                      </span>
<span class="3738582539680694944" onmouseenter="enter('3738582539680694944');" onmouseout="out('3738582539680694944');" style="">3401         private PackageManager mPackageManager;                                                          </span>
<span class="-3647203189121938913" onmouseenter="enter('-3647203189121938913');" onmouseout="out('-3647203189121938913');" style="">3402         private HashMap&lt;Object, String&gt; mLabelCache;                                                     </span>
<span class="-7973787508768304552" onmouseenter="enter('-7973787508768304552');" onmouseout="out('-7973787508768304552');" style="">3403         WidgetAndShortcutNameComparator(PackageManager pm) {                                             </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="">3404             mPackageManager = pm;                                                                        </span>
<span class="240497455152177218" onmouseenter="enter('240497455152177218');" onmouseout="out('240497455152177218');" style="">3405             mLabelCache = new HashMap&lt;Object, String&gt;();                                                 </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3406             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3407         }                                                                                                </span>
<span class="6735042653098150116" onmouseenter="enter('6735042653098150116');" onmouseout="out('6735042653098150116');" style="">3408         public final int compare(Object a, Object b) {                                                   </span>
<span class="-655692707583917271" onmouseenter="enter('-655692707583917271');" onmouseout="out('-655692707583917271');" style="">3409             String labelA, labelB;                                                                       </span>
<span class="-5754282386436968390" onmouseenter="enter('-5754282386436968390');" onmouseout="out('-5754282386436968390');" style="">3410             if (mLabelCache.containsKey(a)) {                                                            </span>
<span class="9174303291338212675" onmouseenter="enter('9174303291338212675');" onmouseout="out('9174303291338212675');" style="">3411                 labelA = mLabelCache.get(a);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3412             } else {                                                                                     </span>
<span class="-5230674800178108876" onmouseenter="enter('-5230674800178108876');" onmouseout="out('-5230674800178108876');" style="">3413                 labelA = (a instanceof AppWidgetProviderInfo) ?                                          </span>
<span class="8106329842535817312" onmouseenter="enter('8106329842535817312');" onmouseout="out('8106329842535817312');" style="">3414                     ((AppWidgetProviderInfo) a).label :                                                  </span>
<span class="2303647925533744119" onmouseenter="enter('2303647925533744119');" onmouseout="out('2303647925533744119');" style="">3415                     ((ResolveInfo) a).loadLabel(mPackageManager).toString().trim();                      </span>
<span class="-6757493580793216382" onmouseenter="enter('-6757493580793216382');" onmouseout="out('-6757493580793216382');" style="">3416                 mLabelCache.put(a, labelA);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3417             }                                                                                            </span>
<span class="2173723640298609502" onmouseenter="enter('2173723640298609502');" onmouseout="out('2173723640298609502');" style="">3418             if (mLabelCache.containsKey(b)) {                                                            </span>
<span class="-253401768434607465" onmouseenter="enter('-253401768434607465');" onmouseout="out('-253401768434607465');" style="">3419                 labelB = mLabelCache.get(b);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3420             } else {                                                                                     </span>
<span class="2760475927841141319" onmouseenter="enter('2760475927841141319');" onmouseout="out('2760475927841141319');" style="">3421                 labelB = (b instanceof AppWidgetProviderInfo) ?                                          </span>
<span class="-8579211562497370011" onmouseenter="enter('-8579211562497370011');" onmouseout="out('-8579211562497370011');" style="">3422                     ((AppWidgetProviderInfo) b).label :                                                  </span>
<span class="-7445104582750098413" onmouseenter="enter('-7445104582750098413');" onmouseout="out('-7445104582750098413');" style="">3423                     ((ResolveInfo) b).loadLabel(mPackageManager).toString().trim();                      </span>
<span class="1041849722861633477" onmouseenter="enter('1041849722861633477');" onmouseout="out('1041849722861633477');" style="">3424                 mLabelCache.put(b, labelB);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3425             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3426             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3427         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3428     }                                                                                                    </span>
<span  style="">3429                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">3430     public void dumpState() {                                                                            </span>
<span class="-8509686920730582178" onmouseenter="enter('-8509686920730582178');" onmouseout="out('-8509686920730582178');" style="">3431         Log.d(TAG, &quot;mCallbacks=&quot; + mCallbacks);                                                          </span>
<span class="-6032216957883964740" onmouseenter="enter('-6032216957883964740');" onmouseout="out('-6032216957883964740');" style="">3432         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.data&quot;, mBgAllAppsList.data);                  </span>
<span class="8779182816240818818" onmouseenter="enter('8779182816240818818');" onmouseout="out('8779182816240818818');" style="">3433         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.added&quot;, mBgAllAppsList.added);                </span>
<span class="5513048904999210121" onmouseenter="enter('5513048904999210121');" onmouseout="out('5513048904999210121');" style="">3434         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.removed&quot;, mBgAllAppsList.removed);            </span>
<span class="-6417320778911436113" onmouseenter="enter('-6417320778911436113');" onmouseout="out('-6417320778911436113');" style="">3435         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.modified&quot;, mBgAllAppsList.modified);          </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">3436         if (mLoaderTask != null) {                                                                       </span>
<span class="-1961259503181318170" onmouseenter="enter('-1961259503181318170');" onmouseout="out('-1961259503181318170');" style="">3437             mLoaderTask.dumpState();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3438         } else {                                                                                         </span>
<span class="-4934836822377624371" onmouseenter="enter('-4934836822377624371');" onmouseout="out('-4934836822377624371');" style="">3439             Log.d(TAG, &quot;mLoaderTask=null&quot;);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3440         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3441     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3442 }                                                                                                        </span>

</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  16 package com.android.launcher3;                                                                           </span>
<span  style="">  17                                                                                                          </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  18 import android.app.SearchManager;                                                                        </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  19 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  20 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="-984325520036959693" onmouseenter="enter('-984325520036959693');" onmouseout="out('-984325520036959693');" style="">  21 import android.content.*;                                                                                </span>
<span class="-8524679231303418936" onmouseenter="enter('-8524679231303418936');" onmouseout="out('-8524679231303418936');" style="">  22 import android.content.Intent.ShortcutIconResource;                                                      </span>
<span class="-9183914406029598577" onmouseenter="enter('-9183914406029598577');" onmouseout="out('-9183914406029598577');" style="">  23 import android.content.pm.ActivityInfo;                                                                  </span>
<span class="-5891303348447418015" onmouseenter="enter('-5891303348447418015');" onmouseout="out('-5891303348447418015');" style="">  24 import android.content.pm.PackageInfo;                                                                   </span>
<span class="-2097531830514422912" onmouseenter="enter('-2097531830514422912');" onmouseout="out('-2097531830514422912');" style="">  25 import android.content.pm.PackageManager.NameNotFoundException;                                          </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  26 import android.content.pm.PackageManager;                                                                </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  27 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">  28 import android.content.res.Configuration;                                                                </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  29 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  30 import android.database.Cursor;                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  31 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  32 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  33 import android.net.Uri;                                                                                  </span>
<span class="-5861542142927414420" onmouseenter="enter('-5861542142927414420');" onmouseout="out('-5861542142927414420');" style="">  34 import android.os.Environment;                                                                           </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  35 import android.os.Handler;                                                                               </span>
<span class="5075624728668821268" onmouseenter="enter('5075624728668821268');" onmouseout="out('5075624728668821268');" style="">  36 import android.os.HandlerThread;                                                                         </span>
<span class="-3467845820974384276" onmouseenter="enter('-3467845820974384276');" onmouseout="out('-3467845820974384276');" style="">  37 import android.os.Parcelable;                                                                            </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  38 import android.os.Process;                                                                               </span>
<span class="2671599330745315048" onmouseenter="enter('2671599330745315048');" onmouseout="out('2671599330745315048');" style="">  39 import android.os.RemoteException;                                                                       </span>
<span class="2720528326800018495" onmouseenter="enter('2720528326800018495');" onmouseout="out('2720528326800018495');" style="">  40 import android.os.SystemClock;                                                                           </span>
<span class="9209739606564279934" onmouseenter="enter('9209739606564279934');" onmouseout="out('9209739606564279934');" style="">  41 import android.provider.BaseColumns;                                                                     </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  42 import android.text.TextUtils;                                                                           </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  43 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  44 import android.util.Pair;                                                                                </span>
<span class="2480987830742885141" onmouseenter="enter('2480987830742885141');" onmouseout="out('2480987830742885141');" style="">  45 import com.android.launcher3.InstallWidgetReceiver.WidgetMimeTypeHandlerData;                            </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  46 import java.lang.ref.WeakReference;                                                                      </span>
<span class="7911689652558139170" onmouseenter="enter('7911689652558139170');" onmouseout="out('7911689652558139170');" style="">  47 import java.net.URISyntaxException;                                                                      </span>
<span class="-2082349054173013619" onmouseenter="enter('-2082349054173013619');" onmouseout="out('-2082349054173013619');" style="">  48 import java.text.Collator;                                                                               </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  49 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  50 import java.util.Arrays;                                                                                 </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  51 import java.util.Collection;                                                                             </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  52 import java.util.Collections;                                                                            </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  53 import java.util.Comparator;                                                                             </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  54 import java.util.HashMap;                                                                                </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  55 import java.util.HashSet;                                                                                </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  56 import java.util.Iterator;                                                                               </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  57 import java.util.List;                                                                                   </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  58 import java.util.Set;                                                                                    </span>
<span class="7536840878424124946" onmouseenter="enter('7536840878424124946');" onmouseout="out('7536840878424124946');" style="">  59 import java.util.TreeMap;                                                                                </span>
<span class="-2705241621224930031" onmouseenter="enter('-2705241621224930031');" onmouseout="out('-2705241621224930031');" style="">  60 import java.util.concurrent.atomic.AtomicBoolean;                                                        </span>
<span  style="">  61                                                                                                          </span>
<span  style="">  62                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  63 /**                                                                                                      </span>
<span class="-4436404655378914540" onmouseenter="enter('-4436404655378914540');" onmouseout="out('-4436404655378914540');" style="">  64  * Maintains in-memory state of the Launcher. It is expected that there should be only one               </span>
<span class="-4273357065044936134" onmouseenter="enter('-4273357065044936134');" onmouseout="out('-4273357065044936134');" style="">  65  * LauncherModel object held in a static. Also provide APIs for updating the database state              </span>
<span class="-4398933382026523538" onmouseenter="enter('-4398933382026523538');" onmouseout="out('-4398933382026523538');" style="">  66  * for the Launcher.                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  67  */                                                                                                      </span>
<span class="-1237709953007126496" onmouseenter="enter('-1237709953007126496');" onmouseout="out('-1237709953007126496');" style="">  68 public class LauncherModel extends BroadcastReceiver {                                                   </span>
<span class="4817350607901898392" onmouseenter="enter('4817350607901898392');" onmouseout="out('4817350607901898392');" style="">  69     static final boolean DEBUG_LOADERS = false;                                                          </span>
<span  style="">  70                                                                                                          </span>
<span class="7166020908404799948" onmouseenter="enter('7166020908404799948');" onmouseout="out('7166020908404799948');" style="">  71     static final String TAG = &quot;Launcher.Model&quot;;                                                          </span>
<span  style="">  72                                                                                                          </span>
<span class="-110249828783225872" onmouseenter="enter('-110249828783225872');" onmouseout="out('-110249828783225872');" style="">  73     // true = use a &quot;More Apps&quot; folder for non-workspace apps on upgrade                                 </span>
<span class="2480947255658609927" onmouseenter="enter('2480947255658609927');" onmouseout="out('2480947255658609927');" style="">  74     // false = strew non-workspace apps across the workspace on upgrade                                  </span>
<span class="-110249828783225872" onmouseenter="enter('-110249828783225872');" onmouseout="out('-110249828783225872');" style="">  75     // true = use a &quot;More Apps&quot; folder for non-workspace apps on upgrade                                 </span>
<span class="2480947255658609927" onmouseenter="enter('2480947255658609927');" onmouseout="out('2480947255658609927');" style="">  76     // false = strew non-workspace apps across the workspace on upgrade                                  </span>
<span class="-258177193926802879" onmouseenter="enter('-258177193926802879');" onmouseout="out('-258177193926802879');" style="">  77     public static final boolean UPGRADE_USE_MORE_APPS_FOLDER = false;                                    </span>
<span  style="">  78                                                                                                          </span>
<span class="2412961508740342038" onmouseenter="enter('2412961508740342038');" onmouseout="out('2412961508740342038');" style="">  79     public static final int LOADER_FLAG_NONE = 0;                                                        </span>
<span  style="">  80                                                                                                          </span>
<span class="-3582007365816200905" onmouseenter="enter('-3582007365816200905');" onmouseout="out('-3582007365816200905');" style="">  81     public static final int LOADER_FLAG_CLEAR_WORKSPACE = 1 &lt;&lt; 0;                                        </span>
<span  style="">  82                                                                                                          </span>
<span class="2276565639346953559" onmouseenter="enter('2276565639346953559');" onmouseout="out('2276565639346953559');" style="">  83     public static final int LOADER_FLAG_MIGRATE_SHORTCUTS = 1 &lt;&lt; 1;                                      </span>
<span  style="">  84                                                                                                          </span>
<span class="6995464355391954242" onmouseenter="enter('6995464355391954242');" onmouseout="out('6995464355391954242');" style="">  85     // batch size for the workspace icons                                                                </span>
<span class="-4154694662050657236" onmouseenter="enter('-4154694662050657236');" onmouseout="out('-4154694662050657236');" style="">  86     private static final int ITEMS_CHUNK = 6; // batch size for the workspace icons                      </span>
<span  style="">  87                                                                                                          </span>
<span class="-5674768092661618077" onmouseenter="enter('-5674768092661618077');" onmouseout="out('-5674768092661618077');" style="">  88     private static final long INVALID_SCREEN_ID = -1L;                                                   </span>
<span  style="">  89                                                                                                          </span>
<span class="-2106715535373822300" onmouseenter="enter('-2106715535373822300');" onmouseout="out('-2106715535373822300');" style="">  90     private final boolean mAppsCanBeOnRemoveableStorage;                                                 </span>
<span  style="">  91                                                                                                          </span>
<span class="4731979794377415890" onmouseenter="enter('4731979794377415890');" onmouseout="out('4731979794377415890');" style="">  92     private final boolean mOldContentProviderExists;                                                     </span>
<span  style="">  93                                                                                                          </span>
<span class="3718007027314914184" onmouseenter="enter('3718007027314914184');" onmouseout="out('3718007027314914184');" style="">  94     private final LauncherAppState mApp;                                                                 </span>
<span  style="">  95                                                                                                          </span>
<span class="-7373075918619999414" onmouseenter="enter('-7373075918619999414');" onmouseout="out('-7373075918619999414');" style="">  96     private final Object mLock = new Object();                                                           </span>
<span  style="">  97                                                                                                          </span>
<span class="6556510276342102272" onmouseenter="enter('6556510276342102272');" onmouseout="out('6556510276342102272');" style="">  98     private DeferredHandler mHandler = new DeferredHandler();                                            </span>
<span  style="">  99                                                                                                          </span>
<span class="-7862379002163915329" onmouseenter="enter('-7862379002163915329');" onmouseout="out('-7862379002163915329');" style=""> 100     private LoaderTask mLoaderTask;                                                                      </span>
<span  style=""> 101                                                                                                          </span>
<span class="-3485037850110155122" onmouseenter="enter('-3485037850110155122');" onmouseout="out('-3485037850110155122');" style=""> 102     private boolean mIsLoaderTaskRunning;                                                                </span>
<span  style=""> 103                                                                                                          </span>
<span class="7419034271767928159" onmouseenter="enter('7419034271767928159');" onmouseout="out('7419034271767928159');" style=""> 104     private volatile boolean mFlushingWorkerThread;                                                      </span>
<span  style=""> 105                                                                                                          </span>
<span class="7008336552769109798" onmouseenter="enter('7008336552769109798');" onmouseout="out('7008336552769109798');" style=""> 106     // Specific runnable types that are run on the main thread deferred handler, this allows us to       </span>
<span class="-2862621427901202146" onmouseenter="enter('-2862621427901202146');" onmouseout="out('-2862621427901202146');" style=""> 107     // clear all queued binding runnables when the Launcher activity is destroyed.                       </span>
<span class="2773124109533293313" onmouseenter="enter('2773124109533293313');" onmouseout="out('2773124109533293313');" style=""> 108     private static final int MAIN_THREAD_NORMAL_RUNNABLE = 0;                                            </span>
<span  style=""> 109                                                                                                          </span>
<span class="3742092121997602406" onmouseenter="enter('3742092121997602406');" onmouseout="out('3742092121997602406');" style=""> 110     private static final int MAIN_THREAD_BINDING_RUNNABLE = 1;                                           </span>
<span  style=""> 111                                                                                                          </span>
<span class="1887278082230738056" onmouseenter="enter('1887278082230738056');" onmouseout="out('1887278082230738056');" style=""> 112     private static final HandlerThread sWorkerThread = new HandlerThread(&quot;launcher-loader&quot;);             </span>
<span  style=""> 113                                                                                                          </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style=""> 114     static {                                                                                             </span>
<span class="3211376391739143126" onmouseenter="enter('3211376391739143126');" onmouseout="out('3211376391739143126');" style=""> 115         sWorkerThread.start();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 116     }                                                                                                    </span>
<span  style=""> 117                                                                                                          </span>
<span class="2264102646027284513" onmouseenter="enter('2264102646027284513');" onmouseout="out('2264102646027284513');" style=""> 118     private static final Handler sWorker = new Handler(sWorkerThread.getLooper());                       </span>
<span  style=""> 119                                                                                                          </span>
<span class="3535035959074757881" onmouseenter="enter('3535035959074757881');" onmouseout="out('3535035959074757881');" style=""> 120     // We start off with everything not loaded.  After that, we assume that                              </span>
<span class="2643799052940090988" onmouseenter="enter('2643799052940090988');" onmouseout="out('2643799052940090988');" style=""> 121     // our monitoring of the package manager provides all updates and we never                           </span>
<span class="-1838192547825761021" onmouseenter="enter('-1838192547825761021');" onmouseout="out('-1838192547825761021');" style=""> 122     // need to do a requery.  These are only ever touched from the loader thread.                        </span>
<span class="-8758726942217087840" onmouseenter="enter('-8758726942217087840');" onmouseout="out('-8758726942217087840');" style=""> 123     private boolean mWorkspaceLoaded;                                                                    </span>
<span  style=""> 124                                                                                                          </span>
<span class="-1682003936594375249" onmouseenter="enter('-1682003936594375249');" onmouseout="out('-1682003936594375249');" style=""> 125     private boolean mAllAppsLoaded;                                                                      </span>
<span  style=""> 126                                                                                                          </span>
<span class="4437381645098142172" onmouseenter="enter('4437381645098142172');" onmouseout="out('4437381645098142172');" style=""> 127     // When we are loading pages synchronously, we can&#x27;t just post the binding of items on the side      </span>
<span class="3512738277131757196" onmouseenter="enter('3512738277131757196');" onmouseout="out('3512738277131757196');" style=""> 128     // pages as this delays the rotation process.  Instead, we wait for a callback from the first        </span>
<span class="1019766179129744653" onmouseenter="enter('1019766179129744653');" onmouseout="out('1019766179129744653');" style=""> 129     // draw (in Workspace) to initiate the binding of the remaining side pages.  Any time we start       </span>
<span class="7373070490167110663" onmouseenter="enter('7373070490167110663');" onmouseout="out('7373070490167110663');" style=""> 130     // a normal load, we also clear this set of Runnables.                                               </span>
<span class="4843369785562403466" onmouseenter="enter('4843369785562403466');" onmouseout="out('4843369785562403466');" style=""> 131     static final ArrayList&lt;Runnable&gt; mDeferredBindRunnables = new ArrayList&lt;Runnable&gt;();                 </span>
<span  style=""> 132                                                                                                          </span>
<span class="5593309185710650450" onmouseenter="enter('5593309185710650450');" onmouseout="out('5593309185710650450');" style=""> 133     private WeakReference&lt;Callbacks&gt; mCallbacks;                                                         </span>
<span  style=""> 134                                                                                                          </span>
<span class="-4825633287564006425" onmouseenter="enter('-4825633287564006425');" onmouseout="out('-4825633287564006425');" style=""> 135     // &lt; only access in worker thread &gt;                                                                  </span>
<span class="-4825633287564006425" onmouseenter="enter('-4825633287564006425');" onmouseout="out('-4825633287564006425');" style=""> 136     // &lt; only access in worker thread &gt;                                                                  </span>
<span class="-7893410053402242276" onmouseenter="enter('-7893410053402242276');" onmouseout="out('-7893410053402242276');" style=""> 137     AllAppsList mBgAllAppsList;                                                                          </span>
<span  style=""> 138                                                                                                          </span>
<span class="-4696524037009093502" onmouseenter="enter('-4696524037009093502');" onmouseout="out('-4696524037009093502');" style=""> 139     // The lock that must be acquired before referencing any static bg data structures.  Unlike          </span>
<span class="-2471307598696798987" onmouseenter="enter('-2471307598696798987');" onmouseout="out('-2471307598696798987');" style=""> 140     // other locks, this one can generally be held long-term because we never expect any of these        </span>
<span class="4310884307601416106" onmouseenter="enter('4310884307601416106');" onmouseout="out('4310884307601416106');" style=""> 141     // static data structures to be referenced outside of the worker thread except on the first          </span>
<span class="2260118264672300125" onmouseenter="enter('2260118264672300125');" onmouseout="out('2260118264672300125');" style=""> 142     // load after configuration change.                                                                  </span>
<span class="-8652324765300755578" onmouseenter="enter('-8652324765300755578');" onmouseout="out('-8652324765300755578');" style=""> 143     static final Object sBgLock = new Object();                                                          </span>
<span  style=""> 144                                                                                                          </span>
<span class="861828438456678075" onmouseenter="enter('861828438456678075');" onmouseout="out('861828438456678075');" style=""> 145     // sBgItemsIdMap maps *all* the ItemInfos (shortcuts, folders, and widgets) created by               </span>
<span class="3964854605559074701" onmouseenter="enter('3964854605559074701');" onmouseout="out('3964854605559074701');" style=""> 146     // LauncherModel to their ids                                                                        </span>
<span class="8713038185903703074" onmouseenter="enter('8713038185903703074');" onmouseout="out('8713038185903703074');" style=""> 147     static final HashMap&lt;Long, ItemInfo&gt; sBgItemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                  </span>
<span  style=""> 148                                                                                                          </span>
<span class="-4875305940507672487" onmouseenter="enter('-4875305940507672487');" onmouseout="out('-4875305940507672487');" style=""> 149     // sBgWorkspaceItems is passed to bindItems, which expects a list of all folders and shortcuts       </span>
<span class="-953535598124541775" onmouseenter="enter('-953535598124541775');" onmouseout="out('-953535598124541775');" style=""> 150     // created by LauncherModel that are directly on the home screen (however, no widgets or             </span>
<span class="-8706292030263263998" onmouseenter="enter('-8706292030263263998');" onmouseout="out('-8706292030263263998');" style=""> 151     // shortcuts within folders).                                                                        </span>
<span class="4770535944422974992" onmouseenter="enter('4770535944422974992');" onmouseout="out('4770535944422974992');" style=""> 152     static final ArrayList&lt;ItemInfo&gt; sBgWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                      </span>
<span  style=""> 153                                                                                                          </span>
<span class="1795288911868581126" onmouseenter="enter('1795288911868581126');" onmouseout="out('1795288911868581126');" style=""> 154     // sBgAppWidgets is all LauncherAppWidgetInfo created by LauncherModel. Passed to bindAppWidget()    </span>
<span class="1795288911868581126" onmouseenter="enter('1795288911868581126');" onmouseout="out('1795288911868581126');" style=""> 155     // sBgAppWidgets is all LauncherAppWidgetInfo created by LauncherModel. Passed to bindAppWidget()    </span>
<span class="2792930227258213532" onmouseenter="enter('2792930227258213532');" onmouseout="out('2792930227258213532');" style=""> 156     static final ArrayList&lt;LauncherAppWidgetInfo&gt; sBgAppWidgets =                                        </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style=""> 157         new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                          </span>
<span  style=""> 158                                                                                                          </span>
<span class="8356003681152445460" onmouseenter="enter('8356003681152445460');" onmouseout="out('8356003681152445460');" style=""> 159     // sBgFolders is all FolderInfos created by LauncherModel. Passed to bindFolders()                   </span>
<span class="8065187755370300271" onmouseenter="enter('8065187755370300271');" onmouseout="out('8065187755370300271');" style=""> 160     static final HashMap&lt;Long, FolderInfo&gt; sBgFolders = new HashMap&lt;Long, FolderInfo&gt;();                 </span>
<span  style=""> 161                                                                                                          </span>
<span class="-6906235458204319724" onmouseenter="enter('-6906235458204319724');" onmouseout="out('-6906235458204319724');" style=""> 162     // sBgDbIconCache is the set of ItemInfos that need to have their icons updated in the database      </span>
<span class="-2979801471293813396" onmouseenter="enter('-2979801471293813396');" onmouseout="out('-2979801471293813396');" style=""> 163     static final HashMap&lt;Object, byte[]&gt; sBgDbIconCache = new HashMap&lt;Object, byte[]&gt;();                 </span>
<span  style=""> 164                                                                                                          </span>
<span class="8536603216028959604" onmouseenter="enter('8536603216028959604');" onmouseout="out('8536603216028959604');" style=""> 165     // sBgWorkspaceScreens is the ordered set of workspace screens.                                      </span>
<span class="8536603216028959604" onmouseenter="enter('8536603216028959604');" onmouseout="out('8536603216028959604');" style=""> 166     // sBgWorkspaceScreens is the ordered set of workspace screens.                                      </span>
<span class="-1373680151983800221" onmouseenter="enter('-1373680151983800221');" onmouseout="out('-1373680151983800221');" style=""> 167     static final ArrayList&lt;Long&gt; sBgWorkspaceScreens = new ArrayList&lt;Long&gt;();                            </span>
<span  style=""> 168                                                                                                          </span>
<span class="-5356624270019806590" onmouseenter="enter('-5356624270019806590');" onmouseout="out('-5356624270019806590');" style=""> 169     // &lt;/ only access in worker thread &gt;                                                                 </span>
<span class="-5356624270019806590" onmouseenter="enter('-5356624270019806590');" onmouseout="out('-5356624270019806590');" style=""> 170     // &lt;/ only access in worker thread &gt;                                                                 </span>
<span  style=""> 171                                                                                                          </span>
<span class="-3446390922171092190" onmouseenter="enter('-3446390922171092190');" onmouseout="out('-3446390922171092190');" style=""> 172     private IconCache mIconCache;                                                                        </span>
<span  style=""> 173                                                                                                          </span>
<span class="7327140815403295852" onmouseenter="enter('7327140815403295852');" onmouseout="out('7327140815403295852');" style=""> 174     private Bitmap mDefaultIcon;                                                                         </span>
<span  style=""> 175                                                                                                          </span>
<span class="-1428370913368008087" onmouseenter="enter('-1428370913368008087');" onmouseout="out('-1428370913368008087');" style=""> 176     protected int mPreviousConfigMcc;                                                                    </span>
<span  style=""> 177                                                                                                          </span>
<span class="-3338718885622541528" onmouseenter="enter('-3338718885622541528');" onmouseout="out('-3338718885622541528');" style=""> 178     public interface Callbacks {                                                                         </span>
<span class="6769189054699709413" onmouseenter="enter('6769189054699709413');" onmouseout="out('6769189054699709413');" style=""> 179         public abstract boolean setLoadOnResume();                                                       </span>
<span  style=""> 180                                                                                                          </span>
<span class="1345184482794199092" onmouseenter="enter('1345184482794199092');" onmouseout="out('1345184482794199092');" style=""> 181         public abstract int getCurrentWorkspaceScreen();                                                 </span>
<span  style=""> 182                                                                                                          </span>
<span class="5022935698345567741" onmouseenter="enter('5022935698345567741');" onmouseout="out('5022935698345567741');" style=""> 183         public abstract void startBinding();                                                             </span>
<span  style=""> 184                                                                                                          </span>
<span class="5769462036588798432" onmouseenter="enter('5769462036588798432');" onmouseout="out('5769462036588798432');" style=""><abbr title=" 185         public abstract void bindItems(ArrayList&lt;ItemInfo&gt; shortcuts, int start, int end, boolean forceAnimateIcons);"> 185         public abstract void bindItems(ArrayList&lt;ItemInfo&gt; shortcuts, int start, int end, boolean forceAn</abbr></span>
<span  style=""> 186                                                                                                          </span>
<span class="-8474304295034919109" onmouseenter="enter('-8474304295034919109');" onmouseout="out('-8474304295034919109');" style=""> 187         public abstract void bindScreens(ArrayList&lt;Long&gt; orderedScreenIds);                              </span>
<span  style=""> 188                                                                                                          </span>
<span class="-1577718321434656958" onmouseenter="enter('-1577718321434656958');" onmouseout="out('-1577718321434656958');" style=""> 189         public abstract void bindAddScreens(ArrayList&lt;Long&gt; orderedScreenIds);                           </span>
<span  style=""> 190                                                                                                          </span>
<span class="-7787879534890891966" onmouseenter="enter('-7787879534890891966');" onmouseout="out('-7787879534890891966');" style=""> 191         public abstract void bindFolders(HashMap&lt;Long, FolderInfo&gt; folders);                             </span>
<span  style=""> 192                                                                                                          </span>
<span class="-2479536162861027993" onmouseenter="enter('-2479536162861027993');" onmouseout="out('-2479536162861027993');" style=""> 193         public abstract void finishBindingItems(boolean upgradePath);                                    </span>
<span  style=""> 194                                                                                                          </span>
<span class="-4066088446296132158" onmouseenter="enter('-4066088446296132158');" onmouseout="out('-4066088446296132158');" style=""> 195         public abstract void bindAppWidget(LauncherAppWidgetInfo info);                                  </span>
<span  style=""> 196                                                                                                          </span>
<span class="-644636094983226183" onmouseenter="enter('-644636094983226183');" onmouseout="out('-644636094983226183');" style=""> 197         public abstract void bindAllApplications(ArrayList&lt;AppInfo&gt; apps);                               </span>
<span  style=""> 198                                                                                                          </span>
<span class="-6644914292556538669" onmouseenter="enter('-6644914292556538669');" onmouseout="out('-6644914292556538669');" style=""><abbr title=" 199         public abstract void bindAppsAdded(ArrayList&lt;Long&gt; newScreens, ArrayList&lt;ItemInfo&gt; addNotAnimated, ArrayList&lt;ItemInfo&gt; addAnimated, ArrayList&lt;AppInfo&gt; addedApps);"> 199         public abstract void bindAppsAdded(ArrayList&lt;Long&gt; newScreens, ArrayList&lt;ItemInfo&gt; addNotAnimated</abbr></span>
<span  style=""> 200                                                                                                          </span>
<span class="-5633473103749570937" onmouseenter="enter('-5633473103749570937');" onmouseout="out('-5633473103749570937');" style=""> 201         public abstract void bindAppsUpdated(ArrayList&lt;AppInfo&gt; apps);                                   </span>
<span  style=""> 202                                                                                                          </span>
<span class="5824355819038928151" onmouseenter="enter('5824355819038928151');" onmouseout="out('5824355819038928151');" style=""><abbr title=" 203         public abstract void bindComponentsRemoved(ArrayList&lt;String&gt; packageNames, ArrayList&lt;AppInfo&gt; appInfos);"> 203         public abstract void bindComponentsRemoved(ArrayList&lt;String&gt; packageNames, ArrayList&lt;AppInfo&gt; app</abbr></span>
<span  style=""> 204                                                                                                          </span>
<span class="-8045561113830488132" onmouseenter="enter('-8045561113830488132');" onmouseout="out('-8045561113830488132');" style=""> 205         public abstract void bindPackagesUpdated(ArrayList&lt;Object&gt; widgetsAndShortcuts);                 </span>
<span  style=""> 206                                                                                                          </span>
<span class="3035694424816394667" onmouseenter="enter('3035694424816394667');" onmouseout="out('3035694424816394667');" style=""> 207         public abstract void bindSearchablesChanged();                                                   </span>
<span  style=""> 208                                                                                                          </span>
<span class="5115391705411126821" onmouseenter="enter('5115391705411126821');" onmouseout="out('5115391705411126821');" style=""> 209         public abstract boolean isAllAppsButtonRank(int rank);                                           </span>
<span  style=""> 210                                                                                                          </span>
<span class="-5889006608530378838" onmouseenter="enter('-5889006608530378838');" onmouseout="out('-5889006608530378838');" style=""> 211         public abstract void onPageBoundSynchronously(int page);                                         </span>
<span  style=""> 212                                                                                                          </span>
<span class="-1992950319673464877" onmouseenter="enter('-1992950319673464877');" onmouseout="out('-1992950319673464877');" style=""> 213         public abstract void dumpLogsToLocalData();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214     }                                                                                                    </span>
<span  style=""> 215                                                                                                          </span>
<span class="6660553528201779332" onmouseenter="enter('6660553528201779332');" onmouseout="out('6660553528201779332');" style=""> 216     public interface ItemInfoFilter {                                                                    </span>
<span class="3983161794363928901" onmouseenter="enter('3983161794363928901');" onmouseout="out('3983161794363928901');" style=""> 217         public abstract boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218     }                                                                                                    </span>
<span  style=""> 219                                                                                                          </span>
<span class="-7540253694606934273" onmouseenter="enter('-7540253694606934273');" onmouseout="out('-7540253694606934273');" style=""> 220     LauncherModel(LauncherAppState app, IconCache iconCache, AppFilter appFilter) {                      </span>
<span class="-3815285143453777974" onmouseenter="enter('-3815285143453777974');" onmouseout="out('-3815285143453777974');" style=""> 221         Context context = app.getContext();                                                              </span>
<span class="5049533599805126653" onmouseenter="enter('5049533599805126653');" onmouseout="out('5049533599805126653');" style=""> 222         ContentResolver contentResolver = context.getContentResolver();                                  </span>
<span class="1644001329477881511" onmouseenter="enter('1644001329477881511');" onmouseout="out('1644001329477881511');" style=""> 223         mAppsCanBeOnRemoveableStorage = Environment.isExternalStorageRemovable();                        </span>
<span class="-89013733769383191" onmouseenter="enter('-89013733769383191');" onmouseout="out('-89013733769383191');" style=""><abbr title=" 224         mOldContentProviderExists = contentResolver.acquireContentProviderClient(LauncherSettings.Favorites.OLD_CONTENT_URI) != null;"> 224         mOldContentProviderExists = contentResolver.acquireContentProviderClient(LauncherSettings.Favorit</abbr></span>
<span class="8987557410347250467" onmouseenter="enter('8987557410347250467');" onmouseout="out('8987557410347250467');" style=""> 225         mApp = app;                                                                                      </span>
<span class="-1240051748269974178" onmouseenter="enter('-1240051748269974178');" onmouseout="out('-1240051748269974178');" style=""> 226         mBgAllAppsList = new AllAppsList(iconCache, appFilter);                                          </span>
<span class="1920389422449187498" onmouseenter="enter('1920389422449187498');" onmouseout="out('1920389422449187498');" style=""> 227         mIconCache = iconCache;                                                                          </span>
<span class="3654972388535142593" onmouseenter="enter('3654972388535142593');" onmouseout="out('3654972388535142593');" style=""> 228         final Resources res = context.getResources();                                                    </span>
<span class="-4708036118337437843" onmouseenter="enter('-4708036118337437843');" onmouseout="out('-4708036118337437843');" style=""> 229         Configuration config = res.getConfiguration();                                                   </span>
<span class="-32775646941108504" onmouseenter="enter('-32775646941108504');" onmouseout="out('-32775646941108504');" style=""> 230         mPreviousConfigMcc = config.mcc;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231     }                                                                                                    </span>
<span  style=""> 232                                                                                                          </span>
<span class="7032781054018231449" onmouseenter="enter('7032781054018231449');" onmouseout="out('7032781054018231449');" style=""> 233     /** Runs the specified runnable immediately if called from the main thread, otherwise it is          </span>
<span class="7688515897456092220" onmouseenter="enter('7688515897456092220');" onmouseout="out('7688515897456092220');" style=""> 234      * posted on the main thread handler. */                                                             </span>
<span class="-3461925467760565643" onmouseenter="enter('-3461925467760565643');" onmouseout="out('-3461925467760565643');" style=""> 235     private void runOnMainThread(Runnable r) {                                                           </span>
<span class="-8277339055128647976" onmouseenter="enter('-8277339055128647976');" onmouseout="out('-8277339055128647976');" style=""> 236         runOnMainThread(r, 0);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237     }                                                                                                    </span>
<span  style=""> 238                                                                                                          </span>
<span class="2979979552252814736" onmouseenter="enter('2979979552252814736');" onmouseout="out('2979979552252814736');" style=""> 239     private void runOnMainThread(Runnable r, int type) {                                                 </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 240         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="-8713172384634047131" onmouseenter="enter('-8713172384634047131');" onmouseout="out('-8713172384634047131');" style=""> 241             // If we are on the worker thread, post onto the main handler                                </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 242             mHandler.post(r);                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 243         } else {                                                                                         </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 244             r.run();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 245         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246     }                                                                                                    </span>
<span  style=""> 247                                                                                                          </span>
<span class="3207003836565128" onmouseenter="enter('3207003836565128');" onmouseout="out('3207003836565128');" style=""> 248     /** Runs the specified runnable immediately if called from the worker thread, otherwise it is        </span>
<span class="-2756655390038865740" onmouseenter="enter('-2756655390038865740');" onmouseout="out('-2756655390038865740');" style=""> 249      * posted on the worker thread handler. */                                                           </span>
<span class="-6815764929820931194" onmouseenter="enter('-6815764929820931194');" onmouseout="out('-6815764929820931194');" style=""> 250     private static void runOnWorkerThread(Runnable r) {                                                  </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 251         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 252             r.run();                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 253         } else {                                                                                         </span>
<span class="4127612692606453253" onmouseenter="enter('4127612692606453253');" onmouseout="out('4127612692606453253');" style=""> 254             // If we are not on the worker thread, then post to the worker handler                       </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style=""> 255             sWorker.post(r);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257     }                                                                                                    </span>
<span  style=""> 258                                                                                                          </span>
<span class="-7044369129545244866" onmouseenter="enter('-7044369129545244866');" onmouseout="out('-7044369129545244866');" style=""> 259     boolean canMigrateFromOldLauncherDb(Launcher launcher) {                                             </span>
<span class="7588769537569950934" onmouseenter="enter('7588769537569950934');" onmouseout="out('7588769537569950934');" style=""> 260         return mOldContentProviderExists &amp;&amp; !launcher.isLauncherPreinstalled() ;                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261     }                                                                                                    </span>
<span  style=""> 262                                                                                                          </span>
<span class="7006856679254675514" onmouseenter="enter('7006856679254675514');" onmouseout="out('7006856679254675514');" style=""> 263     static boolean findNextAvailableIconSpaceInScreen(ArrayList&lt;ItemInfo&gt; items, int[] xy,               </span>
<span class="-6492711054324248109" onmouseenter="enter('-6492711054324248109');" onmouseout="out('-6492711054324248109');" style=""> 264                                  long screen) {                                                          </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 265         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style=""> 266         DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                    </span>
<span class="559481881935924132" onmouseenter="enter('559481881935924132');" onmouseout="out('559481881935924132');" style=""> 267         final int xCount = (int) grid.numColumns;                                                        </span>
<span class="-3430391683121642487" onmouseenter="enter('-3430391683121642487');" onmouseout="out('-3430391683121642487');" style=""> 268         final int yCount = (int) grid.numRows;                                                           </span>
<span class="9207855715228317472" onmouseenter="enter('9207855715228317472');" onmouseout="out('9207855715228317472');" style=""> 269         boolean[][] occupied = new boolean[xCount][yCount];                                              </span>
<span  style=""> 270                                                                                                          </span>
<span class="2963072137114824070" onmouseenter="enter('2963072137114824070');" onmouseout="out('2963072137114824070');" style=""> 271         int cellX, cellY, spanX, spanY;                                                                  </span>
<span class="5020765328610170980" onmouseenter="enter('5020765328610170980');" onmouseout="out('5020765328610170980');" style=""> 272         for (int i = 0; i &lt; items.size(); ++i) {                                                         </span>
<span class="3181415890192694055" onmouseenter="enter('3181415890192694055');" onmouseout="out('3181415890192694055');" style=""> 273             final ItemInfo item = items.get(i);                                                          </span>
<span class="-4074076028767186492" onmouseenter="enter('-4074076028767186492');" onmouseout="out('-4074076028767186492');" style=""> 274             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                        </span>
<span class="4879929299303230054" onmouseenter="enter('4879929299303230054');" onmouseout="out('4879929299303230054');" style=""> 275                 if (item.screenId == screen) {                                                           </span>
<span class="-5253640052908660766" onmouseenter="enter('-5253640052908660766');" onmouseout="out('-5253640052908660766');" style=""> 276                     cellX = item.cellX;                                                                  </span>
<span class="8289808867760126989" onmouseenter="enter('8289808867760126989');" onmouseout="out('8289808867760126989');" style=""> 277                     cellY = item.cellY;                                                                  </span>
<span class="-1153670204852401248" onmouseenter="enter('-1153670204852401248');" onmouseout="out('-1153670204852401248');" style=""> 278                     spanX = item.spanX;                                                                  </span>
<span class="-1841066671071348880" onmouseenter="enter('-1841066671071348880');" onmouseout="out('-1841066671071348880');" style=""> 279                     spanY = item.spanY;                                                                  </span>
<span class="3713894754787265371" onmouseenter="enter('3713894754787265371');" onmouseout="out('3713894754787265371');" style=""> 280                     for (int x = cellX; 0 &lt;= x &amp;&amp; x &lt; cellX + spanX &amp;&amp; x &lt; xCount; x++) {                </span>
<span class="1312990358377437379" onmouseenter="enter('1312990358377437379');" onmouseout="out('1312990358377437379');" style=""> 281                         for (int y = cellY; 0 &lt;= y &amp;&amp; y &lt; cellY + spanY &amp;&amp; y &lt; yCount; y++) {            </span>
<span class="-8702463444488690423" onmouseenter="enter('-8702463444488690423');" onmouseout="out('-8702463444488690423');" style=""> 282                             occupied[x][y] = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287         }                                                                                                </span>
<span  style=""> 288                                                                                                          </span>
<span class="-8431133162249858978" onmouseenter="enter('-8431133162249858978');" onmouseout="out('-8431133162249858978');" style=""> 289         return CellLayout.findVacantCell(xy, 1, 1, xCount, yCount, occupied);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290     }                                                                                                    </span>
<span  style=""> 291                                                                                                          </span>
<span class="-6259456544478400180" onmouseenter="enter('-6259456544478400180');" onmouseout="out('-6259456544478400180');" style=""> 292     static Pair&lt;Long, int[]&gt; findNextAvailableIconSpace(Context context, String name,                    </span>
<span class="-5771883199866145387" onmouseenter="enter('-5771883199866145387');" onmouseout="out('-5771883199866145387');" style=""> 293                                                         Intent launchIntent,                             </span>
<span class="245504953411362786" onmouseenter="enter('245504953411362786');" onmouseout="out('245504953411362786');" style=""> 294                                                         int firstScreenIndex,                            </span>
<span class="-3030748495081078938" onmouseenter="enter('-3030748495081078938');" onmouseout="out('-3030748495081078938');" style=""> 295                                                         ArrayList&lt;Long&gt; workspaceScreens) {              </span>
<span class="721182088367487597" onmouseenter="enter('721182088367487597');" onmouseout="out('721182088367487597');" style=""> 296         // Lock on the app so that we don&#x27;t try and get the items while apps are being added             </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 297         LauncherAppState app = LauncherAppState.getInstance();                                           </span>
<span class="-2530158852228207709" onmouseenter="enter('-2530158852228207709');" onmouseout="out('-2530158852228207709');" style=""> 298         LauncherModel model = app.getModel();                                                            </span>
<span class="-7742650363035610838" onmouseenter="enter('-7742650363035610838');" onmouseout="out('-7742650363035610838');" style=""> 299         boolean found = false;                                                                           </span>
<span class="8915607661092661586" onmouseenter="enter('8915607661092661586');" onmouseout="out('8915607661092661586');" style=""> 300         synchronized (app) {                                                                             </span>
<span class="7297018345010768725" onmouseenter="enter('7297018345010768725');" onmouseout="out('7297018345010768725');" style=""> 301             if (sWorkerThread.getThreadId() != Process.myTid()) {                                        </span>
<span class="-8468687854737954991" onmouseenter="enter('-8468687854737954991');" onmouseout="out('-8468687854737954991');" style=""> 302                 // Flush the LauncherModel worker thread, so that if we just did another                 </span>
<span class="-8915737001643417667" onmouseenter="enter('-8915737001643417667');" onmouseout="out('-8915737001643417667');" style=""> 303                 // processInstallShortcut, we give it time for its shortcut to get added to the          </span>
<span class="2341850028976611589" onmouseenter="enter('2341850028976611589');" onmouseout="out('2341850028976611589');" style=""> 304                 // database (getItemsInLocalCoordinates reads the database)                              </span>
<span class="-3308163450517263024" onmouseenter="enter('-3308163450517263024');" onmouseout="out('-3308163450517263024');" style=""> 305                 model.flushWorkerThread();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306             }                                                                                            </span>
<span class="8797318797001481965" onmouseenter="enter('8797318797001481965');" onmouseout="out('8797318797001481965');" style=""> 307             final ArrayList&lt;ItemInfo&gt; items = LauncherModel.getItemsInLocalCoordinates(context);         </span>
<span  style=""> 308                                                                                                          </span>
<span class="2319873497820841755" onmouseenter="enter('2319873497820841755');" onmouseout="out('2319873497820841755');" style=""> 309             // Try adding to the workspace screens incrementally, starting at the default or center      </span>
<span class="1139467458780899300" onmouseenter="enter('1139467458780899300');" onmouseout="out('1139467458780899300');" style=""> 310             // screen and alternating between +1, -1, +2, -2, etc. (using ~ ceil(i/2f)*(-1)^(i-1))       </span>
<span class="8331999200789555153" onmouseenter="enter('8331999200789555153');" onmouseout="out('8331999200789555153');" style=""> 311             firstScreenIndex = Math.min(firstScreenIndex, workspaceScreens.size());                      </span>
<span class="-5057452471390749214" onmouseenter="enter('-5057452471390749214');" onmouseout="out('-5057452471390749214');" style=""> 312             int count = workspaceScreens.size();                                                         </span>
<span class="6323561107141122979" onmouseenter="enter('6323561107141122979');" onmouseout="out('6323561107141122979');" style=""> 313             for (int screen = firstScreenIndex; screen &lt; count &amp;&amp; !found; screen++) {                    </span>
<span class="-2680594161355971081" onmouseenter="enter('-2680594161355971081');" onmouseout="out('-2680594161355971081');" style=""> 314                 int[] tmpCoordinates = new int[2];                                                       </span>
<span class="7117247924377105749" onmouseenter="enter('7117247924377105749');" onmouseout="out('7117247924377105749');" style=""> 315                 if (findNextAvailableIconSpaceInScreen(items, tmpCoordinates,                            </span>
<span class="-6258224581011394116" onmouseenter="enter('-6258224581011394116');" onmouseout="out('-6258224581011394116');" style=""> 316                         workspaceScreens.get(screen))) {                                                 </span>
<span class="-4461607076234575183" onmouseenter="enter('-4461607076234575183');" onmouseout="out('-4461607076234575183');" style=""> 317                     // Update the Launcher db                                                            </span>
<span class="-6316225509374818886" onmouseenter="enter('-6316225509374818886');" onmouseout="out('-6316225509374818886');" style=""> 318                     return new Pair&lt;Long, int[]&gt;(workspaceScreens.get(screen), tmpCoordinates);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 319                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 321         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 322         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323     }                                                                                                    </span>
<span  style=""> 324                                                                                                          </span>
<span class="4280303067384476462" onmouseenter="enter('4280303067384476462');" onmouseout="out('4280303067384476462');" style=""><abbr title=" 325     public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps, final ArrayList&lt;AppInfo&gt; allAppsApps) {"> 325     public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps, final</abbr></span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style=""> 326         Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;                                   </span>
<span class="-5825036277829220629" onmouseenter="enter('-5825036277829220629');" onmouseout="out('-5825036277829220629');" style=""> 327         addAndBindAddedApps(context, workspaceApps, cb, allAppsApps);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328     }                                                                                                    </span>
<span  style=""> 329                                                                                                          </span>
<span class="8662883099744490797" onmouseenter="enter('8662883099744490797');" onmouseout="out('8662883099744490797');" style=""><abbr title=" 330     public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps, final Callbacks callbacks, final ArrayList&lt;AppInfo&gt; allAppsApps) {"> 330     public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps, final</abbr></span>
<span class="7614763453167705338" onmouseenter="enter('7614763453167705338');" onmouseout="out('7614763453167705338');" style=""> 331         if ((workspaceApps == null) || (allAppsApps == null)) {                                          </span>
<span class="-5351072863300047246" onmouseenter="enter('-5351072863300047246');" onmouseout="out('-5351072863300047246');" style=""> 332             throw new RuntimeException(&quot;workspaceApps and allAppsApps must not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333         }                                                                                                </span>
<span class="6140956863670038829" onmouseenter="enter('6140956863670038829');" onmouseout="out('6140956863670038829');" style=""> 334         if (workspaceApps.isEmpty() &amp;&amp; allAppsApps.isEmpty()) {                                          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 335             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336         }                                                                                                </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 337         // Process the newly added applications and add them to the database first                       </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 338         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 339             public void run() {                                                                          </span>
<span class="5854603691017442546" onmouseenter="enter('5854603691017442546');" onmouseout="out('5854603691017442546');" style=""> 340                 final ArrayList&lt;ItemInfo&gt; addedShortcutsFinal = new ArrayList&lt;ItemInfo&gt;();               </span>
<span class="4777543170844968619" onmouseenter="enter('4777543170844968619');" onmouseout="out('4777543170844968619');" style=""> 341                 final ArrayList&lt;Long&gt; addedWorkspaceScreensFinal = new ArrayList&lt;Long&gt;();                </span>
<span class="4915887978102159996" onmouseenter="enter('4915887978102159996');" onmouseout="out('4915887978102159996');" style=""> 342                 // Get the list of workspace screens.  We need to append to this list and                </span>
<span class="-2543969750120350255" onmouseenter="enter('-2543969750120350255');" onmouseout="out('-2543969750120350255');" style=""> 343                 // can not use sBgWorkspaceScreens because loadWorkspace() may not have been             </span>
<span class="-1621475725142003189" onmouseenter="enter('-1621475725142003189');" onmouseout="out('-1621475725142003189');" style=""> 344                 // called.                                                                               </span>
<span class="-3443356389434560072" onmouseenter="enter('-3443356389434560072');" onmouseout="out('-3443356389434560072');" style=""> 345                 ArrayList&lt;Long&gt; workspaceScreens = new ArrayList&lt;Long&gt;();                                </span>
<span class="-7213068701168456094" onmouseenter="enter('-7213068701168456094');" onmouseout="out('-7213068701168456094');" style=""> 346                 TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(context);                 </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style=""> 347                 for (Integer i : orderedScreens.keySet()) {                                              </span>
<span class="3611014469778353319" onmouseenter="enter('3611014469778353319');" onmouseout="out('3611014469778353319');" style=""> 348                     long screenId = orderedScreens.get(i);                                               </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 349                     workspaceScreens.add(screenId);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 350                 }                                                                                        </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 351                 synchronized(sBgLock) {                                                                  </span>
<span class="8076980411968102032" onmouseenter="enter('8076980411968102032');" onmouseout="out('8076980411968102032');" style=""> 352                     Iterator&lt;ItemInfo&gt; iter = workspaceApps.iterator();                                  </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 353                     while (iter.hasNext()) {                                                             </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 354                         ItemInfo a = iter.next();                                                        </span>
<span class="5754535581277543167" onmouseenter="enter('5754535581277543167');" onmouseout="out('5754535581277543167');" style=""> 355                         final String name = a.title.toString();                                          </span>
<span class="586533724609175080" onmouseenter="enter('586533724609175080');" onmouseout="out('586533724609175080');" style=""> 356                         final Intent launchIntent = a.getIntent();                                       </span>
<span class="-3621515927242872869" onmouseenter="enter('-3621515927242872869');" onmouseout="out('-3621515927242872869');" style=""> 357                         // Short-circuit this logic if the icon exists somewhere on the workspace        </span>
<span class="-636823087841001444" onmouseenter="enter('-636823087841001444');" onmouseout="out('-636823087841001444');" style=""> 358                         if (LauncherModel.shortcutExists(context, name, launchIntent)) {                 </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 359                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 360                         }                                                                                </span>
<span class="7211587366126774382" onmouseenter="enter('7211587366126774382');" onmouseout="out('7211587366126774382');" style=""> 361                         // Add this icon to the db, creating a new page if necessary.  If there          </span>
<span class="1191339950892304982" onmouseenter="enter('1191339950892304982');" onmouseout="out('1191339950892304982');" style=""> 362                         // is only the empty page then we just add items to the first page.              </span>
<span class="1496171924920860168" onmouseenter="enter('1496171924920860168');" onmouseout="out('1496171924920860168');" style=""> 363                         // Otherwise, we add them to the next pages.                                     </span>
<span class="6942681515297262086" onmouseenter="enter('6942681515297262086');" onmouseout="out('6942681515297262086');" style=""> 364                         int startSearchPageIndex = (workspaceScreens.isEmpty()) ? 0 : 1;                 </span>
<span class="5475318676933485874" onmouseenter="enter('5475318676933485874');" onmouseout="out('5475318676933485874');" style=""><abbr title=" 365                         Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context, name, launchIntent, startSearchPageIndex, workspaceScreens);"> 365                         Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context, name</abbr></span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 366                         if (coords == null) {                                                            </span>
<span class="-1977519011864878718" onmouseenter="enter('-1977519011864878718');" onmouseout="out('-1977519011864878718');" style=""> 367                             LauncherProvider lp = LauncherAppState.getLauncherProvider();                </span>
<span class="-6633238510673534076" onmouseenter="enter('-6633238510673534076');" onmouseout="out('-6633238510673534076');" style=""> 368                             // If we can&#x27;t find a valid position, then just add a new screen.            </span>
<span class="9059050260314553422" onmouseenter="enter('9059050260314553422');" onmouseout="out('9059050260314553422');" style=""> 369                             // This takes time so we need to re-queue the add until the new              </span>
<span class="-5280811079167182328" onmouseenter="enter('-5280811079167182328');" onmouseout="out('-5280811079167182328');" style=""> 370                             // page is added.  Create as many screens as necessary to satisfy            </span>
<span class="8455829478477151409" onmouseenter="enter('8455829478477151409');" onmouseout="out('8455829478477151409');" style=""> 371                             // the startSearchPageIndex.                                                 </span>
<span class="-4633937574945330988" onmouseenter="enter('-4633937574945330988');" onmouseout="out('-4633937574945330988');" style=""><abbr title=" 372                             int numPagesToAdd = Math.max(1, (startSearchPageIndex + 1) - workspaceScreens.size());"> 372                             int numPagesToAdd = Math.max(1, (startSearchPageIndex + 1) - workspaceScreens</abbr></span>
<span class="1483283720296841413" onmouseenter="enter('1483283720296841413');" onmouseout="out('1483283720296841413');" style=""> 373                             while (numPagesToAdd &gt; 0) {                                                  </span>
<span class="5474653119612683837" onmouseenter="enter('5474653119612683837');" onmouseout="out('5474653119612683837');" style=""> 374                                 long screenId = lp.generateNewScreenId();                                </span>
<span class="-5141234047937446124" onmouseenter="enter('-5141234047937446124');" onmouseout="out('-5141234047937446124');" style=""> 375                                 // Save the screen id for binding in the workspace                       </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 376                                 workspaceScreens.add(screenId);                                          </span>
<span class="-3696618646623922220" onmouseenter="enter('-3696618646623922220');" onmouseout="out('-3696618646623922220');" style=""> 377                                 addedWorkspaceScreensFinal.add(screenId);                                </span>
<span class="6351530934092402455" onmouseenter="enter('6351530934092402455');" onmouseout="out('6351530934092402455');" style=""> 378                                 numPagesToAdd--;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379                             }                                                                            </span>
<span class="3901243562383099159" onmouseenter="enter('3901243562383099159');" onmouseout="out('3901243562383099159');" style=""> 380                             // Find the coordinate again                                                 </span>
<span class="-8995545726255917793" onmouseenter="enter('-8995545726255917793');" onmouseout="out('-8995545726255917793');" style=""><abbr title=" 381                             coords = LauncherModel.findNextAvailableIconSpace(context, name, launchIntent, startSearchPageIndex, workspaceScreens);"> 381                             coords = LauncherModel.findNextAvailableIconSpace(context, name, launchIntent</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382                         }                                                                                </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 383                         if (coords == null) {                                                            </span>
<span class="-5449977300326458327" onmouseenter="enter('-5449977300326458327');" onmouseout="out('-5449977300326458327');" style=""> 384                             throw new RuntimeException(&quot;Coordinates should not be null&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 385                         }                                                                                </span>
<span class="2174473495010763804" onmouseenter="enter('2174473495010763804');" onmouseout="out('2174473495010763804');" style=""> 386                         ShortcutInfo shortcutInfo;                                                       </span>
<span class="3426516810566896093" onmouseenter="enter('3426516810566896093');" onmouseout="out('3426516810566896093');" style=""> 387                         if (a instanceof ShortcutInfo) {                                                 </span>
<span class="-2077713348370366293" onmouseenter="enter('-2077713348370366293');" onmouseout="out('-2077713348370366293');" style=""> 388                             shortcutInfo = ((ShortcutInfo) (a));                                         </span>
<span class="-6332708218117638716" onmouseenter="enter('-6332708218117638716');" onmouseout="out('-6332708218117638716');" style=""> 389                         } else if (a instanceof AppInfo) {                                               </span>
<span class="3620448109683680843" onmouseenter="enter('3620448109683680843');" onmouseout="out('3620448109683680843');" style=""> 390                             shortcutInfo = ((AppInfo) (a)).makeShortcut();                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 391                         } else {                                                                         </span>
<span class="-2299195794588473913" onmouseenter="enter('-2299195794588473913');" onmouseout="out('-2299195794588473913');" style=""> 392                             throw new RuntimeException(&quot;Unexpected info type&quot;);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 393                         }                                                                                </span>
<span class="-2461182371641304570" onmouseenter="enter('-2461182371641304570');" onmouseout="out('-2461182371641304570');" style=""> 394                         // Add the shortcut to the db                                                    </span>
<span class="-1183187661294806550" onmouseenter="enter('-1183187661294806550');" onmouseout="out('-1183187661294806550');" style=""><abbr title=" 395                         addItemToDatabase(context, shortcutInfo, LauncherSettings.Favorites.CONTAINER_DESKTOP, coords.first, coords.second[0], coords.second[1], false);"> 395                         addItemToDatabase(context, shortcutInfo, LauncherSettings.Favorites.CONTAINER_DES</abbr></span>
<span class="-9035556179028036770" onmouseenter="enter('-9035556179028036770');" onmouseout="out('-9035556179028036770');" style=""> 396                         // Save the ShortcutInfo for binding in the workspace                            </span>
<span class="-7926664864188687285" onmouseenter="enter('-7926664864188687285');" onmouseout="out('-7926664864188687285');" style=""> 397                         addedShortcutsFinal.add(shortcutInfo);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 398                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399                 }                                                                                        </span>
<span class="-4345643046227374009" onmouseenter="enter('-4345643046227374009');" onmouseout="out('-4345643046227374009');" style=""> 400                 // Update the workspace screens                                                          </span>
<span class="-8595972794596504077" onmouseenter="enter('-8595972794596504077');" onmouseout="out('-8595972794596504077');" style=""> 401                 updateWorkspaceScreenOrder(context, workspaceScreens);                                   </span>
<span class="3783100736290307958" onmouseenter="enter('3783100736290307958');" onmouseout="out('3783100736290307958');" style=""> 402                 if ((!addedShortcutsFinal.isEmpty()) || (!allAppsApps.isEmpty())) {                      </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 403                     runOnMainThread(new Runnable() {                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 404                         public void run() {                                                              </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style=""> 405                             Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;               </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style=""> 406                             if ((callbacks == cb) &amp;&amp; (cb != null)) {                                     </span>
<span class="-1019372697145415139" onmouseenter="enter('-1019372697145415139');" onmouseout="out('-1019372697145415139');" style=""> 407                                 final ArrayList&lt;ItemInfo&gt; addAnimated = new ArrayList&lt;ItemInfo&gt;();       </span>
<span class="2118444153049166132" onmouseenter="enter('2118444153049166132');" onmouseout="out('2118444153049166132');" style=""> 408                                 final ArrayList&lt;ItemInfo&gt; addNotAnimated = new ArrayList&lt;ItemInfo&gt;();    </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 409                                 if (!addedShortcutsFinal.isEmpty()) {                                    </span>
<span class="-7025153910539821495" onmouseenter="enter('-7025153910539821495');" onmouseout="out('-7025153910539821495');" style=""><abbr title=" 410                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - 1);"> 410                                     ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - </abbr></span>
<span class="2594218988288672349" onmouseenter="enter('2594218988288672349');" onmouseout="out('2594218988288672349');" style=""> 411                                     long lastScreenId = info.screenId;                                   </span>
<span class="-1990558815210533549" onmouseenter="enter('-1990558815210533549');" onmouseout="out('-1990558815210533549');" style=""> 412                                     for (ItemInfo i : addedShortcutsFinal) {                             </span>
<span class="493217455474284777" onmouseenter="enter('493217455474284777');" onmouseout="out('493217455474284777');" style=""> 413                                         if (i.screenId == lastScreenId) {                                </span>
<span class="-1039209268317612440" onmouseenter="enter('-1039209268317612440');" onmouseout="out('-1039209268317612440');" style=""> 414                                             addAnimated.add(i);                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 415                                         } else {                                                         </span>
<span class="-1143244035417449650" onmouseenter="enter('-1143244035417449650');" onmouseout="out('-1143244035417449650');" style=""> 416                                             addNotAnimated.add(i);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419                                 }                                                                        </span>
<span class="8921755322518296073" onmouseenter="enter('8921755322518296073');" onmouseout="out('8921755322518296073');" style=""><abbr title=" 420                                 callbacks.bindAppsAdded(addedWorkspaceScreensFinal, addNotAnimated, addAnimated, allAppsApps);"> 420                                 callbacks.bindAppsAdded(addedWorkspaceScreensFinal, addNotAnimated, addAn</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 423                     });                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 424                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 426         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 427         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428     }                                                                                                    </span>
<span  style=""> 429                                                                                                          </span>
<span class="6011793905538310529" onmouseenter="enter('6011793905538310529');" onmouseout="out('6011793905538310529');" style=""> 430     public Bitmap getFallbackIcon() {                                                                    </span>
<span class="-671044890656554786" onmouseenter="enter('-671044890656554786');" onmouseout="out('-671044890656554786');" style=""> 431         if (mDefaultIcon == null) {                                                                      </span>
<span class="6379788101570603758" onmouseenter="enter('6379788101570603758');" onmouseout="out('6379788101570603758');" style=""> 432             final Context context = LauncherAppState.getInstance().getContext();                         </span>
<span class="-6730081374242205673" onmouseenter="enter('-6730081374242205673');" onmouseout="out('-6730081374242205673');" style=""> 433             mDefaultIcon = Utilities.createIconBitmap(                                                   </span>
<span class="-5707305257020956234" onmouseenter="enter('-5707305257020956234');" onmouseout="out('-5707305257020956234');" style=""> 434                     mIconCache.getFullResDefaultActivityIcon(), context);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 435         }                                                                                                </span>
<span class="1334413422936499318" onmouseenter="enter('1334413422936499318');" onmouseout="out('1334413422936499318');" style=""> 436         return Bitmap.createBitmap(mDefaultIcon);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437     }                                                                                                    </span>
<span  style=""> 438                                                                                                          </span>
<span class="-2534375214054854784" onmouseenter="enter('-2534375214054854784');" onmouseout="out('-2534375214054854784');" style=""> 439     public void unbindItemInfosAndClearQueuedBindRunnables() {                                           </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 440         if (sWorkerThread.getThreadId() == Process.myTid()) {                                            </span>
<span class="3234081821162543737" onmouseenter="enter('3234081821162543737');" onmouseout="out('3234081821162543737');" style=""> 441             throw new RuntimeException(&quot;Expected unbindLauncherItemInfos() to be called from the &quot; +     </span>
<span class="-2105866874193436772" onmouseenter="enter('-2105866874193436772');" onmouseout="out('-2105866874193436772');" style=""> 442                     &quot;main thread&quot;);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 443         }                                                                                                </span>
<span  style=""> 444                                                                                                          </span>
<span class="2920227315927506269" onmouseenter="enter('2920227315927506269');" onmouseout="out('2920227315927506269');" style=""> 445         // Clear any deferred bind runnables                                                             </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style=""> 446         mDeferredBindRunnables.clear();                                                                  </span>
<span class="8385691997542366613" onmouseenter="enter('8385691997542366613');" onmouseout="out('8385691997542366613');" style=""> 447         // Remove any queued bind runnables                                                              </span>
<span class="5230017654050637935" onmouseenter="enter('5230017654050637935');" onmouseout="out('5230017654050637935');" style=""> 448         mHandler.cancelAllRunnablesOfType(MAIN_THREAD_BINDING_RUNNABLE);                                 </span>
<span class="1897803433846165569" onmouseenter="enter('1897803433846165569');" onmouseout="out('1897803433846165569');" style=""> 449         // Unbind all the workspace items                                                                </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style=""> 450         unbindWorkspaceItemsOnMainThread();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451     }                                                                                                    </span>
<span  style=""> 452                                                                                                          </span>
<span class="-8568492770799719308" onmouseenter="enter('-8568492770799719308');" onmouseout="out('-8568492770799719308');" style=""> 453     /** Unbinds all the sBgWorkspaceItems and sBgAppWidgets on the main thread */                        </span>
<span class="-7789072121131450728" onmouseenter="enter('-7789072121131450728');" onmouseout="out('-7789072121131450728');" style=""> 454     void unbindWorkspaceItemsOnMainThread() {                                                            </span>
<span class="7758625295624680992" onmouseenter="enter('7758625295624680992');" onmouseout="out('7758625295624680992');" style=""> 455         // Ensure that we don&#x27;t use the same workspace items data structure on the main thread           </span>
<span class="737195251801262528" onmouseenter="enter('737195251801262528');" onmouseout="out('737195251801262528');" style=""> 456         // by making a copy of workspace items first.                                                    </span>
<span class="-1398641255292585189" onmouseenter="enter('-1398641255292585189');" onmouseout="out('-1398641255292585189');" style=""> 457         final ArrayList&lt;ItemInfo&gt; tmpWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="-3814257207504512344" onmouseenter="enter('-3814257207504512344');" onmouseout="out('-3814257207504512344');" style=""> 458         final ArrayList&lt;ItemInfo&gt; tmpAppWidgets = new ArrayList&lt;ItemInfo&gt;();                             </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 459         synchronized (sBgLock) {                                                                         </span>
<span class="871827956477804030" onmouseenter="enter('871827956477804030');" onmouseout="out('871827956477804030');" style=""> 460             tmpWorkspaceItems.addAll(sBgWorkspaceItems);                                                 </span>
<span class="7232141846966659069" onmouseenter="enter('7232141846966659069');" onmouseout="out('7232141846966659069');" style=""> 461             tmpAppWidgets.addAll(sBgAppWidgets);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462         }                                                                                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 463         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 464                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 465                 public void run() {                                                                      </span>
<span class="709208250683113430" onmouseenter="enter('709208250683113430');" onmouseout="out('709208250683113430');" style=""> 466                    for (ItemInfo item : tmpWorkspaceItems) {                                             </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 467                        item.unbind();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 468                    }                                                                                     </span>
<span class="5969585374646931804" onmouseenter="enter('5969585374646931804');" onmouseout="out('5969585374646931804');" style=""> 469                    for (ItemInfo item : tmpAppWidgets) {                                                 </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 470                        item.unbind();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 471                    }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 472                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 473             };                                                                                           </span>
<span class="7651423128405913164" onmouseenter="enter('7651423128405913164');" onmouseout="out('7651423128405913164');" style=""> 474         runOnMainThread(r);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475     }                                                                                                    </span>
<span  style=""> 476                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 477     /**                                                                                                  </span>
<span class="1848609696039738732" onmouseenter="enter('1848609696039738732');" onmouseout="out('1848609696039738732');" style=""> 478      * Adds an item to the DB if it was not created previously, or move it to a new                      </span>
<span class="-5676820686470662639" onmouseenter="enter('-5676820686470662639');" onmouseout="out('-5676820686470662639');" style=""> 479      * &lt;container, screen, cellX, cellY&gt;                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 480      */                                                                                                  </span>
<span class="-51543303805672089" onmouseenter="enter('-51543303805672089');" onmouseout="out('-51543303805672089');" style=""> 481     static void addOrMoveItemInDatabase(Context context, ItemInfo item, long container,                  </span>
<span class="-5245876562794627197" onmouseenter="enter('-5245876562794627197');" onmouseout="out('-5245876562794627197');" style=""> 482             long screenId, int cellX, int cellY) {                                                       </span>
<span class="32392699487480265" onmouseenter="enter('32392699487480265');" onmouseout="out('32392699487480265');" style=""> 483         if (item.container == ItemInfo.NO_ID) {                                                          </span>
<span class="4419434731301535819" onmouseenter="enter('4419434731301535819');" onmouseout="out('4419434731301535819');" style=""> 484             // From all apps                                                                             </span>
<span class="-8263439540868073092" onmouseenter="enter('-8263439540868073092');" onmouseout="out('-8263439540868073092');" style=""> 485             addItemToDatabase(context, item, container, screenId, cellX, cellY, false);                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 486         } else {                                                                                         </span>
<span class="-7142861896488381117" onmouseenter="enter('-7142861896488381117');" onmouseout="out('-7142861896488381117');" style=""> 487             // From somewhere else                                                                       </span>
<span class="8117171250701950869" onmouseenter="enter('8117171250701950869');" onmouseout="out('8117171250701950869');" style=""> 488             moveItemInDatabase(context, item, container, screenId, cellX, cellY);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 490     }                                                                                                    </span>
<span  style=""> 491                                                                                                          </span>
<span class="4702100753708951937" onmouseenter="enter('4702100753708951937');" onmouseout="out('4702100753708951937');" style=""> 492     static void checkItemInfoLocked(                                                                     </span>
<span class="5364875648309494693" onmouseenter="enter('5364875648309494693');" onmouseout="out('5364875648309494693');" style=""> 493             final long itemId, final ItemInfo item, StackTraceElement[] stackTrace) {                    </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 494         ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                  </span>
<span class="2193901808277988725" onmouseenter="enter('2193901808277988725');" onmouseout="out('2193901808277988725');" style=""> 495         if (modelItem != null &amp;&amp; item != modelItem) {                                                    </span>
<span class="-6911492637937320821" onmouseenter="enter('-6911492637937320821');" onmouseout="out('-6911492637937320821');" style=""> 496             // check all the data is consistent                                                          </span>
<span class="3167281191986023088" onmouseenter="enter('3167281191986023088');" onmouseout="out('3167281191986023088');" style=""> 497             if (modelItem instanceof ShortcutInfo &amp;&amp; item instanceof ShortcutInfo) {                     </span>
<span class="-1653864946297504770" onmouseenter="enter('-1653864946297504770');" onmouseout="out('-1653864946297504770');" style=""> 498                 ShortcutInfo modelShortcut = (ShortcutInfo) modelItem;                                   </span>
<span class="-8536587564734321572" onmouseenter="enter('-8536587564734321572');" onmouseout="out('-8536587564734321572');" style=""> 499                 ShortcutInfo shortcut = (ShortcutInfo) item;                                             </span>
<span class="-7217994585765985559" onmouseenter="enter('-7217994585765985559');" onmouseout="out('-7217994585765985559');" style=""> 500                 if (modelShortcut.title.toString().equals(shortcut.title.toString()) &amp;&amp;                  </span>
<span class="7021740932722535577" onmouseenter="enter('7021740932722535577');" onmouseout="out('7021740932722535577');" style=""> 501                         modelShortcut.intent.filterEquals(shortcut.intent) &amp;&amp;                            </span>
<span class="4925161259592804600" onmouseenter="enter('4925161259592804600');" onmouseout="out('4925161259592804600');" style=""> 502                         modelShortcut.id == shortcut.id &amp;&amp;                                               </span>
<span class="-1606801806764943644" onmouseenter="enter('-1606801806764943644');" onmouseout="out('-1606801806764943644');" style=""> 503                         modelShortcut.itemType == shortcut.itemType &amp;&amp;                                   </span>
<span class="-380653198024077357" onmouseenter="enter('-380653198024077357');" onmouseout="out('-380653198024077357');" style=""> 504                         modelShortcut.container == shortcut.container &amp;&amp;                                 </span>
<span class="2095015237441904975" onmouseenter="enter('2095015237441904975');" onmouseout="out('2095015237441904975');" style=""> 505                         modelShortcut.screenId == shortcut.screenId &amp;&amp;                                   </span>
<span class="8356312788511485655" onmouseenter="enter('8356312788511485655');" onmouseout="out('8356312788511485655');" style=""> 506                         modelShortcut.cellX == shortcut.cellX &amp;&amp;                                         </span>
<span class="-8074804825298555262" onmouseenter="enter('-8074804825298555262');" onmouseout="out('-8074804825298555262');" style=""> 507                         modelShortcut.cellY == shortcut.cellY &amp;&amp;                                         </span>
<span class="-7194734667210277438" onmouseenter="enter('-7194734667210277438');" onmouseout="out('-7194734667210277438');" style=""> 508                         modelShortcut.spanX == shortcut.spanX &amp;&amp;                                         </span>
<span class="-7990526823057792041" onmouseenter="enter('-7990526823057792041');" onmouseout="out('-7990526823057792041');" style=""> 509                         modelShortcut.spanY == shortcut.spanY &amp;&amp;                                         </span>
<span class="1791877648440959041" onmouseenter="enter('1791877648440959041');" onmouseout="out('1791877648440959041');" style=""> 510                         ((modelShortcut.dropPos == null &amp;&amp; shortcut.dropPos == null) ||                  </span>
<span class="-2385997644828375020" onmouseenter="enter('-2385997644828375020');" onmouseout="out('-2385997644828375020');" style=""> 511                         (modelShortcut.dropPos != null &amp;&amp;                                                </span>
<span class="8673154118418480877" onmouseenter="enter('8673154118418480877');" onmouseout="out('8673154118418480877');" style=""> 512                                 shortcut.dropPos != null &amp;&amp;                                              </span>
<span class="1110472284758384589" onmouseenter="enter('1110472284758384589');" onmouseout="out('1110472284758384589');" style=""> 513                                 modelShortcut.dropPos[0] == shortcut.dropPos[0] &amp;&amp;                       </span>
<span class="8614743944867507225" onmouseenter="enter('8614743944867507225');" onmouseout="out('8614743944867507225');" style=""> 514                         modelShortcut.dropPos[1] == shortcut.dropPos[1]))) {                             </span>
<span class="-1826978062251207152" onmouseenter="enter('-1826978062251207152');" onmouseout="out('-1826978062251207152');" style=""> 515                     // For all intents and purposes, this is the same object                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 516                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 517                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 518             }                                                                                            </span>
<span  style=""> 519                                                                                                          </span>
<span class="-2302662152798801960" onmouseenter="enter('-2302662152798801960');" onmouseout="out('-2302662152798801960');" style=""> 520             // the modelItem needs to match up perfectly with item if our model is                       </span>
<span class="2528116919227347475" onmouseenter="enter('2528116919227347475');" onmouseout="out('2528116919227347475');" style=""> 521             // to be consistent with the database-- for now, just require                                </span>
<span class="-7120210409264493846" onmouseenter="enter('-7120210409264493846');" onmouseout="out('-7120210409264493846');" style=""> 522             // modelItem == item or the equality check above                                             </span>
<span class="-3667577266304831846" onmouseenter="enter('-3667577266304831846');" onmouseout="out('-3667577266304831846');" style=""> 523             String msg = &quot;item: &quot; + ((item != null) ? item.toString() : &quot;null&quot;) +                        </span>
<span class="-2910805653187511799" onmouseenter="enter('-2910805653187511799');" onmouseout="out('-2910805653187511799');" style=""> 524                     &quot;modelItem: &quot; +                                                                      </span>
<span class="-7298566834322238485" onmouseenter="enter('-7298566834322238485');" onmouseout="out('-7298566834322238485');" style=""> 525                     ((modelItem != null) ? modelItem.toString() : &quot;null&quot;) +                              </span>
<span class="-1970027720063810255" onmouseenter="enter('-1970027720063810255');" onmouseout="out('-1970027720063810255');" style=""> 526                     &quot;Error: ItemInfo passed to checkItemInfo doesn&#x27;t match original&quot;;                    </span>
<span class="889449931745068267" onmouseenter="enter('889449931745068267');" onmouseout="out('889449931745068267');" style=""> 527             RuntimeException e = new RuntimeException(msg);                                              </span>
<span class="746494671138810715" onmouseenter="enter('746494671138810715');" onmouseout="out('746494671138810715');" style=""> 528             if (stackTrace != null) {                                                                    </span>
<span class="6991917147302354492" onmouseenter="enter('6991917147302354492');" onmouseout="out('6991917147302354492');" style=""> 529                 e.setStackTrace(stackTrace);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530             }                                                                                            </span>
<span class="-2532054300390783036" onmouseenter="enter('-2532054300390783036');" onmouseout="out('-2532054300390783036');" style=""> 531             throw e;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 533     }                                                                                                    </span>
<span  style=""> 534                                                                                                          </span>
<span class="8253262720993766341" onmouseenter="enter('8253262720993766341');" onmouseout="out('8253262720993766341');" style=""> 535     static void checkItemInfo(final ItemInfo item) {                                                     </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 536         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 537         final long itemId = item.id;                                                                     </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 538         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 539             public void run() {                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 540                 synchronized (sBgLock) {                                                                 </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 541                     checkItemInfoLocked(itemId, item, stackTrace);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 542                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 543             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 544         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 545         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 546     }                                                                                                    </span>
<span  style=""> 547                                                                                                          </span>
<span class="-7795546628976526290" onmouseenter="enter('-7795546628976526290');" onmouseout="out('-7795546628976526290');" style=""> 548     static void updateItemInDatabaseHelper(Context context, final ContentValues values,                  </span>
<span class="-8227938209854841132" onmouseenter="enter('-8227938209854841132');" onmouseout="out('-8227938209854841132');" style=""> 549             final ItemInfo item, final String callingFunction) {                                         </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 550         final long itemId = item.id;                                                                     </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 551         final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);                         </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 552         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style=""> 553                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 554         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 555         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 556             public void run() {                                                                          </span>
<span class="6508684228899883734" onmouseenter="enter('6508684228899883734');" onmouseout="out('6508684228899883734');" style=""> 557                 cr.update(uri, values, null, null);                                                      </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 558                 updateItemArrays(item, itemId, stackTrace);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 559             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 560         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 561         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562     }                                                                                                    </span>
<span  style=""> 563                                                                                                          </span>
<span class="-5268011833856431518" onmouseenter="enter('-5268011833856431518');" onmouseout="out('-5268011833856431518');" style=""> 564     static void updateItemsInDatabaseHelper(Context context, final ArrayList&lt;ContentValues&gt; valuesList,  </span>
<span class="-6813896065968537303" onmouseenter="enter('-6813896065968537303');" onmouseout="out('-6813896065968537303');" style=""> 565             final ArrayList&lt;ItemInfo&gt; items, final String callingFunction) {                             </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 566         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style=""> 567                                                                                                          </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 568         final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 569         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 570             public void run() {                                                                          </span>
<span class="870344729843570934" onmouseenter="enter('870344729843570934');" onmouseout="out('870344729843570934');" style=""> 571                 ArrayList&lt;ContentProviderOperation&gt; ops =                                                </span>
<span class="9022468941674050374" onmouseenter="enter('9022468941674050374');" onmouseout="out('9022468941674050374');" style=""> 572                         new ArrayList&lt;ContentProviderOperation&gt;();                                       </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 573                 int count = items.size();                                                                </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 574                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 575                     ItemInfo item = items.get(i);                                                        </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 576                     final long itemId = item.id;                                                         </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 577                     final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);             </span>
<span class="-8860263448497272048" onmouseenter="enter('-8860263448497272048');" onmouseout="out('-8860263448497272048');" style=""> 578                     ContentValues values = valuesList.get(i);                                            </span>
<span  style=""> 579                                                                                                          </span>
<span class="2997765192602662390" onmouseenter="enter('2997765192602662390');" onmouseout="out('2997765192602662390');" style=""> 580                     ops.add(ContentProviderOperation.newUpdate(uri).withValues(values).build());         </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 581                     updateItemArrays(item, itemId, stackTrace);                                          </span>
<span  style=""> 582                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 583                 }                                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 584                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style=""> 585                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 586                 } catch (Exception e) {                                                                  </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 587                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 588                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 589             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 590         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 591         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 592     }                                                                                                    </span>
<span  style=""> 593                                                                                                          </span>
<span class="2082626234385770383" onmouseenter="enter('2082626234385770383');" onmouseout="out('2082626234385770383');" style=""> 594     static void updateItemArrays(ItemInfo item, long itemId, StackTraceElement[] stackTrace) {           </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 595         // Lock on mBgLock *after* the db operation                                                      </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 596         synchronized (sBgLock) {                                                                         </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 597             checkItemInfoLocked(itemId, item, stackTrace);                                               </span>
<span  style=""> 598                                                                                                          </span>
<span class="5861445851049755510" onmouseenter="enter('5861445851049755510');" onmouseout="out('5861445851049755510');" style=""> 599             if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                        </span>
<span class="-7006113140306734361" onmouseenter="enter('-7006113140306734361');" onmouseout="out('-7006113140306734361');" style=""> 600                     item.container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                    </span>
<span class="-6294566488312473300" onmouseenter="enter('-6294566488312473300');" onmouseout="out('-6294566488312473300');" style=""> 601                 // Item is in a folder, make sure this folder exists                                     </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 602                 if (!sBgFolders.containsKey(item.container)) {                                           </span>
<span class="9065703941205621353" onmouseenter="enter('9065703941205621353');" onmouseout="out('9065703941205621353');" style=""> 603                     // An items container is being set to a that of an item which is not in              </span>
<span class="-3172747387014066058" onmouseenter="enter('-3172747387014066058');" onmouseout="out('-3172747387014066058');" style=""> 604                     // the list of Folders.                                                              </span>
<span class="151828163632620756" onmouseenter="enter('151828163632620756');" onmouseout="out('151828163632620756');" style=""> 605                     String msg = &quot;item: &quot; + item + &quot; container being set to: &quot; +                         </span>
<span class="9080161357490611974" onmouseenter="enter('9080161357490611974');" onmouseout="out('9080161357490611974');" style=""> 606                             item.container + &quot;, not in the list of folders&quot;;                             </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 607                     Log.e(TAG, msg);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 608                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 609             }                                                                                            </span>
<span  style=""> 610                                                                                                          </span>
<span class="8378072337545652807" onmouseenter="enter('8378072337545652807');" onmouseout="out('8378072337545652807');" style=""> 611             // Items are added/removed from the corresponding FolderInfo elsewhere, such                 </span>
<span class="7844728369218635164" onmouseenter="enter('7844728369218635164');" onmouseout="out('7844728369218635164');" style=""> 612             // as in Workspace.onDrop. Here, we just add/remove them from the list of items              </span>
<span class="4553148780571708557" onmouseenter="enter('4553148780571708557');" onmouseout="out('4553148780571708557');" style=""> 613             // that are on the desktop, as appropriate                                                   </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 614             ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                              </span>
<span class="-8392915416586226921" onmouseenter="enter('-8392915416586226921');" onmouseout="out('-8392915416586226921');" style=""> 615             if (modelItem != null &amp;&amp;                                                                     </span>
<span class="3168075572498915363" onmouseenter="enter('3168075572498915363');" onmouseout="out('3168075572498915363');" style=""> 616                     (modelItem.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||              </span>
<span class="-2354507674725904195" onmouseenter="enter('-2354507674725904195');" onmouseout="out('-2354507674725904195');" style=""> 617                      modelItem.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {             </span>
<span class="-8474980351342559163" onmouseenter="enter('-8474980351342559163');" onmouseout="out('-8474980351342559163');" style=""> 618                 switch (modelItem.itemType) {                                                            </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style=""> 619                     case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                               </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style=""> 620                     case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                  </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 621                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                    </span>
<span class="-2945309969071223861" onmouseenter="enter('-2945309969071223861');" onmouseout="out('-2945309969071223861');" style=""> 622                         if (!sBgWorkspaceItems.contains(modelItem)) {                                    </span>
<span class="-5660475538824179031" onmouseenter="enter('-5660475538824179031');" onmouseout="out('-5660475538824179031');" style=""> 623                             sBgWorkspaceItems.add(modelItem);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 624                         }                                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 625                         break;                                                                           </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 626                     default:                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 627                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 628                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 629             } else {                                                                                     </span>
<span class="-7939766627444392355" onmouseenter="enter('-7939766627444392355');" onmouseout="out('-7939766627444392355');" style=""> 630                 sBgWorkspaceItems.remove(modelItem);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 631             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 632         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 633     }                                                                                                    </span>
<span  style=""> 634                                                                                                          </span>
<span class="-4020360329970845372" onmouseenter="enter('-4020360329970845372');" onmouseout="out('-4020360329970845372');" style=""> 635     public void flushWorkerThread() {                                                                    </span>
<span class="2458440832416538563" onmouseenter="enter('2458440832416538563');" onmouseout="out('2458440832416538563');" style=""> 636         mFlushingWorkerThread = true;                                                                    </span>
<span class="2941590529192344100" onmouseenter="enter('2941590529192344100');" onmouseout="out('2941590529192344100');" style=""> 637         Runnable waiter = new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 638                 public void run() {                                                                      </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 639                     synchronized (this) {                                                                </span>
<span class="-1428047894310886643" onmouseenter="enter('-1428047894310886643');" onmouseout="out('-1428047894310886643');" style=""> 640                         notifyAll();                                                                     </span>
<span class="3926508156885202999" onmouseenter="enter('3926508156885202999');" onmouseout="out('3926508156885202999');" style=""> 641                         mFlushingWorkerThread = false;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 642                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 643                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 644             };                                                                                           </span>
<span  style=""> 645                                                                                                          </span>
<span class="-7483564469787643608" onmouseenter="enter('-7483564469787643608');" onmouseout="out('-7483564469787643608');" style=""> 646         synchronized(waiter) {                                                                           </span>
<span class="-8072658497280753067" onmouseenter="enter('-8072658497280753067');" onmouseout="out('-8072658497280753067');" style=""> 647             runOnWorkerThread(waiter);                                                                   </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style=""> 648             if (mLoaderTask != null) {                                                                   </span>
<span class="-756902833484627430" onmouseenter="enter('-756902833484627430');" onmouseout="out('-756902833484627430');" style=""> 649                 synchronized(mLoaderTask) {                                                              </span>
<span class="58891182273081261" onmouseenter="enter('58891182273081261');" onmouseout="out('58891182273081261');" style=""> 650                     mLoaderTask.notify();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 651                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652             }                                                                                            </span>
<span class="4859668596787406566" onmouseenter="enter('4859668596787406566');" onmouseout="out('4859668596787406566');" style=""> 653             boolean success = false;                                                                     </span>
<span class="7536073198725464588" onmouseenter="enter('7536073198725464588');" onmouseout="out('7536073198725464588');" style=""> 654             while (!success) {                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 655                 try {                                                                                    </span>
<span class="8661527805225995774" onmouseenter="enter('8661527805225995774');" onmouseout="out('8661527805225995774');" style=""> 656                     waiter.wait();                                                                       </span>
<span class="-5965625035307022309" onmouseenter="enter('-5965625035307022309');" onmouseout="out('-5965625035307022309');" style=""> 657                     success = true;                                                                      </span>
<span class="-7528533024404460182" onmouseenter="enter('-7528533024404460182');" onmouseout="out('-7528533024404460182');" style=""> 658                 } catch (InterruptedException e) {                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 659                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662     }                                                                                                    </span>
<span  style=""> 663                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 664     /**                                                                                                  </span>
<span class="6993284491606696239" onmouseenter="enter('6993284491606696239');" onmouseout="out('6993284491606696239');" style=""> 665      * Move an item in the DB to a new &lt;container, screen, cellX, cellY&gt;                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 666      */                                                                                                  </span>
<span class="4065343735615789149" onmouseenter="enter('4065343735615789149');" onmouseout="out('4065343735615789149');" style=""> 667     static void moveItemInDatabase(Context context, final ItemInfo item, final long container,           </span>
<span class="-6409391853534757752" onmouseenter="enter('-6409391853534757752');" onmouseout="out('-6409391853534757752');" style=""> 668             final long screenId, final int cellX, final int cellY) {                                     </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 669         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 670         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 671         item.cellY = cellY;                                                                              </span>
<span  style=""> 672                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 673         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 674         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 675         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 676                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 677             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 678         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 679             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680         }                                                                                                </span>
<span  style=""> 681                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 682         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 683         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 684         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 685         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 686         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span  style=""> 687                                                                                                          </span>
<span class="-198415815572970699" onmouseenter="enter('-198415815572970699');" onmouseout="out('-198415815572970699');" style=""> 688         updateItemInDatabaseHelper(context, values, item, &quot;moveItemInDatabase&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689     }                                                                                                    </span>
<span  style=""> 690                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 691     /**                                                                                                  </span>
<span class="-2318253408843035081" onmouseenter="enter('-2318253408843035081');" onmouseout="out('-2318253408843035081');" style=""> 692      * Move items in the DB to a new &lt;container, screen, cellX, cellY&gt;. We assume that the               </span>
<span class="9095568381627098065" onmouseenter="enter('9095568381627098065');" onmouseout="out('9095568381627098065');" style=""> 693      * cellX, cellY have already been updated on the ItemInfos.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 694      */                                                                                                  </span>
<span class="2993462226149949147" onmouseenter="enter('2993462226149949147');" onmouseout="out('2993462226149949147');" style=""> 695     static void moveItemsInDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items,                    </span>
<span class="4351605778470855925" onmouseenter="enter('4351605778470855925');" onmouseout="out('4351605778470855925');" style=""> 696             final long container, final int screen) {                                                    </span>
<span  style=""> 697                                                                                                          </span>
<span class="3335073963685886452" onmouseenter="enter('3335073963685886452');" onmouseout="out('3335073963685886452');" style=""> 698         ArrayList&lt;ContentValues&gt; contentValues = new ArrayList&lt;ContentValues&gt;();                         </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 699         int count = items.size();                                                                        </span>
<span  style=""> 700                                                                                                          </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 701         for (int i = 0; i &lt; count; i++) {                                                                </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 702             ItemInfo item = items.get(i);                                                                </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 703             item.container = container;                                                                  </span>
<span  style=""> 704                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 705             // We store hotseat items in canonical form which is this orientation invariant position     </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 706             // in the hotseat                                                                            </span>
<span class="6331311558654873539" onmouseenter="enter('6331311558654873539');" onmouseout="out('6331311558654873539');" style=""> 707             if (context instanceof Launcher &amp;&amp; screen &lt; 0 &amp;&amp;                                             </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 708                     container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                         </span>
<span class="-3476894176903330001" onmouseenter="enter('-3476894176903330001');" onmouseout="out('-3476894176903330001');" style=""> 709                 item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(item.cellX,          </span>
<span class="8891673712343428946" onmouseenter="enter('8891673712343428946');" onmouseout="out('8891673712343428946');" style=""> 710                         item.cellY);                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 711             } else {                                                                                     </span>
<span class="-4307617232085975705" onmouseenter="enter('-4307617232085975705');" onmouseout="out('-4307617232085975705');" style=""> 712                 item.screenId = screen;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 713             }                                                                                            </span>
<span  style=""> 714                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 715             final ContentValues values = new ContentValues();                                            </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 716             values.put(LauncherSettings.Favorites.CONTAINER, item.container);                            </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 717             values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                    </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 718             values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                    </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 719             values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                </span>
<span  style=""> 720                                                                                                          </span>
<span class="2833686190506555422" onmouseenter="enter('2833686190506555422');" onmouseout="out('2833686190506555422');" style=""> 721             contentValues.add(values);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 722         }                                                                                                </span>
<span class="-3017110074752693492" onmouseenter="enter('-3017110074752693492');" onmouseout="out('-3017110074752693492');" style=""> 723         updateItemsInDatabaseHelper(context, contentValues, items, &quot;moveItemInDatabase&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724     }                                                                                                    </span>
<span  style=""> 725                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 726     /**                                                                                                  </span>
<span class="5893714151144352360" onmouseenter="enter('5893714151144352360');" onmouseout="out('5893714151144352360');" style=""> 727      * Move and/or resize item in the DB to a new &lt;container, screen, cellX, cellY, spanX, spanY&gt;        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 728      */                                                                                                  </span>
<span class="2794810618835410616" onmouseenter="enter('2794810618835410616');" onmouseout="out('2794810618835410616');" style=""> 729     static void modifyItemInDatabase(Context context, final ItemInfo item, final long container,         </span>
<span class="5104971199972279845" onmouseenter="enter('5104971199972279845');" onmouseout="out('5104971199972279845');" style=""> 730             final long screenId, final int cellX, final int cellY, final int spanX, final int spanY) {   </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 731         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 732         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 733         item.cellY = cellY;                                                                              </span>
<span class="-7444681703441257019" onmouseenter="enter('-7444681703441257019');" onmouseout="out('-7444681703441257019');" style=""> 734         item.spanX = spanX;                                                                              </span>
<span class="1797194204222415457" onmouseenter="enter('1797194204222415457');" onmouseout="out('1797194204222415457');" style=""> 735         item.spanY = spanY;                                                                              </span>
<span  style=""> 736                                                                                                          </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 737         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 738         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 739         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 740                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 741             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 742         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 743             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744         }                                                                                                </span>
<span  style=""> 745                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 746         final ContentValues values = new ContentValues();                                                </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 747         values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 748         values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                        </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 749         values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                        </span>
<span class="-1263713769577317048" onmouseenter="enter('-1263713769577317048');" onmouseout="out('-1263713769577317048');" style=""> 750         values.put(LauncherSettings.Favorites.SPANX, item.spanX);                                        </span>
<span class="847673422027095164" onmouseenter="enter('847673422027095164');" onmouseout="out('847673422027095164');" style=""> 751         values.put(LauncherSettings.Favorites.SPANY, item.spanY);                                        </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 752         values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                    </span>
<span  style=""> 753                                                                                                          </span>
<span class="5688211233374147409" onmouseenter="enter('5688211233374147409');" onmouseout="out('5688211233374147409');" style=""> 754         updateItemInDatabaseHelper(context, values, item, &quot;modifyItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 755     }                                                                                                    </span>
<span  style=""> 756                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 757     /**                                                                                                  </span>
<span class="3263486289839218660" onmouseenter="enter('3263486289839218660');" onmouseout="out('3263486289839218660');" style=""> 758      * Update an item to the database in a specified container.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 759      */                                                                                                  </span>
<span class="459681340980680258" onmouseenter="enter('459681340980680258');" onmouseout="out('459681340980680258');" style=""> 760     static void updateItemInDatabase(Context context, final ItemInfo item) {                             </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 761         final ContentValues values = new ContentValues();                                                </span>
<span class="5176730964422589638" onmouseenter="enter('5176730964422589638');" onmouseout="out('5176730964422589638');" style=""> 762         item.onAddToDatabase(values);                                                                    </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 763         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span class="-2640379359931023102" onmouseenter="enter('-2640379359931023102');" onmouseout="out('-2640379359931023102');" style=""> 764         updateItemInDatabaseHelper(context, values, item, &quot;updateItemInDatabase&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 765     }                                                                                                    </span>
<span  style=""> 766                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 767     /**                                                                                                  </span>
<span class="-4717227181780328790" onmouseenter="enter('-4717227181780328790');" onmouseout="out('-4717227181780328790');" style=""> 768      * Returns true if the shortcuts already exists in the database.                                     </span>
<span class="-3331700288971341517" onmouseenter="enter('-3331700288971341517');" onmouseout="out('-3331700288971341517');" style=""> 769      * we identify a shortcut by its title and intent.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 770      */                                                                                                  </span>
<span class="-6388905982866518653" onmouseenter="enter('-6388905982866518653');" onmouseout="out('-6388905982866518653');" style=""> 771     static boolean shortcutExists(Context context, String title, Intent intent) {                        </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 772         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="2591581294492270218" onmouseenter="enter('2591581294492270218');" onmouseout="out('2591581294492270218');" style=""> 773         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI,                                      </span>
<span class="-3970764614423238561" onmouseenter="enter('-3970764614423238561');" onmouseout="out('-3970764614423238561');" style=""> 774             new String[] { &quot;title&quot;, &quot;intent&quot; }, &quot;title=? and intent=?&quot;,                                  </span>
<span class="-8386684562645849198" onmouseenter="enter('-8386684562645849198');" onmouseout="out('-8386684562645849198');" style=""> 775             new String[] { title, intent.toUri(0) }, null);                                              </span>
<span class="8422097272984539190" onmouseenter="enter('8422097272984539190');" onmouseout="out('8422097272984539190');" style=""> 776         boolean result = false;                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 777         try {                                                                                            </span>
<span class="-4458839479528090820" onmouseenter="enter('-4458839479528090820');" onmouseout="out('-4458839479528090820');" style=""> 778             result = c.moveToFirst();                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 779         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 780             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 781         }                                                                                                </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 782         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 783     }                                                                                                    </span>
<span  style=""> 784                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 785     /**                                                                                                  </span>
<span class="9160518604603288134" onmouseenter="enter('9160518604603288134');" onmouseout="out('9160518604603288134');" style=""> 786      * Returns an ItemInfo array containing all the items in the LauncherModel.                          </span>
<span class="-7541433293033039987" onmouseenter="enter('-7541433293033039987');" onmouseout="out('-7541433293033039987');" style=""> 787      * The ItemInfo.id is not set through this function.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 788      */                                                                                                  </span>
<span class="2306578838706816090" onmouseenter="enter('2306578838706816090');" onmouseout="out('2306578838706816090');" style=""> 789     static ArrayList&lt;ItemInfo&gt; getItemsInLocalCoordinates(Context context) {                             </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style=""> 790         ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                           </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 791         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="7862348045873845742" onmouseenter="enter('7862348045873845742');" onmouseout="out('7862348045873845742');" style=""> 792         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[] {                       </span>
<span class="-9030044796723696333" onmouseenter="enter('-9030044796723696333');" onmouseout="out('-9030044796723696333');" style=""> 793                 LauncherSettings.Favorites.ITEM_TYPE, LauncherSettings.Favorites.CONTAINER,              </span>
<span class="-6654705994324280685" onmouseenter="enter('-6654705994324280685');" onmouseout="out('-6654705994324280685');" style=""><abbr title=" 794                 LauncherSettings.Favorites.SCREEN, LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CELLY,"> 794                 LauncherSettings.Favorites.SCREEN, LauncherSettings.Favorites.CELLX, LauncherSettings.Fav</abbr></span>
<span class="-8466015049460674478" onmouseenter="enter('-8466015049460674478');" onmouseout="out('-8466015049460674478');" style=""> 795                 LauncherSettings.Favorites.SPANX, LauncherSettings.Favorites.SPANY }, null, null, null); </span>
<span  style=""> 796                                                                                                          </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 797         final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);         </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 798         final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);        </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 799         final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);              </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 800         final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 801         final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                </span>
<span class="-802963670489258937" onmouseenter="enter('-802963670489258937');" onmouseout="out('-802963670489258937');" style=""> 802         final int spanXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANX);                </span>
<span class="6925125615824777875" onmouseenter="enter('6925125615824777875');" onmouseout="out('6925125615824777875');" style=""> 803         final int spanYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANY);                </span>
<span  style=""> 804                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 805         try {                                                                                            </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 806             while (c.moveToNext()) {                                                                     </span>
<span class="-4116264954015845780" onmouseenter="enter('-4116264954015845780');" onmouseout="out('-4116264954015845780');" style=""> 807                 ItemInfo item = new ItemInfo();                                                          </span>
<span class="3361172632220058931" onmouseenter="enter('3361172632220058931');" onmouseout="out('3361172632220058931');" style=""> 808                 item.cellX = c.getInt(cellXIndex);                                                       </span>
<span class="-3320299110004327663" onmouseenter="enter('-3320299110004327663');" onmouseout="out('-3320299110004327663');" style=""> 809                 item.cellY = c.getInt(cellYIndex);                                                       </span>
<span class="-3998513073647472943" onmouseenter="enter('-3998513073647472943');" onmouseout="out('-3998513073647472943');" style=""> 810                 item.spanX = Math.max(1, c.getInt(spanXIndex));                                          </span>
<span class="584206030510259358" onmouseenter="enter('584206030510259358');" onmouseout="out('584206030510259358');" style=""> 811                 item.spanY = Math.max(1, c.getInt(spanYIndex));                                          </span>
<span class="7755197868117966754" onmouseenter="enter('7755197868117966754');" onmouseout="out('7755197868117966754');" style=""> 812                 item.container = c.getInt(containerIndex);                                               </span>
<span class="2520990540941204818" onmouseenter="enter('2520990540941204818');" onmouseout="out('2520990540941204818');" style=""> 813                 item.itemType = c.getInt(itemTypeIndex);                                                 </span>
<span class="-2693827439071435274" onmouseenter="enter('-2693827439071435274');" onmouseout="out('-2693827439071435274');" style=""> 814                 item.screenId = c.getInt(screenIndex);                                                   </span>
<span  style=""> 815                                                                                                          </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style=""> 816                 items.add(item);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 817             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 818         } catch (Exception e) {                                                                          </span>
<span class="4333495016815960454" onmouseenter="enter('4333495016815960454');" onmouseout="out('4333495016815960454');" style=""> 819             items.clear();                                                                               </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 820         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 821             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 822         }                                                                                                </span>
<span  style=""> 823                                                                                                          </span>
<span class="4279419839789234429" onmouseenter="enter('4279419839789234429');" onmouseout="out('4279419839789234429');" style=""> 824         return items;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825     }                                                                                                    </span>
<span  style=""> 826                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 827     /**                                                                                                  </span>
<span class="-8400747742808132543" onmouseenter="enter('-8400747742808132543');" onmouseout="out('-8400747742808132543');" style=""> 828      * Find a folder in the db, creating the FolderInfo if necessary, and adding it to folderList.       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 829      */                                                                                                  </span>
<span class="5907754851540050864" onmouseenter="enter('5907754851540050864');" onmouseout="out('5907754851540050864');" style=""> 830     FolderInfo getFolderById(Context context, HashMap&lt;Long,FolderInfo&gt; folderList, long id) {            </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 831         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-4509017961772931337" onmouseenter="enter('-4509017961772931337');" onmouseout="out('-4509017961772931337');" style=""> 832         Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, null,                                </span>
<span class="-4259949945589236527" onmouseenter="enter('-4259949945589236527');" onmouseout="out('-4259949945589236527');" style=""> 833                 &quot;_id=? and (itemType=? or itemType=?)&quot;,                                                  </span>
<span class="6839251627547830421" onmouseenter="enter('6839251627547830421');" onmouseout="out('6839251627547830421');" style=""> 834                 new String[] { String.valueOf(id),                                                       </span>
<span class="-7910525153585982304" onmouseenter="enter('-7910525153585982304');" onmouseout="out('-7910525153585982304');" style=""> 835                         String.valueOf(LauncherSettings.Favorites.ITEM_TYPE_FOLDER)}, null);             </span>
<span  style=""> 836                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 837         try {                                                                                            </span>
<span class="-6302304746326789409" onmouseenter="enter('-6302304746326789409');" onmouseout="out('-6302304746326789409');" style=""> 838             if (c.moveToFirst()) {                                                                       </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 839                 final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE); </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style=""> 840                 final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);        </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 841                 final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);</span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 842                 final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);      </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 843                 final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);        </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 844                 final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);        </span>
<span  style=""> 845                                                                                                          </span>
<span class="7004752326616919357" onmouseenter="enter('7004752326616919357');" onmouseout="out('7004752326616919357');" style=""> 846                 FolderInfo folderInfo = null;                                                            </span>
<span class="2938602155061951308" onmouseenter="enter('2938602155061951308');" onmouseout="out('2938602155061951308');" style=""> 847                 switch (c.getInt(itemTypeIndex)) {                                                       </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 848                     case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                    </span>
<span class="8497686210844969517" onmouseenter="enter('8497686210844969517');" onmouseout="out('8497686210844969517');" style=""> 849                         folderInfo = findOrMakeFolder(folderList, id);                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 850                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851                 }                                                                                        </span>
<span  style=""> 852                                                                                                          </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style=""> 853                 folderInfo.title = c.getString(titleIndex);                                              </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style=""> 854                 folderInfo.id = id;                                                                      </span>
<span class="-3770649288661071555" onmouseenter="enter('-3770649288661071555');" onmouseout="out('-3770649288661071555');" style=""> 855                 folderInfo.container = c.getInt(containerIndex);                                         </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style=""> 856                 folderInfo.screenId = c.getInt(screenIndex);                                             </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style=""> 857                 folderInfo.cellX = c.getInt(cellXIndex);                                                 </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style=""> 858                 folderInfo.cellY = c.getInt(cellYIndex);                                                 </span>
<span  style=""> 859                                                                                                          </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style=""> 860                 return folderInfo;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 861             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 862         } finally {                                                                                      </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 863             c.close();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 864         }                                                                                                </span>
<span  style=""> 865                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 866         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 867     }                                                                                                    </span>
<span  style=""> 868                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 869     /**                                                                                                  </span>
<span class="-4485876183654335246" onmouseenter="enter('-4485876183654335246');" onmouseout="out('-4485876183654335246');" style=""> 870      * Add an item to the database in a specified container. Sets the container, screen, cellX and       </span>
<span class="5014383815638293688" onmouseenter="enter('5014383815638293688');" onmouseout="out('5014383815638293688');" style=""> 871      * cellY fields of the item. Also assigns an ID to the item.                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 872      */                                                                                                  </span>
<span class="7688823130205554121" onmouseenter="enter('7688823130205554121');" onmouseout="out('7688823130205554121');" style=""> 873     static void addItemToDatabase(Context context, final ItemInfo item, final long container,            </span>
<span class="-5047869274291255898" onmouseenter="enter('-5047869274291255898');" onmouseout="out('-5047869274291255898');" style=""> 874             final long screenId, final int cellX, final int cellY, final boolean notify) {               </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 875         item.container = container;                                                                      </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 876         item.cellX = cellX;                                                                              </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 877         item.cellY = cellY;                                                                              </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 878         // We store hotseat items in canonical form which is this orientation invariant position         </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 879         // in the hotseat                                                                                </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 880         if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                               </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 881                 container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 882             item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 883         } else {                                                                                         </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 884             item.screenId = screenId;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 885         }                                                                                                </span>
<span  style=""> 886                                                                                                          </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 887         final ContentValues values = new ContentValues();                                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 888         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="5176730964422589638" onmouseenter="enter('5176730964422589638');" onmouseout="out('5176730964422589638');" style=""> 889         item.onAddToDatabase(values);                                                                    </span>
<span  style=""> 890                                                                                                          </span>
<span class="-1899316649519192705" onmouseenter="enter('-1899316649519192705');" onmouseout="out('-1899316649519192705');" style=""> 891         item.id = LauncherAppState.getLauncherProvider().generateNewItemId();                            </span>
<span class="-154850703316330893" onmouseenter="enter('-154850703316330893');" onmouseout="out('-154850703316330893');" style=""> 892         values.put(LauncherSettings.Favorites._ID, item.id);                                             </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 893         item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                </span>
<span  style=""> 894                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 895         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 896             public void run() {                                                                          </span>
<span class="-9004016634042314269" onmouseenter="enter('-9004016634042314269');" onmouseout="out('-9004016634042314269');" style=""> 897                 cr.insert(notify ? LauncherSettings.Favorites.CONTENT_URI :                              </span>
<span class="-612779074530505821" onmouseenter="enter('-612779074530505821');" onmouseout="out('-612779074530505821');" style=""> 898                         LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, values);                 </span>
<span  style=""> 899                                                                                                          </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 900                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 901                 synchronized (sBgLock) {                                                                 </span>
<span class="7042391537046657417" onmouseenter="enter('7042391537046657417');" onmouseout="out('7042391537046657417');" style=""> 902                     checkItemInfoLocked(item.id, item, null);                                            </span>
<span class="-1016681302040734126" onmouseenter="enter('-1016681302040734126');" onmouseout="out('-1016681302040734126');" style=""> 903                     sBgItemsIdMap.put(item.id, item);                                                    </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style=""> 904                     switch (item.itemType) {                                                             </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 905                         case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                </span>
<span class="7914552456706159325" onmouseenter="enter('7914552456706159325');" onmouseout="out('7914552456706159325');" style=""> 906                             sBgFolders.put(item.id, (FolderInfo) item);                                  </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style=""> 907                             // Fall through                                                              </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style=""> 908                         case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                           </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style=""> 909                         case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                              </span>
<span class="-1329080713393586591" onmouseenter="enter('-1329080713393586591');" onmouseout="out('-1329080713393586591');" style=""> 910                             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||        </span>
<span class="-8703099407725800834" onmouseenter="enter('-8703099407725800834');" onmouseout="out('-8703099407725800834');" style=""> 911                                     item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {    </span>
<span class="-8146326631995897363" onmouseenter="enter('-8146326631995897363');" onmouseout="out('-8146326631995897363');" style=""> 912                                 sBgWorkspaceItems.add(item);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 913                             } else {                                                                     </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 914                                 if (!sBgFolders.containsKey(item.container)) {                           </span>
<span class="-54073947043614801" onmouseenter="enter('-54073947043614801');" onmouseout="out('-54073947043614801');" style=""> 915                                     // Adding an item to a folder that doesn&#x27;t exist.                    </span>
<span class="-8178862485732913035" onmouseenter="enter('-8178862485732913035');" onmouseout="out('-8178862485732913035');" style=""> 916                                     String msg = &quot;adding item: &quot; + item + &quot; to a folder that &quot; +         </span>
<span class="8069959129571777545" onmouseenter="enter('8069959129571777545');" onmouseout="out('8069959129571777545');" style=""> 917                                             &quot; doesn&#x27;t exist&quot;;                                            </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 918                                     Log.e(TAG, msg);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 919                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 920                             }                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 921                             break;                                                                       </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style=""> 922                         case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                             </span>
<span class="-7161913213134623334" onmouseenter="enter('-7161913213134623334');" onmouseout="out('-7161913213134623334');" style=""> 923                             sBgAppWidgets.add((LauncherAppWidgetInfo) item);                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 924                             break;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 925                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 926                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 927             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 928         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 929         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 930     }                                                                                                    </span>
<span  style=""> 931                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 932     /**                                                                                                  </span>
<span class="7476806510728309142" onmouseenter="enter('7476806510728309142');" onmouseout="out('7476806510728309142');" style=""> 933      * Creates a new unique child id, for a given cell span across all layouts.                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 934      */                                                                                                  </span>
<span class="6041396781761029986" onmouseenter="enter('6041396781761029986');" onmouseout="out('6041396781761029986');" style=""> 935     static int getCellLayoutChildId(                                                                     </span>
<span class="-7149445532835734900" onmouseenter="enter('-7149445532835734900');" onmouseout="out('-7149445532835734900');" style=""> 936             long container, long screen, int localCellX, int localCellY, int spanX, int spanY) {         </span>
<span class="513362613558309253" onmouseenter="enter('513362613558309253');" onmouseout="out('513362613558309253');" style=""> 937         return (((int) container &amp; 0xFF) &lt;&lt; 24)                                                          </span>
<span class="-7388843269158644047" onmouseenter="enter('-7388843269158644047');" onmouseout="out('-7388843269158644047');" style=""> 938                 | ((int) screen &amp; 0xFF) &lt;&lt; 16 | (localCellX &amp; 0xFF) &lt;&lt; 8 | (localCellY &amp; 0xFF);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 939     }                                                                                                    </span>
<span  style=""> 940                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 941     /**                                                                                                  </span>
<span class="-1037279788887787658" onmouseenter="enter('-1037279788887787658');" onmouseout="out('-1037279788887787658');" style=""> 942      * Removes the specified item from the database                                                      </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style=""> 943      * @param context                                                                                    </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style=""> 944      * @param item                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 945      */                                                                                                  </span>
<span class="6689175154077652032" onmouseenter="enter('6689175154077652032');" onmouseout="out('6689175154077652032');" style=""> 946     static void deleteItemFromDatabase(Context context, final ItemInfo item) {                           </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 947         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="-8662622705024005942" onmouseenter="enter('-8662622705024005942');" onmouseout="out('-8662622705024005942');" style=""> 948         final Uri uriToDelete = LauncherSettings.Favorites.getContentUri(item.id, false);                </span>
<span  style=""> 949                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 950         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 951             public void run() {                                                                          </span>
<span class="5853003155754312383" onmouseenter="enter('5853003155754312383');" onmouseout="out('5853003155754312383');" style=""> 952                 cr.delete(uriToDelete, null, null);                                                      </span>
<span  style=""> 953                                                                                                          </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 954                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 955                 synchronized (sBgLock) {                                                                 </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style=""> 956                     switch (item.itemType) {                                                             </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 957                         case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                </span>
<span class="-7362435803416400268" onmouseenter="enter('-7362435803416400268');" onmouseout="out('-7362435803416400268');" style=""> 958                             sBgFolders.remove(item.id);                                                  </span>
<span class="-7253547809349647013" onmouseenter="enter('-7253547809349647013');" onmouseout="out('-7253547809349647013');" style=""> 959                             for (ItemInfo info: sBgItemsIdMap.values()) {                                </span>
<span class="1662466266129331257" onmouseenter="enter('1662466266129331257');" onmouseout="out('1662466266129331257');" style=""> 960                                 if (info.container == item.id) {                                         </span>
<span class="-1893702506185878584" onmouseenter="enter('-1893702506185878584');" onmouseout="out('-1893702506185878584');" style=""> 961                                     // We are deleting a folder which still contains items that          </span>
<span class="-7314190253548819229" onmouseenter="enter('-7314190253548819229');" onmouseout="out('-7314190253548819229');" style=""> 962                                     // think they are contained by that folder.                          </span>
<span class="-2989844263372177086" onmouseenter="enter('-2989844263372177086');" onmouseout="out('-2989844263372177086');" style=""> 963                                     String msg = &quot;deleting a folder (&quot; + item + &quot;) which still &quot; +       </span>
<span class="-6063695738801794388" onmouseenter="enter('-6063695738801794388');" onmouseout="out('-6063695738801794388');" style=""> 964                                             &quot;contains items (&quot; + info + &quot;)&quot;;                             </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 965                                     Log.e(TAG, msg);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 966                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 967                             }                                                                            </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style=""> 968                             sBgWorkspaceItems.remove(item);                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 969                             break;                                                                       </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style=""> 970                         case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                           </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style=""> 971                         case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                              </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style=""> 972                             sBgWorkspaceItems.remove(item);                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 973                             break;                                                                       </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style=""> 974                         case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                             </span>
<span class="5035692159539723007" onmouseenter="enter('5035692159539723007');" onmouseout="out('5035692159539723007');" style=""> 975                             sBgAppWidgets.remove((LauncherAppWidgetInfo) item);                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 976                             break;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 977                     }                                                                                    </span>
<span class="414734963826797427" onmouseenter="enter('414734963826797427');" onmouseout="out('414734963826797427');" style=""> 978                     sBgItemsIdMap.remove(item.id);                                                       </span>
<span class="4282085416776692307" onmouseenter="enter('4282085416776692307');" onmouseout="out('4282085416776692307');" style=""> 979                     sBgDbIconCache.remove(item);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 980                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 981             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 982         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 983         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 984     }                                                                                                    </span>
<span  style=""> 985                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 986     /**                                                                                                  </span>
<span class="-7001721478473539684" onmouseenter="enter('-7001721478473539684');" onmouseout="out('-7001721478473539684');" style=""> 987      * Update the order of the workspace screens in the database. The array list contains                </span>
<span class="-8575814248656839337" onmouseenter="enter('-8575814248656839337');" onmouseout="out('-8575814248656839337');" style=""> 988      * a list of screen ids in the order that they should appear.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 989      */                                                                                                  </span>
<span class="8428215756529453230" onmouseenter="enter('8428215756529453230');" onmouseout="out('8428215756529453230');" style=""> 990     void updateWorkspaceScreenOrder(Context context, final ArrayList&lt;Long&gt; screens) {                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style=""> 991         // Log to disk                                                                                   </span>
<span class="2597844157040813179" onmouseenter="enter('2597844157040813179');" onmouseout="out('2597844157040813179');" style=""> 992         Launcher.addDumpLog(TAG, &quot;11683562 - updateWorkspaceScreenOrder()&quot;, true);                       </span>
<span class="-6712172470308057727" onmouseenter="enter('-6712172470308057727');" onmouseout="out('-6712172470308057727');" style=""> 993         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; + TextUtils.join(&quot;, &quot;, screens), true);        </span>
<span  style=""> 994                                                                                                          </span>
<span class="468782492563171594" onmouseenter="enter('468782492563171594');" onmouseout="out('468782492563171594');" style=""> 995         final ArrayList&lt;Long&gt; screensCopy = new ArrayList&lt;Long&gt;(screens);                                </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 996         final ContentResolver cr = context.getContentResolver();                                         </span>
<span class="543518355232884435" onmouseenter="enter('543518355232884435');" onmouseout="out('543518355232884435');" style=""> 997         final Uri uri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                                   </span>
<span  style=""> 998                                                                                                          </span>
<span class="4254834681163937802" onmouseenter="enter('4254834681163937802');" onmouseout="out('4254834681163937802');" style=""> 999         // Remove any negative screen ids -- these aren&#x27;t persisted                                      </span>
<span class="2152325044441302341" onmouseenter="enter('2152325044441302341');" onmouseout="out('2152325044441302341');" style="">1000         Iterator&lt;Long&gt; iter = screensCopy.iterator();                                                    </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">1001         while (iter.hasNext()) {                                                                         </span>
<span class="-927390677227055343" onmouseenter="enter('-927390677227055343');" onmouseout="out('-927390677227055343');" style="">1002             long id = iter.next();                                                                       </span>
<span class="-1178150068928662840" onmouseenter="enter('-1178150068928662840');" onmouseout="out('-1178150068928662840');" style="">1003             if (id &lt; 0) {                                                                                </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">1004                 iter.remove();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1005             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1006         }                                                                                                </span>
<span  style="">1007                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1008         Runnable r = new Runnable() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1009             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1010             public void run() {                                                                          </span>
<span class="-3030717489353459898" onmouseenter="enter('-3030717489353459898');" onmouseout="out('-3030717489353459898');" style="">1011                 ArrayList&lt;ContentProviderOperation&gt; ops = new ArrayList&lt;ContentProviderOperation&gt;();     </span>
<span class="-6225505341206658348" onmouseenter="enter('-6225505341206658348');" onmouseout="out('-6225505341206658348');" style="">1012                 // Clear the table                                                                       </span>
<span class="-429946239562688464" onmouseenter="enter('-429946239562688464');" onmouseout="out('-429946239562688464');" style="">1013                 ops.add(ContentProviderOperation.newDelete(uri).build());                                </span>
<span class="-2619892188160552062" onmouseenter="enter('-2619892188160552062');" onmouseout="out('-2619892188160552062');" style="">1014                 int count = screensCopy.size();                                                          </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style="">1015                 for (int i = 0; i &lt; count; i++) {                                                        </span>
<span class="4061202061343128850" onmouseenter="enter('4061202061343128850');" onmouseout="out('4061202061343128850');" style="">1016                     ContentValues v = new ContentValues();                                               </span>
<span class="-1711185173807510695" onmouseenter="enter('-1711185173807510695');" onmouseout="out('-1711185173807510695');" style="">1017                     long screenId = screensCopy.get(i);                                                  </span>
<span class="-5112420615000020353" onmouseenter="enter('-5112420615000020353');" onmouseout="out('-5112420615000020353');" style="">1018                     v.put(LauncherSettings.WorkspaceScreens._ID, screenId);                              </span>
<span class="4685968830084375092" onmouseenter="enter('4685968830084375092');" onmouseout="out('4685968830084375092');" style="">1019                     v.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, i);                             </span>
<span class="2820655584610684032" onmouseenter="enter('2820655584610684032');" onmouseout="out('2820655584610684032');" style="">1020                     ops.add(ContentProviderOperation.newInsert(uri).withValues(v).build());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1021                 }                                                                                        </span>
<span  style="">1022                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1023                 try {                                                                                    </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style="">1024                     cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                      </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style="">1025                 } catch (Exception ex) {                                                                 </span>
<span class="-9047539165825913138" onmouseenter="enter('-9047539165825913138');" onmouseout="out('-9047539165825913138');" style="">1026                     throw new RuntimeException(ex);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1027                 }                                                                                        </span>
<span  style="">1028                                                                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1029                 synchronized (sBgLock) {                                                                 </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1030                     sBgWorkspaceScreens.clear();                                                         </span>
<span class="-2640283764679238318" onmouseenter="enter('-2640283764679238318');" onmouseout="out('-2640283764679238318');" style="">1031                     sBgWorkspaceScreens.addAll(screensCopy);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1032                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1033             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1034         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1035         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1036     }                                                                                                    </span>
<span  style="">1037                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1038     /**                                                                                                  </span>
<span class="-6789515923938750727" onmouseenter="enter('-6789515923938750727');" onmouseout="out('-6789515923938750727');" style="">1039      * Remove the contents of the specified folder from the database                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1040      */                                                                                                  </span>
<span class="686021856205334545" onmouseenter="enter('686021856205334545');" onmouseout="out('686021856205334545');" style="">1041     static void deleteFolderContentsFromDatabase(Context context, final FolderInfo info) {               </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1042         final ContentResolver cr = context.getContentResolver();                                         </span>
<span  style="">1043                                                                                                          </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1044         Runnable r = new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1045             public void run() {                                                                          </span>
<span class="-8793927488200240422" onmouseenter="enter('-8793927488200240422');" onmouseout="out('-8793927488200240422');" style="">1046                 cr.delete(LauncherSettings.Favorites.getContentUri(info.id, false), null, null);         </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1047                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1048                 synchronized (sBgLock) {                                                                 </span>
<span class="-4714602177116521128" onmouseenter="enter('-4714602177116521128');" onmouseout="out('-4714602177116521128');" style="">1049                     sBgItemsIdMap.remove(info.id);                                                       </span>
<span class="-3189879738488687685" onmouseenter="enter('-3189879738488687685');" onmouseout="out('-3189879738488687685');" style="">1050                     sBgFolders.remove(info.id);                                                          </span>
<span class="5895316081502731153" onmouseenter="enter('5895316081502731153');" onmouseout="out('5895316081502731153');" style="">1051                     sBgDbIconCache.remove(info);                                                         </span>
<span class="-6074846806723656328" onmouseenter="enter('-6074846806723656328');" onmouseout="out('-6074846806723656328');" style="">1052                     sBgWorkspaceItems.remove(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1053                 }                                                                                        </span>
<span  style="">1054                                                                                                          </span>
<span class="-1937171462652594970" onmouseenter="enter('-1937171462652594970');" onmouseout="out('-1937171462652594970');" style="">1055                 cr.delete(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION,                        </span>
<span class="9128354258649337519" onmouseenter="enter('9128354258649337519');" onmouseout="out('9128354258649337519');" style="">1056                         LauncherSettings.Favorites.CONTAINER + &quot;=&quot; + info.id, null);                     </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1057                 // Lock on mBgLock *after* the db operation                                              </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1058                 synchronized (sBgLock) {                                                                 </span>
<span class="7541292827914562010" onmouseenter="enter('7541292827914562010');" onmouseout="out('7541292827914562010');" style="">1059                     for (ItemInfo childInfo : info.contents) {                                           </span>
<span class="-2237983399964272530" onmouseenter="enter('-2237983399964272530');" onmouseout="out('-2237983399964272530');" style="">1060                         sBgItemsIdMap.remove(childInfo.id);                                              </span>
<span class="7662249246062224172" onmouseenter="enter('7662249246062224172');" onmouseout="out('7662249246062224172');" style="">1061                         sBgDbIconCache.remove(childInfo);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1062                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1063                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1064             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1065         };                                                                                               </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1066         runOnWorkerThread(r);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1067     }                                                                                                    </span>
<span  style="">1068                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1069     /**                                                                                                  </span>
<span class="8050600461131576642" onmouseenter="enter('8050600461131576642');" onmouseout="out('8050600461131576642');" style="">1070      * Set this as the current Launcher activity object for the loader.                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1071      */                                                                                                  </span>
<span class="8980870975348708436" onmouseenter="enter('8980870975348708436');" onmouseout="out('8980870975348708436');" style="">1072     public void initialize(Callbacks callbacks) {                                                        </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1073         synchronized (mLock) {                                                                           </span>
<span class="-641895236165954122" onmouseenter="enter('-641895236165954122');" onmouseout="out('-641895236165954122');" style="">1074             mCallbacks = new WeakReference&lt;Callbacks&gt;(callbacks);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1075         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1076     }                                                                                                    </span>
<span  style="">1077                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1078     /**                                                                                                  </span>
<span class="2369304932228112448" onmouseenter="enter('2369304932228112448');" onmouseout="out('2369304932228112448');" style="">1079      * Call from the handler for ACTION_PACKAGE_ADDED, ACTION_PACKAGE_REMOVED and                        </span>
<span class="-8845819122914862467" onmouseenter="enter('-8845819122914862467');" onmouseout="out('-8845819122914862467');" style="">1080      * ACTION_PACKAGE_CHANGED.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1081      */                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1082     @Override                                                                                            </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">1083     public void onReceive(Context context, Intent intent) {                                              </span>
<span class="-4567737324281428641" onmouseenter="enter('-4567737324281428641');" onmouseout="out('-4567737324281428641');" style="">1084         if (DEBUG_LOADERS) Log.d(TAG, &quot;onReceive intent=&quot; + intent);                                     </span>
<span  style="">1085                                                                                                          </span>
<span class="-4990819661547905021" onmouseenter="enter('-4990819661547905021');" onmouseout="out('-4990819661547905021');" style="">1086         final String action = intent.getAction();                                                        </span>
<span  style="">1087                                                                                                          </span>
<span class="3248856724191643889" onmouseenter="enter('3248856724191643889');" onmouseout="out('3248856724191643889');" style="">1088         if (Intent.ACTION_PACKAGE_CHANGED.equals(action)                                                 </span>
<span class="540624655569635000" onmouseenter="enter('540624655569635000');" onmouseout="out('540624655569635000');" style="">1089                 || Intent.ACTION_PACKAGE_REMOVED.equals(action)                                          </span>
<span class="-2497532605624583235" onmouseenter="enter('-2497532605624583235');" onmouseout="out('-2497532605624583235');" style="">1090                 || Intent.ACTION_PACKAGE_ADDED.equals(action)) {                                         </span>
<span class="3043595781762965417" onmouseenter="enter('3043595781762965417');" onmouseout="out('3043595781762965417');" style="">1091             final String packageName = intent.getData().getSchemeSpecificPart();                         </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="">1092             final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);             </span>
<span  style="">1093                                                                                                          </span>
<span class="8732681156431716097" onmouseenter="enter('8732681156431716097');" onmouseout="out('8732681156431716097');" style="">1094             int op = PackageUpdatedTask.OP_NONE;                                                         </span>
<span  style="">1095                                                                                                          </span>
<span class="226916516395269330" onmouseenter="enter('226916516395269330');" onmouseout="out('226916516395269330');" style="">1096             if (packageName == null || packageName.length() == 0) {                                      </span>
<span class="6497011882963257234" onmouseenter="enter('6497011882963257234');" onmouseout="out('6497011882963257234');" style="">1097                 // they sent us a bad intent                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1098                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1099             }                                                                                            </span>
<span  style="">1100                                                                                                          </span>
<span class="-8410954317975616940" onmouseenter="enter('-8410954317975616940');" onmouseout="out('-8410954317975616940');" style="">1101             if (Intent.ACTION_PACKAGE_CHANGED.equals(action)) {                                          </span>
<span class="-6985466686908158774" onmouseenter="enter('-6985466686908158774');" onmouseout="out('-6985466686908158774');" style="">1102                 op = PackageUpdatedTask.OP_UPDATE;                                                       </span>
<span class="-6129441538111285553" onmouseenter="enter('-6129441538111285553');" onmouseout="out('-6129441538111285553');" style="">1103             } else if (Intent.ACTION_PACKAGE_REMOVED.equals(action)) {                                   </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1104                 if (!replacing) {                                                                        </span>
<span class="-6586396537735596399" onmouseenter="enter('-6586396537735596399');" onmouseout="out('-6586396537735596399');" style="">1105                     op = PackageUpdatedTask.OP_REMOVE;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1106                 }                                                                                        </span>
<span class="596194884408948956" onmouseenter="enter('596194884408948956');" onmouseout="out('596194884408948956');" style="">1107                 // else, we are replacing the package, so a PACKAGE_ADDED will be sent                   </span>
<span class="8848734407792838356" onmouseenter="enter('8848734407792838356');" onmouseout="out('8848734407792838356');" style="">1108                 // later, we will update the package at this time                                        </span>
<span class="1584650074780198559" onmouseenter="enter('1584650074780198559');" onmouseout="out('1584650074780198559');" style="">1109             } else if (Intent.ACTION_PACKAGE_ADDED.equals(action)) {                                     </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1110                 if (!replacing) {                                                                        </span>
<span class="-8510632568607563672" onmouseenter="enter('-8510632568607563672');" onmouseout="out('-8510632568607563672');" style="">1111                     op = PackageUpdatedTask.OP_ADD;                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1112                 } else {                                                                                 </span>
<span class="-6985466686908158774" onmouseenter="enter('-6985466686908158774');" onmouseout="out('-6985466686908158774');" style="">1113                     op = PackageUpdatedTask.OP_UPDATE;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1114                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1115             }                                                                                            </span>
<span  style="">1116                                                                                                          </span>
<span class="4401752612772195970" onmouseenter="enter('4401752612772195970');" onmouseout="out('4401752612772195970');" style="">1117             if (op != PackageUpdatedTask.OP_NONE) {                                                      </span>
<span class="-3763042555791809504" onmouseenter="enter('-3763042555791809504');" onmouseout="out('-3763042555791809504');" style="">1118                 enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName }));         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1119             }                                                                                            </span>
<span  style="">1120                                                                                                          </span>
<span class="1438616399789326195" onmouseenter="enter('1438616399789326195');" onmouseout="out('1438616399789326195');" style="">1121         } else if (Intent.ACTION_EXTERNAL_APPLICATIONS_AVAILABLE.equals(action)) {                       </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="">1122             final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);             </span>
<span class="-9048118809725232135" onmouseenter="enter('-9048118809725232135');" onmouseout="out('-9048118809725232135');" style="">1123             String[] packages = intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);           </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1124             if (!replacing) {                                                                            </span>
<span class="8106264297457531305" onmouseenter="enter('8106264297457531305');" onmouseout="out('8106264297457531305');" style="">1125                 enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_ADD, packages));      </span>
<span class="796476435191708892" onmouseenter="enter('796476435191708892');" onmouseout="out('796476435191708892');" style="">1126                 if (mAppsCanBeOnRemoveableStorage) {                                                     </span>
<span class="-460878835460866964" onmouseenter="enter('-460878835460866964');" onmouseout="out('-460878835460866964');" style="">1127                     // Only rebind if we support removable storage.  It catches the case where           </span>
<span class="-4167475923329833908" onmouseenter="enter('-4167475923329833908');" onmouseout="out('-4167475923329833908');" style="">1128                     // apps on the external sd card need to be reloaded                                  </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1129                     startLoaderFromBackground();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1130                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1131             } else {                                                                                     </span>
<span class="-1596872044981704971" onmouseenter="enter('-1596872044981704971');" onmouseout="out('-1596872044981704971');" style="">1132                 // If we are replacing then just update the packages in the list                         </span>
<span class="5890557645886373945" onmouseenter="enter('5890557645886373945');" onmouseout="out('5890557645886373945');" style="">1133                 enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE,               </span>
<span class="-5628778258633473048" onmouseenter="enter('-5628778258633473048');" onmouseout="out('-5628778258633473048');" style="">1134                         packages));                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1135             }                                                                                            </span>
<span class="7043932659231673518" onmouseenter="enter('7043932659231673518');" onmouseout="out('7043932659231673518');" style="">1136         } else if (Intent.ACTION_EXTERNAL_APPLICATIONS_UNAVAILABLE.equals(action)) {                     </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="">1137             final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);             </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1138             if (!replacing) {                                                                            </span>
<span class="-9048118809725232135" onmouseenter="enter('-9048118809725232135');" onmouseout="out('-9048118809725232135');" style="">1139                 String[] packages = intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);       </span>
<span class="-7496430100396306440" onmouseenter="enter('-7496430100396306440');" onmouseout="out('-7496430100396306440');" style="">1140                 enqueuePackageUpdated(new PackageUpdatedTask(                                            </span>
<span class="296372570783844091" onmouseenter="enter('296372570783844091');" onmouseout="out('296372570783844091');" style="">1141                             PackageUpdatedTask.OP_UNAVAILABLE, packages));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1142             }                                                                                            </span>
<span class="1575594556961394504" onmouseenter="enter('1575594556961394504');" onmouseout="out('1575594556961394504');" style="">1143             // else, we are replacing the packages, so ignore this event and wait for                    </span>
<span class="-3059095335031402395" onmouseenter="enter('-3059095335031402395');" onmouseout="out('-3059095335031402395');" style="">1144             // EXTERNAL_APPLICATIONS_AVAILABLE to update the packages at that time                       </span>
<span class="-2062230633944308548" onmouseenter="enter('-2062230633944308548');" onmouseout="out('-2062230633944308548');" style="">1145         } else if (Intent.ACTION_LOCALE_CHANGED.equals(action)) {                                        </span>
<span class="-6283043286710203920" onmouseenter="enter('-6283043286710203920');" onmouseout="out('-6283043286710203920');" style="">1146             // If we have changed locale we need to clear out the labels in all apps/workspace.          </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1147             forceReload();                                                                               </span>
<span class="4348516547288755383" onmouseenter="enter('4348516547288755383');" onmouseout="out('4348516547288755383');" style="">1148         } else if (Intent.ACTION_CONFIGURATION_CHANGED.equals(action)) {                                 </span>
<span class="6164116257081582847" onmouseenter="enter('6164116257081582847');" onmouseout="out('6164116257081582847');" style="">1149              // Check if configuration change was an mcc/mnc change which would affect app resources     </span>
<span class="-1334400353911346867" onmouseenter="enter('-1334400353911346867');" onmouseout="out('-1334400353911346867');" style="">1150              // and we would need to clear out the labels in all apps/workspace. Same handling as        </span>
<span class="-5650891854452971889" onmouseenter="enter('-5650891854452971889');" onmouseout="out('-5650891854452971889');" style="">1151              // above for ACTION_LOCALE_CHANGED                                                          </span>
<span class="5411318685984925146" onmouseenter="enter('5411318685984925146');" onmouseout="out('5411318685984925146');" style="">1152              Configuration currentConfig = context.getResources().getConfiguration();                    </span>
<span class="-5822569774152959183" onmouseenter="enter('-5822569774152959183');" onmouseout="out('-5822569774152959183');" style="">1153              if (mPreviousConfigMcc != currentConfig.mcc) {                                              </span>
<span class="84255665079130844" onmouseenter="enter('84255665079130844');" onmouseout="out('84255665079130844');" style="">1154                    Log.d(TAG, &quot;Reload apps on config change. curr_mcc:&quot;                                  </span>
<span class="-5209278319615985301" onmouseenter="enter('-5209278319615985301');" onmouseout="out('-5209278319615985301');" style="">1155                        + currentConfig.mcc + &quot; prevmcc:&quot; + mPreviousConfigMcc);                          </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1156                    forceReload();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1157              }                                                                                           </span>
<span class="-3935663267934034322" onmouseenter="enter('-3935663267934034322');" onmouseout="out('-3935663267934034322');" style="">1158              // Update previousConfig                                                                    </span>
<span class="3962364908604221868" onmouseenter="enter('3962364908604221868');" onmouseout="out('3962364908604221868');" style="">1159              mPreviousConfigMcc = currentConfig.mcc;                                                     </span>
<span class="-625815149698974703" onmouseenter="enter('-625815149698974703');" onmouseout="out('-625815149698974703');" style="">1160         } else if (SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED.equals(action) ||                 </span>
<span class="-3901926890039161494" onmouseenter="enter('-3901926890039161494');" onmouseout="out('-3901926890039161494');" style="">1161                    SearchManager.INTENT_ACTION_SEARCHABLES_CHANGED.equals(action)) {                     </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1162             if (mCallbacks != null) {                                                                    </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1163                 Callbacks callbacks = mCallbacks.get();                                                  </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1164                 if (callbacks != null) {                                                                 </span>
<span class="-1936765454200843013" onmouseenter="enter('-1936765454200843013');" onmouseout="out('-1936765454200843013');" style="">1165                     callbacks.bindSearchablesChanged();                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1166                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1167             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1168         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1169     }                                                                                                    </span>
<span  style="">1170                                                                                                          </span>
<span class="-3490103774513517076" onmouseenter="enter('-3490103774513517076');" onmouseout="out('-3490103774513517076');" style="">1171     private void forceReload() {                                                                         </span>
<span class="778547048286075437" onmouseenter="enter('778547048286075437');" onmouseout="out('778547048286075437');" style="">1172         resetLoadedState(true, true);                                                                    </span>
<span  style="">1173                                                                                                          </span>
<span class="4237924176832789189" onmouseenter="enter('4237924176832789189');" onmouseout="out('4237924176832789189');" style="">1174         // Do this here because if the launcher activity is running it will be restarted.                </span>
<span class="-3504249388484505584" onmouseenter="enter('-3504249388484505584');" onmouseout="out('-3504249388484505584');" style="">1175         // If it&#x27;s not running startLoaderFromBackground will merely tell it that it needs               </span>
<span class="5637742608155670431" onmouseenter="enter('5637742608155670431');" onmouseout="out('5637742608155670431');" style="">1176         // to reload.                                                                                    </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1177         startLoaderFromBackground();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1178     }                                                                                                    </span>
<span  style="">1179                                                                                                          </span>
<span class="-4293128577464776735" onmouseenter="enter('-4293128577464776735');" onmouseout="out('-4293128577464776735');" style="">1180     public void resetLoadedState(boolean resetAllAppsLoaded, boolean resetWorkspaceLoaded) {             </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1181         synchronized (mLock) {                                                                           </span>
<span class="-2609781935860166694" onmouseenter="enter('-2609781935860166694');" onmouseout="out('-2609781935860166694');" style="">1182             // Stop any existing loaders first, so they don&#x27;t set mAllAppsLoaded or                      </span>
<span class="1916843454374538934" onmouseenter="enter('1916843454374538934');" onmouseout="out('1916843454374538934');" style="">1183             // mWorkspaceLoaded to true later                                                            </span>
<span class="-1528282254597569426" onmouseenter="enter('-1528282254597569426');" onmouseout="out('-1528282254597569426');" style="">1184             stopLoaderLocked();                                                                          </span>
<span class="-4094161784675318974" onmouseenter="enter('-4094161784675318974');" onmouseout="out('-4094161784675318974');" style="">1185             if (resetAllAppsLoaded) mAllAppsLoaded = false;                                              </span>
<span class="-3582216479388479825" onmouseenter="enter('-3582216479388479825');" onmouseout="out('-3582216479388479825');" style="">1186             if (resetWorkspaceLoaded) mWorkspaceLoaded = false;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1187         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1188     }                                                                                                    </span>
<span  style="">1189                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1190     /**                                                                                                  </span>
<span class="-2117548427273174966" onmouseenter="enter('-2117548427273174966');" onmouseout="out('-2117548427273174966');" style="">1191      * When the launcher is in the background, it&#x27;s possible for it to miss paired                       </span>
<span class="9045642034745197537" onmouseenter="enter('9045642034745197537');" onmouseout="out('9045642034745197537');" style="">1192      * configuration changes.  So whenever we trigger the loader from the background                     </span>
<span class="3717077838570548717" onmouseenter="enter('3717077838570548717');" onmouseout="out('3717077838570548717');" style="">1193      * tell the launcher that it needs to re-run the loader when it comes back instead                   </span>
<span class="8619803709595782118" onmouseenter="enter('8619803709595782118');" onmouseout="out('8619803709595782118');" style="">1194      * of doing it now.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1195      */                                                                                                  </span>
<span class="2053805597450117019" onmouseenter="enter('2053805597450117019');" onmouseout="out('2053805597450117019');" style="">1196     public void startLoaderFromBackground() {                                                            </span>
<span class="-3760886775206602162" onmouseenter="enter('-3760886775206602162');" onmouseout="out('-3760886775206602162');" style="">1197         boolean runLoader = false;                                                                       </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1198         if (mCallbacks != null) {                                                                        </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1199             Callbacks callbacks = mCallbacks.get();                                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1200             if (callbacks != null) {                                                                     </span>
<span class="-8461765931128288918" onmouseenter="enter('-8461765931128288918');" onmouseout="out('-8461765931128288918');" style="">1201                 // Only actually run the loader if they&#x27;re not paused.                                   </span>
<span class="-462943306960371545" onmouseenter="enter('-462943306960371545');" onmouseout="out('-462943306960371545');" style="">1202                 if (!callbacks.setLoadOnResume()) {                                                      </span>
<span class="-8889848208331327581" onmouseenter="enter('-8889848208331327581');" onmouseout="out('-8889848208331327581');" style="">1203                     runLoader = true;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1204                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1205             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1206         }                                                                                                </span>
<span class="-2622291522100283788" onmouseenter="enter('-2622291522100283788');" onmouseout="out('-2622291522100283788');" style="">1207         if (runLoader) {                                                                                 </span>
<span class="-8998147482804817647" onmouseenter="enter('-8998147482804817647');" onmouseout="out('-8998147482804817647');" style="">1208             startLoader(false, PagedView.INVALID_RESTORE_PAGE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1209         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1210     }                                                                                                    </span>
<span  style="">1211                                                                                                          </span>
<span class="5010903034251856801" onmouseenter="enter('5010903034251856801');" onmouseout="out('5010903034251856801');" style="">1212     // If there is already a loader task running, tell it to stop.                                       </span>
<span class="796557558969242789" onmouseenter="enter('796557558969242789');" onmouseout="out('796557558969242789');" style="">1213     // returns true if isLaunching() was true on the old task                                            </span>
<span class="-4581932122990216089" onmouseenter="enter('-4581932122990216089');" onmouseout="out('-4581932122990216089');" style="">1214     private boolean stopLoaderLocked() {                                                                 </span>
<span class="-998934784399408070" onmouseenter="enter('-998934784399408070');" onmouseout="out('-998934784399408070');" style="">1215         boolean isLaunching = false;                                                                     </span>
<span class="-7986438653599299764" onmouseenter="enter('-7986438653599299764');" onmouseout="out('-7986438653599299764');" style="">1216         LoaderTask oldTask = mLoaderTask;                                                                </span>
<span class="-2859449282457612659" onmouseenter="enter('-2859449282457612659');" onmouseout="out('-2859449282457612659');" style="">1217         if (oldTask != null) {                                                                           </span>
<span class="5507271139955657849" onmouseenter="enter('5507271139955657849');" onmouseout="out('5507271139955657849');" style="">1218             if (oldTask.isLaunching()) {                                                                 </span>
<span class="-2542349725897719409" onmouseenter="enter('-2542349725897719409');" onmouseout="out('-2542349725897719409');" style="">1219                 isLaunching = true;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1220             }                                                                                            </span>
<span class="-1151918806087352732" onmouseenter="enter('-1151918806087352732');" onmouseout="out('-1151918806087352732');" style="">1221             oldTask.stopLocked();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1222         }                                                                                                </span>
<span class="353443281501806148" onmouseenter="enter('353443281501806148');" onmouseout="out('353443281501806148');" style="">1223         return isLaunching;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1224     }                                                                                                    </span>
<span  style="">1225                                                                                                          </span>
<span class="3837278165301095000" onmouseenter="enter('3837278165301095000');" onmouseout="out('3837278165301095000');" style="">1226     public void startLoader(boolean isLaunching, int synchronousBindPage) {                              </span>
<span class="-5265370469502082000" onmouseenter="enter('-5265370469502082000');" onmouseout="out('-5265370469502082000');" style="">1227         startLoader(isLaunching, synchronousBindPage, LOADER_FLAG_NONE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1228     }                                                                                                    </span>
<span  style="">1229                                                                                                          </span>
<span class="4886983231320039031" onmouseenter="enter('4886983231320039031');" onmouseout="out('4886983231320039031');" style="">1230     public void startLoader(boolean isLaunching, int synchronousBindPage, int loadFlags) {               </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1231         synchronized (mLock) {                                                                           </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1232             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-3508213546782417324" onmouseenter="enter('-3508213546782417324');" onmouseout="out('-3508213546782417324');" style="">1233                 Log.d(TAG, &quot;startLoader isLaunching=&quot; + isLaunching);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1234             }                                                                                            </span>
<span  style="">1235                                                                                                          </span>
<span class="6333826815871699731" onmouseenter="enter('6333826815871699731');" onmouseout="out('6333826815871699731');" style="">1236             // Clear any deferred bind-runnables from the synchronized load process                      </span>
<span class="-7033809362198181476" onmouseenter="enter('-7033809362198181476');" onmouseout="out('-7033809362198181476');" style="">1237             // We must do this before any loading/binding is scheduled below.                            </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1238             mDeferredBindRunnables.clear();                                                              </span>
<span  style="">1239                                                                                                          </span>
<span class="-2785438828901225561" onmouseenter="enter('-2785438828901225561');" onmouseout="out('-2785438828901225561');" style="">1240             // Don&#x27;t bother to start the thread if we know it&#x27;s not going to do anything                 </span>
<span class="-784058118581736702" onmouseenter="enter('-784058118581736702');" onmouseout="out('-784058118581736702');" style="">1241             if (mCallbacks != null &amp;&amp; mCallbacks.get() != null) {                                        </span>
<span class="-5820527225743363271" onmouseenter="enter('-5820527225743363271');" onmouseout="out('-5820527225743363271');" style="">1242                 // If there is already one running, tell it to stop.                                     </span>
<span class="3990358955275755027" onmouseenter="enter('3990358955275755027');" onmouseout="out('3990358955275755027');" style="">1243                 // also, don&#x27;t downgrade isLaunching if we&#x27;re already running                            </span>
<span class="-6024742637751579231" onmouseenter="enter('-6024742637751579231');" onmouseout="out('-6024742637751579231');" style="">1244                 isLaunching = isLaunching || stopLoaderLocked();                                         </span>
<span class="7022676154060365524" onmouseenter="enter('7022676154060365524');" onmouseout="out('7022676154060365524');" style="">1245                 mLoaderTask = new LoaderTask(mApp.getContext(), isLaunching, loadFlags);                 </span>
<span class="1771251463067889729" onmouseenter="enter('1771251463067889729');" onmouseout="out('1771251463067889729');" style="">1246                 if (synchronousBindPage != PagedView.INVALID_RESTORE_PAGE                                </span>
<span class="7049103546590409467" onmouseenter="enter('7049103546590409467');" onmouseout="out('7049103546590409467');" style="">1247                         &amp;&amp; mAllAppsLoaded &amp;&amp; mWorkspaceLoaded) {                                         </span>
<span class="-8342371766149337044" onmouseenter="enter('-8342371766149337044');" onmouseout="out('-8342371766149337044');" style="">1248                     mLoaderTask.runBindSynchronousPage(synchronousBindPage);                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1249                 } else {                                                                                 </span>
<span class="-600387258114093875" onmouseenter="enter('-600387258114093875');" onmouseout="out('-600387258114093875');" style="">1250                     sWorkerThread.setPriority(Thread.NORM_PRIORITY);                                     </span>
<span class="7243935410050079045" onmouseenter="enter('7243935410050079045');" onmouseout="out('7243935410050079045');" style="">1251                     sWorker.post(mLoaderTask);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1252                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1253             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1255     }                                                                                                    </span>
<span  style="">1256                                                                                                          </span>
<span class="8791491145548048370" onmouseenter="enter('8791491145548048370');" onmouseout="out('8791491145548048370');" style="">1257     void bindRemainingSynchronousPages() {                                                               </span>
<span class="5033608739884582118" onmouseenter="enter('5033608739884582118');" onmouseout="out('5033608739884582118');" style="">1258         // Post the remaining side pages to be loaded                                                    </span>
<span class="-5332743236356375648" onmouseenter="enter('-5332743236356375648');" onmouseout="out('-5332743236356375648');" style="">1259         if (!mDeferredBindRunnables.isEmpty()) {                                                         </span>
<span class="5296695443187413802" onmouseenter="enter('5296695443187413802');" onmouseout="out('5296695443187413802');" style="">1260             for (final Runnable r : mDeferredBindRunnables) {                                            </span>
<span class="352794200584805787" onmouseenter="enter('352794200584805787');" onmouseout="out('352794200584805787');" style="">1261                 mHandler.post(r, MAIN_THREAD_BINDING_RUNNABLE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1262             }                                                                                            </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1263             mDeferredBindRunnables.clear();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1264         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1265     }                                                                                                    </span>
<span  style="">1266                                                                                                          </span>
<span class="2340632222115195329" onmouseenter="enter('2340632222115195329');" onmouseout="out('2340632222115195329');" style="">1267     public void stopLoader() {                                                                           </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1268         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1269             if (mLoaderTask != null) {                                                                   </span>
<span class="-3264656657741930991" onmouseenter="enter('-3264656657741930991');" onmouseout="out('-3264656657741930991');" style="">1270                 mLoaderTask.stopLocked();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1271             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1272         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1273     }                                                                                                    </span>
<span  style="">1274                                                                                                          </span>
<span class="-7250027300190670202" onmouseenter="enter('-7250027300190670202');" onmouseout="out('-7250027300190670202');" style="">1275     /** Loads the workspace screens db into a map of Rank -&gt; ScreenId */                                 </span>
<span class="122992606215727554" onmouseenter="enter('122992606215727554');" onmouseout="out('122992606215727554');" style="">1276     private static TreeMap&lt;Integer, Long&gt; loadWorkspaceScreensDb(Context context) {                      </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1277         final ContentResolver contentResolver = context.getContentResolver();                            </span>
<span class="-2220596623746218138" onmouseenter="enter('-2220596623746218138');" onmouseout="out('-2220596623746218138');" style="">1278         final Uri screensUri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                            </span>
<span class="6273592658286011909" onmouseenter="enter('6273592658286011909');" onmouseout="out('6273592658286011909');" style="">1279         final Cursor sc = contentResolver.query(screensUri, null, null, null, null);                     </span>
<span class="-750342796873513708" onmouseenter="enter('-750342796873513708');" onmouseout="out('-750342796873513708');" style="">1280         TreeMap&lt;Integer, Long&gt; orderedScreens = new TreeMap&lt;Integer, Long&gt;();                            </span>
<span  style="">1281                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1282         try {                                                                                            </span>
<span class="-8175558610564469753" onmouseenter="enter('-8175558610564469753');" onmouseout="out('-8175558610564469753');" style="">1283             final int idIndex = sc.getColumnIndexOrThrow(                                                </span>
<span class="-8946142257769661598" onmouseenter="enter('-8946142257769661598');" onmouseout="out('-8946142257769661598');" style="">1284                     LauncherSettings.WorkspaceScreens._ID);                                              </span>
<span class="-8868089630781298600" onmouseenter="enter('-8868089630781298600');" onmouseout="out('-8868089630781298600');" style="">1285             final int rankIndex = sc.getColumnIndexOrThrow(                                              </span>
<span class="5916017515631826997" onmouseenter="enter('5916017515631826997');" onmouseout="out('5916017515631826997');" style="">1286                     LauncherSettings.WorkspaceScreens.SCREEN_RANK);                                      </span>
<span class="204728523712198078" onmouseenter="enter('204728523712198078');" onmouseout="out('204728523712198078');" style="">1287             while (sc.moveToNext()) {                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1288                 try {                                                                                    </span>
<span class="-3927530459574574291" onmouseenter="enter('-3927530459574574291');" onmouseout="out('-3927530459574574291');" style="">1289                     long screenId = sc.getLong(idIndex);                                                 </span>
<span class="4944528408544996755" onmouseenter="enter('4944528408544996755');" onmouseout="out('4944528408544996755');" style="">1290                     int rank = sc.getInt(rankIndex);                                                     </span>
<span class="3308047316092947062" onmouseenter="enter('3308047316092947062');" onmouseout="out('3308047316092947062');" style="">1291                     orderedScreens.put(rank, screenId);                                                  </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1292                 } catch (Exception e) {                                                                  </span>
<span class="-7912680121623740950" onmouseenter="enter('-7912680121623740950');" onmouseout="out('-7912680121623740950');" style=""><abbr title="1293                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e, true);">1293                     Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e,</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1294                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1295             }                                                                                            </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1296         } finally {                                                                                      </span>
<span class="8048076729460304726" onmouseenter="enter('8048076729460304726');" onmouseout="out('8048076729460304726');" style="">1297             sc.close();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1298         }                                                                                                </span>
<span  style="">1299                                                                                                          </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1300         // Log to disk                                                                                   </span>
<span class="395286336309272035" onmouseenter="enter('395286336309272035');" onmouseout="out('395286336309272035');" style="">1301         Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspaceScreensDb()&quot;, true);                           </span>
<span class="218635510720911915" onmouseenter="enter('218635510720911915');" onmouseout="out('218635510720911915');" style="">1302         ArrayList&lt;String&gt; orderedScreensPairs= new ArrayList&lt;String&gt;();                                  </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">1303         for (Integer i : orderedScreens.keySet()) {                                                      </span>
<span class="7491860136402808405" onmouseenter="enter('7491860136402808405');" onmouseout="out('7491860136402808405');" style="">1304             orderedScreensPairs.add(&quot;{ &quot; + i + &quot;: &quot; + orderedScreens.get(i) + &quot; }&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1305         }                                                                                                </span>
<span class="-1337084683171534745" onmouseenter="enter('-1337084683171534745');" onmouseout="out('-1337084683171534745');" style="">1306         Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; +                                              </span>
<span class="-2164573057986762020" onmouseenter="enter('-2164573057986762020');" onmouseout="out('-2164573057986762020');" style="">1307                 TextUtils.join(&quot;, &quot;, orderedScreensPairs), true);                                        </span>
<span class="1470292219769535286" onmouseenter="enter('1470292219769535286');" onmouseout="out('1470292219769535286');" style="">1308         return orderedScreens;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1309     }                                                                                                    </span>
<span  style="">1310                                                                                                          </span>
<span class="3555732154070898598" onmouseenter="enter('3555732154070898598');" onmouseout="out('3555732154070898598');" style="">1311     public boolean isAllAppsLoaded() {                                                                   </span>
<span class="-4479372220598901856" onmouseenter="enter('-4479372220598901856');" onmouseout="out('-4479372220598901856');" style="">1312         return mAllAppsLoaded;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1313     }                                                                                                    </span>
<span  style="">1314                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1315     boolean isLoadingWorkspace() {                                                                       </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1316         synchronized (mLock) {                                                                           </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1317             if (mLoaderTask != null) {                                                                   </span>
<span class="-8784543184221518678" onmouseenter="enter('-8784543184221518678');" onmouseout="out('-8784543184221518678');" style="">1318                 return mLoaderTask.isLoadingWorkspace();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1319             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1320         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1321         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1322     }                                                                                                    </span>
<span  style="">1323                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1324     /**                                                                                                  </span>
<span class="2155822975232422030" onmouseenter="enter('2155822975232422030');" onmouseout="out('2155822975232422030');" style="">1325      * Runnable for the thread that loads the contents of the launcher:                                  </span>
<span class="2245504796345070456" onmouseenter="enter('2245504796345070456');" onmouseout="out('2245504796345070456');" style="">1326      *   - workspace icons                                                                               </span>
<span class="3748531824399873232" onmouseenter="enter('3748531824399873232');" onmouseout="out('3748531824399873232');" style="">1327      *   - widgets                                                                                       </span>
<span class="-1174287823865228312" onmouseenter="enter('-1174287823865228312');" onmouseout="out('-1174287823865228312');" style="">1328      *   - all apps icons                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1329      */                                                                                                  </span>
<span class="5152324394883908677" onmouseenter="enter('5152324394883908677');" onmouseout="out('5152324394883908677');" style="">1330     private class LoaderTask implements Runnable {                                                       </span>
<span class="6683852815807951473" onmouseenter="enter('6683852815807951473');" onmouseout="out('6683852815807951473');" style="">1331         private Context mContext;                                                                        </span>
<span  style="">1332                                                                                                          </span>
<span class="-8892613002903674576" onmouseenter="enter('-8892613002903674576');" onmouseout="out('-8892613002903674576');" style="">1333         private boolean mIsLaunching;                                                                    </span>
<span  style="">1334                                                                                                          </span>
<span class="-8472062509666230595" onmouseenter="enter('-8472062509666230595');" onmouseout="out('-8472062509666230595');" style="">1335         private boolean mIsLoadingAndBindingWorkspace;                                                   </span>
<span  style="">1336                                                                                                          </span>
<span class="840925515877441947" onmouseenter="enter('840925515877441947');" onmouseout="out('840925515877441947');" style="">1337         private boolean mStopped;                                                                        </span>
<span  style="">1338                                                                                                          </span>
<span class="-1108993435799622018" onmouseenter="enter('-1108993435799622018');" onmouseout="out('-1108993435799622018');" style="">1339         private boolean mLoadAndBindStepFinished;                                                        </span>
<span  style="">1340                                                                                                          </span>
<span class="2080823019438326837" onmouseenter="enter('2080823019438326837');" onmouseout="out('2080823019438326837');" style="">1341         private int mFlags;                                                                              </span>
<span  style="">1342                                                                                                          </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">1343         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span  style="">1344                                                                                                          </span>
<span class="-3637406926963361525" onmouseenter="enter('-3637406926963361525');" onmouseout="out('-3637406926963361525');" style="">1345         LoaderTask(Context context, boolean isLaunching, int flags) {                                    </span>
<span class="7260904205784329196" onmouseenter="enter('7260904205784329196');" onmouseout="out('7260904205784329196');" style="">1346             mContext = context;                                                                          </span>
<span class="7512260519858493354" onmouseenter="enter('7512260519858493354');" onmouseout="out('7512260519858493354');" style="">1347             mIsLaunching = isLaunching;                                                                  </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">1348             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="6183718553459964087" onmouseenter="enter('6183718553459964087');" onmouseout="out('6183718553459964087');" style="">1349             mFlags = flags;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1350         }                                                                                                </span>
<span  style="">1351                                                                                                          </span>
<span class="-3427713478562425776" onmouseenter="enter('-3427713478562425776');" onmouseout="out('-3427713478562425776');" style="">1352         boolean isLaunching() {                                                                          </span>
<span class="-4684239236966951132" onmouseenter="enter('-4684239236966951132');" onmouseout="out('-4684239236966951132');" style="">1353             return mIsLaunching;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1354         }                                                                                                </span>
<span  style="">1355                                                                                                          </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1356         boolean isLoadingWorkspace() {                                                                   </span>
<span class="-1565626489511429864" onmouseenter="enter('-1565626489511429864');" onmouseout="out('-1565626489511429864');" style="">1357             return mIsLoadingAndBindingWorkspace;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1358         }                                                                                                </span>
<span  style="">1359                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1360         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-4912644643880785787" onmouseenter="enter('-4912644643880785787');" onmouseout="out('-4912644643880785787');" style="">1361         private boolean loadAndBindWorkspace() {                                                         </span>
<span class="3221067006114111971" onmouseenter="enter('3221067006114111971');" onmouseout="out('3221067006114111971');" style="">1362             mIsLoadingAndBindingWorkspace = true;                                                        </span>
<span  style="">1363                                                                                                          </span>
<span class="1537270917172214589" onmouseenter="enter('1537270917172214589');" onmouseout="out('1537270917172214589');" style="">1364             // Load the workspace                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1365             if (DEBUG_LOADERS) {                                                                         </span>
<span class="8901273111544619292" onmouseenter="enter('8901273111544619292');" onmouseout="out('8901273111544619292');" style="">1366                 Log.d(TAG, &quot;loadAndBindWorkspace mWorkspaceLoaded=&quot; + mWorkspaceLoaded);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1367             }                                                                                            </span>
<span  style="">1368                                                                                                          </span>
<span class="-7050118912026035967" onmouseenter="enter('-7050118912026035967');" onmouseout="out('-7050118912026035967');" style="">1369             boolean isUpgradePath = false;                                                               </span>
<span class="-6627511839388696673" onmouseenter="enter('-6627511839388696673');" onmouseout="out('-6627511839388696673');" style="">1370             if (!mWorkspaceLoaded) {                                                                     </span>
<span class="-5751837054227838000" onmouseenter="enter('-5751837054227838000');" onmouseout="out('-5751837054227838000');" style="">1371                 isUpgradePath = loadWorkspace();                                                         </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1372                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1373                     if (mStopped) {                                                                      </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1374                         return isUpgradePath;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1375                     }                                                                                    </span>
<span class="3247008524984054391" onmouseenter="enter('3247008524984054391');" onmouseout="out('3247008524984054391');" style="">1376                     mWorkspaceLoaded = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1377                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1378             }                                                                                            </span>
<span  style="">1379                                                                                                          </span>
<span class="8161409494754485761" onmouseenter="enter('8161409494754485761');" onmouseout="out('8161409494754485761');" style="">1380             // Bind the workspace                                                                        </span>
<span class="7984749853310309686" onmouseenter="enter('7984749853310309686');" onmouseout="out('7984749853310309686');" style="">1381             bindWorkspace(-1, isUpgradePath);                                                            </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1382             return isUpgradePath;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1383         }                                                                                                </span>
<span  style="">1384                                                                                                          </span>
<span class="-1989226029052835978" onmouseenter="enter('-1989226029052835978');" onmouseout="out('-1989226029052835978');" style="">1385         private void waitForIdle() {                                                                     </span>
<span class="755597645611528735" onmouseenter="enter('755597645611528735');" onmouseout="out('755597645611528735');" style="">1386             // Wait until the either we&#x27;re stopped or the other threads are done.                        </span>
<span class="-8727414813590658044" onmouseenter="enter('-8727414813590658044');" onmouseout="out('-8727414813590658044');" style="">1387             // This way we don&#x27;t start loading all apps until the workspace has settled                  </span>
<span class="519327046885180501" onmouseenter="enter('519327046885180501');" onmouseout="out('519327046885180501');" style="">1388             // down.                                                                                     </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1389             synchronized (LoaderTask.this) {                                                             </span>
<span class="-83798755248439808" onmouseenter="enter('-83798755248439808');" onmouseout="out('-83798755248439808');" style="">1390                 final long workspaceWaitTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;           </span>
<span  style="">1391                                                                                                          </span>
<span class="-8997106023930440912" onmouseenter="enter('-8997106023930440912');" onmouseout="out('-8997106023930440912');" style="">1392                 mHandler.postIdle(new Runnable() {                                                       </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1393                         public void run() {                                                              </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1394                             synchronized (LoaderTask.this) {                                             </span>
<span class="-4593766760064909367" onmouseenter="enter('-4593766760064909367');" onmouseout="out('-4593766760064909367');" style="">1395                                 mLoadAndBindStepFinished = true;                                         </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1396                                 if (DEBUG_LOADERS) {                                                     </span>
<span class="-7140275656523627984" onmouseenter="enter('-7140275656523627984');" onmouseout="out('-7140275656523627984');" style="">1397                                     Log.d(TAG, &quot;done with previous binding step&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1398                                 }                                                                        </span>
<span class="8111819661104992685" onmouseenter="enter('8111819661104992685');" onmouseout="out('8111819661104992685');" style="">1399                                 LoaderTask.this.notify();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1400                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1401                         }                                                                                </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1402                     });                                                                                  </span>
<span  style="">1403                                                                                                          </span>
<span class="7673579852599691461" onmouseenter="enter('7673579852599691461');" onmouseout="out('7673579852599691461');" style="">1404                 while (!mStopped &amp;&amp; !mLoadAndBindStepFinished &amp;&amp; !mFlushingWorkerThread) {               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1405                     try {                                                                                </span>
<span class="-1997675543177729859" onmouseenter="enter('-1997675543177729859');" onmouseout="out('-1997675543177729859');" style="">1406                         // Just in case mFlushingWorkerThread changes but we aren&#x27;t woken up,            </span>
<span class="4998753984474875942" onmouseenter="enter('4998753984474875942');" onmouseout="out('4998753984474875942');" style="">1407                         // wait no longer than 1sec at a time                                            </span>
<span class="1515790047903299628" onmouseenter="enter('1515790047903299628');" onmouseout="out('1515790047903299628');" style="">1408                         this.wait(1000);                                                                 </span>
<span class="3493957724480568133" onmouseenter="enter('3493957724480568133');" onmouseout="out('3493957724480568133');" style="">1409                     } catch (InterruptedException ex) {                                                  </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style="">1410                         // Ignore                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1411                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1412                 }                                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1413                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="-72139740866353106" onmouseenter="enter('-72139740866353106');" onmouseout="out('-72139740866353106');" style="">1414                     Log.d(TAG, &quot;waited &quot;                                                                 </span>
<span class="3094974955332165680" onmouseenter="enter('3094974955332165680');" onmouseout="out('3094974955332165680');" style="">1415                             + (SystemClock.uptimeMillis()-workspaceWaitTime)                             </span>
<span class="4719480645001782920" onmouseenter="enter('4719480645001782920');" onmouseout="out('4719480645001782920');" style="">1416                             + &quot;ms for previous step to finish binding&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1417                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1418             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1419         }                                                                                                </span>
<span  style="">1420                                                                                                          </span>
<span class="6003497491863497289" onmouseenter="enter('6003497491863497289');" onmouseout="out('6003497491863497289');" style="">1421         void runBindSynchronousPage(int synchronousBindPage) {                                           </span>
<span class="26631348189854486" onmouseenter="enter('26631348189854486');" onmouseout="out('26631348189854486');" style="">1422             if (synchronousBindPage == PagedView.INVALID_RESTORE_PAGE) {                                 </span>
<span class="-8503902330989669437" onmouseenter="enter('-8503902330989669437');" onmouseout="out('-8503902330989669437');" style="">1423                 // Ensure that we have a valid page index to load synchronously                          </span>
<span class="4351877111278684588" onmouseenter="enter('4351877111278684588');" onmouseout="out('4351877111278684588');" style="">1424                 throw new RuntimeException(&quot;Should not call runBindSynchronousPage() without &quot; +         </span>
<span class="-7231071987017264740" onmouseenter="enter('-7231071987017264740');" onmouseout="out('-7231071987017264740');" style="">1425                         &quot;valid page index&quot;);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1426             }                                                                                            </span>
<span class="-1078848978706070277" onmouseenter="enter('-1078848978706070277');" onmouseout="out('-1078848978706070277');" style="">1427             if (!mAllAppsLoaded || !mWorkspaceLoaded) {                                                  </span>
<span class="2879437365312389694" onmouseenter="enter('2879437365312389694');" onmouseout="out('2879437365312389694');" style="">1428                 // Ensure that we don&#x27;t try and bind a specified page when the pages have not been       </span>
<span class="169159946226030638" onmouseenter="enter('169159946226030638');" onmouseout="out('169159946226030638');" style="">1429                 // loaded already (we should load everything asynchronously in that case)                </span>
<span class="2803547673173241327" onmouseenter="enter('2803547673173241327');" onmouseout="out('2803547673173241327');" style="">1430                 throw new RuntimeException(&quot;Expecting AllApps and Workspace to be loaded&quot;);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1431             }                                                                                            </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1432             synchronized (mLock) {                                                                       </span>
<span class="6834879657722268045" onmouseenter="enter('6834879657722268045');" onmouseout="out('6834879657722268045');" style="">1433                 if (mIsLoaderTaskRunning) {                                                              </span>
<span class="3479473486057258175" onmouseenter="enter('3479473486057258175');" onmouseout="out('3479473486057258175');" style="">1434                     // Ensure that we are never running the background loading at this point since       </span>
<span class="5690931735845958615" onmouseenter="enter('5690931735845958615');" onmouseout="out('5690931735845958615');" style="">1435                     // we also touch the background collections                                          </span>
<span class="-8789687649412956769" onmouseenter="enter('-8789687649412956769');" onmouseout="out('-8789687649412956769');" style="">1436                     throw new RuntimeException(&quot;Error! Background loading is already running&quot;);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1437                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1438             }                                                                                            </span>
<span  style="">1439                                                                                                          </span>
<span class="4081886748823582405" onmouseenter="enter('4081886748823582405');" onmouseout="out('4081886748823582405');" style="">1440             // XXX: Throw an exception if we are already loading (since we touch the worker thread       </span>
<span class="-98490365064007765" onmouseenter="enter('-98490365064007765');" onmouseout="out('-98490365064007765');" style="">1441             //      data structures, we can&#x27;t allow any other thread to touch that data, but because     </span>
<span class="4680477662519922026" onmouseenter="enter('4680477662519922026');" onmouseout="out('4680477662519922026');" style="">1442             //      this call is synchronous, we can get away with not locking).                         </span>
<span  style="">1443                                                                                                          </span>
<span class="-6012373927983533730" onmouseenter="enter('-6012373927983533730');" onmouseout="out('-6012373927983533730');" style="">1444             // The LauncherModel is static in the LauncherAppState and mHandler may have queued          </span>
<span class="7586418927072898518" onmouseenter="enter('7586418927072898518');" onmouseout="out('7586418927072898518');" style="">1445             // operations from the previous activity.  We need to ensure that all queued operations      </span>
<span class="-70743228311848279" onmouseenter="enter('-70743228311848279');" onmouseout="out('-70743228311848279');" style="">1446             // are executed before any synchronous binding work is done.                                 </span>
<span class="-4498008587479034521" onmouseenter="enter('-4498008587479034521');" onmouseout="out('-4498008587479034521');" style="">1447             mHandler.flush();                                                                            </span>
<span  style="">1448                                                                                                          </span>
<span class="-3771221013488357479" onmouseenter="enter('-3771221013488357479');" onmouseout="out('-3771221013488357479');" style="">1449             // Divide the set of loaded items into those that we are binding synchronously, and          </span>
<span class="5224432435633178726" onmouseenter="enter('5224432435633178726');" onmouseout="out('5224432435633178726');" style="">1450             // everything else that is to be bound normally (asynchronously).                            </span>
<span class="-6685180061336045314" onmouseenter="enter('-6685180061336045314');" onmouseout="out('-6685180061336045314');" style="">1451             bindWorkspace(synchronousBindPage, false);                                                   </span>
<span class="6689685850222943783" onmouseenter="enter('6689685850222943783');" onmouseout="out('6689685850222943783');" style="">1452             // XXX: For now, continue posting the binding of AllApps as there are other issues that      </span>
<span class="-1574502332056641514" onmouseenter="enter('-1574502332056641514');" onmouseout="out('-1574502332056641514');" style="">1453             //      arise from that.                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">1454             onlyBindAllApps();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1455         }                                                                                                </span>
<span  style="">1456                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1457         public void run() {                                                                              </span>
<span class="5752535899438246447" onmouseenter="enter('5752535899438246447');" onmouseout="out('5752535899438246447');" style="">1458             boolean isUpgrade = false;                                                                   </span>
<span  style="">1459                                                                                                          </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1460             synchronized (mLock) {                                                                       </span>
<span class="4738665752688002399" onmouseenter="enter('4738665752688002399');" onmouseout="out('4738665752688002399');" style="">1461                 mIsLoaderTaskRunning = true;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1462             }                                                                                            </span>
<span class="-1737494436521525410" onmouseenter="enter('-1737494436521525410');" onmouseout="out('-1737494436521525410');" style="">1463             // Optimize for end-user experience: if the Launcher is up and // running with the           </span>
<span class="892988660615454533" onmouseenter="enter('892988660615454533');" onmouseout="out('892988660615454533');" style="">1464             // All Apps interface in the foreground, load All Apps first. Otherwise, load the            </span>
<span class="-1944482210197593446" onmouseenter="enter('-1944482210197593446');" onmouseout="out('-1944482210197593446');" style="">1465             // workspace first (default).                                                                </span>
<span class="-8128861992085659189" onmouseenter="enter('-8128861992085659189');" onmouseout="out('-8128861992085659189');" style="">1466             keep_running: {                                                                              </span>
<span class="2293067736949718284" onmouseenter="enter('2293067736949718284');" onmouseout="out('2293067736949718284');" style="">1467                 // Elevate priority when Home launches for the first time to avoid                       </span>
<span class="-1381926741216219064" onmouseenter="enter('-1381926741216219064');" onmouseout="out('-1381926741216219064');" style="">1468                 // starving at boot time. Staring at a blank home is not cool.                           </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1469                 synchronized (mLock) {                                                                   </span>
<span class="8946499537685848583" onmouseenter="enter('8946499537685848583');" onmouseout="out('8946499537685848583');" style="">1470                     if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to &quot; +                        </span>
<span class="1787109731546912352" onmouseenter="enter('1787109731546912352');" onmouseout="out('1787109731546912352');" style="">1471                             (mIsLaunching ? &quot;DEFAULT&quot; : &quot;BACKGROUND&quot;));                                  </span>
<span class="-1912109441925598991" onmouseenter="enter('-1912109441925598991');" onmouseout="out('-1912109441925598991');" style="">1472                     android.os.Process.setThreadPriority(mIsLaunching                                    </span>
<span class="-5572949467661441178" onmouseenter="enter('-5572949467661441178');" onmouseout="out('-5572949467661441178');" style="">1473                             ? Process.THREAD_PRIORITY_DEFAULT : Process.THREAD_PRIORITY_BACKGROUND);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1474                 }                                                                                        </span>
<span class="9220749004793568337" onmouseenter="enter('9220749004793568337');" onmouseout="out('9220749004793568337');" style="">1475                 if (DEBUG_LOADERS) Log.d(TAG, &quot;step 1: loading workspace&quot;);                              </span>
<span class="8482653655407072483" onmouseenter="enter('8482653655407072483');" onmouseout="out('8482653655407072483');" style="">1476                 isUpgrade = loadAndBindWorkspace();                                                      </span>
<span  style="">1477                                                                                                          </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1478                 if (mStopped) {                                                                          </span>
<span class="-6818805659412975442" onmouseenter="enter('-6818805659412975442');" onmouseout="out('-6818805659412975442');" style="">1479                     break keep_running;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1480                 }                                                                                        </span>
<span  style="">1481                                                                                                          </span>
<span class="-5777092162251517407" onmouseenter="enter('-5777092162251517407');" onmouseout="out('-5777092162251517407');" style="">1482                 // Whew! Hard work done.  Slow us down, and wait until the UI thread has                 </span>
<span class="-4075896614387769686" onmouseenter="enter('-4075896614387769686');" onmouseout="out('-4075896614387769686');" style="">1483                 // settled down.                                                                         </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1484                 synchronized (mLock) {                                                                   </span>
<span class="1926990202484285414" onmouseenter="enter('1926990202484285414');" onmouseout="out('1926990202484285414');" style="">1485                     if (mIsLaunching) {                                                                  </span>
<span class="-8046035155088057723" onmouseenter="enter('-8046035155088057723');" onmouseout="out('-8046035155088057723');" style="">1486                         if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to BACKGROUND&quot;);          </span>
<span class="6194754511830950532" onmouseenter="enter('6194754511830950532');" onmouseout="out('6194754511830950532');" style="">1487                         android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1488                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1489                 }                                                                                        </span>
<span class="2443484392604792624" onmouseenter="enter('2443484392604792624');" onmouseout="out('2443484392604792624');" style="">1490                 waitForIdle();                                                                           </span>
<span  style="">1491                                                                                                          </span>
<span class="1529750222663563109" onmouseenter="enter('1529750222663563109');" onmouseout="out('1529750222663563109');" style="">1492                 // second step                                                                           </span>
<span class="4805812105190008803" onmouseenter="enter('4805812105190008803');" onmouseout="out('4805812105190008803');" style="">1493                 if (DEBUG_LOADERS) Log.d(TAG, &quot;step 2: loading all apps&quot;);                               </span>
<span class="3758302759319518479" onmouseenter="enter('3758302759319518479');" onmouseout="out('3758302759319518479');" style="">1494                 loadAndBindAllApps();                                                                    </span>
<span  style="">1495                                                                                                          </span>
<span class="4031538869478111" onmouseenter="enter('4031538869478111');" onmouseout="out('4031538869478111');" style="">1496                 // Restore the default thread priority after we are done loading items                   </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1497                 synchronized (mLock) {                                                                   </span>
<span class="6299511964324687923" onmouseenter="enter('6299511964324687923');" onmouseout="out('6299511964324687923');" style="">1498                     android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_DEFAULT);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1499                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1500             }                                                                                            </span>
<span  style="">1501                                                                                                          </span>
<span class="3508545587953199453" onmouseenter="enter('3508545587953199453');" onmouseout="out('3508545587953199453');" style="">1502             // Update the saved icons if necessary                                                       </span>
<span class="-4757805943857079956" onmouseenter="enter('-4757805943857079956');" onmouseout="out('-4757805943857079956');" style="">1503             if (DEBUG_LOADERS) Log.d(TAG, &quot;Comparing loaded icons to database icons&quot;);                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1504             synchronized (sBgLock) {                                                                     </span>
<span class="5900553346724410681" onmouseenter="enter('5900553346724410681');" onmouseout="out('5900553346724410681');" style="">1505                 for (Object key : sBgDbIconCache.keySet()) {                                             </span>
<span class="404633043401473554" onmouseenter="enter('404633043401473554');" onmouseout="out('404633043401473554');" style="">1506                     updateSavedIcon(mContext, (ShortcutInfo) key, sBgDbIconCache.get(key));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1507                 }                                                                                        </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1508                 sBgDbIconCache.clear();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1509             }                                                                                            </span>
<span  style="">1510                                                                                                          </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">1511             if (LauncherAppState.isDisableAllApps()) {                                                   </span>
<span class="6125270178763735331" onmouseenter="enter('6125270178763735331');" onmouseout="out('6125270178763735331');" style="">1512                 // Ensure that all the applications that are in the system are                           </span>
<span class="305725628855266005" onmouseenter="enter('305725628855266005');" onmouseout="out('305725628855266005');" style="">1513                 // represented on the home screen.                                                       </span>
<span class="3562864863119627268" onmouseenter="enter('3562864863119627268');" onmouseout="out('3562864863119627268');" style="">1514                 if (!UPGRADE_USE_MORE_APPS_FOLDER || !isUpgrade) {                                       </span>
<span class="5095093339904195112" onmouseenter="enter('5095093339904195112');" onmouseout="out('5095093339904195112');" style="">1515                     verifyApplications();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1516                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1517             }                                                                                            </span>
<span  style="">1518                                                                                                          </span>
<span class="-745190257815883733" onmouseenter="enter('-745190257815883733');" onmouseout="out('-745190257815883733');" style="">1519             // Clear out this reference, otherwise we end up holding it until all of the                 </span>
<span class="4646172956484107396" onmouseenter="enter('4646172956484107396');" onmouseout="out('4646172956484107396');" style="">1520             // callback runnables are done.                                                              </span>
<span class="-5116782011037529434" onmouseenter="enter('-5116782011037529434');" onmouseout="out('-5116782011037529434');" style="">1521             mContext = null;                                                                             </span>
<span  style="">1522                                                                                                          </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1523             synchronized (mLock) {                                                                       </span>
<span class="-2953553521466488464" onmouseenter="enter('-2953553521466488464');" onmouseout="out('-2953553521466488464');" style="">1524                 // If we are still the last one to be scheduled, remove ourselves.                       </span>
<span class="-1560897046285527036" onmouseenter="enter('-1560897046285527036');" onmouseout="out('-1560897046285527036');" style="">1525                 if (mLoaderTask == this) {                                                               </span>
<span class="-8540970856372433004" onmouseenter="enter('-8540970856372433004');" onmouseout="out('-8540970856372433004');" style="">1526                     mLoaderTask = null;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1527                 }                                                                                        </span>
<span class="8472658350888958885" onmouseenter="enter('8472658350888958885');" onmouseout="out('8472658350888958885');" style="">1528                 mIsLoaderTaskRunning = false;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1529             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1530         }                                                                                                </span>
<span  style="">1531                                                                                                          </span>
<span class="200135487053889456" onmouseenter="enter('200135487053889456');" onmouseout="out('200135487053889456');" style="">1532         public void stopLocked() {                                                                       </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1533             synchronized (LoaderTask.this) {                                                             </span>
<span class="8214677179915027824" onmouseenter="enter('8214677179915027824');" onmouseout="out('8214677179915027824');" style="">1534                 mStopped = true;                                                                         </span>
<span class="3056713147428312392" onmouseenter="enter('3056713147428312392');" onmouseout="out('3056713147428312392');" style="">1535                 this.notify();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1536             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1537         }                                                                                                </span>
<span  style="">1538                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1539         /**                                                                                              </span>
<span class="8543020973836575883" onmouseenter="enter('8543020973836575883');" onmouseout="out('8543020973836575883');" style="">1540          * Gets the callbacks object.  If we&#x27;ve been stopped, or if the launcher object                  </span>
<span class="-5710779889390340322" onmouseenter="enter('-5710779889390340322');" onmouseout="out('-5710779889390340322');" style="">1541          * has somehow been garbage collected, return null instead.  Pass in the Callbacks               </span>
<span class="1695163395735776366" onmouseenter="enter('1695163395735776366');" onmouseout="out('1695163395735776366');" style="">1542          * object that was around when the deferred message was scheduled, and if there&#x27;s                </span>
<span class="7856411153887025232" onmouseenter="enter('7856411153887025232');" onmouseout="out('7856411153887025232');" style="">1543          * a new Callbacks object around then also return null.  This will save us from                  </span>
<span class="2242983124447893975" onmouseenter="enter('2242983124447893975');" onmouseout="out('2242983124447893975');" style="">1544          * calling onto it with data that will be ignored.                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1545          */                                                                                              </span>
<span class="-2719659093140206912" onmouseenter="enter('-2719659093140206912');" onmouseout="out('-2719659093140206912');" style="">1546         Callbacks tryGetCallbacks(Callbacks oldCallbacks) {                                              </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1547             synchronized (mLock) {                                                                       </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1548                 if (mStopped) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1549                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1550                 }                                                                                        </span>
<span  style="">1551                                                                                                          </span>
<span class="-1148437149844317216" onmouseenter="enter('-1148437149844317216');" onmouseout="out('-1148437149844317216');" style="">1552                 if (mCallbacks == null) {                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1553                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1554                 }                                                                                        </span>
<span  style="">1555                                                                                                          </span>
<span class="4487336468213395696" onmouseenter="enter('4487336468213395696');" onmouseout="out('4487336468213395696');" style="">1556                 final Callbacks callbacks = mCallbacks.get();                                            </span>
<span class="-1088473782403214817" onmouseenter="enter('-1088473782403214817');" onmouseout="out('-1088473782403214817');" style="">1557                 if (callbacks != oldCallbacks) {                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1558                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1559                 }                                                                                        </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">1560                 if (callbacks == null) {                                                                 </span>
<span class="-94531209925935523" onmouseenter="enter('-94531209925935523');" onmouseout="out('-94531209925935523');" style="">1561                     Log.w(TAG, &quot;no mCallbacks&quot;);                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1562                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1563                 }                                                                                        </span>
<span  style="">1564                                                                                                          </span>
<span class="7316466478630645098" onmouseenter="enter('7316466478630645098');" onmouseout="out('7316466478630645098');" style="">1565                 return callbacks;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1566             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1567         }                                                                                                </span>
<span  style="">1568                                                                                                          </span>
<span class="-732845747997402687" onmouseenter="enter('-732845747997402687');" onmouseout="out('-732845747997402687');" style="">1569         private void verifyApplications() {                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">1570             final Context context = mApp.getContext();                                                   </span>
<span class="-895975897487385508" onmouseenter="enter('-895975897487385508');" onmouseout="out('-895975897487385508');" style="">1571             // Cross reference all the applications in our apps list with items in the workspace         </span>
<span class="-10165714367555844" onmouseenter="enter('-10165714367555844');" onmouseout="out('-10165714367555844');" style="">1572             ArrayList&lt;ItemInfo&gt; tmpInfos;                                                                </span>
<span class="-1498611641211142735" onmouseenter="enter('-1498611641211142735');" onmouseout="out('-1498611641211142735');" style="">1573             ArrayList&lt;ItemInfo&gt; added = new ArrayList&lt;ItemInfo&gt;();                                       </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">1574             synchronized(sBgLock) {                                                                      </span>
<span class="-8503045385813305184" onmouseenter="enter('-8503045385813305184');" onmouseout="out('-8503045385813305184');" style="">1575                 for (AppInfo app : mBgAllAppsList.data) {                                                </span>
<span class="8719756079786944918" onmouseenter="enter('8719756079786944918');" onmouseout="out('8719756079786944918');" style="">1576                     tmpInfos = getItemInfoForComponentName(app.componentName);                           </span>
<span class="2520781471180992241" onmouseenter="enter('2520781471180992241');" onmouseout="out('2520781471180992241');" style="">1577                     if (tmpInfos.isEmpty()) {                                                            </span>
<span class="-8553694446545507920" onmouseenter="enter('-8553694446545507920');" onmouseout="out('-8553694446545507920');" style="">1578                         // We are missing an application icon, so add this to the workspace              </span>
<span class="-4039639638749761552" onmouseenter="enter('-4039639638749761552');" onmouseout="out('-4039639638749761552');" style="">1579                         added.add(app);                                                                  </span>
<span class="-6087209586339664607" onmouseenter="enter('-6087209586339664607');" onmouseout="out('-6087209586339664607');" style="">1580                         // This is a rare event, so lets log it                                          </span>
<span class="-8409193735080295855" onmouseenter="enter('-8409193735080295855');" onmouseout="out('-8409193735080295855');" style="">1581                         Log.e(TAG, &quot;Missing Application on load: &quot; + app);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1582                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1583                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1584             }                                                                                            </span>
<span class="-3228275885243238792" onmouseenter="enter('-3228275885243238792');" onmouseout="out('-3228275885243238792');" style="">1585             if (!added.isEmpty()) {                                                                      </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style="">1586                 Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;                           </span>
<span class="-7750968314744672785" onmouseenter="enter('-7750968314744672785');" onmouseout="out('-7750968314744672785');" style="">1587                 addAndBindAddedApps(context, added, cb, new ArrayList&lt;AppInfo&gt;());                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1588             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1589         }                                                                                                </span>
<span  style="">1590                                                                                                          </span>
<span class="1799876722918383990" onmouseenter="enter('1799876722918383990');" onmouseout="out('1799876722918383990');" style="">1591         // check &amp; update map of what&#x27;s occupied; used to discard overlapping/invalid items              </span>
<span class="1369641317894879083" onmouseenter="enter('1369641317894879083');" onmouseout="out('1369641317894879083');" style="">1592         private boolean checkItemPlacement(HashMap&lt;Long, ItemInfo[][]&gt; occupied, ItemInfo item,          </span>
<span class="-1114457745240921120" onmouseenter="enter('-1114457745240921120');" onmouseout="out('-1114457745240921120');" style="">1593                                            AtomicBoolean deleteOnInvalidPlacement) {                     </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1594             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1595             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="2610967815704817337" onmouseenter="enter('2610967815704817337');" onmouseout="out('2610967815704817337');" style="">1596             final int countX = (int) grid.numColumns;                                                    </span>
<span class="-4666114634626787340" onmouseenter="enter('-4666114634626787340');" onmouseout="out('-4666114634626787340');" style="">1597             final int countY = (int) grid.numRows;                                                       </span>
<span  style="">1598                                                                                                          </span>
<span class="6034161250987228772" onmouseenter="enter('6034161250987228772');" onmouseout="out('6034161250987228772');" style="">1599             long containerIndex = item.screenId;                                                         </span>
<span class="-7373493273183889597" onmouseenter="enter('-7373493273183889597');" onmouseout="out('-7373493273183889597');" style="">1600             if (item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                        </span>
<span class="2673995963777381740" onmouseenter="enter('2673995963777381740');" onmouseout="out('2673995963777381740');" style="">1601                 // Return early if we detect that an item is under the hotseat button                    </span>
<span class="8439501161968406722" onmouseenter="enter('8439501161968406722');" onmouseout="out('8439501161968406722');" style="">1602                 if (mCallbacks == null ||                                                                </span>
<span class="2765367117287235525" onmouseenter="enter('2765367117287235525');" onmouseout="out('2765367117287235525');" style="">1603                         mCallbacks.get().isAllAppsButtonRank((int) item.screenId)) {                     </span>
<span class="-5585792196891628830" onmouseenter="enter('-5585792196891628830');" onmouseout="out('-5585792196891628830');" style="">1604                     deleteOnInvalidPlacement.set(true);                                                  </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1605                     Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                             </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1606                             + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;                </span>
<span class="-6945266911057923165" onmouseenter="enter('-6945266911057923165');" onmouseout="out('-6945266911057923165');" style="">1607                             + item.cellY + &quot;) occupied by all apps&quot;);                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1608                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1609                 }                                                                                        </span>
<span  style="">1610                                                                                                          </span>
<span class="1283283798458548935" onmouseenter="enter('1283283798458548935');" onmouseout="out('1283283798458548935');" style="">1611                 final ItemInfo[][] hotseatItems =                                                        </span>
<span class="1949963606333422560" onmouseenter="enter('1949963606333422560');" onmouseout="out('1949963606333422560');" style="">1612                         occupied.get((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT);               </span>
<span  style="">1613                                                                                                          </span>
<span class="4306415300339150674" onmouseenter="enter('4306415300339150674');" onmouseout="out('4306415300339150674');" style="">1614                 if (item.screenId &gt;= grid.numHotseatIcons) {                                             </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1615                     Log.e(TAG, &quot;Error loading shortcut &quot; + item                                          </span>
<span class="5751503886607422325" onmouseenter="enter('5751503886607422325');" onmouseout="out('5751503886607422325');" style="">1616                             + &quot; into hotseat position &quot; + item.screenId                                  </span>
<span class="8586084608145250937" onmouseenter="enter('8586084608145250937');" onmouseout="out('8586084608145250937');" style="">1617                             + &quot;, position out of bounds: (0 to &quot; + (grid.numHotseatIcons - 1)            </span>
<span class="4670108460576455524" onmouseenter="enter('4670108460576455524');" onmouseout="out('4670108460576455524');" style="">1618                             + &quot;)&quot;);                                                                      </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1619                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1620                 }                                                                                        </span>
<span  style="">1621                                                                                                          </span>
<span class="-96711597696201103" onmouseenter="enter('-96711597696201103');" onmouseout="out('-96711597696201103');" style="">1622                 if (hotseatItems != null) {                                                              </span>
<span class="-5719492878362044891" onmouseenter="enter('-5719492878362044891');" onmouseout="out('-5719492878362044891');" style="">1623                     if (hotseatItems[(int) item.screenId][0] != null) {                                  </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1624                         Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                         </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1625                                 + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;            </span>
<span class="-5608765342526697238" onmouseenter="enter('-5608765342526697238');" onmouseout="out('-5608765342526697238');" style="">1626                                 + item.cellY + &quot;) occupied by &quot;                                          </span>
<span class="-9216450188742256868" onmouseenter="enter('-9216450188742256868');" onmouseout="out('-9216450188742256868');" style="">1627                                 + occupied.get(LauncherSettings.Favorites.CONTAINER_HOTSEAT)             </span>
<span class="8078550196904492215" onmouseenter="enter('8078550196904492215');" onmouseout="out('8078550196904492215');" style="">1628                                 [(int) item.screenId][0]);                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1629                             return false;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1630                     } else {                                                                             </span>
<span class="774944626646586019" onmouseenter="enter('774944626646586019');" onmouseout="out('774944626646586019');" style="">1631                         hotseatItems[(int) item.screenId][0] = item;                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1632                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1633                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1634                 } else {                                                                                 </span>
<span class="7358314474516221203" onmouseenter="enter('7358314474516221203');" onmouseout="out('7358314474516221203');" style="">1635                     final ItemInfo[][] items = new ItemInfo[(int) grid.numHotseatIcons][1];              </span>
<span class="-9070162012537345427" onmouseenter="enter('-9070162012537345427');" onmouseout="out('-9070162012537345427');" style="">1636                     items[(int) item.screenId][0] = item;                                                </span>
<span class="-8158366679753027651" onmouseenter="enter('-8158366679753027651');" onmouseout="out('-8158366679753027651');" style="">1637                     occupied.put((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT, items);            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1638                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1639                 }                                                                                        </span>
<span class="-303831338253138618" onmouseenter="enter('-303831338253138618');" onmouseout="out('-303831338253138618');" style="">1640             } else if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) {                 </span>
<span class="2023083187637338837" onmouseenter="enter('2023083187637338837');" onmouseout="out('2023083187637338837');" style="">1641                 // Skip further checking if it is not the hotseat or workspace container                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1642                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1643             }                                                                                            </span>
<span  style="">1644                                                                                                          </span>
<span class="4900594953050523912" onmouseenter="enter('4900594953050523912');" onmouseout="out('4900594953050523912');" style="">1645             if (!occupied.containsKey(item.screenId)) {                                                  </span>
<span class="4145930087010840378" onmouseenter="enter('4145930087010840378');" onmouseout="out('4145930087010840378');" style="">1646                 ItemInfo[][] items = new ItemInfo[countX + 1][countY + 1];                               </span>
<span class="1227421706021504577" onmouseenter="enter('1227421706021504577');" onmouseout="out('1227421706021504577');" style="">1647                 occupied.put(item.screenId, items);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1648             }                                                                                            </span>
<span  style="">1649                                                                                                          </span>
<span class="1896300602190974138" onmouseenter="enter('1896300602190974138');" onmouseout="out('1896300602190974138');" style="">1650             final ItemInfo[][] screens = occupied.get(item.screenId);                                    </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">1651             if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                        </span>
<span class="-5368423457014206987" onmouseenter="enter('-5368423457014206987');" onmouseout="out('-5368423457014206987');" style="">1652                     item.cellX &lt; 0 || item.cellY &lt; 0 ||                                                  </span>
<span class="-4742334469567284144" onmouseenter="enter('-4742334469567284144');" onmouseout="out('-4742334469567284144');" style="">1653                     item.cellX + item.spanX &gt; countX || item.cellY + item.spanY &gt; countY) {              </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1654                 Log.e(TAG, &quot;Error loading shortcut &quot; + item                                              </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1655                         + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                    </span>
<span class="6594976635866090975" onmouseenter="enter('6594976635866090975');" onmouseout="out('6594976635866090975');" style="">1656                         + item.cellX + &quot;,&quot; + item.cellY                                                  </span>
<span class="7810872796641797088" onmouseenter="enter('7810872796641797088');" onmouseout="out('7810872796641797088');" style="">1657                         + &quot;) out of screen bounds ( &quot; + countX + &quot;x&quot; + countY + &quot;)&quot;);                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1658                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1659             }                                                                                            </span>
<span  style="">1660                                                                                                          </span>
<span class="-5156128896960485993" onmouseenter="enter('-5156128896960485993');" onmouseout="out('-5156128896960485993');" style="">1661             // Check if any workspace icons overlap with each other                                      </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1662             for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                 </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1663                 for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                             </span>
<span class="-6569355555223387047" onmouseenter="enter('-6569355555223387047');" onmouseout="out('-6569355555223387047');" style="">1664                     if (screens[x][y] != null) {                                                         </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1665                         Log.e(TAG, &quot;Error loading shortcut &quot; + item                                      </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1666                             + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                </span>
<span class="6817243246217428495" onmouseenter="enter('6817243246217428495');" onmouseout="out('6817243246217428495');" style="">1667                             + x + &quot;,&quot; + y                                                                </span>
<span class="5682441617128381013" onmouseenter="enter('5682441617128381013');" onmouseout="out('5682441617128381013');" style="">1668                             + &quot;) occupied by &quot;                                                           </span>
<span class="-1033476021967432581" onmouseenter="enter('-1033476021967432581');" onmouseout="out('-1033476021967432581');" style="">1669                             + screens[x][y]);                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1670                         return false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1671                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1672                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1673             }                                                                                            </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1674             for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                 </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1675                 for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                             </span>
<span class="4088526838574697064" onmouseenter="enter('4088526838574697064');" onmouseout="out('4088526838574697064');" style="">1676                     screens[x][y] = item;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1677                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1678             }                                                                                            </span>
<span  style="">1679                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1680             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1681         }                                                                                                </span>
<span  style="">1682                                                                                                          </span>
<span class="-7185136003210132674" onmouseenter="enter('-7185136003210132674');" onmouseout="out('-7185136003210132674');" style="">1683         /** Clears all the sBg data structures */                                                        </span>
<span class="1801132344752176061" onmouseenter="enter('1801132344752176061');" onmouseout="out('1801132344752176061');" style="">1684         private void clearSBgDataStructures() {                                                          </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1685             synchronized (sBgLock) {                                                                     </span>
<span class="-7129433888089157992" onmouseenter="enter('-7129433888089157992');" onmouseout="out('-7129433888089157992');" style="">1686                 sBgWorkspaceItems.clear();                                                               </span>
<span class="5052861278193385910" onmouseenter="enter('5052861278193385910');" onmouseout="out('5052861278193385910');" style="">1687                 sBgAppWidgets.clear();                                                                   </span>
<span class="3133219754838100126" onmouseenter="enter('3133219754838100126');" onmouseout="out('3133219754838100126');" style="">1688                 sBgFolders.clear();                                                                      </span>
<span class="-8505695193908377238" onmouseenter="enter('-8505695193908377238');" onmouseout="out('-8505695193908377238');" style="">1689                 sBgItemsIdMap.clear();                                                                   </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1690                 sBgDbIconCache.clear();                                                                  </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1691                 sBgWorkspaceScreens.clear();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1692             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1693         }                                                                                                </span>
<span  style="">1694                                                                                                          </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1695         /** Returns whether this is an upgrade path */                                                   </span>
<span class="-134197683999376379" onmouseenter="enter('-134197683999376379');" onmouseout="out('-134197683999376379');" style="">1696         private boolean loadWorkspace() {                                                                </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1697             // Log to disk                                                                               </span>
<span class="-1716174542198683127" onmouseenter="enter('-1716174542198683127');" onmouseout="out('-1716174542198683127');" style="">1698             Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspace()&quot;, true);                                </span>
<span class="7045952659913516150" onmouseenter="enter('7045952659913516150');" onmouseout="out('7045952659913516150');" style="">1699             final long t = (DEBUG_LOADERS) ? SystemClock.uptimeMillis() : 0;                             </span>
<span class="-7540672363138308565" onmouseenter="enter('-7540672363138308565');" onmouseout="out('-7540672363138308565');" style="">1700             final Context context = mContext;                                                            </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1701             final ContentResolver contentResolver = context.getContentResolver();                        </span>
<span class="-2531056455834918617" onmouseenter="enter('-2531056455834918617');" onmouseout="out('-2531056455834918617');" style="">1702             final PackageManager manager = context.getPackageManager();                                  </span>
<span class="9164904653123292763" onmouseenter="enter('9164904653123292763');" onmouseout="out('9164904653123292763');" style="">1703             final AppWidgetManager widgets = AppWidgetManager.getInstance(context);                      </span>
<span class="-100432956626051671" onmouseenter="enter('-100432956626051671');" onmouseout="out('-100432956626051671');" style="">1704             final boolean isSafeMode = manager.isSafeMode();                                             </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1705             LauncherAppState app = LauncherAppState.getInstance();                                       </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1706             DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                </span>
<span class="-289744965915874427" onmouseenter="enter('-289744965915874427');" onmouseout="out('-289744965915874427');" style="">1707             int countX = ((int) (grid.numColumns));                                                      </span>
<span class="-3566146670768165206" onmouseenter="enter('-3566146670768165206');" onmouseout="out('-3566146670768165206');" style="">1708             int countY = ((int) (grid.numRows));                                                         </span>
<span class="4685154999280536885" onmouseenter="enter('4685154999280536885');" onmouseout="out('4685154999280536885');" style="">1709             if ((mFlags &amp; LOADER_FLAG_CLEAR_WORKSPACE) != 0) {                                           </span>
<span class="1874866184467615023" onmouseenter="enter('1874866184467615023');" onmouseout="out('1874866184467615023');" style="">1710                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: resetting launcher database&quot;, true);            </span>
<span class="7130003991883838563" onmouseenter="enter('7130003991883838563');" onmouseout="out('7130003991883838563');" style="">1711                 LauncherAppState.getLauncherProvider().deleteDatabase();                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1712             }                                                                                            </span>
<span class="1786245758308608184" onmouseenter="enter('1786245758308608184');" onmouseout="out('1786245758308608184');" style="">1713             if ((mFlags &amp; LOADER_FLAG_MIGRATE_SHORTCUTS) != 0) {                                         </span>
<span class="2622187273755861990" onmouseenter="enter('2622187273755861990');" onmouseout="out('2622187273755861990');" style="">1714                 // append the user&#x27;s Launcher2 shortcuts                                                 </span>
<span class="7991450201866933364" onmouseenter="enter('7991450201866933364');" onmouseout="out('7991450201866933364');" style="">1715                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: migrating from launcher2&quot;, true);               </span>
<span class="-4928149528895358870" onmouseenter="enter('-4928149528895358870');" onmouseout="out('-4928149528895358870');" style="">1716                 LauncherAppState.getLauncherProvider().migrateLauncher2Shortcuts();                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1717             } else {                                                                                     </span>
<span class="-6772917437561183819" onmouseenter="enter('-6772917437561183819');" onmouseout="out('-6772917437561183819');" style="">1718                 // Make sure the default workspace is loaded                                             </span>
<span class="3161347234478650527" onmouseenter="enter('3161347234478650527');" onmouseout="out('3161347234478650527');" style="">1719                 Launcher.addDumpLog(TAG, &quot;loadWorkspace: loading default favorites&quot;, false);             </span>
<span class="8096870978202898311" onmouseenter="enter('8096870978202898311');" onmouseout="out('8096870978202898311');" style="">1720                 LauncherAppState.getLauncherProvider().loadDefaultFavoritesIfNecessary(0);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1721             }                                                                                            </span>
<span class="-8222313360488017709" onmouseenter="enter('-8222313360488017709');" onmouseout="out('-8222313360488017709');" style="">1722             // Check if we need to do any upgrade-path logic                                             </span>
<span class="-995379543715394793" onmouseenter="enter('-995379543715394793');" onmouseout="out('-995379543715394793');" style="">1723             // (Includes having just imported default favorites)                                         </span>
<span class="-2313666044770114963" onmouseenter="enter('-2313666044770114963');" onmouseout="out('-2313666044770114963');" style="">1724             boolean loadedOldDb = LauncherAppState.getLauncherProvider().justLoadedOldDb();              </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1725             // Log to disk                                                                               </span>
<span class="4915608034810943289" onmouseenter="enter('4915608034810943289');" onmouseout="out('4915608034810943289');" style="">1726             Launcher.addDumpLog(TAG, &quot;11683562 -   loadedOldDb: &quot; + loadedOldDb, true);                  </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style="">1727             synchronized(sBgLock) {                                                                      </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">1728                 clearSBgDataStructures();                                                                </span>
<span class="4830013596372552761" onmouseenter="enter('4830013596372552761');" onmouseout="out('4830013596372552761');" style="">1729                 final ArrayList&lt;Long&gt; itemsToRemove = new ArrayList&lt;Long&gt;();                             </span>
<span class="-771425693233218078" onmouseenter="enter('-771425693233218078');" onmouseout="out('-771425693233218078');" style="">1730                 final ArrayList&lt;Long&gt; restoredRows = new ArrayList&lt;Long&gt;();                              </span>
<span class="1337367669825309510" onmouseenter="enter('1337367669825309510');" onmouseout="out('1337367669825309510');" style="">1731                 final Uri contentUri = LauncherSettings.Favorites.CONTENT_URI;                           </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1732                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="-2958802293590769992" onmouseenter="enter('-2958802293590769992');" onmouseout="out('-2958802293590769992');" style="">1733                     Log.d(TAG, &quot;loading model from &quot; + contentUri);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1734                 }                                                                                        </span>
<span class="4124323585340312806" onmouseenter="enter('4124323585340312806');" onmouseout="out('4124323585340312806');" style="">1735                 final Cursor c = contentResolver.query(contentUri, null, null, null, null);              </span>
<span class="-6846195559440228008" onmouseenter="enter('-6846195559440228008');" onmouseout="out('-6846195559440228008');" style="">1736                 // +1 for the hotseat (it can be larger than the workspace)                              </span>
<span class="-6570434370371395868" onmouseenter="enter('-6570434370371395868');" onmouseout="out('-6570434370371395868');" style="">1737                 // Load workspace in reverse order to ensure that latest items are loaded first (and     </span>
<span class="-2496742724026288329" onmouseenter="enter('-2496742724026288329');" onmouseout="out('-2496742724026288329');" style="">1738                 // before any earlier duplicates)                                                        </span>
<span class="-575539041300461201" onmouseenter="enter('-575539041300461201');" onmouseout="out('-575539041300461201');" style="">1739                 final HashMap&lt;Long, ItemInfo[][]&gt; occupied = new HashMap&lt;Long, ItemInfo[][]&gt;();          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1740                 try {                                                                                    </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style="">1741                     final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);         </span>
<span class="-4033402896828551783" onmouseenter="enter('-4033402896828551783');" onmouseout="out('-4033402896828551783');" style="">1742                     final int intentIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.INTENT);  </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style="">1743                     final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);    </span>
<span class="2476259323357554799" onmouseenter="enter('2476259323357554799');" onmouseout="out('2476259323357554799');" style=""><abbr title="1744                     final int iconTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_TYPE);">1744                     final int iconTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_TYP</abbr></span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style="">1745                     final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);      </span>
<span class="-8681284292868403609" onmouseenter="enter('-8681284292868403609');" onmouseout="out('-8681284292868403609');" style=""><abbr title="1746                     final int iconPackageIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_PACKAGE);">1746                     final int iconPackageIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_</abbr></span>
<span class="6748803854718242440" onmouseenter="enter('6748803854718242440');" onmouseout="out('6748803854718242440');" style=""><abbr title="1747                     final int iconResourceIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_RESOURCE);">1747                     final int iconResourceIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON</abbr></span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""><abbr title="1748                     final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);">1748                     final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAIN</abbr></span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""><abbr title="1749                     final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);">1749                     final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYP</abbr></span>
<span class="-7910612339850750582" onmouseenter="enter('-7910612339850750582');" onmouseout="out('-7910612339850750582');" style=""><abbr title="1750                     final int appWidgetIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.APPWIDGET_ID);">1750                     final int appWidgetIdIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.APPWI</abbr></span>
<span class="5684730079208643460" onmouseenter="enter('5684730079208643460');" onmouseout="out('5684730079208643460');" style=""><abbr title="1751                     final int appWidgetProviderIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.APPWIDGET_PROVIDER);">1751                     final int appWidgetProviderIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites</abbr></span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style="">1752                     final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);  </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style="">1753                     final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);    </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style="">1754                     final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);    </span>
<span class="-802963670489258937" onmouseenter="enter('-802963670489258937');" onmouseout="out('-802963670489258937');" style="">1755                     final int spanXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANX);    </span>
<span class="6925125615824777875" onmouseenter="enter('6925125615824777875');" onmouseout="out('6925125615824777875');" style="">1756                     final int spanYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANY);    </span>
<span class="-4872462981477900111" onmouseenter="enter('-4872462981477900111');" onmouseout="out('-4872462981477900111');" style=""><abbr title="1757                     final int restoredIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.RESTORED);">1757                     final int restoredIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.RESTORED</abbr></span>
<span class="8821443223384543589" onmouseenter="enter('8821443223384543589');" onmouseout="out('8821443223384543589');" style="">1758                     // final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);     </span>
<span class="-3025030642714046063" onmouseenter="enter('-3025030642714046063');" onmouseout="out('-3025030642714046063');" style="">1759                     // final int displayModeIndex = c.getColumnIndexOrThrow(                             </span>
<span class="-63072945342271320" onmouseenter="enter('-63072945342271320');" onmouseout="out('-63072945342271320');" style="">1760                     // LauncherSettings.Favorites.DISPLAY_MODE);                                         </span>
<span class="-6687913296565100881" onmouseenter="enter('-6687913296565100881');" onmouseout="out('-6687913296565100881');" style="">1761                     ShortcutInfo info;                                                                   </span>
<span class="-4294155297126257121" onmouseenter="enter('-4294155297126257121');" onmouseout="out('-4294155297126257121');" style="">1762                     String intentDescription;                                                            </span>
<span class="1875374791140575019" onmouseenter="enter('1875374791140575019');" onmouseout="out('1875374791140575019');" style="">1763                     LauncherAppWidgetInfo appWidgetInfo;                                                 </span>
<span class="-7299509265635558160" onmouseenter="enter('-7299509265635558160');" onmouseout="out('-7299509265635558160');" style="">1764                     int container;                                                                       </span>
<span class="3268793718289878117" onmouseenter="enter('3268793718289878117');" onmouseout="out('3268793718289878117');" style="">1765                     long id;                                                                             </span>
<span class="-7461708883398711413" onmouseenter="enter('-7461708883398711413');" onmouseout="out('-7461708883398711413');" style="">1766                     Intent intent;                                                                       </span>
<span class="1530988389269762839" onmouseenter="enter('1530988389269762839');" onmouseout="out('1530988389269762839');" style="">1767                     while ((!mStopped) &amp;&amp; c.moveToNext()) {                                              </span>
<span class="-3056870665611820276" onmouseenter="enter('-3056870665611820276');" onmouseout="out('-3056870665611820276');" style="">1768                         AtomicBoolean deleteOnInvalidPlacement = new AtomicBoolean(false);               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1769                         try {                                                                            </span>
<span class="-4443967809239824632" onmouseenter="enter('-4443967809239824632');" onmouseout="out('-4443967809239824632');" style="">1770                             int itemType = c.getInt(itemTypeIndex);                                      </span>
<span class="7426878920983746504" onmouseenter="enter('7426878920983746504');" onmouseout="out('7426878920983746504');" style="">1771                             boolean restored = 0 != c.getInt(restoredIndex);                             </span>
<span class="-5665081285487591411" onmouseenter="enter('-5665081285487591411');" onmouseout="out('-5665081285487591411');" style="">1772                             switch (itemType) {                                                          </span>
<span class="2051083265990103278" onmouseenter="enter('2051083265990103278');" onmouseout="out('2051083265990103278');" style="">1773                                 case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION :                  </span>
<span class="7475610212167087433" onmouseenter="enter('7475610212167087433');" onmouseout="out('7475610212167087433');" style="">1774                                 case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT :                     </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1775                                     id = c.getLong(idIndex);                                             </span>
<span class="8199742400390876563" onmouseenter="enter('8199742400390876563');" onmouseout="out('8199742400390876563');" style="">1776                                     intentDescription = c.getString(intentIndex);                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1777                                     try {                                                                </span>
<span class="-1059471947143689601" onmouseenter="enter('-1059471947143689601');" onmouseout="out('-1059471947143689601');" style="">1778                                         intent = Intent.parseUri(intentDescription, 0);                  </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style="">1779                                         ComponentName cn = intent.getComponent();                        </span>
<span class="-476635864515569549" onmouseenter="enter('-476635864515569549');" onmouseout="out('-476635864515569549');" style="">1780                                         if ((cn != null) &amp;&amp; (!isValidPackageComponent(manager, cn))) {   </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1781                                             if (restored) {                                              </span>
<span class="-4075692845887634995" onmouseenter="enter('-4075692845887634995');" onmouseout="out('-4075692845887634995');" style="">1782                                                 // might be installed later                              </span>
<span class="-6838802539582446987" onmouseenter="enter('-6838802539582446987');" onmouseout="out('-6838802539582446987');" style=""><abbr title="1783                                                 Launcher.addDumpLog(TAG, &quot;package not yet restored: &quot; + cn, true);">1783                                                 Launcher.addDumpLog(TAG, &quot;package not yet restored: &quot; + c</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1784                                             } else {                                                     </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">1785                                                 if (!mAppsCanBeOnRemoveableStorage) {                    </span>
<span class="-1319340498640723993" onmouseenter="enter('-1319340498640723993');" onmouseout="out('-1319340498640723993');" style="">1786                                                     // Log the invalid package, and remove it            </span>
<span class="-8862555937828848407" onmouseenter="enter('-8862555937828848407');" onmouseout="out('-8862555937828848407');" style=""><abbr title="1787                                                     Launcher.addDumpLog(TAG, &quot;Invalid package removed: &quot; + cn, true);">1787                                                     Launcher.addDumpLog(TAG, &quot;Invalid package removed: &quot; </abbr></span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1788                                                     itemsToRemove.add(id);                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1789                                                 } else {                                                 </span>
<span class="1135766729630553535" onmouseenter="enter('1135766729630553535');" onmouseout="out('1135766729630553535');" style="">1790                                                     // If apps can be on external storage, then we just  </span>
<span class="5840340868837727294" onmouseenter="enter('5840340868837727294');" onmouseout="out('5840340868837727294');" style="">1791                                                     // leave them for the user to remove (maybe add      </span>
<span class="1838795663890338817" onmouseenter="enter('1838795663890338817');" onmouseout="out('1838795663890338817');" style="">1792                                                     // visual treatment to it)                           </span>
<span class="-4351878002328689616" onmouseenter="enter('-4351878002328689616');" onmouseout="out('-4351878002328689616');" style=""><abbr title="1793                                                     Launcher.addDumpLog(TAG, &quot;Invalid package found: &quot; + cn, true);">1793                                                     Launcher.addDumpLog(TAG, &quot;Invalid package found: &quot; + </abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1794                                                 }                                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1795                                                 continue;                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1796                                             }                                                            </span>
<span class="8327580054957946681" onmouseenter="enter('8327580054957946681');" onmouseout="out('8327580054957946681');" style="">1797                                         } else if (restored) {                                           </span>
<span class="-9024381775763282363" onmouseenter="enter('-9024381775763282363');" onmouseout="out('-9024381775763282363');" style="">1798                                             // no special handling necessary for this restored item      </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">1799                                             restoredRows.add(id);                                        </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">1800                                             restored = false;                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1801                                         }                                                                </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">1802                                     } catch (URISyntaxException e) {                                     </span>
<span class="-4515130284142080718" onmouseenter="enter('-4515130284142080718');" onmouseout="out('-4515130284142080718');" style=""><abbr title="1803                                         Launcher.addDumpLog(TAG, &quot;Invalid uri: &quot; + intentDescription, true);">1803                                         Launcher.addDumpLog(TAG, &quot;Invalid uri: &quot; + intentDescription, tru</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1804                                         continue;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1805                                     }                                                                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1806                                     if (restored) {                                                      </span>
<span class="1357336281275541127" onmouseenter="enter('1357336281275541127');" onmouseout="out('1357336281275541127');" style=""><abbr title="1807                                         Launcher.addDumpLog(TAG, &quot;constructing info for partially restored package&quot;, true);">1807                                         Launcher.addDumpLog(TAG, &quot;constructing info for partially restore</abbr></span>
<span class="2209760928415101992" onmouseenter="enter('2209760928415101992');" onmouseout="out('2209760928415101992');" style="">1808                                         info = getRestoredItemInfo(c, titleIndex);                       </span>
<span class="1789530273111871261" onmouseenter="enter('1789530273111871261');" onmouseout="out('1789530273111871261');" style="">1809                                         intent = getRestoredItemIntent(c, context, intent);              </span>
<span class="2236923880514106756" onmouseenter="enter('2236923880514106756');" onmouseout="out('2236923880514106756');" style=""><abbr title="1810                                     } else if (itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) {">1810                                     } else if (itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATI</abbr></span>
<span class="-9003506923569590457" onmouseenter="enter('-9003506923569590457');" onmouseout="out('-9003506923569590457');" style=""><abbr title="1811                                         info = getShortcutInfo(manager, intent, context, c, iconIndex, titleIndex, mLabelCache);">1811                                         info = getShortcutInfo(manager, intent, context, c, iconIndex, ti</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1812                                     } else {                                                             </span>
<span class="-5390602608011791340" onmouseenter="enter('-5390602608011791340');" onmouseout="out('-5390602608011791340');" style=""><abbr title="1813                                         info = getShortcutInfo(c, context, iconTypeIndex, iconPackageIndex, iconResourceIndex, iconIndex, titleIndex);">1813                                         info = getShortcutInfo(c, context, iconTypeIndex, iconPackageInde</abbr></span>
<span class="8787316375412349400" onmouseenter="enter('8787316375412349400');" onmouseout="out('8787316375412349400');" style="">1814                                         // App shortcuts that used to be automatically added to Launcher </span>
<span class="4423348586531939182" onmouseenter="enter('4423348586531939182');" onmouseout="out('4423348586531939182');" style="">1815                                         // didn&#x27;t always have the correct intent flags set, so do that   </span>
<span class="906874877447394391" onmouseenter="enter('906874877447394391');" onmouseout="out('906874877447394391');" style="">1816                                         // here                                                          </span>
<span class="-3656991395984310113" onmouseenter="enter('-3656991395984310113');" onmouseout="out('-3656991395984310113');" style=""><abbr title="1817                                         if ((((intent.getAction() != null) &amp;&amp; (intent.getCategories() != null)) &amp;&amp; intent.getAction().equals(Intent.ACTION_MAIN)) &amp;&amp; intent.getCategories().contains(Intent.CATEGORY_LAUNCHER)) {">1817                                         if ((((intent.getAction() != null) &amp;&amp; (intent.getCategories() != </abbr></span>
<span class="-2343040772585959990" onmouseenter="enter('-2343040772585959990');" onmouseout="out('-2343040772585959990');" style=""><abbr title="1818                                             intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);">1818                                             intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_A</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1819                                         }                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1820                                     }                                                                    </span>
<span class="-1845287058566655413" onmouseenter="enter('-1845287058566655413');" onmouseout="out('-1845287058566655413');" style="">1821                                     if (info != null) {                                                  </span>
<span class="-7372776081672801393" onmouseenter="enter('-7372776081672801393');" onmouseout="out('-7372776081672801393');" style="">1822                                         info.id = id;                                                    </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">1823                                         info.intent = intent;                                            </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">1824                                         container = c.getInt(containerIndex);                            </span>
<span class="5031599210604047094" onmouseenter="enter('5031599210604047094');" onmouseout="out('5031599210604047094');" style="">1825                                         info.container = container;                                      </span>
<span class="8385513109144822406" onmouseenter="enter('8385513109144822406');" onmouseout="out('8385513109144822406');" style="">1826                                         info.screenId = c.getInt(screenIndex);                           </span>
<span class="8733666235794055799" onmouseenter="enter('8733666235794055799');" onmouseout="out('8733666235794055799');" style="">1827                                         info.cellX = c.getInt(cellXIndex);                               </span>
<span class="4988345900238836581" onmouseenter="enter('4988345900238836581');" onmouseout="out('4988345900238836581');" style="">1828                                         info.cellY = c.getInt(cellYIndex);                               </span>
<span class="6314319831626461685" onmouseenter="enter('6314319831626461685');" onmouseout="out('6314319831626461685');" style="">1829                                         info.spanX = 1;                                                  </span>
<span class="-7635592400178984643" onmouseenter="enter('-7635592400178984643');" onmouseout="out('-7635592400178984643');" style="">1830                                         info.spanY = 1;                                                  </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">1831                                         // check &amp; update map of what&#x27;s occupied                         </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">1832                                         deleteOnInvalidPlacement.set(false);                             </span>
<span class="8488570468437690238" onmouseenter="enter('8488570468437690238');" onmouseout="out('8488570468437690238');" style=""><abbr title="1833                                         if (!checkItemPlacement(occupied, info, deleteOnInvalidPlacement)) {">1833                                         if (!checkItemPlacement(occupied, info, deleteOnInvalidPlacement)</abbr></span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">1834                                             if (deleteOnInvalidPlacement.get()) {                        </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1835                                                 itemsToRemove.add(id);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1836                                             }                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1837                                             break;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1838                                         }                                                                </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">1839                                         switch (container) {                                             </span>
<span class="-243737165652948931" onmouseenter="enter('-243737165652948931');" onmouseout="out('-243737165652948931');" style="">1840                                             case LauncherSettings.Favorites.CONTAINER_DESKTOP :          </span>
<span class="8878956388033266606" onmouseenter="enter('8878956388033266606');" onmouseout="out('8878956388033266606');" style="">1841                                             case LauncherSettings.Favorites.CONTAINER_HOTSEAT :          </span>
<span class="-3665356032627215639" onmouseenter="enter('-3665356032627215639');" onmouseout="out('-3665356032627215639');" style="">1842                                                 sBgWorkspaceItems.add(info);                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1843                                                 break;                                                   </span>
<span class="3050734735710613783" onmouseenter="enter('3050734735710613783');" onmouseout="out('3050734735710613783');" style="">1844                                             default :                                                    </span>
<span class="3928258456344537563" onmouseenter="enter('3928258456344537563');" onmouseout="out('3928258456344537563');" style="">1845                                                 // Item is in a user folder                              </span>
<span class="2628004221817599267" onmouseenter="enter('2628004221817599267');" onmouseout="out('2628004221817599267');" style=""><abbr title="1846                                                 FolderInfo folderInfo = findOrMakeFolder(sBgFolders, container);">1846                                                 FolderInfo folderInfo = findOrMakeFolder(sBgFolders, cont</abbr></span>
<span class="4210631970925384436" onmouseenter="enter('4210631970925384436');" onmouseout="out('4210631970925384436');" style="">1847                                                 folderInfo.add(info);                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1848                                                 break;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1849                                         }                                                                </span>
<span class="-3593974647070903374" onmouseenter="enter('-3593974647070903374');" onmouseout="out('-3593974647070903374');" style="">1850                                         sBgItemsIdMap.put(info.id, info);                                </span>
<span class="-8292894264257510493" onmouseenter="enter('-8292894264257510493');" onmouseout="out('-8292894264257510493');" style="">1851                                         // now that we&#x27;ve loaded everthing re-save it with the           </span>
<span class="-1917607236140731811" onmouseenter="enter('-1917607236140731811');" onmouseout="out('-1917607236140731811');" style="">1852                                         // icon in case it disappears somehow.                           </span>
<span class="-3056528193758781985" onmouseenter="enter('-3056528193758781985');" onmouseout="out('-3056528193758781985');" style="">1853                                         queueIconToBeChecked(sBgDbIconCache, info, c, iconIndex);        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1854                                     } else {                                                             </span>
<span class="477637279977673890" onmouseenter="enter('477637279977673890');" onmouseout="out('477637279977673890');" style="">1855                                         throw new RuntimeException(&quot;Unexpected null ShortcutInfo&quot;);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1856                                     }                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1857                                     break;                                                               </span>
<span class="-8875317450551009164" onmouseenter="enter('-8875317450551009164');" onmouseout="out('-8875317450551009164');" style="">1858                                 case LauncherSettings.Favorites.ITEM_TYPE_FOLDER :                       </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1859                                     id = c.getLong(idIndex);                                             </span>
<span class="-711784092642716417" onmouseenter="enter('-711784092642716417');" onmouseout="out('-711784092642716417');" style="">1860                                     FolderInfo folderInfo = findOrMakeFolder(sBgFolders, id);            </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style="">1861                                     folderInfo.title = c.getString(titleIndex);                          </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style="">1862                                     folderInfo.id = id;                                                  </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">1863                                     container = c.getInt(containerIndex);                                </span>
<span class="-7029361904102133577" onmouseenter="enter('-7029361904102133577');" onmouseout="out('-7029361904102133577');" style="">1864                                     folderInfo.container = container;                                    </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style="">1865                                     folderInfo.screenId = c.getInt(screenIndex);                         </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style="">1866                                     folderInfo.cellX = c.getInt(cellXIndex);                             </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style="">1867                                     folderInfo.cellY = c.getInt(cellYIndex);                             </span>
<span class="5610283855861400391" onmouseenter="enter('5610283855861400391');" onmouseout="out('5610283855861400391');" style="">1868                                     folderInfo.spanX = 1;                                                </span>
<span class="-3495026741287589829" onmouseenter="enter('-3495026741287589829');" onmouseout="out('-3495026741287589829');" style="">1869                                     folderInfo.spanY = 1;                                                </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">1870                                     // check &amp; update map of what&#x27;s occupied                             </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">1871                                     deleteOnInvalidPlacement.set(false);                                 </span>
<span class="-1509179358414071002" onmouseenter="enter('-1509179358414071002');" onmouseout="out('-1509179358414071002');" style=""><abbr title="1872                                     if (!checkItemPlacement(occupied, folderInfo, deleteOnInvalidPlacement)) {">1872                                     if (!checkItemPlacement(occupied, folderInfo, deleteOnInvalidPlacemen</abbr></span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">1873                                         if (deleteOnInvalidPlacement.get()) {                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1874                                             itemsToRemove.add(id);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1875                                         }                                                                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1876                                         break;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1877                                     }                                                                    </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">1878                                     switch (container) {                                                 </span>
<span class="-243737165652948931" onmouseenter="enter('-243737165652948931');" onmouseout="out('-243737165652948931');" style="">1879                                         case LauncherSettings.Favorites.CONTAINER_DESKTOP :              </span>
<span class="8878956388033266606" onmouseenter="enter('8878956388033266606');" onmouseout="out('8878956388033266606');" style="">1880                                         case LauncherSettings.Favorites.CONTAINER_HOTSEAT :              </span>
<span class="-8699935089398023363" onmouseenter="enter('-8699935089398023363');" onmouseout="out('-8699935089398023363');" style="">1881                                             sBgWorkspaceItems.add(folderInfo);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1882                                             break;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1883                                     }                                                                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1884                                     if (restored) {                                                      </span>
<span class="-4442362781295313201" onmouseenter="enter('-4442362781295313201');" onmouseout="out('-4442362781295313201');" style="">1885                                         // no special handling required for restored folders             </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">1886                                         restoredRows.add(id);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1887                                     }                                                                    </span>
<span class="-3375208674862622715" onmouseenter="enter('-3375208674862622715');" onmouseout="out('-3375208674862622715');" style="">1888                                     sBgItemsIdMap.put(folderInfo.id, folderInfo);                        </span>
<span class="642717865586237287" onmouseenter="enter('642717865586237287');" onmouseout="out('642717865586237287');" style="">1889                                     sBgFolders.put(folderInfo.id, folderInfo);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1890                                     break;                                                               </span>
<span class="-572090049804539709" onmouseenter="enter('-572090049804539709');" onmouseout="out('-572090049804539709');" style="">1891                                 case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET :                    </span>
<span class="-7956270215965694003" onmouseenter="enter('-7956270215965694003');" onmouseout="out('-7956270215965694003');" style="">1892                                     // Read all Launcher-specific widget details                         </span>
<span class="-1812352292626846958" onmouseenter="enter('-1812352292626846958');" onmouseout="out('-1812352292626846958');" style="">1893                                     int appWidgetId = c.getInt(appWidgetIdIndex);                        </span>
<span class="7731617805561144619" onmouseenter="enter('7731617805561144619');" onmouseout="out('7731617805561144619');" style="">1894                                     String savedProvider = c.getString(appWidgetProviderIndex);          </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1895                                     id = c.getLong(idIndex);                                             </span>
<span class="-8150113513496297003" onmouseenter="enter('-8150113513496297003');" onmouseout="out('-8150113513496297003');" style=""><abbr title="1896                                     final AppWidgetProviderInfo provider = widgets.getAppWidgetInfo(appWidgetId);">1896                                     final AppWidgetProviderInfo provider = widgets.getAppWidgetInfo(appWi</abbr></span>
<span class="5040854488581423149" onmouseenter="enter('5040854488581423149');" onmouseout="out('5040854488581423149');" style=""><abbr title="1897                                     if ((!isSafeMode) &amp;&amp; (((provider == null) || (provider.provider == null)) || (provider.provider.getPackageName() == null))) {">1897                                     if ((!isSafeMode) &amp;&amp; (((provider == null) || (provider.provider == nu</abbr></span>
<span class="7966693457990115732" onmouseenter="enter('7966693457990115732');" onmouseout="out('7966693457990115732');" style=""><abbr title="1898                                         String log = ((&quot;Deleting widget that isn&#x27;t installed anymore: id=&quot; + id) + &quot; appWidgetId=&quot;) + appWidgetId;">1898                                         String log = ((&quot;Deleting widget that isn&#x27;t installed anymore: id=</abbr></span>
<span class="-1161653447976501517" onmouseenter="enter('-1161653447976501517');" onmouseout="out('-1161653447976501517');" style="">1899                                         Log.e(TAG, log);                                                 </span>
<span class="-8769286334876902652" onmouseenter="enter('-8769286334876902652');" onmouseout="out('-8769286334876902652');" style="">1900                                         Launcher.addDumpLog(TAG, log, false);                            </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1901                                         itemsToRemove.add(id);                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1902                                     } else {                                                             </span>
<span class="8729577948298719872" onmouseenter="enter('8729577948298719872');" onmouseout="out('8729577948298719872');" style=""><abbr title="1903                                         appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId, provider.provider);">1903                                         appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId, provider.p</abbr></span>
<span class="-3490214853915757695" onmouseenter="enter('-3490214853915757695');" onmouseout="out('-3490214853915757695');" style="">1904                                         appWidgetInfo.id = id;                                           </span>
<span class="-299823112742514494" onmouseenter="enter('-299823112742514494');" onmouseout="out('-299823112742514494');" style="">1905                                         appWidgetInfo.screenId = c.getInt(screenIndex);                  </span>
<span class="-3031374252236192886" onmouseenter="enter('-3031374252236192886');" onmouseout="out('-3031374252236192886');" style="">1906                                         appWidgetInfo.cellX = c.getInt(cellXIndex);                      </span>
<span class="-6373958662014470902" onmouseenter="enter('-6373958662014470902');" onmouseout="out('-6373958662014470902');" style="">1907                                         appWidgetInfo.cellY = c.getInt(cellYIndex);                      </span>
<span class="-1172974300892817728" onmouseenter="enter('-1172974300892817728');" onmouseout="out('-1172974300892817728');" style="">1908                                         appWidgetInfo.spanX = c.getInt(spanXIndex);                      </span>
<span class="948367348399442562" onmouseenter="enter('948367348399442562');" onmouseout="out('948367348399442562');" style="">1909                                         appWidgetInfo.spanY = c.getInt(spanYIndex);                      </span>
<span class="-5791068135067534357" onmouseenter="enter('-5791068135067534357');" onmouseout="out('-5791068135067534357');" style="">1910                                         int[] minSpan = Launcher.getMinSpanForWidget(context, provider); </span>
<span class="663337698221632344" onmouseenter="enter('663337698221632344');" onmouseout="out('663337698221632344');" style="">1911                                         appWidgetInfo.minSpanX = minSpan[0];                             </span>
<span class="-1876557735779698161" onmouseenter="enter('-1876557735779698161');" onmouseout="out('-1876557735779698161');" style="">1912                                         appWidgetInfo.minSpanY = minSpan[1];                             </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">1913                                         container = c.getInt(containerIndex);                            </span>
<span class="-4050334248407940033" onmouseenter="enter('-4050334248407940033');" onmouseout="out('-4050334248407940033');" style=""><abbr title="1914                                         if ((container != LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (container != LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {">1914                                         if ((container != LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;</abbr></span>
<span class="7404652805162444756" onmouseenter="enter('7404652805162444756');" onmouseout="out('7404652805162444756');" style=""><abbr title="1915                                             Log.e(TAG, &quot;Widget found where container != &quot; + &quot;CONTAINER_DESKTOP nor CONTAINER_HOTSEAT - ignoring!&quot;);">1915                                             Log.e(TAG, &quot;Widget found where container != &quot; + &quot;CONTAINER_DE</abbr></span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1916                                             continue;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1917                                         }                                                                </span>
<span class="3497044279011134930" onmouseenter="enter('3497044279011134930');" onmouseout="out('3497044279011134930');" style="">1918                                         appWidgetInfo.container = c.getInt(containerIndex);              </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">1919                                         // check &amp; update map of what&#x27;s occupied                         </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">1920                                         deleteOnInvalidPlacement.set(false);                             </span>
<span class="624158001295943608" onmouseenter="enter('624158001295943608');" onmouseout="out('624158001295943608');" style=""><abbr title="1921                                         if (!checkItemPlacement(occupied, appWidgetInfo, deleteOnInvalidPlacement)) {">1921                                         if (!checkItemPlacement(occupied, appWidgetInfo, deleteOnInvalidP</abbr></span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">1922                                             if (deleteOnInvalidPlacement.get()) {                        </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1923                                                 itemsToRemove.add(id);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1924                                             }                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1925                                             break;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1926                                         }                                                                </span>
<span class="1434382407220101710" onmouseenter="enter('1434382407220101710');" onmouseout="out('1434382407220101710');" style="">1927                                         String providerName = provider.provider.flattenToString();       </span>
<span class="-497618701172789575" onmouseenter="enter('-497618701172789575');" onmouseout="out('-497618701172789575');" style="">1928                                         if (!providerName.equals(savedProvider)) {                       </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">1929                                             ContentValues values = new ContentValues();                  </span>
<span class="4458189258819483671" onmouseenter="enter('4458189258819483671');" onmouseout="out('4458189258819483671');" style=""><abbr title="1930                                             values.put(LauncherSettings.Favorites.APPWIDGET_PROVIDER, providerName);">1930                                             values.put(LauncherSettings.Favorites.APPWIDGET_PROVIDER, pro</abbr></span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">1931                                             String where = BaseColumns._ID + &quot;= ?&quot;;                      </span>
<span class="3600991135131158376" onmouseenter="enter('3600991135131158376');" onmouseout="out('3600991135131158376');" style=""><abbr title="1932                                             String[] args = new java.lang.String[]{ Integer.toString(c.getInt(idIndex)) };">1932                                             String[] args = new java.lang.String[]{ Integer.toString(c.ge</abbr></span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="">1933                                             contentResolver.update(contentUri, values, where, args);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1934                                         }                                                                </span>
<span class="-5618854840311135348" onmouseenter="enter('-5618854840311135348');" onmouseout="out('-5618854840311135348');" style="">1935                                         sBgItemsIdMap.put(appWidgetInfo.id, appWidgetInfo);              </span>
<span class="-6085617845739613540" onmouseenter="enter('-6085617845739613540');" onmouseout="out('-6085617845739613540');" style="">1936                                         sBgAppWidgets.add(appWidgetInfo);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1937                                     }                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1938                                     break;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1939                             }                                                                            </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">1940                         } catch (java.lang.Exception e) {                                                </span>
<span class="5473197829797399592" onmouseenter="enter('5473197829797399592');" onmouseout="out('5473197829797399592');" style="">1941                             Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted&quot;, e, true);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1942                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1943                     }                                                                                    </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1944                 } finally {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">1945                     if (c != null) {                                                                     </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">1946                         c.close();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1947                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1948                 }                                                                                        </span>
<span class="3320499870953658089" onmouseenter="enter('3320499870953658089');" onmouseout="out('3320499870953658089');" style="">1949                 // Break early if we&#x27;ve stopped loading                                                  </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1950                 if (mStopped) {                                                                          </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">1951                     clearSBgDataStructures();                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1952                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1953                 }                                                                                        </span>
<span class="-1044970196577970229" onmouseenter="enter('-1044970196577970229');" onmouseout="out('-1044970196577970229');" style="">1954                 if (itemsToRemove.size() &gt; 0) {                                                          </span>
<span class="5247528963568852302" onmouseenter="enter('5247528963568852302');" onmouseout="out('5247528963568852302');" style=""><abbr title="1955                     ContentProviderClient client = contentResolver.acquireContentProviderClient(LauncherSettings.Favorites.CONTENT_URI);">1955                     ContentProviderClient client = contentResolver.acquireContentProviderClient(LauncherS</abbr></span>
<span class="-6328990658741073682" onmouseenter="enter('-6328990658741073682');" onmouseout="out('-6328990658741073682');" style="">1956                     // Remove dead items                                                                 </span>
<span class="-2206673557334024830" onmouseenter="enter('-2206673557334024830');" onmouseout="out('-2206673557334024830');" style="">1957                     for (long id : itemsToRemove) {                                                      </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1958                         if (DEBUG_LOADERS) {                                                             </span>
<span class="1693656419727492070" onmouseenter="enter('1693656419727492070');" onmouseout="out('1693656419727492070');" style="">1959                             Log.d(TAG, &quot;Removed id = &quot; + id);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1960                         }                                                                                </span>
<span class="-756547997470617115" onmouseenter="enter('-756547997470617115');" onmouseout="out('-756547997470617115');" style="">1961                         // Don&#x27;t notify content observers                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1962                         try {                                                                            </span>
<span class="-8377090628300712682" onmouseenter="enter('-8377090628300712682');" onmouseout="out('-8377090628300712682');" style=""><abbr title="1963                             client.delete(LauncherSettings.Favorites.getContentUri(id, false), null, null);">1963                             client.delete(LauncherSettings.Favorites.getContentUri(id, false), null, null</abbr></span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">1964                         } catch (RemoteException e) {                                                    </span>
<span class="1576133554677134200" onmouseenter="enter('1576133554677134200');" onmouseout="out('1576133554677134200');" style="">1965                             Log.w(TAG, &quot;Could not remove id = &quot; + id);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1966                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1967                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1968                 }                                                                                        </span>
<span class="5384601782943406631" onmouseenter="enter('5384601782943406631');" onmouseout="out('5384601782943406631');" style="">1969                 if (restoredRows.size() &gt; 0) {                                                           </span>
<span class="-6230177900084623470" onmouseenter="enter('-6230177900084623470');" onmouseout="out('-6230177900084623470');" style=""><abbr title="1970                     ContentProviderClient updater = contentResolver.acquireContentProviderClient(LauncherSettings.Favorites.CONTENT_URI);">1970                     ContentProviderClient updater = contentResolver.acquireContentProviderClient(Launcher</abbr></span>
<span class="7218829760546841504" onmouseenter="enter('7218829760546841504');" onmouseout="out('7218829760546841504');" style="">1971                     // Update restored items that no longer require special handling                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1972                     try {                                                                                </span>
<span class="-9131750597640912652" onmouseenter="enter('-9131750597640912652');" onmouseout="out('-9131750597640912652');" style="">1973                         StringBuilder selectionBuilder = new StringBuilder();                            </span>
<span class="-2095273116509361612" onmouseenter="enter('-2095273116509361612');" onmouseout="out('-2095273116509361612');" style="">1974                         selectionBuilder.append(LauncherSettings.Favorites._ID);                         </span>
<span class="6461653116160679746" onmouseenter="enter('6461653116160679746');" onmouseout="out('6461653116160679746');" style="">1975                         selectionBuilder.append(&quot; IN (&quot;);                                                </span>
<span class="5779162458108712939" onmouseenter="enter('5779162458108712939');" onmouseout="out('5779162458108712939');" style="">1976                         selectionBuilder.append(TextUtils.join(&quot;, &quot;, restoredRows));                     </span>
<span class="-266914319355369866" onmouseenter="enter('-266914319355369866');" onmouseout="out('-266914319355369866');" style="">1977                         selectionBuilder.append(&quot;)&quot;);                                                    </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">1978                         ContentValues values = new ContentValues();                                      </span>
<span class="-8469115157851156621" onmouseenter="enter('-8469115157851156621');" onmouseout="out('-8469115157851156621');" style="">1979                         values.put(LauncherSettings.Favorites.RESTORED, 0);                              </span>
<span class="-5700552110833758865" onmouseenter="enter('-5700552110833758865');" onmouseout="out('-5700552110833758865');" style=""><abbr title="1980                         updater.update(LauncherSettings.Favorites.CONTENT_URI, values, selectionBuilder.toString(), null);">1980                         updater.update(LauncherSettings.Favorites.CONTENT_URI, values, selectionBuilder.t</abbr></span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">1981                     } catch (RemoteException e) {                                                        </span>
<span class="-2048384695223094681" onmouseenter="enter('-2048384695223094681');" onmouseout="out('-2048384695223094681');" style="">1982                         Log.w(TAG, &quot;Could not update restored rows&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1983                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1984                 }                                                                                        </span>
<span class="-4804263783578470698" onmouseenter="enter('-4804263783578470698');" onmouseout="out('-4804263783578470698');" style="">1985                 if (loadedOldDb) {                                                                       </span>
<span class="7600073100480404232" onmouseenter="enter('7600073100480404232');" onmouseout="out('7600073100480404232');" style="">1986                     long maxScreenId = 0;                                                                </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">1987                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-5986846111837546518" onmouseenter="enter('-5986846111837546518');" onmouseout="out('-5986846111837546518');" style="">1988                     for (ItemInfo item : sBgItemsIdMap.values()) {                                       </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">1989                         long screenId = item.screenId;                                                   </span>
<span class="-5790181917475254894" onmouseenter="enter('-5790181917475254894');" onmouseout="out('-5790181917475254894');" style=""><abbr title="1990                         if ((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (!sBgWorkspaceScreens.contains(screenId))) {">1990                         if ((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; (!sBgWork</abbr></span>
<span class="-7031445051311703943" onmouseenter="enter('-7031445051311703943');" onmouseout="out('-7031445051311703943');" style="">1991                             sBgWorkspaceScreens.add(screenId);                                           </span>
<span class="3854679960473080150" onmouseenter="enter('3854679960473080150');" onmouseout="out('3854679960473080150');" style="">1992                             if (screenId &gt; maxScreenId) {                                                </span>
<span class="1021049293401799489" onmouseenter="enter('1021049293401799489');" onmouseout="out('1021049293401799489');" style="">1993                                 maxScreenId = screenId;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1994                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1995                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1996                     }                                                                                    </span>
<span class="6350361387624057443" onmouseenter="enter('6350361387624057443');" onmouseout="out('6350361387624057443');" style="">1997                     Collections.sort(sBgWorkspaceScreens);                                               </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1998                     // Log to disk                                                                       </span>
<span class="866898408466051726" onmouseenter="enter('866898408466051726');" onmouseout="out('866898408466051726');" style="">1999                     Launcher.addDumpLog(TAG, &quot;11683562 -   maxScreenId: &quot; + maxScreenId, true);          </span>
<span class="471675311745375832" onmouseenter="enter('471675311745375832');" onmouseout="out('471675311745375832');" style=""><abbr title="2000                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; + TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);">2000                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; + TextUtils.join(&quot;, &quot;, </abbr></span>
<span class="7230913638388732518" onmouseenter="enter('7230913638388732518');" onmouseout="out('7230913638388732518');" style="">2001                     LauncherAppState.getLauncherProvider().updateMaxScreenId(maxScreenId);               </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2002                     updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                            </span>
<span class="7660079450024453672" onmouseenter="enter('7660079450024453672');" onmouseout="out('7660079450024453672');" style="">2003                     // Update the max item id after we load an old db                                    </span>
<span class="-1395936485676380465" onmouseenter="enter('-1395936485676380465');" onmouseout="out('-1395936485676380465');" style="">2004                     long maxItemId = 0;                                                                  </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2005                     // If we&#x27;re importing we use the old screen order.                                   </span>
<span class="-5986846111837546518" onmouseenter="enter('-5986846111837546518');" onmouseout="out('-5986846111837546518');" style="">2006                     for (ItemInfo item : sBgItemsIdMap.values()) {                                       </span>
<span class="570221416877950678" onmouseenter="enter('570221416877950678');" onmouseout="out('570221416877950678');" style="">2007                         maxItemId = Math.max(maxItemId, item.id);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2008                     }                                                                                    </span>
<span class="-9163109107539651846" onmouseenter="enter('-9163109107539651846');" onmouseout="out('-9163109107539651846');" style="">2009                     LauncherAppState.getLauncherProvider().updateMaxItemId(maxItemId);                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2010                 } else {                                                                                 </span>
<span class="-2685559954044032059" onmouseenter="enter('-2685559954044032059');" onmouseout="out('-2685559954044032059');" style="">2011                     TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(mContext);            </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">2012                     for (Integer i : orderedScreens.keySet()) {                                          </span>
<span class="6018672691004586758" onmouseenter="enter('6018672691004586758');" onmouseout="out('6018672691004586758');" style="">2013                         sBgWorkspaceScreens.add(orderedScreens.get(i));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2014                     }                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2015                     // Log to disk                                                                       </span>
<span class="471675311745375832" onmouseenter="enter('471675311745375832');" onmouseout="out('471675311745375832');" style=""><abbr title="2016                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; + TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);">2016                     Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; + TextUtils.join(&quot;, &quot;, </abbr></span>
<span class="4349099944219760178" onmouseenter="enter('4349099944219760178');" onmouseout="out('4349099944219760178');" style="">2017                     // Remove any empty screens                                                          </span>
<span class="4802911702169047278" onmouseenter="enter('4802911702169047278');" onmouseout="out('4802911702169047278');" style="">2018                     ArrayList&lt;Long&gt; unusedScreens = new ArrayList&lt;Long&gt;(sBgWorkspaceScreens);            </span>
<span class="-5986846111837546518" onmouseenter="enter('-5986846111837546518');" onmouseout="out('-5986846111837546518');" style="">2019                     for (ItemInfo item : sBgItemsIdMap.values()) {                                       </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2020                         long screenId = item.screenId;                                                   </span>
<span class="-2619061293676710063" onmouseenter="enter('-2619061293676710063');" onmouseout="out('-2619061293676710063');" style=""><abbr title="2021                         if ((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; unusedScreens.contains(screenId)) {">2021                         if ((item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) &amp;&amp; unusedScr</abbr></span>
<span class="2563817896724806900" onmouseenter="enter('2563817896724806900');" onmouseout="out('2563817896724806900');" style="">2022                             unusedScreens.remove(screenId);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2023                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2024                     }                                                                                    </span>
<span class="589140823506694046" onmouseenter="enter('589140823506694046');" onmouseout="out('589140823506694046');" style="">2025                     // If there are any empty screens remove them, and update.                           </span>
<span class="-6359391369875412389" onmouseenter="enter('-6359391369875412389');" onmouseout="out('-6359391369875412389');" style="">2026                     if (unusedScreens.size() != 0) {                                                     </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2027                         // Log to disk                                                                   </span>
<span class="3224213598090422289" onmouseenter="enter('3224213598090422289');" onmouseout="out('3224213598090422289');" style=""><abbr title="2028                         Launcher.addDumpLog(TAG, &quot;11683562 -   unusedScreens (to be removed): &quot; + TextUtils.join(&quot;, &quot;, unusedScreens), true);">2028                         Launcher.addDumpLog(TAG, &quot;11683562 -   unusedScreens (to be removed): &quot; + TextUti</abbr></span>
<span class="672027419163159367" onmouseenter="enter('672027419163159367');" onmouseout="out('672027419163159367');" style="">2029                         sBgWorkspaceScreens.removeAll(unusedScreens);                                    </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2030                         updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2031                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2032                 }                                                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2033                 if (DEBUG_LOADERS) {                                                                     </span>
<span class="7903276559551393896" onmouseenter="enter('7903276559551393896');" onmouseout="out('7903276559551393896');" style="">2034                     Log.d(TAG, (&quot;loaded workspace in &quot; + (SystemClock.uptimeMillis() - t)) + &quot;ms&quot;);      </span>
<span class="-4264600990510120523" onmouseenter="enter('-4264600990510120523');" onmouseout="out('-4264600990510120523');" style="">2035                     Log.d(TAG, &quot;workspace layout: &quot;);                                                    </span>
<span class="-7545020173780618827" onmouseenter="enter('-7545020173780618827');" onmouseout="out('-7545020173780618827');" style="">2036                     int nScreens = occupied.size();                                                      </span>
<span class="-1430677680506572849" onmouseenter="enter('-1430677680506572849');" onmouseout="out('-1430677680506572849');" style="">2037                     for (int y = 0; y &lt; countY; y++) {                                                   </span>
<span class="7912371425440139270" onmouseenter="enter('7912371425440139270');" onmouseout="out('7912371425440139270');" style="">2038                         String line = &quot;&quot;;                                                                </span>
<span class="6696569755228044488" onmouseenter="enter('6696569755228044488');" onmouseout="out('6696569755228044488');" style="">2039                         Iterator&lt;Long&gt; iter = occupied.keySet().iterator();                              </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2040                         while (iter.hasNext()) {                                                         </span>
<span class="5362610809116292523" onmouseenter="enter('5362610809116292523');" onmouseout="out('5362610809116292523');" style="">2041                             long screenId = iter.next();                                                 </span>
<span class="-6362485911021715109" onmouseenter="enter('-6362485911021715109');" onmouseout="out('-6362485911021715109');" style="">2042                             if (screenId &gt; 0) {                                                          </span>
<span class="6140668759815587097" onmouseenter="enter('6140668759815587097');" onmouseout="out('6140668759815587097');" style="">2043                                 line += &quot; | &quot;;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2044                             }                                                                            </span>
<span class="5745233440242438196" onmouseenter="enter('5745233440242438196');" onmouseout="out('5745233440242438196');" style="">2045                             for (int x = 0; x &lt; countX; x++) {                                           </span>
<span class="-8222829165891514609" onmouseenter="enter('-8222829165891514609');" onmouseout="out('-8222829165891514609');" style="">2046                                 line += (occupied.get(screenId)[x][y] != null) ? &quot;#&quot; : &quot;.&quot;;              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2047                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2048                         }                                                                                </span>
<span class="897171976692622190" onmouseenter="enter('897171976692622190');" onmouseout="out('897171976692622190');" style="">2049                         Log.d(TAG, (&quot;[ &quot; + line) + &quot; ]&quot;);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2050                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2051                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2052             }                                                                                            </span>
<span class="-4220264685598194490" onmouseenter="enter('-4220264685598194490');" onmouseout="out('-4220264685598194490');" style="">2053             return loadedOldDb;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2054         }                                                                                                </span>
<span  style="">2055                                                                                                          </span>
<span class="2277304499071840713" onmouseenter="enter('2277304499071840713');" onmouseout="out('2277304499071840713');" style="">2056         /** Filters the set of items who are directly or indirectly (via another container) on the       </span>
<span class="1409652257454698285" onmouseenter="enter('1409652257454698285');" onmouseout="out('1409652257454698285');" style="">2057          * specified screen. */                                                                          </span>
<span class="8795548304182075511" onmouseenter="enter('8795548304182075511');" onmouseout="out('8795548304182075511');" style="">2058         private void filterCurrentWorkspaceItems(long currentScreenId,                                   </span>
<span class="6681054994536048179" onmouseenter="enter('6681054994536048179');" onmouseout="out('6681054994536048179');" style="">2059                 ArrayList&lt;ItemInfo&gt; allWorkspaceItems,                                                   </span>
<span class="-22694560885899086" onmouseenter="enter('-22694560885899086');" onmouseout="out('-22694560885899086');" style="">2060                 ArrayList&lt;ItemInfo&gt; currentScreenItems,                                                  </span>
<span class="-4268074281529251610" onmouseenter="enter('-4268074281529251610');" onmouseout="out('-4268074281529251610');" style="">2061                 ArrayList&lt;ItemInfo&gt; otherScreenItems) {                                                  </span>
<span class="-3054856766549342984" onmouseenter="enter('-3054856766549342984');" onmouseout="out('-3054856766549342984');" style="">2062             // Purge any null ItemInfos                                                                  </span>
<span class="4510640209834542816" onmouseenter="enter('4510640209834542816');" onmouseout="out('4510640209834542816');" style="">2063             Iterator&lt;ItemInfo&gt; iter = allWorkspaceItems.iterator();                                      </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2064             while (iter.hasNext()) {                                                                     </span>
<span class="1859715860533284250" onmouseenter="enter('1859715860533284250');" onmouseout="out('1859715860533284250');" style="">2065                 ItemInfo i = iter.next();                                                                </span>
<span class="-7805046366392198151" onmouseenter="enter('-7805046366392198151');" onmouseout="out('-7805046366392198151');" style="">2066                 if (i == null) {                                                                         </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">2067                     iter.remove();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2068                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2069             }                                                                                            </span>
<span  style="">2070                                                                                                          </span>
<span class="-717820765531723775" onmouseenter="enter('-717820765531723775');" onmouseout="out('-717820765531723775');" style="">2071             // Order the set of items by their containers first, this allows use to walk through the     </span>
<span class="603841325148737819" onmouseenter="enter('603841325148737819');" onmouseout="out('603841325148737819');" style="">2072             // list sequentially, build up a list of containers that are in the specified screen,        </span>
<span class="4141488165570775341" onmouseenter="enter('4141488165570775341');" onmouseout="out('4141488165570775341');" style="">2073             // as well as all items in those containers.                                                 </span>
<span class="-9034158841912487174" onmouseenter="enter('-9034158841912487174');" onmouseout="out('-9034158841912487174');" style="">2074             Set&lt;Long&gt; itemsOnScreen = new HashSet&lt;Long&gt;();                                               </span>
<span class="8519661802904254165" onmouseenter="enter('8519661802904254165');" onmouseout="out('8519661802904254165');" style="">2075             Collections.sort(allWorkspaceItems, new Comparator&lt;ItemInfo&gt;() {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2076                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2077                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="-1156155221818606914" onmouseenter="enter('-1156155221818606914');" onmouseout="out('-1156155221818606914');" style="">2078                     return (int) (lhs.container - rhs.container);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2079                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2080             });                                                                                          </span>
<span class="8857216393150717712" onmouseenter="enter('8857216393150717712');" onmouseout="out('8857216393150717712');" style="">2081             for (ItemInfo info : allWorkspaceItems) {                                                    </span>
<span class="6411036295955728093" onmouseenter="enter('6411036295955728093');" onmouseout="out('6411036295955728093');" style="">2082                 if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                    </span>
<span class="243509375570472667" onmouseenter="enter('243509375570472667');" onmouseout="out('243509375570472667');" style="">2083                     if (info.screenId == currentScreenId) {                                              </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2084                         currentScreenItems.add(info);                                                    </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2085                         itemsOnScreen.add(info.id);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2086                     } else {                                                                             </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2087                         otherScreenItems.add(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2088                     }                                                                                    </span>
<span class="8644731164584182238" onmouseenter="enter('8644731164584182238');" onmouseout="out('8644731164584182238');" style="">2089                 } else if (info.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {             </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2090                     currentScreenItems.add(info);                                                        </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2091                     itemsOnScreen.add(info.id);                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2092                 } else {                                                                                 </span>
<span class="580654991680085358" onmouseenter="enter('580654991680085358');" onmouseout="out('580654991680085358');" style="">2093                     if (itemsOnScreen.contains(info.container)) {                                        </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2094                         currentScreenItems.add(info);                                                    </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2095                         itemsOnScreen.add(info.id);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2096                     } else {                                                                             </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2097                         otherScreenItems.add(info);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2098                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2099                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2100             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2101         }                                                                                                </span>
<span  style="">2102                                                                                                          </span>
<span class="-2345588268248786161" onmouseenter="enter('-2345588268248786161');" onmouseout="out('-2345588268248786161');" style="">2103         /** Filters the set of widgets which are on the specified screen. */                             </span>
<span class="7796530082634599981" onmouseenter="enter('7796530082634599981');" onmouseout="out('7796530082634599981');" style="">2104         private void filterCurrentAppWidgets(long currentScreenId,                                       </span>
<span class="-6457080946795761374" onmouseenter="enter('-6457080946795761374');" onmouseout="out('-6457080946795761374');" style="">2105                 ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                             </span>
<span class="-4085190208868862406" onmouseenter="enter('-4085190208868862406');" onmouseout="out('-4085190208868862406');" style="">2106                 ArrayList&lt;LauncherAppWidgetInfo&gt; currentScreenWidgets,                                   </span>
<span class="-9000722418092093369" onmouseenter="enter('-9000722418092093369');" onmouseout="out('-9000722418092093369');" style="">2107                 ArrayList&lt;LauncherAppWidgetInfo&gt; otherScreenWidgets) {                                   </span>
<span  style="">2108                                                                                                          </span>
<span class="298213435107913715" onmouseenter="enter('298213435107913715');" onmouseout="out('298213435107913715');" style="">2109             for (LauncherAppWidgetInfo widget : appWidgets) {                                            </span>
<span class="2476844624609784590" onmouseenter="enter('2476844624609784590');" onmouseout="out('2476844624609784590');" style="">2110                 if (widget == null) continue;                                                            </span>
<span class="8795712760973120755" onmouseenter="enter('8795712760973120755');" onmouseout="out('8795712760973120755');" style="">2111                 if (widget.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                  </span>
<span class="-573639449604607321" onmouseenter="enter('-573639449604607321');" onmouseout="out('-573639449604607321');" style="">2112                         widget.screenId == currentScreenId) {                                            </span>
<span class="-7467860973438659792" onmouseenter="enter('-7467860973438659792');" onmouseout="out('-7467860973438659792');" style="">2113                     currentScreenWidgets.add(widget);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2114                 } else {                                                                                 </span>
<span class="918127297832417083" onmouseenter="enter('918127297832417083');" onmouseout="out('918127297832417083');" style="">2115                     otherScreenWidgets.add(widget);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2116                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2117             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2118         }                                                                                                </span>
<span  style="">2119                                                                                                          </span>
<span class="2890739696266248059" onmouseenter="enter('2890739696266248059');" onmouseout="out('2890739696266248059');" style="">2120         /** Filters the set of folders which are on the specified screen. */                             </span>
<span class="1006156668309097499" onmouseenter="enter('1006156668309097499');" onmouseout="out('1006156668309097499');" style="">2121         private void filterCurrentFolders(long currentScreenId,                                          </span>
<span class="5542015090877593488" onmouseenter="enter('5542015090877593488');" onmouseout="out('5542015090877593488');" style="">2122                 HashMap&lt;Long, ItemInfo&gt; itemsIdMap,                                                      </span>
<span class="5439463415012784721" onmouseenter="enter('5439463415012784721');" onmouseout="out('5439463415012784721');" style="">2123                 HashMap&lt;Long, FolderInfo&gt; folders,                                                       </span>
<span class="-835326304871961386" onmouseenter="enter('-835326304871961386');" onmouseout="out('-835326304871961386');" style="">2124                 HashMap&lt;Long, FolderInfo&gt; currentScreenFolders,                                          </span>
<span class="-5337898381804311151" onmouseenter="enter('-5337898381804311151');" onmouseout="out('-5337898381804311151');" style="">2125                 HashMap&lt;Long, FolderInfo&gt; otherScreenFolders) {                                          </span>
<span  style="">2126                                                                                                          </span>
<span class="5476103458254751398" onmouseenter="enter('5476103458254751398');" onmouseout="out('5476103458254751398');" style="">2127             for (long id : folders.keySet()) {                                                           </span>
<span class="-1043527829048640643" onmouseenter="enter('-1043527829048640643');" onmouseout="out('-1043527829048640643');" style="">2128                 ItemInfo info = itemsIdMap.get(id);                                                      </span>
<span class="2660177146353218833" onmouseenter="enter('2660177146353218833');" onmouseout="out('2660177146353218833');" style="">2129                 FolderInfo folder = folders.get(id);                                                     </span>
<span class="1070396563257369459" onmouseenter="enter('1070396563257369459');" onmouseout="out('1070396563257369459');" style="">2130                 if (info == null || folder == null) continue;                                            </span>
<span class="-2700526009056688618" onmouseenter="enter('-2700526009056688618');" onmouseout="out('-2700526009056688618');" style="">2131                 if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                    </span>
<span class="-6694119585175412501" onmouseenter="enter('-6694119585175412501');" onmouseout="out('-6694119585175412501');" style="">2132                         info.screenId == currentScreenId) {                                              </span>
<span class="9103793645851851238" onmouseenter="enter('9103793645851851238');" onmouseout="out('9103793645851851238');" style="">2133                     currentScreenFolders.put(id, folder);                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2134                 } else {                                                                                 </span>
<span class="2209694610169579401" onmouseenter="enter('2209694610169579401');" onmouseout="out('2209694610169579401');" style="">2135                     otherScreenFolders.put(id, folder);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2136                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2137             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2138         }                                                                                                </span>
<span  style="">2139                                                                                                          </span>
<span class="-1404838629334872973" onmouseenter="enter('-1404838629334872973');" onmouseout="out('-1404838629334872973');" style="">2140         /** Sorts the set of items by hotseat, workspace (spatially from top to bottom, left to          </span>
<span class="2331484748997422212" onmouseenter="enter('2331484748997422212');" onmouseout="out('2331484748997422212');" style="">2141          * right) */                                                                                     </span>
<span class="4197577433481844567" onmouseenter="enter('4197577433481844567');" onmouseout="out('4197577433481844567');" style="">2142         private void sortWorkspaceItemsSpatially(ArrayList&lt;ItemInfo&gt; workspaceItems) {                   </span>
<span class="1185328747399966274" onmouseenter="enter('1185328747399966274');" onmouseout="out('1185328747399966274');" style="">2143             final LauncherAppState app = LauncherAppState.getInstance();                                 </span>
<span class="7124839587395892858" onmouseenter="enter('7124839587395892858');" onmouseout="out('7124839587395892858');" style="">2144             final DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                          </span>
<span class="7420301678455304067" onmouseenter="enter('7420301678455304067');" onmouseout="out('7420301678455304067');" style="">2145             // XXX: review this                                                                          </span>
<span class="5036789581710507500" onmouseenter="enter('5036789581710507500');" onmouseout="out('5036789581710507500');" style="">2146             Collections.sort(workspaceItems, new Comparator&lt;ItemInfo&gt;() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2147                 @Override                                                                                </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2148                 public int compare(ItemInfo lhs, ItemInfo rhs) {                                         </span>
<span class="7519014981914073063" onmouseenter="enter('7519014981914073063');" onmouseout="out('7519014981914073063');" style="">2149                     int cellCountX = (int) grid.numColumns;                                              </span>
<span class="5038685396458105053" onmouseenter="enter('5038685396458105053');" onmouseout="out('5038685396458105053');" style="">2150                     int cellCountY = (int) grid.numRows;                                                 </span>
<span class="2270724071285143981" onmouseenter="enter('2270724071285143981');" onmouseout="out('2270724071285143981');" style="">2151                     int screenOffset = cellCountX * cellCountY;                                          </span>
<span class="-1359829540566141263" onmouseenter="enter('-1359829540566141263');" onmouseout="out('-1359829540566141263');" style="">2152                     int containerOffset = screenOffset * (Launcher.SCREEN_COUNT + 1); // +1 hotseat      </span>
<span class="-5686828087182476360" onmouseenter="enter('-5686828087182476360');" onmouseout="out('-5686828087182476360');" style="">2153                     long lr = (lhs.container * containerOffset + lhs.screenId * screenOffset +           </span>
<span class="7712455780852264002" onmouseenter="enter('7712455780852264002');" onmouseout="out('7712455780852264002');" style="">2154                             lhs.cellY * cellCountX + lhs.cellX);                                         </span>
<span class="4979104026657461493" onmouseenter="enter('4979104026657461493');" onmouseout="out('4979104026657461493');" style="">2155                     long rr = (rhs.container * containerOffset + rhs.screenId * screenOffset +           </span>
<span class="-2381270400025166051" onmouseenter="enter('-2381270400025166051');" onmouseout="out('-2381270400025166051');" style="">2156                             rhs.cellY * cellCountX + rhs.cellX);                                         </span>
<span class="-4118467969899844825" onmouseenter="enter('-4118467969899844825');" onmouseout="out('-4118467969899844825');" style="">2157                     return (int) (lr - rr);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2158                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2159             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2160         }                                                                                                </span>
<span  style="">2161                                                                                                          </span>
<span class="-2914095713166652734" onmouseenter="enter('-2914095713166652734');" onmouseout="out('-2914095713166652734');" style="">2162         private void bindWorkspaceScreens(final Callbacks oldCallbacks,                                  </span>
<span class="-4834279311466229697" onmouseenter="enter('-4834279311466229697');" onmouseout="out('-4834279311466229697');" style="">2163                 final ArrayList&lt;Long&gt; orderedScreens) {                                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2164             final Runnable r = new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2165                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2166                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2167                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2168                     if (callbacks != null) {                                                             </span>
<span class="-657438592163932392" onmouseenter="enter('-657438592163932392');" onmouseout="out('-657438592163932392');" style="">2169                         callbacks.bindScreens(orderedScreens);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2170                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2171                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2172             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2173             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2174         }                                                                                                </span>
<span  style="">2175                                                                                                          </span>
<span class="2462723938814167389" onmouseenter="enter('2462723938814167389');" onmouseout="out('2462723938814167389');" style="">2176         private void bindWorkspaceItems(final Callbacks oldCallbacks,                                    </span>
<span class="3131608111144182051" onmouseenter="enter('3131608111144182051');" onmouseout="out('3131608111144182051');" style="">2177                 final ArrayList&lt;ItemInfo&gt; workspaceItems,                                                </span>
<span class="-9171435870290402492" onmouseenter="enter('-9171435870290402492');" onmouseout="out('-9171435870290402492');" style="">2178                 final ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                       </span>
<span class="-215271553361392889" onmouseenter="enter('-215271553361392889');" onmouseout="out('-215271553361392889');" style="">2179                 final HashMap&lt;Long, FolderInfo&gt; folders,                                                 </span>
<span class="8358584326194096705" onmouseenter="enter('8358584326194096705');" onmouseout="out('8358584326194096705');" style="">2180                 ArrayList&lt;Runnable&gt; deferredBindRunnables) {                                             </span>
<span  style="">2181                                                                                                          </span>
<span class="6705996702729308966" onmouseenter="enter('6705996702729308966');" onmouseout="out('6705996702729308966');" style="">2182             final boolean postOnMainThread = (deferredBindRunnables != null);                            </span>
<span  style="">2183                                                                                                          </span>
<span class="-8582136977498244048" onmouseenter="enter('-8582136977498244048');" onmouseout="out('-8582136977498244048');" style="">2184             // Bind the workspace items                                                                  </span>
<span class="-7354566132986496753" onmouseenter="enter('-7354566132986496753');" onmouseout="out('-7354566132986496753');" style="">2185             int N = workspaceItems.size();                                                               </span>
<span class="8316943469476905111" onmouseenter="enter('8316943469476905111');" onmouseout="out('8316943469476905111');" style="">2186             for (int i = 0; i &lt; N; i += ITEMS_CHUNK) {                                                   </span>
<span class="4892427267481855411" onmouseenter="enter('4892427267481855411');" onmouseout="out('4892427267481855411');" style="">2187                 final int start = i;                                                                     </span>
<span class="-1876539668545683746" onmouseenter="enter('-1876539668545683746');" onmouseout="out('-1876539668545683746');" style="">2188                 final int chunkSize = (i+ITEMS_CHUNK &lt;= N) ? ITEMS_CHUNK : (N-i);                        </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2189                 final Runnable r = new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2190                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2191                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2192                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2193                         if (callbacks != null) {                                                         </span>
<span class="5089922212197568209" onmouseenter="enter('5089922212197568209');" onmouseout="out('5089922212197568209');" style="">2194                             callbacks.bindItems(workspaceItems, start, start+chunkSize,                  </span>
<span class="9106099237950392606" onmouseenter="enter('9106099237950392606');" onmouseout="out('9106099237950392606');" style="">2195                                     false);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2196                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2197                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2198                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2199                 if (postOnMainThread) {                                                                  </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2200                     deferredBindRunnables.add(r);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2201                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2202                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2203                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2204             }                                                                                            </span>
<span  style="">2205                                                                                                          </span>
<span class="-3289339942871725334" onmouseenter="enter('-3289339942871725334');" onmouseout="out('-3289339942871725334');" style="">2206             // Bind the folders                                                                          </span>
<span class="-7483796215228262161" onmouseenter="enter('-7483796215228262161');" onmouseout="out('-7483796215228262161');" style="">2207             if (!folders.isEmpty()) {                                                                    </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2208                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2209                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2210                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2211                         if (callbacks != null) {                                                         </span>
<span class="-5386182796873001970" onmouseenter="enter('-5386182796873001970');" onmouseout="out('-5386182796873001970');" style="">2212                             callbacks.bindFolders(folders);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2213                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2214                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2215                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2216                 if (postOnMainThread) {                                                                  </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2217                     deferredBindRunnables.add(r);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2218                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2219                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2220                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2221             }                                                                                            </span>
<span  style="">2222                                                                                                          </span>
<span class="-3655716380766613611" onmouseenter="enter('-3655716380766613611');" onmouseout="out('-3655716380766613611');" style="">2223             // Bind the widgets, one at a time                                                           </span>
<span class="-8489280060790503293" onmouseenter="enter('-8489280060790503293');" onmouseout="out('-8489280060790503293');" style="">2224             N = appWidgets.size();                                                                       </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2225             for (int i = 0; i &lt; N; i++) {                                                                </span>
<span class="1244623159456991119" onmouseenter="enter('1244623159456991119');" onmouseout="out('1244623159456991119');" style="">2226                 final LauncherAppWidgetInfo widget = appWidgets.get(i);                                  </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2227                 final Runnable r = new Runnable() {                                                      </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2228                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2229                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2230                         if (callbacks != null) {                                                         </span>
<span class="-6128295543460120155" onmouseenter="enter('-6128295543460120155');" onmouseout="out('-6128295543460120155');" style="">2231                             callbacks.bindAppWidget(widget);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2232                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2233                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2234                 };                                                                                       </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2235                 if (postOnMainThread) {                                                                  </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2236                     deferredBindRunnables.add(r);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2237                 } else {                                                                                 </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2238                     runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2239                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2240             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2241         }                                                                                                </span>
<span  style="">2242                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2243         /**                                                                                              </span>
<span class="2657234197326019604" onmouseenter="enter('2657234197326019604');" onmouseout="out('2657234197326019604');" style="">2244          * Binds all loaded data to actual views on the main thread.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2245          */                                                                                              </span>
<span class="2515782410575020505" onmouseenter="enter('2515782410575020505');" onmouseout="out('2515782410575020505');" style="">2246         private void bindWorkspace(int synchronizeBindPage, final boolean isUpgradePath) {               </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2247             final long t = SystemClock.uptimeMillis();                                                   </span>
<span class="-6867724507948428803" onmouseenter="enter('-6867724507948428803');" onmouseout="out('-6867724507948428803');" style="">2248             Runnable r;                                                                                  </span>
<span  style="">2249                                                                                                          </span>
<span class="7433359470613785749" onmouseenter="enter('7433359470613785749');" onmouseout="out('7433359470613785749');" style="">2250             // Don&#x27;t use these two variables in any of the callback runnables.                           </span>
<span class="-3941343762342876699" onmouseenter="enter('-3941343762342876699');" onmouseout="out('-3941343762342876699');" style="">2251             // Otherwise we hold a reference to them.                                                    </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2252             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2253             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2254                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="3451244406562267616" onmouseenter="enter('3451244406562267616');" onmouseout="out('3451244406562267616');" style="">2255                 Log.w(TAG, &quot;LoaderTask running with no launcher&quot;);                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2256                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2257             }                                                                                            </span>
<span  style="">2258                                                                                                          </span>
<span class="1896400737527502430" onmouseenter="enter('1896400737527502430');" onmouseout="out('1896400737527502430');" style="">2259             // Save a copy of all the bg-thread collections                                              </span>
<span class="8376150118125167095" onmouseenter="enter('8376150118125167095');" onmouseout="out('8376150118125167095');" style="">2260             ArrayList&lt;ItemInfo&gt; workspaceItems = new ArrayList&lt;ItemInfo&gt;();                              </span>
<span class="-9044996375001817267" onmouseenter="enter('-9044996375001817267');" onmouseout="out('-9044996375001817267');" style="">2261             ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets =                                                </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2262                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="1486993560554459234" onmouseenter="enter('1486993560554459234');" onmouseout="out('1486993560554459234');" style="">2263             HashMap&lt;Long, FolderInfo&gt; folders = new HashMap&lt;Long, FolderInfo&gt;();                         </span>
<span class="-2531396011753159513" onmouseenter="enter('-2531396011753159513');" onmouseout="out('-2531396011753159513');" style="">2264             HashMap&lt;Long, ItemInfo&gt; itemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                          </span>
<span class="2122428953856879736" onmouseenter="enter('2122428953856879736');" onmouseout="out('2122428953856879736');" style="">2265             ArrayList&lt;Long&gt; orderedScreenIds = new ArrayList&lt;Long&gt;();                                    </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2266             synchronized (sBgLock) {                                                                     </span>
<span class="2318166879831487746" onmouseenter="enter('2318166879831487746');" onmouseout="out('2318166879831487746');" style="">2267                 workspaceItems.addAll(sBgWorkspaceItems);                                                </span>
<span class="5776161881735381038" onmouseenter="enter('5776161881735381038');" onmouseout="out('5776161881735381038');" style="">2268                 appWidgets.addAll(sBgAppWidgets);                                                        </span>
<span class="1929780610659636161" onmouseenter="enter('1929780610659636161');" onmouseout="out('1929780610659636161');" style="">2269                 folders.putAll(sBgFolders);                                                              </span>
<span class="3382494184063613290" onmouseenter="enter('3382494184063613290');" onmouseout="out('3382494184063613290');" style="">2270                 itemsIdMap.putAll(sBgItemsIdMap);                                                        </span>
<span class="-8476373911620507604" onmouseenter="enter('-8476373911620507604');" onmouseout="out('-8476373911620507604');" style="">2271                 orderedScreenIds.addAll(sBgWorkspaceScreens);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2272             }                                                                                            </span>
<span  style="">2273                                                                                                          </span>
<span class="-6727444800593242016" onmouseenter="enter('-6727444800593242016');" onmouseout="out('-6727444800593242016');" style="">2274             final boolean isLoadingSynchronously =                                                       </span>
<span class="-5819807820500279130" onmouseenter="enter('-5819807820500279130');" onmouseout="out('-5819807820500279130');" style="">2275                     synchronizeBindPage != PagedView.INVALID_RESTORE_PAGE;                               </span>
<span class="2949253642379813881" onmouseenter="enter('2949253642379813881');" onmouseout="out('2949253642379813881');" style="">2276             int currScreen = isLoadingSynchronously ? synchronizeBindPage :                              </span>
<span class="-3178994835189561329" onmouseenter="enter('-3178994835189561329');" onmouseout="out('-3178994835189561329');" style="">2277                 oldCallbacks.getCurrentWorkspaceScreen();                                                </span>
<span class="-8072033936298463796" onmouseenter="enter('-8072033936298463796');" onmouseout="out('-8072033936298463796');" style="">2278             if (currScreen &gt;= orderedScreenIds.size()) {                                                 </span>
<span class="6825640116866860115" onmouseenter="enter('6825640116866860115');" onmouseout="out('6825640116866860115');" style="">2279                 // There may be no workspace screens (just hotseat items and an empty page).             </span>
<span class="-1349681419310339536" onmouseenter="enter('-1349681419310339536');" onmouseout="out('-1349681419310339536');" style="">2280                 currScreen = PagedView.INVALID_RESTORE_PAGE;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2281             }                                                                                            </span>
<span class="-335994314648006585" onmouseenter="enter('-335994314648006585');" onmouseout="out('-335994314648006585');" style="">2282             final int currentScreen = currScreen;                                                        </span>
<span class="2351793782480240365" onmouseenter="enter('2351793782480240365');" onmouseout="out('2351793782480240365');" style="">2283             final long currentScreenId = currentScreen &lt; 0                                               </span>
<span class="-3569859106639415689" onmouseenter="enter('-3569859106639415689');" onmouseout="out('-3569859106639415689');" style="">2284                     ? INVALID_SCREEN_ID : orderedScreenIds.get(currentScreen);                           </span>
<span  style="">2285                                                                                                          </span>
<span class="6814554556760518768" onmouseenter="enter('6814554556760518768');" onmouseout="out('6814554556760518768');" style="">2286             // Load all the items that are on the current page first (and in the process, unbind         </span>
<span class="-8025412368184811901" onmouseenter="enter('-8025412368184811901');" onmouseout="out('-8025412368184811901');" style="">2287             // all the existing workspace items before we call startBinding() below.                     </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style="">2288             unbindWorkspaceItemsOnMainThread();                                                          </span>
<span  style="">2289                                                                                                          </span>
<span class="-2890632990436762470" onmouseenter="enter('-2890632990436762470');" onmouseout="out('-2890632990436762470');" style="">2290             // Separate the items that are on the current screen, and all the other remaining items      </span>
<span class="-1725873569461296561" onmouseenter="enter('-1725873569461296561');" onmouseout="out('-1725873569461296561');" style="">2291             ArrayList&lt;ItemInfo&gt; currentWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                       </span>
<span class="-3652813720009519444" onmouseenter="enter('-3652813720009519444');" onmouseout="out('-3652813720009519444');" style="">2292             ArrayList&lt;ItemInfo&gt; otherWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                         </span>
<span class="1957921863279922763" onmouseenter="enter('1957921863279922763');" onmouseout="out('1957921863279922763');" style="">2293             ArrayList&lt;LauncherAppWidgetInfo&gt; currentAppWidgets =                                         </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2294                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="-340469327534164281" onmouseenter="enter('-340469327534164281');" onmouseout="out('-340469327534164281');" style="">2295             ArrayList&lt;LauncherAppWidgetInfo&gt; otherAppWidgets =                                           </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2296                     new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                              </span>
<span class="1678682221916250445" onmouseenter="enter('1678682221916250445');" onmouseout="out('1678682221916250445');" style="">2297             HashMap&lt;Long, FolderInfo&gt; currentFolders = new HashMap&lt;Long, FolderInfo&gt;();                  </span>
<span class="6055163357301009248" onmouseenter="enter('6055163357301009248');" onmouseout="out('6055163357301009248');" style="">2298             HashMap&lt;Long, FolderInfo&gt; otherFolders = new HashMap&lt;Long, FolderInfo&gt;();                    </span>
<span  style="">2299                                                                                                          </span>
<span class="-6089822518842723893" onmouseenter="enter('-6089822518842723893');" onmouseout="out('-6089822518842723893');" style="">2300             filterCurrentWorkspaceItems(currentScreenId, workspaceItems, currentWorkspaceItems,          </span>
<span class="-8375758480995422912" onmouseenter="enter('-8375758480995422912');" onmouseout="out('-8375758480995422912');" style="">2301                     otherWorkspaceItems);                                                                </span>
<span class="-866463348054163616" onmouseenter="enter('-866463348054163616');" onmouseout="out('-866463348054163616');" style="">2302             filterCurrentAppWidgets(currentScreenId, appWidgets, currentAppWidgets,                      </span>
<span class="4579895579276341407" onmouseenter="enter('4579895579276341407');" onmouseout="out('4579895579276341407');" style="">2303                     otherAppWidgets);                                                                    </span>
<span class="-8098352111604685386" onmouseenter="enter('-8098352111604685386');" onmouseout="out('-8098352111604685386');" style="">2304             filterCurrentFolders(currentScreenId, itemsIdMap, folders, currentFolders,                   </span>
<span class="9146999591596374961" onmouseenter="enter('9146999591596374961');" onmouseout="out('9146999591596374961');" style="">2305                     otherFolders);                                                                       </span>
<span class="-3334490908115707670" onmouseenter="enter('-3334490908115707670');" onmouseout="out('-3334490908115707670');" style="">2306             sortWorkspaceItemsSpatially(currentWorkspaceItems);                                          </span>
<span class="7557616132302919391" onmouseenter="enter('7557616132302919391');" onmouseout="out('7557616132302919391');" style="">2307             sortWorkspaceItemsSpatially(otherWorkspaceItems);                                            </span>
<span  style="">2308                                                                                                          </span>
<span class="-5681027322920042460" onmouseenter="enter('-5681027322920042460');" onmouseout="out('-5681027322920042460');" style="">2309             // Tell the workspace that we&#x27;re about to start binding items                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2310             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2311                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2312                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2313                     if (callbacks != null) {                                                             </span>
<span class="-4858717627969339167" onmouseenter="enter('-4858717627969339167');" onmouseout="out('-4858717627969339167');" style="">2314                         callbacks.startBinding();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2315                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2316                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2317             };                                                                                           </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2318             runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                            </span>
<span  style="">2319                                                                                                          </span>
<span class="5270406270692369283" onmouseenter="enter('5270406270692369283');" onmouseout="out('5270406270692369283');" style="">2320             bindWorkspaceScreens(oldCallbacks, orderedScreenIds);                                        </span>
<span  style="">2321                                                                                                          </span>
<span class="-8614752954403058095" onmouseenter="enter('-8614752954403058095');" onmouseout="out('-8614752954403058095');" style="">2322             // Load items on the current page                                                            </span>
<span class="7514755776427017102" onmouseenter="enter('7514755776427017102');" onmouseout="out('7514755776427017102');" style="">2323             bindWorkspaceItems(oldCallbacks, currentWorkspaceItems, currentAppWidgets,                   </span>
<span class="-6104188658851873503" onmouseenter="enter('-6104188658851873503');" onmouseout="out('-6104188658851873503');" style="">2324                     currentFolders, null);                                                               </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2325             if (isLoadingSynchronously) {                                                                </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2326                 r = new Runnable() {                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2327                     public void run() {                                                                  </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2328                         Callbacks callbacks = tryGetCallbacks(oldCallbacks);                             </span>
<span class="1520569606497568986" onmouseenter="enter('1520569606497568986');" onmouseout="out('1520569606497568986');" style="">2329                         if (callbacks != null &amp;&amp; currentScreen != PagedView.INVALID_RESTORE_PAGE) {      </span>
<span class="-8453570054408401460" onmouseenter="enter('-8453570054408401460');" onmouseout="out('-8453570054408401460');" style="">2330                             callbacks.onPageBoundSynchronously(currentScreen);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2331                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2332                     }                                                                                    </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2333                 };                                                                                       </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2334                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2335             }                                                                                            </span>
<span  style="">2336                                                                                                          </span>
<span class="-5413736965388393233" onmouseenter="enter('-5413736965388393233');" onmouseout="out('-5413736965388393233');" style="">2337             // Load all the remaining pages (if we are loading synchronously, we want to defer this      </span>
<span class="-2955787106587599134" onmouseenter="enter('-2955787106587599134');" onmouseout="out('-2955787106587599134');" style="">2338             // work until after the first render)                                                        </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">2339             mDeferredBindRunnables.clear();                                                              </span>
<span class="5032352887958756295" onmouseenter="enter('5032352887958756295');" onmouseout="out('5032352887958756295');" style="">2340             bindWorkspaceItems(oldCallbacks, otherWorkspaceItems, otherAppWidgets, otherFolders,         </span>
<span class="-2167949041803207061" onmouseenter="enter('-2167949041803207061');" onmouseout="out('-2167949041803207061');" style="">2341                     (isLoadingSynchronously ? mDeferredBindRunnables : null));                           </span>
<span  style="">2342                                                                                                          </span>
<span class="4011061048965913553" onmouseenter="enter('4011061048965913553');" onmouseout="out('4011061048965913553');" style="">2343             // Tell the workspace that we&#x27;re done binding items                                          </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2344             r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2345                 public void run() {                                                                      </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2346                     Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                 </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2347                     if (callbacks != null) {                                                             </span>
<span class="4571657590383009749" onmouseenter="enter('4571657590383009749');" onmouseout="out('4571657590383009749');" style="">2348                         callbacks.finishBindingItems(isUpgradePath);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2349                     }                                                                                    </span>
<span  style="">2350                                                                                                          </span>
<span class="3327220122133784387" onmouseenter="enter('3327220122133784387');" onmouseout="out('3327220122133784387');" style="">2351                     // If we&#x27;re profiling, ensure this is the last thing in the queue.                   </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2352                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="355954012869630075" onmouseenter="enter('355954012869630075');" onmouseout="out('355954012869630075');" style="">2353                         Log.d(TAG, &quot;bound workspace in &quot;                                                 </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2354                             + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2355                     }                                                                                    </span>
<span  style="">2356                                                                                                          </span>
<span class="-2372807547969983284" onmouseenter="enter('-2372807547969983284');" onmouseout="out('-2372807547969983284');" style="">2357                     mIsLoadingAndBindingWorkspace = false;                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2358                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2359             };                                                                                           </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2360             if (isLoadingSynchronously) {                                                                </span>
<span class="-7585940083186897617" onmouseenter="enter('-7585940083186897617');" onmouseout="out('-7585940083186897617');" style="">2361                 mDeferredBindRunnables.add(r);                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2362             } else {                                                                                     </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2363                 runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2364             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2365         }                                                                                                </span>
<span  style="">2366                                                                                                          </span>
<span class="-8837645024880398734" onmouseenter="enter('-8837645024880398734');" onmouseout="out('-8837645024880398734');" style="">2367         private void loadAndBindAllApps() {                                                              </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2368             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-2830976254331120227" onmouseenter="enter('-2830976254331120227');" onmouseout="out('-2830976254331120227');" style="">2369                 Log.d(TAG, &quot;loadAndBindAllApps mAllAppsLoaded=&quot; + mAllAppsLoaded);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2370             }                                                                                            </span>
<span class="-6125216986221494355" onmouseenter="enter('-6125216986221494355');" onmouseout="out('-6125216986221494355');" style="">2371             if (!mAllAppsLoaded) {                                                                       </span>
<span class="5842757820135196564" onmouseenter="enter('5842757820135196564');" onmouseout="out('5842757820135196564');" style="">2372                 loadAllApps();                                                                           </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">2373                 synchronized (LoaderTask.this) {                                                         </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2374                     if (mStopped) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2375                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2376                     }                                                                                    </span>
<span class="4623635226903027710" onmouseenter="enter('4623635226903027710');" onmouseout="out('4623635226903027710');" style="">2377                     mAllAppsLoaded = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2378                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2379             } else {                                                                                     </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">2380                 onlyBindAllApps();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2381             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2382         }                                                                                                </span>
<span  style="">2383                                                                                                          </span>
<span class="4707433981787810272" onmouseenter="enter('4707433981787810272');" onmouseout="out('4707433981787810272');" style="">2384         private void onlyBindAllApps() {                                                                 </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2385             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2386             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2387                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="1659909424723635951" onmouseenter="enter('1659909424723635951');" onmouseout="out('1659909424723635951');" style="">2388                 Log.w(TAG, &quot;LoaderTask running with no launcher (onlyBindAllApps)&quot;);                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2389                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2390             }                                                                                            </span>
<span  style="">2391                                                                                                          </span>
<span class="904073869424416989" onmouseenter="enter('904073869424416989');" onmouseout="out('904073869424416989');" style="">2392             // shallow copy                                                                              </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">2393             @SuppressWarnings(&quot;unchecked&quot;)                                                               </span>
<span class="6400779648201267598" onmouseenter="enter('6400779648201267598');" onmouseout="out('6400779648201267598');" style="">2394             final ArrayList&lt;AppInfo&gt; list                                                                </span>
<span class="-2385577679344520462" onmouseenter="enter('-2385577679344520462');" onmouseout="out('-2385577679344520462');" style="">2395                     = (ArrayList&lt;AppInfo&gt;) mBgAllAppsList.data.clone();                                  </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">2396             Runnable r = new Runnable() {                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2397                 public void run() {                                                                      </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2398                     final long t = SystemClock.uptimeMillis();                                           </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2399                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2400                     if (callbacks != null) {                                                             </span>
<span class="-4175293191087427555" onmouseenter="enter('-4175293191087427555');" onmouseout="out('-4175293191087427555');" style="">2401                         callbacks.bindAllApplications(list);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2402                     }                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2403                     if (DEBUG_LOADERS) {                                                                 </span>
<span class="-8852680552322187165" onmouseenter="enter('-8852680552322187165');" onmouseout="out('-8852680552322187165');" style="">2404                         Log.d(TAG, &quot;bound all &quot; + list.size() + &quot; apps from cache in &quot;                   </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2405                                 + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2406                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2407                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2408             };                                                                                           </span>
<span class="1625697599418198126" onmouseenter="enter('1625697599418198126');" onmouseout="out('1625697599418198126');" style="">2409             boolean isRunningOnMainThread = !(sWorkerThread.getThreadId() == Process.myTid());           </span>
<span class="-5455987777066046644" onmouseenter="enter('-5455987777066046644');" onmouseout="out('-5455987777066046644');" style="">2410             if (isRunningOnMainThread) {                                                                 </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style="">2411                 r.run();                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2412             } else {                                                                                     </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="">2413                 mHandler.post(r);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2414             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2415         }                                                                                                </span>
<span  style="">2416                                                                                                          </span>
<span class="-6895852158956881814" onmouseenter="enter('-6895852158956881814');" onmouseout="out('-6895852158956881814');" style="">2417         private void loadAllApps() {                                                                     </span>
<span class="3240137791137450764" onmouseenter="enter('3240137791137450764');" onmouseout="out('3240137791137450764');" style="">2418             final long loadTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                        </span>
<span  style="">2419                                                                                                          </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2420             final Callbacks oldCallbacks = mCallbacks.get();                                             </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2421             if (oldCallbacks == null) {                                                                  </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2422                 // This launcher has exited and nobody bothered to tell us.  Just bail.                  </span>
<span class="-6509823964207432628" onmouseenter="enter('-6509823964207432628');" onmouseout="out('-6509823964207432628');" style="">2423                 Log.w(TAG, &quot;LoaderTask running with no launcher (loadAllApps)&quot;);                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2424                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2425             }                                                                                            </span>
<span  style="">2426                                                                                                          </span>
<span class="1501892088590866369" onmouseenter="enter('1501892088590866369');" onmouseout="out('1501892088590866369');" style="">2427             final PackageManager packageManager = mContext.getPackageManager();                          </span>
<span class="3249044048564826962" onmouseenter="enter('3249044048564826962');" onmouseout="out('3249044048564826962');" style="">2428             final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);                              </span>
<span class="7749064114250496515" onmouseenter="enter('7749064114250496515');" onmouseout="out('7749064114250496515');" style="">2429             mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                            </span>
<span  style="">2430                                                                                                          </span>
<span class="2323997493385795900" onmouseenter="enter('2323997493385795900');" onmouseout="out('2323997493385795900');" style="">2431             // Clear the list of apps                                                                    </span>
<span class="-3100741238331493656" onmouseenter="enter('-3100741238331493656');" onmouseout="out('-3100741238331493656');" style="">2432             mBgAllAppsList.clear();                                                                      </span>
<span  style="">2433                                                                                                          </span>
<span class="-4489177435133431981" onmouseenter="enter('-4489177435133431981');" onmouseout="out('-4489177435133431981');" style="">2434             // Query for the set of apps                                                                 </span>
<span class="6799319218362813943" onmouseenter="enter('6799319218362813943');" onmouseout="out('6799319218362813943');" style="">2435             final long qiaTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                         </span>
<span class="-7993784721640929386" onmouseenter="enter('-7993784721640929386');" onmouseout="out('-7993784721640929386');" style="">2436             List&lt;ResolveInfo&gt; apps = packageManager.queryIntentActivities(mainIntent, 0);                </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2437             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-8953089628779584367" onmouseenter="enter('-8953089628779584367');" onmouseout="out('-8953089628779584367');" style="">2438                 Log.d(TAG, &quot;queryIntentActivities took &quot;                                                 </span>
<span class="8237341079980485738" onmouseenter="enter('8237341079980485738');" onmouseout="out('8237341079980485738');" style="">2439                         + (SystemClock.uptimeMillis()-qiaTime) + &quot;ms&quot;);                                  </span>
<span class="-9015079490762020933" onmouseenter="enter('-9015079490762020933');" onmouseout="out('-9015079490762020933');" style="">2440                 Log.d(TAG, &quot;queryIntentActivities got &quot; + apps.size() + &quot; apps&quot;);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2441             }                                                                                            </span>
<span class="-1144129018602551066" onmouseenter="enter('-1144129018602551066');" onmouseout="out('-1144129018602551066');" style="">2442             // Fail if we don&#x27;t have any apps                                                            </span>
<span class="-1385682343056466434" onmouseenter="enter('-1385682343056466434');" onmouseout="out('-1385682343056466434');" style="">2443             if (apps == null || apps.isEmpty()) {                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2444                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2445             }                                                                                            </span>
<span class="-5585112001695951885" onmouseenter="enter('-5585112001695951885');" onmouseout="out('-5585112001695951885');" style="">2446             // Sort the applications by name                                                             </span>
<span class="5879018485786384871" onmouseenter="enter('5879018485786384871');" onmouseout="out('5879018485786384871');" style="">2447             final long sortTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                        </span>
<span class="3347614076781191804" onmouseenter="enter('3347614076781191804');" onmouseout="out('3347614076781191804');" style="">2448             Collections.sort(apps,                                                                       </span>
<span class="-8211974845882715204" onmouseenter="enter('-8211974845882715204');" onmouseout="out('-8211974845882715204');" style="">2449                     new LauncherModel.ShortcutNameComparator(packageManager, mLabelCache));              </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2450             if (DEBUG_LOADERS) {                                                                         </span>
<span class="8116347759372038508" onmouseenter="enter('8116347759372038508');" onmouseout="out('8116347759372038508');" style="">2451                 Log.d(TAG, &quot;sort took &quot;                                                                  </span>
<span class="992817212926202968" onmouseenter="enter('992817212926202968');" onmouseout="out('992817212926202968');" style="">2452                         + (SystemClock.uptimeMillis()-sortTime) + &quot;ms&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2453             }                                                                                            </span>
<span  style="">2454                                                                                                          </span>
<span class="7729934896614039986" onmouseenter="enter('7729934896614039986');" onmouseout="out('7729934896614039986');" style="">2455             // Create the ApplicationInfos                                                               </span>
<span class="-5895751517948944509" onmouseenter="enter('-5895751517948944509');" onmouseout="out('-5895751517948944509');" style="">2456             for (int i = 0; i &lt; apps.size(); i++) {                                                      </span>
<span class="2626157602240887809" onmouseenter="enter('2626157602240887809');" onmouseout="out('2626157602240887809');" style="">2457                 ResolveInfo app = apps.get(i);                                                           </span>
<span class="3586781851650279349" onmouseenter="enter('3586781851650279349');" onmouseout="out('3586781851650279349');" style="">2458                 // This builds the icon bitmaps.                                                         </span>
<span class="-6607005785467864621" onmouseenter="enter('-6607005785467864621');" onmouseout="out('-6607005785467864621');" style="">2459                 mBgAllAppsList.add(new AppInfo(packageManager, app,                                      </span>
<span class="-2018038209439913805" onmouseenter="enter('-2018038209439913805');" onmouseout="out('-2018038209439913805');" style="">2460                         mIconCache, mLabelCache));                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2461             }                                                                                            </span>
<span  style="">2462                                                                                                          </span>
<span class="-5221747652878631284" onmouseenter="enter('-5221747652878631284');" onmouseout="out('-5221747652878631284');" style="">2463             // Huh? Shouldn&#x27;t this be inside the Runnable below?                                         </span>
<span class="4457761250277868019" onmouseenter="enter('4457761250277868019');" onmouseout="out('4457761250277868019');" style="">2464             final ArrayList&lt;AppInfo&gt; added = mBgAllAppsList.added;                                       </span>
<span class="3218431008368817671" onmouseenter="enter('3218431008368817671');" onmouseout="out('3218431008368817671');" style="">2465             mBgAllAppsList.added = new ArrayList&lt;AppInfo&gt;();                                             </span>
<span  style="">2466                                                                                                          </span>
<span class="2526791049904400058" onmouseenter="enter('2526791049904400058');" onmouseout="out('2526791049904400058');" style="">2467             // Post callback on main thread                                                              </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2468             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2469                 public void run() {                                                                      </span>
<span class="-2007882421121122273" onmouseenter="enter('-2007882421121122273');" onmouseout="out('-2007882421121122273');" style="">2470                     final long bindTime = SystemClock.uptimeMillis();                                    </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2471                     final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2472                     if (callbacks != null) {                                                             </span>
<span class="8095088373687662981" onmouseenter="enter('8095088373687662981');" onmouseout="out('8095088373687662981');" style="">2473                         callbacks.bindAllApplications(added);                                            </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2474                         if (DEBUG_LOADERS) {                                                             </span>
<span class="1059969227192257889" onmouseenter="enter('1059969227192257889');" onmouseout="out('1059969227192257889');" style="">2475                             Log.d(TAG, &quot;bound &quot; + added.size() + &quot; apps in &quot;                             </span>
<span class="-7437359873458345222" onmouseenter="enter('-7437359873458345222');" onmouseout="out('-7437359873458345222');" style="">2476                                 + (SystemClock.uptimeMillis() - bindTime) + &quot;ms&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2477                         }                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2478                     } else {                                                                             </span>
<span class="7641212838781589328" onmouseenter="enter('7641212838781589328');" onmouseout="out('7641212838781589328');" style="">2479                         Log.i(TAG, &quot;not binding apps: no Launcher activity&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2480                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2481                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2482             });                                                                                          </span>
<span  style="">2483                                                                                                          </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2484             if (DEBUG_LOADERS) {                                                                         </span>
<span class="-4702241865893587262" onmouseenter="enter('-4702241865893587262');" onmouseout="out('-4702241865893587262');" style="">2485                 Log.d(TAG, &quot;Icons processed in &quot;                                                         </span>
<span class="-1277503613614461490" onmouseenter="enter('-1277503613614461490');" onmouseout="out('-1277503613614461490');" style="">2486                         + (SystemClock.uptimeMillis() - loadTime) + &quot;ms&quot;);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2487             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2488         }                                                                                                </span>
<span  style="">2489                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">2490         public void dumpState() {                                                                        </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2491             synchronized (sBgLock) {                                                                     </span>
<span class="8510692516384923340" onmouseenter="enter('8510692516384923340');" onmouseout="out('8510692516384923340');" style="">2492                 Log.d(TAG, &quot;mLoaderTask.mContext=&quot; + mContext);                                          </span>
<span class="-5057473576968780754" onmouseenter="enter('-5057473576968780754');" onmouseout="out('-5057473576968780754');" style="">2493                 Log.d(TAG, &quot;mLoaderTask.mIsLaunching=&quot; + mIsLaunching);                                  </span>
<span class="5394362584347621452" onmouseenter="enter('5394362584347621452');" onmouseout="out('5394362584347621452');" style="">2494                 Log.d(TAG, &quot;mLoaderTask.mStopped=&quot; + mStopped);                                          </span>
<span class="2283901653600186000" onmouseenter="enter('2283901653600186000');" onmouseout="out('2283901653600186000');" style="">2495                 Log.d(TAG, &quot;mLoaderTask.mLoadAndBindStepFinished=&quot; + mLoadAndBindStepFinished);          </span>
<span class="-259407417202798794" onmouseenter="enter('-259407417202798794');" onmouseout="out('-259407417202798794');" style="">2496                 Log.d(TAG, &quot;mItems size=&quot; + sBgWorkspaceItems.size());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2497             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2498         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2499     }                                                                                                    </span>
<span  style="">2500                                                                                                          </span>
<span class="7630100460211487014" onmouseenter="enter('7630100460211487014');" onmouseout="out('7630100460211487014');" style="">2501     void enqueuePackageUpdated(PackageUpdatedTask task) {                                                </span>
<span class="5827584276449890800" onmouseenter="enter('5827584276449890800');" onmouseout="out('5827584276449890800');" style="">2502         sWorker.post(task);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2503     }                                                                                                    </span>
<span  style="">2504                                                                                                          </span>
<span class="4517543426948493114" onmouseenter="enter('4517543426948493114');" onmouseout="out('4517543426948493114');" style="">2505     private class PackageUpdatedTask implements Runnable {                                               </span>
<span class="-2369313534963024986" onmouseenter="enter('-2369313534963024986');" onmouseout="out('-2369313534963024986');" style="">2506         int mOp;                                                                                         </span>
<span  style="">2507                                                                                                          </span>
<span class="1329266106484135476" onmouseenter="enter('1329266106484135476');" onmouseout="out('1329266106484135476');" style="">2508         String[] mPackages;                                                                              </span>
<span  style="">2509                                                                                                          </span>
<span class="7962554983790751070" onmouseenter="enter('7962554983790751070');" onmouseout="out('7962554983790751070');" style="">2510         public static final int OP_NONE = 0;                                                             </span>
<span  style="">2511                                                                                                          </span>
<span class="2199739460496975128" onmouseenter="enter('2199739460496975128');" onmouseout="out('2199739460496975128');" style="">2512         public static final int OP_ADD = 1;                                                              </span>
<span  style="">2513                                                                                                          </span>
<span class="-6492257742329868745" onmouseenter="enter('-6492257742329868745');" onmouseout="out('-6492257742329868745');" style="">2514         public static final int OP_UPDATE = 2;                                                           </span>
<span  style="">2515                                                                                                          </span>
<span class="7552840216364086352" onmouseenter="enter('7552840216364086352');" onmouseout="out('7552840216364086352');" style="">2516         // uninstlled                                                                                    </span>
<span class="7223750328294921743" onmouseenter="enter('7223750328294921743');" onmouseout="out('7223750328294921743');" style="">2517         public static final int OP_REMOVE = 3; // uninstlled                                             </span>
<span  style="">2518                                                                                                          </span>
<span class="75376153538485775" onmouseenter="enter('75376153538485775');" onmouseout="out('75376153538485775');" style="">2519         // external media unmounted                                                                      </span>
<span class="8627918612960647103" onmouseenter="enter('8627918612960647103');" onmouseout="out('8627918612960647103');" style="">2520         public static final int OP_UNAVAILABLE = 4; // external media unmounted                          </span>
<span  style="">2521                                                                                                          </span>
<span class="-2899951589874278155" onmouseenter="enter('-2899951589874278155');" onmouseout="out('-2899951589874278155');" style="">2522         public PackageUpdatedTask(int op, String[] packages) {                                           </span>
<span class="191999664456871419" onmouseenter="enter('191999664456871419');" onmouseout="out('191999664456871419');" style="">2523             mOp = op;                                                                                    </span>
<span class="-8641118446551244060" onmouseenter="enter('-8641118446551244060');" onmouseout="out('-8641118446551244060');" style="">2524             mPackages = packages;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2525         }                                                                                                </span>
<span  style="">2526                                                                                                          </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2527         public void run() {                                                                              </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">2528             final Context context = mApp.getContext();                                                   </span>
<span class="-8513751550533795426" onmouseenter="enter('-8513751550533795426');" onmouseout="out('-8513751550533795426');" style="">2529             final String[] packages = mPackages;                                                         </span>
<span class="3997761927841529422" onmouseenter="enter('3997761927841529422');" onmouseout="out('3997761927841529422');" style="">2530             final int N = packages.length;                                                               </span>
<span class="-2883270888213154035" onmouseenter="enter('-2883270888213154035');" onmouseout="out('-2883270888213154035');" style="">2531             switch (mOp) {                                                                               </span>
<span class="-4399643213085174409" onmouseenter="enter('-4399643213085174409');" onmouseout="out('-4399643213085174409');" style="">2532                 case OP_ADD :                                                                            </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2533                     for (int i = 0; i &lt; N; i++) {                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2534                         if (DEBUG_LOADERS) {                                                             </span>
<span class="-127576380874548097" onmouseenter="enter('-127576380874548097');" onmouseout="out('-127576380874548097');" style="">2535                             Log.d(TAG, &quot;mAllAppsList.addPackage &quot; + packages[i]);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2536                         }                                                                                </span>
<span class="-7654565316708220659" onmouseenter="enter('-7654565316708220659');" onmouseout="out('-7654565316708220659');" style="">2537                         mIconCache.remove(packages[i]);                                                  </span>
<span class="-2949849672001849759" onmouseenter="enter('-2949849672001849759');" onmouseout="out('-2949849672001849759');" style="">2538                         mBgAllAppsList.addPackage(context, packages[i]);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2539                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2540                     break;                                                                               </span>
<span class="-292270606337492127" onmouseenter="enter('-292270606337492127');" onmouseout="out('-292270606337492127');" style="">2541                 case OP_UPDATE :                                                                         </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2542                     for (int i = 0; i &lt; N; i++) {                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2543                         if (DEBUG_LOADERS) {                                                             </span>
<span class="-4422863114349853532" onmouseenter="enter('-4422863114349853532');" onmouseout="out('-4422863114349853532');" style="">2544                             Log.d(TAG, &quot;mAllAppsList.updatePackage &quot; + packages[i]);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2545                         }                                                                                </span>
<span class="-272128531266392722" onmouseenter="enter('-272128531266392722');" onmouseout="out('-272128531266392722');" style="">2546                         mBgAllAppsList.updatePackage(context, packages[i]);                              </span>
<span class="6401867013694049249" onmouseenter="enter('6401867013694049249');" onmouseout="out('6401867013694049249');" style=""><abbr title="2547                         WidgetPreviewLoader.removePackageFromDb(mApp.getWidgetPreviewCacheDb(), packages[i]);">2547                         WidgetPreviewLoader.removePackageFromDb(mApp.getWidgetPreviewCacheDb(), packages[</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2548                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2549                     break;                                                                               </span>
<span class="4174522110729030147" onmouseenter="enter('4174522110729030147');" onmouseout="out('4174522110729030147');" style="">2550                 case OP_REMOVE :                                                                         </span>
<span class="-5034577413987496211" onmouseenter="enter('-5034577413987496211');" onmouseout="out('-5034577413987496211');" style="">2551                 case OP_UNAVAILABLE :                                                                    </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2552                     for (int i = 0; i &lt; N; i++) {                                                        </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2553                         if (DEBUG_LOADERS) {                                                             </span>
<span class="6512000517820647607" onmouseenter="enter('6512000517820647607');" onmouseout="out('6512000517820647607');" style="">2554                             Log.d(TAG, &quot;mAllAppsList.removePackage &quot; + packages[i]);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2555                         }                                                                                </span>
<span class="7669526743413608016" onmouseenter="enter('7669526743413608016');" onmouseout="out('7669526743413608016');" style="">2556                         mBgAllAppsList.removePackage(packages[i]);                                       </span>
<span class="6401867013694049249" onmouseenter="enter('6401867013694049249');" onmouseout="out('6401867013694049249');" style=""><abbr title="2557                         WidgetPreviewLoader.removePackageFromDb(mApp.getWidgetPreviewCacheDb(), packages[i]);">2557                         WidgetPreviewLoader.removePackageFromDb(mApp.getWidgetPreviewCacheDb(), packages[</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2558                     }                                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2559                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2560             }                                                                                            </span>
<span class="1572309132673002234" onmouseenter="enter('1572309132673002234');" onmouseout="out('1572309132673002234');" style="">2561             ArrayList&lt;AppInfo&gt; added = null;                                                             </span>
<span class="-3271065843717738915" onmouseenter="enter('-3271065843717738915');" onmouseout="out('-3271065843717738915');" style="">2562             ArrayList&lt;AppInfo&gt; modified = null;                                                          </span>
<span class="-5760221660526082511" onmouseenter="enter('-5760221660526082511');" onmouseout="out('-5760221660526082511');" style="">2563             final ArrayList&lt;AppInfo&gt; removedApps = new ArrayList&lt;AppInfo&gt;();                             </span>
<span class="5103344907876037986" onmouseenter="enter('5103344907876037986');" onmouseout="out('5103344907876037986');" style="">2564             if (mBgAllAppsList.added.size() &gt; 0) {                                                       </span>
<span class="-6832117111735480722" onmouseenter="enter('-6832117111735480722');" onmouseout="out('-6832117111735480722');" style="">2565                 added = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.added);                                    </span>
<span class="7424740575354292437" onmouseenter="enter('7424740575354292437');" onmouseout="out('7424740575354292437');" style="">2566                 mBgAllAppsList.added.clear();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2567             }                                                                                            </span>
<span class="-2487689472149982581" onmouseenter="enter('-2487689472149982581');" onmouseout="out('-2487689472149982581');" style="">2568             if (mBgAllAppsList.modified.size() &gt; 0) {                                                    </span>
<span class="-263080790556278433" onmouseenter="enter('-263080790556278433');" onmouseout="out('-263080790556278433');" style="">2569                 modified = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.modified);                              </span>
<span class="7356755564467619497" onmouseenter="enter('7356755564467619497');" onmouseout="out('7356755564467619497');" style="">2570                 mBgAllAppsList.modified.clear();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2571             }                                                                                            </span>
<span class="1067177803970588976" onmouseenter="enter('1067177803970588976');" onmouseout="out('1067177803970588976');" style="">2572             if (mBgAllAppsList.removed.size() &gt; 0) {                                                     </span>
<span class="7103303915069909513" onmouseenter="enter('7103303915069909513');" onmouseout="out('7103303915069909513');" style="">2573                 removedApps.addAll(mBgAllAppsList.removed);                                              </span>
<span class="6489927836548040849" onmouseenter="enter('6489927836548040849');" onmouseout="out('6489927836548040849');" style="">2574                 mBgAllAppsList.removed.clear();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2575             }                                                                                            </span>
<span class="-2944114548254090265" onmouseenter="enter('-2944114548254090265');" onmouseout="out('-2944114548254090265');" style="">2576             final Callbacks callbacks = (mCallbacks != null) ? mCallbacks.get() : null;                  </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">2577             if (callbacks == null) {                                                                     </span>
<span class="8755914139287185296" onmouseenter="enter('8755914139287185296');" onmouseout="out('8755914139287185296');" style="">2578                 Log.w(TAG, &quot;Nobody to tell about the new app.  Launcher is probably loading.&quot;);          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2579                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2580             }                                                                                            </span>
<span class="-6581952787492343966" onmouseenter="enter('-6581952787492343966');" onmouseout="out('-6581952787492343966');" style="">2581             if (added != null) {                                                                         </span>
<span class="2110051729201547029" onmouseenter="enter('2110051729201547029');" onmouseout="out('2110051729201547029');" style="">2582                 // Ensure that we add all the workspace applications to the db                           </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style="">2583                 Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;                           </span>
<span class="-6277587630605553211" onmouseenter="enter('-6277587630605553211');" onmouseout="out('-6277587630605553211');" style="">2584                 if (!LauncherAppState.isDisableAllApps()) {                                              </span>
<span class="4785144545835380546" onmouseenter="enter('4785144545835380546');" onmouseout="out('4785144545835380546');" style="">2585                     addAndBindAddedApps(context, new ArrayList&lt;ItemInfo&gt;(), cb, added);                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2586                 } else {                                                                                 </span>
<span class="7560882443822012182" onmouseenter="enter('7560882443822012182');" onmouseout="out('7560882443822012182');" style="">2587                     final ArrayList&lt;ItemInfo&gt; addedInfos = new ArrayList&lt;ItemInfo&gt;(added);               </span>
<span class="620263930069644182" onmouseenter="enter('620263930069644182');" onmouseout="out('620263930069644182');" style="">2588                     addAndBindAddedApps(context, addedInfos, cb, added);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2589                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2590             }                                                                                            </span>
<span class="4007684711155860753" onmouseenter="enter('4007684711155860753');" onmouseout="out('4007684711155860753');" style="">2591             if (modified != null) {                                                                      </span>
<span class="-853311881612082067" onmouseenter="enter('-853311881612082067');" onmouseout="out('-853311881612082067');" style="">2592                 final ArrayList&lt;AppInfo&gt; modifiedFinal = modified;                                       </span>
<span class="417723722259394800" onmouseenter="enter('417723722259394800');" onmouseout="out('417723722259394800');" style="">2593                 // Update the launcher db to reflect the changes                                         </span>
<span class="3799410015074169733" onmouseenter="enter('3799410015074169733');" onmouseout="out('3799410015074169733');" style="">2594                 for (AppInfo a : modifiedFinal) {                                                        </span>
<span class="-8237639399264107586" onmouseenter="enter('-8237639399264107586');" onmouseout="out('-8237639399264107586');" style="">2595                     ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName);            </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2596                     for (ItemInfo i : infos) {                                                           </span>
<span class="5214363519588275687" onmouseenter="enter('5214363519588275687');" onmouseout="out('5214363519588275687');" style="">2597                         if (isShortcutInfoUpdateable(i)) {                                               </span>
<span class="7602451342572088838" onmouseenter="enter('7602451342572088838');" onmouseout="out('7602451342572088838');" style="">2598                             ShortcutInfo info = ((ShortcutInfo) (i));                                    </span>
<span class="8144150917785227032" onmouseenter="enter('8144150917785227032');" onmouseout="out('8144150917785227032');" style="">2599                             info.title = a.title.toString();                                             </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">2600                             updateItemInDatabase(context, info);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2601                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2602                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2603                 }                                                                                        </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2604                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2605                     public void run() {                                                                  </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style="">2606                         Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;                   </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style="">2607                         if ((callbacks == cb) &amp;&amp; (cb != null)) {                                         </span>
<span class="-2589314362702357801" onmouseenter="enter('-2589314362702357801');" onmouseout="out('-2589314362702357801');" style="">2608                             callbacks.bindAppsUpdated(modifiedFinal);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2609                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2610                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2611                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2612             }                                                                                            </span>
<span class="8617927331448094408" onmouseenter="enter('8617927331448094408');" onmouseout="out('8617927331448094408');" style="">2613             final ArrayList&lt;String&gt; removedPackageNames = new ArrayList&lt;String&gt;();                       </span>
<span class="-5885531662055245301" onmouseenter="enter('-5885531662055245301');" onmouseout="out('-5885531662055245301');" style="">2614             if (mOp == OP_REMOVE) {                                                                      </span>
<span class="6542623662317418523" onmouseenter="enter('6542623662317418523');" onmouseout="out('6542623662317418523');" style="">2615                 // Mark all packages in the broadcast to be removed                                      </span>
<span class="7356949459385151824" onmouseenter="enter('7356949459385151824');" onmouseout="out('7356949459385151824');" style="">2616                 removedPackageNames.addAll(Arrays.asList(packages));                                     </span>
<span class="-2422536769068214973" onmouseenter="enter('-2422536769068214973');" onmouseout="out('-2422536769068214973');" style="">2617             } else if (mOp == OP_UPDATE) {                                                               </span>
<span class="3231313637982916616" onmouseenter="enter('3231313637982916616');" onmouseout="out('3231313637982916616');" style="">2618                 // Mark disabled packages in the broadcast to be removed                                 </span>
<span class="-2640468621226648159" onmouseenter="enter('-2640468621226648159');" onmouseout="out('-2640468621226648159');" style="">2619                 final PackageManager pm = context.getPackageManager();                                   </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2620                 for (int i = 0; i &lt; N; i++) {                                                            </span>
<span class="2935426733804348481" onmouseenter="enter('2935426733804348481');" onmouseout="out('2935426733804348481');" style="">2621                     if (isPackageDisabled(pm, packages[i])) {                                            </span>
<span class="3041794132682496657" onmouseenter="enter('3041794132682496657');" onmouseout="out('3041794132682496657');" style="">2622                         removedPackageNames.add(packages[i]);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2623                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2624                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2625             }                                                                                            </span>
<span class="-6735782234278978643" onmouseenter="enter('-6735782234278978643');" onmouseout="out('-6735782234278978643');" style="">2626             // Remove all the components associated with this package                                    </span>
<span class="8695538150112490085" onmouseenter="enter('8695538150112490085');" onmouseout="out('8695538150112490085');" style="">2627             for (String pn : removedPackageNames) {                                                      </span>
<span class="-8111972255125637177" onmouseenter="enter('-8111972255125637177');" onmouseout="out('-8111972255125637177');" style="">2628                 ArrayList&lt;ItemInfo&gt; infos = getItemInfoForPackageName(pn);                               </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2629                 for (ItemInfo i : infos) {                                                               </span>
<span class="3909885620637543615" onmouseenter="enter('3909885620637543615');" onmouseout="out('3909885620637543615');" style="">2630                     deleteItemFromDatabase(context, i);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2631                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2632             }                                                                                            </span>
<span class="-2056292254334887175" onmouseenter="enter('-2056292254334887175');" onmouseout="out('-2056292254334887175');" style="">2633             // Remove all the specific components                                                        </span>
<span class="-974749610616658114" onmouseenter="enter('-974749610616658114');" onmouseout="out('-974749610616658114');" style="">2634             for (AppInfo a : removedApps) {                                                              </span>
<span class="-8237639399264107586" onmouseenter="enter('-8237639399264107586');" onmouseout="out('-8237639399264107586');" style="">2635                 ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName);                </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2636                 for (ItemInfo i : infos) {                                                               </span>
<span class="3909885620637543615" onmouseenter="enter('3909885620637543615');" onmouseout="out('3909885620637543615');" style="">2637                     deleteItemFromDatabase(context, i);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2638                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2639             }                                                                                            </span>
<span class="4476200888748494282" onmouseenter="enter('4476200888748494282');" onmouseout="out('4476200888748494282');" style="">2640             if ((!removedPackageNames.isEmpty()) || (!removedApps.isEmpty())) {                          </span>
<span class="-8579411662137624168" onmouseenter="enter('-8579411662137624168');" onmouseout="out('-8579411662137624168');" style="">2641                 // Remove any queued items from the install queue                                        </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style="">2642                 String spKey = LauncherAppState.getSharedPreferencesKey();                               </span>
<span class="6255842996478861527" onmouseenter="enter('6255842996478861527');" onmouseout="out('6255842996478861527');" style="">2643                 SharedPreferences sp = context.getSharedPreferences(spKey, Context.MODE_PRIVATE);        </span>
<span class="3942499314707869646" onmouseenter="enter('3942499314707869646');" onmouseout="out('3942499314707869646');" style="">2644                 InstallShortcutReceiver.removeFromInstallQueue(sp, removedPackageNames);                 </span>
<span class="-3818855430394316108" onmouseenter="enter('-3818855430394316108');" onmouseout="out('-3818855430394316108');" style="">2645                 // Call the components-removed callback                                                  </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2646                 mHandler.post(new Runnable() {                                                           </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2647                     public void run() {                                                                  </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style="">2648                         Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;                   </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style="">2649                         if ((callbacks == cb) &amp;&amp; (cb != null)) {                                         </span>
<span class="7123425932844918056" onmouseenter="enter('7123425932844918056');" onmouseout="out('7123425932844918056');" style="">2650                             callbacks.bindComponentsRemoved(removedPackageNames, removedApps);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2651                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2652                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2653                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2654             }                                                                                            </span>
<span class="7426150459827124612" onmouseenter="enter('7426150459827124612');" onmouseout="out('7426150459827124612');" style="">2655             final ArrayList&lt;Object&gt; widgetsAndShortcuts = getSortedWidgetsAndShortcuts(context);         </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2656             mHandler.post(new Runnable() {                                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2657                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2658                 public void run() {                                                                      </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style="">2659                     Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;                       </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style="">2660                     if ((callbacks == cb) &amp;&amp; (cb != null)) {                                             </span>
<span class="-5360632898061832848" onmouseenter="enter('-5360632898061832848');" onmouseout="out('-5360632898061832848');" style="">2661                         callbacks.bindPackagesUpdated(widgetsAndShortcuts);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2662                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2663                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2664             });                                                                                          </span>
<span class="2246235439938918294" onmouseenter="enter('2246235439938918294');" onmouseout="out('2246235439938918294');" style="">2665             // Write all the logs to disk                                                                </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2666             mHandler.post(new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2667                 public void run() {                                                                      </span>
<span class="-7613638104290313362" onmouseenter="enter('-7613638104290313362');" onmouseout="out('-7613638104290313362');" style="">2668                     Callbacks cb = (mCallbacks != null) ? mCallbacks.get() : null;                       </span>
<span class="8315619412299887176" onmouseenter="enter('8315619412299887176');" onmouseout="out('8315619412299887176');" style="">2669                     if ((callbacks == cb) &amp;&amp; (cb != null)) {                                             </span>
<span class="-3509183204751013036" onmouseenter="enter('-3509183204751013036');" onmouseout="out('-3509183204751013036');" style="">2670                         callbacks.dumpLogsToLocalData();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2671                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2672                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2673             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2674         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2675     }                                                                                                    </span>
<span  style="">2676                                                                                                          </span>
<span class="5799248721363180071" onmouseenter="enter('5799248721363180071');" onmouseout="out('5799248721363180071');" style="">2677     // Returns a list of ResolveInfos/AppWindowInfos in sorted order                                     </span>
<span class="-3838691324560082495" onmouseenter="enter('-3838691324560082495');" onmouseout="out('-3838691324560082495');" style="">2678     public static ArrayList&lt;Object&gt; getSortedWidgetsAndShortcuts(Context context) {                      </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">2679         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-7530033640159092210" onmouseenter="enter('-7530033640159092210');" onmouseout="out('-7530033640159092210');" style="">2680         final ArrayList&lt;Object&gt; widgetsAndShortcuts = new ArrayList&lt;Object&gt;();                           </span>
<span class="-3206018607877806445" onmouseenter="enter('-3206018607877806445');" onmouseout="out('-3206018607877806445');" style="">2681         widgetsAndShortcuts.addAll(AppWidgetManager.getInstance(context).getInstalledProviders());       </span>
<span class="7483011368565278291" onmouseenter="enter('7483011368565278291');" onmouseout="out('7483011368565278291');" style="">2682         Intent shortcutsIntent = new Intent(Intent.ACTION_CREATE_SHORTCUT);                              </span>
<span class="-1563771411674199697" onmouseenter="enter('-1563771411674199697');" onmouseout="out('-1563771411674199697');" style="">2683         widgetsAndShortcuts.addAll(packageManager.queryIntentActivities(shortcutsIntent, 0));            </span>
<span class="-1102952865112100125" onmouseenter="enter('-1102952865112100125');" onmouseout="out('-1102952865112100125');" style="">2684         Collections.sort(widgetsAndShortcuts,                                                            </span>
<span class="-1681839338823179912" onmouseenter="enter('-1681839338823179912');" onmouseout="out('-1681839338823179912');" style="">2685             new LauncherModel.WidgetAndShortcutNameComparator(packageManager));                          </span>
<span class="4818388040543649614" onmouseenter="enter('4818388040543649614');" onmouseout="out('4818388040543649614');" style="">2686         return widgetsAndShortcuts;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2687     }                                                                                                    </span>
<span  style="">2688                                                                                                          </span>
<span class="8250241672786329916" onmouseenter="enter('8250241672786329916');" onmouseout="out('8250241672786329916');" style="">2689     private static boolean isPackageDisabled(PackageManager pm, String packageName) {                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2690         try {                                                                                            </span>
<span class="4500642088138919346" onmouseenter="enter('4500642088138919346');" onmouseout="out('4500642088138919346');" style="">2691             PackageInfo pi = pm.getPackageInfo(packageName, 0);                                          </span>
<span class="-3710685366547959245" onmouseenter="enter('-3710685366547959245');" onmouseout="out('-3710685366547959245');" style="">2692             return !pi.applicationInfo.enabled;                                                          </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="">2693         } catch (NameNotFoundException e) {                                                              </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style="">2694             // Fall through                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2695         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2696         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2697     }                                                                                                    </span>
<span  style="">2698                                                                                                          </span>
<span class="5484824579758440772" onmouseenter="enter('5484824579758440772');" onmouseout="out('5484824579758440772');" style="">2699     public static boolean isValidPackageComponent(PackageManager pm, ComponentName cn) {                 </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style="">2700         if (cn == null) {                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2701             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2702         }                                                                                                </span>
<span class="3920598161938602311" onmouseenter="enter('3920598161938602311');" onmouseout="out('3920598161938602311');" style="">2703         if (isPackageDisabled(pm, cn.getPackageName())) {                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2704             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2705         }                                                                                                </span>
<span  style="">2706                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2707         try {                                                                                            </span>
<span class="5148337441661745301" onmouseenter="enter('5148337441661745301');" onmouseout="out('5148337441661745301');" style="">2708             // Check the activity                                                                        </span>
<span class="-3548512208842411383" onmouseenter="enter('-3548512208842411383');" onmouseout="out('-3548512208842411383');" style="">2709             PackageInfo pi = pm.getPackageInfo(cn.getPackageName(), 0);                                  </span>
<span class="-7304348613249571904" onmouseenter="enter('-7304348613249571904');" onmouseout="out('-7304348613249571904');" style="">2710             return (pm.getActivityInfo(cn, 0) != null);                                                  </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="">2711         } catch (NameNotFoundException e) {                                                              </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2712             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2713         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2714     }                                                                                                    </span>
<span  style="">2715                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2716     /**                                                                                                  </span>
<span class="-1422058377481062223" onmouseenter="enter('-1422058377481062223');" onmouseout="out('-1422058377481062223');" style="">2717      * Make an ShortcutInfo object for a restored application or shortcut item that points               </span>
<span class="-3240825039404734763" onmouseenter="enter('-3240825039404734763');" onmouseout="out('-3240825039404734763');" style="">2718      * to a package that is not yet installed on the system.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2719      */                                                                                                  </span>
<span class="1063415479211056267" onmouseenter="enter('1063415479211056267');" onmouseout="out('1063415479211056267');" style="">2720     public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex) {                             </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">2721         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style="">2722         if (cursor != null) {                                                                            </span>
<span class="-4786724678059863942" onmouseenter="enter('-4786724678059863942');" onmouseout="out('-4786724678059863942');" style="">2723             info.title = cursor.getString(titleIndex);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2724         } else {                                                                                         </span>
<span class="-9179287796133695880" onmouseenter="enter('-9179287796133695880');" onmouseout="out('-9179287796133695880');" style="">2725             info.title = &quot;&quot;;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2726         }                                                                                                </span>
<span class="-1591268116362889652" onmouseenter="enter('-1591268116362889652');" onmouseout="out('-1591268116362889652');" style="">2727         info.setIcon(mIconCache.getIcon(intent, info.title.toString()));                                 </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">2728         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">2729         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2730     }                                                                                                    </span>
<span  style="">2731                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2732     /**                                                                                                  </span>
<span class="3086315656576237338" onmouseenter="enter('3086315656576237338');" onmouseout="out('3086315656576237338');" style="">2733      * Make an Intent object for a restored application or shortcut item that points                     </span>
<span class="-6367188518910147180" onmouseenter="enter('-6367188518910147180');" onmouseout="out('-6367188518910147180');" style="">2734      * to the market page for the item.                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2735      */                                                                                                  </span>
<span class="-6647643744207470673" onmouseenter="enter('-6647643744207470673');" onmouseout="out('-6647643744207470673');" style="">2736     private Intent getRestoredItemIntent(Cursor c, Context context, Intent intent) {                     </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">2737         ComponentName componentName = intent.getComponent();                                             </span>
<span class="5230577021520033618" onmouseenter="enter('5230577021520033618');" onmouseout="out('5230577021520033618');" style="">2738         Intent marketIntent = new Intent(Intent.ACTION_VIEW);                                            </span>
<span class="-5473125514048560713" onmouseenter="enter('-5473125514048560713');" onmouseout="out('-5473125514048560713');" style=""><abbr title="2739         Uri marketUri = new Uri.Builder().scheme(&quot;market&quot;).authority(&quot;details&quot;).appendQueryParameter(&quot;id&quot;, componentName.getPackageName()).build();">2739         Uri marketUri = new Uri.Builder().scheme(&quot;market&quot;).authority(&quot;details&quot;).appendQueryParameter(&quot;id&quot;</abbr></span>
<span class="-8203346918939498134" onmouseenter="enter('-8203346918939498134');" onmouseout="out('-8203346918939498134');" style="">2740         Log.d(TAG, &quot;manufactured intent uri: &quot; + marketUri.toString());                                  </span>
<span class="8200775736438266685" onmouseenter="enter('8200775736438266685');" onmouseout="out('8200775736438266685');" style="">2741         marketIntent.setData(marketUri);                                                                 </span>
<span class="-840031405639981960" onmouseenter="enter('-840031405639981960');" onmouseout="out('-840031405639981960');" style="">2742         return marketIntent;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2743     }                                                                                                    </span>
<span  style="">2744                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2745     /**                                                                                                  </span>
<span class="6759547650823633948" onmouseenter="enter('6759547650823633948');" onmouseout="out('6759547650823633948');" style="">2746      * This is called from the code that adds shortcuts from the intent receiver.  This                  </span>
<span class="1598280755109073179" onmouseenter="enter('1598280755109073179');" onmouseout="out('1598280755109073179');" style="">2747      * doesn&#x27;t have a Cursor, but                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2748      */                                                                                                  </span>
<span class="5614106103309211810" onmouseenter="enter('5614106103309211810');" onmouseout="out('5614106103309211810');" style="">2749     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context) {        </span>
<span class="-3335806789481426156" onmouseenter="enter('-3335806789481426156');" onmouseout="out('-3335806789481426156');" style="">2750         return getShortcutInfo(manager, intent, context, null, -1, -1, null);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2751     }                                                                                                    </span>
<span  style="">2752                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2753     /**                                                                                                  </span>
<span class="-1467760634860339139" onmouseenter="enter('-1467760634860339139');" onmouseout="out('-1467760634860339139');" style="">2754      * Make an ShortcutInfo object for a shortcut that is an application.                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2755      *                                                                                                   </span>
<span class="-3542647944112672905" onmouseenter="enter('-3542647944112672905');" onmouseout="out('-3542647944112672905');" style="">2756      * If c is not null, then it will be used to fill in missing data like the title and icon.           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2757      */                                                                                                  </span>
<span class="1276500584496912228" onmouseenter="enter('1276500584496912228');" onmouseout="out('1276500584496912228');" style="">2758     public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context,          </span>
<span class="-7918747784600027039" onmouseenter="enter('-7918747784600027039');" onmouseout="out('-7918747784600027039');" style="">2759             Cursor c, int iconIndex, int titleIndex, HashMap&lt;Object, CharSequence&gt; labelCache) {         </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">2760         ComponentName componentName = intent.getComponent();                                             </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">2761         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="444940595441544179" onmouseenter="enter('444940595441544179');" onmouseout="out('444940595441544179');" style="">2762         if (componentName != null &amp;&amp; !isValidPackageComponent(manager, componentName)) {                 </span>
<span class="-409027952341615484" onmouseenter="enter('-409027952341615484');" onmouseout="out('-409027952341615484');" style="">2763             Log.d(TAG, &quot;Invalid package found in getShortcutInfo: &quot; + componentName);                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">2764             return null;                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2765         } else {                                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2766             try {                                                                                        </span>
<span class="4294749985361673643" onmouseenter="enter('4294749985361673643');" onmouseout="out('4294749985361673643');" style="">2767                 PackageInfo pi = manager.getPackageInfo(componentName.getPackageName(), 0);              </span>
<span class="3308885914817688196" onmouseenter="enter('3308885914817688196');" onmouseout="out('3308885914817688196');" style="">2768                 info.initFlagsAndFirstInstallTime(pi);                                                   </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="">2769             } catch (NameNotFoundException e) {                                                          </span>
<span class="-3402401844985211338" onmouseenter="enter('-3402401844985211338');" onmouseout="out('-3402401844985211338');" style="">2770                 Log.d(TAG, &quot;getPackInfo failed for package &quot; +                                           </span>
<span class="-7617949507024469990" onmouseenter="enter('-7617949507024469990');" onmouseout="out('-7617949507024469990');" style="">2771                         componentName.getPackageName());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2772             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2773         }                                                                                                </span>
<span  style="">2774                                                                                                          </span>
<span class="-5839804976451698217" onmouseenter="enter('-5839804976451698217');" onmouseout="out('-5839804976451698217');" style="">2775         // TODO: See if the PackageManager knows about this case.  If it doesn&#x27;t                         </span>
<span class="-575420847374711684" onmouseenter="enter('-575420847374711684');" onmouseout="out('-575420847374711684');" style="">2776         // then return null &amp; delete this.                                                               </span>
<span  style="">2777                                                                                                          </span>
<span class="5323402181664282980" onmouseenter="enter('5323402181664282980');" onmouseout="out('5323402181664282980');" style="">2778         // the resource -- This may implicitly give us back the fallback icon,                           </span>
<span class="-798092997962515080" onmouseenter="enter('-798092997962515080');" onmouseout="out('-798092997962515080');" style="">2779         // but don&#x27;t worry about that.  All we&#x27;re doing with usingFallbackIcon is                        </span>
<span class="4614559195454825202" onmouseenter="enter('4614559195454825202');" onmouseout="out('4614559195454825202');" style="">2780         // to avoid saving lots of copies of that in the database, and most apps                         </span>
<span class="2042041324737915810" onmouseenter="enter('2042041324737915810');" onmouseout="out('2042041324737915810');" style="">2781         // have icons anyway.                                                                            </span>
<span  style="">2782                                                                                                          </span>
<span class="1748721733354639816" onmouseenter="enter('1748721733354639816');" onmouseout="out('1748721733354639816');" style="">2783         // Attempt to use queryIntentActivities to get the ResolveInfo (with IntentFilter info) and      </span>
<span class="-6676021501376744578" onmouseenter="enter('-6676021501376744578');" onmouseout="out('-6676021501376744578');" style="">2784         // if that fails, or is ambiguious, fallback to the standard way of getting the resolve info     </span>
<span class="-6094266232633177049" onmouseenter="enter('-6094266232633177049');" onmouseout="out('-6094266232633177049');" style="">2785         // via resolveActivity().                                                                        </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">2786         Bitmap icon = null;                                                                              </span>
<span class="-12205607414596767" onmouseenter="enter('-12205607414596767');" onmouseout="out('-12205607414596767');" style="">2787         ResolveInfo resolveInfo = null;                                                                  </span>
<span class="5248255614039346565" onmouseenter="enter('5248255614039346565');" onmouseout="out('5248255614039346565');" style="">2788         ComponentName oldComponent = intent.getComponent();                                              </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="">2789         Intent newIntent = new Intent(intent.getAction(), null);                                         </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="">2790         newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                 </span>
<span class="-4528672120988578527" onmouseenter="enter('-4528672120988578527');" onmouseout="out('-4528672120988578527');" style="">2791         newIntent.setPackage(oldComponent.getPackageName());                                             </span>
<span class="-4266560778617611378" onmouseenter="enter('-4266560778617611378');" onmouseout="out('-4266560778617611378');" style="">2792         List&lt;ResolveInfo&gt; infos = manager.queryIntentActivities(newIntent, 0);                           </span>
<span class="-1258353831095463835" onmouseenter="enter('-1258353831095463835');" onmouseout="out('-1258353831095463835');" style="">2793         for (ResolveInfo i : infos) {                                                                    </span>
<span class="5094763243037624802" onmouseenter="enter('5094763243037624802');" onmouseout="out('5094763243037624802');" style="">2794             ComponentName cn = new ComponentName(i.activityInfo.packageName,                             </span>
<span class="1720373740013823268" onmouseenter="enter('1720373740013823268');" onmouseout="out('1720373740013823268');" style="">2795                     i.activityInfo.name);                                                                </span>
<span class="-7290368567659218563" onmouseenter="enter('-7290368567659218563');" onmouseout="out('-7290368567659218563');" style="">2796             if (cn.equals(oldComponent)) {                                                               </span>
<span class="-6794055892963959667" onmouseenter="enter('-6794055892963959667');" onmouseout="out('-6794055892963959667');" style="">2797                 resolveInfo = i;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2798             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2799         }                                                                                                </span>
<span class="6326898777629576914" onmouseenter="enter('6326898777629576914');" onmouseout="out('6326898777629576914');" style="">2800         if (resolveInfo == null) {                                                                       </span>
<span class="8776212146813846258" onmouseenter="enter('8776212146813846258');" onmouseout="out('8776212146813846258');" style="">2801             resolveInfo = manager.resolveActivity(intent, 0);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2802         }                                                                                                </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="">2803         if (resolveInfo != null) {                                                                       </span>
<span class="-7448006110826377930" onmouseenter="enter('-7448006110826377930');" onmouseout="out('-7448006110826377930');" style="">2804             icon = mIconCache.getIcon(componentName, resolveInfo, labelCache);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2805         }                                                                                                </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">2806         // the db                                                                                        </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">2807         if (icon == null) {                                                                              </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2808             if (c != null) {                                                                             </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">2809                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2810             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2811         }                                                                                                </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">2812         // the fallback icon                                                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">2813         if (icon == null) {                                                                              </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">2814             icon = getFallbackIcon();                                                                    </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">2815             info.usingFallbackIcon = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2816         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">2817         info.setIcon(icon);                                                                              </span>
<span  style="">2818                                                                                                          </span>
<span class="7054767873271725898" onmouseenter="enter('7054767873271725898');" onmouseout="out('7054767873271725898');" style="">2819         // from the resource                                                                             </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="">2820         if (resolveInfo != null) {                                                                       </span>
<span class="4800110805856691594" onmouseenter="enter('4800110805856691594');" onmouseout="out('4800110805856691594');" style="">2821             ComponentName key = LauncherModel.getComponentNameFromResolveInfo(resolveInfo);              </span>
<span class="8748582400169036217" onmouseenter="enter('8748582400169036217');" onmouseout="out('8748582400169036217');" style="">2822             if (labelCache != null &amp;&amp; labelCache.containsKey(key)) {                                     </span>
<span class="3192670581922801839" onmouseenter="enter('3192670581922801839');" onmouseout="out('3192670581922801839');" style="">2823                 info.title = labelCache.get(key);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2824             } else {                                                                                     </span>
<span class="-2714967885034418454" onmouseenter="enter('-2714967885034418454');" onmouseout="out('-2714967885034418454');" style="">2825                 info.title = resolveInfo.activityInfo.loadLabel(manager);                                </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="">2826                 if (labelCache != null) {                                                                </span>
<span class="-7678945850387299322" onmouseenter="enter('-7678945850387299322');" onmouseout="out('-7678945850387299322');" style="">2827                     labelCache.put(key, info.title);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2828                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2829             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2830         }                                                                                                </span>
<span class="-7465759676168587687" onmouseenter="enter('-7465759676168587687');" onmouseout="out('-7465759676168587687');" style="">2831         // from the db                                                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">2832         if (info.title == null) {                                                                        </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2833             if (c != null) {                                                                             </span>
<span class="-3184821142709825057" onmouseenter="enter('-3184821142709825057');" onmouseout="out('-3184821142709825057');" style="">2834                 info.title =  c.getString(titleIndex);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2835             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2836         }                                                                                                </span>
<span class="-3300288691074588674" onmouseenter="enter('-3300288691074588674');" onmouseout="out('-3300288691074588674');" style="">2837         // fall back to the class name of the activity                                                   </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">2838         if (info.title == null) {                                                                        </span>
<span class="-8852275649252281641" onmouseenter="enter('-8852275649252281641');" onmouseout="out('-8852275649252281641');" style="">2839             info.title = componentName.getClassName();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2840         }                                                                                                </span>
<span class="7933897515512130399" onmouseenter="enter('7933897515512130399');" onmouseout="out('7933897515512130399');" style="">2841         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_APPLICATION;                                </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">2842         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2843     }                                                                                                    </span>
<span  style="">2844                                                                                                          </span>
<span class="4439425861689174202" onmouseenter="enter('4439425861689174202');" onmouseout="out('4439425861689174202');" style="">2845     static ArrayList&lt;ItemInfo&gt; filterItemInfos(Collection&lt;ItemInfo&gt; infos,                               </span>
<span class="6562040460462558270" onmouseenter="enter('6562040460462558270');" onmouseout="out('6562040460462558270');" style="">2846             ItemInfoFilter f) {                                                                          </span>
<span class="-341948731893176054" onmouseenter="enter('-341948731893176054');" onmouseout="out('-341948731893176054');" style="">2847         HashSet&lt;ItemInfo&gt; filtered = new HashSet&lt;ItemInfo&gt;();                                            </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2848         for (ItemInfo i : infos) {                                                                       </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">2849             if (i instanceof ShortcutInfo) {                                                             </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">2850                 ShortcutInfo info = (ShortcutInfo) i;                                                    </span>
<span class="299648897077832064" onmouseenter="enter('299648897077832064');" onmouseout="out('299648897077832064');" style="">2851                 ComponentName cn = info.intent.getComponent();                                           </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">2852                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">2853                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2854                 }                                                                                        </span>
<span class="-3991875190988320435" onmouseenter="enter('-3991875190988320435');" onmouseout="out('-3991875190988320435');" style="">2855             } else if (i instanceof FolderInfo) {                                                        </span>
<span class="5655388972065239375" onmouseenter="enter('5655388972065239375');" onmouseout="out('5655388972065239375');" style="">2856                 FolderInfo info = (FolderInfo) i;                                                        </span>
<span class="551974476971988370" onmouseenter="enter('551974476971988370');" onmouseout="out('551974476971988370');" style="">2857                 for (ShortcutInfo s : info.contents) {                                                   </span>
<span class="2331162999822676145" onmouseenter="enter('2331162999822676145');" onmouseout="out('2331162999822676145');" style="">2858                     ComponentName cn = s.intent.getComponent();                                          </span>
<span class="-203564141906270755" onmouseenter="enter('-203564141906270755');" onmouseout="out('-203564141906270755');" style="">2859                     if (cn != null &amp;&amp; f.filterItem(info, s, cn)) {                                       </span>
<span class="-3396286072640698031" onmouseenter="enter('-3396286072640698031');" onmouseout="out('-3396286072640698031');" style="">2860                         filtered.add(s);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2861                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2862                 }                                                                                        </span>
<span class="-6245773261295261120" onmouseenter="enter('-6245773261295261120');" onmouseout="out('-6245773261295261120');" style="">2863             } else if (i instanceof LauncherAppWidgetInfo) {                                             </span>
<span class="-9066656906031581030" onmouseenter="enter('-9066656906031581030');" onmouseout="out('-9066656906031581030');" style="">2864                 LauncherAppWidgetInfo info = (LauncherAppWidgetInfo) i;                                  </span>
<span class="7149829203308063306" onmouseenter="enter('7149829203308063306');" onmouseout="out('7149829203308063306');" style="">2865                 ComponentName cn = info.providerName;                                                    </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">2866                 if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                        </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">2867                     filtered.add(info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2868                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2869             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2870         }                                                                                                </span>
<span class="-61899809234431084" onmouseenter="enter('-61899809234431084');" onmouseout="out('-61899809234431084');" style="">2871         return new ArrayList&lt;ItemInfo&gt;(filtered);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2872     }                                                                                                    </span>
<span  style="">2873                                                                                                          </span>
<span class="-3045683366231863679" onmouseenter="enter('-3045683366231863679');" onmouseout="out('-3045683366231863679');" style="">2874     private ArrayList&lt;ItemInfo&gt; getItemInfoForPackageName(final String pn) {                             </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">2875         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2876             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">2877             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="4366277958827250658" onmouseenter="enter('4366277958827250658');" onmouseout="out('4366277958827250658');" style="">2878                 return cn.getPackageName().equals(pn);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2879             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2880         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">2881         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2882     }                                                                                                    </span>
<span  style="">2883                                                                                                          </span>
<span class="5278497386445713053" onmouseenter="enter('5278497386445713053');" onmouseout="out('5278497386445713053');" style="">2884     private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname) {                 </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">2885         ItemInfoFilter filter  = new ItemInfoFilter() {                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2886             @Override                                                                                    </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">2887             public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="">2888                 return cn.equals(cname);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2889             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2890         };                                                                                               </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">2891         return filterItemInfos(sBgItemsIdMap.values(), filter);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2892     }                                                                                                    </span>
<span  style="">2893                                                                                                          </span>
<span class="1124396970102851152" onmouseenter="enter('1124396970102851152');" onmouseout="out('1124396970102851152');" style="">2894     public static boolean isShortcutInfoUpdateable(ItemInfo i) {                                         </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">2895         if (i instanceof ShortcutInfo) {                                                                 </span>
<span class="7602451342572088838" onmouseenter="enter('7602451342572088838');" onmouseout="out('7602451342572088838');" style="">2896             ShortcutInfo info = ((ShortcutInfo) (i));                                                    </span>
<span class="-4176416752413564182" onmouseenter="enter('-4176416752413564182');" onmouseout="out('-4176416752413564182');" style="">2897             // We need to check for ACTION_MAIN otherwise getComponent() might                           </span>
<span class="-4431177575884820054" onmouseenter="enter('-4431177575884820054');" onmouseout="out('-4431177575884820054');" style="">2898             // return null for some shortcuts (for instance, for shortcuts to                            </span>
<span class="5405126151757999271" onmouseenter="enter('5405126151757999271');" onmouseout="out('5405126151757999271');" style="">2899             // web pages.)                                                                               </span>
<span class="2400775771645829424" onmouseenter="enter('2400775771645829424');" onmouseout="out('2400775771645829424');" style="">2900             Intent intent = info.intent;                                                                 </span>
<span class="5515215321882412237" onmouseenter="enter('5515215321882412237');" onmouseout="out('5515215321882412237');" style="">2901             ComponentName name = intent.getComponent();                                                  </span>
<span class="6342345119459728583" onmouseenter="enter('6342345119459728583');" onmouseout="out('6342345119459728583');" style=""><abbr title="2902             if (((info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) &amp;&amp; Intent.ACTION_MAIN.equals(intent.getAction())) &amp;&amp; (name != null)) {">2902             if (((info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) &amp;&amp; Intent.ACTION_MAI</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">2903                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2904             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2905         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2906         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2907     }                                                                                                    </span>
<span  style="">2908                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2909     /**                                                                                                  </span>
<span class="-7383302121747425580" onmouseenter="enter('-7383302121747425580');" onmouseout="out('-7383302121747425580');" style="">2910      * Make an ShortcutInfo object for a shortcut that isn&#x27;t an application.                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2911      */                                                                                                  </span>
<span class="-832588879686874653" onmouseenter="enter('-832588879686874653');" onmouseout="out('-832588879686874653');" style="">2912     private ShortcutInfo getShortcutInfo(Cursor c, Context context,                                      </span>
<span class="4905943326370352288" onmouseenter="enter('4905943326370352288');" onmouseout="out('4905943326370352288');" style="">2913             int iconTypeIndex, int iconPackageIndex, int iconResourceIndex, int iconIndex,               </span>
<span class="483103881605747557" onmouseenter="enter('483103881605747557');" onmouseout="out('483103881605747557');" style="">2914             int titleIndex) {                                                                            </span>
<span  style="">2915                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">2916         Bitmap icon = null;                                                                              </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">2917         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">2918         info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                   </span>
<span  style="">2919                                                                                                          </span>
<span class="7613558771605813536" onmouseenter="enter('7613558771605813536');" onmouseout="out('7613558771605813536');" style="">2920         // TODO: If there&#x27;s an explicit component and we can&#x27;t install that, delete it.                  </span>
<span  style="">2921                                                                                                          </span>
<span class="7288105011746485932" onmouseenter="enter('7288105011746485932');" onmouseout="out('7288105011746485932');" style="">2922         info.title = c.getString(titleIndex);                                                            </span>
<span  style="">2923                                                                                                          </span>
<span class="3612299538514072472" onmouseenter="enter('3612299538514072472');" onmouseout="out('3612299538514072472');" style="">2924         int iconType = c.getInt(iconTypeIndex);                                                          </span>
<span class="587586912378863553" onmouseenter="enter('587586912378863553');" onmouseout="out('587586912378863553');" style="">2925         switch (iconType) {                                                                              </span>
<span class="-349524516714147238" onmouseenter="enter('-349524516714147238');" onmouseout="out('-349524516714147238');" style="">2926         case LauncherSettings.Favorites.ICON_TYPE_RESOURCE:                                              </span>
<span class="-8135410904448428370" onmouseenter="enter('-8135410904448428370');" onmouseout="out('-8135410904448428370');" style="">2927             String packageName = c.getString(iconPackageIndex);                                          </span>
<span class="-8435258133535712396" onmouseenter="enter('-8435258133535712396');" onmouseout="out('-8435258133535712396');" style="">2928             String resourceName = c.getString(iconResourceIndex);                                        </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">2929             PackageManager packageManager = context.getPackageManager();                                 </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">2930             info.customIcon = false;                                                                     </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style="">2931             // the resource                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2932             try {                                                                                        </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style="">2933                 Resources resources = packageManager.getResourcesForApplication(packageName);            </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style="">2934                 if (resources != null) {                                                                 </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style="">2935                     final int id = resources.getIdentifier(resourceName, null, null);                    </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">2936                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="">2937                             mIconCache.getFullResIcon(resources, id), context);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2938                 }                                                                                        </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">2939             } catch (Exception e) {                                                                      </span>
<span class="5772476326804770264" onmouseenter="enter('5772476326804770264');" onmouseout="out('5772476326804770264');" style="">2940                 // drop this.  we have other places to look for icons                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2941             }                                                                                            </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">2942             // the db                                                                                    </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">2943             if (icon == null) {                                                                          </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">2944                 icon = getIconFromCursor(c, iconIndex, context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2945             }                                                                                            </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">2946             // the fallback icon                                                                         </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">2947             if (icon == null) {                                                                          </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">2948                 icon = getFallbackIcon();                                                                </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">2949                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2950             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2951             break;                                                                                       </span>
<span class="8287056964614325383" onmouseenter="enter('8287056964614325383');" onmouseout="out('8287056964614325383');" style="">2952         case LauncherSettings.Favorites.ICON_TYPE_BITMAP:                                                </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">2953             icon = getIconFromCursor(c, iconIndex, context);                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">2954             if (icon == null) {                                                                          </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">2955                 icon = getFallbackIcon();                                                                </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">2956                 info.customIcon = false;                                                                 </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">2957                 info.usingFallbackIcon = true;                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2958             } else {                                                                                     </span>
<span class="5065693686602940755" onmouseenter="enter('5065693686602940755');" onmouseout="out('5065693686602940755');" style="">2959                 info.customIcon = true;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2960             }                                                                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2961             break;                                                                                       </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">2962         default:                                                                                         </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">2963             icon = getFallbackIcon();                                                                    </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">2964             info.usingFallbackIcon = true;                                                               </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">2965             info.customIcon = false;                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2966             break;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2967         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">2968         info.setIcon(icon);                                                                              </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">2969         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2970     }                                                                                                    </span>
<span  style="">2971                                                                                                          </span>
<span class="6654370236660323989" onmouseenter="enter('6654370236660323989');" onmouseout="out('6654370236660323989');" style="">2972     Bitmap getIconFromCursor(Cursor c, int iconIndex, Context context) {                                 </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style="">2973         @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                           </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style="">2974         final boolean debug = false;                                                                     </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style="">2975         if (debug) {                                                                                     </span>
<span class="-6059745727821652987" onmouseenter="enter('-6059745727821652987');" onmouseout="out('-6059745727821652987');" style="">2976             Log.d(TAG, &quot;getIconFromCursor app=&quot;                                                          </span>
<span class="3938717124241653137" onmouseenter="enter('3938717124241653137');" onmouseout="out('3938717124241653137');" style="">2977                     + c.getString(c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE)));           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2978         }                                                                                                </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="">2979         byte[] data = c.getBlob(iconIndex);                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2980         try {                                                                                            </span>
<span class="-8927216840433750458" onmouseenter="enter('-8927216840433750458');" onmouseout="out('-8927216840433750458');" style="">2981             return Utilities.createIconBitmap(                                                           </span>
<span class="5146235978369237158" onmouseenter="enter('5146235978369237158');" onmouseout="out('5146235978369237158');" style="">2982                     BitmapFactory.decodeByteArray(data, 0, data.length), context);                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">2983         } catch (Exception e) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">2984             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2985         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2986     }                                                                                                    </span>
<span  style="">2987                                                                                                          </span>
<span class="-7359014031490826383" onmouseenter="enter('-7359014031490826383');" onmouseout="out('-7359014031490826383');" style="">2988     ShortcutInfo addShortcut(Context context, Intent data, long container, int screen,                   </span>
<span class="6268414987721391526" onmouseenter="enter('6268414987721391526');" onmouseout="out('6268414987721391526');" style="">2989             int cellX, int cellY, boolean notify) {                                                      </span>
<span class="2628174670305655041" onmouseenter="enter('2628174670305655041');" onmouseout="out('2628174670305655041');" style="">2990         final ShortcutInfo info = infoFromShortcutIntent(context, data, null);                           </span>
<span class="164903852834130891" onmouseenter="enter('164903852834130891');" onmouseout="out('164903852834130891');" style="">2991         if (info == null) {                                                                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">2992             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2993         }                                                                                                </span>
<span class="-221445018295793081" onmouseenter="enter('-221445018295793081');" onmouseout="out('-221445018295793081');" style="">2994         addItemToDatabase(context, info, container, screen, cellX, cellY, notify);                       </span>
<span  style="">2995                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">2996         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2997     }                                                                                                    </span>
<span  style="">2998                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2999     /**                                                                                                  </span>
<span class="-2170604135443496089" onmouseenter="enter('-2170604135443496089');" onmouseout="out('-2170604135443496089');" style="">3000      * Attempts to find an AppWidgetProviderInfo that matches the given component.                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3001      */                                                                                                  </span>
<span class="-5080859468016274115" onmouseenter="enter('-5080859468016274115');" onmouseout="out('-5080859468016274115');" style="">3002     AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context,                        </span>
<span class="2095123178876202639" onmouseenter="enter('2095123178876202639');" onmouseout="out('2095123178876202639');" style="">3003             ComponentName component) {                                                                   </span>
<span class="-6575430528437366773" onmouseenter="enter('-6575430528437366773');" onmouseout="out('-6575430528437366773');" style="">3004         List&lt;AppWidgetProviderInfo&gt; widgets =                                                            </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="">3005             AppWidgetManager.getInstance(context).getInstalledProviders();                               </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">3006         for (AppWidgetProviderInfo info : widgets) {                                                     </span>
<span class="444529726636175405" onmouseenter="enter('444529726636175405');" onmouseout="out('444529726636175405');" style="">3007             if (info.provider.equals(component)) {                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3008                 return info;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3009             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3010         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3011         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3012     }                                                                                                    </span>
<span  style="">3013                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3014     /**                                                                                                  </span>
<span class="7439199513195640847" onmouseenter="enter('7439199513195640847');" onmouseout="out('7439199513195640847');" style="">3015      * Returns a list of all the widgets that can handle configuration with a particular mimeType.       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3016      */                                                                                                  </span>
<span class="6325854662222182070" onmouseenter="enter('6325854662222182070');" onmouseout="out('6325854662222182070');" style="">3017     List&lt;WidgetMimeTypeHandlerData&gt; resolveWidgetsForMimeType(Context context, String mimeType) {        </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">3018         final PackageManager packageManager = context.getPackageManager();                               </span>
<span class="3847705782231652914" onmouseenter="enter('3847705782231652914');" onmouseout="out('3847705782231652914');" style="">3019         final List&lt;WidgetMimeTypeHandlerData&gt; supportedConfigurationActivities =                         </span>
<span class="-5417931937414580646" onmouseenter="enter('-5417931937414580646');" onmouseout="out('-5417931937414580646');" style="">3020             new ArrayList&lt;WidgetMimeTypeHandlerData&gt;();                                                  </span>
<span  style="">3021                                                                                                          </span>
<span class="3700104316520923099" onmouseenter="enter('3700104316520923099');" onmouseout="out('3700104316520923099');" style="">3022         final Intent supportsIntent =                                                                    </span>
<span class="-5996974504874484707" onmouseenter="enter('-5996974504874484707');" onmouseout="out('-5996974504874484707');" style="">3023             new Intent(InstallWidgetReceiver.ACTION_SUPPORTS_CLIPDATA_MIMETYPE);                         </span>
<span class="6679063100467623292" onmouseenter="enter('6679063100467623292');" onmouseout="out('6679063100467623292');" style="">3024         supportsIntent.setType(mimeType);                                                                </span>
<span  style="">3025                                                                                                          </span>
<span class="6275845746944894373" onmouseenter="enter('6275845746944894373');" onmouseout="out('6275845746944894373');" style="">3026         // Create a set of widget configuration components that we can test against                      </span>
<span class="361965435897470734" onmouseenter="enter('361965435897470734');" onmouseout="out('361965435897470734');" style="">3027         final List&lt;AppWidgetProviderInfo&gt; widgets =                                                      </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="">3028             AppWidgetManager.getInstance(context).getInstalledProviders();                               </span>
<span class="9185108259439406491" onmouseenter="enter('9185108259439406491');" onmouseout="out('9185108259439406491');" style="">3029         final HashMap&lt;ComponentName, AppWidgetProviderInfo&gt; configurationComponentToWidget =             </span>
<span class="-4320342521313681795" onmouseenter="enter('-4320342521313681795');" onmouseout="out('-4320342521313681795');" style="">3030             new HashMap&lt;ComponentName, AppWidgetProviderInfo&gt;();                                         </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">3031         for (AppWidgetProviderInfo info : widgets) {                                                     </span>
<span class="-5537825176935075872" onmouseenter="enter('-5537825176935075872');" onmouseout="out('-5537825176935075872');" style="">3032             configurationComponentToWidget.put(info.configure, info);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3033         }                                                                                                </span>
<span  style="">3034                                                                                                          </span>
<span class="7227984661430491714" onmouseenter="enter('7227984661430491714');" onmouseout="out('7227984661430491714');" style="">3035         // Run through each of the intents that can handle this type of clip data, and cross             </span>
<span class="-5312515598910931459" onmouseenter="enter('-5312515598910931459');" onmouseout="out('-5312515598910931459');" style="">3036         // reference them with the components that are actual configuration components                   </span>
<span class="96188399651153294" onmouseenter="enter('96188399651153294');" onmouseout="out('96188399651153294');" style="">3037         final List&lt;ResolveInfo&gt; activities = packageManager.queryIntentActivities(supportsIntent,        </span>
<span class="2456166036476176214" onmouseenter="enter('2456166036476176214');" onmouseout="out('2456166036476176214');" style="">3038                 PackageManager.MATCH_DEFAULT_ONLY);                                                      </span>
<span class="-6210771211908512935" onmouseenter="enter('-6210771211908512935');" onmouseout="out('-6210771211908512935');" style="">3039         for (ResolveInfo info : activities) {                                                            </span>
<span class="4178492805266676194" onmouseenter="enter('4178492805266676194');" onmouseout="out('4178492805266676194');" style="">3040             final ActivityInfo activityInfo = info.activityInfo;                                         </span>
<span class="5911001791562559694" onmouseenter="enter('5911001791562559694');" onmouseout="out('5911001791562559694');" style="">3041             final ComponentName infoComponent = new ComponentName(activityInfo.packageName,              </span>
<span class="2224927995621460603" onmouseenter="enter('2224927995621460603');" onmouseout="out('2224927995621460603');" style="">3042                     activityInfo.name);                                                                  </span>
<span class="5227428239073058925" onmouseenter="enter('5227428239073058925');" onmouseout="out('5227428239073058925');" style="">3043             if (configurationComponentToWidget.containsKey(infoComponent)) {                             </span>
<span class="1978663855217064477" onmouseenter="enter('1978663855217064477');" onmouseout="out('1978663855217064477');" style="">3044                 supportedConfigurationActivities.add(                                                    </span>
<span class="-7165755523548006690" onmouseenter="enter('-7165755523548006690');" onmouseout="out('-7165755523548006690');" style="">3045                         new InstallWidgetReceiver.WidgetMimeTypeHandlerData(info,                        </span>
<span class="-7657609803705245302" onmouseenter="enter('-7657609803705245302');" onmouseout="out('-7657609803705245302');" style="">3046                                 configurationComponentToWidget.get(infoComponent)));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3047             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3048         }                                                                                                </span>
<span class="8087136273107515292" onmouseenter="enter('8087136273107515292');" onmouseout="out('8087136273107515292');" style="">3049         return supportedConfigurationActivities;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3050     }                                                                                                    </span>
<span  style="">3051                                                                                                          </span>
<span class="-5347330719934774268" onmouseenter="enter('-5347330719934774268');" onmouseout="out('-5347330719934774268');" style="">3052     ShortcutInfo infoFromShortcutIntent(Context context, Intent data, Bitmap fallbackIcon) {             </span>
<span class="8885065625084988978" onmouseenter="enter('8885065625084988978');" onmouseout="out('8885065625084988978');" style="">3053         Intent intent = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_INTENT);                           </span>
<span class="8754707358466729356" onmouseenter="enter('8754707358466729356');" onmouseout="out('8754707358466729356');" style="">3054         String name = data.getStringExtra(Intent.EXTRA_SHORTCUT_NAME);                                   </span>
<span class="-6415007334509386725" onmouseenter="enter('-6415007334509386725');" onmouseout="out('-6415007334509386725');" style="">3055         Parcelable bitmap = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON);                         </span>
<span  style="">3056                                                                                                          </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">3057         if (intent == null) {                                                                            </span>
<span class="-7222749280640950660" onmouseenter="enter('-7222749280640950660');" onmouseout="out('-7222749280640950660');" style="">3058             // If the intent is null, we can&#x27;t construct a valid ShortcutInfo, so we return null         </span>
<span class="2086461264164088394" onmouseenter="enter('2086461264164088394');" onmouseout="out('2086461264164088394');" style="">3059             Log.e(TAG, &quot;Can&#x27;t construct ShorcutInfo with null intent&quot;);                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3060             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3061         }                                                                                                </span>
<span  style="">3062                                                                                                          </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3063         Bitmap icon = null;                                                                              </span>
<span class="-5201738827927049970" onmouseenter="enter('-5201738827927049970');" onmouseout="out('-5201738827927049970');" style="">3064         boolean customIcon = false;                                                                      </span>
<span class="7106370779598857182" onmouseenter="enter('7106370779598857182');" onmouseout="out('7106370779598857182');" style="">3065         ShortcutIconResource iconResource = null;                                                        </span>
<span  style="">3066                                                                                                          </span>
<span class="4708321654003878831" onmouseenter="enter('4708321654003878831');" onmouseout="out('4708321654003878831');" style="">3067         if (bitmap != null &amp;&amp; bitmap instanceof Bitmap) {                                                </span>
<span class="-4792971395534249505" onmouseenter="enter('-4792971395534249505');" onmouseout="out('-4792971395534249505');" style="">3068             icon = Utilities.createIconBitmap(new FastBitmapDrawable((Bitmap)bitmap), context);          </span>
<span class="398283090594517644" onmouseenter="enter('398283090594517644');" onmouseout="out('398283090594517644');" style="">3069             customIcon = true;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3070         } else {                                                                                         </span>
<span class="8053278256512428939" onmouseenter="enter('8053278256512428939');" onmouseout="out('8053278256512428939');" style="">3071             Parcelable extra = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE);             </span>
<span class="1150112908884585569" onmouseenter="enter('1150112908884585569');" onmouseout="out('1150112908884585569');" style="">3072             if (extra != null &amp;&amp; extra instanceof ShortcutIconResource) {                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3073                 try {                                                                                    </span>
<span class="7381422411731402038" onmouseenter="enter('7381422411731402038');" onmouseout="out('7381422411731402038');" style="">3074                     iconResource = (ShortcutIconResource) extra;                                         </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">3075                     final PackageManager packageManager = context.getPackageManager();                   </span>
<span class="8040670109966211806" onmouseenter="enter('8040670109966211806');" onmouseout="out('8040670109966211806');" style="">3076                     Resources resources = packageManager.getResourcesForApplication(                     </span>
<span class="6486160691197808360" onmouseenter="enter('6486160691197808360');" onmouseout="out('6486160691197808360');" style="">3077                             iconResource.packageName);                                                   </span>
<span class="8660063882056417771" onmouseenter="enter('8660063882056417771');" onmouseout="out('8660063882056417771');" style="">3078                     final int id = resources.getIdentifier(iconResource.resourceName, null, null);       </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3079                     icon = Utilities.createIconBitmap(                                                   </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="">3080                             mIconCache.getFullResIcon(resources, id), context);                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3081                 } catch (Exception e) {                                                                  </span>
<span class="3904703345331845179" onmouseenter="enter('3904703345331845179');" onmouseout="out('3904703345331845179');" style="">3082                     Log.w(TAG, &quot;Could not load shortcut icon: &quot; + extra);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3083                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3084             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3085         }                                                                                                </span>
<span  style="">3086                                                                                                          </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3087         final ShortcutInfo info = new ShortcutInfo();                                                    </span>
<span  style="">3088                                                                                                          </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3089         if (icon == null) {                                                                              </span>
<span class="-5102432251092900261" onmouseenter="enter('-5102432251092900261');" onmouseout="out('-5102432251092900261');" style="">3090             if (fallbackIcon != null) {                                                                  </span>
<span class="5793590417920465615" onmouseenter="enter('5793590417920465615');" onmouseout="out('5793590417920465615');" style="">3091                 icon = fallbackIcon;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3092             } else {                                                                                     </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">3093                 icon = getFallbackIcon();                                                                </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3094                 info.usingFallbackIcon = true;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3095             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3096         }                                                                                                </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3097         info.setIcon(icon);                                                                              </span>
<span  style="">3098                                                                                                          </span>
<span class="-1829710476241369792" onmouseenter="enter('-1829710476241369792');" onmouseout="out('-1829710476241369792');" style="">3099         info.title = name;                                                                               </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">3100         info.intent = intent;                                                                            </span>
<span class="4633184714742215751" onmouseenter="enter('4633184714742215751');" onmouseout="out('4633184714742215751');" style="">3101         info.customIcon = customIcon;                                                                    </span>
<span class="6083484121682275347" onmouseenter="enter('6083484121682275347');" onmouseout="out('6083484121682275347');" style="">3102         info.iconResource = iconResource;                                                                </span>
<span  style="">3103                                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3104         return info;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3105     }                                                                                                    </span>
<span  style="">3106                                                                                                          </span>
<span class="869799550823252877" onmouseenter="enter('869799550823252877');" onmouseout="out('869799550823252877');" style="">3107     boolean queueIconToBeChecked(HashMap&lt;Object, byte[]&gt; cache, ShortcutInfo info, Cursor c,             </span>
<span class="650460935465639981" onmouseenter="enter('650460935465639981');" onmouseout="out('650460935465639981');" style="">3108             int iconIndex) {                                                                             </span>
<span class="63801910951777151" onmouseenter="enter('63801910951777151');" onmouseout="out('63801910951777151');" style="">3109         // If apps can&#x27;t be on SD, don&#x27;t even bother.                                                    </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">3110         if (!mAppsCanBeOnRemoveableStorage) {                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3111             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3112         }                                                                                                </span>
<span class="861653016939823039" onmouseenter="enter('861653016939823039');" onmouseout="out('861653016939823039');" style="">3113         // If this icon doesn&#x27;t have a custom icon, check to see                                         </span>
<span class="-1631525504415382572" onmouseenter="enter('-1631525504415382572');" onmouseout="out('-1631525504415382572');" style="">3114         // what&#x27;s stored in the DB, and if it doesn&#x27;t match what                                         </span>
<span class="-2833764056931958051" onmouseenter="enter('-2833764056931958051');" onmouseout="out('-2833764056931958051');" style="">3115         // we&#x27;re going to show, store what we are going to show back                                     </span>
<span class="6822044102664419432" onmouseenter="enter('6822044102664419432');" onmouseout="out('6822044102664419432');" style="">3116         // into the DB.  We do this so when we&#x27;re loading, if the                                        </span>
<span class="2186475696045222856" onmouseenter="enter('2186475696045222856');" onmouseout="out('2186475696045222856');" style="">3117         // package manager can&#x27;t find an icon (for example because                                       </span>
<span class="-3178081182524516354" onmouseenter="enter('-3178081182524516354');" onmouseout="out('-3178081182524516354');" style="">3118         // the app is on SD) then we can use that instead.                                               </span>
<span class="6478679774718804760" onmouseenter="enter('6478679774718804760');" onmouseout="out('6478679774718804760');" style="">3119         if (!info.customIcon &amp;&amp; !info.usingFallbackIcon) {                                               </span>
<span class="9182700683168292388" onmouseenter="enter('9182700683168292388');" onmouseout="out('9182700683168292388');" style="">3120             cache.put(info, c.getBlob(iconIndex));                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3121             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3122         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3123         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3124     }                                                                                                    </span>
<span  style="">3125                                                                                                          </span>
<span class="1654527872685192879" onmouseenter="enter('1654527872685192879');" onmouseout="out('1654527872685192879');" style="">3126     void updateSavedIcon(Context context, ShortcutInfo info, byte[] data) {                              </span>
<span class="2739424845963553299" onmouseenter="enter('2739424845963553299');" onmouseout="out('2739424845963553299');" style="">3127         boolean needSave = false;                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3128         try {                                                                                            </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="">3129             if (data != null) {                                                                          </span>
<span class="-7759318311620721467" onmouseenter="enter('-7759318311620721467');" onmouseout="out('-7759318311620721467');" style="">3130                 Bitmap saved = BitmapFactory.decodeByteArray(data, 0, data.length);                      </span>
<span class="5601916118931842920" onmouseenter="enter('5601916118931842920');" onmouseout="out('5601916118931842920');" style="">3131                 Bitmap loaded = info.getIcon(mIconCache);                                                </span>
<span class="3622333829210083937" onmouseenter="enter('3622333829210083937');" onmouseout="out('3622333829210083937');" style="">3132                 needSave = !saved.sameAs(loaded);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3133             } else {                                                                                     </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3134                 needSave = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3135             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3136         } catch (Exception e) {                                                                          </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3137             needSave = true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3138         }                                                                                                </span>
<span class="-1391846982631217245" onmouseenter="enter('-1391846982631217245');" onmouseout="out('-1391846982631217245');" style="">3139         if (needSave) {                                                                                  </span>
<span class="3557323548661765982" onmouseenter="enter('3557323548661765982');" onmouseout="out('3557323548661765982');" style="">3140             Log.d(TAG, &quot;going to save icon bitmap for info=&quot; + info);                                    </span>
<span class="2982884345620001266" onmouseenter="enter('2982884345620001266');" onmouseout="out('2982884345620001266');" style="">3141             // This is slower than is ideal, but this only happens once                                  </span>
<span class="6026812495787058898" onmouseenter="enter('6026812495787058898');" onmouseout="out('6026812495787058898');" style="">3142             // or when the app is updated with a new icon.                                               </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">3143             updateItemInDatabase(context, info);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3144         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3145     }                                                                                                    </span>
<span  style="">3146                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3147     /**                                                                                                  </span>
<span class="4855649975001229153" onmouseenter="enter('4855649975001229153');" onmouseout="out('4855649975001229153');" style="">3148      * Return an existing FolderInfo object if we have encountered this ID previously,                   </span>
<span class="1965046356881977619" onmouseenter="enter('1965046356881977619');" onmouseout="out('1965046356881977619');" style="">3149      * or make a new one.                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3150      */                                                                                                  </span>
<span class="-2475696420152943641" onmouseenter="enter('-2475696420152943641');" onmouseout="out('-2475696420152943641');" style="">3151     private static FolderInfo findOrMakeFolder(HashMap&lt;Long, FolderInfo&gt; folders, long id) {             </span>
<span class="4702055422209629108" onmouseenter="enter('4702055422209629108');" onmouseout="out('4702055422209629108');" style="">3152         // See if a placeholder was created for us already                                               </span>
<span class="5369947662598537472" onmouseenter="enter('5369947662598537472');" onmouseout="out('5369947662598537472');" style="">3153         FolderInfo folderInfo = folders.get(id);                                                         </span>
<span class="-1935655509058582330" onmouseenter="enter('-1935655509058582330');" onmouseout="out('-1935655509058582330');" style="">3154         if (folderInfo == null) {                                                                        </span>
<span class="-2837885610668527269" onmouseenter="enter('-2837885610668527269');" onmouseout="out('-2837885610668527269');" style="">3155             // No placeholder -- create a new instance                                                   </span>
<span class="-1173144769562528834" onmouseenter="enter('-1173144769562528834');" onmouseout="out('-1173144769562528834');" style="">3156             folderInfo = new FolderInfo();                                                               </span>
<span class="-6364759527041918506" onmouseenter="enter('-6364759527041918506');" onmouseout="out('-6364759527041918506');" style="">3157             folders.put(id, folderInfo);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3158         }                                                                                                </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style="">3159         return folderInfo;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3160     }                                                                                                    </span>
<span  style="">3161                                                                                                          </span>
<span class="-958488581416967596" onmouseenter="enter('-958488581416967596');" onmouseout="out('-958488581416967596');" style="">3162     public static final Comparator&lt;AppInfo&gt; getAppNameComparator() {                                     </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">3163         final Collator collator = Collator.getInstance();                                                </span>
<span class="-5613048777706091935" onmouseenter="enter('-5613048777706091935');" onmouseout="out('-5613048777706091935');" style="">3164         return new Comparator&lt;AppInfo&gt;() {                                                               </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3165             public final int compare(AppInfo a, AppInfo b) {                                             </span>
<span class="-7549376093488495011" onmouseenter="enter('-7549376093488495011');" onmouseout="out('-7549376093488495011');" style="">3166                 int result = collator.compare(a.title.toString().trim(),                                 </span>
<span class="1811873973139560730" onmouseenter="enter('1811873973139560730');" onmouseout="out('1811873973139560730');" style="">3167                         b.title.toString().trim());                                                      </span>
<span class="8606135965292633507" onmouseenter="enter('8606135965292633507');" onmouseout="out('8606135965292633507');" style="">3168                 if (result == 0) {                                                                       </span>
<span class="3669915132885915948" onmouseenter="enter('3669915132885915948');" onmouseout="out('3669915132885915948');" style="">3169                     result = a.componentName.compareTo(b.componentName);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3170                 }                                                                                        </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">3171                 return result;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3172             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3173         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3174     }                                                                                                    </span>
<span  style="">3175                                                                                                          </span>
<span class="5955404976394705038" onmouseenter="enter('5955404976394705038');" onmouseout="out('5955404976394705038');" style="">3176     public static final Comparator&lt;AppInfo&gt; APP_INSTALL_TIME_COMPARATOR = new Comparator&lt;AppInfo&gt;() {    </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3177         public final int compare(AppInfo a, AppInfo b) {                                                 </span>
<span class="-8187472599640048379" onmouseenter="enter('-8187472599640048379');" onmouseout="out('-8187472599640048379');" style="">3178             if (a.firstInstallTime &lt; b.firstInstallTime) {                                               </span>
<span class="6787741487180588680" onmouseenter="enter('6787741487180588680');" onmouseout="out('6787741487180588680');" style="">3179                 return 1;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3180             }                                                                                            </span>
<span class="2743042164876951282" onmouseenter="enter('2743042164876951282');" onmouseout="out('2743042164876951282');" style="">3181             if (a.firstInstallTime &gt; b.firstInstallTime) {                                               </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style="">3182                 return -1;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3183             }                                                                                            </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style="">3184             return 0;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3185         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3186     };                                                                                                   </span>
<span  style="">3187                                                                                                          </span>
<span class="-8609474311948503984" onmouseenter="enter('-8609474311948503984');" onmouseout="out('-8609474311948503984');" style="">3188     public static final Comparator&lt;AppWidgetProviderInfo&gt; getWidgetNameComparator() {                    </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">3189         final Collator collator = Collator.getInstance();                                                </span>
<span class="-2259377864696368534" onmouseenter="enter('-2259377864696368534');" onmouseout="out('-2259377864696368534');" style="">3190         return new Comparator&lt;AppWidgetProviderInfo&gt;() {                                                 </span>
<span class="-678507615594739242" onmouseenter="enter('-678507615594739242');" onmouseout="out('-678507615594739242');" style="">3191             public final int compare(AppWidgetProviderInfo a, AppWidgetProviderInfo b) {                 </span>
<span class="2077578932126968211" onmouseenter="enter('2077578932126968211');" onmouseout="out('2077578932126968211');" style="">3192                 return collator.compare(a.label.toString().trim(), b.label.toString().trim());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3193             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3194         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3195     }                                                                                                    </span>
<span  style="">3196                                                                                                          </span>
<span class="-2741084556110057526" onmouseenter="enter('-2741084556110057526');" onmouseout="out('-2741084556110057526');" style="">3197     static ComponentName getComponentNameFromResolveInfo(ResolveInfo info) {                             </span>
<span class="5044967282776033452" onmouseenter="enter('5044967282776033452');" onmouseout="out('5044967282776033452');" style="">3198         if (info.activityInfo != null) {                                                                 </span>
<span class="4524084479320544608" onmouseenter="enter('4524084479320544608');" onmouseout="out('4524084479320544608');" style="">3199             return new ComponentName(info.activityInfo.packageName, info.activityInfo.name);             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3200         } else {                                                                                         </span>
<span class="-6175863207819175779" onmouseenter="enter('-6175863207819175779');" onmouseout="out('-6175863207819175779');" style="">3201             return new ComponentName(info.serviceInfo.packageName, info.serviceInfo.name);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3202         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3203     }                                                                                                    </span>
<span  style="">3204                                                                                                          </span>
<span class="-1238156797468239183" onmouseenter="enter('-1238156797468239183');" onmouseout="out('-1238156797468239183');" style="">3205     public static class ShortcutNameComparator implements Comparator&lt;ResolveInfo&gt; {                      </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">3206         private Collator mCollator;                                                                      </span>
<span  style="">3207                                                                                                          </span>
<span class="3738582539680694944" onmouseenter="enter('3738582539680694944');" onmouseout="out('3738582539680694944');" style="">3208         private PackageManager mPackageManager;                                                          </span>
<span  style="">3209                                                                                                          </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">3210         private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                               </span>
<span  style="">3211                                                                                                          </span>
<span class="-5960404209194449161" onmouseenter="enter('-5960404209194449161');" onmouseout="out('-5960404209194449161');" style="">3212         ShortcutNameComparator(PackageManager pm) {                                                      </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="">3213             mPackageManager = pm;                                                                        </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">3214             mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                           </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3215             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3216         }                                                                                                </span>
<span  style="">3217                                                                                                          </span>
<span class="-5325604689380562785" onmouseenter="enter('-5325604689380562785');" onmouseout="out('-5325604689380562785');" style="">3218         ShortcutNameComparator(PackageManager pm, HashMap&lt;Object, CharSequence&gt; labelCache) {            </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="">3219             mPackageManager = pm;                                                                        </span>
<span class="-1230739904022851098" onmouseenter="enter('-1230739904022851098');" onmouseout="out('-1230739904022851098');" style="">3220             mLabelCache = labelCache;                                                                    </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3221             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3222         }                                                                                                </span>
<span  style="">3223                                                                                                          </span>
<span class="2504403784205444317" onmouseenter="enter('2504403784205444317');" onmouseout="out('2504403784205444317');" style="">3224         public final int compare(ResolveInfo a, ResolveInfo b) {                                         </span>
<span class="7267992564284113047" onmouseenter="enter('7267992564284113047');" onmouseout="out('7267992564284113047');" style="">3225             CharSequence labelA;                                                                         </span>
<span class="5207304630499861732" onmouseenter="enter('5207304630499861732');" onmouseout="out('5207304630499861732');" style="">3226             CharSequence labelB;                                                                         </span>
<span class="2313389288092914550" onmouseenter="enter('2313389288092914550');" onmouseout="out('2313389288092914550');" style="">3227             ComponentName keyA = LauncherModel.getComponentNameFromResolveInfo(a);                       </span>
<span class="1313017237584786738" onmouseenter="enter('1313017237584786738');" onmouseout="out('1313017237584786738');" style="">3228             ComponentName keyB = LauncherModel.getComponentNameFromResolveInfo(b);                       </span>
<span class="6987605502838603761" onmouseenter="enter('6987605502838603761');" onmouseout="out('6987605502838603761');" style="">3229             if (mLabelCache.containsKey(keyA)) {                                                         </span>
<span class="-8432555163859180221" onmouseenter="enter('-8432555163859180221');" onmouseout="out('-8432555163859180221');" style="">3230                 labelA = mLabelCache.get(keyA);                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3231             } else {                                                                                     </span>
<span class="-2584626643586656789" onmouseenter="enter('-2584626643586656789');" onmouseout="out('-2584626643586656789');" style="">3232                 labelA = a.loadLabel(mPackageManager).toString().trim();                                 </span>
<span class="-8431652685509449538" onmouseenter="enter('-8431652685509449538');" onmouseout="out('-8431652685509449538');" style="">3233                 mLabelCache.put(keyA, labelA);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3234             }                                                                                            </span>
<span class="-6450873724396873776" onmouseenter="enter('-6450873724396873776');" onmouseout="out('-6450873724396873776');" style="">3235             if (mLabelCache.containsKey(keyB)) {                                                         </span>
<span class="-3184391819650288160" onmouseenter="enter('-3184391819650288160');" onmouseout="out('-3184391819650288160');" style="">3236                 labelB = mLabelCache.get(keyB);                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3237             } else {                                                                                     </span>
<span class="-6035042839601081566" onmouseenter="enter('-6035042839601081566');" onmouseout="out('-6035042839601081566');" style="">3238                 labelB = b.loadLabel(mPackageManager).toString().trim();                                 </span>
<span class="6304111994442836155" onmouseenter="enter('6304111994442836155');" onmouseout="out('6304111994442836155');" style="">3239                 mLabelCache.put(keyB, labelB);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3240             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3241             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3242         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3243     }                                                                                                    </span>
<span  style="">3244                                                                                                          </span>
<span class="-9068712813001281029" onmouseenter="enter('-9068712813001281029');" onmouseout="out('-9068712813001281029');" style="">3245     public static class WidgetAndShortcutNameComparator implements Comparator&lt;Object&gt; {                  </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">3246         private Collator mCollator;                                                                      </span>
<span  style="">3247                                                                                                          </span>
<span class="3738582539680694944" onmouseenter="enter('3738582539680694944');" onmouseout="out('3738582539680694944');" style="">3248         private PackageManager mPackageManager;                                                          </span>
<span  style="">3249                                                                                                          </span>
<span class="-3647203189121938913" onmouseenter="enter('-3647203189121938913');" onmouseout="out('-3647203189121938913');" style="">3250         private HashMap&lt;Object, String&gt; mLabelCache;                                                     </span>
<span  style="">3251                                                                                                          </span>
<span class="-7973787508768304552" onmouseenter="enter('-7973787508768304552');" onmouseout="out('-7973787508768304552');" style="">3252         WidgetAndShortcutNameComparator(PackageManager pm) {                                             </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="">3253             mPackageManager = pm;                                                                        </span>
<span class="240497455152177218" onmouseenter="enter('240497455152177218');" onmouseout="out('240497455152177218');" style="">3254             mLabelCache = new HashMap&lt;Object, String&gt;();                                                 </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3255             mCollator = Collator.getInstance();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3256         }                                                                                                </span>
<span  style="">3257                                                                                                          </span>
<span class="6735042653098150116" onmouseenter="enter('6735042653098150116');" onmouseout="out('6735042653098150116');" style="">3258         public final int compare(Object a, Object b) {                                                   </span>
<span class="2630491260437090066" onmouseenter="enter('2630491260437090066');" onmouseout="out('2630491260437090066');" style="">3259             String labelA;                                                                               </span>
<span class="-1930028114823183236" onmouseenter="enter('-1930028114823183236');" onmouseout="out('-1930028114823183236');" style="">3260             String labelB;                                                                               </span>
<span class="-5754282386436968390" onmouseenter="enter('-5754282386436968390');" onmouseout="out('-5754282386436968390');" style="">3261             if (mLabelCache.containsKey(a)) {                                                            </span>
<span class="9174303291338212675" onmouseenter="enter('9174303291338212675');" onmouseout="out('9174303291338212675');" style="">3262                 labelA = mLabelCache.get(a);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3263             } else {                                                                                     </span>
<span class="2626974423466823319" onmouseenter="enter('2626974423466823319');" onmouseout="out('2626974423466823319');" style=""><abbr title="3264                 labelA = (a instanceof AppWidgetProviderInfo) ? ((AppWidgetProviderInfo) (a)).label : ((ResolveInfo) (a)).loadLabel(mPackageManager).toString().trim();">3264                 labelA = (a instanceof AppWidgetProviderInfo) ? ((AppWidgetProviderInfo) (a)).label : ((R</abbr></span>
<span class="-6757493580793216382" onmouseenter="enter('-6757493580793216382');" onmouseout="out('-6757493580793216382');" style="">3265                 mLabelCache.put(a, labelA);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3266             }                                                                                            </span>
<span class="2173723640298609502" onmouseenter="enter('2173723640298609502');" onmouseout="out('2173723640298609502');" style="">3267             if (mLabelCache.containsKey(b)) {                                                            </span>
<span class="-253401768434607465" onmouseenter="enter('-253401768434607465');" onmouseout="out('-253401768434607465');" style="">3268                 labelB = mLabelCache.get(b);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3269             } else {                                                                                     </span>
<span class="1875626458847891563" onmouseenter="enter('1875626458847891563');" onmouseout="out('1875626458847891563');" style=""><abbr title="3270                 labelB = (b instanceof AppWidgetProviderInfo) ? ((AppWidgetProviderInfo) (b)).label : ((ResolveInfo) (b)).loadLabel(mPackageManager).toString().trim();">3270                 labelB = (b instanceof AppWidgetProviderInfo) ? ((AppWidgetProviderInfo) (b)).label : ((R</abbr></span>
<span class="1041849722861633477" onmouseenter="enter('1041849722861633477');" onmouseout="out('1041849722861633477');" style="">3271                 mLabelCache.put(b, labelB);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3272             }                                                                                            </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3273             return mCollator.compare(labelA, labelB);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3274         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3275     }                                                                                                    </span>
<span  style="">3276                                                                                                          </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">3277     public void dumpState() {                                                                            </span>
<span class="-8509686920730582178" onmouseenter="enter('-8509686920730582178');" onmouseout="out('-8509686920730582178');" style="">3278         Log.d(TAG, &quot;mCallbacks=&quot; + mCallbacks);                                                          </span>
<span class="-6032216957883964740" onmouseenter="enter('-6032216957883964740');" onmouseout="out('-6032216957883964740');" style="">3279         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.data&quot;, mBgAllAppsList.data);                  </span>
<span class="8779182816240818818" onmouseenter="enter('8779182816240818818');" onmouseout="out('8779182816240818818');" style="">3280         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.added&quot;, mBgAllAppsList.added);                </span>
<span class="5513048904999210121" onmouseenter="enter('5513048904999210121');" onmouseout="out('5513048904999210121');" style="">3281         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.removed&quot;, mBgAllAppsList.removed);            </span>
<span class="-6417320778911436113" onmouseenter="enter('-6417320778911436113');" onmouseout="out('-6417320778911436113');" style="">3282         AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.modified&quot;, mBgAllAppsList.modified);          </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">3283         if (mLoaderTask != null) {                                                                       </span>
<span class="-1961259503181318170" onmouseenter="enter('-1961259503181318170');" onmouseout="out('-1961259503181318170');" style="">3284             mLoaderTask.dumpState();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3285         } else {                                                                                         </span>
<span class="-4934836822377624371" onmouseenter="enter('-4934836822377624371');" onmouseout="out('-4934836822377624371');" style="">3286             Log.d(TAG, &quot;mLoaderTask=null&quot;);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3287         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3288     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3289 }                                                                                                        </span>


























































































































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2   * Copyright (C) 2008 The Android Open Source Project                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span  style="">  16                                                                                                                    </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17  package com.android.launcher3;                                                                                    </span>
<span  style="">  18                                                                                                                    </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  19  import android.app.SearchManager;                                                                                 </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  20  import android.appwidget.AppWidgetManager;                                                                        </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  21  import android.appwidget.AppWidgetProviderInfo;                                                                   </span>
<span class="-984325520036959693" onmouseenter="enter('-984325520036959693');" onmouseout="out('-984325520036959693');" style="">  22  import android.content.*;                                                                                         </span>
<span class="-8524679231303418936" onmouseenter="enter('-8524679231303418936');" onmouseout="out('-8524679231303418936');" style="">  23  import android.content.Intent.ShortcutIconResource;                                                               </span>
<span class="-9183914406029598577" onmouseenter="enter('-9183914406029598577');" onmouseout="out('-9183914406029598577');" style="">  24  import android.content.pm.ActivityInfo;                                                                           </span>
<span class="-5891303348447418015" onmouseenter="enter('-5891303348447418015');" onmouseout="out('-5891303348447418015');" style="">  25  import android.content.pm.PackageInfo;                                                                            </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  26  import android.content.pm.PackageManager;                                                                         </span>
<span class="-2097531830514422912" onmouseenter="enter('-2097531830514422912');" onmouseout="out('-2097531830514422912');" style="">  27  import android.content.pm.PackageManager.NameNotFoundException;                                                   </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  28  import android.content.pm.ResolveInfo;                                                                            </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">  29  import android.content.res.Configuration;                                                                         </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  30  import android.content.res.Resources;                                                                             </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  31  import android.database.Cursor;                                                                                   </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  32  import android.graphics.Bitmap;                                                                                   </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  33  import android.graphics.BitmapFactory;                                                                            </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  34  import android.net.Uri;                                                                                           </span>
<span class="-5861542142927414420" onmouseenter="enter('-5861542142927414420');" onmouseout="out('-5861542142927414420');" style="">  35  import android.os.Environment;                                                                                    </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  36  import android.os.Handler;                                                                                        </span>
<span class="5075624728668821268" onmouseenter="enter('5075624728668821268');" onmouseout="out('5075624728668821268');" style="">  37  import android.os.HandlerThread;                                                                                  </span>
<span class="-3467845820974384276" onmouseenter="enter('-3467845820974384276');" onmouseout="out('-3467845820974384276');" style="">  38  import android.os.Parcelable;                                                                                     </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  39  import android.os.Process;                                                                                        </span>
<span class="2671599330745315048" onmouseenter="enter('2671599330745315048');" onmouseout="out('2671599330745315048');" style="">  40  import android.os.RemoteException;                                                                                </span>
<span class="2720528326800018495" onmouseenter="enter('2720528326800018495');" onmouseout="out('2720528326800018495');" style="">  41  import android.os.SystemClock;                                                                                    </span>
<span class="9209739606564279934" onmouseenter="enter('9209739606564279934');" onmouseout="out('9209739606564279934');" style="">  42  import android.provider.BaseColumns;                                                                              </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  43  import android.text.TextUtils;                                                                                    </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  44  import android.util.Log;                                                                                          </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  45  import android.util.Pair;                                                                                         </span>
<span  style="">  46                                                                                                                    </span>
<span class="2480987830742885141" onmouseenter="enter('2480987830742885141');" onmouseout="out('2480987830742885141');" style="">  47  import com.android.launcher3.InstallWidgetReceiver.WidgetMimeTypeHandlerData;                                     </span>
<span  style="">  48                                                                                                                    </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  49  import java.lang.ref.WeakReference;                                                                               </span>
<span class="7911689652558139170" onmouseenter="enter('7911689652558139170');" onmouseout="out('7911689652558139170');" style="">  50  import java.net.URISyntaxException;                                                                               </span>
<span class="-2082349054173013619" onmouseenter="enter('-2082349054173013619');" onmouseout="out('-2082349054173013619');" style="">  51  import java.text.Collator;                                                                                        </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  52  import java.util.ArrayList;                                                                                       </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  53  import java.util.Arrays;                                                                                          </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  54  import java.util.Collection;                                                                                      </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  55  import java.util.Collections;                                                                                     </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  56  import java.util.Comparator;                                                                                      </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  57  import java.util.HashMap;                                                                                         </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  58  import java.util.HashSet;                                                                                         </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  59  import java.util.Iterator;                                                                                        </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  60  import java.util.List;                                                                                            </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  61  import java.util.Set;                                                                                             </span>
<span class="7536840878424124946" onmouseenter="enter('7536840878424124946');" onmouseout="out('7536840878424124946');" style="">  62  import java.util.TreeMap;                                                                                         </span>
<span class="-2705241621224930031" onmouseenter="enter('-2705241621224930031');" onmouseout="out('-2705241621224930031');" style="">  63  import java.util.concurrent.atomic.AtomicBoolean;                                                                 </span>
<span  style="">  64                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  65  /**                                                                                                               </span>
<span class="-4436404655378914540" onmouseenter="enter('-4436404655378914540');" onmouseout="out('-4436404655378914540');" style="">  66   * Maintains in-memory state of the Launcher. It is expected that there should be only one                        </span>
<span class="-4273357065044936134" onmouseenter="enter('-4273357065044936134');" onmouseout="out('-4273357065044936134');" style="">  67   * LauncherModel object held in a static. Also provide APIs for updating the database state                       </span>
<span class="-4398933382026523538" onmouseenter="enter('-4398933382026523538');" onmouseout="out('-4398933382026523538');" style="">  68   * for the Launcher.                                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  69   */                                                                                                               </span>
<span class="-1237709953007126496" onmouseenter="enter('-1237709953007126496');" onmouseout="out('-1237709953007126496');" style="">  70  public class LauncherModel extends BroadcastReceiver {                                                            </span>
<span class="4817350607901898392" onmouseenter="enter('4817350607901898392');" onmouseout="out('4817350607901898392');" style="">  71      static final boolean DEBUG_LOADERS = false;                                                                   </span>
<span class="7166020908404799948" onmouseenter="enter('7166020908404799948');" onmouseout="out('7166020908404799948');" style="">  72      static final String TAG = &quot;Launcher.Model&quot;;                                                                   </span>
<span  style="">  73                                                                                                                    </span>
<span class="-110249828783225872" onmouseenter="enter('-110249828783225872');" onmouseout="out('-110249828783225872');" style="">  74      // true = use a &quot;More Apps&quot; folder for non-workspace apps on upgrade                                          </span>
<span class="2480947255658609927" onmouseenter="enter('2480947255658609927');" onmouseout="out('2480947255658609927');" style="">  75      // false = strew non-workspace apps across the workspace on upgrade                                           </span>
<span class="-258177193926802879" onmouseenter="enter('-258177193926802879');" onmouseout="out('-258177193926802879');" style="">  76      public static final boolean UPGRADE_USE_MORE_APPS_FOLDER = false;                                             </span>
<span  style="">  77                                                                                                                    </span>
<span class="2412961508740342038" onmouseenter="enter('2412961508740342038');" onmouseout="out('2412961508740342038');" style="">  78      public static final int LOADER_FLAG_NONE = 0;                                                                 </span>
<span class="-3582007365816200905" onmouseenter="enter('-3582007365816200905');" onmouseout="out('-3582007365816200905');" style="">  79      public static final int LOADER_FLAG_CLEAR_WORKSPACE = 1 &lt;&lt; 0;                                                 </span>
<span class="2276565639346953559" onmouseenter="enter('2276565639346953559');" onmouseout="out('2276565639346953559');" style="">  80      public static final int LOADER_FLAG_MIGRATE_SHORTCUTS = 1 &lt;&lt; 1;                                               </span>
<span  style="">  81                                                                                                                    </span>
<span class="-4154694662050657236" onmouseenter="enter('-4154694662050657236');" onmouseout="out('-4154694662050657236');" style="">  82      private static final int ITEMS_CHUNK = 6; // batch size for the workspace icons                               </span>
<span class="-5674768092661618077" onmouseenter="enter('-5674768092661618077');" onmouseout="out('-5674768092661618077');" style="">  83      private static final long INVALID_SCREEN_ID = -1L;                                                            </span>
<span  style="">  84                                                                                                                    </span>
<span class="-2106715535373822300" onmouseenter="enter('-2106715535373822300');" onmouseout="out('-2106715535373822300');" style="">  85      private final boolean mAppsCanBeOnRemoveableStorage;                                                          </span>
<span class="4731979794377415890" onmouseenter="enter('4731979794377415890');" onmouseout="out('4731979794377415890');" style="">  86      private final boolean mOldContentProviderExists;                                                              </span>
<span  style="">  87                                                                                                                    </span>
<span class="3718007027314914184" onmouseenter="enter('3718007027314914184');" onmouseout="out('3718007027314914184');" style="">  88      private final LauncherAppState mApp;                                                                          </span>
<span class="-7373075918619999414" onmouseenter="enter('-7373075918619999414');" onmouseout="out('-7373075918619999414');" style="">  89      private final Object mLock = new Object();                                                                    </span>
<span class="6556510276342102272" onmouseenter="enter('6556510276342102272');" onmouseout="out('6556510276342102272');" style="">  90      private DeferredHandler mHandler = new DeferredHandler();                                                     </span>
<span class="-7862379002163915329" onmouseenter="enter('-7862379002163915329');" onmouseout="out('-7862379002163915329');" style="">  91      private LoaderTask mLoaderTask;                                                                               </span>
<span class="-3485037850110155122" onmouseenter="enter('-3485037850110155122');" onmouseout="out('-3485037850110155122');" style="">  92      private boolean mIsLoaderTaskRunning;                                                                         </span>
<span class="7419034271767928159" onmouseenter="enter('7419034271767928159');" onmouseout="out('7419034271767928159');" style="">  93      private volatile boolean mFlushingWorkerThread;                                                               </span>
<span  style="">  94                                                                                                                    </span>
<span class="7008336552769109798" onmouseenter="enter('7008336552769109798');" onmouseout="out('7008336552769109798');" style="">  95      // Specific runnable types that are run on the main thread deferred handler, this allows us to                </span>
<span class="-2862621427901202146" onmouseenter="enter('-2862621427901202146');" onmouseout="out('-2862621427901202146');" style="">  96      // clear all queued binding runnables when the Launcher activity is destroyed.                                </span>
<span class="2773124109533293313" onmouseenter="enter('2773124109533293313');" onmouseout="out('2773124109533293313');" style="">  97      private static final int MAIN_THREAD_NORMAL_RUNNABLE = 0;                                                     </span>
<span class="3742092121997602406" onmouseenter="enter('3742092121997602406');" onmouseout="out('3742092121997602406');" style="">  98      private static final int MAIN_THREAD_BINDING_RUNNABLE = 1;                                                    </span>
<span  style="">  99                                                                                                                    </span>
<span  style=""> 100                                                                                                                    </span>
<span class="1887278082230738056" onmouseenter="enter('1887278082230738056');" onmouseout="out('1887278082230738056');" style=""> 101      private static final HandlerThread sWorkerThread = new HandlerThread(&quot;launcher-loader&quot;);                      </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style=""> 102      static {                                                                                                      </span>
<span class="3211376391739143126" onmouseenter="enter('3211376391739143126');" onmouseout="out('3211376391739143126');" style=""> 103          sWorkerThread.start();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104      }                                                                                                             </span>
<span class="2264102646027284513" onmouseenter="enter('2264102646027284513');" onmouseout="out('2264102646027284513');" style=""> 105      private static final Handler sWorker = new Handler(sWorkerThread.getLooper());                                </span>
<span  style=""> 106                                                                                                                    </span>
<span class="3535035959074757881" onmouseenter="enter('3535035959074757881');" onmouseout="out('3535035959074757881');" style=""> 107      // We start off with everything not loaded.  After that, we assume that                                       </span>
<span class="2643799052940090988" onmouseenter="enter('2643799052940090988');" onmouseout="out('2643799052940090988');" style=""> 108      // our monitoring of the package manager provides all updates and we never                                    </span>
<span class="-1838192547825761021" onmouseenter="enter('-1838192547825761021');" onmouseout="out('-1838192547825761021');" style=""> 109      // need to do a requery.  These are only ever touched from the loader thread.                                 </span>
<span class="-8758726942217087840" onmouseenter="enter('-8758726942217087840');" onmouseout="out('-8758726942217087840');" style=""> 110      private boolean mWorkspaceLoaded;                                                                             </span>
<span class="-1682003936594375249" onmouseenter="enter('-1682003936594375249');" onmouseout="out('-1682003936594375249');" style=""> 111      private boolean mAllAppsLoaded;                                                                               </span>
<span  style=""> 112                                                                                                                    </span>
<span class="4437381645098142172" onmouseenter="enter('4437381645098142172');" onmouseout="out('4437381645098142172');" style=""> 113      // When we are loading pages synchronously, we can&#x27;t just post the binding of items on the side               </span>
<span class="3512738277131757196" onmouseenter="enter('3512738277131757196');" onmouseout="out('3512738277131757196');" style=""> 114      // pages as this delays the rotation process.  Instead, we wait for a callback from the first                 </span>
<span class="1019766179129744653" onmouseenter="enter('1019766179129744653');" onmouseout="out('1019766179129744653');" style=""> 115      // draw (in Workspace) to initiate the binding of the remaining side pages.  Any time we start                </span>
<span class="7373070490167110663" onmouseenter="enter('7373070490167110663');" onmouseout="out('7373070490167110663');" style=""> 116      // a normal load, we also clear this set of Runnables.                                                        </span>
<span class="4843369785562403466" onmouseenter="enter('4843369785562403466');" onmouseout="out('4843369785562403466');" style=""> 117      static final ArrayList&lt;Runnable&gt; mDeferredBindRunnables = new ArrayList&lt;Runnable&gt;();                          </span>
<span  style=""> 118                                                                                                                    </span>
<span class="5593309185710650450" onmouseenter="enter('5593309185710650450');" onmouseout="out('5593309185710650450');" style=""> 119      private WeakReference&lt;Callbacks&gt; mCallbacks;                                                                  </span>
<span  style=""> 120                                                                                                                    </span>
<span class="-4825633287564006425" onmouseenter="enter('-4825633287564006425');" onmouseout="out('-4825633287564006425');" style=""> 121      // &lt; only access in worker thread &gt;                                                                           </span>
<span class="-7893410053402242276" onmouseenter="enter('-7893410053402242276');" onmouseout="out('-7893410053402242276');" style=""> 122      AllAppsList mBgAllAppsList;                                                                                   </span>
<span  style=""> 123                                                                                                                    </span>
<span class="-4696524037009093502" onmouseenter="enter('-4696524037009093502');" onmouseout="out('-4696524037009093502');" style=""> 124      // The lock that must be acquired before referencing any static bg data structures.  Unlike                   </span>
<span class="-2471307598696798987" onmouseenter="enter('-2471307598696798987');" onmouseout="out('-2471307598696798987');" style=""> 125      // other locks, this one can generally be held long-term because we never expect any of these                 </span>
<span class="4310884307601416106" onmouseenter="enter('4310884307601416106');" onmouseout="out('4310884307601416106');" style=""> 126      // static data structures to be referenced outside of the worker thread except on the first                   </span>
<span class="2260118264672300125" onmouseenter="enter('2260118264672300125');" onmouseout="out('2260118264672300125');" style=""> 127      // load after configuration change.                                                                           </span>
<span class="-8652324765300755578" onmouseenter="enter('-8652324765300755578');" onmouseout="out('-8652324765300755578');" style=""> 128      static final Object sBgLock = new Object();                                                                   </span>
<span  style=""> 129                                                                                                                    </span>
<span class="861828438456678075" onmouseenter="enter('861828438456678075');" onmouseout="out('861828438456678075');" style=""> 130      // sBgItemsIdMap maps *all* the ItemInfos (shortcuts, folders, and widgets) created by                        </span>
<span class="3964854605559074701" onmouseenter="enter('3964854605559074701');" onmouseout="out('3964854605559074701');" style=""> 131      // LauncherModel to their ids                                                                                 </span>
<span class="8713038185903703074" onmouseenter="enter('8713038185903703074');" onmouseout="out('8713038185903703074');" style=""> 132      static final HashMap&lt;Long, ItemInfo&gt; sBgItemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                           </span>
<span  style=""> 133                                                                                                                    </span>
<span class="-4875305940507672487" onmouseenter="enter('-4875305940507672487');" onmouseout="out('-4875305940507672487');" style=""> 134      // sBgWorkspaceItems is passed to bindItems, which expects a list of all folders and shortcuts                </span>
<span class="5836863726682543660" onmouseenter="enter('5836863726682543660');" onmouseout="out('5836863726682543660');" style=""> 135      //       created by LauncherModel that are directly on the home screen (however, no widgets or                </span>
<span class="4941255916545901139" onmouseenter="enter('4941255916545901139');" onmouseout="out('4941255916545901139');" style=""> 136      //       shortcuts within folders).                                                                           </span>
<span class="4770535944422974992" onmouseenter="enter('4770535944422974992');" onmouseout="out('4770535944422974992');" style=""> 137      static final ArrayList&lt;ItemInfo&gt; sBgWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                               </span>
<span  style=""> 138                                                                                                                    </span>
<span class="1795288911868581126" onmouseenter="enter('1795288911868581126');" onmouseout="out('1795288911868581126');" style=""> 139      // sBgAppWidgets is all LauncherAppWidgetInfo created by LauncherModel. Passed to bindAppWidget()             </span>
<span class="2792930227258213532" onmouseenter="enter('2792930227258213532');" onmouseout="out('2792930227258213532');" style=""> 140      static final ArrayList&lt;LauncherAppWidgetInfo&gt; sBgAppWidgets =                                                 </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style=""> 141          new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                                   </span>
<span  style=""> 142                                                                                                                    </span>
<span class="8356003681152445460" onmouseenter="enter('8356003681152445460');" onmouseout="out('8356003681152445460');" style=""> 143      // sBgFolders is all FolderInfos created by LauncherModel. Passed to bindFolders()                            </span>
<span class="8065187755370300271" onmouseenter="enter('8065187755370300271');" onmouseout="out('8065187755370300271');" style=""> 144      static final HashMap&lt;Long, FolderInfo&gt; sBgFolders = new HashMap&lt;Long, FolderInfo&gt;();                          </span>
<span  style=""> 145                                                                                                                    </span>
<span class="-6906235458204319724" onmouseenter="enter('-6906235458204319724');" onmouseout="out('-6906235458204319724');" style=""> 146      // sBgDbIconCache is the set of ItemInfos that need to have their icons updated in the database               </span>
<span class="-2979801471293813396" onmouseenter="enter('-2979801471293813396');" onmouseout="out('-2979801471293813396');" style=""> 147      static final HashMap&lt;Object, byte[]&gt; sBgDbIconCache = new HashMap&lt;Object, byte[]&gt;();                          </span>
<span  style=""> 148                                                                                                                    </span>
<span class="8536603216028959604" onmouseenter="enter('8536603216028959604');" onmouseout="out('8536603216028959604');" style=""> 149      // sBgWorkspaceScreens is the ordered set of workspace screens.                                               </span>
<span class="-1373680151983800221" onmouseenter="enter('-1373680151983800221');" onmouseout="out('-1373680151983800221');" style=""> 150      static final ArrayList&lt;Long&gt; sBgWorkspaceScreens = new ArrayList&lt;Long&gt;();                                     </span>
<span  style=""> 151                                                                                                                    </span>
<span class="-5356624270019806590" onmouseenter="enter('-5356624270019806590');" onmouseout="out('-5356624270019806590');" style=""> 152      // &lt;/ only access in worker thread &gt;                                                                          </span>
<span  style=""> 153                                                                                                                    </span>
<span class="-3446390922171092190" onmouseenter="enter('-3446390922171092190');" onmouseout="out('-3446390922171092190');" style=""> 154      private IconCache mIconCache;                                                                                 </span>
<span class="7327140815403295852" onmouseenter="enter('7327140815403295852');" onmouseout="out('7327140815403295852');" style=""> 155      private Bitmap mDefaultIcon;                                                                                  </span>
<span  style=""> 156                                                                                                                    </span>
<span class="-1428370913368008087" onmouseenter="enter('-1428370913368008087');" onmouseout="out('-1428370913368008087');" style=""> 157      protected int mPreviousConfigMcc;                                                                             </span>
<span  style=""> 158                                                                                                                    </span>
<span class="-3338718885622541528" onmouseenter="enter('-3338718885622541528');" onmouseout="out('-3338718885622541528');" style=""> 159      public interface Callbacks {                                                                                  </span>
<span class="-4231961333511672310" onmouseenter="enter('-4231961333511672310');" onmouseout="out('-4231961333511672310');" style=""> 160          public boolean setLoadOnResume();                                                                         </span>
<span class="803814078537529918" onmouseenter="enter('803814078537529918');" onmouseout="out('803814078537529918');" style=""> 161          public int getCurrentWorkspaceScreen();                                                                   </span>
<span class="9018975241375557324" onmouseenter="enter('9018975241375557324');" onmouseout="out('9018975241375557324');" style=""> 162          public void startBinding();                                                                               </span>
<span class="3160017311795321748" onmouseenter="enter('3160017311795321748');" onmouseout="out('3160017311795321748');" style=""> 163          public void bindItems(ArrayList&lt;ItemInfo&gt; shortcuts, int start, int end,                                  </span>
<span class="2581406714293150955" onmouseenter="enter('2581406714293150955');" onmouseout="out('2581406714293150955');" style=""> 164                                boolean forceAnimateIcons);                                                         </span>
<span class="5464078408309929972" onmouseenter="enter('5464078408309929972');" onmouseout="out('5464078408309929972');" style=""> 165          public void bindScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                                </span>
<span class="8828153861812868297" onmouseenter="enter('8828153861812868297');" onmouseout="out('8828153861812868297');" style=""> 166          public void bindAddScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                             </span>
<span class="6163649300164694862" onmouseenter="enter('6163649300164694862');" onmouseout="out('6163649300164694862');" style=""> 167          public void bindFolders(HashMap&lt;Long,FolderInfo&gt; folders);                                                </span>
<span class="-3241982460320043016" onmouseenter="enter('-3241982460320043016');" onmouseout="out('-3241982460320043016');" style=""> 168          public void finishBindingItems(boolean upgradePath);                                                      </span>
<span class="-1509675786278068914" onmouseenter="enter('-1509675786278068914');" onmouseout="out('-1509675786278068914');" style=""> 169          public void bindAppWidget(LauncherAppWidgetInfo info);                                                    </span>
<span class="-8847143600952784869" onmouseenter="enter('-8847143600952784869');" onmouseout="out('-8847143600952784869');" style=""> 170          public void bindAllApplications(ArrayList&lt;AppInfo&gt; apps);                                                 </span>
<span class="1774766681438121710" onmouseenter="enter('1774766681438121710');" onmouseout="out('1774766681438121710');" style=""> 171          public void bindAppsAdded(ArrayList&lt;Long&gt; newScreens,                                                     </span>
<span class="-4634129325608240116" onmouseenter="enter('-4634129325608240116');" onmouseout="out('-4634129325608240116');" style=""> 172                                    ArrayList&lt;ItemInfo&gt; addNotAnimated,                                             </span>
<span class="-7991947031099209517" onmouseenter="enter('-7991947031099209517');" onmouseout="out('-7991947031099209517');" style=""> 173                                    ArrayList&lt;ItemInfo&gt; addAnimated,                                                </span>
<span class="7647862954797634111" onmouseenter="enter('7647862954797634111');" onmouseout="out('7647862954797634111');" style=""> 174                                    ArrayList&lt;AppInfo&gt; addedApps);                                                  </span>
<span class="4809991796097108143" onmouseenter="enter('4809991796097108143');" onmouseout="out('4809991796097108143');" style=""> 175          public void bindAppsUpdated(ArrayList&lt;AppInfo&gt; apps);                                                     </span>
<span class="-3322135261875169793" onmouseenter="enter('-3322135261875169793');" onmouseout="out('-3322135261875169793');" style=""> 176          public void bindComponentsRemoved(ArrayList&lt;String&gt; packageNames,                                         </span>
<span class="-4070092502400219459" onmouseenter="enter('-4070092502400219459');" onmouseout="out('-4070092502400219459');" style=""> 177                          ArrayList&lt;AppInfo&gt; appInfos);                                                             </span>
<span class="-5054203298075540925" onmouseenter="enter('-5054203298075540925');" onmouseout="out('-5054203298075540925');" style=""> 178          public void bindPackagesUpdated(ArrayList&lt;Object&gt; widgetsAndShortcuts);                                   </span>
<span class="7466294501708892199" onmouseenter="enter('7466294501708892199');" onmouseout="out('7466294501708892199');" style=""> 179          public void bindSearchablesChanged();                                                                     </span>
<span class="-4863664490041232492" onmouseenter="enter('-4863664490041232492');" onmouseout="out('-4863664490041232492');" style=""> 180          public boolean isAllAppsButtonRank(int rank);                                                             </span>
<span class="-6469605959563265863" onmouseenter="enter('-6469605959563265863');" onmouseout="out('-6469605959563265863');" style=""> 181          public void onPageBoundSynchronously(int page);                                                           </span>
<span class="2927470839806734779" onmouseenter="enter('2927470839806734779');" onmouseout="out('2927470839806734779');" style=""> 182          public void dumpLogsToLocalData();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183      }                                                                                                             </span>
<span  style=""> 184                                                                                                                    </span>
<span class="6660553528201779332" onmouseenter="enter('6660553528201779332');" onmouseout="out('6660553528201779332');" style=""> 185      public interface ItemInfoFilter {                                                                             </span>
<span class="-4205302945183309423" onmouseenter="enter('-4205302945183309423');" onmouseout="out('-4205302945183309423');" style=""> 186          public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187      }                                                                                                             </span>
<span  style=""> 188                                                                                                                    </span>
<span class="-7540253694606934273" onmouseenter="enter('-7540253694606934273');" onmouseout="out('-7540253694606934273');" style=""> 189      LauncherModel(LauncherAppState app, IconCache iconCache, AppFilter appFilter) {                               </span>
<span class="-3815285143453777974" onmouseenter="enter('-3815285143453777974');" onmouseout="out('-3815285143453777974');" style=""> 190          Context context = app.getContext();                                                                       </span>
<span class="5049533599805126653" onmouseenter="enter('5049533599805126653');" onmouseout="out('5049533599805126653');" style=""> 191          ContentResolver contentResolver = context.getContentResolver();                                           </span>
<span  style=""> 192                                                                                                                    </span>
<span class="1644001329477881511" onmouseenter="enter('1644001329477881511');" onmouseout="out('1644001329477881511');" style=""> 193          mAppsCanBeOnRemoveableStorage = Environment.isExternalStorageRemovable();                                 </span>
<span class="953599912945541719" onmouseenter="enter('953599912945541719');" onmouseout="out('953599912945541719');" style=""> 194          mOldContentProviderExists = (contentResolver.acquireContentProviderClient(                                </span>
<span class="6680469959813031014" onmouseenter="enter('6680469959813031014');" onmouseout="out('6680469959813031014');" style=""> 195                  LauncherSettings.Favorites.OLD_CONTENT_URI) != null);                                             </span>
<span class="8987557410347250467" onmouseenter="enter('8987557410347250467');" onmouseout="out('8987557410347250467');" style=""> 196          mApp = app;                                                                                               </span>
<span class="-1240051748269974178" onmouseenter="enter('-1240051748269974178');" onmouseout="out('-1240051748269974178');" style=""> 197          mBgAllAppsList = new AllAppsList(iconCache, appFilter);                                                   </span>
<span class="1920389422449187498" onmouseenter="enter('1920389422449187498');" onmouseout="out('1920389422449187498');" style=""> 198          mIconCache = iconCache;                                                                                   </span>
<span  style=""> 199                                                                                                                    </span>
<span class="3654972388535142593" onmouseenter="enter('3654972388535142593');" onmouseout="out('3654972388535142593');" style=""> 200          final Resources res = context.getResources();                                                             </span>
<span class="-4708036118337437843" onmouseenter="enter('-4708036118337437843');" onmouseout="out('-4708036118337437843');" style=""> 201          Configuration config = res.getConfiguration();                                                            </span>
<span class="-32775646941108504" onmouseenter="enter('-32775646941108504');" onmouseout="out('-32775646941108504');" style=""> 202          mPreviousConfigMcc = config.mcc;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203      }                                                                                                             </span>
<span  style=""> 204                                                                                                                    </span>
<span class="7032781054018231449" onmouseenter="enter('7032781054018231449');" onmouseout="out('7032781054018231449');" style=""> 205      /** Runs the specified runnable immediately if called from the main thread, otherwise it is                   </span>
<span class="7688515897456092220" onmouseenter="enter('7688515897456092220');" onmouseout="out('7688515897456092220');" style=""> 206       * posted on the main thread handler. */                                                                      </span>
<span class="-3461925467760565643" onmouseenter="enter('-3461925467760565643');" onmouseout="out('-3461925467760565643');" style=""> 207      private void runOnMainThread(Runnable r) {                                                                    </span>
<span class="-8277339055128647976" onmouseenter="enter('-8277339055128647976');" onmouseout="out('-8277339055128647976');" style=""> 208          runOnMainThread(r, 0);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209      }                                                                                                             </span>
<span class="2979979552252814736" onmouseenter="enter('2979979552252814736');" onmouseout="out('2979979552252814736');" style=""> 210      private void runOnMainThread(Runnable r, int type) {                                                          </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 211          if (sWorkerThread.getThreadId() == Process.myTid()) {                                                     </span>
<span class="-8713172384634047131" onmouseenter="enter('-8713172384634047131');" onmouseout="out('-8713172384634047131');" style=""> 212              // If we are on the worker thread, post onto the main handler                                         </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 213              mHandler.post(r);                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 214          } else {                                                                                                  </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 215              r.run();                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217      }                                                                                                             </span>
<span  style=""> 218                                                                                                                    </span>
<span class="3207003836565128" onmouseenter="enter('3207003836565128');" onmouseout="out('3207003836565128');" style=""> 219      /** Runs the specified runnable immediately if called from the worker thread, otherwise it is                 </span>
<span class="-2756655390038865740" onmouseenter="enter('-2756655390038865740');" onmouseout="out('-2756655390038865740');" style=""> 220       * posted on the worker thread handler. */                                                                    </span>
<span class="-6815764929820931194" onmouseenter="enter('-6815764929820931194');" onmouseout="out('-6815764929820931194');" style=""> 221      private static void runOnWorkerThread(Runnable r) {                                                           </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 222          if (sWorkerThread.getThreadId() == Process.myTid()) {                                                     </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 223              r.run();                                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 224          } else {                                                                                                  </span>
<span class="4127612692606453253" onmouseenter="enter('4127612692606453253');" onmouseout="out('4127612692606453253');" style=""> 225              // If we are not on the worker thread, then post to the worker handler                                </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style=""> 226              sWorker.post(r);                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228      }                                                                                                             </span>
<span  style=""> 229                                                                                                                    </span>
<span class="-7044369129545244866" onmouseenter="enter('-7044369129545244866');" onmouseout="out('-7044369129545244866');" style=""> 230      boolean canMigrateFromOldLauncherDb(Launcher launcher) {                                                      </span>
<span class="7588769537569950934" onmouseenter="enter('7588769537569950934');" onmouseout="out('7588769537569950934');" style=""> 231          return mOldContentProviderExists &amp;&amp; !launcher.isLauncherPreinstalled() ;                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232      }                                                                                                             </span>
<span  style=""> 233                                                                                                                    </span>
<span class="7006856679254675514" onmouseenter="enter('7006856679254675514');" onmouseout="out('7006856679254675514');" style=""> 234      static boolean findNextAvailableIconSpaceInScreen(ArrayList&lt;ItemInfo&gt; items, int[] xy,                        </span>
<span class="-6492711054324248109" onmouseenter="enter('-6492711054324248109');" onmouseout="out('-6492711054324248109');" style=""> 235                                   long screen) {                                                                   </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 236          LauncherAppState app = LauncherAppState.getInstance();                                                    </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style=""> 237          DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                             </span>
<span class="559481881935924132" onmouseenter="enter('559481881935924132');" onmouseout="out('559481881935924132');" style=""> 238          final int xCount = (int) grid.numColumns;                                                                 </span>
<span class="-3430391683121642487" onmouseenter="enter('-3430391683121642487');" onmouseout="out('-3430391683121642487');" style=""> 239          final int yCount = (int) grid.numRows;                                                                    </span>
<span class="9207855715228317472" onmouseenter="enter('9207855715228317472');" onmouseout="out('9207855715228317472');" style=""> 240          boolean[][] occupied = new boolean[xCount][yCount];                                                       </span>
<span  style=""> 241                                                                                                                    </span>
<span class="2963072137114824070" onmouseenter="enter('2963072137114824070');" onmouseout="out('2963072137114824070');" style=""> 242          int cellX, cellY, spanX, spanY;                                                                           </span>
<span class="5020765328610170980" onmouseenter="enter('5020765328610170980');" onmouseout="out('5020765328610170980');" style=""> 243          for (int i = 0; i &lt; items.size(); ++i) {                                                                  </span>
<span class="3181415890192694055" onmouseenter="enter('3181415890192694055');" onmouseout="out('3181415890192694055');" style=""> 244              final ItemInfo item = items.get(i);                                                                   </span>
<span class="-4074076028767186492" onmouseenter="enter('-4074076028767186492');" onmouseout="out('-4074076028767186492');" style=""> 245              if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                                 </span>
<span class="4879929299303230054" onmouseenter="enter('4879929299303230054');" onmouseout="out('4879929299303230054');" style=""> 246                  if (item.screenId == screen) {                                                                    </span>
<span class="-5253640052908660766" onmouseenter="enter('-5253640052908660766');" onmouseout="out('-5253640052908660766');" style=""> 247                      cellX = item.cellX;                                                                           </span>
<span class="8289808867760126989" onmouseenter="enter('8289808867760126989');" onmouseout="out('8289808867760126989');" style=""> 248                      cellY = item.cellY;                                                                           </span>
<span class="-1153670204852401248" onmouseenter="enter('-1153670204852401248');" onmouseout="out('-1153670204852401248');" style=""> 249                      spanX = item.spanX;                                                                           </span>
<span class="-1841066671071348880" onmouseenter="enter('-1841066671071348880');" onmouseout="out('-1841066671071348880');" style=""> 250                      spanY = item.spanY;                                                                           </span>
<span class="3713894754787265371" onmouseenter="enter('3713894754787265371');" onmouseout="out('3713894754787265371');" style=""> 251                      for (int x = cellX; 0 &lt;= x &amp;&amp; x &lt; cellX + spanX &amp;&amp; x &lt; xCount; x++) {                         </span>
<span class="1312990358377437379" onmouseenter="enter('1312990358377437379');" onmouseout="out('1312990358377437379');" style=""> 252                          for (int y = cellY; 0 &lt;= y &amp;&amp; y &lt; cellY + spanY &amp;&amp; y &lt; yCount; y++) {                     </span>
<span class="-8702463444488690423" onmouseenter="enter('-8702463444488690423');" onmouseout="out('-8702463444488690423');" style=""> 253                              occupied[x][y] = true;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 258          }                                                                                                         </span>
<span  style=""> 259                                                                                                                    </span>
<span class="-8431133162249858978" onmouseenter="enter('-8431133162249858978');" onmouseout="out('-8431133162249858978');" style=""> 260          return CellLayout.findVacantCell(xy, 1, 1, xCount, yCount, occupied);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261      }                                                                                                             </span>
<span class="-6259456544478400180" onmouseenter="enter('-6259456544478400180');" onmouseout="out('-6259456544478400180');" style=""> 262      static Pair&lt;Long, int[]&gt; findNextAvailableIconSpace(Context context, String name,                             </span>
<span class="-5771883199866145387" onmouseenter="enter('-5771883199866145387');" onmouseout="out('-5771883199866145387');" style=""> 263                                                          Intent launchIntent,                                      </span>
<span class="245504953411362786" onmouseenter="enter('245504953411362786');" onmouseout="out('245504953411362786');" style=""> 264                                                          int firstScreenIndex,                                     </span>
<span class="-3030748495081078938" onmouseenter="enter('-3030748495081078938');" onmouseout="out('-3030748495081078938');" style=""> 265                                                          ArrayList&lt;Long&gt; workspaceScreens) {                       </span>
<span class="721182088367487597" onmouseenter="enter('721182088367487597');" onmouseout="out('721182088367487597');" style=""> 266          // Lock on the app so that we don&#x27;t try and get the items while apps are being added                      </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 267          LauncherAppState app = LauncherAppState.getInstance();                                                    </span>
<span class="-2530158852228207709" onmouseenter="enter('-2530158852228207709');" onmouseout="out('-2530158852228207709');" style=""> 268          LauncherModel model = app.getModel();                                                                     </span>
<span class="-7742650363035610838" onmouseenter="enter('-7742650363035610838');" onmouseout="out('-7742650363035610838');" style=""> 269          boolean found = false;                                                                                    </span>
<span class="8915607661092661586" onmouseenter="enter('8915607661092661586');" onmouseout="out('8915607661092661586');" style=""> 270          synchronized (app) {                                                                                      </span>
<span class="7297018345010768725" onmouseenter="enter('7297018345010768725');" onmouseout="out('7297018345010768725');" style=""> 271              if (sWorkerThread.getThreadId() != Process.myTid()) {                                                 </span>
<span class="-8468687854737954991" onmouseenter="enter('-8468687854737954991');" onmouseout="out('-8468687854737954991');" style=""> 272                  // Flush the LauncherModel worker thread, so that if we just did another                          </span>
<span class="-8915737001643417667" onmouseenter="enter('-8915737001643417667');" onmouseout="out('-8915737001643417667');" style=""> 273                  // processInstallShortcut, we give it time for its shortcut to get added to the                   </span>
<span class="2341850028976611589" onmouseenter="enter('2341850028976611589');" onmouseout="out('2341850028976611589');" style=""> 274                  // database (getItemsInLocalCoordinates reads the database)                                       </span>
<span class="-3308163450517263024" onmouseenter="enter('-3308163450517263024');" onmouseout="out('-3308163450517263024');" style=""> 275                  model.flushWorkerThread();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276              }                                                                                                     </span>
<span class="8797318797001481965" onmouseenter="enter('8797318797001481965');" onmouseout="out('8797318797001481965');" style=""> 277              final ArrayList&lt;ItemInfo&gt; items = LauncherModel.getItemsInLocalCoordinates(context);                  </span>
<span  style=""> 278                                                                                                                    </span>
<span class="2319873497820841755" onmouseenter="enter('2319873497820841755');" onmouseout="out('2319873497820841755');" style=""> 279              // Try adding to the workspace screens incrementally, starting at the default or center               </span>
<span class="1139467458780899300" onmouseenter="enter('1139467458780899300');" onmouseout="out('1139467458780899300');" style=""> 280              // screen and alternating between +1, -1, +2, -2, etc. (using ~ ceil(i/2f)*(-1)^(i-1))                </span>
<span class="8331999200789555153" onmouseenter="enter('8331999200789555153');" onmouseout="out('8331999200789555153');" style=""> 281              firstScreenIndex = Math.min(firstScreenIndex, workspaceScreens.size());                               </span>
<span class="-5057452471390749214" onmouseenter="enter('-5057452471390749214');" onmouseout="out('-5057452471390749214');" style=""> 282              int count = workspaceScreens.size();                                                                  </span>
<span class="6323561107141122979" onmouseenter="enter('6323561107141122979');" onmouseout="out('6323561107141122979');" style=""> 283              for (int screen = firstScreenIndex; screen &lt; count &amp;&amp; !found; screen++) {                             </span>
<span class="-2680594161355971081" onmouseenter="enter('-2680594161355971081');" onmouseout="out('-2680594161355971081');" style=""> 284                  int[] tmpCoordinates = new int[2];                                                                </span>
<span class="7117247924377105749" onmouseenter="enter('7117247924377105749');" onmouseout="out('7117247924377105749');" style=""> 285                  if (findNextAvailableIconSpaceInScreen(items, tmpCoordinates,                                     </span>
<span class="-6258224581011394116" onmouseenter="enter('-6258224581011394116');" onmouseout="out('-6258224581011394116');" style=""> 286                          workspaceScreens.get(screen))) {                                                          </span>
<span class="-4461607076234575183" onmouseenter="enter('-4461607076234575183');" onmouseout="out('-4461607076234575183');" style=""> 287                      // Update the Launcher db                                                                     </span>
<span class="-6316225509374818886" onmouseenter="enter('-6316225509374818886');" onmouseout="out('-6316225509374818886');" style=""> 288                      return new Pair&lt;Long, int[]&gt;(workspaceScreens.get(screen), tmpCoordinates);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 292          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293      }                                                                                                             </span>
<span  style=""> 294                                                                                                                    </span>
<span class="7557267594336804520" onmouseenter="enter('7557267594336804520');" onmouseout="out('7557267594336804520');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 295 -    public void addAppsToAllApps(final Context ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {                       </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 296 -        final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 297 -                                                                                                                  </span>
<span class="-3382977171164412937" onmouseenter="enter('-3382977171164412937');" onmouseout="out('-3382977171164412937');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 298 -        if (allAppsApps == null) {                                                                                </span>
<span class="6531664792630326104" onmouseenter="enter('6531664792630326104');" onmouseout="out('6531664792630326104');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 299 -            throw new RuntimeException(&quot;allAppsApps must not be null&quot;);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 300 -        }                                                                                                         </span>
<span class="9083517779694379730" onmouseenter="enter('9083517779694379730');" onmouseout="out('9083517779694379730');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 301 -        if (allAppsApps.isEmpty()) {                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 302 -            return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 303 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 304 -                                                                                                                  </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 305 -        final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                                    </span>
<span class="-1645043148265833418" onmouseenter="enter('-1645043148265833418');" onmouseout="out('-1645043148265833418');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 306 -        Iterator&lt;AppInfo&gt; iter = allAppsApps.iterator();                                                          </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 307 -        while (iter.hasNext()) {                                                                                  </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 308 -            ItemInfo a = iter.next();                                                                             </span>
<span class="-1900793198524744852" onmouseenter="enter('-1900793198524744852');" onmouseout="out('-1900793198524744852');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 309 -            if (LauncherModel.appWasRestored(ctx, a.getIntent())) {                                               </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 310 -                restoredAppsFinal.add((AppInfo) a);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 311 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 312 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 313 -                                                                                                                  </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 314 -        // Process the newly added applications and add them to the database first                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 315 -        Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 316 -            public void run() {                                                                                   </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 317 -                runOnMainThread(new Runnable() {                                                                  </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 318 -                    public void run() {                                                                           </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 319 -                        Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                              </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 320 -                        if (callbacks == cb &amp;&amp; cb != null) {                                                      </span>
<span class="2546703397119558662" onmouseenter="enter('2546703397119558662');" onmouseout="out('2546703397119558662');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 321 -                            callbacks.bindAppsAdded(null, null, null, allAppsApps);                               </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 322 -                            if (!restoredAppsFinal.isEmpty()) {                                                   </span>






<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 323 -                                callbacks.bindAppsUpdated(restoredAppsFinal);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 324 -                            }                                                                                     </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 325 -                        }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 326 -                    }                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 327 -                });                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 328 -            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 329 -        };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 330 -        runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 331 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 332 -                                                                                                                  </span>
<span class="-1568395532324485066" onmouseenter="enter('-1568395532324485066');" onmouseout="out('-1568395532324485066');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 333 -    public void addAndBindAddedWorkspaceApps(final Context context,                                               </span>
<span class="-2077533935123746745" onmouseenter="enter('-2077533935123746745');" onmouseout="out('-2077533935123746745');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 334 -            final ArrayList&lt;ItemInfo&gt; workspaceApps) {                                                            </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 335 -        final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 336 -                                                                                                                  </span>
<span class="7068544170534510976" onmouseenter="enter('7068544170534510976');" onmouseout="out('7068544170534510976');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 337 -        if (workspaceApps == null) {                                                                              </span>
<span class="-6660098263631534032" onmouseenter="enter('-6660098263631534032');" onmouseout="out('-6660098263631534032');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 338 +    public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps,               </span>
<span class="9200705866279837671" onmouseenter="enter('9200705866279837671');" onmouseout="out('9200705866279837671');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 339 +                                    final ArrayList&lt;AppInfo&gt; allAppsApps) {                                       </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 340 +        Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                              </span>
<span class="-5825036277829220629" onmouseenter="enter('-5825036277829220629');" onmouseout="out('-5825036277829220629');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 341 +        addAndBindAddedApps(context, workspaceApps, cb, allAppsApps);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 342 +    }                                                                                                             </span>
<span class="-6660098263631534032" onmouseenter="enter('-6660098263631534032');" onmouseout="out('-6660098263631534032');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 343 +    public void addAndBindAddedApps(final Context context, final ArrayList&lt;ItemInfo&gt; workspaceApps,               </span>
<span class="-6487660545798143403" onmouseenter="enter('-6487660545798143403');" onmouseout="out('-6487660545798143403');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 344 +                                final Callbacks callbacks, final ArrayList&lt;AppInfo&gt; allAppsApps) {                </span>
<span class="-1944739770126231100" onmouseenter="enter('-1944739770126231100');" onmouseout="out('-1944739770126231100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 345 +        if (workspaceApps == null || allAppsApps == null) {                                                       </span>
<span class="-5351072863300047246" onmouseenter="enter('-5351072863300047246');" onmouseout="out('-5351072863300047246');" style=""> 346              throw new RuntimeException(&quot;workspaceApps and allAppsApps must not be null&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347          }                                                                                                         </span>
<span class="3300400308027950866" onmouseenter="enter('3300400308027950866');" onmouseout="out('3300400308027950866');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 348 -        if (workspaceApps.isEmpty()) {                                                                            </span>
<span class="6140956863670038829" onmouseenter="enter('6140956863670038829');" onmouseout="out('6140956863670038829');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 349 +        if (workspaceApps.isEmpty() &amp;&amp; allAppsApps.isEmpty()) {                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 350              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351          }                                                                                                         </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 352          // Process the newly added applications and add them to the database first                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 353          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 354              public void run() {                                                                                   </span>
<span class="5854603691017442546" onmouseenter="enter('5854603691017442546');" onmouseout="out('5854603691017442546');" style=""> 355                  final ArrayList&lt;ItemInfo&gt; addedShortcutsFinal = new ArrayList&lt;ItemInfo&gt;();                        </span>
<span class="4777543170844968619" onmouseenter="enter('4777543170844968619');" onmouseout="out('4777543170844968619');" style=""> 356                  final ArrayList&lt;Long&gt; addedWorkspaceScreensFinal = new ArrayList&lt;Long&gt;();                         </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 357 -                final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                            </span>
<span  style=""> 358                                                                                                                    </span>
<span class="4915887978102159996" onmouseenter="enter('4915887978102159996');" onmouseout="out('4915887978102159996');" style=""> 359                  // Get the list of workspace screens.  We need to append to this list and                         </span>
<span class="-2543969750120350255" onmouseenter="enter('-2543969750120350255');" onmouseout="out('-2543969750120350255');" style=""> 360                  // can not use sBgWorkspaceScreens because loadWorkspace() may not have been                      </span>
<span class="-1621475725142003189" onmouseenter="enter('-1621475725142003189');" onmouseout="out('-1621475725142003189');" style=""> 361                  // called.                                                                                        </span>
<span class="-3443356389434560072" onmouseenter="enter('-3443356389434560072');" onmouseout="out('-3443356389434560072');" style=""> 362                  ArrayList&lt;Long&gt; workspaceScreens = new ArrayList&lt;Long&gt;();                                         </span>
<span class="-7213068701168456094" onmouseenter="enter('-7213068701168456094');" onmouseout="out('-7213068701168456094');" style=""> 363                  TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(context);                          </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style=""> 364                  for (Integer i : orderedScreens.keySet()) {                                                       </span>
<span class="3611014469778353319" onmouseenter="enter('3611014469778353319');" onmouseout="out('3611014469778353319');" style=""> 365                      long screenId = orderedScreens.get(i);                                                        </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 366                      workspaceScreens.add(screenId);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367                  }                                                                                                 </span>
<span  style=""> 368                                                                                                                    </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 369                  synchronized(sBgLock) {                                                                           </span>
<span class="8076980411968102032" onmouseenter="enter('8076980411968102032');" onmouseout="out('8076980411968102032');" style=""> 370                      Iterator&lt;ItemInfo&gt; iter = workspaceApps.iterator();                                           </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 371                      while (iter.hasNext()) {                                                                      </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 372                          ItemInfo a = iter.next();                                                                 </span>
<span class="5754535581277543167" onmouseenter="enter('5754535581277543167');" onmouseout="out('5754535581277543167');" style=""> 373                          final String name = a.title.toString();                                                   </span>
<span class="586533724609175080" onmouseenter="enter('586533724609175080');" onmouseout="out('586533724609175080');" style=""> 374                          final Intent launchIntent = a.getIntent();                                                </span>
<span  style=""> 375                                                                                                                    </span>
<span class="-3621515927242872869" onmouseenter="enter('-3621515927242872869');" onmouseout="out('-3621515927242872869');" style=""> 376                          // Short-circuit this logic if the icon exists somewhere on the workspace                 </span>
<span class="-636823087841001444" onmouseenter="enter('-636823087841001444');" onmouseout="out('-636823087841001444');" style=""> 377                          if (LauncherModel.shortcutExists(context, name, launchIntent)) {                          </span>
<span class="1114901652794496627" onmouseenter="enter('1114901652794496627');" onmouseout="out('1114901652794496627');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 378 -                            // Only InstallShortcutReceiver sends us shortcutInfos, ignore them                   </span>
<span class="-8314395278706468200" onmouseenter="enter('-8314395278706468200');" onmouseout="out('-8314395278706468200');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 379 -                            if (a instanceof AppInfo &amp;&amp;                                                           </span>
<span class="2825607628990780271" onmouseenter="enter('2825607628990780271');" onmouseout="out('2825607628990780271');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 380 -                                    LauncherModel.appWasRestored(context, launchIntent)) {                        </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 381 -                                restoredAppsFinal.add((AppInfo) a);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 382 -                            }                                                                                     </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 383                              continue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 384                          }                                                                                         </span>
<span  style=""> 385                                                                                                                    </span>
<span class="7211587366126774382" onmouseenter="enter('7211587366126774382');" onmouseout="out('7211587366126774382');" style=""> 386                          // Add this icon to the db, creating a new page if necessary.  If there                   </span>
<span class="1191339950892304982" onmouseenter="enter('1191339950892304982');" onmouseout="out('1191339950892304982');" style=""> 387                          // is only the empty page then we just add items to the first page.                       </span>
<span class="1496171924920860168" onmouseenter="enter('1496171924920860168');" onmouseout="out('1496171924920860168');" style=""> 388                          // Otherwise, we add them to the next pages.                                              </span>
<span class="-506120048723665625" onmouseenter="enter('-506120048723665625');" onmouseout="out('-506120048723665625');" style=""> 389                          int startSearchPageIndex = workspaceScreens.isEmpty() ? 0 : 1;                            </span>
<span class="89807873419961601" onmouseenter="enter('89807873419961601');" onmouseout="out('89807873419961601');" style=""> 390                          Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context,              </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 391                                  name, launchIntent, startSearchPageIndex, workspaceScreens);                      </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 392                          if (coords == null) {                                                                     </span>
<span class="-1977519011864878718" onmouseenter="enter('-1977519011864878718');" onmouseout="out('-1977519011864878718');" style=""> 393                              LauncherProvider lp = LauncherAppState.getLauncherProvider();                         </span>
<span  style=""> 394                                                                                                                    </span>
<span class="-6633238510673534076" onmouseenter="enter('-6633238510673534076');" onmouseout="out('-6633238510673534076');" style=""> 395                              // If we can&#x27;t find a valid position, then just add a new screen.                     </span>
<span class="9059050260314553422" onmouseenter="enter('9059050260314553422');" onmouseout="out('9059050260314553422');" style=""> 396                              // This takes time so we need to re-queue the add until the new                       </span>
<span class="-5280811079167182328" onmouseenter="enter('-5280811079167182328');" onmouseout="out('-5280811079167182328');" style=""> 397                              // page is added.  Create as many screens as necessary to satisfy                     </span>
<span class="8455829478477151409" onmouseenter="enter('8455829478477151409');" onmouseout="out('8455829478477151409');" style=""> 398                              // the startSearchPageIndex.                                                          </span>
<span class="8487048175242917271" onmouseenter="enter('8487048175242917271');" onmouseout="out('8487048175242917271');" style=""> 399                              int numPagesToAdd = Math.max(1, startSearchPageIndex + 1 -                            </span>
<span class="-1324774811555943949" onmouseenter="enter('-1324774811555943949');" onmouseout="out('-1324774811555943949');" style=""> 400                                      workspaceScreens.size());                                                     </span>
<span class="1483283720296841413" onmouseenter="enter('1483283720296841413');" onmouseout="out('1483283720296841413');" style=""> 401                              while (numPagesToAdd &gt; 0) {                                                           </span>
<span class="5474653119612683837" onmouseenter="enter('5474653119612683837');" onmouseout="out('5474653119612683837');" style=""> 402                                  long screenId = lp.generateNewScreenId();                                         </span>
<span class="-5141234047937446124" onmouseenter="enter('-5141234047937446124');" onmouseout="out('-5141234047937446124');" style=""> 403                                  // Save the screen id for binding in the workspace                                </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 404                                  workspaceScreens.add(screenId);                                                   </span>
<span class="-3696618646623922220" onmouseenter="enter('-3696618646623922220');" onmouseout="out('-3696618646623922220');" style=""> 405                                  addedWorkspaceScreensFinal.add(screenId);                                         </span>
<span class="6351530934092402455" onmouseenter="enter('6351530934092402455');" onmouseout="out('6351530934092402455');" style=""> 406                                  numPagesToAdd--;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 407                              }                                                                                     </span>
<span  style=""> 408                                                                                                                    </span>
<span class="3901243562383099159" onmouseenter="enter('3901243562383099159');" onmouseout="out('3901243562383099159');" style=""> 409                              // Find the coordinate again                                                          </span>
<span class="-3135847744636951602" onmouseenter="enter('-3135847744636951602');" onmouseout="out('-3135847744636951602');" style=""> 410                              coords = LauncherModel.findNextAvailableIconSpace(context,                            </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 411                                      name, launchIntent, startSearchPageIndex, workspaceScreens);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 412                          }                                                                                         </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 413                          if (coords == null) {                                                                     </span>
<span class="-5449977300326458327" onmouseenter="enter('-5449977300326458327');" onmouseout="out('-5449977300326458327');" style=""> 414                              throw new RuntimeException(&quot;Coordinates should not be null&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415                          }                                                                                         </span>
<span  style=""> 416                                                                                                                    </span>
<span class="2174473495010763804" onmouseenter="enter('2174473495010763804');" onmouseout="out('2174473495010763804');" style=""> 417                          ShortcutInfo shortcutInfo;                                                                </span>
<span class="3426516810566896093" onmouseenter="enter('3426516810566896093');" onmouseout="out('3426516810566896093');" style=""> 418                          if (a instanceof ShortcutInfo) {                                                          </span>
<span class="-5249556100657982245" onmouseenter="enter('-5249556100657982245');" onmouseout="out('-5249556100657982245');" style=""> 419                              shortcutInfo = (ShortcutInfo) a;                                                      </span>
<span class="-6332708218117638716" onmouseenter="enter('-6332708218117638716');" onmouseout="out('-6332708218117638716');" style=""> 420                          } else if (a instanceof AppInfo) {                                                        </span>
<span class="1865505886056520689" onmouseenter="enter('1865505886056520689');" onmouseout="out('1865505886056520689');" style=""> 421                              shortcutInfo = ((AppInfo) a).makeShortcut();                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 422                          } else {                                                                                  </span>
<span class="-2299195794588473913" onmouseenter="enter('-2299195794588473913');" onmouseout="out('-2299195794588473913');" style=""> 423                              throw new RuntimeException(&quot;Unexpected info type&quot;);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 424                          }                                                                                         </span>
<span  style=""> 425                                                                                                                    </span>
<span class="-2461182371641304570" onmouseenter="enter('-2461182371641304570');" onmouseout="out('-2461182371641304570');" style=""> 426                          // Add the shortcut to the db                                                             </span>
<span class="-7320352620243561318" onmouseenter="enter('-7320352620243561318');" onmouseout="out('-7320352620243561318');" style=""> 427                          addItemToDatabase(context, shortcutInfo,                                                  </span>
<span class="-99165044777853060" onmouseenter="enter('-99165044777853060');" onmouseout="out('-99165044777853060');" style=""> 428                                  LauncherSettings.Favorites.CONTAINER_DESKTOP,                                     </span>
<span class="-5434732926326446745" onmouseenter="enter('-5434732926326446745');" onmouseout="out('-5434732926326446745');" style=""> 429                                  coords.first, coords.second[0], coords.second[1], false);                         </span>
<span class="-9035556179028036770" onmouseenter="enter('-9035556179028036770');" onmouseout="out('-9035556179028036770');" style=""> 430                          // Save the ShortcutInfo for binding in the workspace                                     </span>
<span class="-7926664864188687285" onmouseenter="enter('-7926664864188687285');" onmouseout="out('-7926664864188687285');" style=""> 431                          addedShortcutsFinal.add(shortcutInfo);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433                  }                                                                                                 </span>
<span  style=""> 434                                                                                                                    </span>
<span class="-4345643046227374009" onmouseenter="enter('-4345643046227374009');" onmouseout="out('-4345643046227374009');" style=""> 435                  // Update the workspace screens                                                                   </span>
<span class="-8595972794596504077" onmouseenter="enter('-8595972794596504077');" onmouseout="out('-8595972794596504077');" style=""> 436                  updateWorkspaceScreenOrder(context, workspaceScreens);                                            </span>
<span  style=""> 437                                                                                                                    </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 438 -                if (!addedShortcutsFinal.isEmpty()) {                                                             </span>
<span class="6328421283494006334" onmouseenter="enter('6328421283494006334');" onmouseout="out('6328421283494006334');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 439 +                if (!addedShortcutsFinal.isEmpty() || !allAppsApps.isEmpty()) {                                   </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 440                      runOnMainThread(new Runnable() {                                                              </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 441                          public void run() {                                                                       </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style=""> 442                              Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                          </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style=""> 443                              if (callbacks == cb &amp;&amp; cb != null) {                                                  </span>
<span class="-1019372697145415139" onmouseenter="enter('-1019372697145415139');" onmouseout="out('-1019372697145415139');" style=""> 444                                  final ArrayList&lt;ItemInfo&gt; addAnimated = new ArrayList&lt;ItemInfo&gt;();                </span>
<span class="2118444153049166132" onmouseenter="enter('2118444153049166132');" onmouseout="out('2118444153049166132');" style=""> 445                                  final ArrayList&lt;ItemInfo&gt; addNotAnimated = new ArrayList&lt;ItemInfo&gt;();             </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 446                                  if (!addedShortcutsFinal.isEmpty()) {                                             </span>
<span class="-7025153910539821495" onmouseenter="enter('-7025153910539821495');" onmouseout="out('-7025153910539821495');" style=""> 447                                      ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - 1);      </span>
<span class="2594218988288672349" onmouseenter="enter('2594218988288672349');" onmouseout="out('2594218988288672349');" style=""> 448                                      long lastScreenId = info.screenId;                                            </span>
<span class="-1990558815210533549" onmouseenter="enter('-1990558815210533549');" onmouseout="out('-1990558815210533549');" style=""> 449                                      for (ItemInfo i : addedShortcutsFinal) {                                      </span>
<span class="493217455474284777" onmouseenter="enter('493217455474284777');" onmouseout="out('493217455474284777');" style=""> 450                                          if (i.screenId == lastScreenId) {                                         </span>
<span class="-1039209268317612440" onmouseenter="enter('-1039209268317612440');" onmouseout="out('-1039209268317612440');" style=""> 451                                              addAnimated.add(i);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 452                                          } else {                                                                  </span>
<span class="-1143244035417449650" onmouseenter="enter('-1143244035417449650');" onmouseout="out('-1143244035417449650');" style=""> 453                                              addNotAnimated.add(i);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454                                          }                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456                                  }                                                                                 </span>
<span class="6311741688571123959" onmouseenter="enter('6311741688571123959');" onmouseout="out('6311741688571123959');" style=""> 457                                  callbacks.bindAppsAdded(addedWorkspaceScreensFinal,                               </span>
<span class="6252030951506738248" onmouseenter="enter('6252030951506738248');" onmouseout="out('6252030951506738248');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 458 -                                        addNotAnimated, addAnimated, null);                                       </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 459 -                                if (!restoredAppsFinal.isEmpty()) {                                               </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 460 -                                    callbacks.bindAppsUpdated(restoredAppsFinal);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 461 -                                }                                                                                 </span>
<span class="-748486497380548647" onmouseenter="enter('-748486497380548647');" onmouseout="out('-748486497380548647');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 462 +                                        addNotAnimated, addAnimated, allAppsApps);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 464                          }                                                                                         </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 465                      });                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 468          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 469          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 470      }                                                                                                             </span>
<span  style=""> 471                                                                                                                    </span>
<span class="6011793905538310529" onmouseenter="enter('6011793905538310529');" onmouseout="out('6011793905538310529');" style=""> 472      public Bitmap getFallbackIcon() {                                                                             </span>
<span class="-671044890656554786" onmouseenter="enter('-671044890656554786');" onmouseout="out('-671044890656554786');" style=""> 473          if (mDefaultIcon == null) {                                                                               </span>
<span class="6379788101570603758" onmouseenter="enter('6379788101570603758');" onmouseout="out('6379788101570603758');" style=""> 474              final Context context = LauncherAppState.getInstance().getContext();                                  </span>
<span class="-6730081374242205673" onmouseenter="enter('-6730081374242205673');" onmouseout="out('-6730081374242205673');" style=""> 475              mDefaultIcon = Utilities.createIconBitmap(                                                            </span>
<span class="-5707305257020956234" onmouseenter="enter('-5707305257020956234');" onmouseout="out('-5707305257020956234');" style=""> 476                      mIconCache.getFullResDefaultActivityIcon(), context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477          }                                                                                                         </span>
<span class="1334413422936499318" onmouseenter="enter('1334413422936499318');" onmouseout="out('1334413422936499318');" style=""> 478          return Bitmap.createBitmap(mDefaultIcon);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 479      }                                                                                                             </span>
<span  style=""> 480                                                                                                                    </span>
<span class="-2534375214054854784" onmouseenter="enter('-2534375214054854784');" onmouseout="out('-2534375214054854784');" style=""> 481      public void unbindItemInfosAndClearQueuedBindRunnables() {                                                    </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 482          if (sWorkerThread.getThreadId() == Process.myTid()) {                                                     </span>
<span class="3234081821162543737" onmouseenter="enter('3234081821162543737');" onmouseout="out('3234081821162543737');" style=""> 483              throw new RuntimeException(&quot;Expected unbindLauncherItemInfos() to be called from the &quot; +              </span>
<span class="-2105866874193436772" onmouseenter="enter('-2105866874193436772');" onmouseout="out('-2105866874193436772');" style=""> 484                      &quot;main thread&quot;);                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485          }                                                                                                         </span>
<span  style=""> 486                                                                                                                    </span>
<span class="2920227315927506269" onmouseenter="enter('2920227315927506269');" onmouseout="out('2920227315927506269');" style=""> 487          // Clear any deferred bind runnables                                                                      </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style=""> 488          mDeferredBindRunnables.clear();                                                                           </span>
<span class="8385691997542366613" onmouseenter="enter('8385691997542366613');" onmouseout="out('8385691997542366613');" style=""> 489          // Remove any queued bind runnables                                                                       </span>
<span class="5230017654050637935" onmouseenter="enter('5230017654050637935');" onmouseout="out('5230017654050637935');" style=""> 490          mHandler.cancelAllRunnablesOfType(MAIN_THREAD_BINDING_RUNNABLE);                                          </span>
<span class="1897803433846165569" onmouseenter="enter('1897803433846165569');" onmouseout="out('1897803433846165569');" style=""> 491          // Unbind all the workspace items                                                                         </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style=""> 492          unbindWorkspaceItemsOnMainThread();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 493      }                                                                                                             </span>
<span  style=""> 494                                                                                                                    </span>
<span class="-8568492770799719308" onmouseenter="enter('-8568492770799719308');" onmouseout="out('-8568492770799719308');" style=""> 495      /** Unbinds all the sBgWorkspaceItems and sBgAppWidgets on the main thread */                                 </span>
<span class="-7789072121131450728" onmouseenter="enter('-7789072121131450728');" onmouseout="out('-7789072121131450728');" style=""> 496      void unbindWorkspaceItemsOnMainThread() {                                                                     </span>
<span class="7758625295624680992" onmouseenter="enter('7758625295624680992');" onmouseout="out('7758625295624680992');" style=""> 497          // Ensure that we don&#x27;t use the same workspace items data structure on the main thread                    </span>
<span class="737195251801262528" onmouseenter="enter('737195251801262528');" onmouseout="out('737195251801262528');" style=""> 498          // by making a copy of workspace items first.                                                             </span>
<span class="-1398641255292585189" onmouseenter="enter('-1398641255292585189');" onmouseout="out('-1398641255292585189');" style=""> 499          final ArrayList&lt;ItemInfo&gt; tmpWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                                  </span>
<span class="-3814257207504512344" onmouseenter="enter('-3814257207504512344');" onmouseout="out('-3814257207504512344');" style=""> 500          final ArrayList&lt;ItemInfo&gt; tmpAppWidgets = new ArrayList&lt;ItemInfo&gt;();                                      </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 501          synchronized (sBgLock) {                                                                                  </span>
<span class="871827956477804030" onmouseenter="enter('871827956477804030');" onmouseout="out('871827956477804030');" style=""> 502              tmpWorkspaceItems.addAll(sBgWorkspaceItems);                                                          </span>
<span class="7232141846966659069" onmouseenter="enter('7232141846966659069');" onmouseout="out('7232141846966659069');" style=""> 503              tmpAppWidgets.addAll(sBgAppWidgets);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504          }                                                                                                         </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 505          Runnable r = new Runnable() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 506                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 507                  public void run() {                                                                               </span>
<span class="709208250683113430" onmouseenter="enter('709208250683113430');" onmouseout="out('709208250683113430');" style=""> 508                     for (ItemInfo item : tmpWorkspaceItems) {                                                      </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 509                         item.unbind();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 510                     }                                                                                              </span>
<span class="5969585374646931804" onmouseenter="enter('5969585374646931804');" onmouseout="out('5969585374646931804');" style=""> 511                     for (ItemInfo item : tmpAppWidgets) {                                                          </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 512                         item.unbind();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 513                     }                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 514                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 515              };                                                                                                    </span>
<span class="7651423128405913164" onmouseenter="enter('7651423128405913164');" onmouseout="out('7651423128405913164');" style=""> 516          runOnMainThread(r);                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 517      }                                                                                                             </span>
<span  style=""> 518                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 519      /**                                                                                                           </span>
<span class="1848609696039738732" onmouseenter="enter('1848609696039738732');" onmouseout="out('1848609696039738732');" style=""> 520       * Adds an item to the DB if it was not created previously, or move it to a new                               </span>
<span class="-5676820686470662639" onmouseenter="enter('-5676820686470662639');" onmouseout="out('-5676820686470662639');" style=""> 521       * &lt;container, screen, cellX, cellY&gt;                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 522       */                                                                                                           </span>
<span class="-51543303805672089" onmouseenter="enter('-51543303805672089');" onmouseout="out('-51543303805672089');" style=""> 523      static void addOrMoveItemInDatabase(Context context, ItemInfo item, long container,                           </span>
<span class="-5245876562794627197" onmouseenter="enter('-5245876562794627197');" onmouseout="out('-5245876562794627197');" style=""> 524              long screenId, int cellX, int cellY) {                                                                </span>
<span class="32392699487480265" onmouseenter="enter('32392699487480265');" onmouseout="out('32392699487480265');" style=""> 525          if (item.container == ItemInfo.NO_ID) {                                                                   </span>
<span class="4419434731301535819" onmouseenter="enter('4419434731301535819');" onmouseout="out('4419434731301535819');" style=""> 526              // From all apps                                                                                      </span>
<span class="-8263439540868073092" onmouseenter="enter('-8263439540868073092');" onmouseout="out('-8263439540868073092');" style=""> 527              addItemToDatabase(context, item, container, screenId, cellX, cellY, false);                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 528          } else {                                                                                                  </span>
<span class="-7142861896488381117" onmouseenter="enter('-7142861896488381117');" onmouseout="out('-7142861896488381117');" style=""> 529              // From somewhere else                                                                                </span>
<span class="8117171250701950869" onmouseenter="enter('8117171250701950869');" onmouseout="out('8117171250701950869');" style=""> 530              moveItemInDatabase(context, item, container, screenId, cellX, cellY);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532      }                                                                                                             </span>
<span  style=""> 533                                                                                                                    </span>
<span class="4702100753708951937" onmouseenter="enter('4702100753708951937');" onmouseout="out('4702100753708951937');" style=""> 534      static void checkItemInfoLocked(                                                                              </span>
<span class="5364875648309494693" onmouseenter="enter('5364875648309494693');" onmouseout="out('5364875648309494693');" style=""> 535              final long itemId, final ItemInfo item, StackTraceElement[] stackTrace) {                             </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 536          ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                           </span>
<span class="2193901808277988725" onmouseenter="enter('2193901808277988725');" onmouseout="out('2193901808277988725');" style=""> 537          if (modelItem != null &amp;&amp; item != modelItem) {                                                             </span>
<span class="-6911492637937320821" onmouseenter="enter('-6911492637937320821');" onmouseout="out('-6911492637937320821');" style=""> 538              // check all the data is consistent                                                                   </span>
<span class="3167281191986023088" onmouseenter="enter('3167281191986023088');" onmouseout="out('3167281191986023088');" style=""> 539              if (modelItem instanceof ShortcutInfo &amp;&amp; item instanceof ShortcutInfo) {                              </span>
<span class="-1653864946297504770" onmouseenter="enter('-1653864946297504770');" onmouseout="out('-1653864946297504770');" style=""> 540                  ShortcutInfo modelShortcut = (ShortcutInfo) modelItem;                                            </span>
<span class="-8536587564734321572" onmouseenter="enter('-8536587564734321572');" onmouseout="out('-8536587564734321572');" style=""> 541                  ShortcutInfo shortcut = (ShortcutInfo) item;                                                      </span>
<span class="-7217994585765985559" onmouseenter="enter('-7217994585765985559');" onmouseout="out('-7217994585765985559');" style=""> 542                  if (modelShortcut.title.toString().equals(shortcut.title.toString()) &amp;&amp;                           </span>
<span class="7021740932722535577" onmouseenter="enter('7021740932722535577');" onmouseout="out('7021740932722535577');" style=""> 543                          modelShortcut.intent.filterEquals(shortcut.intent) &amp;&amp;                                     </span>
<span class="4925161259592804600" onmouseenter="enter('4925161259592804600');" onmouseout="out('4925161259592804600');" style=""> 544                          modelShortcut.id == shortcut.id &amp;&amp;                                                        </span>
<span class="-1606801806764943644" onmouseenter="enter('-1606801806764943644');" onmouseout="out('-1606801806764943644');" style=""> 545                          modelShortcut.itemType == shortcut.itemType &amp;&amp;                                            </span>
<span class="-380653198024077357" onmouseenter="enter('-380653198024077357');" onmouseout="out('-380653198024077357');" style=""> 546                          modelShortcut.container == shortcut.container &amp;&amp;                                          </span>
<span class="2095015237441904975" onmouseenter="enter('2095015237441904975');" onmouseout="out('2095015237441904975');" style=""> 547                          modelShortcut.screenId == shortcut.screenId &amp;&amp;                                            </span>
<span class="8356312788511485655" onmouseenter="enter('8356312788511485655');" onmouseout="out('8356312788511485655');" style=""> 548                          modelShortcut.cellX == shortcut.cellX &amp;&amp;                                                  </span>
<span class="-8074804825298555262" onmouseenter="enter('-8074804825298555262');" onmouseout="out('-8074804825298555262');" style=""> 549                          modelShortcut.cellY == shortcut.cellY &amp;&amp;                                                  </span>
<span class="-7194734667210277438" onmouseenter="enter('-7194734667210277438');" onmouseout="out('-7194734667210277438');" style=""> 550                          modelShortcut.spanX == shortcut.spanX &amp;&amp;                                                  </span>
<span class="-7990526823057792041" onmouseenter="enter('-7990526823057792041');" onmouseout="out('-7990526823057792041');" style=""> 551                          modelShortcut.spanY == shortcut.spanY &amp;&amp;                                                  </span>
<span class="1791877648440959041" onmouseenter="enter('1791877648440959041');" onmouseout="out('1791877648440959041');" style=""> 552                          ((modelShortcut.dropPos == null &amp;&amp; shortcut.dropPos == null) ||                           </span>
<span class="-2385997644828375020" onmouseenter="enter('-2385997644828375020');" onmouseout="out('-2385997644828375020');" style=""> 553                          (modelShortcut.dropPos != null &amp;&amp;                                                         </span>
<span class="8673154118418480877" onmouseenter="enter('8673154118418480877');" onmouseout="out('8673154118418480877');" style=""> 554                                  shortcut.dropPos != null &amp;&amp;                                                       </span>
<span class="1110472284758384589" onmouseenter="enter('1110472284758384589');" onmouseout="out('1110472284758384589');" style=""> 555                                  modelShortcut.dropPos[0] == shortcut.dropPos[0] &amp;&amp;                                </span>
<span class="8614743944867507225" onmouseenter="enter('8614743944867507225');" onmouseout="out('8614743944867507225');" style=""> 556                          modelShortcut.dropPos[1] == shortcut.dropPos[1]))) {                                      </span>
<span class="-1826978062251207152" onmouseenter="enter('-1826978062251207152');" onmouseout="out('-1826978062251207152');" style=""> 557                      // For all intents and purposes, this is the same object                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 558                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 559                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 560              }                                                                                                     </span>
<span  style=""> 561                                                                                                                    </span>
<span class="-2302662152798801960" onmouseenter="enter('-2302662152798801960');" onmouseout="out('-2302662152798801960');" style=""> 562              // the modelItem needs to match up perfectly with item if our model is                                </span>
<span class="2528116919227347475" onmouseenter="enter('2528116919227347475');" onmouseout="out('2528116919227347475');" style=""> 563              // to be consistent with the database-- for now, just require                                         </span>
<span class="-7120210409264493846" onmouseenter="enter('-7120210409264493846');" onmouseout="out('-7120210409264493846');" style=""> 564              // modelItem == item or the equality check above                                                      </span>
<span class="-3667577266304831846" onmouseenter="enter('-3667577266304831846');" onmouseout="out('-3667577266304831846');" style=""> 565              String msg = &quot;item: &quot; + ((item != null) ? item.toString() : &quot;null&quot;) +                                 </span>
<span class="-2910805653187511799" onmouseenter="enter('-2910805653187511799');" onmouseout="out('-2910805653187511799');" style=""> 566                      &quot;modelItem: &quot; +                                                                               </span>
<span class="-7298566834322238485" onmouseenter="enter('-7298566834322238485');" onmouseout="out('-7298566834322238485');" style=""> 567                      ((modelItem != null) ? modelItem.toString() : &quot;null&quot;) +                                       </span>
<span class="-1970027720063810255" onmouseenter="enter('-1970027720063810255');" onmouseout="out('-1970027720063810255');" style=""> 568                      &quot;Error: ItemInfo passed to checkItemInfo doesn&#x27;t match original&quot;;                             </span>
<span class="889449931745068267" onmouseenter="enter('889449931745068267');" onmouseout="out('889449931745068267');" style=""> 569              RuntimeException e = new RuntimeException(msg);                                                       </span>
<span class="746494671138810715" onmouseenter="enter('746494671138810715');" onmouseout="out('746494671138810715');" style=""> 570              if (stackTrace != null) {                                                                             </span>
<span class="6991917147302354492" onmouseenter="enter('6991917147302354492');" onmouseout="out('6991917147302354492');" style=""> 571                  e.setStackTrace(stackTrace);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 572              }                                                                                                     </span>
<span class="-2532054300390783036" onmouseenter="enter('-2532054300390783036');" onmouseout="out('-2532054300390783036');" style=""> 573              throw e;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 575      }                                                                                                             </span>
<span  style=""> 576                                                                                                                    </span>
<span class="8253262720993766341" onmouseenter="enter('8253262720993766341');" onmouseout="out('8253262720993766341');" style=""> 577      static void checkItemInfo(final ItemInfo item) {                                                              </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 578          final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                                   </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 579          final long itemId = item.id;                                                                              </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 580          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 581              public void run() {                                                                                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 582                  synchronized (sBgLock) {                                                                          </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 583                      checkItemInfoLocked(itemId, item, stackTrace);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 584                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 585              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 586          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 587          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 588      }                                                                                                             </span>
<span  style=""> 589                                                                                                                    </span>
<span class="-7795546628976526290" onmouseenter="enter('-7795546628976526290');" onmouseout="out('-7795546628976526290');" style=""> 590      static void updateItemInDatabaseHelper(Context context, final ContentValues values,                           </span>
<span class="-8227938209854841132" onmouseenter="enter('-8227938209854841132');" onmouseout="out('-8227938209854841132');" style=""> 591              final ItemInfo item, final String callingFunction) {                                                  </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 592          final long itemId = item.id;                                                                              </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 593          final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);                                  </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 594          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span  style=""> 595                                                                                                                    </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 596          final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                                   </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 597          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 598              public void run() {                                                                                   </span>
<span class="6508684228899883734" onmouseenter="enter('6508684228899883734');" onmouseout="out('6508684228899883734');" style=""> 599                  cr.update(uri, values, null, null);                                                               </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 600                  updateItemArrays(item, itemId, stackTrace);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 602          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 603          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 604      }                                                                                                             </span>
<span  style=""> 605                                                                                                                    </span>
<span class="-5268011833856431518" onmouseenter="enter('-5268011833856431518');" onmouseout="out('-5268011833856431518');" style=""> 606      static void updateItemsInDatabaseHelper(Context context, final ArrayList&lt;ContentValues&gt; valuesList,           </span>
<span class="-6813896065968537303" onmouseenter="enter('-6813896065968537303');" onmouseout="out('-6813896065968537303');" style=""> 607              final ArrayList&lt;ItemInfo&gt; items, final String callingFunction) {                                      </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 608          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span  style=""> 609                                                                                                                    </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 610          final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                                   </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 611          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 612              public void run() {                                                                                   </span>
<span class="870344729843570934" onmouseenter="enter('870344729843570934');" onmouseout="out('870344729843570934');" style=""> 613                  ArrayList&lt;ContentProviderOperation&gt; ops =                                                         </span>
<span class="9022468941674050374" onmouseenter="enter('9022468941674050374');" onmouseout="out('9022468941674050374');" style=""> 614                          new ArrayList&lt;ContentProviderOperation&gt;();                                                </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 615                  int count = items.size();                                                                         </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 616                  for (int i = 0; i &lt; count; i++) {                                                                 </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 617                      ItemInfo item = items.get(i);                                                                 </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 618                      final long itemId = item.id;                                                                  </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 619                      final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);                      </span>
<span class="-8860263448497272048" onmouseenter="enter('-8860263448497272048');" onmouseout="out('-8860263448497272048');" style=""> 620                      ContentValues values = valuesList.get(i);                                                     </span>
<span  style=""> 621                                                                                                                    </span>
<span class="2997765192602662390" onmouseenter="enter('2997765192602662390');" onmouseout="out('2997765192602662390');" style=""> 622                      ops.add(ContentProviderOperation.newUpdate(uri).withValues(values).build());                  </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 623                      updateItemArrays(item, itemId, stackTrace);                                                   </span>
<span  style=""> 624                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 625                  }                                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 626                  try {                                                                                             </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style=""> 627                      cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                               </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 628                  } catch (Exception e) {                                                                           </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 629                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 630                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 631              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 632          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 633          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 634      }                                                                                                             </span>
<span  style=""> 635                                                                                                                    </span>
<span class="2082626234385770383" onmouseenter="enter('2082626234385770383');" onmouseout="out('2082626234385770383');" style=""> 636      static void updateItemArrays(ItemInfo item, long itemId, StackTraceElement[] stackTrace) {                    </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 637          // Lock on mBgLock *after* the db operation                                                               </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 638          synchronized (sBgLock) {                                                                                  </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 639              checkItemInfoLocked(itemId, item, stackTrace);                                                        </span>
<span  style=""> 640                                                                                                                    </span>
<span class="5861445851049755510" onmouseenter="enter('5861445851049755510');" onmouseout="out('5861445851049755510');" style=""> 641              if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                                 </span>
<span class="-7006113140306734361" onmouseenter="enter('-7006113140306734361');" onmouseout="out('-7006113140306734361');" style=""> 642                      item.container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="-6294566488312473300" onmouseenter="enter('-6294566488312473300');" onmouseout="out('-6294566488312473300');" style=""> 643                  // Item is in a folder, make sure this folder exists                                              </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 644                  if (!sBgFolders.containsKey(item.container)) {                                                    </span>
<span class="9065703941205621353" onmouseenter="enter('9065703941205621353');" onmouseout="out('9065703941205621353');" style=""> 645                      // An items container is being set to a that of an item which is not in                       </span>
<span class="-3172747387014066058" onmouseenter="enter('-3172747387014066058');" onmouseout="out('-3172747387014066058');" style=""> 646                      // the list of Folders.                                                                       </span>
<span class="151828163632620756" onmouseenter="enter('151828163632620756');" onmouseout="out('151828163632620756');" style=""> 647                      String msg = &quot;item: &quot; + item + &quot; container being set to: &quot; +                                  </span>
<span class="9080161357490611974" onmouseenter="enter('9080161357490611974');" onmouseout="out('9080161357490611974');" style=""> 648                              item.container + &quot;, not in the list of folders&quot;;                                      </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 649                      Log.e(TAG, msg);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 651              }                                                                                                     </span>
<span  style=""> 652                                                                                                                    </span>
<span class="8378072337545652807" onmouseenter="enter('8378072337545652807');" onmouseout="out('8378072337545652807');" style=""> 653              // Items are added/removed from the corresponding FolderInfo elsewhere, such                          </span>
<span class="7844728369218635164" onmouseenter="enter('7844728369218635164');" onmouseout="out('7844728369218635164');" style=""> 654              // as in Workspace.onDrop. Here, we just add/remove them from the list of items                       </span>
<span class="4553148780571708557" onmouseenter="enter('4553148780571708557');" onmouseout="out('4553148780571708557');" style=""> 655              // that are on the desktop, as appropriate                                                            </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 656              ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                       </span>
<span class="-8392915416586226921" onmouseenter="enter('-8392915416586226921');" onmouseout="out('-8392915416586226921');" style=""> 657              if (modelItem != null &amp;&amp;                                                                              </span>
<span class="3168075572498915363" onmouseenter="enter('3168075572498915363');" onmouseout="out('3168075572498915363');" style=""> 658                      (modelItem.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||                       </span>
<span class="-2354507674725904195" onmouseenter="enter('-2354507674725904195');" onmouseout="out('-2354507674725904195');" style=""> 659                       modelItem.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {                      </span>
<span class="-8474980351342559163" onmouseenter="enter('-8474980351342559163');" onmouseout="out('-8474980351342559163');" style=""> 660                  switch (modelItem.itemType) {                                                                     </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style=""> 661                      case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                        </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style=""> 662                      case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                           </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 663                      case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                             </span>
<span class="-2945309969071223861" onmouseenter="enter('-2945309969071223861');" onmouseout="out('-2945309969071223861');" style=""> 664                          if (!sBgWorkspaceItems.contains(modelItem)) {                                             </span>
<span class="-5660475538824179031" onmouseenter="enter('-5660475538824179031');" onmouseout="out('-5660475538824179031');" style=""> 665                              sBgWorkspaceItems.add(modelItem);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666                          }                                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 667                          break;                                                                                    </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 668                      default:                                                                                      </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 669                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 670                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 671              } else {                                                                                              </span>
<span class="-7939766627444392355" onmouseenter="enter('-7939766627444392355');" onmouseout="out('-7939766627444392355');" style=""> 672                  sBgWorkspaceItems.remove(modelItem);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 673              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 674          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 675      }                                                                                                             </span>
<span  style=""> 676                                                                                                                    </span>
<span class="-4020360329970845372" onmouseenter="enter('-4020360329970845372');" onmouseout="out('-4020360329970845372');" style=""> 677      public void flushWorkerThread() {                                                                             </span>
<span class="2458440832416538563" onmouseenter="enter('2458440832416538563');" onmouseout="out('2458440832416538563');" style=""> 678          mFlushingWorkerThread = true;                                                                             </span>
<span class="2941590529192344100" onmouseenter="enter('2941590529192344100');" onmouseout="out('2941590529192344100');" style=""> 679          Runnable waiter = new Runnable() {                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 680                  public void run() {                                                                               </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 681                      synchronized (this) {                                                                         </span>
<span class="-1428047894310886643" onmouseenter="enter('-1428047894310886643');" onmouseout="out('-1428047894310886643');" style=""> 682                          notifyAll();                                                                              </span>
<span class="3926508156885202999" onmouseenter="enter('3926508156885202999');" onmouseout="out('3926508156885202999');" style=""> 683                          mFlushingWorkerThread = false;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 684                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 685                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 686              };                                                                                                    </span>
<span  style=""> 687                                                                                                                    </span>
<span class="-7483564469787643608" onmouseenter="enter('-7483564469787643608');" onmouseout="out('-7483564469787643608');" style=""> 688          synchronized(waiter) {                                                                                    </span>
<span class="-8072658497280753067" onmouseenter="enter('-8072658497280753067');" onmouseout="out('-8072658497280753067');" style=""> 689              runOnWorkerThread(waiter);                                                                            </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style=""> 690              if (mLoaderTask != null) {                                                                            </span>
<span class="-756902833484627430" onmouseenter="enter('-756902833484627430');" onmouseout="out('-756902833484627430');" style=""> 691                  synchronized(mLoaderTask) {                                                                       </span>
<span class="58891182273081261" onmouseenter="enter('58891182273081261');" onmouseout="out('58891182273081261');" style=""> 692                      mLoaderTask.notify();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 693                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694              }                                                                                                     </span>
<span class="4859668596787406566" onmouseenter="enter('4859668596787406566');" onmouseout="out('4859668596787406566');" style=""> 695              boolean success = false;                                                                              </span>
<span class="7536073198725464588" onmouseenter="enter('7536073198725464588');" onmouseout="out('7536073198725464588');" style=""> 696              while (!success) {                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 697                  try {                                                                                             </span>
<span class="8661527805225995774" onmouseenter="enter('8661527805225995774');" onmouseout="out('8661527805225995774');" style=""> 698                      waiter.wait();                                                                                </span>
<span class="-5965625035307022309" onmouseenter="enter('-5965625035307022309');" onmouseout="out('-5965625035307022309');" style=""> 699                      success = true;                                                                               </span>
<span class="-7528533024404460182" onmouseenter="enter('-7528533024404460182');" onmouseout="out('-7528533024404460182');" style=""> 700                  } catch (InterruptedException e) {                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 701                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 702              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 703          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 704      }                                                                                                             </span>
<span  style=""> 705                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 706      /**                                                                                                           </span>
<span class="6993284491606696239" onmouseenter="enter('6993284491606696239');" onmouseout="out('6993284491606696239');" style=""> 707       * Move an item in the DB to a new &lt;container, screen, cellX, cellY&gt;                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 708       */                                                                                                           </span>
<span class="4065343735615789149" onmouseenter="enter('4065343735615789149');" onmouseout="out('4065343735615789149');" style=""> 709      static void moveItemInDatabase(Context context, final ItemInfo item, final long container,                    </span>
<span class="-6409391853534757752" onmouseenter="enter('-6409391853534757752');" onmouseout="out('-6409391853534757752');" style=""> 710              final long screenId, final int cellX, final int cellY) {                                              </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 711          item.container = container;                                                                               </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 712          item.cellX = cellX;                                                                                       </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 713          item.cellY = cellY;                                                                                       </span>
<span  style=""> 714                                                                                                                    </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 715          // We store hotseat items in canonical form which is this orientation invariant position                  </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 716          // in the hotseat                                                                                         </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 717          if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                                        </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 718                  container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                      </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 719              item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 720          } else {                                                                                                  </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 721              item.screenId = screenId;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 722          }                                                                                                         </span>
<span  style=""> 723                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 724          final ContentValues values = new ContentValues();                                                         </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 725          values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                         </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 726          values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                                 </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 727          values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                                 </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 728          values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                             </span>
<span  style=""> 729                                                                                                                    </span>
<span class="-198415815572970699" onmouseenter="enter('-198415815572970699');" onmouseout="out('-198415815572970699');" style=""> 730          updateItemInDatabaseHelper(context, values, item, &quot;moveItemInDatabase&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 731      }                                                                                                             </span>
<span  style=""> 732                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 733      /**                                                                                                           </span>
<span class="-2318253408843035081" onmouseenter="enter('-2318253408843035081');" onmouseout="out('-2318253408843035081');" style=""> 734       * Move items in the DB to a new &lt;container, screen, cellX, cellY&gt;. We assume that the                        </span>
<span class="9095568381627098065" onmouseenter="enter('9095568381627098065');" onmouseout="out('9095568381627098065');" style=""> 735       * cellX, cellY have already been updated on the ItemInfos.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 736       */                                                                                                           </span>
<span class="2993462226149949147" onmouseenter="enter('2993462226149949147');" onmouseout="out('2993462226149949147');" style=""> 737      static void moveItemsInDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items,                             </span>
<span class="4351605778470855925" onmouseenter="enter('4351605778470855925');" onmouseout="out('4351605778470855925');" style=""> 738              final long container, final int screen) {                                                             </span>
<span  style=""> 739                                                                                                                    </span>
<span class="3335073963685886452" onmouseenter="enter('3335073963685886452');" onmouseout="out('3335073963685886452');" style=""> 740          ArrayList&lt;ContentValues&gt; contentValues = new ArrayList&lt;ContentValues&gt;();                                  </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 741          int count = items.size();                                                                                 </span>
<span  style=""> 742                                                                                                                    </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 743          for (int i = 0; i &lt; count; i++) {                                                                         </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 744              ItemInfo item = items.get(i);                                                                         </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 745              item.container = container;                                                                           </span>
<span  style=""> 746                                                                                                                    </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 747              // We store hotseat items in canonical form which is this orientation invariant position              </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 748              // in the hotseat                                                                                     </span>
<span class="6331311558654873539" onmouseenter="enter('6331311558654873539');" onmouseout="out('6331311558654873539');" style=""> 749              if (context instanceof Launcher &amp;&amp; screen &lt; 0 &amp;&amp;                                                      </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 750                      container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                  </span>
<span class="-3476894176903330001" onmouseenter="enter('-3476894176903330001');" onmouseout="out('-3476894176903330001');" style=""> 751                  item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(item.cellX,                   </span>
<span class="8891673712343428946" onmouseenter="enter('8891673712343428946');" onmouseout="out('8891673712343428946');" style=""> 752                          item.cellY);                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 753              } else {                                                                                              </span>
<span class="-4307617232085975705" onmouseenter="enter('-4307617232085975705');" onmouseout="out('-4307617232085975705');" style=""> 754                  item.screenId = screen;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 755              }                                                                                                     </span>
<span  style=""> 756                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 757              final ContentValues values = new ContentValues();                                                     </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 758              values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                     </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 759              values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                             </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 760              values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                             </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 761              values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                         </span>
<span  style=""> 762                                                                                                                    </span>
<span class="2833686190506555422" onmouseenter="enter('2833686190506555422');" onmouseout="out('2833686190506555422');" style=""> 763              contentValues.add(values);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 764          }                                                                                                         </span>
<span class="-3017110074752693492" onmouseenter="enter('-3017110074752693492');" onmouseout="out('-3017110074752693492');" style=""> 765          updateItemsInDatabaseHelper(context, contentValues, items, &quot;moveItemInDatabase&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 766      }                                                                                                             </span>
<span  style=""> 767                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 768      /**                                                                                                           </span>
<span class="5893714151144352360" onmouseenter="enter('5893714151144352360');" onmouseout="out('5893714151144352360');" style=""> 769       * Move and/or resize item in the DB to a new &lt;container, screen, cellX, cellY, spanX, spanY&gt;                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 770       */                                                                                                           </span>
<span class="2794810618835410616" onmouseenter="enter('2794810618835410616');" onmouseout="out('2794810618835410616');" style=""> 771      static void modifyItemInDatabase(Context context, final ItemInfo item, final long container,                  </span>
<span class="5104971199972279845" onmouseenter="enter('5104971199972279845');" onmouseout="out('5104971199972279845');" style=""> 772              final long screenId, final int cellX, final int cellY, final int spanX, final int spanY) {            </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 773          item.container = container;                                                                               </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 774          item.cellX = cellX;                                                                                       </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 775          item.cellY = cellY;                                                                                       </span>
<span class="-7444681703441257019" onmouseenter="enter('-7444681703441257019');" onmouseout="out('-7444681703441257019');" style=""> 776          item.spanX = spanX;                                                                                       </span>
<span class="1797194204222415457" onmouseenter="enter('1797194204222415457');" onmouseout="out('1797194204222415457');" style=""> 777          item.spanY = spanY;                                                                                       </span>
<span  style=""> 778                                                                                                                    </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 779          // We store hotseat items in canonical form which is this orientation invariant position                  </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 780          // in the hotseat                                                                                         </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 781          if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                                        </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 782                  container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                      </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 783              item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 784          } else {                                                                                                  </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 785              item.screenId = screenId;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 786          }                                                                                                         </span>
<span  style=""> 787                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 788          final ContentValues values = new ContentValues();                                                         </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 789          values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                         </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 790          values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                                 </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 791          values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                                 </span>
<span class="-1263713769577317048" onmouseenter="enter('-1263713769577317048');" onmouseout="out('-1263713769577317048');" style=""> 792          values.put(LauncherSettings.Favorites.SPANX, item.spanX);                                                 </span>
<span class="847673422027095164" onmouseenter="enter('847673422027095164');" onmouseout="out('847673422027095164');" style=""> 793          values.put(LauncherSettings.Favorites.SPANY, item.spanY);                                                 </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 794          values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                             </span>
<span  style=""> 795                                                                                                                    </span>
<span class="5688211233374147409" onmouseenter="enter('5688211233374147409');" onmouseout="out('5688211233374147409');" style=""> 796          updateItemInDatabaseHelper(context, values, item, &quot;modifyItemInDatabase&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 797      }                                                                                                             </span>
<span  style=""> 798                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 799      /**                                                                                                           </span>
<span class="3263486289839218660" onmouseenter="enter('3263486289839218660');" onmouseout="out('3263486289839218660');" style=""> 800       * Update an item to the database in a specified container.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 801       */                                                                                                           </span>
<span class="459681340980680258" onmouseenter="enter('459681340980680258');" onmouseout="out('459681340980680258');" style=""> 802      static void updateItemInDatabase(Context context, final ItemInfo item) {                                      </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 803          final ContentValues values = new ContentValues();                                                         </span>
<span class="5176730964422589638" onmouseenter="enter('5176730964422589638');" onmouseout="out('5176730964422589638');" style=""> 804          item.onAddToDatabase(values);                                                                             </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 805          item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                         </span>
<span class="-2640379359931023102" onmouseenter="enter('-2640379359931023102');" onmouseout="out('-2640379359931023102');" style=""> 806          updateItemInDatabaseHelper(context, values, item, &quot;updateItemInDatabase&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807      }                                                                                                             </span>
<span  style=""> 808                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 809      /**                                                                                                           </span>
<span class="-4717227181780328790" onmouseenter="enter('-4717227181780328790');" onmouseout="out('-4717227181780328790');" style=""> 810       * Returns true if the shortcuts already exists in the database.                                              </span>
<span class="-3331700288971341517" onmouseenter="enter('-3331700288971341517');" onmouseout="out('-3331700288971341517');" style=""> 811       * we identify a shortcut by its title and intent.                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 812       */                                                                                                           </span>
<span class="-6388905982866518653" onmouseenter="enter('-6388905982866518653');" onmouseout="out('-6388905982866518653');" style=""> 813      static boolean shortcutExists(Context context, String title, Intent intent) {                                 </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 814          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="2591581294492270218" onmouseenter="enter('2591581294492270218');" onmouseout="out('2591581294492270218');" style=""> 815          Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI,                                               </span>
<span class="-3970764614423238561" onmouseenter="enter('-3970764614423238561');" onmouseout="out('-3970764614423238561');" style=""> 816              new String[] { &quot;title&quot;, &quot;intent&quot; }, &quot;title=? and intent=?&quot;,                                           </span>
<span class="-8386684562645849198" onmouseenter="enter('-8386684562645849198');" onmouseout="out('-8386684562645849198');" style=""> 817              new String[] { title, intent.toUri(0) }, null);                                                       </span>
<span class="8422097272984539190" onmouseenter="enter('8422097272984539190');" onmouseout="out('8422097272984539190');" style=""> 818          boolean result = false;                                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 819          try {                                                                                                     </span>
<span class="-4458839479528090820" onmouseenter="enter('-4458839479528090820');" onmouseout="out('-4458839479528090820');" style=""> 820              result = c.moveToFirst();                                                                             </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 821          } finally {                                                                                               </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 822              c.close();                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 823          }                                                                                                         </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 824          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825      }                                                                                                             </span>
<span  style=""> 826                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 827      /**                                                                                                           </span>
<span class="-4717227181780328790" onmouseenter="enter('-4717227181780328790');" onmouseout="out('-4717227181780328790');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 828 -     * Returns true if the shortcuts already exists in the database.                                              </span>
<span class="-5390310747970326975" onmouseenter="enter('-5390310747970326975');" onmouseout="out('-5390310747970326975');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 829 -     * we identify a shortcut by the component name of the intent.                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 830 -     */                                                                                                           </span>
<span class="3626515463358769016" onmouseenter="enter('3626515463358769016');" onmouseout="out('3626515463358769016');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 831 -    static boolean appWasRestored(Context context, Intent intent) {                                               </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 832 -        final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="-3491314044087926833" onmouseenter="enter('-3491314044087926833');" onmouseout="out('-3491314044087926833');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 833 -        final ComponentName component = intent.getComponent();                                                    </span>
<span class="-8432366264448055826" onmouseenter="enter('-8432366264448055826');" onmouseout="out('-8432366264448055826');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 834 -        if (component == null) {                                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 835 -            return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 836 -        }                                                                                                         </span>
<span class="-6109213241383384192" onmouseenter="enter('-6109213241383384192');" onmouseout="out('-6109213241383384192');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 837 -        String componentName = component.flattenToString();                                                       </span>
<span class="2986401886513054143" onmouseenter="enter('2986401886513054143');" onmouseout="out('2986401886513054143');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 838 -        final String where = &quot;intent glob \&quot;*component=&quot; + componentName + &quot;*\&quot; and restored = 1&quot;;                </span>
<span class="2591581294492270218" onmouseenter="enter('2591581294492270218');" onmouseout="out('2591581294492270218');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 839 -        Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI,                                               </span>
<span class="226242580801544183" onmouseenter="enter('226242580801544183');" onmouseout="out('226242580801544183');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 840 -                new String[]{&quot;intent&quot;, &quot;restored&quot;}, where, null, null);                                           </span>
<span class="8422097272984539190" onmouseenter="enter('8422097272984539190');" onmouseout="out('8422097272984539190');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 841 -        boolean result = false;                                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 842 -        try {                                                                                                     </span>
<span class="-4458839479528090820" onmouseenter="enter('-4458839479528090820');" onmouseout="out('-4458839479528090820');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 843 -            result = c.moveToFirst();                                                                             </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 844 -        } finally {                                                                                               </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 845 -            c.close();                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 846 -        }                                                                                                         </span>
<span class="4307187737647963600" onmouseenter="enter('4307187737647963600');" onmouseout="out('4307187737647963600');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 847 -        Log.d(TAG, &quot;shortcutWasRestored is &quot; + result + &quot; for &quot; + componentName);                                 </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 848 -        return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 849 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 850 -                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 851 -    /**                                                                                                           </span>
<span class="9160518604603288134" onmouseenter="enter('9160518604603288134');" onmouseout="out('9160518604603288134');" style=""> 852       * Returns an ItemInfo array containing all the items in the LauncherModel.                                   </span>
<span class="-7541433293033039987" onmouseenter="enter('-7541433293033039987');" onmouseout="out('-7541433293033039987');" style=""> 853       * The ItemInfo.id is not set through this function.                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 854       */                                                                                                           </span>
<span class="2306578838706816090" onmouseenter="enter('2306578838706816090');" onmouseout="out('2306578838706816090');" style=""> 855      static ArrayList&lt;ItemInfo&gt; getItemsInLocalCoordinates(Context context) {                                      </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style=""> 856          ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                                    </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 857          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="7862348045873845742" onmouseenter="enter('7862348045873845742');" onmouseout="out('7862348045873845742');" style=""> 858          Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[] {                                </span>
<span class="-9030044796723696333" onmouseenter="enter('-9030044796723696333');" onmouseout="out('-9030044796723696333');" style=""> 859                  LauncherSettings.Favorites.ITEM_TYPE, LauncherSettings.Favorites.CONTAINER,                       </span>
<span class="-6654705994324280685" onmouseenter="enter('-6654705994324280685');" onmouseout="out('-6654705994324280685');" style=""><abbr title=" 860                  LauncherSettings.Favorites.SCREEN, LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CELLY,"> 860                  LauncherSettings.Favorites.SCREEN, LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CE</abbr></span>
<span class="-8466015049460674478" onmouseenter="enter('-8466015049460674478');" onmouseout="out('-8466015049460674478');" style=""> 861                  LauncherSettings.Favorites.SPANX, LauncherSettings.Favorites.SPANY }, null, null, null);          </span>
<span  style=""> 862                                                                                                                    </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 863          final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);                  </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 864          final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);                 </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 865          final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);                       </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 866          final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                         </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 867          final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                         </span>
<span class="-802963670489258937" onmouseenter="enter('-802963670489258937');" onmouseout="out('-802963670489258937');" style=""> 868          final int spanXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANX);                         </span>
<span class="6925125615824777875" onmouseenter="enter('6925125615824777875');" onmouseout="out('6925125615824777875');" style=""> 869          final int spanYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANY);                         </span>
<span  style=""> 870                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 871          try {                                                                                                     </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 872              while (c.moveToNext()) {                                                                              </span>
<span class="-4116264954015845780" onmouseenter="enter('-4116264954015845780');" onmouseout="out('-4116264954015845780');" style=""> 873                  ItemInfo item = new ItemInfo();                                                                   </span>
<span class="3361172632220058931" onmouseenter="enter('3361172632220058931');" onmouseout="out('3361172632220058931');" style=""> 874                  item.cellX = c.getInt(cellXIndex);                                                                </span>
<span class="-3320299110004327663" onmouseenter="enter('-3320299110004327663');" onmouseout="out('-3320299110004327663');" style=""> 875                  item.cellY = c.getInt(cellYIndex);                                                                </span>
<span class="-3998513073647472943" onmouseenter="enter('-3998513073647472943');" onmouseout="out('-3998513073647472943');" style=""> 876                  item.spanX = Math.max(1, c.getInt(spanXIndex));                                                   </span>
<span class="584206030510259358" onmouseenter="enter('584206030510259358');" onmouseout="out('584206030510259358');" style=""> 877                  item.spanY = Math.max(1, c.getInt(spanYIndex));                                                   </span>
<span class="7755197868117966754" onmouseenter="enter('7755197868117966754');" onmouseout="out('7755197868117966754');" style=""> 878                  item.container = c.getInt(containerIndex);                                                        </span>
<span class="2520990540941204818" onmouseenter="enter('2520990540941204818');" onmouseout="out('2520990540941204818');" style=""> 879                  item.itemType = c.getInt(itemTypeIndex);                                                          </span>
<span class="-2693827439071435274" onmouseenter="enter('-2693827439071435274');" onmouseout="out('-2693827439071435274');" style=""> 880                  item.screenId = c.getInt(screenIndex);                                                            </span>
<span  style=""> 881                                                                                                                    </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style=""> 882                  items.add(item);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 883              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 884          } catch (Exception e) {                                                                                   </span>
<span class="4333495016815960454" onmouseenter="enter('4333495016815960454');" onmouseout="out('4333495016815960454');" style=""> 885              items.clear();                                                                                        </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 886          } finally {                                                                                               </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 887              c.close();                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 888          }                                                                                                         </span>
<span  style=""> 889                                                                                                                    </span>
<span class="4279419839789234429" onmouseenter="enter('4279419839789234429');" onmouseout="out('4279419839789234429');" style=""> 890          return items;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891      }                                                                                                             </span>
<span  style=""> 892                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 893      /**                                                                                                           </span>
<span class="-8400747742808132543" onmouseenter="enter('-8400747742808132543');" onmouseout="out('-8400747742808132543');" style=""> 894       * Find a folder in the db, creating the FolderInfo if necessary, and adding it to folderList.                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 895       */                                                                                                           </span>
<span class="5907754851540050864" onmouseenter="enter('5907754851540050864');" onmouseout="out('5907754851540050864');" style=""> 896      FolderInfo getFolderById(Context context, HashMap&lt;Long,FolderInfo&gt; folderList, long id) {                     </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 897          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="-4509017961772931337" onmouseenter="enter('-4509017961772931337');" onmouseout="out('-4509017961772931337');" style=""> 898          Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, null,                                         </span>
<span class="-4259949945589236527" onmouseenter="enter('-4259949945589236527');" onmouseout="out('-4259949945589236527');" style=""> 899                  &quot;_id=? and (itemType=? or itemType=?)&quot;,                                                           </span>
<span class="6839251627547830421" onmouseenter="enter('6839251627547830421');" onmouseout="out('6839251627547830421');" style=""> 900                  new String[] { String.valueOf(id),                                                                </span>
<span class="-7910525153585982304" onmouseenter="enter('-7910525153585982304');" onmouseout="out('-7910525153585982304');" style=""> 901                          String.valueOf(LauncherSettings.Favorites.ITEM_TYPE_FOLDER)}, null);                      </span>
<span  style=""> 902                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 903          try {                                                                                                     </span>
<span class="-6302304746326789409" onmouseenter="enter('-6302304746326789409');" onmouseout="out('-6302304746326789409');" style=""> 904              if (c.moveToFirst()) {                                                                                </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 905                  final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);          </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style=""> 906                  final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);                 </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 907                  final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);         </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 908                  final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);               </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 909                  final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                 </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 910                  final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                 </span>
<span  style=""> 911                                                                                                                    </span>
<span class="7004752326616919357" onmouseenter="enter('7004752326616919357');" onmouseout="out('7004752326616919357');" style=""> 912                  FolderInfo folderInfo = null;                                                                     </span>
<span class="2938602155061951308" onmouseenter="enter('2938602155061951308');" onmouseout="out('2938602155061951308');" style=""> 913                  switch (c.getInt(itemTypeIndex)) {                                                                </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 914                      case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                             </span>
<span class="8497686210844969517" onmouseenter="enter('8497686210844969517');" onmouseout="out('8497686210844969517');" style=""> 915                          folderInfo = findOrMakeFolder(folderList, id);                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 916                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 917                  }                                                                                                 </span>
<span  style=""> 918                                                                                                                    </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style=""> 919                  folderInfo.title = c.getString(titleIndex);                                                       </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style=""> 920                  folderInfo.id = id;                                                                               </span>
<span class="-3770649288661071555" onmouseenter="enter('-3770649288661071555');" onmouseout="out('-3770649288661071555');" style=""> 921                  folderInfo.container = c.getInt(containerIndex);                                                  </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style=""> 922                  folderInfo.screenId = c.getInt(screenIndex);                                                      </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style=""> 923                  folderInfo.cellX = c.getInt(cellXIndex);                                                          </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style=""> 924                  folderInfo.cellY = c.getInt(cellYIndex);                                                          </span>
<span  style=""> 925                                                                                                                    </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style=""> 926                  return folderInfo;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 927              }                                                                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 928          } finally {                                                                                               </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 929              c.close();                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 930          }                                                                                                         </span>
<span  style=""> 931                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 932          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 933      }                                                                                                             </span>
<span  style=""> 934                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 935      /**                                                                                                           </span>
<span class="-4485876183654335246" onmouseenter="enter('-4485876183654335246');" onmouseout="out('-4485876183654335246');" style=""> 936       * Add an item to the database in a specified container. Sets the container, screen, cellX and                </span>
<span class="5014383815638293688" onmouseenter="enter('5014383815638293688');" onmouseout="out('5014383815638293688');" style=""> 937       * cellY fields of the item. Also assigns an ID to the item.                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 938       */                                                                                                           </span>
<span class="7688823130205554121" onmouseenter="enter('7688823130205554121');" onmouseout="out('7688823130205554121');" style=""> 939      static void addItemToDatabase(Context context, final ItemInfo item, final long container,                     </span>
<span class="-5047869274291255898" onmouseenter="enter('-5047869274291255898');" onmouseout="out('-5047869274291255898');" style=""> 940              final long screenId, final int cellX, final int cellY, final boolean notify) {                        </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 941          item.container = container;                                                                               </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 942          item.cellX = cellX;                                                                                       </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 943          item.cellY = cellY;                                                                                       </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 944          // We store hotseat items in canonical form which is this orientation invariant position                  </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 945          // in the hotseat                                                                                         </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 946          if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                                        </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 947                  container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                      </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 948              item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 949          } else {                                                                                                  </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 950              item.screenId = screenId;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 951          }                                                                                                         </span>
<span  style=""> 952                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 953          final ContentValues values = new ContentValues();                                                         </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 954          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="5176730964422589638" onmouseenter="enter('5176730964422589638');" onmouseout="out('5176730964422589638');" style=""> 955          item.onAddToDatabase(values);                                                                             </span>
<span  style=""> 956                                                                                                                    </span>
<span class="-1899316649519192705" onmouseenter="enter('-1899316649519192705');" onmouseout="out('-1899316649519192705');" style=""> 957          item.id = LauncherAppState.getLauncherProvider().generateNewItemId();                                     </span>
<span class="-154850703316330893" onmouseenter="enter('-154850703316330893');" onmouseout="out('-154850703316330893');" style=""> 958          values.put(LauncherSettings.Favorites._ID, item.id);                                                      </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 959          item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                         </span>
<span  style=""> 960                                                                                                                    </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 961          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 962              public void run() {                                                                                   </span>
<span class="-9004016634042314269" onmouseenter="enter('-9004016634042314269');" onmouseout="out('-9004016634042314269');" style=""> 963                  cr.insert(notify ? LauncherSettings.Favorites.CONTENT_URI :                                       </span>
<span class="-612779074530505821" onmouseenter="enter('-612779074530505821');" onmouseout="out('-612779074530505821');" style=""> 964                          LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, values);                          </span>
<span  style=""> 965                                                                                                                    </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 966                  // Lock on mBgLock *after* the db operation                                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 967                  synchronized (sBgLock) {                                                                          </span>
<span class="7042391537046657417" onmouseenter="enter('7042391537046657417');" onmouseout="out('7042391537046657417');" style=""> 968                      checkItemInfoLocked(item.id, item, null);                                                     </span>
<span class="-1016681302040734126" onmouseenter="enter('-1016681302040734126');" onmouseout="out('-1016681302040734126');" style=""> 969                      sBgItemsIdMap.put(item.id, item);                                                             </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style=""> 970                      switch (item.itemType) {                                                                      </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 971                          case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                         </span>
<span class="7914552456706159325" onmouseenter="enter('7914552456706159325');" onmouseout="out('7914552456706159325');" style=""> 972                              sBgFolders.put(item.id, (FolderInfo) item);                                           </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style=""> 973                              // Fall through                                                                       </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style=""> 974                          case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                    </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style=""> 975                          case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                       </span>
<span class="-1329080713393586591" onmouseenter="enter('-1329080713393586591');" onmouseout="out('-1329080713393586591');" style=""> 976                              if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||                 </span>
<span class="-8703099407725800834" onmouseenter="enter('-8703099407725800834');" onmouseout="out('-8703099407725800834');" style=""> 977                                      item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {             </span>
<span class="-8146326631995897363" onmouseenter="enter('-8146326631995897363');" onmouseout="out('-8146326631995897363');" style=""> 978                                  sBgWorkspaceItems.add(item);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 979                              } else {                                                                              </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 980                                  if (!sBgFolders.containsKey(item.container)) {                                    </span>
<span class="-54073947043614801" onmouseenter="enter('-54073947043614801');" onmouseout="out('-54073947043614801');" style=""> 981                                      // Adding an item to a folder that doesn&#x27;t exist.                             </span>
<span class="-8178862485732913035" onmouseenter="enter('-8178862485732913035');" onmouseout="out('-8178862485732913035');" style=""> 982                                      String msg = &quot;adding item: &quot; + item + &quot; to a folder that &quot; +                  </span>
<span class="8069959129571777545" onmouseenter="enter('8069959129571777545');" onmouseout="out('8069959129571777545');" style=""> 983                                              &quot; doesn&#x27;t exist&quot;;                                                     </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 984                                      Log.e(TAG, msg);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 985                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 986                              }                                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 987                              break;                                                                                </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style=""> 988                          case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                                      </span>
<span class="-7161913213134623334" onmouseenter="enter('-7161913213134623334');" onmouseout="out('-7161913213134623334');" style=""> 989                              sBgAppWidgets.add((LauncherAppWidgetInfo) item);                                      </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 990                              break;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 991                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 992                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 993              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 994          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 995          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 996      }                                                                                                             </span>
<span  style=""> 997                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 998      /**                                                                                                           </span>
<span class="7476806510728309142" onmouseenter="enter('7476806510728309142');" onmouseout="out('7476806510728309142');" style=""> 999       * Creates a new unique child id, for a given cell span across all layouts.                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1000       */                                                                                                           </span>
<span class="6041396781761029986" onmouseenter="enter('6041396781761029986');" onmouseout="out('6041396781761029986');" style="">1001      static int getCellLayoutChildId(                                                                              </span>
<span class="-7149445532835734900" onmouseenter="enter('-7149445532835734900');" onmouseout="out('-7149445532835734900');" style="">1002              long container, long screen, int localCellX, int localCellY, int spanX, int spanY) {                  </span>
<span class="513362613558309253" onmouseenter="enter('513362613558309253');" onmouseout="out('513362613558309253');" style="">1003          return (((int) container &amp; 0xFF) &lt;&lt; 24)                                                                   </span>
<span class="-7388843269158644047" onmouseenter="enter('-7388843269158644047');" onmouseout="out('-7388843269158644047');" style="">1004                  | ((int) screen &amp; 0xFF) &lt;&lt; 16 | (localCellX &amp; 0xFF) &lt;&lt; 8 | (localCellY &amp; 0xFF);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1005      }                                                                                                             </span>
<span  style="">1006                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1007      /**                                                                                                           </span>
<span class="-1037279788887787658" onmouseenter="enter('-1037279788887787658');" onmouseout="out('-1037279788887787658');" style="">1008       * Removes the specified item from the database                                                               </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1009       * @param context                                                                                             </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1010       * @param item                                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1011       */                                                                                                           </span>
<span class="6689175154077652032" onmouseenter="enter('6689175154077652032');" onmouseout="out('6689175154077652032');" style="">1012      static void deleteItemFromDatabase(Context context, final ItemInfo item) {                                    </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1013          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="-8662622705024005942" onmouseenter="enter('-8662622705024005942');" onmouseout="out('-8662622705024005942');" style="">1014          final Uri uriToDelete = LauncherSettings.Favorites.getContentUri(item.id, false);                         </span>
<span  style="">1015                                                                                                                    </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1016          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1017              public void run() {                                                                                   </span>
<span class="5853003155754312383" onmouseenter="enter('5853003155754312383');" onmouseout="out('5853003155754312383');" style="">1018                  cr.delete(uriToDelete, null, null);                                                               </span>
<span  style="">1019                                                                                                                    </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1020                  // Lock on mBgLock *after* the db operation                                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1021                  synchronized (sBgLock) {                                                                          </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="">1022                      switch (item.itemType) {                                                                      </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1023                          case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                         </span>
<span class="-7362435803416400268" onmouseenter="enter('-7362435803416400268');" onmouseout="out('-7362435803416400268');" style="">1024                              sBgFolders.remove(item.id);                                                           </span>
<span class="-7253547809349647013" onmouseenter="enter('-7253547809349647013');" onmouseout="out('-7253547809349647013');" style="">1025                              for (ItemInfo info: sBgItemsIdMap.values()) {                                         </span>
<span class="1662466266129331257" onmouseenter="enter('1662466266129331257');" onmouseout="out('1662466266129331257');" style="">1026                                  if (info.container == item.id) {                                                  </span>
<span class="-1893702506185878584" onmouseenter="enter('-1893702506185878584');" onmouseout="out('-1893702506185878584');" style="">1027                                      // We are deleting a folder which still contains items that                   </span>
<span class="-7314190253548819229" onmouseenter="enter('-7314190253548819229');" onmouseout="out('-7314190253548819229');" style="">1028                                      // think they are contained by that folder.                                   </span>
<span class="-2989844263372177086" onmouseenter="enter('-2989844263372177086');" onmouseout="out('-2989844263372177086');" style="">1029                                      String msg = &quot;deleting a folder (&quot; + item + &quot;) which still &quot; +                </span>
<span class="-6063695738801794388" onmouseenter="enter('-6063695738801794388');" onmouseout="out('-6063695738801794388');" style="">1030                                              &quot;contains items (&quot; + info + &quot;)&quot;;                                      </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="">1031                                      Log.e(TAG, msg);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1032                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1033                              }                                                                                     </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1034                              sBgWorkspaceItems.remove(item);                                                       </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1035                              break;                                                                                </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1036                          case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                    </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1037                          case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                       </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1038                              sBgWorkspaceItems.remove(item);                                                       </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1039                              break;                                                                                </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">1040                          case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                                      </span>
<span class="5035692159539723007" onmouseenter="enter('5035692159539723007');" onmouseout="out('5035692159539723007');" style="">1041                              sBgAppWidgets.remove((LauncherAppWidgetInfo) item);                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1042                              break;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1043                      }                                                                                             </span>
<span class="414734963826797427" onmouseenter="enter('414734963826797427');" onmouseout="out('414734963826797427');" style="">1044                      sBgItemsIdMap.remove(item.id);                                                                </span>
<span class="4282085416776692307" onmouseenter="enter('4282085416776692307');" onmouseout="out('4282085416776692307');" style="">1045                      sBgDbIconCache.remove(item);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1046                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1047              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1048          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1049          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1050      }                                                                                                             </span>
<span  style="">1051                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1052      /**                                                                                                           </span>
<span class="-7001721478473539684" onmouseenter="enter('-7001721478473539684');" onmouseout="out('-7001721478473539684');" style="">1053       * Update the order of the workspace screens in the database. The array list contains                         </span>
<span class="-8575814248656839337" onmouseenter="enter('-8575814248656839337');" onmouseout="out('-8575814248656839337');" style="">1054       * a list of screen ids in the order that they should appear.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1055       */                                                                                                           </span>
<span class="8428215756529453230" onmouseenter="enter('8428215756529453230');" onmouseout="out('8428215756529453230');" style="">1056      void updateWorkspaceScreenOrder(Context context, final ArrayList&lt;Long&gt; screens) {                             </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1057          // Log to disk                                                                                            </span>
<span class="2597844157040813179" onmouseenter="enter('2597844157040813179');" onmouseout="out('2597844157040813179');" style="">1058          Launcher.addDumpLog(TAG, &quot;11683562 - updateWorkspaceScreenOrder()&quot;, true);                                </span>
<span class="-6712172470308057727" onmouseenter="enter('-6712172470308057727');" onmouseout="out('-6712172470308057727');" style="">1059          Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; + TextUtils.join(&quot;, &quot;, screens), true);                 </span>
<span  style="">1060                                                                                                                    </span>
<span class="468782492563171594" onmouseenter="enter('468782492563171594');" onmouseout="out('468782492563171594');" style="">1061          final ArrayList&lt;Long&gt; screensCopy = new ArrayList&lt;Long&gt;(screens);                                         </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1062          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="543518355232884435" onmouseenter="enter('543518355232884435');" onmouseout="out('543518355232884435');" style="">1063          final Uri uri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                                            </span>
<span  style="">1064                                                                                                                    </span>
<span class="4254834681163937802" onmouseenter="enter('4254834681163937802');" onmouseout="out('4254834681163937802');" style="">1065          // Remove any negative screen ids -- these aren&#x27;t persisted                                               </span>
<span class="2152325044441302341" onmouseenter="enter('2152325044441302341');" onmouseout="out('2152325044441302341');" style="">1066          Iterator&lt;Long&gt; iter = screensCopy.iterator();                                                             </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">1067          while (iter.hasNext()) {                                                                                  </span>
<span class="-927390677227055343" onmouseenter="enter('-927390677227055343');" onmouseout="out('-927390677227055343');" style="">1068              long id = iter.next();                                                                                </span>
<span class="-1178150068928662840" onmouseenter="enter('-1178150068928662840');" onmouseout="out('-1178150068928662840');" style="">1069              if (id &lt; 0) {                                                                                         </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">1070                  iter.remove();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1071              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1072          }                                                                                                         </span>
<span  style="">1073                                                                                                                    </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1074          Runnable r = new Runnable() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1075              @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1076              public void run() {                                                                                   </span>
<span class="-3030717489353459898" onmouseenter="enter('-3030717489353459898');" onmouseout="out('-3030717489353459898');" style="">1077                  ArrayList&lt;ContentProviderOperation&gt; ops = new ArrayList&lt;ContentProviderOperation&gt;();              </span>
<span class="-6225505341206658348" onmouseenter="enter('-6225505341206658348');" onmouseout="out('-6225505341206658348');" style="">1078                  // Clear the table                                                                                </span>
<span class="-429946239562688464" onmouseenter="enter('-429946239562688464');" onmouseout="out('-429946239562688464');" style="">1079                  ops.add(ContentProviderOperation.newDelete(uri).build());                                         </span>
<span class="-2619892188160552062" onmouseenter="enter('-2619892188160552062');" onmouseout="out('-2619892188160552062');" style="">1080                  int count = screensCopy.size();                                                                   </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style="">1081                  for (int i = 0; i &lt; count; i++) {                                                                 </span>
<span class="4061202061343128850" onmouseenter="enter('4061202061343128850');" onmouseout="out('4061202061343128850');" style="">1082                      ContentValues v = new ContentValues();                                                        </span>
<span class="-1711185173807510695" onmouseenter="enter('-1711185173807510695');" onmouseout="out('-1711185173807510695');" style="">1083                      long screenId = screensCopy.get(i);                                                           </span>
<span class="-5112420615000020353" onmouseenter="enter('-5112420615000020353');" onmouseout="out('-5112420615000020353');" style="">1084                      v.put(LauncherSettings.WorkspaceScreens._ID, screenId);                                       </span>
<span class="4685968830084375092" onmouseenter="enter('4685968830084375092');" onmouseout="out('4685968830084375092');" style="">1085                      v.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, i);                                      </span>
<span class="2820655584610684032" onmouseenter="enter('2820655584610684032');" onmouseout="out('2820655584610684032');" style="">1086                      ops.add(ContentProviderOperation.newInsert(uri).withValues(v).build());                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087                  }                                                                                                 </span>
<span  style="">1088                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1089                  try {                                                                                             </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style="">1090                      cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                               </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style="">1091                  } catch (Exception ex) {                                                                          </span>
<span class="-9047539165825913138" onmouseenter="enter('-9047539165825913138');" onmouseout="out('-9047539165825913138');" style="">1092                      throw new RuntimeException(ex);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1093                  }                                                                                                 </span>
<span  style="">1094                                                                                                                    </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1095                  synchronized (sBgLock) {                                                                          </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1096                      sBgWorkspaceScreens.clear();                                                                  </span>
<span class="-2640283764679238318" onmouseenter="enter('-2640283764679238318');" onmouseout="out('-2640283764679238318');" style="">1097                      sBgWorkspaceScreens.addAll(screensCopy);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1098                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1099              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1100          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1101          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1102      }                                                                                                             </span>
<span  style="">1103                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1104      /**                                                                                                           </span>
<span class="-6789515923938750727" onmouseenter="enter('-6789515923938750727');" onmouseout="out('-6789515923938750727');" style="">1105       * Remove the contents of the specified folder from the database                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1106       */                                                                                                           </span>
<span class="686021856205334545" onmouseenter="enter('686021856205334545');" onmouseout="out('686021856205334545');" style="">1107      static void deleteFolderContentsFromDatabase(Context context, final FolderInfo info) {                        </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1108          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span  style="">1109                                                                                                                    </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1110          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1111              public void run() {                                                                                   </span>
<span class="-8793927488200240422" onmouseenter="enter('-8793927488200240422');" onmouseout="out('-8793927488200240422');" style="">1112                  cr.delete(LauncherSettings.Favorites.getContentUri(info.id, false), null, null);                  </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1113                  // Lock on mBgLock *after* the db operation                                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1114                  synchronized (sBgLock) {                                                                          </span>
<span class="-4714602177116521128" onmouseenter="enter('-4714602177116521128');" onmouseout="out('-4714602177116521128');" style="">1115                      sBgItemsIdMap.remove(info.id);                                                                </span>
<span class="-3189879738488687685" onmouseenter="enter('-3189879738488687685');" onmouseout="out('-3189879738488687685');" style="">1116                      sBgFolders.remove(info.id);                                                                   </span>
<span class="5895316081502731153" onmouseenter="enter('5895316081502731153');" onmouseout="out('5895316081502731153');" style="">1117                      sBgDbIconCache.remove(info);                                                                  </span>
<span class="-6074846806723656328" onmouseenter="enter('-6074846806723656328');" onmouseout="out('-6074846806723656328');" style="">1118                      sBgWorkspaceItems.remove(info);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1119                  }                                                                                                 </span>
<span  style="">1120                                                                                                                    </span>
<span class="-1937171462652594970" onmouseenter="enter('-1937171462652594970');" onmouseout="out('-1937171462652594970');" style="">1121                  cr.delete(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION,                                 </span>
<span class="9128354258649337519" onmouseenter="enter('9128354258649337519');" onmouseout="out('9128354258649337519');" style="">1122                          LauncherSettings.Favorites.CONTAINER + &quot;=&quot; + info.id, null);                              </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1123                  // Lock on mBgLock *after* the db operation                                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1124                  synchronized (sBgLock) {                                                                          </span>
<span class="7541292827914562010" onmouseenter="enter('7541292827914562010');" onmouseout="out('7541292827914562010');" style="">1125                      for (ItemInfo childInfo : info.contents) {                                                    </span>
<span class="-2237983399964272530" onmouseenter="enter('-2237983399964272530');" onmouseout="out('-2237983399964272530');" style="">1126                          sBgItemsIdMap.remove(childInfo.id);                                                       </span>
<span class="7662249246062224172" onmouseenter="enter('7662249246062224172');" onmouseout="out('7662249246062224172');" style="">1127                          sBgDbIconCache.remove(childInfo);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1128                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1129                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1130              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1131          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1132          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1133      }                                                                                                             </span>
<span  style="">1134                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1135      /**                                                                                                           </span>
<span class="8050600461131576642" onmouseenter="enter('8050600461131576642');" onmouseout="out('8050600461131576642');" style="">1136       * Set this as the current Launcher activity object for the loader.                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1137       */                                                                                                           </span>
<span class="8980870975348708436" onmouseenter="enter('8980870975348708436');" onmouseout="out('8980870975348708436');" style="">1138      public void initialize(Callbacks callbacks) {                                                                 </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1139          synchronized (mLock) {                                                                                    </span>
<span class="-641895236165954122" onmouseenter="enter('-641895236165954122');" onmouseout="out('-641895236165954122');" style="">1140              mCallbacks = new WeakReference&lt;Callbacks&gt;(callbacks);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1141          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1142      }                                                                                                             </span>
<span  style="">1143                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1144      /**                                                                                                           </span>
<span class="2369304932228112448" onmouseenter="enter('2369304932228112448');" onmouseout="out('2369304932228112448');" style="">1145       * Call from the handler for ACTION_PACKAGE_ADDED, ACTION_PACKAGE_REMOVED and                                 </span>
<span class="-8845819122914862467" onmouseenter="enter('-8845819122914862467');" onmouseout="out('-8845819122914862467');" style="">1146       * ACTION_PACKAGE_CHANGED.                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1147       */                                                                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1148      @Override                                                                                                     </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">1149      public void onReceive(Context context, Intent intent) {                                                       </span>
<span class="-4567737324281428641" onmouseenter="enter('-4567737324281428641');" onmouseout="out('-4567737324281428641');" style="">1150          if (DEBUG_LOADERS) Log.d(TAG, &quot;onReceive intent=&quot; + intent);                                              </span>
<span  style="">1151                                                                                                                    </span>
<span class="-4990819661547905021" onmouseenter="enter('-4990819661547905021');" onmouseout="out('-4990819661547905021');" style="">1152          final String action = intent.getAction();                                                                 </span>
<span  style="">1153                                                                                                                    </span>
<span class="3248856724191643889" onmouseenter="enter('3248856724191643889');" onmouseout="out('3248856724191643889');" style="">1154          if (Intent.ACTION_PACKAGE_CHANGED.equals(action)                                                          </span>
<span class="540624655569635000" onmouseenter="enter('540624655569635000');" onmouseout="out('540624655569635000');" style="">1155                  || Intent.ACTION_PACKAGE_REMOVED.equals(action)                                                   </span>
<span class="-2497532605624583235" onmouseenter="enter('-2497532605624583235');" onmouseout="out('-2497532605624583235');" style="">1156                  || Intent.ACTION_PACKAGE_ADDED.equals(action)) {                                                  </span>
<span class="3043595781762965417" onmouseenter="enter('3043595781762965417');" onmouseout="out('3043595781762965417');" style="">1157              final String packageName = intent.getData().getSchemeSpecificPart();                                  </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="">1158              final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);                      </span>
<span  style="">1159                                                                                                                    </span>
<span class="8732681156431716097" onmouseenter="enter('8732681156431716097');" onmouseout="out('8732681156431716097');" style="">1160              int op = PackageUpdatedTask.OP_NONE;                                                                  </span>
<span  style="">1161                                                                                                                    </span>
<span class="226916516395269330" onmouseenter="enter('226916516395269330');" onmouseout="out('226916516395269330');" style="">1162              if (packageName == null || packageName.length() == 0) {                                               </span>
<span class="6497011882963257234" onmouseenter="enter('6497011882963257234');" onmouseout="out('6497011882963257234');" style="">1163                  // they sent us a bad intent                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1164                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1165              }                                                                                                     </span>
<span  style="">1166                                                                                                                    </span>
<span class="-8410954317975616940" onmouseenter="enter('-8410954317975616940');" onmouseout="out('-8410954317975616940');" style="">1167              if (Intent.ACTION_PACKAGE_CHANGED.equals(action)) {                                                   </span>
<span class="-6985466686908158774" onmouseenter="enter('-6985466686908158774');" onmouseout="out('-6985466686908158774');" style="">1168                  op = PackageUpdatedTask.OP_UPDATE;                                                                </span>
<span class="-6129441538111285553" onmouseenter="enter('-6129441538111285553');" onmouseout="out('-6129441538111285553');" style="">1169              } else if (Intent.ACTION_PACKAGE_REMOVED.equals(action)) {                                            </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1170                  if (!replacing) {                                                                                 </span>
<span class="-6586396537735596399" onmouseenter="enter('-6586396537735596399');" onmouseout="out('-6586396537735596399');" style="">1171                      op = PackageUpdatedTask.OP_REMOVE;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1172                  }                                                                                                 </span>
<span class="596194884408948956" onmouseenter="enter('596194884408948956');" onmouseout="out('596194884408948956');" style="">1173                  // else, we are replacing the package, so a PACKAGE_ADDED will be sent                            </span>
<span class="8848734407792838356" onmouseenter="enter('8848734407792838356');" onmouseout="out('8848734407792838356');" style="">1174                  // later, we will update the package at this time                                                 </span>
<span class="1584650074780198559" onmouseenter="enter('1584650074780198559');" onmouseout="out('1584650074780198559');" style="">1175              } else if (Intent.ACTION_PACKAGE_ADDED.equals(action)) {                                              </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1176                  if (!replacing) {                                                                                 </span>
<span class="-8510632568607563672" onmouseenter="enter('-8510632568607563672');" onmouseout="out('-8510632568607563672');" style="">1177                      op = PackageUpdatedTask.OP_ADD;                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1178                  } else {                                                                                          </span>
<span class="-6985466686908158774" onmouseenter="enter('-6985466686908158774');" onmouseout="out('-6985466686908158774');" style="">1179                      op = PackageUpdatedTask.OP_UPDATE;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1180                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1181              }                                                                                                     </span>
<span  style="">1182                                                                                                                    </span>
<span class="4401752612772195970" onmouseenter="enter('4401752612772195970');" onmouseout="out('4401752612772195970');" style="">1183              if (op != PackageUpdatedTask.OP_NONE) {                                                               </span>
<span class="-3763042555791809504" onmouseenter="enter('-3763042555791809504');" onmouseout="out('-3763042555791809504');" style="">1184                  enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName }));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1185              }                                                                                                     </span>
<span  style="">1186                                                                                                                    </span>
<span class="1438616399789326195" onmouseenter="enter('1438616399789326195');" onmouseout="out('1438616399789326195');" style="">1187          } else if (Intent.ACTION_EXTERNAL_APPLICATIONS_AVAILABLE.equals(action)) {                                </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="">1188              final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);                      </span>
<span class="-9048118809725232135" onmouseenter="enter('-9048118809725232135');" onmouseout="out('-9048118809725232135');" style="">1189              String[] packages = intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);                    </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1190              if (!replacing) {                                                                                     </span>
<span class="8106264297457531305" onmouseenter="enter('8106264297457531305');" onmouseout="out('8106264297457531305');" style="">1191                  enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_ADD, packages));               </span>
<span class="796476435191708892" onmouseenter="enter('796476435191708892');" onmouseout="out('796476435191708892');" style="">1192                  if (mAppsCanBeOnRemoveableStorage) {                                                              </span>
<span class="-460878835460866964" onmouseenter="enter('-460878835460866964');" onmouseout="out('-460878835460866964');" style="">1193                      // Only rebind if we support removable storage.  It catches the case where                    </span>
<span class="-4167475923329833908" onmouseenter="enter('-4167475923329833908');" onmouseout="out('-4167475923329833908');" style="">1194                      // apps on the external sd card need to be reloaded                                           </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1195                      startLoaderFromBackground();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1196                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1197              } else {                                                                                              </span>
<span class="-1596872044981704971" onmouseenter="enter('-1596872044981704971');" onmouseout="out('-1596872044981704971');" style="">1198                  // If we are replacing then just update the packages in the list                                  </span>
<span class="5890557645886373945" onmouseenter="enter('5890557645886373945');" onmouseout="out('5890557645886373945');" style="">1199                  enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE,                        </span>
<span class="-5628778258633473048" onmouseenter="enter('-5628778258633473048');" onmouseout="out('-5628778258633473048');" style="">1200                          packages));                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1201              }                                                                                                     </span>
<span class="7043932659231673518" onmouseenter="enter('7043932659231673518');" onmouseout="out('7043932659231673518');" style="">1202          } else if (Intent.ACTION_EXTERNAL_APPLICATIONS_UNAVAILABLE.equals(action)) {                              </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="">1203              final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);                      </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1204              if (!replacing) {                                                                                     </span>
<span class="-9048118809725232135" onmouseenter="enter('-9048118809725232135');" onmouseout="out('-9048118809725232135');" style="">1205                  String[] packages = intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);                </span>
<span class="-7496430100396306440" onmouseenter="enter('-7496430100396306440');" onmouseout="out('-7496430100396306440');" style="">1206                  enqueuePackageUpdated(new PackageUpdatedTask(                                                     </span>
<span class="296372570783844091" onmouseenter="enter('296372570783844091');" onmouseout="out('296372570783844091');" style="">1207                              PackageUpdatedTask.OP_UNAVAILABLE, packages));                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1208              }                                                                                                     </span>
<span class="1575594556961394504" onmouseenter="enter('1575594556961394504');" onmouseout="out('1575594556961394504');" style="">1209              // else, we are replacing the packages, so ignore this event and wait for                             </span>
<span class="-3059095335031402395" onmouseenter="enter('-3059095335031402395');" onmouseout="out('-3059095335031402395');" style="">1210              // EXTERNAL_APPLICATIONS_AVAILABLE to update the packages at that time                                </span>
<span class="-2062230633944308548" onmouseenter="enter('-2062230633944308548');" onmouseout="out('-2062230633944308548');" style="">1211          } else if (Intent.ACTION_LOCALE_CHANGED.equals(action)) {                                                 </span>
<span class="-6283043286710203920" onmouseenter="enter('-6283043286710203920');" onmouseout="out('-6283043286710203920');" style="">1212              // If we have changed locale we need to clear out the labels in all apps/workspace.                   </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1213              forceReload();                                                                                        </span>
<span class="4348516547288755383" onmouseenter="enter('4348516547288755383');" onmouseout="out('4348516547288755383');" style="">1214          } else if (Intent.ACTION_CONFIGURATION_CHANGED.equals(action)) {                                          </span>
<span class="6164116257081582847" onmouseenter="enter('6164116257081582847');" onmouseout="out('6164116257081582847');" style="">1215               // Check if configuration change was an mcc/mnc change which would affect app resources              </span>
<span class="-1334400353911346867" onmouseenter="enter('-1334400353911346867');" onmouseout="out('-1334400353911346867');" style="">1216               // and we would need to clear out the labels in all apps/workspace. Same handling as                 </span>
<span class="-5650891854452971889" onmouseenter="enter('-5650891854452971889');" onmouseout="out('-5650891854452971889');" style="">1217               // above for ACTION_LOCALE_CHANGED                                                                   </span>
<span class="5411318685984925146" onmouseenter="enter('5411318685984925146');" onmouseout="out('5411318685984925146');" style="">1218               Configuration currentConfig = context.getResources().getConfiguration();                             </span>
<span class="-5822569774152959183" onmouseenter="enter('-5822569774152959183');" onmouseout="out('-5822569774152959183');" style="">1219               if (mPreviousConfigMcc != currentConfig.mcc) {                                                       </span>
<span class="84255665079130844" onmouseenter="enter('84255665079130844');" onmouseout="out('84255665079130844');" style="">1220                     Log.d(TAG, &quot;Reload apps on config change. curr_mcc:&quot;                                           </span>
<span class="-5209278319615985301" onmouseenter="enter('-5209278319615985301');" onmouseout="out('-5209278319615985301');" style="">1221                         + currentConfig.mcc + &quot; prevmcc:&quot; + mPreviousConfigMcc);                                   </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1222                     forceReload();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1223               }                                                                                                    </span>
<span class="-3935663267934034322" onmouseenter="enter('-3935663267934034322');" onmouseout="out('-3935663267934034322');" style="">1224               // Update previousConfig                                                                             </span>
<span class="3962364908604221868" onmouseenter="enter('3962364908604221868');" onmouseout="out('3962364908604221868');" style="">1225               mPreviousConfigMcc = currentConfig.mcc;                                                              </span>
<span class="-625815149698974703" onmouseenter="enter('-625815149698974703');" onmouseout="out('-625815149698974703');" style="">1226          } else if (SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED.equals(action) ||                          </span>
<span class="-3901926890039161494" onmouseenter="enter('-3901926890039161494');" onmouseout="out('-3901926890039161494');" style="">1227                     SearchManager.INTENT_ACTION_SEARCHABLES_CHANGED.equals(action)) {                              </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1228              if (mCallbacks != null) {                                                                             </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1229                  Callbacks callbacks = mCallbacks.get();                                                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1230                  if (callbacks != null) {                                                                          </span>
<span class="-1936765454200843013" onmouseenter="enter('-1936765454200843013');" onmouseout="out('-1936765454200843013');" style="">1231                      callbacks.bindSearchablesChanged();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1232                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1233              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1234          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1235      }                                                                                                             </span>
<span  style="">1236                                                                                                                    </span>
<span class="-3490103774513517076" onmouseenter="enter('-3490103774513517076');" onmouseout="out('-3490103774513517076');" style="">1237      private void forceReload() {                                                                                  </span>
<span class="778547048286075437" onmouseenter="enter('778547048286075437');" onmouseout="out('778547048286075437');" style="">1238          resetLoadedState(true, true);                                                                             </span>
<span  style="">1239                                                                                                                    </span>
<span class="4237924176832789189" onmouseenter="enter('4237924176832789189');" onmouseout="out('4237924176832789189');" style="">1240          // Do this here because if the launcher activity is running it will be restarted.                         </span>
<span class="-3504249388484505584" onmouseenter="enter('-3504249388484505584');" onmouseout="out('-3504249388484505584');" style="">1241          // If it&#x27;s not running startLoaderFromBackground will merely tell it that it needs                        </span>
<span class="5637742608155670431" onmouseenter="enter('5637742608155670431');" onmouseout="out('5637742608155670431');" style="">1242          // to reload.                                                                                             </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1243          startLoaderFromBackground();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1244      }                                                                                                             </span>
<span  style="">1245                                                                                                                    </span>
<span class="-4293128577464776735" onmouseenter="enter('-4293128577464776735');" onmouseout="out('-4293128577464776735');" style="">1246      public void resetLoadedState(boolean resetAllAppsLoaded, boolean resetWorkspaceLoaded) {                      </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1247          synchronized (mLock) {                                                                                    </span>
<span class="-2609781935860166694" onmouseenter="enter('-2609781935860166694');" onmouseout="out('-2609781935860166694');" style="">1248              // Stop any existing loaders first, so they don&#x27;t set mAllAppsLoaded or                               </span>
<span class="1916843454374538934" onmouseenter="enter('1916843454374538934');" onmouseout="out('1916843454374538934');" style="">1249              // mWorkspaceLoaded to true later                                                                     </span>
<span class="-1528282254597569426" onmouseenter="enter('-1528282254597569426');" onmouseout="out('-1528282254597569426');" style="">1250              stopLoaderLocked();                                                                                   </span>
<span class="-4094161784675318974" onmouseenter="enter('-4094161784675318974');" onmouseout="out('-4094161784675318974');" style="">1251              if (resetAllAppsLoaded) mAllAppsLoaded = false;                                                       </span>
<span class="-3582216479388479825" onmouseenter="enter('-3582216479388479825');" onmouseout="out('-3582216479388479825');" style="">1252              if (resetWorkspaceLoaded) mWorkspaceLoaded = false;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1253          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254      }                                                                                                             </span>
<span  style="">1255                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1256      /**                                                                                                           </span>
<span class="-2117548427273174966" onmouseenter="enter('-2117548427273174966');" onmouseout="out('-2117548427273174966');" style="">1257       * When the launcher is in the background, it&#x27;s possible for it to miss paired                                </span>
<span class="9045642034745197537" onmouseenter="enter('9045642034745197537');" onmouseout="out('9045642034745197537');" style="">1258       * configuration changes.  So whenever we trigger the loader from the background                              </span>
<span class="3717077838570548717" onmouseenter="enter('3717077838570548717');" onmouseout="out('3717077838570548717');" style="">1259       * tell the launcher that it needs to re-run the loader when it comes back instead                            </span>
<span class="8619803709595782118" onmouseenter="enter('8619803709595782118');" onmouseout="out('8619803709595782118');" style="">1260       * of doing it now.                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1261       */                                                                                                           </span>
<span class="2053805597450117019" onmouseenter="enter('2053805597450117019');" onmouseout="out('2053805597450117019');" style="">1262      public void startLoaderFromBackground() {                                                                     </span>
<span class="-3760886775206602162" onmouseenter="enter('-3760886775206602162');" onmouseout="out('-3760886775206602162');" style="">1263          boolean runLoader = false;                                                                                </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1264          if (mCallbacks != null) {                                                                                 </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1265              Callbacks callbacks = mCallbacks.get();                                                               </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1266              if (callbacks != null) {                                                                              </span>
<span class="-8461765931128288918" onmouseenter="enter('-8461765931128288918');" onmouseout="out('-8461765931128288918');" style="">1267                  // Only actually run the loader if they&#x27;re not paused.                                            </span>
<span class="-462943306960371545" onmouseenter="enter('-462943306960371545');" onmouseout="out('-462943306960371545');" style="">1268                  if (!callbacks.setLoadOnResume()) {                                                               </span>
<span class="-8889848208331327581" onmouseenter="enter('-8889848208331327581');" onmouseout="out('-8889848208331327581');" style="">1269                      runLoader = true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1270                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1271              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1272          }                                                                                                         </span>
<span class="-2622291522100283788" onmouseenter="enter('-2622291522100283788');" onmouseout="out('-2622291522100283788');" style="">1273          if (runLoader) {                                                                                          </span>
<span class="-8998147482804817647" onmouseenter="enter('-8998147482804817647');" onmouseout="out('-8998147482804817647');" style="">1274              startLoader(false, PagedView.INVALID_RESTORE_PAGE);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1275          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1276      }                                                                                                             </span>
<span  style="">1277                                                                                                                    </span>
<span class="5010903034251856801" onmouseenter="enter('5010903034251856801');" onmouseout="out('5010903034251856801');" style="">1278      // If there is already a loader task running, tell it to stop.                                                </span>
<span class="796557558969242789" onmouseenter="enter('796557558969242789');" onmouseout="out('796557558969242789');" style="">1279      // returns true if isLaunching() was true on the old task                                                     </span>
<span class="-4581932122990216089" onmouseenter="enter('-4581932122990216089');" onmouseout="out('-4581932122990216089');" style="">1280      private boolean stopLoaderLocked() {                                                                          </span>
<span class="-998934784399408070" onmouseenter="enter('-998934784399408070');" onmouseout="out('-998934784399408070');" style="">1281          boolean isLaunching = false;                                                                              </span>
<span class="-7986438653599299764" onmouseenter="enter('-7986438653599299764');" onmouseout="out('-7986438653599299764');" style="">1282          LoaderTask oldTask = mLoaderTask;                                                                         </span>
<span class="-2859449282457612659" onmouseenter="enter('-2859449282457612659');" onmouseout="out('-2859449282457612659');" style="">1283          if (oldTask != null) {                                                                                    </span>
<span class="5507271139955657849" onmouseenter="enter('5507271139955657849');" onmouseout="out('5507271139955657849');" style="">1284              if (oldTask.isLaunching()) {                                                                          </span>
<span class="-2542349725897719409" onmouseenter="enter('-2542349725897719409');" onmouseout="out('-2542349725897719409');" style="">1285                  isLaunching = true;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1286              }                                                                                                     </span>
<span class="-1151918806087352732" onmouseenter="enter('-1151918806087352732');" onmouseout="out('-1151918806087352732');" style="">1287              oldTask.stopLocked();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1288          }                                                                                                         </span>
<span class="353443281501806148" onmouseenter="enter('353443281501806148');" onmouseout="out('353443281501806148');" style="">1289          return isLaunching;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1290      }                                                                                                             </span>
<span  style="">1291                                                                                                                    </span>
<span class="3837278165301095000" onmouseenter="enter('3837278165301095000');" onmouseout="out('3837278165301095000');" style="">1292      public void startLoader(boolean isLaunching, int synchronousBindPage) {                                       </span>
<span class="-5265370469502082000" onmouseenter="enter('-5265370469502082000');" onmouseout="out('-5265370469502082000');" style="">1293          startLoader(isLaunching, synchronousBindPage, LOADER_FLAG_NONE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1294      }                                                                                                             </span>
<span  style="">1295                                                                                                                    </span>
<span class="4886983231320039031" onmouseenter="enter('4886983231320039031');" onmouseout="out('4886983231320039031');" style="">1296      public void startLoader(boolean isLaunching, int synchronousBindPage, int loadFlags) {                        </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1297          synchronized (mLock) {                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1298              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="-3508213546782417324" onmouseenter="enter('-3508213546782417324');" onmouseout="out('-3508213546782417324');" style="">1299                  Log.d(TAG, &quot;startLoader isLaunching=&quot; + isLaunching);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1300              }                                                                                                     </span>
<span  style="">1301                                                                                                                    </span>
<span class="6333826815871699731" onmouseenter="enter('6333826815871699731');" onmouseout="out('6333826815871699731');" style="">1302              // Clear any deferred bind-runnables from the synchronized load process                               </span>
<span class="-7033809362198181476" onmouseenter="enter('-7033809362198181476');" onmouseout="out('-7033809362198181476');" style="">1303              // We must do this before any loading/binding is scheduled below.                                     </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1304              mDeferredBindRunnables.clear();                                                                       </span>
<span  style="">1305                                                                                                                    </span>
<span class="-2785438828901225561" onmouseenter="enter('-2785438828901225561');" onmouseout="out('-2785438828901225561');" style="">1306              // Don&#x27;t bother to start the thread if we know it&#x27;s not going to do anything                          </span>
<span class="-784058118581736702" onmouseenter="enter('-784058118581736702');" onmouseout="out('-784058118581736702');" style="">1307              if (mCallbacks != null &amp;&amp; mCallbacks.get() != null) {                                                 </span>
<span class="-5820527225743363271" onmouseenter="enter('-5820527225743363271');" onmouseout="out('-5820527225743363271');" style="">1308                  // If there is already one running, tell it to stop.                                              </span>
<span class="3990358955275755027" onmouseenter="enter('3990358955275755027');" onmouseout="out('3990358955275755027');" style="">1309                  // also, don&#x27;t downgrade isLaunching if we&#x27;re already running                                     </span>
<span class="-6024742637751579231" onmouseenter="enter('-6024742637751579231');" onmouseout="out('-6024742637751579231');" style="">1310                  isLaunching = isLaunching || stopLoaderLocked();                                                  </span>
<span class="7022676154060365524" onmouseenter="enter('7022676154060365524');" onmouseout="out('7022676154060365524');" style="">1311                  mLoaderTask = new LoaderTask(mApp.getContext(), isLaunching, loadFlags);                          </span>
<span class="1771251463067889729" onmouseenter="enter('1771251463067889729');" onmouseout="out('1771251463067889729');" style="">1312                  if (synchronousBindPage != PagedView.INVALID_RESTORE_PAGE                                         </span>
<span class="7049103546590409467" onmouseenter="enter('7049103546590409467');" onmouseout="out('7049103546590409467');" style="">1313                          &amp;&amp; mAllAppsLoaded &amp;&amp; mWorkspaceLoaded) {                                                  </span>
<span class="-8342371766149337044" onmouseenter="enter('-8342371766149337044');" onmouseout="out('-8342371766149337044');" style="">1314                      mLoaderTask.runBindSynchronousPage(synchronousBindPage);                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1315                  } else {                                                                                          </span>
<span class="-600387258114093875" onmouseenter="enter('-600387258114093875');" onmouseout="out('-600387258114093875');" style="">1316                      sWorkerThread.setPriority(Thread.NORM_PRIORITY);                                              </span>
<span class="7243935410050079045" onmouseenter="enter('7243935410050079045');" onmouseout="out('7243935410050079045');" style="">1317                      sWorker.post(mLoaderTask);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1318                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1319              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1320          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1321      }                                                                                                             </span>
<span  style="">1322                                                                                                                    </span>
<span class="8791491145548048370" onmouseenter="enter('8791491145548048370');" onmouseout="out('8791491145548048370');" style="">1323      void bindRemainingSynchronousPages() {                                                                        </span>
<span class="5033608739884582118" onmouseenter="enter('5033608739884582118');" onmouseout="out('5033608739884582118');" style="">1324          // Post the remaining side pages to be loaded                                                             </span>
<span class="-5332743236356375648" onmouseenter="enter('-5332743236356375648');" onmouseout="out('-5332743236356375648');" style="">1325          if (!mDeferredBindRunnables.isEmpty()) {                                                                  </span>
<span class="5296695443187413802" onmouseenter="enter('5296695443187413802');" onmouseout="out('5296695443187413802');" style="">1326              for (final Runnable r : mDeferredBindRunnables) {                                                     </span>
<span class="352794200584805787" onmouseenter="enter('352794200584805787');" onmouseout="out('352794200584805787');" style="">1327                  mHandler.post(r, MAIN_THREAD_BINDING_RUNNABLE);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1328              }                                                                                                     </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1329              mDeferredBindRunnables.clear();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1330          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1331      }                                                                                                             </span>
<span  style="">1332                                                                                                                    </span>
<span class="2340632222115195329" onmouseenter="enter('2340632222115195329');" onmouseout="out('2340632222115195329');" style="">1333      public void stopLoader() {                                                                                    </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1334          synchronized (mLock) {                                                                                    </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1335              if (mLoaderTask != null) {                                                                            </span>
<span class="-3264656657741930991" onmouseenter="enter('-3264656657741930991');" onmouseout="out('-3264656657741930991');" style="">1336                  mLoaderTask.stopLocked();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1337              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1338          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1339      }                                                                                                             </span>
<span  style="">1340                                                                                                                    </span>
<span class="-7250027300190670202" onmouseenter="enter('-7250027300190670202');" onmouseout="out('-7250027300190670202');" style="">1341      /** Loads the workspace screens db into a map of Rank -&gt; ScreenId */                                          </span>
<span class="122992606215727554" onmouseenter="enter('122992606215727554');" onmouseout="out('122992606215727554');" style="">1342      private static TreeMap&lt;Integer, Long&gt; loadWorkspaceScreensDb(Context context) {                               </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1343          final ContentResolver contentResolver = context.getContentResolver();                                     </span>
<span class="-2220596623746218138" onmouseenter="enter('-2220596623746218138');" onmouseout="out('-2220596623746218138');" style="">1344          final Uri screensUri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                                     </span>
<span class="6273592658286011909" onmouseenter="enter('6273592658286011909');" onmouseout="out('6273592658286011909');" style="">1345          final Cursor sc = contentResolver.query(screensUri, null, null, null, null);                              </span>
<span class="-750342796873513708" onmouseenter="enter('-750342796873513708');" onmouseout="out('-750342796873513708');" style="">1346          TreeMap&lt;Integer, Long&gt; orderedScreens = new TreeMap&lt;Integer, Long&gt;();                                     </span>
<span  style="">1347                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1348          try {                                                                                                     </span>
<span class="-8175558610564469753" onmouseenter="enter('-8175558610564469753');" onmouseout="out('-8175558610564469753');" style="">1349              final int idIndex = sc.getColumnIndexOrThrow(                                                         </span>
<span class="-8946142257769661598" onmouseenter="enter('-8946142257769661598');" onmouseout="out('-8946142257769661598');" style="">1350                      LauncherSettings.WorkspaceScreens._ID);                                                       </span>
<span class="-8868089630781298600" onmouseenter="enter('-8868089630781298600');" onmouseout="out('-8868089630781298600');" style="">1351              final int rankIndex = sc.getColumnIndexOrThrow(                                                       </span>
<span class="5916017515631826997" onmouseenter="enter('5916017515631826997');" onmouseout="out('5916017515631826997');" style="">1352                      LauncherSettings.WorkspaceScreens.SCREEN_RANK);                                               </span>
<span class="204728523712198078" onmouseenter="enter('204728523712198078');" onmouseout="out('204728523712198078');" style="">1353              while (sc.moveToNext()) {                                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1354                  try {                                                                                             </span>
<span class="-3927530459574574291" onmouseenter="enter('-3927530459574574291');" onmouseout="out('-3927530459574574291');" style="">1355                      long screenId = sc.getLong(idIndex);                                                          </span>
<span class="4944528408544996755" onmouseenter="enter('4944528408544996755');" onmouseout="out('4944528408544996755');" style="">1356                      int rank = sc.getInt(rankIndex);                                                              </span>
<span class="3308047316092947062" onmouseenter="enter('3308047316092947062');" onmouseout="out('3308047316092947062');" style="">1357                      orderedScreens.put(rank, screenId);                                                           </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1358                  } catch (Exception e) {                                                                           </span>
<span class="-7912680121623740950" onmouseenter="enter('-7912680121623740950');" onmouseout="out('-7912680121623740950');" style="">1359                      Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e, true);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1360                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1361              }                                                                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1362          } finally {                                                                                               </span>
<span class="8048076729460304726" onmouseenter="enter('8048076729460304726');" onmouseout="out('8048076729460304726');" style="">1363              sc.close();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1364          }                                                                                                         </span>
<span  style="">1365                                                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1366          // Log to disk                                                                                            </span>
<span class="395286336309272035" onmouseenter="enter('395286336309272035');" onmouseout="out('395286336309272035');" style="">1367          Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspaceScreensDb()&quot;, true);                                    </span>
<span class="218635510720911915" onmouseenter="enter('218635510720911915');" onmouseout="out('218635510720911915');" style="">1368          ArrayList&lt;String&gt; orderedScreensPairs= new ArrayList&lt;String&gt;();                                           </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">1369          for (Integer i : orderedScreens.keySet()) {                                                               </span>
<span class="7491860136402808405" onmouseenter="enter('7491860136402808405');" onmouseout="out('7491860136402808405');" style="">1370              orderedScreensPairs.add(&quot;{ &quot; + i + &quot;: &quot; + orderedScreens.get(i) + &quot; }&quot;);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1371          }                                                                                                         </span>
<span class="-1337084683171534745" onmouseenter="enter('-1337084683171534745');" onmouseout="out('-1337084683171534745');" style="">1372          Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; +                                                       </span>
<span class="-2164573057986762020" onmouseenter="enter('-2164573057986762020');" onmouseout="out('-2164573057986762020');" style="">1373                  TextUtils.join(&quot;, &quot;, orderedScreensPairs), true);                                                 </span>
<span class="1470292219769535286" onmouseenter="enter('1470292219769535286');" onmouseout="out('1470292219769535286');" style="">1374          return orderedScreens;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1375      }                                                                                                             </span>
<span  style="">1376                                                                                                                    </span>
<span class="3555732154070898598" onmouseenter="enter('3555732154070898598');" onmouseout="out('3555732154070898598');" style="">1377      public boolean isAllAppsLoaded() {                                                                            </span>
<span class="-4479372220598901856" onmouseenter="enter('-4479372220598901856');" onmouseout="out('-4479372220598901856');" style="">1378          return mAllAppsLoaded;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1379      }                                                                                                             </span>
<span  style="">1380                                                                                                                    </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1381      boolean isLoadingWorkspace() {                                                                                </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1382          synchronized (mLock) {                                                                                    </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1383              if (mLoaderTask != null) {                                                                            </span>
<span class="-8784543184221518678" onmouseenter="enter('-8784543184221518678');" onmouseout="out('-8784543184221518678');" style="">1384                  return mLoaderTask.isLoadingWorkspace();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1385              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1386          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1387          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1388      }                                                                                                             </span>
<span  style="">1389                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1390      /**                                                                                                           </span>
<span class="2155822975232422030" onmouseenter="enter('2155822975232422030');" onmouseout="out('2155822975232422030');" style="">1391       * Runnable for the thread that loads the contents of the launcher:                                           </span>
<span class="2245504796345070456" onmouseenter="enter('2245504796345070456');" onmouseout="out('2245504796345070456');" style="">1392       *   - workspace icons                                                                                        </span>
<span class="3748531824399873232" onmouseenter="enter('3748531824399873232');" onmouseout="out('3748531824399873232');" style="">1393       *   - widgets                                                                                                </span>
<span class="-1174287823865228312" onmouseenter="enter('-1174287823865228312');" onmouseout="out('-1174287823865228312');" style="">1394       *   - all apps icons                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1395       */                                                                                                           </span>
<span class="5152324394883908677" onmouseenter="enter('5152324394883908677');" onmouseout="out('5152324394883908677');" style="">1396      private class LoaderTask implements Runnable {                                                                </span>
<span class="6683852815807951473" onmouseenter="enter('6683852815807951473');" onmouseout="out('6683852815807951473');" style="">1397          private Context mContext;                                                                                 </span>
<span class="-8892613002903674576" onmouseenter="enter('-8892613002903674576');" onmouseout="out('-8892613002903674576');" style="">1398          private boolean mIsLaunching;                                                                             </span>
<span class="-8472062509666230595" onmouseenter="enter('-8472062509666230595');" onmouseout="out('-8472062509666230595');" style="">1399          private boolean mIsLoadingAndBindingWorkspace;                                                            </span>
<span class="840925515877441947" onmouseenter="enter('840925515877441947');" onmouseout="out('840925515877441947');" style="">1400          private boolean mStopped;                                                                                 </span>
<span class="-1108993435799622018" onmouseenter="enter('-1108993435799622018');" onmouseout="out('-1108993435799622018');" style="">1401          private boolean mLoadAndBindStepFinished;                                                                 </span>
<span class="2080823019438326837" onmouseenter="enter('2080823019438326837');" onmouseout="out('2080823019438326837');" style="">1402          private int mFlags;                                                                                       </span>
<span  style="">1403                                                                                                                    </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">1404          private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                                        </span>
<span  style="">1405                                                                                                                    </span>
<span class="-3637406926963361525" onmouseenter="enter('-3637406926963361525');" onmouseout="out('-3637406926963361525');" style="">1406          LoaderTask(Context context, boolean isLaunching, int flags) {                                             </span>
<span class="7260904205784329196" onmouseenter="enter('7260904205784329196');" onmouseout="out('7260904205784329196');" style="">1407              mContext = context;                                                                                   </span>
<span class="7512260519858493354" onmouseenter="enter('7512260519858493354');" onmouseout="out('7512260519858493354');" style="">1408              mIsLaunching = isLaunching;                                                                           </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">1409              mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                                    </span>
<span class="6183718553459964087" onmouseenter="enter('6183718553459964087');" onmouseout="out('6183718553459964087');" style="">1410              mFlags = flags;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1411          }                                                                                                         </span>
<span  style="">1412                                                                                                                    </span>
<span class="-3427713478562425776" onmouseenter="enter('-3427713478562425776');" onmouseout="out('-3427713478562425776');" style="">1413          boolean isLaunching() {                                                                                   </span>
<span class="-4684239236966951132" onmouseenter="enter('-4684239236966951132');" onmouseout="out('-4684239236966951132');" style="">1414              return mIsLaunching;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1415          }                                                                                                         </span>
<span  style="">1416                                                                                                                    </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1417          boolean isLoadingWorkspace() {                                                                            </span>
<span class="-1565626489511429864" onmouseenter="enter('-1565626489511429864');" onmouseout="out('-1565626489511429864');" style="">1418              return mIsLoadingAndBindingWorkspace;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1419          }                                                                                                         </span>
<span  style="">1420                                                                                                                    </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1421          /** Returns whether this is an upgrade path */                                                            </span>
<span class="-4912644643880785787" onmouseenter="enter('-4912644643880785787');" onmouseout="out('-4912644643880785787');" style="">1422          private boolean loadAndBindWorkspace() {                                                                  </span>
<span class="3221067006114111971" onmouseenter="enter('3221067006114111971');" onmouseout="out('3221067006114111971');" style="">1423              mIsLoadingAndBindingWorkspace = true;                                                                 </span>
<span  style="">1424                                                                                                                    </span>
<span class="1537270917172214589" onmouseenter="enter('1537270917172214589');" onmouseout="out('1537270917172214589');" style="">1425              // Load the workspace                                                                                 </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1426              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="8901273111544619292" onmouseenter="enter('8901273111544619292');" onmouseout="out('8901273111544619292');" style="">1427                  Log.d(TAG, &quot;loadAndBindWorkspace mWorkspaceLoaded=&quot; + mWorkspaceLoaded);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1428              }                                                                                                     </span>
<span  style="">1429                                                                                                                    </span>
<span class="-7050118912026035967" onmouseenter="enter('-7050118912026035967');" onmouseout="out('-7050118912026035967');" style="">1430              boolean isUpgradePath = false;                                                                        </span>
<span class="-6627511839388696673" onmouseenter="enter('-6627511839388696673');" onmouseout="out('-6627511839388696673');" style="">1431              if (!mWorkspaceLoaded) {                                                                              </span>
<span class="-5751837054227838000" onmouseenter="enter('-5751837054227838000');" onmouseout="out('-5751837054227838000');" style="">1432                  isUpgradePath = loadWorkspace();                                                                  </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1433                  synchronized (LoaderTask.this) {                                                                  </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1434                      if (mStopped) {                                                                               </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1435                          return isUpgradePath;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1436                      }                                                                                             </span>
<span class="3247008524984054391" onmouseenter="enter('3247008524984054391');" onmouseout="out('3247008524984054391');" style="">1437                      mWorkspaceLoaded = true;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1438                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1439              }                                                                                                     </span>
<span  style="">1440                                                                                                                    </span>
<span class="8161409494754485761" onmouseenter="enter('8161409494754485761');" onmouseout="out('8161409494754485761');" style="">1441              // Bind the workspace                                                                                 </span>
<span class="7984749853310309686" onmouseenter="enter('7984749853310309686');" onmouseout="out('7984749853310309686');" style="">1442              bindWorkspace(-1, isUpgradePath);                                                                     </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1443              return isUpgradePath;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1444          }                                                                                                         </span>
<span  style="">1445                                                                                                                    </span>
<span class="-1989226029052835978" onmouseenter="enter('-1989226029052835978');" onmouseout="out('-1989226029052835978');" style="">1446          private void waitForIdle() {                                                                              </span>
<span class="755597645611528735" onmouseenter="enter('755597645611528735');" onmouseout="out('755597645611528735');" style="">1447              // Wait until the either we&#x27;re stopped or the other threads are done.                                 </span>
<span class="-8727414813590658044" onmouseenter="enter('-8727414813590658044');" onmouseout="out('-8727414813590658044');" style="">1448              // This way we don&#x27;t start loading all apps until the workspace has settled                           </span>
<span class="519327046885180501" onmouseenter="enter('519327046885180501');" onmouseout="out('519327046885180501');" style="">1449              // down.                                                                                              </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1450              synchronized (LoaderTask.this) {                                                                      </span>
<span class="-83798755248439808" onmouseenter="enter('-83798755248439808');" onmouseout="out('-83798755248439808');" style="">1451                  final long workspaceWaitTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                    </span>
<span  style="">1452                                                                                                                    </span>
<span class="-8997106023930440912" onmouseenter="enter('-8997106023930440912');" onmouseout="out('-8997106023930440912');" style="">1453                  mHandler.postIdle(new Runnable() {                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1454                          public void run() {                                                                       </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1455                              synchronized (LoaderTask.this) {                                                      </span>
<span class="-4593766760064909367" onmouseenter="enter('-4593766760064909367');" onmouseout="out('-4593766760064909367');" style="">1456                                  mLoadAndBindStepFinished = true;                                                  </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1457                                  if (DEBUG_LOADERS) {                                                              </span>
<span class="-7140275656523627984" onmouseenter="enter('-7140275656523627984');" onmouseout="out('-7140275656523627984');" style="">1458                                      Log.d(TAG, &quot;done with previous binding step&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1459                                  }                                                                                 </span>
<span class="8111819661104992685" onmouseenter="enter('8111819661104992685');" onmouseout="out('8111819661104992685');" style="">1460                                  LoaderTask.this.notify();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1461                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1462                          }                                                                                         </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1463                      });                                                                                           </span>
<span  style="">1464                                                                                                                    </span>
<span class="7673579852599691461" onmouseenter="enter('7673579852599691461');" onmouseout="out('7673579852599691461');" style="">1465                  while (!mStopped &amp;&amp; !mLoadAndBindStepFinished &amp;&amp; !mFlushingWorkerThread) {                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1466                      try {                                                                                         </span>
<span class="-1997675543177729859" onmouseenter="enter('-1997675543177729859');" onmouseout="out('-1997675543177729859');" style="">1467                          // Just in case mFlushingWorkerThread changes but we aren&#x27;t woken up,                     </span>
<span class="4998753984474875942" onmouseenter="enter('4998753984474875942');" onmouseout="out('4998753984474875942');" style="">1468                          // wait no longer than 1sec at a time                                                     </span>
<span class="1515790047903299628" onmouseenter="enter('1515790047903299628');" onmouseout="out('1515790047903299628');" style="">1469                          this.wait(1000);                                                                          </span>
<span class="3493957724480568133" onmouseenter="enter('3493957724480568133');" onmouseout="out('3493957724480568133');" style="">1470                      } catch (InterruptedException ex) {                                                           </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style="">1471                          // Ignore                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1472                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1473                  }                                                                                                 </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1474                  if (DEBUG_LOADERS) {                                                                              </span>
<span class="-72139740866353106" onmouseenter="enter('-72139740866353106');" onmouseout="out('-72139740866353106');" style="">1475                      Log.d(TAG, &quot;waited &quot;                                                                          </span>
<span class="3094974955332165680" onmouseenter="enter('3094974955332165680');" onmouseout="out('3094974955332165680');" style="">1476                              + (SystemClock.uptimeMillis()-workspaceWaitTime)                                      </span>
<span class="4719480645001782920" onmouseenter="enter('4719480645001782920');" onmouseout="out('4719480645001782920');" style="">1477                              + &quot;ms for previous step to finish binding&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1478                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1479              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1480          }                                                                                                         </span>
<span  style="">1481                                                                                                                    </span>
<span class="6003497491863497289" onmouseenter="enter('6003497491863497289');" onmouseout="out('6003497491863497289');" style="">1482          void runBindSynchronousPage(int synchronousBindPage) {                                                    </span>
<span class="26631348189854486" onmouseenter="enter('26631348189854486');" onmouseout="out('26631348189854486');" style="">1483              if (synchronousBindPage == PagedView.INVALID_RESTORE_PAGE) {                                          </span>
<span class="-8503902330989669437" onmouseenter="enter('-8503902330989669437');" onmouseout="out('-8503902330989669437');" style="">1484                  // Ensure that we have a valid page index to load synchronously                                   </span>
<span class="4351877111278684588" onmouseenter="enter('4351877111278684588');" onmouseout="out('4351877111278684588');" style="">1485                  throw new RuntimeException(&quot;Should not call runBindSynchronousPage() without &quot; +                  </span>
<span class="-7231071987017264740" onmouseenter="enter('-7231071987017264740');" onmouseout="out('-7231071987017264740');" style="">1486                          &quot;valid page index&quot;);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1487              }                                                                                                     </span>
<span class="-1078848978706070277" onmouseenter="enter('-1078848978706070277');" onmouseout="out('-1078848978706070277');" style="">1488              if (!mAllAppsLoaded || !mWorkspaceLoaded) {                                                           </span>
<span class="2879437365312389694" onmouseenter="enter('2879437365312389694');" onmouseout="out('2879437365312389694');" style="">1489                  // Ensure that we don&#x27;t try and bind a specified page when the pages have not been                </span>
<span class="169159946226030638" onmouseenter="enter('169159946226030638');" onmouseout="out('169159946226030638');" style="">1490                  // loaded already (we should load everything asynchronously in that case)                         </span>
<span class="2803547673173241327" onmouseenter="enter('2803547673173241327');" onmouseout="out('2803547673173241327');" style="">1491                  throw new RuntimeException(&quot;Expecting AllApps and Workspace to be loaded&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1492              }                                                                                                     </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1493              synchronized (mLock) {                                                                                </span>
<span class="6834879657722268045" onmouseenter="enter('6834879657722268045');" onmouseout="out('6834879657722268045');" style="">1494                  if (mIsLoaderTaskRunning) {                                                                       </span>
<span class="3479473486057258175" onmouseenter="enter('3479473486057258175');" onmouseout="out('3479473486057258175');" style="">1495                      // Ensure that we are never running the background loading at this point since                </span>
<span class="5690931735845958615" onmouseenter="enter('5690931735845958615');" onmouseout="out('5690931735845958615');" style="">1496                      // we also touch the background collections                                                   </span>
<span class="-8789687649412956769" onmouseenter="enter('-8789687649412956769');" onmouseout="out('-8789687649412956769');" style="">1497                      throw new RuntimeException(&quot;Error! Background loading is already running&quot;);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1498                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1499              }                                                                                                     </span>
<span  style="">1500                                                                                                                    </span>
<span class="4081886748823582405" onmouseenter="enter('4081886748823582405');" onmouseout="out('4081886748823582405');" style="">1501              // XXX: Throw an exception if we are already loading (since we touch the worker thread                </span>
<span class="-98490365064007765" onmouseenter="enter('-98490365064007765');" onmouseout="out('-98490365064007765');" style="">1502              //      data structures, we can&#x27;t allow any other thread to touch that data, but because              </span>
<span class="4680477662519922026" onmouseenter="enter('4680477662519922026');" onmouseout="out('4680477662519922026');" style="">1503              //      this call is synchronous, we can get away with not locking).                                  </span>
<span  style="">1504                                                                                                                    </span>
<span class="-6012373927983533730" onmouseenter="enter('-6012373927983533730');" onmouseout="out('-6012373927983533730');" style="">1505              // The LauncherModel is static in the LauncherAppState and mHandler may have queued                   </span>
<span class="7586418927072898518" onmouseenter="enter('7586418927072898518');" onmouseout="out('7586418927072898518');" style="">1506              // operations from the previous activity.  We need to ensure that all queued operations               </span>
<span class="-70743228311848279" onmouseenter="enter('-70743228311848279');" onmouseout="out('-70743228311848279');" style="">1507              // are executed before any synchronous binding work is done.                                          </span>
<span class="-4498008587479034521" onmouseenter="enter('-4498008587479034521');" onmouseout="out('-4498008587479034521');" style="">1508              mHandler.flush();                                                                                     </span>
<span  style="">1509                                                                                                                    </span>
<span class="-3771221013488357479" onmouseenter="enter('-3771221013488357479');" onmouseout="out('-3771221013488357479');" style="">1510              // Divide the set of loaded items into those that we are binding synchronously, and                   </span>
<span class="5224432435633178726" onmouseenter="enter('5224432435633178726');" onmouseout="out('5224432435633178726');" style="">1511              // everything else that is to be bound normally (asynchronously).                                     </span>
<span class="-6685180061336045314" onmouseenter="enter('-6685180061336045314');" onmouseout="out('-6685180061336045314');" style="">1512              bindWorkspace(synchronousBindPage, false);                                                            </span>
<span class="6689685850222943783" onmouseenter="enter('6689685850222943783');" onmouseout="out('6689685850222943783');" style="">1513              // XXX: For now, continue posting the binding of AllApps as there are other issues that               </span>
<span class="-1574502332056641514" onmouseenter="enter('-1574502332056641514');" onmouseout="out('-1574502332056641514');" style="">1514              //      arise from that.                                                                              </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">1515              onlyBindAllApps();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1516          }                                                                                                         </span>
<span  style="">1517                                                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1518          public void run() {                                                                                       </span>
<span class="5752535899438246447" onmouseenter="enter('5752535899438246447');" onmouseout="out('5752535899438246447');" style="">1519              boolean isUpgrade = false;                                                                            </span>
<span  style="">1520                                                                                                                    </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1521              synchronized (mLock) {                                                                                </span>
<span class="4738665752688002399" onmouseenter="enter('4738665752688002399');" onmouseout="out('4738665752688002399');" style="">1522                  mIsLoaderTaskRunning = true;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1523              }                                                                                                     </span>
<span class="-1737494436521525410" onmouseenter="enter('-1737494436521525410');" onmouseout="out('-1737494436521525410');" style="">1524              // Optimize for end-user experience: if the Launcher is up and // running with the                    </span>
<span class="892988660615454533" onmouseenter="enter('892988660615454533');" onmouseout="out('892988660615454533');" style="">1525              // All Apps interface in the foreground, load All Apps first. Otherwise, load the                     </span>
<span class="-1944482210197593446" onmouseenter="enter('-1944482210197593446');" onmouseout="out('-1944482210197593446');" style="">1526              // workspace first (default).                                                                         </span>
<span class="-8128861992085659189" onmouseenter="enter('-8128861992085659189');" onmouseout="out('-8128861992085659189');" style="">1527              keep_running: {                                                                                       </span>
<span class="2293067736949718284" onmouseenter="enter('2293067736949718284');" onmouseout="out('2293067736949718284');" style="">1528                  // Elevate priority when Home launches for the first time to avoid                                </span>
<span class="-1381926741216219064" onmouseenter="enter('-1381926741216219064');" onmouseout="out('-1381926741216219064');" style="">1529                  // starving at boot time. Staring at a blank home is not cool.                                    </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1530                  synchronized (mLock) {                                                                            </span>
<span class="8946499537685848583" onmouseenter="enter('8946499537685848583');" onmouseout="out('8946499537685848583');" style="">1531                      if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to &quot; +                                 </span>
<span class="1787109731546912352" onmouseenter="enter('1787109731546912352');" onmouseout="out('1787109731546912352');" style="">1532                              (mIsLaunching ? &quot;DEFAULT&quot; : &quot;BACKGROUND&quot;));                                           </span>
<span class="-1912109441925598991" onmouseenter="enter('-1912109441925598991');" onmouseout="out('-1912109441925598991');" style="">1533                      android.os.Process.setThreadPriority(mIsLaunching                                             </span>
<span class="-5572949467661441178" onmouseenter="enter('-5572949467661441178');" onmouseout="out('-5572949467661441178');" style="">1534                              ? Process.THREAD_PRIORITY_DEFAULT : Process.THREAD_PRIORITY_BACKGROUND);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1535                  }                                                                                                 </span>
<span class="9220749004793568337" onmouseenter="enter('9220749004793568337');" onmouseout="out('9220749004793568337');" style="">1536                  if (DEBUG_LOADERS) Log.d(TAG, &quot;step 1: loading workspace&quot;);                                       </span>
<span class="8482653655407072483" onmouseenter="enter('8482653655407072483');" onmouseout="out('8482653655407072483');" style="">1537                  isUpgrade = loadAndBindWorkspace();                                                               </span>
<span  style="">1538                                                                                                                    </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1539                  if (mStopped) {                                                                                   </span>
<span class="-6818805659412975442" onmouseenter="enter('-6818805659412975442');" onmouseout="out('-6818805659412975442');" style="">1540                      break keep_running;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1541                  }                                                                                                 </span>
<span  style="">1542                                                                                                                    </span>
<span class="-5777092162251517407" onmouseenter="enter('-5777092162251517407');" onmouseout="out('-5777092162251517407');" style="">1543                  // Whew! Hard work done.  Slow us down, and wait until the UI thread has                          </span>
<span class="-4075896614387769686" onmouseenter="enter('-4075896614387769686');" onmouseout="out('-4075896614387769686');" style="">1544                  // settled down.                                                                                  </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1545                  synchronized (mLock) {                                                                            </span>
<span class="1926990202484285414" onmouseenter="enter('1926990202484285414');" onmouseout="out('1926990202484285414');" style="">1546                      if (mIsLaunching) {                                                                           </span>
<span class="-8046035155088057723" onmouseenter="enter('-8046035155088057723');" onmouseout="out('-8046035155088057723');" style="">1547                          if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to BACKGROUND&quot;);                   </span>
<span class="6194754511830950532" onmouseenter="enter('6194754511830950532');" onmouseout="out('6194754511830950532');" style="">1548                          android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1549                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1550                  }                                                                                                 </span>
<span class="2443484392604792624" onmouseenter="enter('2443484392604792624');" onmouseout="out('2443484392604792624');" style="">1551                  waitForIdle();                                                                                    </span>
<span  style="">1552                                                                                                                    </span>
<span class="1529750222663563109" onmouseenter="enter('1529750222663563109');" onmouseout="out('1529750222663563109');" style="">1553                  // second step                                                                                    </span>
<span class="4805812105190008803" onmouseenter="enter('4805812105190008803');" onmouseout="out('4805812105190008803');" style="">1554                  if (DEBUG_LOADERS) Log.d(TAG, &quot;step 2: loading all apps&quot;);                                        </span>
<span class="3758302759319518479" onmouseenter="enter('3758302759319518479');" onmouseout="out('3758302759319518479');" style="">1555                  loadAndBindAllApps();                                                                             </span>
<span  style="">1556                                                                                                                    </span>
<span class="4031538869478111" onmouseenter="enter('4031538869478111');" onmouseout="out('4031538869478111');" style="">1557                  // Restore the default thread priority after we are done loading items                            </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1558                  synchronized (mLock) {                                                                            </span>
<span class="6299511964324687923" onmouseenter="enter('6299511964324687923');" onmouseout="out('6299511964324687923');" style="">1559                      android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_DEFAULT);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1560                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1561              }                                                                                                     </span>
<span  style="">1562                                                                                                                    </span>
<span class="3508545587953199453" onmouseenter="enter('3508545587953199453');" onmouseout="out('3508545587953199453');" style="">1563              // Update the saved icons if necessary                                                                </span>
<span class="-4757805943857079956" onmouseenter="enter('-4757805943857079956');" onmouseout="out('-4757805943857079956');" style="">1564              if (DEBUG_LOADERS) Log.d(TAG, &quot;Comparing loaded icons to database icons&quot;);                            </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1565              synchronized (sBgLock) {                                                                              </span>
<span class="5900553346724410681" onmouseenter="enter('5900553346724410681');" onmouseout="out('5900553346724410681');" style="">1566                  for (Object key : sBgDbIconCache.keySet()) {                                                      </span>
<span class="404633043401473554" onmouseenter="enter('404633043401473554');" onmouseout="out('404633043401473554');" style="">1567                      updateSavedIcon(mContext, (ShortcutInfo) key, sBgDbIconCache.get(key));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1568                  }                                                                                                 </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1569                  sBgDbIconCache.clear();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1570              }                                                                                                     </span>
<span  style="">1571                                                                                                                    </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">1572              if (LauncherAppState.isDisableAllApps()) {                                                            </span>
<span class="6125270178763735331" onmouseenter="enter('6125270178763735331');" onmouseout="out('6125270178763735331');" style="">1573                  // Ensure that all the applications that are in the system are                                    </span>
<span class="305725628855266005" onmouseenter="enter('305725628855266005');" onmouseout="out('305725628855266005');" style="">1574                  // represented on the home screen.                                                                </span>
<span class="3562864863119627268" onmouseenter="enter('3562864863119627268');" onmouseout="out('3562864863119627268');" style="">1575                  if (!UPGRADE_USE_MORE_APPS_FOLDER || !isUpgrade) {                                                </span>
<span class="5095093339904195112" onmouseenter="enter('5095093339904195112');" onmouseout="out('5095093339904195112');" style="">1576                      verifyApplications();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1577                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1578              }                                                                                                     </span>
<span  style="">1579                                                                                                                    </span>
<span class="-745190257815883733" onmouseenter="enter('-745190257815883733');" onmouseout="out('-745190257815883733');" style="">1580              // Clear out this reference, otherwise we end up holding it until all of the                          </span>
<span class="4646172956484107396" onmouseenter="enter('4646172956484107396');" onmouseout="out('4646172956484107396');" style="">1581              // callback runnables are done.                                                                       </span>
<span class="-5116782011037529434" onmouseenter="enter('-5116782011037529434');" onmouseout="out('-5116782011037529434');" style="">1582              mContext = null;                                                                                      </span>
<span  style="">1583                                                                                                                    </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1584              synchronized (mLock) {                                                                                </span>
<span class="-2953553521466488464" onmouseenter="enter('-2953553521466488464');" onmouseout="out('-2953553521466488464');" style="">1585                  // If we are still the last one to be scheduled, remove ourselves.                                </span>
<span class="-1560897046285527036" onmouseenter="enter('-1560897046285527036');" onmouseout="out('-1560897046285527036');" style="">1586                  if (mLoaderTask == this) {                                                                        </span>
<span class="-8540970856372433004" onmouseenter="enter('-8540970856372433004');" onmouseout="out('-8540970856372433004');" style="">1587                      mLoaderTask = null;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1588                  }                                                                                                 </span>
<span class="8472658350888958885" onmouseenter="enter('8472658350888958885');" onmouseout="out('8472658350888958885');" style="">1589                  mIsLoaderTaskRunning = false;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1590              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1591          }                                                                                                         </span>
<span  style="">1592                                                                                                                    </span>
<span class="200135487053889456" onmouseenter="enter('200135487053889456');" onmouseout="out('200135487053889456');" style="">1593          public void stopLocked() {                                                                                </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1594              synchronized (LoaderTask.this) {                                                                      </span>
<span class="8214677179915027824" onmouseenter="enter('8214677179915027824');" onmouseout="out('8214677179915027824');" style="">1595                  mStopped = true;                                                                                  </span>
<span class="3056713147428312392" onmouseenter="enter('3056713147428312392');" onmouseout="out('3056713147428312392');" style="">1596                  this.notify();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1597              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1598          }                                                                                                         </span>
<span  style="">1599                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1600          /**                                                                                                       </span>
<span class="8543020973836575883" onmouseenter="enter('8543020973836575883');" onmouseout="out('8543020973836575883');" style="">1601           * Gets the callbacks object.  If we&#x27;ve been stopped, or if the launcher object                           </span>
<span class="-5710779889390340322" onmouseenter="enter('-5710779889390340322');" onmouseout="out('-5710779889390340322');" style="">1602           * has somehow been garbage collected, return null instead.  Pass in the Callbacks                        </span>
<span class="1695163395735776366" onmouseenter="enter('1695163395735776366');" onmouseout="out('1695163395735776366');" style="">1603           * object that was around when the deferred message was scheduled, and if there&#x27;s                         </span>
<span class="7856411153887025232" onmouseenter="enter('7856411153887025232');" onmouseout="out('7856411153887025232');" style="">1604           * a new Callbacks object around then also return null.  This will save us from                           </span>
<span class="2242983124447893975" onmouseenter="enter('2242983124447893975');" onmouseout="out('2242983124447893975');" style="">1605           * calling onto it with data that will be ignored.                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1606           */                                                                                                       </span>
<span class="-2719659093140206912" onmouseenter="enter('-2719659093140206912');" onmouseout="out('-2719659093140206912');" style="">1607          Callbacks tryGetCallbacks(Callbacks oldCallbacks) {                                                       </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1608              synchronized (mLock) {                                                                                </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1609                  if (mStopped) {                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1610                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1611                  }                                                                                                 </span>
<span  style="">1612                                                                                                                    </span>
<span class="-1148437149844317216" onmouseenter="enter('-1148437149844317216');" onmouseout="out('-1148437149844317216');" style="">1613                  if (mCallbacks == null) {                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1614                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1615                  }                                                                                                 </span>
<span  style="">1616                                                                                                                    </span>
<span class="4487336468213395696" onmouseenter="enter('4487336468213395696');" onmouseout="out('4487336468213395696');" style="">1617                  final Callbacks callbacks = mCallbacks.get();                                                     </span>
<span class="-1088473782403214817" onmouseenter="enter('-1088473782403214817');" onmouseout="out('-1088473782403214817');" style="">1618                  if (callbacks != oldCallbacks) {                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1619                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1620                  }                                                                                                 </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">1621                  if (callbacks == null) {                                                                          </span>
<span class="-94531209925935523" onmouseenter="enter('-94531209925935523');" onmouseout="out('-94531209925935523');" style="">1622                      Log.w(TAG, &quot;no mCallbacks&quot;);                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1623                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1624                  }                                                                                                 </span>
<span  style="">1625                                                                                                                    </span>
<span class="7316466478630645098" onmouseenter="enter('7316466478630645098');" onmouseout="out('7316466478630645098');" style="">1626                  return callbacks;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1627              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1628          }                                                                                                         </span>
<span  style="">1629                                                                                                                    </span>
<span class="-732845747997402687" onmouseenter="enter('-732845747997402687');" onmouseout="out('-732845747997402687');" style="">1630          private void verifyApplications() {                                                                       </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">1631              final Context context = mApp.getContext();                                                            </span>
<span  style="">1632                                                                                                                    </span>
<span class="-895975897487385508" onmouseenter="enter('-895975897487385508');" onmouseout="out('-895975897487385508');" style="">1633              // Cross reference all the applications in our apps list with items in the workspace                  </span>
<span class="-10165714367555844" onmouseenter="enter('-10165714367555844');" onmouseout="out('-10165714367555844');" style="">1634              ArrayList&lt;ItemInfo&gt; tmpInfos;                                                                         </span>
<span class="-1498611641211142735" onmouseenter="enter('-1498611641211142735');" onmouseout="out('-1498611641211142735');" style="">1635              ArrayList&lt;ItemInfo&gt; added = new ArrayList&lt;ItemInfo&gt;();                                                </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1636              synchronized (sBgLock) {                                                                              </span>
<span class="-8503045385813305184" onmouseenter="enter('-8503045385813305184');" onmouseout="out('-8503045385813305184');" style="">1637                  for (AppInfo app : mBgAllAppsList.data) {                                                         </span>
<span class="8719756079786944918" onmouseenter="enter('8719756079786944918');" onmouseout="out('8719756079786944918');" style="">1638                      tmpInfos = getItemInfoForComponentName(app.componentName);                                    </span>
<span class="2520781471180992241" onmouseenter="enter('2520781471180992241');" onmouseout="out('2520781471180992241');" style="">1639                      if (tmpInfos.isEmpty()) {                                                                     </span>
<span class="-8553694446545507920" onmouseenter="enter('-8553694446545507920');" onmouseout="out('-8553694446545507920');" style="">1640                          // We are missing an application icon, so add this to the workspace                       </span>
<span class="-4039639638749761552" onmouseenter="enter('-4039639638749761552');" onmouseout="out('-4039639638749761552');" style="">1641                          added.add(app);                                                                           </span>
<span class="-6087209586339664607" onmouseenter="enter('-6087209586339664607');" onmouseout="out('-6087209586339664607');" style="">1642                          // This is a rare event, so lets log it                                                   </span>
<span class="-8409193735080295855" onmouseenter="enter('-8409193735080295855');" onmouseout="out('-8409193735080295855');" style="">1643                          Log.e(TAG, &quot;Missing Application on load: &quot; + app);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1644                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1645                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1646              }                                                                                                     </span>
<span class="-3228275885243238792" onmouseenter="enter('-3228275885243238792');" onmouseout="out('-3228275885243238792');" style="">1647              if (!added.isEmpty()) {                                                                               </span>
<span class="-2532202186705808951" onmouseenter="enter('-2532202186705808951');" onmouseout="out('-2532202186705808951');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1648 -                addAndBindAddedWorkspaceApps(context, added);                                                     </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1649 +                Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                      </span>
<span class="-7750968314744672785" onmouseenter="enter('-7750968314744672785');" onmouseout="out('-7750968314744672785');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1650 +                addAndBindAddedApps(context, added, cb, new ArrayList&lt;AppInfo&gt;());                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1651              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1652          }                                                                                                         </span>
<span  style="">1653                                                                                                                    </span>
<span class="1799876722918383990" onmouseenter="enter('1799876722918383990');" onmouseout="out('1799876722918383990');" style="">1654          // check &amp; update map of what&#x27;s occupied; used to discard overlapping/invalid items                       </span>
<span class="1369641317894879083" onmouseenter="enter('1369641317894879083');" onmouseout="out('1369641317894879083');" style="">1655          private boolean checkItemPlacement(HashMap&lt;Long, ItemInfo[][]&gt; occupied, ItemInfo item,                   </span>
<span class="-1114457745240921120" onmouseenter="enter('-1114457745240921120');" onmouseout="out('-1114457745240921120');" style="">1656                                             AtomicBoolean deleteOnInvalidPlacement) {                              </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1657              LauncherAppState app = LauncherAppState.getInstance();                                                </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1658              DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                         </span>
<span class="2610967815704817337" onmouseenter="enter('2610967815704817337');" onmouseout="out('2610967815704817337');" style="">1659              final int countX = (int) grid.numColumns;                                                             </span>
<span class="-4666114634626787340" onmouseenter="enter('-4666114634626787340');" onmouseout="out('-4666114634626787340');" style="">1660              final int countY = (int) grid.numRows;                                                                </span>
<span  style="">1661                                                                                                                    </span>
<span class="6034161250987228772" onmouseenter="enter('6034161250987228772');" onmouseout="out('6034161250987228772');" style="">1662              long containerIndex = item.screenId;                                                                  </span>
<span class="-7373493273183889597" onmouseenter="enter('-7373493273183889597');" onmouseout="out('-7373493273183889597');" style="">1663              if (item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                 </span>
<span class="2673995963777381740" onmouseenter="enter('2673995963777381740');" onmouseout="out('2673995963777381740');" style="">1664                  // Return early if we detect that an item is under the hotseat button                             </span>
<span class="8439501161968406722" onmouseenter="enter('8439501161968406722');" onmouseout="out('8439501161968406722');" style="">1665                  if (mCallbacks == null ||                                                                         </span>
<span class="2765367117287235525" onmouseenter="enter('2765367117287235525');" onmouseout="out('2765367117287235525');" style="">1666                          mCallbacks.get().isAllAppsButtonRank((int) item.screenId)) {                              </span>
<span class="-5585792196891628830" onmouseenter="enter('-5585792196891628830');" onmouseout="out('-5585792196891628830');" style="">1667                      deleteOnInvalidPlacement.set(true);                                                           </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1668                      Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                                      </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1669                              + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;                         </span>
<span class="-6945266911057923165" onmouseenter="enter('-6945266911057923165');" onmouseout="out('-6945266911057923165');" style="">1670                              + item.cellY + &quot;) occupied by all apps&quot;);                                             </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1671                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1672                  }                                                                                                 </span>
<span  style="">1673                                                                                                                    </span>
<span class="1283283798458548935" onmouseenter="enter('1283283798458548935');" onmouseout="out('1283283798458548935');" style="">1674                  final ItemInfo[][] hotseatItems =                                                                 </span>
<span class="1949963606333422560" onmouseenter="enter('1949963606333422560');" onmouseout="out('1949963606333422560');" style="">1675                          occupied.get((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT);                        </span>
<span  style="">1676                                                                                                                    </span>
<span class="4306415300339150674" onmouseenter="enter('4306415300339150674');" onmouseout="out('4306415300339150674');" style="">1677                  if (item.screenId &gt;= grid.numHotseatIcons) {                                                      </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1678                      Log.e(TAG, &quot;Error loading shortcut &quot; + item                                                   </span>
<span class="5751503886607422325" onmouseenter="enter('5751503886607422325');" onmouseout="out('5751503886607422325');" style="">1679                              + &quot; into hotseat position &quot; + item.screenId                                           </span>
<span class="8586084608145250937" onmouseenter="enter('8586084608145250937');" onmouseout="out('8586084608145250937');" style="">1680                              + &quot;, position out of bounds: (0 to &quot; + (grid.numHotseatIcons - 1)                     </span>
<span class="4670108460576455524" onmouseenter="enter('4670108460576455524');" onmouseout="out('4670108460576455524');" style="">1681                              + &quot;)&quot;);                                                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1682                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1683                  }                                                                                                 </span>
<span  style="">1684                                                                                                                    </span>
<span class="-96711597696201103" onmouseenter="enter('-96711597696201103');" onmouseout="out('-96711597696201103');" style="">1685                  if (hotseatItems != null) {                                                                       </span>
<span class="-5719492878362044891" onmouseenter="enter('-5719492878362044891');" onmouseout="out('-5719492878362044891');" style="">1686                      if (hotseatItems[(int) item.screenId][0] != null) {                                           </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1687                          Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                                  </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1688                                  + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;                     </span>
<span class="-5608765342526697238" onmouseenter="enter('-5608765342526697238');" onmouseout="out('-5608765342526697238');" style="">1689                                  + item.cellY + &quot;) occupied by &quot;                                                   </span>
<span class="-9216450188742256868" onmouseenter="enter('-9216450188742256868');" onmouseout="out('-9216450188742256868');" style="">1690                                  + occupied.get(LauncherSettings.Favorites.CONTAINER_HOTSEAT)                      </span>
<span class="8078550196904492215" onmouseenter="enter('8078550196904492215');" onmouseout="out('8078550196904492215');" style="">1691                                  [(int) item.screenId][0]);                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1692                              return false;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1693                      } else {                                                                                      </span>
<span class="774944626646586019" onmouseenter="enter('774944626646586019');" onmouseout="out('774944626646586019');" style="">1694                          hotseatItems[(int) item.screenId][0] = item;                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1695                          return true;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1696                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1697                  } else {                                                                                          </span>
<span class="7358314474516221203" onmouseenter="enter('7358314474516221203');" onmouseout="out('7358314474516221203');" style="">1698                      final ItemInfo[][] items = new ItemInfo[(int) grid.numHotseatIcons][1];                       </span>
<span class="-9070162012537345427" onmouseenter="enter('-9070162012537345427');" onmouseout="out('-9070162012537345427');" style="">1699                      items[(int) item.screenId][0] = item;                                                         </span>
<span class="-8158366679753027651" onmouseenter="enter('-8158366679753027651');" onmouseout="out('-8158366679753027651');" style="">1700                      occupied.put((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT, items);                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1701                      return true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1702                  }                                                                                                 </span>
<span class="-303831338253138618" onmouseenter="enter('-303831338253138618');" onmouseout="out('-303831338253138618');" style="">1703              } else if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) {                          </span>
<span class="2023083187637338837" onmouseenter="enter('2023083187637338837');" onmouseout="out('2023083187637338837');" style="">1704                  // Skip further checking if it is not the hotseat or workspace container                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1705                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1706              }                                                                                                     </span>
<span  style="">1707                                                                                                                    </span>
<span class="4900594953050523912" onmouseenter="enter('4900594953050523912');" onmouseout="out('4900594953050523912');" style="">1708              if (!occupied.containsKey(item.screenId)) {                                                           </span>
<span class="4145930087010840378" onmouseenter="enter('4145930087010840378');" onmouseout="out('4145930087010840378');" style="">1709                  ItemInfo[][] items = new ItemInfo[countX + 1][countY + 1];                                        </span>
<span class="1227421706021504577" onmouseenter="enter('1227421706021504577');" onmouseout="out('1227421706021504577');" style="">1710                  occupied.put(item.screenId, items);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1711              }                                                                                                     </span>
<span  style="">1712                                                                                                                    </span>
<span class="1896300602190974138" onmouseenter="enter('1896300602190974138');" onmouseout="out('1896300602190974138');" style="">1713              final ItemInfo[][] screens = occupied.get(item.screenId);                                             </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">1714              if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                                 </span>
<span class="-5368423457014206987" onmouseenter="enter('-5368423457014206987');" onmouseout="out('-5368423457014206987');" style="">1715                      item.cellX &lt; 0 || item.cellY &lt; 0 ||                                                           </span>
<span class="-4742334469567284144" onmouseenter="enter('-4742334469567284144');" onmouseout="out('-4742334469567284144');" style="">1716                      item.cellX + item.spanX &gt; countX || item.cellY + item.spanY &gt; countY) {                       </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1717                  Log.e(TAG, &quot;Error loading shortcut &quot; + item                                                       </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1718                          + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                             </span>
<span class="6594976635866090975" onmouseenter="enter('6594976635866090975');" onmouseout="out('6594976635866090975');" style="">1719                          + item.cellX + &quot;,&quot; + item.cellY                                                           </span>
<span class="7810872796641797088" onmouseenter="enter('7810872796641797088');" onmouseout="out('7810872796641797088');" style="">1720                          + &quot;) out of screen bounds ( &quot; + countX + &quot;x&quot; + countY + &quot;)&quot;);                             </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1721                  return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1722              }                                                                                                     </span>
<span  style="">1723                                                                                                                    </span>
<span class="-5156128896960485993" onmouseenter="enter('-5156128896960485993');" onmouseout="out('-5156128896960485993');" style="">1724              // Check if any workspace icons overlap with each other                                               </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1725              for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                          </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1726                  for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                                      </span>
<span class="-6569355555223387047" onmouseenter="enter('-6569355555223387047');" onmouseout="out('-6569355555223387047');" style="">1727                      if (screens[x][y] != null) {                                                                  </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1728                          Log.e(TAG, &quot;Error loading shortcut &quot; + item                                               </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1729                              + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                         </span>
<span class="6817243246217428495" onmouseenter="enter('6817243246217428495');" onmouseout="out('6817243246217428495');" style="">1730                              + x + &quot;,&quot; + y                                                                         </span>
<span class="5682441617128381013" onmouseenter="enter('5682441617128381013');" onmouseout="out('5682441617128381013');" style="">1731                              + &quot;) occupied by &quot;                                                                    </span>
<span class="-1033476021967432581" onmouseenter="enter('-1033476021967432581');" onmouseout="out('-1033476021967432581');" style="">1732                              + screens[x][y]);                                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1733                          return false;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1734                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1735                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1736              }                                                                                                     </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1737              for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                          </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1738                  for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                                      </span>
<span class="4088526838574697064" onmouseenter="enter('4088526838574697064');" onmouseout="out('4088526838574697064');" style="">1739                      screens[x][y] = item;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1740                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1741              }                                                                                                     </span>
<span  style="">1742                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1743              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1744          }                                                                                                         </span>
<span  style="">1745                                                                                                                    </span>
<span class="-7185136003210132674" onmouseenter="enter('-7185136003210132674');" onmouseout="out('-7185136003210132674');" style="">1746          /** Clears all the sBg data structures */                                                                 </span>
<span class="1801132344752176061" onmouseenter="enter('1801132344752176061');" onmouseout="out('1801132344752176061');" style="">1747          private void clearSBgDataStructures() {                                                                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1748              synchronized (sBgLock) {                                                                              </span>
<span class="-7129433888089157992" onmouseenter="enter('-7129433888089157992');" onmouseout="out('-7129433888089157992');" style="">1749                  sBgWorkspaceItems.clear();                                                                        </span>
<span class="5052861278193385910" onmouseenter="enter('5052861278193385910');" onmouseout="out('5052861278193385910');" style="">1750                  sBgAppWidgets.clear();                                                                            </span>
<span class="3133219754838100126" onmouseenter="enter('3133219754838100126');" onmouseout="out('3133219754838100126');" style="">1751                  sBgFolders.clear();                                                                               </span>
<span class="-8505695193908377238" onmouseenter="enter('-8505695193908377238');" onmouseout="out('-8505695193908377238');" style="">1752                  sBgItemsIdMap.clear();                                                                            </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1753                  sBgDbIconCache.clear();                                                                           </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1754                  sBgWorkspaceScreens.clear();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1755              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1756          }                                                                                                         </span>
<span  style="">1757                                                                                                                    </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1758          /** Returns whether this is an upgrade path */                                                            </span>
<span class="-134197683999376379" onmouseenter="enter('-134197683999376379');" onmouseout="out('-134197683999376379');" style="">1759          private boolean loadWorkspace() {                                                                         </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1760              // Log to disk                                                                                        </span>
<span class="-1716174542198683127" onmouseenter="enter('-1716174542198683127');" onmouseout="out('-1716174542198683127');" style="">1761              Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspace()&quot;, true);                                         </span>
<span  style="">1762                                                                                                                    </span>
<span class="-1293377954506719064" onmouseenter="enter('-1293377954506719064');" onmouseout="out('-1293377954506719064');" style="">1763              final long t = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                                        </span>
<span  style="">1764                                                                                                                    </span>
<span class="-7540672363138308565" onmouseenter="enter('-7540672363138308565');" onmouseout="out('-7540672363138308565');" style="">1765              final Context context = mContext;                                                                     </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1766              final ContentResolver contentResolver = context.getContentResolver();                                 </span>
<span class="-2531056455834918617" onmouseenter="enter('-2531056455834918617');" onmouseout="out('-2531056455834918617');" style="">1767              final PackageManager manager = context.getPackageManager();                                           </span>
<span class="9164904653123292763" onmouseenter="enter('9164904653123292763');" onmouseout="out('9164904653123292763');" style="">1768              final AppWidgetManager widgets = AppWidgetManager.getInstance(context);                               </span>
<span class="-100432956626051671" onmouseenter="enter('-100432956626051671');" onmouseout="out('-100432956626051671');" style="">1769              final boolean isSafeMode = manager.isSafeMode();                                                      </span>
<span  style="">1770                                                                                                                    </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1771              LauncherAppState app = LauncherAppState.getInstance();                                                </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1772              DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                         </span>
<span class="-1268645472287944818" onmouseenter="enter('-1268645472287944818');" onmouseout="out('-1268645472287944818');" style="">1773              int countX = (int) grid.numColumns;                                                                   </span>
<span class="5825733578535079508" onmouseenter="enter('5825733578535079508');" onmouseout="out('5825733578535079508');" style="">1774              int countY = (int) grid.numRows;                                                                      </span>
<span  style="">1775                                                                                                                    </span>
<span class="4685154999280536885" onmouseenter="enter('4685154999280536885');" onmouseout="out('4685154999280536885');" style="">1776              if ((mFlags &amp; LOADER_FLAG_CLEAR_WORKSPACE) != 0) {                                                    </span>
<span class="1874866184467615023" onmouseenter="enter('1874866184467615023');" onmouseout="out('1874866184467615023');" style="">1777                  Launcher.addDumpLog(TAG, &quot;loadWorkspace: resetting launcher database&quot;, true);                     </span>
<span class="7130003991883838563" onmouseenter="enter('7130003991883838563');" onmouseout="out('7130003991883838563');" style="">1778                  LauncherAppState.getLauncherProvider().deleteDatabase();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1779              }                                                                                                     </span>
<span  style="">1780                                                                                                                    </span>
<span class="1786245758308608184" onmouseenter="enter('1786245758308608184');" onmouseout="out('1786245758308608184');" style="">1781              if ((mFlags &amp; LOADER_FLAG_MIGRATE_SHORTCUTS) != 0) {                                                  </span>
<span class="2622187273755861990" onmouseenter="enter('2622187273755861990');" onmouseout="out('2622187273755861990');" style="">1782                  // append the user&#x27;s Launcher2 shortcuts                                                          </span>
<span class="7991450201866933364" onmouseenter="enter('7991450201866933364');" onmouseout="out('7991450201866933364');" style="">1783                  Launcher.addDumpLog(TAG, &quot;loadWorkspace: migrating from launcher2&quot;, true);                        </span>
<span class="-4928149528895358870" onmouseenter="enter('-4928149528895358870');" onmouseout="out('-4928149528895358870');" style="">1784                  LauncherAppState.getLauncherProvider().migrateLauncher2Shortcuts();                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1785              } else {                                                                                              </span>
<span class="-6772917437561183819" onmouseenter="enter('-6772917437561183819');" onmouseout="out('-6772917437561183819');" style="">1786                  // Make sure the default workspace is loaded                                                      </span>
<span class="3161347234478650527" onmouseenter="enter('3161347234478650527');" onmouseout="out('3161347234478650527');" style="">1787                  Launcher.addDumpLog(TAG, &quot;loadWorkspace: loading default favorites&quot;, false);                      </span>
<span class="8096870978202898311" onmouseenter="enter('8096870978202898311');" onmouseout="out('8096870978202898311');" style="">1788                  LauncherAppState.getLauncherProvider().loadDefaultFavoritesIfNecessary(0);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1789              }                                                                                                     </span>
<span  style="">1790                                                                                                                    </span>
<span class="-8222313360488017709" onmouseenter="enter('-8222313360488017709');" onmouseout="out('-8222313360488017709');" style="">1791              // Check if we need to do any upgrade-path logic                                                      </span>
<span class="-995379543715394793" onmouseenter="enter('-995379543715394793');" onmouseout="out('-995379543715394793');" style="">1792              // (Includes having just imported default favorites)                                                  </span>
<span class="-2313666044770114963" onmouseenter="enter('-2313666044770114963');" onmouseout="out('-2313666044770114963');" style="">1793              boolean loadedOldDb = LauncherAppState.getLauncherProvider().justLoadedOldDb();                       </span>
<span  style="">1794                                                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1795              // Log to disk                                                                                        </span>
<span class="4915608034810943289" onmouseenter="enter('4915608034810943289');" onmouseout="out('4915608034810943289');" style="">1796              Launcher.addDumpLog(TAG, &quot;11683562 -   loadedOldDb: &quot; + loadedOldDb, true);                           </span>
<span  style="">1797                                                                                                                    </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1798              synchronized (sBgLock) {                                                                              </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">1799                  clearSBgDataStructures();                                                                         </span>
<span  style="">1800                                                                                                                    </span>
<span class="4830013596372552761" onmouseenter="enter('4830013596372552761');" onmouseout="out('4830013596372552761');" style="">1801                  final ArrayList&lt;Long&gt; itemsToRemove = new ArrayList&lt;Long&gt;();                                      </span>
<span class="-771425693233218078" onmouseenter="enter('-771425693233218078');" onmouseout="out('-771425693233218078');" style="">1802                  final ArrayList&lt;Long&gt; restoredRows = new ArrayList&lt;Long&gt;();                                       </span>
<span class="1337367669825309510" onmouseenter="enter('1337367669825309510');" onmouseout="out('1337367669825309510');" style="">1803                  final Uri contentUri = LauncherSettings.Favorites.CONTENT_URI;                                    </span>
<span class="6883183902805060832" onmouseenter="enter('6883183902805060832');" onmouseout="out('6883183902805060832');" style="">1804                  if (DEBUG_LOADERS) Log.d(TAG, &quot;loading model from &quot; + contentUri);                                </span>
<span class="4124323585340312806" onmouseenter="enter('4124323585340312806');" onmouseout="out('4124323585340312806');" style="">1805                  final Cursor c = contentResolver.query(contentUri, null, null, null, null);                       </span>
<span  style="">1806                                                                                                                    </span>
<span class="-6846195559440228008" onmouseenter="enter('-6846195559440228008');" onmouseout="out('-6846195559440228008');" style="">1807                  // +1 for the hotseat (it can be larger than the workspace)                                       </span>
<span class="-6570434370371395868" onmouseenter="enter('-6570434370371395868');" onmouseout="out('-6570434370371395868');" style="">1808                  // Load workspace in reverse order to ensure that latest items are loaded first (and              </span>
<span class="-2496742724026288329" onmouseenter="enter('-2496742724026288329');" onmouseout="out('-2496742724026288329');" style="">1809                  // before any earlier duplicates)                                                                 </span>
<span class="-575539041300461201" onmouseenter="enter('-575539041300461201');" onmouseout="out('-575539041300461201');" style="">1810                  final HashMap&lt;Long, ItemInfo[][]&gt; occupied = new HashMap&lt;Long, ItemInfo[][]&gt;();                   </span>
<span  style="">1811                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1812                  try {                                                                                             </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style="">1813                      final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);                  </span>
<span class="498695732843703978" onmouseenter="enter('498695732843703978');" onmouseout="out('498695732843703978');" style="">1814                      final int intentIndex = c.getColumnIndexOrThrow                                               </span>
<span class="-2710863683168773760" onmouseenter="enter('-2710863683168773760');" onmouseout="out('-2710863683168773760');" style="">1815                              (LauncherSettings.Favorites.INTENT);                                                  </span>
<span class="3135911520873448784" onmouseenter="enter('3135911520873448784');" onmouseout="out('3135911520873448784');" style="">1816                      final int titleIndex = c.getColumnIndexOrThrow                                                </span>
<span class="-7080768452290664563" onmouseenter="enter('-7080768452290664563');" onmouseout="out('-7080768452290664563');" style="">1817                              (LauncherSettings.Favorites.TITLE);                                                   </span>
<span class="-4350901823494792660" onmouseenter="enter('-4350901823494792660');" onmouseout="out('-4350901823494792660');" style="">1818                      final int iconTypeIndex = c.getColumnIndexOrThrow(                                            </span>
<span class="3108347623629035166" onmouseenter="enter('3108347623629035166');" onmouseout="out('3108347623629035166');" style="">1819                              LauncherSettings.Favorites.ICON_TYPE);                                                </span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style="">1820                      final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);               </span>
<span class="-3909234361304575452" onmouseenter="enter('-3909234361304575452');" onmouseout="out('-3909234361304575452');" style="">1821                      final int iconPackageIndex = c.getColumnIndexOrThrow(                                         </span>
<span class="-6787190495105525864" onmouseenter="enter('-6787190495105525864');" onmouseout="out('-6787190495105525864');" style="">1822                              LauncherSettings.Favorites.ICON_PACKAGE);                                             </span>
<span class="7790246664646081463" onmouseenter="enter('7790246664646081463');" onmouseout="out('7790246664646081463');" style="">1823                      final int iconResourceIndex = c.getColumnIndexOrThrow(                                        </span>
<span class="-1781116612765105159" onmouseenter="enter('-1781116612765105159');" onmouseout="out('-1781116612765105159');" style="">1824                              LauncherSettings.Favorites.ICON_RESOURCE);                                            </span>
<span class="3335971636920715852" onmouseenter="enter('3335971636920715852');" onmouseout="out('3335971636920715852');" style="">1825                      final int containerIndex = c.getColumnIndexOrThrow(                                           </span>
<span class="6570903028117113418" onmouseenter="enter('6570903028117113418');" onmouseout="out('6570903028117113418');" style="">1826                              LauncherSettings.Favorites.CONTAINER);                                                </span>
<span class="-8309152441179821869" onmouseenter="enter('-8309152441179821869');" onmouseout="out('-8309152441179821869');" style="">1827                      final int itemTypeIndex = c.getColumnIndexOrThrow(                                            </span>
<span class="7255885825914282267" onmouseenter="enter('7255885825914282267');" onmouseout="out('7255885825914282267');" style="">1828                              LauncherSettings.Favorites.ITEM_TYPE);                                                </span>
<span class="-9034335384452522965" onmouseenter="enter('-9034335384452522965');" onmouseout="out('-9034335384452522965');" style="">1829                      final int appWidgetIdIndex = c.getColumnIndexOrThrow(                                         </span>
<span class="6807201781176448908" onmouseenter="enter('6807201781176448908');" onmouseout="out('6807201781176448908');" style="">1830                              LauncherSettings.Favorites.APPWIDGET_ID);                                             </span>
<span class="-6125671603078297888" onmouseenter="enter('-6125671603078297888');" onmouseout="out('-6125671603078297888');" style="">1831                      final int appWidgetProviderIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="4426033877353236522" onmouseenter="enter('4426033877353236522');" onmouseout="out('4426033877353236522');" style="">1832                              LauncherSettings.Favorites.APPWIDGET_PROVIDER);                                       </span>
<span class="-3079236723582024955" onmouseenter="enter('-3079236723582024955');" onmouseout="out('-3079236723582024955');" style="">1833                      final int screenIndex = c.getColumnIndexOrThrow(                                              </span>
<span class="-6667712815858132414" onmouseenter="enter('-6667712815858132414');" onmouseout="out('-6667712815858132414');" style="">1834                              LauncherSettings.Favorites.SCREEN);                                                   </span>
<span class="-6867547874094352828" onmouseenter="enter('-6867547874094352828');" onmouseout="out('-6867547874094352828');" style="">1835                      final int cellXIndex = c.getColumnIndexOrThrow                                                </span>
<span class="5262774206366152748" onmouseenter="enter('5262774206366152748');" onmouseout="out('5262774206366152748');" style="">1836                              (LauncherSettings.Favorites.CELLX);                                                   </span>
<span class="8831781951312982826" onmouseenter="enter('8831781951312982826');" onmouseout="out('8831781951312982826');" style="">1837                      final int cellYIndex = c.getColumnIndexOrThrow                                                </span>
<span class="-5037082342925021952" onmouseenter="enter('-5037082342925021952');" onmouseout="out('-5037082342925021952');" style="">1838                              (LauncherSettings.Favorites.CELLY);                                                   </span>
<span class="4727532435646923125" onmouseenter="enter('4727532435646923125');" onmouseout="out('4727532435646923125');" style="">1839                      final int spanXIndex = c.getColumnIndexOrThrow                                                </span>
<span class="-4661771410814353054" onmouseenter="enter('-4661771410814353054');" onmouseout="out('-4661771410814353054');" style="">1840                              (LauncherSettings.Favorites.SPANX);                                                   </span>
<span class="-2910068933310438864" onmouseenter="enter('-2910068933310438864');" onmouseout="out('-2910068933310438864');" style="">1841                      final int spanYIndex = c.getColumnIndexOrThrow(                                               </span>
<span class="99270330838913893" onmouseenter="enter('99270330838913893');" onmouseout="out('99270330838913893');" style="">1842                              LauncherSettings.Favorites.SPANY);                                                    </span>
<span class="4436227568732015168" onmouseenter="enter('4436227568732015168');" onmouseout="out('4436227568732015168');" style="">1843                      final int restoredIndex = c.getColumnIndexOrThrow(                                            </span>
<span class="6353272533239034373" onmouseenter="enter('6353272533239034373');" onmouseout="out('6353272533239034373');" style="">1844                              LauncherSettings.Favorites.RESTORED);                                                 </span>
<span class="4456964937873623262" onmouseenter="enter('4456964937873623262');" onmouseout="out('4456964937873623262');" style="">1845                      //final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);               </span>
<span class="2905983584052764586" onmouseenter="enter('2905983584052764586');" onmouseout="out('2905983584052764586');" style="">1846                      //final int displayModeIndex = c.getColumnIndexOrThrow(                                       </span>
<span class="-8556687182597342656" onmouseenter="enter('-8556687182597342656');" onmouseout="out('-8556687182597342656');" style="">1847                      //        LauncherSettings.Favorites.DISPLAY_MODE);                                           </span>
<span  style="">1848                                                                                                                    </span>
<span class="-6687913296565100881" onmouseenter="enter('-6687913296565100881');" onmouseout="out('-6687913296565100881');" style="">1849                      ShortcutInfo info;                                                                            </span>
<span class="-4294155297126257121" onmouseenter="enter('-4294155297126257121');" onmouseout="out('-4294155297126257121');" style="">1850                      String intentDescription;                                                                     </span>
<span class="1875374791140575019" onmouseenter="enter('1875374791140575019');" onmouseout="out('1875374791140575019');" style="">1851                      LauncherAppWidgetInfo appWidgetInfo;                                                          </span>
<span class="-7299509265635558160" onmouseenter="enter('-7299509265635558160');" onmouseout="out('-7299509265635558160');" style="">1852                      int container;                                                                                </span>
<span class="3268793718289878117" onmouseenter="enter('3268793718289878117');" onmouseout="out('3268793718289878117');" style="">1853                      long id;                                                                                      </span>
<span class="-7461708883398711413" onmouseenter="enter('-7461708883398711413');" onmouseout="out('-7461708883398711413');" style="">1854                      Intent intent;                                                                                </span>
<span  style="">1855                                                                                                                    </span>
<span class="1538645125823697533" onmouseenter="enter('1538645125823697533');" onmouseout="out('1538645125823697533');" style="">1856                      while (!mStopped &amp;&amp; c.moveToNext()) {                                                         </span>
<span class="-3056870665611820276" onmouseenter="enter('-3056870665611820276');" onmouseout="out('-3056870665611820276');" style="">1857                          AtomicBoolean deleteOnInvalidPlacement = new AtomicBoolean(false);                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1858                          try {                                                                                     </span>
<span class="-4443967809239824632" onmouseenter="enter('-4443967809239824632');" onmouseout="out('-4443967809239824632');" style="">1859                              int itemType = c.getInt(itemTypeIndex);                                               </span>
<span class="7426878920983746504" onmouseenter="enter('7426878920983746504');" onmouseout="out('7426878920983746504');" style="">1860                              boolean restored = 0 != c.getInt(restoredIndex);                                      </span>
<span  style="">1861                                                                                                                    </span>
<span class="-5665081285487591411" onmouseenter="enter('-5665081285487591411');" onmouseout="out('-5665081285487591411');" style="">1862                              switch (itemType) {                                                                   </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1863                              case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1864                              case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                   </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1865                                  id = c.getLong(idIndex);                                                          </span>
<span class="8199742400390876563" onmouseenter="enter('8199742400390876563');" onmouseout="out('8199742400390876563');" style="">1866                                  intentDescription = c.getString(intentIndex);                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1867                                  try {                                                                             </span>
<span class="-1059471947143689601" onmouseenter="enter('-1059471947143689601');" onmouseout="out('-1059471947143689601');" style="">1868                                      intent = Intent.parseUri(intentDescription, 0);                               </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style="">1869                                      ComponentName cn = intent.getComponent();                                     </span>
<span class="6294222122453554998" onmouseenter="enter('6294222122453554998');" onmouseout="out('6294222122453554998');" style="">1870                                      if (cn != null &amp;&amp; !isValidPackageComponent(manager, cn)) {                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1871                                          if (restored) {                                                           </span>
<span class="-4075692845887634995" onmouseenter="enter('-4075692845887634995');" onmouseout="out('-4075692845887634995');" style="">1872                                              // might be installed later                                           </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1873                                              Launcher.addDumpLog(TAG,                                              </span>
<span class="1853248294024116603" onmouseenter="enter('1853248294024116603');" onmouseout="out('1853248294024116603');" style="">1874                                                      &quot;package not yet restored: &quot; + cn, true);                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1875                                          } else {                                                                  </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">1876                                              if (!mAppsCanBeOnRemoveableStorage) {                                 </span>
<span class="-1319340498640723993" onmouseenter="enter('-1319340498640723993');" onmouseout="out('-1319340498640723993');" style="">1877                                                  // Log the invalid package, and remove it                         </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1878                                                  Launcher.addDumpLog(TAG,                                          </span>
<span class="556389557067898835" onmouseenter="enter('556389557067898835');" onmouseout="out('556389557067898835');" style="">1879                                                          &quot;Invalid package removed: &quot; + cn, true);                  </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1880                                                  itemsToRemove.add(id);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1881                                              } else {                                                              </span>
<span class="1135766729630553535" onmouseenter="enter('1135766729630553535');" onmouseout="out('1135766729630553535');" style="">1882                                                  // If apps can be on external storage, then we just               </span>
<span class="5840340868837727294" onmouseenter="enter('5840340868837727294');" onmouseout="out('5840340868837727294');" style="">1883                                                  // leave them for the user to remove (maybe add                   </span>
<span class="1838795663890338817" onmouseenter="enter('1838795663890338817');" onmouseout="out('1838795663890338817');" style="">1884                                                  // visual treatment to it)                                        </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1885                                                  Launcher.addDumpLog(TAG,                                          </span>
<span class="2228900775203516519" onmouseenter="enter('2228900775203516519');" onmouseout="out('2228900775203516519');" style="">1886                                                          &quot;Invalid package found: &quot; + cn, true);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1887                                              }                                                                     </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1888                                              continue;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1889                                          }                                                                         </span>
<span class="8327580054957946681" onmouseenter="enter('8327580054957946681');" onmouseout="out('8327580054957946681');" style="">1890                                      } else if (restored) {                                                        </span>
<span class="-9024381775763282363" onmouseenter="enter('-9024381775763282363');" onmouseout="out('-9024381775763282363');" style="">1891                                          // no special handling necessary for this restored item                   </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">1892                                          restoredRows.add(id);                                                     </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">1893                                          restored = false;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1894                                      }                                                                             </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">1895                                  } catch (URISyntaxException e) {                                                  </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1896                                      Launcher.addDumpLog(TAG,                                                      </span>
<span class="-68540878136764174" onmouseenter="enter('-68540878136764174');" onmouseout="out('-68540878136764174');" style="">1897                                              &quot;Invalid uri: &quot; + intentDescription, true);                           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1898                                      continue;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1899                                  }                                                                                 </span>
<span  style="">1900                                                                                                                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1901                                  if (restored) {                                                                   </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1902                                      Launcher.addDumpLog(TAG,                                                      </span>
<span class="-7520999071046454576" onmouseenter="enter('-7520999071046454576');" onmouseout="out('-7520999071046454576');" style="">1903                                              &quot;constructing info for partially restored package&quot;,                   </span>
<span class="-159362617709534437" onmouseenter="enter('-159362617709534437');" onmouseout="out('-159362617709534437');" style="">1904                                              true);                                                                </span>
<span class="6247116724061363734" onmouseenter="enter('6247116724061363734');" onmouseout="out('6247116724061363734');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1905 -                                    info = getRestoredItemInfo(c, titleIndex, intent);                            </span>
<span class="2209760928415101992" onmouseenter="enter('2209760928415101992');" onmouseout="out('2209760928415101992');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1906 +                                    info = getRestoredItemInfo(c, titleIndex);                                    </span>
<span class="1789530273111871261" onmouseenter="enter('1789530273111871261');" onmouseout="out('1789530273111871261');" style="">1907                                      intent = getRestoredItemIntent(c, context, intent);                           </span>
<span class="2485815571182318046" onmouseenter="enter('2485815571182318046');" onmouseout="out('2485815571182318046');" style="">1908                                  } else if (itemType ==                                                            </span>
<span class="2369871960694556087" onmouseenter="enter('2369871960694556087');" onmouseout="out('2369871960694556087');" style="">1909                                          LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) {                       </span>
<span class="8194872455546731015" onmouseenter="enter('8194872455546731015');" onmouseout="out('8194872455546731015');" style="">1910                                      info = getShortcutInfo(manager, intent, context, c, iconIndex,                </span>
<span class="-2187398528357571993" onmouseenter="enter('-2187398528357571993');" onmouseout="out('-2187398528357571993');" style="">1911                                              titleIndex, mLabelCache);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1912                                  } else {                                                                          </span>
<span class="-7258494880704199189" onmouseenter="enter('-7258494880704199189');" onmouseout="out('-7258494880704199189');" style="">1913                                      info = getShortcutInfo(c, context, iconTypeIndex,                             </span>
<span class="6962748064109777554" onmouseenter="enter('6962748064109777554');" onmouseout="out('6962748064109777554');" style="">1914                                              iconPackageIndex, iconResourceIndex, iconIndex,                       </span>
<span class="-1562426884587851404" onmouseenter="enter('-1562426884587851404');" onmouseout="out('-1562426884587851404');" style="">1915                                              titleIndex);                                                          </span>
<span  style="">1916                                                                                                                    </span>
<span class="8787316375412349400" onmouseenter="enter('8787316375412349400');" onmouseout="out('8787316375412349400');" style="">1917                                      // App shortcuts that used to be automatically added to Launcher              </span>
<span class="4423348586531939182" onmouseenter="enter('4423348586531939182');" onmouseout="out('4423348586531939182');" style="">1918                                      // didn&#x27;t always have the correct intent flags set, so do that                </span>
<span class="906874877447394391" onmouseenter="enter('906874877447394391');" onmouseout="out('906874877447394391');" style="">1919                                      // here                                                                       </span>
<span class="-8302893811746412301" onmouseenter="enter('-8302893811746412301');" onmouseout="out('-8302893811746412301');" style="">1920                                      if (intent.getAction() != null &amp;&amp;                                             </span>
<span class="-6792431597223839871" onmouseenter="enter('-6792431597223839871');" onmouseout="out('-6792431597223839871');" style="">1921                                          intent.getCategories() != null &amp;&amp;                                         </span>
<span class="-4482526573741019726" onmouseenter="enter('-4482526573741019726');" onmouseout="out('-4482526573741019726');" style="">1922                                          intent.getAction().equals(Intent.ACTION_MAIN) &amp;&amp;                          </span>
<span class="8802373298636081036" onmouseenter="enter('8802373298636081036');" onmouseout="out('8802373298636081036');" style="">1923                                          intent.getCategories().contains(Intent.CATEGORY_LAUNCHER)) {              </span>
<span class="-1437204964726011747" onmouseenter="enter('-1437204964726011747');" onmouseout="out('-1437204964726011747');" style="">1924                                          intent.addFlags(                                                          </span>
<span class="7533444403523837279" onmouseenter="enter('7533444403523837279');" onmouseout="out('7533444403523837279');" style="">1925                                              Intent.FLAG_ACTIVITY_NEW_TASK |                                       </span>
<span class="754211306232040187" onmouseenter="enter('754211306232040187');" onmouseout="out('754211306232040187');" style="">1926                                              Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1927                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1928                                  }                                                                                 </span>
<span  style="">1929                                                                                                                    </span>
<span class="-1845287058566655413" onmouseenter="enter('-1845287058566655413');" onmouseout="out('-1845287058566655413');" style="">1930                                  if (info != null) {                                                               </span>
<span class="-7372776081672801393" onmouseenter="enter('-7372776081672801393');" onmouseout="out('-7372776081672801393');" style="">1931                                      info.id = id;                                                                 </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">1932                                      info.intent = intent;                                                         </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">1933                                      container = c.getInt(containerIndex);                                         </span>
<span class="5031599210604047094" onmouseenter="enter('5031599210604047094');" onmouseout="out('5031599210604047094');" style="">1934                                      info.container = container;                                                   </span>
<span class="8385513109144822406" onmouseenter="enter('8385513109144822406');" onmouseout="out('8385513109144822406');" style="">1935                                      info.screenId = c.getInt(screenIndex);                                        </span>
<span class="8733666235794055799" onmouseenter="enter('8733666235794055799');" onmouseout="out('8733666235794055799');" style="">1936                                      info.cellX = c.getInt(cellXIndex);                                            </span>
<span class="4988345900238836581" onmouseenter="enter('4988345900238836581');" onmouseout="out('4988345900238836581');" style="">1937                                      info.cellY = c.getInt(cellYIndex);                                            </span>
<span class="6314319831626461685" onmouseenter="enter('6314319831626461685');" onmouseout="out('6314319831626461685');" style="">1938                                      info.spanX = 1;                                                               </span>
<span class="-7635592400178984643" onmouseenter="enter('-7635592400178984643');" onmouseout="out('-7635592400178984643');" style="">1939                                      info.spanY = 1;                                                               </span>
<span  style="">1940                                                                                                                    </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">1941                                      // check &amp; update map of what&#x27;s occupied                                      </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">1942                                      deleteOnInvalidPlacement.set(false);                                          </span>
<span class="8488570468437690238" onmouseenter="enter('8488570468437690238');" onmouseout="out('8488570468437690238');" style="">1943                                      if (!checkItemPlacement(occupied, info, deleteOnInvalidPlacement)) {          </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">1944                                          if (deleteOnInvalidPlacement.get()) {                                     </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1945                                              itemsToRemove.add(id);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1946                                          }                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1947                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1948                                      }                                                                             </span>
<span  style="">1949                                                                                                                    </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">1950                                      switch (container) {                                                          </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">1951                                      case LauncherSettings.Favorites.CONTAINER_DESKTOP:                            </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">1952                                      case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                            </span>
<span class="-3665356032627215639" onmouseenter="enter('-3665356032627215639');" onmouseout="out('-3665356032627215639');" style="">1953                                          sBgWorkspaceItems.add(info);                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1954                                          break;                                                                    </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">1955                                      default:                                                                      </span>
<span class="3928258456344537563" onmouseenter="enter('3928258456344537563');" onmouseout="out('3928258456344537563');" style="">1956                                          // Item is in a user folder                                               </span>
<span class="7253808449036323039" onmouseenter="enter('7253808449036323039');" onmouseout="out('7253808449036323039');" style="">1957                                          FolderInfo folderInfo =                                                   </span>
<span class="5827700611550420594" onmouseenter="enter('5827700611550420594');" onmouseout="out('5827700611550420594');" style="">1958                                                  findOrMakeFolder(sBgFolders, container);                          </span>
<span class="4210631970925384436" onmouseenter="enter('4210631970925384436');" onmouseout="out('4210631970925384436');" style="">1959                                          folderInfo.add(info);                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1960                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1961                                      }                                                                             </span>
<span class="-3593974647070903374" onmouseenter="enter('-3593974647070903374');" onmouseout="out('-3593974647070903374');" style="">1962                                      sBgItemsIdMap.put(info.id, info);                                             </span>
<span  style="">1963                                                                                                                    </span>
<span class="-8292894264257510493" onmouseenter="enter('-8292894264257510493');" onmouseout="out('-8292894264257510493');" style="">1964                                      // now that we&#x27;ve loaded everthing re-save it with the                        </span>
<span class="-1917607236140731811" onmouseenter="enter('-1917607236140731811');" onmouseout="out('-1917607236140731811');" style="">1965                                      // icon in case it disappears somehow.                                        </span>
<span class="-3056528193758781985" onmouseenter="enter('-3056528193758781985');" onmouseout="out('-3056528193758781985');" style="">1966                                      queueIconToBeChecked(sBgDbIconCache, info, c, iconIndex);                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1967                                  } else {                                                                          </span>
<span class="477637279977673890" onmouseenter="enter('477637279977673890');" onmouseout="out('477637279977673890');" style="">1968                                      throw new RuntimeException(&quot;Unexpected null ShortcutInfo&quot;);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1969                                  }                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1970                                  break;                                                                            </span>
<span  style="">1971                                                                                                                    </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1972                              case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                     </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1973                                  id = c.getLong(idIndex);                                                          </span>
<span class="-711784092642716417" onmouseenter="enter('-711784092642716417');" onmouseout="out('-711784092642716417');" style="">1974                                  FolderInfo folderInfo = findOrMakeFolder(sBgFolders, id);                         </span>
<span  style="">1975                                                                                                                    </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style="">1976                                  folderInfo.title = c.getString(titleIndex);                                       </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style="">1977                                  folderInfo.id = id;                                                               </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">1978                                  container = c.getInt(containerIndex);                                             </span>
<span class="-7029361904102133577" onmouseenter="enter('-7029361904102133577');" onmouseout="out('-7029361904102133577');" style="">1979                                  folderInfo.container = container;                                                 </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style="">1980                                  folderInfo.screenId = c.getInt(screenIndex);                                      </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style="">1981                                  folderInfo.cellX = c.getInt(cellXIndex);                                          </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style="">1982                                  folderInfo.cellY = c.getInt(cellYIndex);                                          </span>
<span class="5610283855861400391" onmouseenter="enter('5610283855861400391');" onmouseout="out('5610283855861400391');" style="">1983                                  folderInfo.spanX = 1;                                                             </span>
<span class="-3495026741287589829" onmouseenter="enter('-3495026741287589829');" onmouseout="out('-3495026741287589829');" style="">1984                                  folderInfo.spanY = 1;                                                             </span>
<span  style="">1985                                                                                                                    </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">1986                                  // check &amp; update map of what&#x27;s occupied                                          </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">1987                                  deleteOnInvalidPlacement.set(false);                                              </span>
<span class="-7285209150210174951" onmouseenter="enter('-7285209150210174951');" onmouseout="out('-7285209150210174951');" style="">1988                                  if (!checkItemPlacement(occupied, folderInfo,                                     </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">1989                                          deleteOnInvalidPlacement)) {                                              </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">1990                                      if (deleteOnInvalidPlacement.get()) {                                         </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1991                                          itemsToRemove.add(id);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1992                                      }                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1993                                      break;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1994                                  }                                                                                 </span>
<span  style="">1995                                                                                                                    </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">1996                                  switch (container) {                                                              </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">1997                                      case LauncherSettings.Favorites.CONTAINER_DESKTOP:                            </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">1998                                      case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                            </span>
<span class="-8699935089398023363" onmouseenter="enter('-8699935089398023363');" onmouseout="out('-8699935089398023363');" style="">1999                                          sBgWorkspaceItems.add(folderInfo);                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2000                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2001                                  }                                                                                 </span>
<span  style="">2002                                                                                                                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">2003                                  if (restored) {                                                                   </span>
<span class="-4442362781295313201" onmouseenter="enter('-4442362781295313201');" onmouseout="out('-4442362781295313201');" style="">2004                                      // no special handling required for restored folders                          </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">2005                                      restoredRows.add(id);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2006                                  }                                                                                 </span>
<span  style="">2007                                                                                                                    </span>
<span class="-3375208674862622715" onmouseenter="enter('-3375208674862622715');" onmouseout="out('-3375208674862622715');" style="">2008                                  sBgItemsIdMap.put(folderInfo.id, folderInfo);                                     </span>
<span class="642717865586237287" onmouseenter="enter('642717865586237287');" onmouseout="out('642717865586237287');" style="">2009                                  sBgFolders.put(folderInfo.id, folderInfo);                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2010                                  break;                                                                            </span>
<span  style="">2011                                                                                                                    </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">2012                              case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                                  </span>
<span class="-7956270215965694003" onmouseenter="enter('-7956270215965694003');" onmouseout="out('-7956270215965694003');" style="">2013                                  // Read all Launcher-specific widget details                                      </span>
<span class="-1812352292626846958" onmouseenter="enter('-1812352292626846958');" onmouseout="out('-1812352292626846958');" style="">2014                                  int appWidgetId = c.getInt(appWidgetIdIndex);                                     </span>
<span class="7731617805561144619" onmouseenter="enter('7731617805561144619');" onmouseout="out('7731617805561144619');" style="">2015                                  String savedProvider = c.getString(appWidgetProviderIndex);                       </span>
<span  style="">2016                                                                                                                    </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2017                                  id = c.getLong(idIndex);                                                          </span>
<span  style="">2018                                                                                                                    </span>
<span class="-94114412789236238" onmouseenter="enter('-94114412789236238');" onmouseout="out('-94114412789236238');" style="">2019                                  final AppWidgetProviderInfo provider =                                            </span>
<span class="1226551708060925883" onmouseenter="enter('1226551708060925883');" onmouseout="out('1226551708060925883');" style="">2020                                          widgets.getAppWidgetInfo(appWidgetId);                                    </span>
<span  style="">2021                                                                                                                    </span>
<span class="-3663768974834964011" onmouseenter="enter('-3663768974834964011');" onmouseout="out('-3663768974834964011');" style="">2022                                  if (!isSafeMode &amp;&amp; (provider == null || provider.provider == null ||              </span>
<span class="5896854251752877894" onmouseenter="enter('5896854251752877894');" onmouseout="out('5896854251752877894');" style="">2023                                          provider.provider.getPackageName() == null)) {                            </span>
<span class="6295139059851294613" onmouseenter="enter('6295139059851294613');" onmouseout="out('6295139059851294613');" style="">2024                                      String log = &quot;Deleting widget that isn&#x27;t installed anymore: id=&quot;              </span>
<span class="-582482747679217469" onmouseenter="enter('-582482747679217469');" onmouseout="out('-582482747679217469');" style="">2025                                          + id + &quot; appWidgetId=&quot; + appWidgetId;                                     </span>
<span class="-1161653447976501517" onmouseenter="enter('-1161653447976501517');" onmouseout="out('-1161653447976501517');" style="">2026                                      Log.e(TAG, log);                                                              </span>
<span class="-8769286334876902652" onmouseenter="enter('-8769286334876902652');" onmouseout="out('-8769286334876902652');" style="">2027                                      Launcher.addDumpLog(TAG, log, false);                                         </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2028                                      itemsToRemove.add(id);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2029                                  } else {                                                                          </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="">2030                                      appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,                        </span>
<span class="-1699940082949791423" onmouseenter="enter('-1699940082949791423');" onmouseout="out('-1699940082949791423');" style="">2031                                              provider.provider);                                                   </span>
<span class="-3490214853915757695" onmouseenter="enter('-3490214853915757695');" onmouseout="out('-3490214853915757695');" style="">2032                                      appWidgetInfo.id = id;                                                        </span>
<span class="-299823112742514494" onmouseenter="enter('-299823112742514494');" onmouseout="out('-299823112742514494');" style="">2033                                      appWidgetInfo.screenId = c.getInt(screenIndex);                               </span>
<span class="-3031374252236192886" onmouseenter="enter('-3031374252236192886');" onmouseout="out('-3031374252236192886');" style="">2034                                      appWidgetInfo.cellX = c.getInt(cellXIndex);                                   </span>
<span class="-6373958662014470902" onmouseenter="enter('-6373958662014470902');" onmouseout="out('-6373958662014470902');" style="">2035                                      appWidgetInfo.cellY = c.getInt(cellYIndex);                                   </span>
<span class="-1172974300892817728" onmouseenter="enter('-1172974300892817728');" onmouseout="out('-1172974300892817728');" style="">2036                                      appWidgetInfo.spanX = c.getInt(spanXIndex);                                   </span>
<span class="948367348399442562" onmouseenter="enter('948367348399442562');" onmouseout="out('948367348399442562');" style="">2037                                      appWidgetInfo.spanY = c.getInt(spanYIndex);                                   </span>
<span class="-5791068135067534357" onmouseenter="enter('-5791068135067534357');" onmouseout="out('-5791068135067534357');" style="">2038                                      int[] minSpan = Launcher.getMinSpanForWidget(context, provider);              </span>
<span class="663337698221632344" onmouseenter="enter('663337698221632344');" onmouseout="out('663337698221632344');" style="">2039                                      appWidgetInfo.minSpanX = minSpan[0];                                          </span>
<span class="-1876557735779698161" onmouseenter="enter('-1876557735779698161');" onmouseout="out('-1876557735779698161');" style="">2040                                      appWidgetInfo.minSpanY = minSpan[1];                                          </span>
<span  style="">2041                                                                                                                    </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2042                                      container = c.getInt(containerIndex);                                         </span>
<span class="8804482754730728288" onmouseenter="enter('8804482754730728288');" onmouseout="out('8804482754730728288');" style="">2043                                      if (container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;              </span>
<span class="-8875646165072629077" onmouseenter="enter('-8875646165072629077');" onmouseout="out('-8875646165072629077');" style="">2044                                          container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {              </span>
<span class="8088576139032825639" onmouseenter="enter('8088576139032825639');" onmouseout="out('8088576139032825639');" style="">2045                                          Log.e(TAG, &quot;Widget found where container != &quot; +                           </span>
<span class="8462700098092543731" onmouseenter="enter('8462700098092543731');" onmouseout="out('8462700098092543731');" style="">2046                                              &quot;CONTAINER_DESKTOP nor CONTAINER_HOTSEAT - ignoring!&quot;);               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2047                                          continue;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2048                                      }                                                                             </span>
<span  style="">2049                                                                                                                    </span>
<span class="3497044279011134930" onmouseenter="enter('3497044279011134930');" onmouseout="out('3497044279011134930');" style="">2050                                      appWidgetInfo.container = c.getInt(containerIndex);                           </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2051                                      // check &amp; update map of what&#x27;s occupied                                      </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2052                                      deleteOnInvalidPlacement.set(false);                                          </span>
<span class="8646654463595497950" onmouseenter="enter('8646654463595497950');" onmouseout="out('8646654463595497950');" style="">2053                                      if (!checkItemPlacement(occupied, appWidgetInfo,                              </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">2054                                              deleteOnInvalidPlacement)) {                                          </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2055                                          if (deleteOnInvalidPlacement.get()) {                                     </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2056                                              itemsToRemove.add(id);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2057                                          }                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2058                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2059                                      }                                                                             </span>
<span class="1434382407220101710" onmouseenter="enter('1434382407220101710');" onmouseout="out('1434382407220101710');" style="">2060                                      String providerName = provider.provider.flattenToString();                    </span>
<span class="-497618701172789575" onmouseenter="enter('-497618701172789575');" onmouseout="out('-497618701172789575');" style="">2061                                      if (!providerName.equals(savedProvider)) {                                    </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2062                                          ContentValues values = new ContentValues();                               </span>
<span class="-1769279011780203877" onmouseenter="enter('-1769279011780203877');" onmouseout="out('-1769279011780203877');" style="">2063                                          values.put(LauncherSettings.Favorites.APPWIDGET_PROVIDER,                 </span>
<span class="-4101567385035018098" onmouseenter="enter('-4101567385035018098');" onmouseout="out('-4101567385035018098');" style="">2064                                                  providerName);                                                    </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2065                                          String where = BaseColumns._ID + &quot;= ?&quot;;                                   </span>
<span class="7642359228989935564" onmouseenter="enter('7642359228989935564');" onmouseout="out('7642359228989935564');" style="">2066                                          String[] args = {Integer.toString(c.getInt(idIndex))};                    </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="">2067                                          contentResolver.update(contentUri, values, where, args);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2068                                      }                                                                             </span>
<span class="-5618854840311135348" onmouseenter="enter('-5618854840311135348');" onmouseout="out('-5618854840311135348');" style="">2069                                      sBgItemsIdMap.put(appWidgetInfo.id, appWidgetInfo);                           </span>
<span class="-6085617845739613540" onmouseenter="enter('-6085617845739613540');" onmouseout="out('-6085617845739613540');" style="">2070                                      sBgAppWidgets.add(appWidgetInfo);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2071                                  }                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2072                                  break;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2073                              }                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">2074                          } catch (Exception e) {                                                                   </span>
<span class="5473197829797399592" onmouseenter="enter('5473197829797399592');" onmouseout="out('5473197829797399592');" style="">2075                              Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted&quot;, e, true);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2076                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2077                      }                                                                                             </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2078                  } finally {                                                                                       </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2079                      if (c != null) {                                                                              </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">2080                          c.close();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2081                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2082                  }                                                                                                 </span>
<span  style="">2083                                                                                                                    </span>
<span class="3320499870953658089" onmouseenter="enter('3320499870953658089');" onmouseout="out('3320499870953658089');" style="">2084                  // Break early if we&#x27;ve stopped loading                                                           </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2085                  if (mStopped) {                                                                                   </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">2086                      clearSBgDataStructures();                                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2087                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2088                  }                                                                                                 </span>
<span  style="">2089                                                                                                                    </span>
<span class="-1044970196577970229" onmouseenter="enter('-1044970196577970229');" onmouseout="out('-1044970196577970229');" style="">2090                  if (itemsToRemove.size() &gt; 0) {                                                                   </span>
<span class="5677517768170489521" onmouseenter="enter('5677517768170489521');" onmouseout="out('5677517768170489521');" style="">2091                      ContentProviderClient client = contentResolver.acquireContentProviderClient(                  </span>
<span class="-41995321024364961" onmouseenter="enter('-41995321024364961');" onmouseout="out('-41995321024364961');" style="">2092                              LauncherSettings.Favorites.CONTENT_URI);                                              </span>
<span class="-6328990658741073682" onmouseenter="enter('-6328990658741073682');" onmouseout="out('-6328990658741073682');" style="">2093                      // Remove dead items                                                                          </span>
<span class="-2206673557334024830" onmouseenter="enter('-2206673557334024830');" onmouseout="out('-2206673557334024830');" style="">2094                      for (long id : itemsToRemove) {                                                               </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2095                          if (DEBUG_LOADERS) {                                                                      </span>
<span class="1693656419727492070" onmouseenter="enter('1693656419727492070');" onmouseout="out('1693656419727492070');" style="">2096                              Log.d(TAG, &quot;Removed id = &quot; + id);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2097                          }                                                                                         </span>
<span class="-756547997470617115" onmouseenter="enter('-756547997470617115');" onmouseout="out('-756547997470617115');" style="">2098                          // Don&#x27;t notify content observers                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2099                          try {                                                                                     </span>
<span class="-2525008622658612811" onmouseenter="enter('-2525008622658612811');" onmouseout="out('-2525008622658612811');" style="">2100                              client.delete(LauncherSettings.Favorites.getContentUri(id, false),                    </span>
<span class="789653475627010164" onmouseenter="enter('789653475627010164');" onmouseout="out('789653475627010164');" style="">2101                                      null, null);                                                                  </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2102                          } catch (RemoteException e) {                                                             </span>
<span class="1576133554677134200" onmouseenter="enter('1576133554677134200');" onmouseout="out('1576133554677134200');" style="">2103                              Log.w(TAG, &quot;Could not remove id = &quot; + id);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2104                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2105                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2106                  }                                                                                                 </span>
<span  style="">2107                                                                                                                    </span>
<span class="5384601782943406631" onmouseenter="enter('5384601782943406631');" onmouseout="out('5384601782943406631');" style="">2108                  if (restoredRows.size() &gt; 0) {                                                                    </span>
<span class="-7146881939578869751" onmouseenter="enter('-7146881939578869751');" onmouseout="out('-7146881939578869751');" style="">2109                      ContentProviderClient updater = contentResolver.acquireContentProviderClient(                 </span>
<span class="-41995321024364961" onmouseenter="enter('-41995321024364961');" onmouseout="out('-41995321024364961');" style="">2110                              LauncherSettings.Favorites.CONTENT_URI);                                              </span>
<span class="7218829760546841504" onmouseenter="enter('7218829760546841504');" onmouseout="out('7218829760546841504');" style="">2111                      // Update restored items that no longer require special handling                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2112                      try {                                                                                         </span>
<span class="-9131750597640912652" onmouseenter="enter('-9131750597640912652');" onmouseout="out('-9131750597640912652');" style="">2113                          StringBuilder selectionBuilder = new StringBuilder();                                     </span>
<span class="-2095273116509361612" onmouseenter="enter('-2095273116509361612');" onmouseout="out('-2095273116509361612');" style="">2114                          selectionBuilder.append(LauncherSettings.Favorites._ID);                                  </span>
<span class="6461653116160679746" onmouseenter="enter('6461653116160679746');" onmouseout="out('6461653116160679746');" style="">2115                          selectionBuilder.append(&quot; IN (&quot;);                                                         </span>
<span class="5779162458108712939" onmouseenter="enter('5779162458108712939');" onmouseout="out('5779162458108712939');" style="">2116                          selectionBuilder.append(TextUtils.join(&quot;, &quot;, restoredRows));                              </span>
<span class="-266914319355369866" onmouseenter="enter('-266914319355369866');" onmouseout="out('-266914319355369866');" style="">2117                          selectionBuilder.append(&quot;)&quot;);                                                             </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2118                          ContentValues values = new ContentValues();                                               </span>
<span class="-8469115157851156621" onmouseenter="enter('-8469115157851156621');" onmouseout="out('-8469115157851156621');" style="">2119                          values.put(LauncherSettings.Favorites.RESTORED, 0);                                       </span>
<span class="8477028357087705336" onmouseenter="enter('8477028357087705336');" onmouseout="out('8477028357087705336');" style="">2120                          updater.update(LauncherSettings.Favorites.CONTENT_URI,                                    </span>
<span class="-593768018781143118" onmouseenter="enter('-593768018781143118');" onmouseout="out('-593768018781143118');" style="">2121                                  values, selectionBuilder.toString(), null);                                       </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2122                      } catch (RemoteException e) {                                                                 </span>
<span class="-2048384695223094681" onmouseenter="enter('-2048384695223094681');" onmouseout="out('-2048384695223094681');" style="">2123                          Log.w(TAG, &quot;Could not update restored rows&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2124                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2125                  }                                                                                                 </span>
<span  style="">2126                                                                                                                    </span>
<span class="-4804263783578470698" onmouseenter="enter('-4804263783578470698');" onmouseout="out('-4804263783578470698');" style="">2127                  if (loadedOldDb) {                                                                                </span>
<span class="7600073100480404232" onmouseenter="enter('7600073100480404232');" onmouseout="out('7600073100480404232');" style="">2128                      long maxScreenId = 0;                                                                         </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2129                      // If we&#x27;re importing we use the old screen order.                                            </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2130                      for (ItemInfo item: sBgItemsIdMap.values()) {                                                 </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2131                          long screenId = item.screenId;                                                            </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2132                          if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                     </span>
<span class="2624616925341674614" onmouseenter="enter('2624616925341674614');" onmouseout="out('2624616925341674614');" style="">2133                                  !sBgWorkspaceScreens.contains(screenId)) {                                        </span>
<span class="-7031445051311703943" onmouseenter="enter('-7031445051311703943');" onmouseout="out('-7031445051311703943');" style="">2134                              sBgWorkspaceScreens.add(screenId);                                                    </span>
<span class="3854679960473080150" onmouseenter="enter('3854679960473080150');" onmouseout="out('3854679960473080150');" style="">2135                              if (screenId &gt; maxScreenId) {                                                         </span>
<span class="1021049293401799489" onmouseenter="enter('1021049293401799489');" onmouseout="out('1021049293401799489');" style="">2136                                  maxScreenId = screenId;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2137                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2138                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2139                      }                                                                                             </span>
<span class="6350361387624057443" onmouseenter="enter('6350361387624057443');" onmouseout="out('6350361387624057443');" style="">2140                      Collections.sort(sBgWorkspaceScreens);                                                        </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2141                      // Log to disk                                                                                </span>
<span class="866898408466051726" onmouseenter="enter('866898408466051726');" onmouseout="out('866898408466051726');" style="">2142                      Launcher.addDumpLog(TAG, &quot;11683562 -   maxScreenId: &quot; + maxScreenId, true);                   </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2143                      Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                               </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2144                              TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                                     </span>
<span  style="">2145                                                                                                                    </span>
<span class="7230913638388732518" onmouseenter="enter('7230913638388732518');" onmouseout="out('7230913638388732518');" style="">2146                      LauncherAppState.getLauncherProvider().updateMaxScreenId(maxScreenId);                        </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2147                      updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                                     </span>
<span  style="">2148                                                                                                                    </span>
<span class="7660079450024453672" onmouseenter="enter('7660079450024453672');" onmouseout="out('7660079450024453672');" style="">2149                      // Update the max item id after we load an old db                                             </span>
<span class="-1395936485676380465" onmouseenter="enter('-1395936485676380465');" onmouseout="out('-1395936485676380465');" style="">2150                      long maxItemId = 0;                                                                           </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2151                      // If we&#x27;re importing we use the old screen order.                                            </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2152                      for (ItemInfo item: sBgItemsIdMap.values()) {                                                 </span>
<span class="570221416877950678" onmouseenter="enter('570221416877950678');" onmouseout="out('570221416877950678');" style="">2153                          maxItemId = Math.max(maxItemId, item.id);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2154                      }                                                                                             </span>
<span class="-9163109107539651846" onmouseenter="enter('-9163109107539651846');" onmouseout="out('-9163109107539651846');" style="">2155                      LauncherAppState.getLauncherProvider().updateMaxItemId(maxItemId);                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2156                  } else {                                                                                          </span>
<span class="-2685559954044032059" onmouseenter="enter('-2685559954044032059');" onmouseout="out('-2685559954044032059');" style="">2157                      TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(mContext);                     </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">2158                      for (Integer i : orderedScreens.keySet()) {                                                   </span>
<span class="6018672691004586758" onmouseenter="enter('6018672691004586758');" onmouseout="out('6018672691004586758');" style="">2159                          sBgWorkspaceScreens.add(orderedScreens.get(i));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2160                      }                                                                                             </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2161                      // Log to disk                                                                                </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2162                      Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                               </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2163                              TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                                     </span>
<span  style="">2164                                                                                                                    </span>
<span class="4349099944219760178" onmouseenter="enter('4349099944219760178');" onmouseout="out('4349099944219760178');" style="">2165                      // Remove any empty screens                                                                   </span>
<span class="4802911702169047278" onmouseenter="enter('4802911702169047278');" onmouseout="out('4802911702169047278');" style="">2166                      ArrayList&lt;Long&gt; unusedScreens = new ArrayList&lt;Long&gt;(sBgWorkspaceScreens);                     </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2167                      for (ItemInfo item: sBgItemsIdMap.values()) {                                                 </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2168                          long screenId = item.screenId;                                                            </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2169                          if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                     </span>
<span class="2084246428391599841" onmouseenter="enter('2084246428391599841');" onmouseout="out('2084246428391599841');" style="">2170                                  unusedScreens.contains(screenId)) {                                               </span>
<span class="2563817896724806900" onmouseenter="enter('2563817896724806900');" onmouseout="out('2563817896724806900');" style="">2171                              unusedScreens.remove(screenId);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2172                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2173                      }                                                                                             </span>
<span  style="">2174                                                                                                                    </span>
<span class="589140823506694046" onmouseenter="enter('589140823506694046');" onmouseout="out('589140823506694046');" style="">2175                      // If there are any empty screens remove them, and update.                                    </span>
<span class="-6359391369875412389" onmouseenter="enter('-6359391369875412389');" onmouseout="out('-6359391369875412389');" style="">2176                      if (unusedScreens.size() != 0) {                                                              </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2177                          // Log to disk                                                                            </span>
<span class="7523849534574985307" onmouseenter="enter('7523849534574985307');" onmouseout="out('7523849534574985307');" style="">2178                          Launcher.addDumpLog(TAG, &quot;11683562 -   unusedScreens (to be removed): &quot; +                 </span>
<span class="-5777150032383965255" onmouseenter="enter('-5777150032383965255');" onmouseout="out('-5777150032383965255');" style="">2179                                  TextUtils.join(&quot;, &quot;, unusedScreens), true);                                       </span>
<span  style="">2180                                                                                                                    </span>
<span class="672027419163159367" onmouseenter="enter('672027419163159367');" onmouseout="out('672027419163159367');" style="">2181                          sBgWorkspaceScreens.removeAll(unusedScreens);                                             </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2182                          updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2183                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2184                  }                                                                                                 </span>
<span  style="">2185                                                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2186                  if (DEBUG_LOADERS) {                                                                              </span>
<span class="7893701829803555503" onmouseenter="enter('7893701829803555503');" onmouseout="out('7893701829803555503');" style="">2187                      Log.d(TAG, &quot;loaded workspace in &quot; + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                   </span>
<span class="-4264600990510120523" onmouseenter="enter('-4264600990510120523');" onmouseout="out('-4264600990510120523');" style="">2188                      Log.d(TAG, &quot;workspace layout: &quot;);                                                             </span>
<span class="-7545020173780618827" onmouseenter="enter('-7545020173780618827');" onmouseout="out('-7545020173780618827');" style="">2189                      int nScreens = occupied.size();                                                               </span>
<span class="-1430677680506572849" onmouseenter="enter('-1430677680506572849');" onmouseout="out('-1430677680506572849');" style="">2190                      for (int y = 0; y &lt; countY; y++) {                                                            </span>
<span class="7912371425440139270" onmouseenter="enter('7912371425440139270');" onmouseout="out('7912371425440139270');" style="">2191                          String line = &quot;&quot;;                                                                         </span>
<span  style="">2192                                                                                                                    </span>
<span class="6696569755228044488" onmouseenter="enter('6696569755228044488');" onmouseout="out('6696569755228044488');" style="">2193                          Iterator&lt;Long&gt; iter = occupied.keySet().iterator();                                       </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2194                          while (iter.hasNext()) {                                                                  </span>
<span class="5362610809116292523" onmouseenter="enter('5362610809116292523');" onmouseout="out('5362610809116292523');" style="">2195                              long screenId = iter.next();                                                          </span>
<span class="-6362485911021715109" onmouseenter="enter('-6362485911021715109');" onmouseout="out('-6362485911021715109');" style="">2196                              if (screenId &gt; 0) {                                                                   </span>
<span class="6140668759815587097" onmouseenter="enter('6140668759815587097');" onmouseout="out('6140668759815587097');" style="">2197                                  line += &quot; | &quot;;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2198                              }                                                                                     </span>
<span class="5745233440242438196" onmouseenter="enter('5745233440242438196');" onmouseout="out('5745233440242438196');" style="">2199                              for (int x = 0; x &lt; countX; x++) {                                                    </span>
<span class="5427490612738327413" onmouseenter="enter('5427490612738327413');" onmouseout="out('5427490612738327413');" style="">2200                                  line += ((occupied.get(screenId)[x][y] != null) ? &quot;#&quot; : &quot;.&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2201                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2202                          }                                                                                         </span>
<span class="-6176135763032133271" onmouseenter="enter('-6176135763032133271');" onmouseout="out('-6176135763032133271');" style="">2203                          Log.d(TAG, &quot;[ &quot; + line + &quot; ]&quot;);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2204                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2205                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2206              }                                                                                                     </span>
<span class="-4220264685598194490" onmouseenter="enter('-4220264685598194490');" onmouseout="out('-4220264685598194490');" style="">2207              return loadedOldDb;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2208          }                                                                                                         </span>
<span  style="">2209                                                                                                                    </span>
<span class="2277304499071840713" onmouseenter="enter('2277304499071840713');" onmouseout="out('2277304499071840713');" style="">2210          /** Filters the set of items who are directly or indirectly (via another container) on the                </span>
<span class="1409652257454698285" onmouseenter="enter('1409652257454698285');" onmouseout="out('1409652257454698285');" style="">2211           * specified screen. */                                                                                   </span>
<span class="8795548304182075511" onmouseenter="enter('8795548304182075511');" onmouseout="out('8795548304182075511');" style="">2212          private void filterCurrentWorkspaceItems(long currentScreenId,                                            </span>
<span class="6681054994536048179" onmouseenter="enter('6681054994536048179');" onmouseout="out('6681054994536048179');" style="">2213                  ArrayList&lt;ItemInfo&gt; allWorkspaceItems,                                                            </span>
<span class="-22694560885899086" onmouseenter="enter('-22694560885899086');" onmouseout="out('-22694560885899086');" style="">2214                  ArrayList&lt;ItemInfo&gt; currentScreenItems,                                                           </span>
<span class="-4268074281529251610" onmouseenter="enter('-4268074281529251610');" onmouseout="out('-4268074281529251610');" style="">2215                  ArrayList&lt;ItemInfo&gt; otherScreenItems) {                                                           </span>
<span class="-3054856766549342984" onmouseenter="enter('-3054856766549342984');" onmouseout="out('-3054856766549342984');" style="">2216              // Purge any null ItemInfos                                                                           </span>
<span class="4510640209834542816" onmouseenter="enter('4510640209834542816');" onmouseout="out('4510640209834542816');" style="">2217              Iterator&lt;ItemInfo&gt; iter = allWorkspaceItems.iterator();                                               </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2218              while (iter.hasNext()) {                                                                              </span>
<span class="1859715860533284250" onmouseenter="enter('1859715860533284250');" onmouseout="out('1859715860533284250');" style="">2219                  ItemInfo i = iter.next();                                                                         </span>
<span class="-7805046366392198151" onmouseenter="enter('-7805046366392198151');" onmouseout="out('-7805046366392198151');" style="">2220                  if (i == null) {                                                                                  </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">2221                      iter.remove();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2222                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2223              }                                                                                                     </span>
<span  style="">2224                                                                                                                    </span>
<span class="-717820765531723775" onmouseenter="enter('-717820765531723775');" onmouseout="out('-717820765531723775');" style="">2225              // Order the set of items by their containers first, this allows use to walk through the              </span>
<span class="603841325148737819" onmouseenter="enter('603841325148737819');" onmouseout="out('603841325148737819');" style="">2226              // list sequentially, build up a list of containers that are in the specified screen,                 </span>
<span class="4141488165570775341" onmouseenter="enter('4141488165570775341');" onmouseout="out('4141488165570775341');" style="">2227              // as well as all items in those containers.                                                          </span>
<span class="-9034158841912487174" onmouseenter="enter('-9034158841912487174');" onmouseout="out('-9034158841912487174');" style="">2228              Set&lt;Long&gt; itemsOnScreen = new HashSet&lt;Long&gt;();                                                        </span>
<span class="8519661802904254165" onmouseenter="enter('8519661802904254165');" onmouseout="out('8519661802904254165');" style="">2229              Collections.sort(allWorkspaceItems, new Comparator&lt;ItemInfo&gt;() {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2230                  @Override                                                                                         </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2231                  public int compare(ItemInfo lhs, ItemInfo rhs) {                                                  </span>
<span class="-1156155221818606914" onmouseenter="enter('-1156155221818606914');" onmouseout="out('-1156155221818606914');" style="">2232                      return (int) (lhs.container - rhs.container);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2233                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2234              });                                                                                                   </span>
<span class="8857216393150717712" onmouseenter="enter('8857216393150717712');" onmouseout="out('8857216393150717712');" style="">2235              for (ItemInfo info : allWorkspaceItems) {                                                             </span>
<span class="6411036295955728093" onmouseenter="enter('6411036295955728093');" onmouseout="out('6411036295955728093');" style="">2236                  if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                             </span>
<span class="243509375570472667" onmouseenter="enter('243509375570472667');" onmouseout="out('243509375570472667');" style="">2237                      if (info.screenId == currentScreenId) {                                                       </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2238                          currentScreenItems.add(info);                                                             </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2239                          itemsOnScreen.add(info.id);                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2240                      } else {                                                                                      </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2241                          otherScreenItems.add(info);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2242                      }                                                                                             </span>
<span class="8644731164584182238" onmouseenter="enter('8644731164584182238');" onmouseout="out('8644731164584182238');" style="">2243                  } else if (info.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                      </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2244                      currentScreenItems.add(info);                                                                 </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2245                      itemsOnScreen.add(info.id);                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2246                  } else {                                                                                          </span>
<span class="580654991680085358" onmouseenter="enter('580654991680085358');" onmouseout="out('580654991680085358');" style="">2247                      if (itemsOnScreen.contains(info.container)) {                                                 </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2248                          currentScreenItems.add(info);                                                             </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2249                          itemsOnScreen.add(info.id);                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2250                      } else {                                                                                      </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2251                          otherScreenItems.add(info);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2252                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2253                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2254              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2255          }                                                                                                         </span>
<span  style="">2256                                                                                                                    </span>
<span class="-2345588268248786161" onmouseenter="enter('-2345588268248786161');" onmouseout="out('-2345588268248786161');" style="">2257          /** Filters the set of widgets which are on the specified screen. */                                      </span>
<span class="7796530082634599981" onmouseenter="enter('7796530082634599981');" onmouseout="out('7796530082634599981');" style="">2258          private void filterCurrentAppWidgets(long currentScreenId,                                                </span>
<span class="-6457080946795761374" onmouseenter="enter('-6457080946795761374');" onmouseout="out('-6457080946795761374');" style="">2259                  ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                                      </span>
<span class="-4085190208868862406" onmouseenter="enter('-4085190208868862406');" onmouseout="out('-4085190208868862406');" style="">2260                  ArrayList&lt;LauncherAppWidgetInfo&gt; currentScreenWidgets,                                            </span>
<span class="-9000722418092093369" onmouseenter="enter('-9000722418092093369');" onmouseout="out('-9000722418092093369');" style="">2261                  ArrayList&lt;LauncherAppWidgetInfo&gt; otherScreenWidgets) {                                            </span>
<span  style="">2262                                                                                                                    </span>
<span class="298213435107913715" onmouseenter="enter('298213435107913715');" onmouseout="out('298213435107913715');" style="">2263              for (LauncherAppWidgetInfo widget : appWidgets) {                                                     </span>
<span class="2476844624609784590" onmouseenter="enter('2476844624609784590');" onmouseout="out('2476844624609784590');" style="">2264                  if (widget == null) continue;                                                                     </span>
<span class="8795712760973120755" onmouseenter="enter('8795712760973120755');" onmouseout="out('8795712760973120755');" style="">2265                  if (widget.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                           </span>
<span class="-573639449604607321" onmouseenter="enter('-573639449604607321');" onmouseout="out('-573639449604607321');" style="">2266                          widget.screenId == currentScreenId) {                                                     </span>
<span class="-7467860973438659792" onmouseenter="enter('-7467860973438659792');" onmouseout="out('-7467860973438659792');" style="">2267                      currentScreenWidgets.add(widget);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2268                  } else {                                                                                          </span>
<span class="918127297832417083" onmouseenter="enter('918127297832417083');" onmouseout="out('918127297832417083');" style="">2269                      otherScreenWidgets.add(widget);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2270                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2271              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2272          }                                                                                                         </span>
<span  style="">2273                                                                                                                    </span>
<span class="2890739696266248059" onmouseenter="enter('2890739696266248059');" onmouseout="out('2890739696266248059');" style="">2274          /** Filters the set of folders which are on the specified screen. */                                      </span>
<span class="1006156668309097499" onmouseenter="enter('1006156668309097499');" onmouseout="out('1006156668309097499');" style="">2275          private void filterCurrentFolders(long currentScreenId,                                                   </span>
<span class="5542015090877593488" onmouseenter="enter('5542015090877593488');" onmouseout="out('5542015090877593488');" style="">2276                  HashMap&lt;Long, ItemInfo&gt; itemsIdMap,                                                               </span>
<span class="5439463415012784721" onmouseenter="enter('5439463415012784721');" onmouseout="out('5439463415012784721');" style="">2277                  HashMap&lt;Long, FolderInfo&gt; folders,                                                                </span>
<span class="-835326304871961386" onmouseenter="enter('-835326304871961386');" onmouseout="out('-835326304871961386');" style="">2278                  HashMap&lt;Long, FolderInfo&gt; currentScreenFolders,                                                   </span>
<span class="-5337898381804311151" onmouseenter="enter('-5337898381804311151');" onmouseout="out('-5337898381804311151');" style="">2279                  HashMap&lt;Long, FolderInfo&gt; otherScreenFolders) {                                                   </span>
<span  style="">2280                                                                                                                    </span>
<span class="5476103458254751398" onmouseenter="enter('5476103458254751398');" onmouseout="out('5476103458254751398');" style="">2281              for (long id : folders.keySet()) {                                                                    </span>
<span class="-1043527829048640643" onmouseenter="enter('-1043527829048640643');" onmouseout="out('-1043527829048640643');" style="">2282                  ItemInfo info = itemsIdMap.get(id);                                                               </span>
<span class="2660177146353218833" onmouseenter="enter('2660177146353218833');" onmouseout="out('2660177146353218833');" style="">2283                  FolderInfo folder = folders.get(id);                                                              </span>
<span class="1070396563257369459" onmouseenter="enter('1070396563257369459');" onmouseout="out('1070396563257369459');" style="">2284                  if (info == null || folder == null) continue;                                                     </span>
<span class="-2700526009056688618" onmouseenter="enter('-2700526009056688618');" onmouseout="out('-2700526009056688618');" style="">2285                  if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                             </span>
<span class="-6694119585175412501" onmouseenter="enter('-6694119585175412501');" onmouseout="out('-6694119585175412501');" style="">2286                          info.screenId == currentScreenId) {                                                       </span>
<span class="9103793645851851238" onmouseenter="enter('9103793645851851238');" onmouseout="out('9103793645851851238');" style="">2287                      currentScreenFolders.put(id, folder);                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2288                  } else {                                                                                          </span>
<span class="2209694610169579401" onmouseenter="enter('2209694610169579401');" onmouseout="out('2209694610169579401');" style="">2289                      otherScreenFolders.put(id, folder);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2290                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2291              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2292          }                                                                                                         </span>
<span  style="">2293                                                                                                                    </span>
<span class="-1404838629334872973" onmouseenter="enter('-1404838629334872973');" onmouseout="out('-1404838629334872973');" style="">2294          /** Sorts the set of items by hotseat, workspace (spatially from top to bottom, left to                   </span>
<span class="2331484748997422212" onmouseenter="enter('2331484748997422212');" onmouseout="out('2331484748997422212');" style="">2295           * right) */                                                                                              </span>
<span class="4197577433481844567" onmouseenter="enter('4197577433481844567');" onmouseout="out('4197577433481844567');" style="">2296          private void sortWorkspaceItemsSpatially(ArrayList&lt;ItemInfo&gt; workspaceItems) {                            </span>
<span class="1185328747399966274" onmouseenter="enter('1185328747399966274');" onmouseout="out('1185328747399966274');" style="">2297              final LauncherAppState app = LauncherAppState.getInstance();                                          </span>
<span class="7124839587395892858" onmouseenter="enter('7124839587395892858');" onmouseout="out('7124839587395892858');" style="">2298              final DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                   </span>
<span class="7420301678455304067" onmouseenter="enter('7420301678455304067');" onmouseout="out('7420301678455304067');" style="">2299              // XXX: review this                                                                                   </span>
<span class="5036789581710507500" onmouseenter="enter('5036789581710507500');" onmouseout="out('5036789581710507500');" style="">2300              Collections.sort(workspaceItems, new Comparator&lt;ItemInfo&gt;() {                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2301                  @Override                                                                                         </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2302                  public int compare(ItemInfo lhs, ItemInfo rhs) {                                                  </span>
<span class="7519014981914073063" onmouseenter="enter('7519014981914073063');" onmouseout="out('7519014981914073063');" style="">2303                      int cellCountX = (int) grid.numColumns;                                                       </span>
<span class="5038685396458105053" onmouseenter="enter('5038685396458105053');" onmouseout="out('5038685396458105053');" style="">2304                      int cellCountY = (int) grid.numRows;                                                          </span>
<span class="2270724071285143981" onmouseenter="enter('2270724071285143981');" onmouseout="out('2270724071285143981');" style="">2305                      int screenOffset = cellCountX * cellCountY;                                                   </span>
<span class="-1359829540566141263" onmouseenter="enter('-1359829540566141263');" onmouseout="out('-1359829540566141263');" style="">2306                      int containerOffset = screenOffset * (Launcher.SCREEN_COUNT + 1); // +1 hotseat               </span>
<span class="-5686828087182476360" onmouseenter="enter('-5686828087182476360');" onmouseout="out('-5686828087182476360');" style="">2307                      long lr = (lhs.container * containerOffset + lhs.screenId * screenOffset +                    </span>
<span class="7712455780852264002" onmouseenter="enter('7712455780852264002');" onmouseout="out('7712455780852264002');" style="">2308                              lhs.cellY * cellCountX + lhs.cellX);                                                  </span>
<span class="4979104026657461493" onmouseenter="enter('4979104026657461493');" onmouseout="out('4979104026657461493');" style="">2309                      long rr = (rhs.container * containerOffset + rhs.screenId * screenOffset +                    </span>
<span class="-2381270400025166051" onmouseenter="enter('-2381270400025166051');" onmouseout="out('-2381270400025166051');" style="">2310                              rhs.cellY * cellCountX + rhs.cellX);                                                  </span>
<span class="-4118467969899844825" onmouseenter="enter('-4118467969899844825');" onmouseout="out('-4118467969899844825');" style="">2311                      return (int) (lr - rr);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2312                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2313              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2314          }                                                                                                         </span>
<span  style="">2315                                                                                                                    </span>
<span class="-2914095713166652734" onmouseenter="enter('-2914095713166652734');" onmouseout="out('-2914095713166652734');" style="">2316          private void bindWorkspaceScreens(final Callbacks oldCallbacks,                                           </span>
<span class="-4834279311466229697" onmouseenter="enter('-4834279311466229697');" onmouseout="out('-4834279311466229697');" style="">2317                  final ArrayList&lt;Long&gt; orderedScreens) {                                                           </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2318              final Runnable r = new Runnable() {                                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2319                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2320                  public void run() {                                                                               </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2321                      Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                          </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2322                      if (callbacks != null) {                                                                      </span>
<span class="-657438592163932392" onmouseenter="enter('-657438592163932392');" onmouseout="out('-657438592163932392');" style="">2323                          callbacks.bindScreens(orderedScreens);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2324                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2325                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2326              };                                                                                                    </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2327              runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2328          }                                                                                                         </span>
<span  style="">2329                                                                                                                    </span>
<span class="2462723938814167389" onmouseenter="enter('2462723938814167389');" onmouseout="out('2462723938814167389');" style="">2330          private void bindWorkspaceItems(final Callbacks oldCallbacks,                                             </span>
<span class="3131608111144182051" onmouseenter="enter('3131608111144182051');" onmouseout="out('3131608111144182051');" style="">2331                  final ArrayList&lt;ItemInfo&gt; workspaceItems,                                                         </span>
<span class="-9171435870290402492" onmouseenter="enter('-9171435870290402492');" onmouseout="out('-9171435870290402492');" style="">2332                  final ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                                </span>
<span class="-215271553361392889" onmouseenter="enter('-215271553361392889');" onmouseout="out('-215271553361392889');" style="">2333                  final HashMap&lt;Long, FolderInfo&gt; folders,                                                          </span>
<span class="8358584326194096705" onmouseenter="enter('8358584326194096705');" onmouseout="out('8358584326194096705');" style="">2334                  ArrayList&lt;Runnable&gt; deferredBindRunnables) {                                                      </span>
<span  style="">2335                                                                                                                    </span>
<span class="6705996702729308966" onmouseenter="enter('6705996702729308966');" onmouseout="out('6705996702729308966');" style="">2336              final boolean postOnMainThread = (deferredBindRunnables != null);                                     </span>
<span  style="">2337                                                                                                                    </span>
<span class="-8582136977498244048" onmouseenter="enter('-8582136977498244048');" onmouseout="out('-8582136977498244048');" style="">2338              // Bind the workspace items                                                                           </span>
<span class="-7354566132986496753" onmouseenter="enter('-7354566132986496753');" onmouseout="out('-7354566132986496753');" style="">2339              int N = workspaceItems.size();                                                                        </span>
<span class="8316943469476905111" onmouseenter="enter('8316943469476905111');" onmouseout="out('8316943469476905111');" style="">2340              for (int i = 0; i &lt; N; i += ITEMS_CHUNK) {                                                            </span>
<span class="4892427267481855411" onmouseenter="enter('4892427267481855411');" onmouseout="out('4892427267481855411');" style="">2341                  final int start = i;                                                                              </span>
<span class="-1876539668545683746" onmouseenter="enter('-1876539668545683746');" onmouseout="out('-1876539668545683746');" style="">2342                  final int chunkSize = (i+ITEMS_CHUNK &lt;= N) ? ITEMS_CHUNK : (N-i);                                 </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2343                  final Runnable r = new Runnable() {                                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2344                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2345                      public void run() {                                                                           </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2346                          Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2347                          if (callbacks != null) {                                                                  </span>
<span class="5089922212197568209" onmouseenter="enter('5089922212197568209');" onmouseout="out('5089922212197568209');" style="">2348                              callbacks.bindItems(workspaceItems, start, start+chunkSize,                           </span>
<span class="9106099237950392606" onmouseenter="enter('9106099237950392606');" onmouseout="out('9106099237950392606');" style="">2349                                      false);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2350                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2351                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2352                  };                                                                                                </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2353                  if (postOnMainThread) {                                                                           </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2354                      deferredBindRunnables.add(r);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2355                  } else {                                                                                          </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2356                      runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2357                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2358              }                                                                                                     </span>
<span  style="">2359                                                                                                                    </span>
<span class="-3289339942871725334" onmouseenter="enter('-3289339942871725334');" onmouseout="out('-3289339942871725334');" style="">2360              // Bind the folders                                                                                   </span>
<span class="-7483796215228262161" onmouseenter="enter('-7483796215228262161');" onmouseout="out('-7483796215228262161');" style="">2361              if (!folders.isEmpty()) {                                                                             </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2362                  final Runnable r = new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2363                      public void run() {                                                                           </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2364                          Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2365                          if (callbacks != null) {                                                                  </span>
<span class="-5386182796873001970" onmouseenter="enter('-5386182796873001970');" onmouseout="out('-5386182796873001970');" style="">2366                              callbacks.bindFolders(folders);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2367                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2368                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2369                  };                                                                                                </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2370                  if (postOnMainThread) {                                                                           </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2371                      deferredBindRunnables.add(r);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2372                  } else {                                                                                          </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2373                      runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2374                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2375              }                                                                                                     </span>
<span  style="">2376                                                                                                                    </span>
<span class="-3655716380766613611" onmouseenter="enter('-3655716380766613611');" onmouseout="out('-3655716380766613611');" style="">2377              // Bind the widgets, one at a time                                                                    </span>
<span class="-8489280060790503293" onmouseenter="enter('-8489280060790503293');" onmouseout="out('-8489280060790503293');" style="">2378              N = appWidgets.size();                                                                                </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2379              for (int i = 0; i &lt; N; i++) {                                                                         </span>
<span class="1244623159456991119" onmouseenter="enter('1244623159456991119');" onmouseout="out('1244623159456991119');" style="">2380                  final LauncherAppWidgetInfo widget = appWidgets.get(i);                                           </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2381                  final Runnable r = new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2382                      public void run() {                                                                           </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2383                          Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2384                          if (callbacks != null) {                                                                  </span>
<span class="-6128295543460120155" onmouseenter="enter('-6128295543460120155');" onmouseout="out('-6128295543460120155');" style="">2385                              callbacks.bindAppWidget(widget);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2386                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2387                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2388                  };                                                                                                </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2389                  if (postOnMainThread) {                                                                           </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2390                      deferredBindRunnables.add(r);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2391                  } else {                                                                                          </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2392                      runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2393                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2394              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2395          }                                                                                                         </span>
<span  style="">2396                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2397          /**                                                                                                       </span>
<span class="2657234197326019604" onmouseenter="enter('2657234197326019604');" onmouseout="out('2657234197326019604');" style="">2398           * Binds all loaded data to actual views on the main thread.                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2399           */                                                                                                       </span>
<span class="2515782410575020505" onmouseenter="enter('2515782410575020505');" onmouseout="out('2515782410575020505');" style="">2400          private void bindWorkspace(int synchronizeBindPage, final boolean isUpgradePath) {                        </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2401              final long t = SystemClock.uptimeMillis();                                                            </span>
<span class="-6867724507948428803" onmouseenter="enter('-6867724507948428803');" onmouseout="out('-6867724507948428803');" style="">2402              Runnable r;                                                                                           </span>
<span  style="">2403                                                                                                                    </span>
<span class="7433359470613785749" onmouseenter="enter('7433359470613785749');" onmouseout="out('7433359470613785749');" style="">2404              // Don&#x27;t use these two variables in any of the callback runnables.                                    </span>
<span class="-3941343762342876699" onmouseenter="enter('-3941343762342876699');" onmouseout="out('-3941343762342876699');" style="">2405              // Otherwise we hold a reference to them.                                                             </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2406              final Callbacks oldCallbacks = mCallbacks.get();                                                      </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2407              if (oldCallbacks == null) {                                                                           </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2408                  // This launcher has exited and nobody bothered to tell us.  Just bail.                           </span>
<span class="3451244406562267616" onmouseenter="enter('3451244406562267616');" onmouseout="out('3451244406562267616');" style="">2409                  Log.w(TAG, &quot;LoaderTask running with no launcher&quot;);                                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2410                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2411              }                                                                                                     </span>
<span  style="">2412                                                                                                                    </span>
<span class="1896400737527502430" onmouseenter="enter('1896400737527502430');" onmouseout="out('1896400737527502430');" style="">2413              // Save a copy of all the bg-thread collections                                                       </span>
<span class="8376150118125167095" onmouseenter="enter('8376150118125167095');" onmouseout="out('8376150118125167095');" style="">2414              ArrayList&lt;ItemInfo&gt; workspaceItems = new ArrayList&lt;ItemInfo&gt;();                                       </span>
<span class="-9044996375001817267" onmouseenter="enter('-9044996375001817267');" onmouseout="out('-9044996375001817267');" style="">2415              ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets =                                                         </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2416                      new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                       </span>
<span class="1486993560554459234" onmouseenter="enter('1486993560554459234');" onmouseout="out('1486993560554459234');" style="">2417              HashMap&lt;Long, FolderInfo&gt; folders = new HashMap&lt;Long, FolderInfo&gt;();                                  </span>
<span class="-2531396011753159513" onmouseenter="enter('-2531396011753159513');" onmouseout="out('-2531396011753159513');" style="">2418              HashMap&lt;Long, ItemInfo&gt; itemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                                   </span>
<span class="2122428953856879736" onmouseenter="enter('2122428953856879736');" onmouseout="out('2122428953856879736');" style="">2419              ArrayList&lt;Long&gt; orderedScreenIds = new ArrayList&lt;Long&gt;();                                             </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2420              synchronized (sBgLock) {                                                                              </span>
<span class="2318166879831487746" onmouseenter="enter('2318166879831487746');" onmouseout="out('2318166879831487746');" style="">2421                  workspaceItems.addAll(sBgWorkspaceItems);                                                         </span>
<span class="5776161881735381038" onmouseenter="enter('5776161881735381038');" onmouseout="out('5776161881735381038');" style="">2422                  appWidgets.addAll(sBgAppWidgets);                                                                 </span>
<span class="1929780610659636161" onmouseenter="enter('1929780610659636161');" onmouseout="out('1929780610659636161');" style="">2423                  folders.putAll(sBgFolders);                                                                       </span>
<span class="3382494184063613290" onmouseenter="enter('3382494184063613290');" onmouseout="out('3382494184063613290');" style="">2424                  itemsIdMap.putAll(sBgItemsIdMap);                                                                 </span>
<span class="-8476373911620507604" onmouseenter="enter('-8476373911620507604');" onmouseout="out('-8476373911620507604');" style="">2425                  orderedScreenIds.addAll(sBgWorkspaceScreens);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2426              }                                                                                                     </span>
<span  style="">2427                                                                                                                    </span>
<span class="-6727444800593242016" onmouseenter="enter('-6727444800593242016');" onmouseout="out('-6727444800593242016');" style="">2428              final boolean isLoadingSynchronously =                                                                </span>
<span class="-5819807820500279130" onmouseenter="enter('-5819807820500279130');" onmouseout="out('-5819807820500279130');" style="">2429                      synchronizeBindPage != PagedView.INVALID_RESTORE_PAGE;                                        </span>
<span class="2949253642379813881" onmouseenter="enter('2949253642379813881');" onmouseout="out('2949253642379813881');" style="">2430              int currScreen = isLoadingSynchronously ? synchronizeBindPage :                                       </span>
<span class="-3178994835189561329" onmouseenter="enter('-3178994835189561329');" onmouseout="out('-3178994835189561329');" style="">2431                  oldCallbacks.getCurrentWorkspaceScreen();                                                         </span>
<span class="-8072033936298463796" onmouseenter="enter('-8072033936298463796');" onmouseout="out('-8072033936298463796');" style="">2432              if (currScreen &gt;= orderedScreenIds.size()) {                                                          </span>
<span class="6825640116866860115" onmouseenter="enter('6825640116866860115');" onmouseout="out('6825640116866860115');" style="">2433                  // There may be no workspace screens (just hotseat items and an empty page).                      </span>
<span class="-1349681419310339536" onmouseenter="enter('-1349681419310339536');" onmouseout="out('-1349681419310339536');" style="">2434                  currScreen = PagedView.INVALID_RESTORE_PAGE;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2435              }                                                                                                     </span>
<span class="-335994314648006585" onmouseenter="enter('-335994314648006585');" onmouseout="out('-335994314648006585');" style="">2436              final int currentScreen = currScreen;                                                                 </span>
<span class="2351793782480240365" onmouseenter="enter('2351793782480240365');" onmouseout="out('2351793782480240365');" style="">2437              final long currentScreenId = currentScreen &lt; 0                                                        </span>
<span class="-3569859106639415689" onmouseenter="enter('-3569859106639415689');" onmouseout="out('-3569859106639415689');" style="">2438                      ? INVALID_SCREEN_ID : orderedScreenIds.get(currentScreen);                                    </span>
<span  style="">2439                                                                                                                    </span>
<span class="6814554556760518768" onmouseenter="enter('6814554556760518768');" onmouseout="out('6814554556760518768');" style="">2440              // Load all the items that are on the current page first (and in the process, unbind                  </span>
<span class="-8025412368184811901" onmouseenter="enter('-8025412368184811901');" onmouseout="out('-8025412368184811901');" style="">2441              // all the existing workspace items before we call startBinding() below.                              </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style="">2442              unbindWorkspaceItemsOnMainThread();                                                                   </span>
<span  style="">2443                                                                                                                    </span>
<span class="-2890632990436762470" onmouseenter="enter('-2890632990436762470');" onmouseout="out('-2890632990436762470');" style="">2444              // Separate the items that are on the current screen, and all the other remaining items               </span>
<span class="-1725873569461296561" onmouseenter="enter('-1725873569461296561');" onmouseout="out('-1725873569461296561');" style="">2445              ArrayList&lt;ItemInfo&gt; currentWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                                </span>
<span class="-3652813720009519444" onmouseenter="enter('-3652813720009519444');" onmouseout="out('-3652813720009519444');" style="">2446              ArrayList&lt;ItemInfo&gt; otherWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                                  </span>
<span class="1957921863279922763" onmouseenter="enter('1957921863279922763');" onmouseout="out('1957921863279922763');" style="">2447              ArrayList&lt;LauncherAppWidgetInfo&gt; currentAppWidgets =                                                  </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2448                      new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                       </span>
<span class="-340469327534164281" onmouseenter="enter('-340469327534164281');" onmouseout="out('-340469327534164281');" style="">2449              ArrayList&lt;LauncherAppWidgetInfo&gt; otherAppWidgets =                                                    </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2450                      new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                       </span>
<span class="1678682221916250445" onmouseenter="enter('1678682221916250445');" onmouseout="out('1678682221916250445');" style="">2451              HashMap&lt;Long, FolderInfo&gt; currentFolders = new HashMap&lt;Long, FolderInfo&gt;();                           </span>
<span class="6055163357301009248" onmouseenter="enter('6055163357301009248');" onmouseout="out('6055163357301009248');" style="">2452              HashMap&lt;Long, FolderInfo&gt; otherFolders = new HashMap&lt;Long, FolderInfo&gt;();                             </span>
<span  style="">2453                                                                                                                    </span>
<span class="-6089822518842723893" onmouseenter="enter('-6089822518842723893');" onmouseout="out('-6089822518842723893');" style="">2454              filterCurrentWorkspaceItems(currentScreenId, workspaceItems, currentWorkspaceItems,                   </span>
<span class="-8375758480995422912" onmouseenter="enter('-8375758480995422912');" onmouseout="out('-8375758480995422912');" style="">2455                      otherWorkspaceItems);                                                                         </span>
<span class="-866463348054163616" onmouseenter="enter('-866463348054163616');" onmouseout="out('-866463348054163616');" style="">2456              filterCurrentAppWidgets(currentScreenId, appWidgets, currentAppWidgets,                               </span>
<span class="4579895579276341407" onmouseenter="enter('4579895579276341407');" onmouseout="out('4579895579276341407');" style="">2457                      otherAppWidgets);                                                                             </span>
<span class="-8098352111604685386" onmouseenter="enter('-8098352111604685386');" onmouseout="out('-8098352111604685386');" style="">2458              filterCurrentFolders(currentScreenId, itemsIdMap, folders, currentFolders,                            </span>
<span class="9146999591596374961" onmouseenter="enter('9146999591596374961');" onmouseout="out('9146999591596374961');" style="">2459                      otherFolders);                                                                                </span>
<span class="-3334490908115707670" onmouseenter="enter('-3334490908115707670');" onmouseout="out('-3334490908115707670');" style="">2460              sortWorkspaceItemsSpatially(currentWorkspaceItems);                                                   </span>
<span class="7557616132302919391" onmouseenter="enter('7557616132302919391');" onmouseout="out('7557616132302919391');" style="">2461              sortWorkspaceItemsSpatially(otherWorkspaceItems);                                                     </span>
<span  style="">2462                                                                                                                    </span>
<span class="-5681027322920042460" onmouseenter="enter('-5681027322920042460');" onmouseout="out('-5681027322920042460');" style="">2463              // Tell the workspace that we&#x27;re about to start binding items                                         </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2464              r = new Runnable() {                                                                                  </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2465                  public void run() {                                                                               </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2466                      Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                          </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2467                      if (callbacks != null) {                                                                      </span>
<span class="-4858717627969339167" onmouseenter="enter('-4858717627969339167');" onmouseout="out('-4858717627969339167');" style="">2468                          callbacks.startBinding();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2469                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2470                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2471              };                                                                                                    </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2472              runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                                     </span>
<span  style="">2473                                                                                                                    </span>
<span class="5270406270692369283" onmouseenter="enter('5270406270692369283');" onmouseout="out('5270406270692369283');" style="">2474              bindWorkspaceScreens(oldCallbacks, orderedScreenIds);                                                 </span>
<span  style="">2475                                                                                                                    </span>
<span class="-8614752954403058095" onmouseenter="enter('-8614752954403058095');" onmouseout="out('-8614752954403058095');" style="">2476              // Load items on the current page                                                                     </span>
<span class="7514755776427017102" onmouseenter="enter('7514755776427017102');" onmouseout="out('7514755776427017102');" style="">2477              bindWorkspaceItems(oldCallbacks, currentWorkspaceItems, currentAppWidgets,                            </span>
<span class="-6104188658851873503" onmouseenter="enter('-6104188658851873503');" onmouseout="out('-6104188658851873503');" style="">2478                      currentFolders, null);                                                                        </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2479              if (isLoadingSynchronously) {                                                                         </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2480                  r = new Runnable() {                                                                              </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2481                      public void run() {                                                                           </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2482                          Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                      </span>
<span class="1520569606497568986" onmouseenter="enter('1520569606497568986');" onmouseout="out('1520569606497568986');" style="">2483                          if (callbacks != null &amp;&amp; currentScreen != PagedView.INVALID_RESTORE_PAGE) {               </span>
<span class="-8453570054408401460" onmouseenter="enter('-8453570054408401460');" onmouseout="out('-8453570054408401460');" style="">2484                              callbacks.onPageBoundSynchronously(currentScreen);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2485                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2486                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2487                  };                                                                                                </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2488                  runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2489              }                                                                                                     </span>
<span  style="">2490                                                                                                                    </span>
<span class="-5413736965388393233" onmouseenter="enter('-5413736965388393233');" onmouseout="out('-5413736965388393233');" style="">2491              // Load all the remaining pages (if we are loading synchronously, we want to defer this               </span>
<span class="-2955787106587599134" onmouseenter="enter('-2955787106587599134');" onmouseout="out('-2955787106587599134');" style="">2492              // work until after the first render)                                                                 </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">2493              mDeferredBindRunnables.clear();                                                                       </span>
<span class="5032352887958756295" onmouseenter="enter('5032352887958756295');" onmouseout="out('5032352887958756295');" style="">2494              bindWorkspaceItems(oldCallbacks, otherWorkspaceItems, otherAppWidgets, otherFolders,                  </span>
<span class="-2167949041803207061" onmouseenter="enter('-2167949041803207061');" onmouseout="out('-2167949041803207061');" style="">2495                      (isLoadingSynchronously ? mDeferredBindRunnables : null));                                    </span>
<span  style="">2496                                                                                                                    </span>
<span class="4011061048965913553" onmouseenter="enter('4011061048965913553');" onmouseout="out('4011061048965913553');" style="">2497              // Tell the workspace that we&#x27;re done binding items                                                   </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2498              r = new Runnable() {                                                                                  </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2499                  public void run() {                                                                               </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2500                      Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                          </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2501                      if (callbacks != null) {                                                                      </span>
<span class="4571657590383009749" onmouseenter="enter('4571657590383009749');" onmouseout="out('4571657590383009749');" style="">2502                          callbacks.finishBindingItems(isUpgradePath);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2503                      }                                                                                             </span>
<span  style="">2504                                                                                                                    </span>
<span class="3327220122133784387" onmouseenter="enter('3327220122133784387');" onmouseout="out('3327220122133784387');" style="">2505                      // If we&#x27;re profiling, ensure this is the last thing in the queue.                            </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2506                      if (DEBUG_LOADERS) {                                                                          </span>
<span class="355954012869630075" onmouseenter="enter('355954012869630075');" onmouseout="out('355954012869630075');" style="">2507                          Log.d(TAG, &quot;bound workspace in &quot;                                                          </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2508                              + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2509                      }                                                                                             </span>
<span  style="">2510                                                                                                                    </span>
<span class="-2372807547969983284" onmouseenter="enter('-2372807547969983284');" onmouseout="out('-2372807547969983284');" style="">2511                      mIsLoadingAndBindingWorkspace = false;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2512                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2513              };                                                                                                    </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2514              if (isLoadingSynchronously) {                                                                         </span>
<span class="-7585940083186897617" onmouseenter="enter('-7585940083186897617');" onmouseout="out('-7585940083186897617');" style="">2515                  mDeferredBindRunnables.add(r);                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2516              } else {                                                                                              </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2517                  runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2518              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2519          }                                                                                                         </span>
<span  style="">2520                                                                                                                    </span>
<span class="-8837645024880398734" onmouseenter="enter('-8837645024880398734');" onmouseout="out('-8837645024880398734');" style="">2521          private void loadAndBindAllApps() {                                                                       </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2522              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="-2830976254331120227" onmouseenter="enter('-2830976254331120227');" onmouseout="out('-2830976254331120227');" style="">2523                  Log.d(TAG, &quot;loadAndBindAllApps mAllAppsLoaded=&quot; + mAllAppsLoaded);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2524              }                                                                                                     </span>
<span class="-6125216986221494355" onmouseenter="enter('-6125216986221494355');" onmouseout="out('-6125216986221494355');" style="">2525              if (!mAllAppsLoaded) {                                                                                </span>
<span class="5842757820135196564" onmouseenter="enter('5842757820135196564');" onmouseout="out('5842757820135196564');" style="">2526                  loadAllApps();                                                                                    </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">2527                  synchronized (LoaderTask.this) {                                                                  </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2528                      if (mStopped) {                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2529                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2530                      }                                                                                             </span>
<span class="4623635226903027710" onmouseenter="enter('4623635226903027710');" onmouseout="out('4623635226903027710');" style="">2531                      mAllAppsLoaded = true;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2532                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2533              } else {                                                                                              </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">2534                  onlyBindAllApps();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2535              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2536          }                                                                                                         </span>
<span  style="">2537                                                                                                                    </span>
<span class="4707433981787810272" onmouseenter="enter('4707433981787810272');" onmouseout="out('4707433981787810272');" style="">2538          private void onlyBindAllApps() {                                                                          </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2539              final Callbacks oldCallbacks = mCallbacks.get();                                                      </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2540              if (oldCallbacks == null) {                                                                           </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2541                  // This launcher has exited and nobody bothered to tell us.  Just bail.                           </span>
<span class="1659909424723635951" onmouseenter="enter('1659909424723635951');" onmouseout="out('1659909424723635951');" style="">2542                  Log.w(TAG, &quot;LoaderTask running with no launcher (onlyBindAllApps)&quot;);                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2543                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2544              }                                                                                                     </span>
<span  style="">2545                                                                                                                    </span>
<span class="904073869424416989" onmouseenter="enter('904073869424416989');" onmouseout="out('904073869424416989');" style="">2546              // shallow copy                                                                                       </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">2547              @SuppressWarnings(&quot;unchecked&quot;)                                                                        </span>
<span class="6400779648201267598" onmouseenter="enter('6400779648201267598');" onmouseout="out('6400779648201267598');" style="">2548              final ArrayList&lt;AppInfo&gt; list                                                                         </span>
<span class="-2385577679344520462" onmouseenter="enter('-2385577679344520462');" onmouseout="out('-2385577679344520462');" style="">2549                      = (ArrayList&lt;AppInfo&gt;) mBgAllAppsList.data.clone();                                           </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">2550              Runnable r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2551                  public void run() {                                                                               </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2552                      final long t = SystemClock.uptimeMillis();                                                    </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2553                      final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                    </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2554                      if (callbacks != null) {                                                                      </span>
<span class="-4175293191087427555" onmouseenter="enter('-4175293191087427555');" onmouseout="out('-4175293191087427555');" style="">2555                          callbacks.bindAllApplications(list);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2556                      }                                                                                             </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2557                      if (DEBUG_LOADERS) {                                                                          </span>
<span class="-8852680552322187165" onmouseenter="enter('-8852680552322187165');" onmouseout="out('-8852680552322187165');" style="">2558                          Log.d(TAG, &quot;bound all &quot; + list.size() + &quot; apps from cache in &quot;                            </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2559                                  + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2560                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2561                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2562              };                                                                                                    </span>
<span class="1625697599418198126" onmouseenter="enter('1625697599418198126');" onmouseout="out('1625697599418198126');" style="">2563              boolean isRunningOnMainThread = !(sWorkerThread.getThreadId() == Process.myTid());                    </span>
<span class="-5455987777066046644" onmouseenter="enter('-5455987777066046644');" onmouseout="out('-5455987777066046644');" style="">2564              if (isRunningOnMainThread) {                                                                          </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style="">2565                  r.run();                                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2566              } else {                                                                                              </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="">2567                  mHandler.post(r);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2568              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2569          }                                                                                                         </span>
<span  style="">2570                                                                                                                    </span>
<span class="-6895852158956881814" onmouseenter="enter('-6895852158956881814');" onmouseout="out('-6895852158956881814');" style="">2571          private void loadAllApps() {                                                                              </span>
<span class="3240137791137450764" onmouseenter="enter('3240137791137450764');" onmouseout="out('3240137791137450764');" style="">2572              final long loadTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                                 </span>
<span  style="">2573                                                                                                                    </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2574              final Callbacks oldCallbacks = mCallbacks.get();                                                      </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2575              if (oldCallbacks == null) {                                                                           </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2576                  // This launcher has exited and nobody bothered to tell us.  Just bail.                           </span>
<span class="-6509823964207432628" onmouseenter="enter('-6509823964207432628');" onmouseout="out('-6509823964207432628');" style="">2577                  Log.w(TAG, &quot;LoaderTask running with no launcher (loadAllApps)&quot;);                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2578                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2579              }                                                                                                     </span>
<span  style="">2580                                                                                                                    </span>
<span class="1501892088590866369" onmouseenter="enter('1501892088590866369');" onmouseout="out('1501892088590866369');" style="">2581              final PackageManager packageManager = mContext.getPackageManager();                                   </span>
<span class="3249044048564826962" onmouseenter="enter('3249044048564826962');" onmouseout="out('3249044048564826962');" style="">2582              final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);                                       </span>
<span class="7749064114250496515" onmouseenter="enter('7749064114250496515');" onmouseout="out('7749064114250496515');" style="">2583              mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                     </span>
<span  style="">2584                                                                                                                    </span>
<span class="2323997493385795900" onmouseenter="enter('2323997493385795900');" onmouseout="out('2323997493385795900');" style="">2585              // Clear the list of apps                                                                             </span>
<span class="-3100741238331493656" onmouseenter="enter('-3100741238331493656');" onmouseout="out('-3100741238331493656');" style="">2586              mBgAllAppsList.clear();                                                                               </span>
<span  style="">2587                                                                                                                    </span>
<span class="-4489177435133431981" onmouseenter="enter('-4489177435133431981');" onmouseout="out('-4489177435133431981');" style="">2588              // Query for the set of apps                                                                          </span>
<span class="6799319218362813943" onmouseenter="enter('6799319218362813943');" onmouseout="out('6799319218362813943');" style="">2589              final long qiaTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                                  </span>
<span class="-7993784721640929386" onmouseenter="enter('-7993784721640929386');" onmouseout="out('-7993784721640929386');" style="">2590              List&lt;ResolveInfo&gt; apps = packageManager.queryIntentActivities(mainIntent, 0);                         </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2591              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="-8953089628779584367" onmouseenter="enter('-8953089628779584367');" onmouseout="out('-8953089628779584367');" style="">2592                  Log.d(TAG, &quot;queryIntentActivities took &quot;                                                          </span>
<span class="8237341079980485738" onmouseenter="enter('8237341079980485738');" onmouseout="out('8237341079980485738');" style="">2593                          + (SystemClock.uptimeMillis()-qiaTime) + &quot;ms&quot;);                                           </span>
<span class="-9015079490762020933" onmouseenter="enter('-9015079490762020933');" onmouseout="out('-9015079490762020933');" style="">2594                  Log.d(TAG, &quot;queryIntentActivities got &quot; + apps.size() + &quot; apps&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2595              }                                                                                                     </span>
<span class="-1144129018602551066" onmouseenter="enter('-1144129018602551066');" onmouseout="out('-1144129018602551066');" style="">2596              // Fail if we don&#x27;t have any apps                                                                     </span>
<span class="-1385682343056466434" onmouseenter="enter('-1385682343056466434');" onmouseout="out('-1385682343056466434');" style="">2597              if (apps == null || apps.isEmpty()) {                                                                 </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2598                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2599              }                                                                                                     </span>
<span class="-5585112001695951885" onmouseenter="enter('-5585112001695951885');" onmouseout="out('-5585112001695951885');" style="">2600              // Sort the applications by name                                                                      </span>
<span class="5879018485786384871" onmouseenter="enter('5879018485786384871');" onmouseout="out('5879018485786384871');" style="">2601              final long sortTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                                 </span>
<span class="3347614076781191804" onmouseenter="enter('3347614076781191804');" onmouseout="out('3347614076781191804');" style="">2602              Collections.sort(apps,                                                                                </span>
<span class="-8211974845882715204" onmouseenter="enter('-8211974845882715204');" onmouseout="out('-8211974845882715204');" style="">2603                      new LauncherModel.ShortcutNameComparator(packageManager, mLabelCache));                       </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2604              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="8116347759372038508" onmouseenter="enter('8116347759372038508');" onmouseout="out('8116347759372038508');" style="">2605                  Log.d(TAG, &quot;sort took &quot;                                                                           </span>
<span class="992817212926202968" onmouseenter="enter('992817212926202968');" onmouseout="out('992817212926202968');" style="">2606                          + (SystemClock.uptimeMillis()-sortTime) + &quot;ms&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2607              }                                                                                                     </span>
<span  style="">2608                                                                                                                    </span>
<span class="7729934896614039986" onmouseenter="enter('7729934896614039986');" onmouseout="out('7729934896614039986');" style="">2609              // Create the ApplicationInfos                                                                        </span>
<span class="-5895751517948944509" onmouseenter="enter('-5895751517948944509');" onmouseout="out('-5895751517948944509');" style="">2610              for (int i = 0; i &lt; apps.size(); i++) {                                                               </span>
<span class="2626157602240887809" onmouseenter="enter('2626157602240887809');" onmouseout="out('2626157602240887809');" style="">2611                  ResolveInfo app = apps.get(i);                                                                    </span>
<span class="3586781851650279349" onmouseenter="enter('3586781851650279349');" onmouseout="out('3586781851650279349');" style="">2612                  // This builds the icon bitmaps.                                                                  </span>
<span class="-6607005785467864621" onmouseenter="enter('-6607005785467864621');" onmouseout="out('-6607005785467864621');" style="">2613                  mBgAllAppsList.add(new AppInfo(packageManager, app,                                               </span>
<span class="-2018038209439913805" onmouseenter="enter('-2018038209439913805');" onmouseout="out('-2018038209439913805');" style="">2614                          mIconCache, mLabelCache));                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2615              }                                                                                                     </span>
<span  style="">2616                                                                                                                    </span>
<span class="-5221747652878631284" onmouseenter="enter('-5221747652878631284');" onmouseout="out('-5221747652878631284');" style="">2617              // Huh? Shouldn&#x27;t this be inside the Runnable below?                                                  </span>
<span class="4457761250277868019" onmouseenter="enter('4457761250277868019');" onmouseout="out('4457761250277868019');" style="">2618              final ArrayList&lt;AppInfo&gt; added = mBgAllAppsList.added;                                                </span>
<span class="3218431008368817671" onmouseenter="enter('3218431008368817671');" onmouseout="out('3218431008368817671');" style="">2619              mBgAllAppsList.added = new ArrayList&lt;AppInfo&gt;();                                                      </span>
<span  style="">2620                                                                                                                    </span>
<span class="2526791049904400058" onmouseenter="enter('2526791049904400058');" onmouseout="out('2526791049904400058');" style="">2621              // Post callback on main thread                                                                       </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2622              mHandler.post(new Runnable() {                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2623                  public void run() {                                                                               </span>
<span class="-2007882421121122273" onmouseenter="enter('-2007882421121122273');" onmouseout="out('-2007882421121122273');" style="">2624                      final long bindTime = SystemClock.uptimeMillis();                                             </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2625                      final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                    </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2626                      if (callbacks != null) {                                                                      </span>
<span class="8095088373687662981" onmouseenter="enter('8095088373687662981');" onmouseout="out('8095088373687662981');" style="">2627                          callbacks.bindAllApplications(added);                                                     </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2628                          if (DEBUG_LOADERS) {                                                                      </span>
<span class="1059969227192257889" onmouseenter="enter('1059969227192257889');" onmouseout="out('1059969227192257889');" style="">2629                              Log.d(TAG, &quot;bound &quot; + added.size() + &quot; apps in &quot;                                      </span>
<span class="-7437359873458345222" onmouseenter="enter('-7437359873458345222');" onmouseout="out('-7437359873458345222');" style="">2630                                  + (SystemClock.uptimeMillis() - bindTime) + &quot;ms&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2631                          }                                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2632                      } else {                                                                                      </span>
<span class="7641212838781589328" onmouseenter="enter('7641212838781589328');" onmouseout="out('7641212838781589328');" style="">2633                          Log.i(TAG, &quot;not binding apps: no Launcher activity&quot;);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2634                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2635                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2636              });                                                                                                   </span>
<span  style="">2637                                                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2638              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="-4702241865893587262" onmouseenter="enter('-4702241865893587262');" onmouseout="out('-4702241865893587262');" style="">2639                  Log.d(TAG, &quot;Icons processed in &quot;                                                                  </span>
<span class="-1277503613614461490" onmouseenter="enter('-1277503613614461490');" onmouseout="out('-1277503613614461490');" style="">2640                          + (SystemClock.uptimeMillis() - loadTime) + &quot;ms&quot;);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2641              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2642          }                                                                                                         </span>
<span  style="">2643                                                                                                                    </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">2644          public void dumpState() {                                                                                 </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2645              synchronized (sBgLock) {                                                                              </span>
<span class="8510692516384923340" onmouseenter="enter('8510692516384923340');" onmouseout="out('8510692516384923340');" style="">2646                  Log.d(TAG, &quot;mLoaderTask.mContext=&quot; + mContext);                                                   </span>
<span class="-5057473576968780754" onmouseenter="enter('-5057473576968780754');" onmouseout="out('-5057473576968780754');" style="">2647                  Log.d(TAG, &quot;mLoaderTask.mIsLaunching=&quot; + mIsLaunching);                                           </span>
<span class="5394362584347621452" onmouseenter="enter('5394362584347621452');" onmouseout="out('5394362584347621452');" style="">2648                  Log.d(TAG, &quot;mLoaderTask.mStopped=&quot; + mStopped);                                                   </span>
<span class="2283901653600186000" onmouseenter="enter('2283901653600186000');" onmouseout="out('2283901653600186000');" style="">2649                  Log.d(TAG, &quot;mLoaderTask.mLoadAndBindStepFinished=&quot; + mLoadAndBindStepFinished);                   </span>
<span class="-259407417202798794" onmouseenter="enter('-259407417202798794');" onmouseout="out('-259407417202798794');" style="">2650                  Log.d(TAG, &quot;mItems size=&quot; + sBgWorkspaceItems.size());                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2651              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2652          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2653      }                                                                                                             </span>
<span  style="">2654                                                                                                                    </span>
<span class="7630100460211487014" onmouseenter="enter('7630100460211487014');" onmouseout="out('7630100460211487014');" style="">2655      void enqueuePackageUpdated(PackageUpdatedTask task) {                                                         </span>
<span class="5827584276449890800" onmouseenter="enter('5827584276449890800');" onmouseout="out('5827584276449890800');" style="">2656          sWorker.post(task);                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2657      }                                                                                                             </span>
<span  style="">2658                                                                                                                    </span>
<span class="4517543426948493114" onmouseenter="enter('4517543426948493114');" onmouseout="out('4517543426948493114');" style="">2659      private class PackageUpdatedTask implements Runnable {                                                        </span>
<span class="-2369313534963024986" onmouseenter="enter('-2369313534963024986');" onmouseout="out('-2369313534963024986');" style="">2660          int mOp;                                                                                                  </span>
<span class="1329266106484135476" onmouseenter="enter('1329266106484135476');" onmouseout="out('1329266106484135476');" style="">2661          String[] mPackages;                                                                                       </span>
<span  style="">2662                                                                                                                    </span>
<span class="7962554983790751070" onmouseenter="enter('7962554983790751070');" onmouseout="out('7962554983790751070');" style="">2663          public static final int OP_NONE = 0;                                                                      </span>
<span class="2199739460496975128" onmouseenter="enter('2199739460496975128');" onmouseout="out('2199739460496975128');" style="">2664          public static final int OP_ADD = 1;                                                                       </span>
<span class="-6492257742329868745" onmouseenter="enter('-6492257742329868745');" onmouseout="out('-6492257742329868745');" style="">2665          public static final int OP_UPDATE = 2;                                                                    </span>
<span class="7223750328294921743" onmouseenter="enter('7223750328294921743');" onmouseout="out('7223750328294921743');" style="">2666          public static final int OP_REMOVE = 3; // uninstlled                                                      </span>
<span class="8627918612960647103" onmouseenter="enter('8627918612960647103');" onmouseout="out('8627918612960647103');" style="">2667          public static final int OP_UNAVAILABLE = 4; // external media unmounted                                   </span>
<span  style="">2668                                                                                                                    </span>
<span  style="">2669                                                                                                                    </span>
<span class="-2899951589874278155" onmouseenter="enter('-2899951589874278155');" onmouseout="out('-2899951589874278155');" style="">2670          public PackageUpdatedTask(int op, String[] packages) {                                                    </span>
<span class="191999664456871419" onmouseenter="enter('191999664456871419');" onmouseout="out('191999664456871419');" style="">2671              mOp = op;                                                                                             </span>
<span class="-8641118446551244060" onmouseenter="enter('-8641118446551244060');" onmouseout="out('-8641118446551244060');" style="">2672              mPackages = packages;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2673          }                                                                                                         </span>
<span  style="">2674                                                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2675          public void run() {                                                                                       </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">2676              final Context context = mApp.getContext();                                                            </span>
<span  style="">2677                                                                                                                    </span>
<span class="-8513751550533795426" onmouseenter="enter('-8513751550533795426');" onmouseout="out('-8513751550533795426');" style="">2678              final String[] packages = mPackages;                                                                  </span>
<span class="3997761927841529422" onmouseenter="enter('3997761927841529422');" onmouseout="out('3997761927841529422');" style="">2679              final int N = packages.length;                                                                        </span>
<span class="-2883270888213154035" onmouseenter="enter('-2883270888213154035');" onmouseout="out('-2883270888213154035');" style="">2680              switch (mOp) {                                                                                        </span>
<span class="449333994232188305" onmouseenter="enter('449333994232188305');" onmouseout="out('449333994232188305');" style="">2681                  case OP_ADD:                                                                                      </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">2682                      for (int i=0; i&lt;N; i++) {                                                                     </span>
<span class="8529503526854951097" onmouseenter="enter('8529503526854951097');" onmouseout="out('8529503526854951097');" style="">2683                          if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.addPackage &quot; + packages[i]);                  </span>

<span class="-2949849672001849759" onmouseenter="enter('-2949849672001849759');" onmouseout="out('-2949849672001849759');" style="">2684                          mBgAllAppsList.addPackage(context, packages[i]);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2685                      }                                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2686                      break;                                                                                        </span>
<span class="-4770369244410347850" onmouseenter="enter('-4770369244410347850');" onmouseout="out('-4770369244410347850');" style="">2687                  case OP_UPDATE:                                                                                   </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">2688                      for (int i=0; i&lt;N; i++) {                                                                     </span>
<span class="-3432436938232924374" onmouseenter="enter('-3432436938232924374');" onmouseout="out('-3432436938232924374');" style="">2689                          if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.updatePackage &quot; + packages[i]);               </span>
<span class="-272128531266392722" onmouseenter="enter('-272128531266392722');" onmouseout="out('-272128531266392722');" style="">2690                          mBgAllAppsList.updatePackage(context, packages[i]);                                       </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">2691                          WidgetPreviewLoader.removePackageFromDb(                                                  </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">2692                                  mApp.getWidgetPreviewCacheDb(), packages[i]);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2693                      }                                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2694                      break;                                                                                        </span>
<span class="-5474983820901132713" onmouseenter="enter('-5474983820901132713');" onmouseout="out('-5474983820901132713');" style="">2695                  case OP_REMOVE:                                                                                   </span>
<span class="9130220194739024640" onmouseenter="enter('9130220194739024640');" onmouseout="out('9130220194739024640');" style="">2696                  case OP_UNAVAILABLE:                                                                              </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">2697                      for (int i=0; i&lt;N; i++) {                                                                     </span>
<span class="3815138171377980553" onmouseenter="enter('3815138171377980553');" onmouseout="out('3815138171377980553');" style="">2698                          if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.removePackage &quot; + packages[i]);               </span>
<span class="7669526743413608016" onmouseenter="enter('7669526743413608016');" onmouseout="out('7669526743413608016');" style="">2699                          mBgAllAppsList.removePackage(packages[i]);                                                </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">2700                          WidgetPreviewLoader.removePackageFromDb(                                                  </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">2701                                  mApp.getWidgetPreviewCacheDb(), packages[i]);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2702                      }                                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2703                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2704              }                                                                                                     </span>
<span  style="">2705                                                                                                                    </span>
<span class="1572309132673002234" onmouseenter="enter('1572309132673002234');" onmouseout="out('1572309132673002234');" style="">2706              ArrayList&lt;AppInfo&gt; added = null;                                                                      </span>
<span class="-3271065843717738915" onmouseenter="enter('-3271065843717738915');" onmouseout="out('-3271065843717738915');" style="">2707              ArrayList&lt;AppInfo&gt; modified = null;                                                                   </span>
<span class="-5760221660526082511" onmouseenter="enter('-5760221660526082511');" onmouseout="out('-5760221660526082511');" style="">2708              final ArrayList&lt;AppInfo&gt; removedApps = new ArrayList&lt;AppInfo&gt;();                                      </span>
<span  style="">2709                                                                                                                    </span>
<span class="5103344907876037986" onmouseenter="enter('5103344907876037986');" onmouseout="out('5103344907876037986');" style="">2710              if (mBgAllAppsList.added.size() &gt; 0) {                                                                </span>
<span class="-6832117111735480722" onmouseenter="enter('-6832117111735480722');" onmouseout="out('-6832117111735480722');" style="">2711                  added = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.added);                                             </span>
<span class="7424740575354292437" onmouseenter="enter('7424740575354292437');" onmouseout="out('7424740575354292437');" style="">2712                  mBgAllAppsList.added.clear();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2713              }                                                                                                     </span>
<span class="-2487689472149982581" onmouseenter="enter('-2487689472149982581');" onmouseout="out('-2487689472149982581');" style="">2714              if (mBgAllAppsList.modified.size() &gt; 0) {                                                             </span>
<span class="-263080790556278433" onmouseenter="enter('-263080790556278433');" onmouseout="out('-263080790556278433');" style="">2715                  modified = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.modified);                                       </span>
<span class="7356755564467619497" onmouseenter="enter('7356755564467619497');" onmouseout="out('7356755564467619497');" style="">2716                  mBgAllAppsList.modified.clear();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2717              }                                                                                                     </span>
<span class="1067177803970588976" onmouseenter="enter('1067177803970588976');" onmouseout="out('1067177803970588976');" style="">2718              if (mBgAllAppsList.removed.size() &gt; 0) {                                                              </span>
<span class="7103303915069909513" onmouseenter="enter('7103303915069909513');" onmouseout="out('7103303915069909513');" style="">2719                  removedApps.addAll(mBgAllAppsList.removed);                                                       </span>
<span class="6489927836548040849" onmouseenter="enter('6489927836548040849');" onmouseout="out('6489927836548040849');" style="">2720                  mBgAllAppsList.removed.clear();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2721              }                                                                                                     </span>
<span  style="">2722                                                                                                                    </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="">2723              final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                             </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">2724              if (callbacks == null) {                                                                              </span>
<span class="8755914139287185296" onmouseenter="enter('8755914139287185296');" onmouseout="out('8755914139287185296');" style="">2725                  Log.w(TAG, &quot;Nobody to tell about the new app.  Launcher is probably loading.&quot;);                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2726                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2727              }                                                                                                     </span>
<span  style="">2728                                                                                                                    </span>
<span class="-6581952787492343966" onmouseenter="enter('-6581952787492343966');" onmouseout="out('-6581952787492343966');" style="">2729              if (added != null) {                                                                                  </span>
<span class="2110051729201547029" onmouseenter="enter('2110051729201547029');" onmouseout="out('2110051729201547029');" style="">2730                  // Ensure that we add all the workspace applications to the db                                    </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2731 -                if (LauncherAppState.isDisableAllApps()) {                                                        </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2732 +                Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                      </span>
<span class="-6277587630605553211" onmouseenter="enter('-6277587630605553211');" onmouseout="out('-6277587630605553211');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2733 +                if (!LauncherAppState.isDisableAllApps()) {                                                       </span>
<span class="4785144545835380546" onmouseenter="enter('4785144545835380546');" onmouseout="out('4785144545835380546');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2734 +                    addAndBindAddedApps(context, new ArrayList&lt;ItemInfo&gt;(), cb, added);                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2735 +                } else {                                                                                          </span>
<span class="7560882443822012182" onmouseenter="enter('7560882443822012182');" onmouseout="out('7560882443822012182');" style="">2736                      final ArrayList&lt;ItemInfo&gt; addedInfos = new ArrayList&lt;ItemInfo&gt;(added);                        </span>
<span class="-3306619504252280502" onmouseenter="enter('-3306619504252280502');" onmouseout="out('-3306619504252280502');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2737 -                    addAndBindAddedWorkspaceApps(context, addedInfos);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2738 -                } else {                                                                                          </span>
<span class="-4365713328493794841" onmouseenter="enter('-4365713328493794841');" onmouseout="out('-4365713328493794841');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2739 -                    addAppsToAllApps(context, added);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2740 -                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2741 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2742 -                                                                                                                  </span>
<span class="620263930069644182" onmouseenter="enter('620263930069644182');" onmouseout="out('620263930069644182');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2743 +                    addAndBindAddedApps(context, addedInfos, cb, added);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2744 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2745 +            }                                                                                                     </span>
<span class="4007684711155860753" onmouseenter="enter('4007684711155860753');" onmouseout="out('4007684711155860753');" style="">2746              if (modified != null) {                                                                               </span>
<span class="-853311881612082067" onmouseenter="enter('-853311881612082067');" onmouseout="out('-853311881612082067');" style="">2747                  final ArrayList&lt;AppInfo&gt; modifiedFinal = modified;                                                </span>
<span  style="">2748                                                                                                                    </span>
<span class="417723722259394800" onmouseenter="enter('417723722259394800');" onmouseout="out('417723722259394800');" style="">2749                  // Update the launcher db to reflect the changes                                                  </span>
<span class="3799410015074169733" onmouseenter="enter('3799410015074169733');" onmouseout="out('3799410015074169733');" style="">2750                  for (AppInfo a : modifiedFinal) {                                                                 </span>
<span class="9185020132746469320" onmouseenter="enter('9185020132746469320');" onmouseout="out('9185020132746469320');" style="">2751                      ArrayList&lt;ItemInfo&gt; infos =                                                                   </span>
<span class="1259644807303209381" onmouseenter="enter('1259644807303209381');" onmouseout="out('1259644807303209381');" style="">2752                              getItemInfoForComponentName(a.componentName);                                         </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2753                      for (ItemInfo i : infos) {                                                                    </span>
<span class="5214363519588275687" onmouseenter="enter('5214363519588275687');" onmouseout="out('5214363519588275687');" style="">2754                          if (isShortcutInfoUpdateable(i)) {                                                        </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">2755                              ShortcutInfo info = (ShortcutInfo) i;                                                 </span>
<span class="8144150917785227032" onmouseenter="enter('8144150917785227032');" onmouseout="out('8144150917785227032');" style="">2756                              info.title = a.title.toString();                                                      </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">2757                              updateItemInDatabase(context, info);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2758                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2759                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2760                  }                                                                                                 </span>
<span  style="">2761                                                                                                                    </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2762                  mHandler.post(new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2763                      public void run() {                                                                           </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2764                          Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                              </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2765                          if (callbacks == cb &amp;&amp; cb != null) {                                                      </span>
<span class="-2589314362702357801" onmouseenter="enter('-2589314362702357801');" onmouseout="out('-2589314362702357801');" style="">2766                              callbacks.bindAppsUpdated(modifiedFinal);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2767                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2768                      }                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2769                  });                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2770              }                                                                                                     </span>
<span  style="">2771                                                                                                                    </span>
<span class="-1170284362245625596" onmouseenter="enter('-1170284362245625596');" onmouseout="out('-1170284362245625596');" style="">2772              final ArrayList&lt;String&gt; removedPackageNames =                                                         </span>
<span class="-5690129641574664711" onmouseenter="enter('-5690129641574664711');" onmouseout="out('-5690129641574664711');" style="">2773                      new ArrayList&lt;String&gt;();                                                                      </span>
<span class="-5885531662055245301" onmouseenter="enter('-5885531662055245301');" onmouseout="out('-5885531662055245301');" style="">2774              if (mOp == OP_REMOVE) {                                                                               </span>
<span class="6542623662317418523" onmouseenter="enter('6542623662317418523');" onmouseout="out('6542623662317418523');" style="">2775                  // Mark all packages in the broadcast to be removed                                               </span>
<span class="7356949459385151824" onmouseenter="enter('7356949459385151824');" onmouseout="out('7356949459385151824');" style="">2776                  removedPackageNames.addAll(Arrays.asList(packages));                                              </span>
<span class="-2422536769068214973" onmouseenter="enter('-2422536769068214973');" onmouseout="out('-2422536769068214973');" style="">2777              } else if (mOp == OP_UPDATE) {                                                                        </span>
<span class="3231313637982916616" onmouseenter="enter('3231313637982916616');" onmouseout="out('3231313637982916616');" style="">2778                  // Mark disabled packages in the broadcast to be removed                                          </span>
<span class="-2640468621226648159" onmouseenter="enter('-2640468621226648159');" onmouseout="out('-2640468621226648159');" style="">2779                  final PackageManager pm = context.getPackageManager();                                            </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">2780                  for (int i=0; i&lt;N; i++) {                                                                         </span>
<span class="2935426733804348481" onmouseenter="enter('2935426733804348481');" onmouseout="out('2935426733804348481');" style="">2781                      if (isPackageDisabled(pm, packages[i])) {                                                     </span>
<span class="3041794132682496657" onmouseenter="enter('3041794132682496657');" onmouseout="out('3041794132682496657');" style="">2782                          removedPackageNames.add(packages[i]);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2783                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2784                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2785              }                                                                                                     </span>
<span class="-6735782234278978643" onmouseenter="enter('-6735782234278978643');" onmouseout="out('-6735782234278978643');" style="">2786              // Remove all the components associated with this package                                             </span>
<span class="8695538150112490085" onmouseenter="enter('8695538150112490085');" onmouseout="out('8695538150112490085');" style="">2787              for (String pn : removedPackageNames) {                                                               </span>
<span class="-8111972255125637177" onmouseenter="enter('-8111972255125637177');" onmouseout="out('-8111972255125637177');" style="">2788                  ArrayList&lt;ItemInfo&gt; infos = getItemInfoForPackageName(pn);                                        </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2789                  for (ItemInfo i : infos) {                                                                        </span>
<span class="3909885620637543615" onmouseenter="enter('3909885620637543615');" onmouseout="out('3909885620637543615');" style="">2790                      deleteItemFromDatabase(context, i);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2791                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2792              }                                                                                                     </span>
<span class="-2056292254334887175" onmouseenter="enter('-2056292254334887175');" onmouseout="out('-2056292254334887175');" style="">2793              // Remove all the specific components                                                                 </span>
<span class="-974749610616658114" onmouseenter="enter('-974749610616658114');" onmouseout="out('-974749610616658114');" style="">2794              for (AppInfo a : removedApps) {                                                                       </span>
<span class="-8237639399264107586" onmouseenter="enter('-8237639399264107586');" onmouseout="out('-8237639399264107586');" style="">2795                  ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName);                         </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2796                  for (ItemInfo i : infos) {                                                                        </span>
<span class="3909885620637543615" onmouseenter="enter('3909885620637543615');" onmouseout="out('3909885620637543615');" style="">2797                      deleteItemFromDatabase(context, i);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2798                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2799              }                                                                                                     </span>
<span class="5309180485107849948" onmouseenter="enter('5309180485107849948');" onmouseout="out('5309180485107849948');" style="">2800              if (!removedPackageNames.isEmpty() || !removedApps.isEmpty()) {                                       </span>
<span class="-8579411662137624168" onmouseenter="enter('-8579411662137624168');" onmouseout="out('-8579411662137624168');" style="">2801                  // Remove any queued items from the install queue                                                 </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style="">2802                  String spKey = LauncherAppState.getSharedPreferencesKey();                                        </span>
<span class="-4155822077911930566" onmouseenter="enter('-4155822077911930566');" onmouseout="out('-4155822077911930566');" style="">2803                  SharedPreferences sp =                                                                            </span>
<span class="-7232857049720959502" onmouseenter="enter('-7232857049720959502');" onmouseout="out('-7232857049720959502');" style="">2804                          context.getSharedPreferences(spKey, Context.MODE_PRIVATE);                                </span>
<span class="3942499314707869646" onmouseenter="enter('3942499314707869646');" onmouseout="out('3942499314707869646');" style="">2805                  InstallShortcutReceiver.removeFromInstallQueue(sp, removedPackageNames);                          </span>
<span class="-3818855430394316108" onmouseenter="enter('-3818855430394316108');" onmouseout="out('-3818855430394316108');" style="">2806                  // Call the components-removed callback                                                           </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2807                  mHandler.post(new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2808                      public void run() {                                                                           </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2809                          Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                              </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2810                          if (callbacks == cb &amp;&amp; cb != null) {                                                      </span>
<span class="7123425932844918056" onmouseenter="enter('7123425932844918056');" onmouseout="out('7123425932844918056');" style="">2811                              callbacks.bindComponentsRemoved(removedPackageNames, removedApps);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2812                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2813                      }                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2814                  });                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2815              }                                                                                                     </span>
<span  style="">2816                                                                                                                    </span>
<span class="4263868642545515204" onmouseenter="enter('4263868642545515204');" onmouseout="out('4263868642545515204');" style="">2817              final ArrayList&lt;Object&gt; widgetsAndShortcuts =                                                         </span>
<span class="-4925739004532916789" onmouseenter="enter('-4925739004532916789');" onmouseout="out('-4925739004532916789');" style="">2818                  getSortedWidgetsAndShortcuts(context);                                                            </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2819              mHandler.post(new Runnable() {                                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2820                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2821                  public void run() {                                                                               </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2822                      Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                  </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2823                      if (callbacks == cb &amp;&amp; cb != null) {                                                          </span>
<span class="-5360632898061832848" onmouseenter="enter('-5360632898061832848');" onmouseout="out('-5360632898061832848');" style="">2824                          callbacks.bindPackagesUpdated(widgetsAndShortcuts);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2825                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2826                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2827              });                                                                                                   </span>
<span  style="">2828                                                                                                                    </span>
<span class="2246235439938918294" onmouseenter="enter('2246235439938918294');" onmouseout="out('2246235439938918294');" style="">2829              // Write all the logs to disk                                                                         </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2830              mHandler.post(new Runnable() {                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2831                  public void run() {                                                                               </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2832                      Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                  </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2833                      if (callbacks == cb &amp;&amp; cb != null) {                                                          </span>
<span class="-3509183204751013036" onmouseenter="enter('-3509183204751013036');" onmouseout="out('-3509183204751013036');" style="">2834                          callbacks.dumpLogsToLocalData();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2835                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2836                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2837              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2838          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2839      }                                                                                                             </span>
<span  style="">2840                                                                                                                    </span>
<span class="5799248721363180071" onmouseenter="enter('5799248721363180071');" onmouseout="out('5799248721363180071');" style="">2841      // Returns a list of ResolveInfos/AppWindowInfos in sorted order                                              </span>
<span class="-3838691324560082495" onmouseenter="enter('-3838691324560082495');" onmouseout="out('-3838691324560082495');" style="">2842      public static ArrayList&lt;Object&gt; getSortedWidgetsAndShortcuts(Context context) {                               </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">2843          PackageManager packageManager = context.getPackageManager();                                              </span>
<span class="-7530033640159092210" onmouseenter="enter('-7530033640159092210');" onmouseout="out('-7530033640159092210');" style="">2844          final ArrayList&lt;Object&gt; widgetsAndShortcuts = new ArrayList&lt;Object&gt;();                                    </span>
<span class="-3206018607877806445" onmouseenter="enter('-3206018607877806445');" onmouseout="out('-3206018607877806445');" style="">2845          widgetsAndShortcuts.addAll(AppWidgetManager.getInstance(context).getInstalledProviders());                </span>
<span class="7483011368565278291" onmouseenter="enter('7483011368565278291');" onmouseout="out('7483011368565278291');" style="">2846          Intent shortcutsIntent = new Intent(Intent.ACTION_CREATE_SHORTCUT);                                       </span>
<span class="-1563771411674199697" onmouseenter="enter('-1563771411674199697');" onmouseout="out('-1563771411674199697');" style="">2847          widgetsAndShortcuts.addAll(packageManager.queryIntentActivities(shortcutsIntent, 0));                     </span>
<span class="-1102952865112100125" onmouseenter="enter('-1102952865112100125');" onmouseout="out('-1102952865112100125');" style="">2848          Collections.sort(widgetsAndShortcuts,                                                                     </span>
<span class="-1681839338823179912" onmouseenter="enter('-1681839338823179912');" onmouseout="out('-1681839338823179912');" style="">2849              new LauncherModel.WidgetAndShortcutNameComparator(packageManager));                                   </span>
<span class="4818388040543649614" onmouseenter="enter('4818388040543649614');" onmouseout="out('4818388040543649614');" style="">2850          return widgetsAndShortcuts;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2851      }                                                                                                             </span>
<span  style="">2852                                                                                                                    </span>
<span class="8250241672786329916" onmouseenter="enter('8250241672786329916');" onmouseout="out('8250241672786329916');" style="">2853      private static boolean isPackageDisabled(PackageManager pm, String packageName) {                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2854          try {                                                                                                     </span>
<span class="4500642088138919346" onmouseenter="enter('4500642088138919346');" onmouseout="out('4500642088138919346');" style="">2855              PackageInfo pi = pm.getPackageInfo(packageName, 0);                                                   </span>
<span class="-3710685366547959245" onmouseenter="enter('-3710685366547959245');" onmouseout="out('-3710685366547959245');" style="">2856              return !pi.applicationInfo.enabled;                                                                   </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="">2857          } catch (NameNotFoundException e) {                                                                       </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style="">2858              // Fall through                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2859          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2860          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2861      }                                                                                                             </span>
<span  style="">2862                                                                                                                    </span>
<span class="5484824579758440772" onmouseenter="enter('5484824579758440772');" onmouseout="out('5484824579758440772');" style="">2863      public static boolean isValidPackageComponent(PackageManager pm, ComponentName cn) {                          </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style="">2864          if (cn == null) {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2865              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2866          }                                                                                                         </span>
<span class="3920598161938602311" onmouseenter="enter('3920598161938602311');" onmouseout="out('3920598161938602311');" style="">2867          if (isPackageDisabled(pm, cn.getPackageName())) {                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2868              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2869          }                                                                                                         </span>
<span  style="">2870                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2871          try {                                                                                                     </span>
<span class="5148337441661745301" onmouseenter="enter('5148337441661745301');" onmouseout="out('5148337441661745301');" style="">2872              // Check the activity                                                                                 </span>
<span class="-3548512208842411383" onmouseenter="enter('-3548512208842411383');" onmouseout="out('-3548512208842411383');" style="">2873              PackageInfo pi = pm.getPackageInfo(cn.getPackageName(), 0);                                           </span>
<span class="-7304348613249571904" onmouseenter="enter('-7304348613249571904');" onmouseout="out('-7304348613249571904');" style="">2874              return (pm.getActivityInfo(cn, 0) != null);                                                           </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="">2875          } catch (NameNotFoundException e) {                                                                       </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2876              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2877          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2878      }                                                                                                             </span>
<span  style="">2879                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2880      /**                                                                                                           </span>
<span class="-1422058377481062223" onmouseenter="enter('-1422058377481062223');" onmouseout="out('-1422058377481062223');" style="">2881       * Make an ShortcutInfo object for a restored application or shortcut item that points                        </span>
<span class="-3240825039404734763" onmouseenter="enter('-3240825039404734763');" onmouseout="out('-3240825039404734763');" style="">2882       * to a package that is not yet installed on the system.                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2883       */                                                                                                           </span>
<span class="8070224997591472859" onmouseenter="enter('8070224997591472859');" onmouseout="out('8070224997591472859');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2884 -    public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex, Intent intent) {                       </span>
<span class="1063415479211056267" onmouseenter="enter('1063415479211056267');" onmouseout="out('1063415479211056267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2885 +    public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex) {                                      </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">2886          final ShortcutInfo info = new ShortcutInfo();                                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">2887          info.usingFallbackIcon = true;                                                                            </span>
<span class="4720658287044976809" onmouseenter="enter('4720658287044976809');" onmouseout="out('4720658287044976809');" style="">2888          info.setIcon(getFallbackIcon());                                                                          </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style="">2889          if (cursor != null) {                                                                                     </span>
<span class="-7858065958686887242" onmouseenter="enter('-7858065958686887242');" onmouseout="out('-7858065958686887242');" style="">2890              info.title =  cursor.getString(titleIndex);                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2891          } else {                                                                                                  </span>
<span class="-9179287796133695880" onmouseenter="enter('-9179287796133695880');" onmouseout="out('-9179287796133695880');" style="">2892              info.title = &quot;&quot;;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2893          }                                                                                                         </span>

<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">2894          info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                            </span>
<span class="-5029095292884465134" onmouseenter="enter('-5029095292884465134');" onmouseout="out('-5029095292884465134');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2895 -        info.restoredIntent = intent;                                                                             </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">2896          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2897      }                                                                                                             </span>
<span  style="">2898                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2899      /**                                                                                                           </span>
<span class="3086315656576237338" onmouseenter="enter('3086315656576237338');" onmouseout="out('3086315656576237338');" style="">2900       * Make an Intent object for a restored application or shortcut item that points                              </span>
<span class="-6367188518910147180" onmouseenter="enter('-6367188518910147180');" onmouseout="out('-6367188518910147180');" style="">2901       * to the market page for the item.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2902       */                                                                                                           </span>
<span class="-6647643744207470673" onmouseenter="enter('-6647643744207470673');" onmouseout="out('-6647643744207470673');" style="">2903      private Intent getRestoredItemIntent(Cursor c, Context context, Intent intent) {                              </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2904 -        final boolean debug = false;                                                                              </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">2905          ComponentName componentName = intent.getComponent();                                                      </span>
<span class="5230577021520033618" onmouseenter="enter('5230577021520033618');" onmouseout="out('5230577021520033618');" style="">2906          Intent marketIntent = new Intent(Intent.ACTION_VIEW);                                                     </span>
<span class="-6224205935725503646" onmouseenter="enter('-6224205935725503646');" onmouseout="out('-6224205935725503646');" style="">2907          Uri marketUri = new Uri.Builder()                                                                         </span>
<span class="-9027153585574964790" onmouseenter="enter('-9027153585574964790');" onmouseout="out('-9027153585574964790');" style="">2908                  .scheme(&quot;market&quot;)                                                                                 </span>
<span class="-1106866791415129127" onmouseenter="enter('-1106866791415129127');" onmouseout="out('-1106866791415129127');" style="">2909                  .authority(&quot;details&quot;)                                                                             </span>
<span class="-6156875340655442296" onmouseenter="enter('-6156875340655442296');" onmouseout="out('-6156875340655442296');" style="">2910                  .appendQueryParameter(&quot;id&quot;, componentName.getPackageName())                                       </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="">2911                  .build();                                                                                         </span>
<span class="1889430633002020321" onmouseenter="enter('1889430633002020321');" onmouseout="out('1889430633002020321');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2912 -        if (debug) Log.d(TAG, &quot;manufactured intent uri: &quot; + marketUri.toString());                                </span>
<span class="-8203346918939498134" onmouseenter="enter('-8203346918939498134');" onmouseout="out('-8203346918939498134');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2913 +        Log.d(TAG, &quot;manufactured intent uri: &quot; + marketUri.toString());                                           </span>
<span class="8200775736438266685" onmouseenter="enter('8200775736438266685');" onmouseout="out('8200775736438266685');" style="">2914          marketIntent.setData(marketUri);                                                                          </span>
<span class="-840031405639981960" onmouseenter="enter('-840031405639981960');" onmouseout="out('-840031405639981960');" style="">2915          return marketIntent;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2916      }                                                                                                             </span>
<span  style="">2917                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2918      /**                                                                                                           </span>
<span class="6759547650823633948" onmouseenter="enter('6759547650823633948');" onmouseout="out('6759547650823633948');" style="">2919       * This is called from the code that adds shortcuts from the intent receiver.  This                           </span>
<span class="1598280755109073179" onmouseenter="enter('1598280755109073179');" onmouseout="out('1598280755109073179');" style="">2920       * doesn&#x27;t have a Cursor, but                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2921       */                                                                                                           </span>
<span class="5614106103309211810" onmouseenter="enter('5614106103309211810');" onmouseout="out('5614106103309211810');" style="">2922      public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context) {                 </span>
<span class="-3335806789481426156" onmouseenter="enter('-3335806789481426156');" onmouseout="out('-3335806789481426156');" style="">2923          return getShortcutInfo(manager, intent, context, null, -1, -1, null);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2924      }                                                                                                             </span>
<span  style="">2925                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2926      /**                                                                                                           </span>
<span class="-1467760634860339139" onmouseenter="enter('-1467760634860339139');" onmouseout="out('-1467760634860339139');" style="">2927       * Make an ShortcutInfo object for a shortcut that is an application.                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2928       *                                                                                                            </span>
<span class="-3542647944112672905" onmouseenter="enter('-3542647944112672905');" onmouseout="out('-3542647944112672905');" style="">2929       * If c is not null, then it will be used to fill in missing data like the title and icon.                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2930       */                                                                                                           </span>
<span class="1276500584496912228" onmouseenter="enter('1276500584496912228');" onmouseout="out('1276500584496912228');" style="">2931      public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context,                   </span>
<span class="-7918747784600027039" onmouseenter="enter('-7918747784600027039');" onmouseout="out('-7918747784600027039');" style="">2932              Cursor c, int iconIndex, int titleIndex, HashMap&lt;Object, CharSequence&gt; labelCache) {                  </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">2933          ComponentName componentName = intent.getComponent();                                                      </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">2934          final ShortcutInfo info = new ShortcutInfo();                                                             </span>
<span class="444940595441544179" onmouseenter="enter('444940595441544179');" onmouseout="out('444940595441544179');" style="">2935          if (componentName != null &amp;&amp; !isValidPackageComponent(manager, componentName)) {                          </span>
<span class="-409027952341615484" onmouseenter="enter('-409027952341615484');" onmouseout="out('-409027952341615484');" style="">2936              Log.d(TAG, &quot;Invalid package found in getShortcutInfo: &quot; + componentName);                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">2937              return null;                                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2938          } else {                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2939              try {                                                                                                 </span>
<span class="4294749985361673643" onmouseenter="enter('4294749985361673643');" onmouseout="out('4294749985361673643');" style="">2940                  PackageInfo pi = manager.getPackageInfo(componentName.getPackageName(), 0);                       </span>
<span class="3308885914817688196" onmouseenter="enter('3308885914817688196');" onmouseout="out('3308885914817688196');" style="">2941                  info.initFlagsAndFirstInstallTime(pi);                                                            </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="">2942              } catch (NameNotFoundException e) {                                                                   </span>
<span class="-3402401844985211338" onmouseenter="enter('-3402401844985211338');" onmouseout="out('-3402401844985211338');" style="">2943                  Log.d(TAG, &quot;getPackInfo failed for package &quot; +                                                    </span>
<span class="-7617949507024469990" onmouseenter="enter('-7617949507024469990');" onmouseout="out('-7617949507024469990');" style="">2944                          componentName.getPackageName());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2945              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2946          }                                                                                                         </span>
<span  style="">2947                                                                                                                    </span>
<span class="-5839804976451698217" onmouseenter="enter('-5839804976451698217');" onmouseout="out('-5839804976451698217');" style="">2948          // TODO: See if the PackageManager knows about this case.  If it doesn&#x27;t                                  </span>
<span class="-575420847374711684" onmouseenter="enter('-575420847374711684');" onmouseout="out('-575420847374711684');" style="">2949          // then return null &amp; delete this.                                                                        </span>
<span  style="">2950                                                                                                                    </span>
<span class="5323402181664282980" onmouseenter="enter('5323402181664282980');" onmouseout="out('5323402181664282980');" style="">2951          // the resource -- This may implicitly give us back the fallback icon,                                    </span>
<span class="-798092997962515080" onmouseenter="enter('-798092997962515080');" onmouseout="out('-798092997962515080');" style="">2952          // but don&#x27;t worry about that.  All we&#x27;re doing with usingFallbackIcon is                                 </span>
<span class="4614559195454825202" onmouseenter="enter('4614559195454825202');" onmouseout="out('4614559195454825202');" style="">2953          // to avoid saving lots of copies of that in the database, and most apps                                  </span>
<span class="2042041324737915810" onmouseenter="enter('2042041324737915810');" onmouseout="out('2042041324737915810');" style="">2954          // have icons anyway.                                                                                     </span>
<span  style="">2955                                                                                                                    </span>
<span class="1748721733354639816" onmouseenter="enter('1748721733354639816');" onmouseout="out('1748721733354639816');" style="">2956          // Attempt to use queryIntentActivities to get the ResolveInfo (with IntentFilter info) and               </span>
<span class="-6676021501376744578" onmouseenter="enter('-6676021501376744578');" onmouseout="out('-6676021501376744578');" style="">2957          // if that fails, or is ambiguious, fallback to the standard way of getting the resolve info              </span>
<span class="-6094266232633177049" onmouseenter="enter('-6094266232633177049');" onmouseout="out('-6094266232633177049');" style="">2958          // via resolveActivity().                                                                                 </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">2959          Bitmap icon = null;                                                                                       </span>
<span class="-12205607414596767" onmouseenter="enter('-12205607414596767');" onmouseout="out('-12205607414596767');" style="">2960          ResolveInfo resolveInfo = null;                                                                           </span>
<span class="5248255614039346565" onmouseenter="enter('5248255614039346565');" onmouseout="out('5248255614039346565');" style="">2961          ComponentName oldComponent = intent.getComponent();                                                       </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="">2962          Intent newIntent = new Intent(intent.getAction(), null);                                                  </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="">2963          newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                          </span>
<span class="-4528672120988578527" onmouseenter="enter('-4528672120988578527');" onmouseout="out('-4528672120988578527');" style="">2964          newIntent.setPackage(oldComponent.getPackageName());                                                      </span>
<span class="-4266560778617611378" onmouseenter="enter('-4266560778617611378');" onmouseout="out('-4266560778617611378');" style="">2965          List&lt;ResolveInfo&gt; infos = manager.queryIntentActivities(newIntent, 0);                                    </span>
<span class="-1258353831095463835" onmouseenter="enter('-1258353831095463835');" onmouseout="out('-1258353831095463835');" style="">2966          for (ResolveInfo i : infos) {                                                                             </span>
<span class="5094763243037624802" onmouseenter="enter('5094763243037624802');" onmouseout="out('5094763243037624802');" style="">2967              ComponentName cn = new ComponentName(i.activityInfo.packageName,                                      </span>
<span class="1720373740013823268" onmouseenter="enter('1720373740013823268');" onmouseout="out('1720373740013823268');" style="">2968                      i.activityInfo.name);                                                                         </span>
<span class="-7290368567659218563" onmouseenter="enter('-7290368567659218563');" onmouseout="out('-7290368567659218563');" style="">2969              if (cn.equals(oldComponent)) {                                                                        </span>
<span class="-6794055892963959667" onmouseenter="enter('-6794055892963959667');" onmouseout="out('-6794055892963959667');" style="">2970                  resolveInfo = i;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2971              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2972          }                                                                                                         </span>
<span class="6326898777629576914" onmouseenter="enter('6326898777629576914');" onmouseout="out('6326898777629576914');" style="">2973          if (resolveInfo == null) {                                                                                </span>
<span class="8776212146813846258" onmouseenter="enter('8776212146813846258');" onmouseout="out('8776212146813846258');" style="">2974              resolveInfo = manager.resolveActivity(intent, 0);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2975          }                                                                                                         </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="">2976          if (resolveInfo != null) {                                                                                </span>
<span class="-7448006110826377930" onmouseenter="enter('-7448006110826377930');" onmouseout="out('-7448006110826377930');" style="">2977              icon = mIconCache.getIcon(componentName, resolveInfo, labelCache);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2978          }                                                                                                         </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">2979          // the db                                                                                                 </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">2980          if (icon == null) {                                                                                       </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2981              if (c != null) {                                                                                      </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">2982                  icon = getIconFromCursor(c, iconIndex, context);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2983              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2984          }                                                                                                         </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">2985          // the fallback icon                                                                                      </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">2986          if (icon == null) {                                                                                       </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">2987              icon = getFallbackIcon();                                                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">2988              info.usingFallbackIcon = true;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2989          }                                                                                                         </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">2990          info.setIcon(icon);                                                                                       </span>
<span  style="">2991                                                                                                                    </span>
<span class="7054767873271725898" onmouseenter="enter('7054767873271725898');" onmouseout="out('7054767873271725898');" style="">2992          // from the resource                                                                                      </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="">2993          if (resolveInfo != null) {                                                                                </span>
<span class="4800110805856691594" onmouseenter="enter('4800110805856691594');" onmouseout="out('4800110805856691594');" style="">2994              ComponentName key = LauncherModel.getComponentNameFromResolveInfo(resolveInfo);                       </span>
<span class="8748582400169036217" onmouseenter="enter('8748582400169036217');" onmouseout="out('8748582400169036217');" style="">2995              if (labelCache != null &amp;&amp; labelCache.containsKey(key)) {                                              </span>
<span class="3192670581922801839" onmouseenter="enter('3192670581922801839');" onmouseout="out('3192670581922801839');" style="">2996                  info.title = labelCache.get(key);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2997              } else {                                                                                              </span>
<span class="-2714967885034418454" onmouseenter="enter('-2714967885034418454');" onmouseout="out('-2714967885034418454');" style="">2998                  info.title = resolveInfo.activityInfo.loadLabel(manager);                                         </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="">2999                  if (labelCache != null) {                                                                         </span>
<span class="-7678945850387299322" onmouseenter="enter('-7678945850387299322');" onmouseout="out('-7678945850387299322');" style="">3000                      labelCache.put(key, info.title);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3001                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3002              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3003          }                                                                                                         </span>
<span class="-7465759676168587687" onmouseenter="enter('-7465759676168587687');" onmouseout="out('-7465759676168587687');" style="">3004          // from the db                                                                                            </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">3005          if (info.title == null) {                                                                                 </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">3006              if (c != null) {                                                                                      </span>
<span class="-3184821142709825057" onmouseenter="enter('-3184821142709825057');" onmouseout="out('-3184821142709825057');" style="">3007                  info.title =  c.getString(titleIndex);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3008              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3009          }                                                                                                         </span>
<span class="-3300288691074588674" onmouseenter="enter('-3300288691074588674');" onmouseout="out('-3300288691074588674');" style="">3010          // fall back to the class name of the activity                                                            </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">3011          if (info.title == null) {                                                                                 </span>
<span class="-8852275649252281641" onmouseenter="enter('-8852275649252281641');" onmouseout="out('-8852275649252281641');" style="">3012              info.title = componentName.getClassName();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3013          }                                                                                                         </span>
<span class="7933897515512130399" onmouseenter="enter('7933897515512130399');" onmouseout="out('7933897515512130399');" style="">3014          info.itemType = LauncherSettings.Favorites.ITEM_TYPE_APPLICATION;                                         </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3015          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3016      }                                                                                                             </span>
<span  style="">3017                                                                                                                    </span>
<span class="4439425861689174202" onmouseenter="enter('4439425861689174202');" onmouseout="out('4439425861689174202');" style="">3018      static ArrayList&lt;ItemInfo&gt; filterItemInfos(Collection&lt;ItemInfo&gt; infos,                                        </span>
<span class="6562040460462558270" onmouseenter="enter('6562040460462558270');" onmouseout="out('6562040460462558270');" style="">3019              ItemInfoFilter f) {                                                                                   </span>
<span class="-341948731893176054" onmouseenter="enter('-341948731893176054');" onmouseout="out('-341948731893176054');" style="">3020          HashSet&lt;ItemInfo&gt; filtered = new HashSet&lt;ItemInfo&gt;();                                                     </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">3021          for (ItemInfo i : infos) {                                                                                </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3022              if (i instanceof ShortcutInfo) {                                                                      </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3023                  ShortcutInfo info = (ShortcutInfo) i;                                                             </span>
<span class="299648897077832064" onmouseenter="enter('299648897077832064');" onmouseout="out('299648897077832064');" style="">3024                  ComponentName cn = info.intent.getComponent();                                                    </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3025                  if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                                 </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3026                      filtered.add(info);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3027                  }                                                                                                 </span>
<span class="-3991875190988320435" onmouseenter="enter('-3991875190988320435');" onmouseout="out('-3991875190988320435');" style="">3028              } else if (i instanceof FolderInfo) {                                                                 </span>
<span class="5655388972065239375" onmouseenter="enter('5655388972065239375');" onmouseout="out('5655388972065239375');" style="">3029                  FolderInfo info = (FolderInfo) i;                                                                 </span>
<span class="551974476971988370" onmouseenter="enter('551974476971988370');" onmouseout="out('551974476971988370');" style="">3030                  for (ShortcutInfo s : info.contents) {                                                            </span>
<span class="2331162999822676145" onmouseenter="enter('2331162999822676145');" onmouseout="out('2331162999822676145');" style="">3031                      ComponentName cn = s.intent.getComponent();                                                   </span>
<span class="-203564141906270755" onmouseenter="enter('-203564141906270755');" onmouseout="out('-203564141906270755');" style="">3032                      if (cn != null &amp;&amp; f.filterItem(info, s, cn)) {                                                </span>
<span class="-3396286072640698031" onmouseenter="enter('-3396286072640698031');" onmouseout="out('-3396286072640698031');" style="">3033                          filtered.add(s);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3034                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3035                  }                                                                                                 </span>
<span class="-6245773261295261120" onmouseenter="enter('-6245773261295261120');" onmouseout="out('-6245773261295261120');" style="">3036              } else if (i instanceof LauncherAppWidgetInfo) {                                                      </span>
<span class="-9066656906031581030" onmouseenter="enter('-9066656906031581030');" onmouseout="out('-9066656906031581030');" style="">3037                  LauncherAppWidgetInfo info = (LauncherAppWidgetInfo) i;                                           </span>
<span class="7149829203308063306" onmouseenter="enter('7149829203308063306');" onmouseout="out('7149829203308063306');" style="">3038                  ComponentName cn = info.providerName;                                                             </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3039                  if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                                 </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3040                      filtered.add(info);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3041                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3042              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3043          }                                                                                                         </span>
<span class="-61899809234431084" onmouseenter="enter('-61899809234431084');" onmouseout="out('-61899809234431084');" style="">3044          return new ArrayList&lt;ItemInfo&gt;(filtered);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3045      }                                                                                                             </span>
<span  style="">3046                                                                                                                    </span>
<span class="-3045683366231863679" onmouseenter="enter('-3045683366231863679');" onmouseout="out('-3045683366231863679');" style="">3047      private ArrayList&lt;ItemInfo&gt; getItemInfoForPackageName(final String pn) {                                      </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">3048          ItemInfoFilter filter  = new ItemInfoFilter() {                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3049              @Override                                                                                             </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">3050              public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                         </span>
<span class="4366277958827250658" onmouseenter="enter('4366277958827250658');" onmouseout="out('4366277958827250658');" style="">3051                  return cn.getPackageName().equals(pn);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3052              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3053          };                                                                                                        </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">3054          return filterItemInfos(sBgItemsIdMap.values(), filter);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3055      }                                                                                                             </span>
<span  style="">3056                                                                                                                    </span>
<span class="5278497386445713053" onmouseenter="enter('5278497386445713053');" onmouseout="out('5278497386445713053');" style="">3057      private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname) {                          </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">3058          ItemInfoFilter filter  = new ItemInfoFilter() {                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3059              @Override                                                                                             </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">3060              public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                         </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="">3061                  return cn.equals(cname);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3062              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3063          };                                                                                                        </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">3064          return filterItemInfos(sBgItemsIdMap.values(), filter);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3065      }                                                                                                             </span>
<span  style="">3066                                                                                                                    </span>
<span class="1124396970102851152" onmouseenter="enter('1124396970102851152');" onmouseout="out('1124396970102851152');" style="">3067      public static boolean isShortcutInfoUpdateable(ItemInfo i) {                                                  </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3068          if (i instanceof ShortcutInfo) {                                                                          </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3069              ShortcutInfo info = (ShortcutInfo) i;                                                                 </span>
<span class="-4176416752413564182" onmouseenter="enter('-4176416752413564182');" onmouseout="out('-4176416752413564182');" style="">3070              // We need to check for ACTION_MAIN otherwise getComponent() might                                    </span>
<span class="-4431177575884820054" onmouseenter="enter('-4431177575884820054');" onmouseout="out('-4431177575884820054');" style="">3071              // return null for some shortcuts (for instance, for shortcuts to                                     </span>
<span class="5405126151757999271" onmouseenter="enter('5405126151757999271');" onmouseout="out('5405126151757999271');" style="">3072              // web pages.)                                                                                        </span>
<span class="2400775771645829424" onmouseenter="enter('2400775771645829424');" onmouseout="out('2400775771645829424');" style="">3073              Intent intent = info.intent;                                                                          </span>
<span class="5515215321882412237" onmouseenter="enter('5515215321882412237');" onmouseout="out('5515215321882412237');" style="">3074              ComponentName name = intent.getComponent();                                                           </span>
<span class="-7226540389871247766" onmouseenter="enter('-7226540389871247766');" onmouseout="out('-7226540389871247766');" style="">3075              if (info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION &amp;&amp;                              </span>
<span class="-3498713534944595637" onmouseenter="enter('-3498713534944595637');" onmouseout="out('-3498713534944595637');" style="">3076                      Intent.ACTION_MAIN.equals(intent.getAction()) &amp;&amp; name != null) {                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3077                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3078              }                                                                                                     </span>
<span class="-5396282347241069474" onmouseenter="enter('-5396282347241069474');" onmouseout="out('-5396282347241069474');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3079 -            // placeholder shortcuts get special treatment, let them through too.                                 </span>
<span class="-969316460988421609" onmouseenter="enter('-969316460988421609');" onmouseout="out('-969316460988421609');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3080 -            if (info.getRestoredIntent() != null) {                                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3081 -                return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">3082 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3083          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3084          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3085      }                                                                                                             </span>
<span  style="">3086                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3087      /**                                                                                                           </span>
<span class="-7383302121747425580" onmouseenter="enter('-7383302121747425580');" onmouseout="out('-7383302121747425580');" style="">3088       * Make an ShortcutInfo object for a shortcut that isn&#x27;t an application.                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3089       */                                                                                                           </span>
<span class="-832588879686874653" onmouseenter="enter('-832588879686874653');" onmouseout="out('-832588879686874653');" style="">3090      private ShortcutInfo getShortcutInfo(Cursor c, Context context,                                               </span>
<span class="4905943326370352288" onmouseenter="enter('4905943326370352288');" onmouseout="out('4905943326370352288');" style="">3091              int iconTypeIndex, int iconPackageIndex, int iconResourceIndex, int iconIndex,                        </span>
<span class="483103881605747557" onmouseenter="enter('483103881605747557');" onmouseout="out('483103881605747557');" style="">3092              int titleIndex) {                                                                                     </span>
<span  style="">3093                                                                                                                    </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3094          Bitmap icon = null;                                                                                       </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3095          final ShortcutInfo info = new ShortcutInfo();                                                             </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">3096          info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                            </span>
<span  style="">3097                                                                                                                    </span>
<span class="7613558771605813536" onmouseenter="enter('7613558771605813536');" onmouseout="out('7613558771605813536');" style="">3098          // TODO: If there&#x27;s an explicit component and we can&#x27;t install that, delete it.                           </span>
<span  style="">3099                                                                                                                    </span>
<span class="7288105011746485932" onmouseenter="enter('7288105011746485932');" onmouseout="out('7288105011746485932');" style="">3100          info.title = c.getString(titleIndex);                                                                     </span>
<span  style="">3101                                                                                                                    </span>
<span class="3612299538514072472" onmouseenter="enter('3612299538514072472');" onmouseout="out('3612299538514072472');" style="">3102          int iconType = c.getInt(iconTypeIndex);                                                                   </span>
<span class="587586912378863553" onmouseenter="enter('587586912378863553');" onmouseout="out('587586912378863553');" style="">3103          switch (iconType) {                                                                                       </span>
<span class="-349524516714147238" onmouseenter="enter('-349524516714147238');" onmouseout="out('-349524516714147238');" style="">3104          case LauncherSettings.Favorites.ICON_TYPE_RESOURCE:                                                       </span>
<span class="-8135410904448428370" onmouseenter="enter('-8135410904448428370');" onmouseout="out('-8135410904448428370');" style="">3105              String packageName = c.getString(iconPackageIndex);                                                   </span>
<span class="-8435258133535712396" onmouseenter="enter('-8435258133535712396');" onmouseout="out('-8435258133535712396');" style="">3106              String resourceName = c.getString(iconResourceIndex);                                                 </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">3107              PackageManager packageManager = context.getPackageManager();                                          </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3108              info.customIcon = false;                                                                              </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style="">3109              // the resource                                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3110              try {                                                                                                 </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style="">3111                  Resources resources = packageManager.getResourcesForApplication(packageName);                     </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style="">3112                  if (resources != null) {                                                                          </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style="">3113                      final int id = resources.getIdentifier(resourceName, null, null);                             </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3114                      icon = Utilities.createIconBitmap(                                                            </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="">3115                              mIconCache.getFullResIcon(resources, id), context);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3116                  }                                                                                                 </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3117              } catch (Exception e) {                                                                               </span>
<span class="5772476326804770264" onmouseenter="enter('5772476326804770264');" onmouseout="out('5772476326804770264');" style="">3118                  // drop this.  we have other places to look for icons                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3119              }                                                                                                     </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">3120              // the db                                                                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3121              if (icon == null) {                                                                                   </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3122                  icon = getIconFromCursor(c, iconIndex, context);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3123              }                                                                                                     </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">3124              // the fallback icon                                                                                  </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3125              if (icon == null) {                                                                                   </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">3126                  icon = getFallbackIcon();                                                                         </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3127                  info.usingFallbackIcon = true;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3128              }                                                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3129              break;                                                                                                </span>
<span class="8287056964614325383" onmouseenter="enter('8287056964614325383');" onmouseout="out('8287056964614325383');" style="">3130          case LauncherSettings.Favorites.ICON_TYPE_BITMAP:                                                         </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3131              icon = getIconFromCursor(c, iconIndex, context);                                                      </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3132              if (icon == null) {                                                                                   </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">3133                  icon = getFallbackIcon();                                                                         </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3134                  info.customIcon = false;                                                                          </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3135                  info.usingFallbackIcon = true;                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3136              } else {                                                                                              </span>
<span class="5065693686602940755" onmouseenter="enter('5065693686602940755');" onmouseout="out('5065693686602940755');" style="">3137                  info.customIcon = true;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3138              }                                                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3139              break;                                                                                                </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">3140          default:                                                                                                  </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">3141              icon = getFallbackIcon();                                                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3142              info.usingFallbackIcon = true;                                                                        </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3143              info.customIcon = false;                                                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3144              break;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3145          }                                                                                                         </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3146          info.setIcon(icon);                                                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3147          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3148      }                                                                                                             </span>
<span  style="">3149                                                                                                                    </span>
<span class="6654370236660323989" onmouseenter="enter('6654370236660323989');" onmouseout="out('6654370236660323989');" style="">3150      Bitmap getIconFromCursor(Cursor c, int iconIndex, Context context) {                                          </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style="">3151          @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                                    </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style="">3152          final boolean debug = false;                                                                              </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style="">3153          if (debug) {                                                                                              </span>
<span class="-6059745727821652987" onmouseenter="enter('-6059745727821652987');" onmouseout="out('-6059745727821652987');" style="">3154              Log.d(TAG, &quot;getIconFromCursor app=&quot;                                                                   </span>
<span class="3938717124241653137" onmouseenter="enter('3938717124241653137');" onmouseout="out('3938717124241653137');" style="">3155                      + c.getString(c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE)));                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3156          }                                                                                                         </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="">3157          byte[] data = c.getBlob(iconIndex);                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3158          try {                                                                                                     </span>
<span class="-8927216840433750458" onmouseenter="enter('-8927216840433750458');" onmouseout="out('-8927216840433750458');" style="">3159              return Utilities.createIconBitmap(                                                                    </span>
<span class="5146235978369237158" onmouseenter="enter('5146235978369237158');" onmouseout="out('5146235978369237158');" style="">3160                      BitmapFactory.decodeByteArray(data, 0, data.length), context);                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3161          } catch (Exception e) {                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3162              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3163          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3164      }                                                                                                             </span>
<span  style="">3165                                                                                                                    </span>
<span class="-7359014031490826383" onmouseenter="enter('-7359014031490826383');" onmouseout="out('-7359014031490826383');" style="">3166      ShortcutInfo addShortcut(Context context, Intent data, long container, int screen,                            </span>
<span class="6268414987721391526" onmouseenter="enter('6268414987721391526');" onmouseout="out('6268414987721391526');" style="">3167              int cellX, int cellY, boolean notify) {                                                               </span>
<span class="2628174670305655041" onmouseenter="enter('2628174670305655041');" onmouseout="out('2628174670305655041');" style="">3168          final ShortcutInfo info = infoFromShortcutIntent(context, data, null);                                    </span>
<span class="164903852834130891" onmouseenter="enter('164903852834130891');" onmouseout="out('164903852834130891');" style="">3169          if (info == null) {                                                                                       </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3170              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3171          }                                                                                                         </span>
<span class="-221445018295793081" onmouseenter="enter('-221445018295793081');" onmouseout="out('-221445018295793081');" style="">3172          addItemToDatabase(context, info, container, screen, cellX, cellY, notify);                                </span>
<span  style="">3173                                                                                                                    </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3174          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3175      }                                                                                                             </span>
<span  style="">3176                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3177      /**                                                                                                           </span>
<span class="-2170604135443496089" onmouseenter="enter('-2170604135443496089');" onmouseout="out('-2170604135443496089');" style="">3178       * Attempts to find an AppWidgetProviderInfo that matches the given component.                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3179       */                                                                                                           </span>
<span class="-5080859468016274115" onmouseenter="enter('-5080859468016274115');" onmouseout="out('-5080859468016274115');" style="">3180      AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context,                                 </span>
<span class="2095123178876202639" onmouseenter="enter('2095123178876202639');" onmouseout="out('2095123178876202639');" style="">3181              ComponentName component) {                                                                            </span>
<span class="-6575430528437366773" onmouseenter="enter('-6575430528437366773');" onmouseout="out('-6575430528437366773');" style="">3182          List&lt;AppWidgetProviderInfo&gt; widgets =                                                                     </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="">3183              AppWidgetManager.getInstance(context).getInstalledProviders();                                        </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">3184          for (AppWidgetProviderInfo info : widgets) {                                                              </span>
<span class="444529726636175405" onmouseenter="enter('444529726636175405');" onmouseout="out('444529726636175405');" style="">3185              if (info.provider.equals(component)) {                                                                </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3186                  return info;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3187              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3188          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3189          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3190      }                                                                                                             </span>
<span  style="">3191                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3192      /**                                                                                                           </span>
<span class="7439199513195640847" onmouseenter="enter('7439199513195640847');" onmouseout="out('7439199513195640847');" style="">3193       * Returns a list of all the widgets that can handle configuration with a particular mimeType.                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3194       */                                                                                                           </span>
<span class="6325854662222182070" onmouseenter="enter('6325854662222182070');" onmouseout="out('6325854662222182070');" style="">3195      List&lt;WidgetMimeTypeHandlerData&gt; resolveWidgetsForMimeType(Context context, String mimeType) {                 </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">3196          final PackageManager packageManager = context.getPackageManager();                                        </span>
<span class="3847705782231652914" onmouseenter="enter('3847705782231652914');" onmouseout="out('3847705782231652914');" style="">3197          final List&lt;WidgetMimeTypeHandlerData&gt; supportedConfigurationActivities =                                  </span>
<span class="-5417931937414580646" onmouseenter="enter('-5417931937414580646');" onmouseout="out('-5417931937414580646');" style="">3198              new ArrayList&lt;WidgetMimeTypeHandlerData&gt;();                                                           </span>
<span  style="">3199                                                                                                                    </span>
<span class="3700104316520923099" onmouseenter="enter('3700104316520923099');" onmouseout="out('3700104316520923099');" style="">3200          final Intent supportsIntent =                                                                             </span>
<span class="-5996974504874484707" onmouseenter="enter('-5996974504874484707');" onmouseout="out('-5996974504874484707');" style="">3201              new Intent(InstallWidgetReceiver.ACTION_SUPPORTS_CLIPDATA_MIMETYPE);                                  </span>
<span class="6679063100467623292" onmouseenter="enter('6679063100467623292');" onmouseout="out('6679063100467623292');" style="">3202          supportsIntent.setType(mimeType);                                                                         </span>
<span  style="">3203                                                                                                                    </span>
<span class="6275845746944894373" onmouseenter="enter('6275845746944894373');" onmouseout="out('6275845746944894373');" style="">3204          // Create a set of widget configuration components that we can test against                               </span>
<span class="361965435897470734" onmouseenter="enter('361965435897470734');" onmouseout="out('361965435897470734');" style="">3205          final List&lt;AppWidgetProviderInfo&gt; widgets =                                                               </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="">3206              AppWidgetManager.getInstance(context).getInstalledProviders();                                        </span>
<span class="9185108259439406491" onmouseenter="enter('9185108259439406491');" onmouseout="out('9185108259439406491');" style="">3207          final HashMap&lt;ComponentName, AppWidgetProviderInfo&gt; configurationComponentToWidget =                      </span>
<span class="-4320342521313681795" onmouseenter="enter('-4320342521313681795');" onmouseout="out('-4320342521313681795');" style="">3208              new HashMap&lt;ComponentName, AppWidgetProviderInfo&gt;();                                                  </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">3209          for (AppWidgetProviderInfo info : widgets) {                                                              </span>
<span class="-5537825176935075872" onmouseenter="enter('-5537825176935075872');" onmouseout="out('-5537825176935075872');" style="">3210              configurationComponentToWidget.put(info.configure, info);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3211          }                                                                                                         </span>
<span  style="">3212                                                                                                                    </span>
<span class="7227984661430491714" onmouseenter="enter('7227984661430491714');" onmouseout="out('7227984661430491714');" style="">3213          // Run through each of the intents that can handle this type of clip data, and cross                      </span>
<span class="-5312515598910931459" onmouseenter="enter('-5312515598910931459');" onmouseout="out('-5312515598910931459');" style="">3214          // reference them with the components that are actual configuration components                            </span>
<span class="96188399651153294" onmouseenter="enter('96188399651153294');" onmouseout="out('96188399651153294');" style="">3215          final List&lt;ResolveInfo&gt; activities = packageManager.queryIntentActivities(supportsIntent,                 </span>
<span class="2456166036476176214" onmouseenter="enter('2456166036476176214');" onmouseout="out('2456166036476176214');" style="">3216                  PackageManager.MATCH_DEFAULT_ONLY);                                                               </span>
<span class="-6210771211908512935" onmouseenter="enter('-6210771211908512935');" onmouseout="out('-6210771211908512935');" style="">3217          for (ResolveInfo info : activities) {                                                                     </span>
<span class="4178492805266676194" onmouseenter="enter('4178492805266676194');" onmouseout="out('4178492805266676194');" style="">3218              final ActivityInfo activityInfo = info.activityInfo;                                                  </span>
<span class="5911001791562559694" onmouseenter="enter('5911001791562559694');" onmouseout="out('5911001791562559694');" style="">3219              final ComponentName infoComponent = new ComponentName(activityInfo.packageName,                       </span>
<span class="2224927995621460603" onmouseenter="enter('2224927995621460603');" onmouseout="out('2224927995621460603');" style="">3220                      activityInfo.name);                                                                           </span>
<span class="5227428239073058925" onmouseenter="enter('5227428239073058925');" onmouseout="out('5227428239073058925');" style="">3221              if (configurationComponentToWidget.containsKey(infoComponent)) {                                      </span>
<span class="1978663855217064477" onmouseenter="enter('1978663855217064477');" onmouseout="out('1978663855217064477');" style="">3222                  supportedConfigurationActivities.add(                                                             </span>
<span class="-7165755523548006690" onmouseenter="enter('-7165755523548006690');" onmouseout="out('-7165755523548006690');" style="">3223                          new InstallWidgetReceiver.WidgetMimeTypeHandlerData(info,                                 </span>
<span class="-7657609803705245302" onmouseenter="enter('-7657609803705245302');" onmouseout="out('-7657609803705245302');" style="">3224                                  configurationComponentToWidget.get(infoComponent)));                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3225              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3226          }                                                                                                         </span>
<span class="8087136273107515292" onmouseenter="enter('8087136273107515292');" onmouseout="out('8087136273107515292');" style="">3227          return supportedConfigurationActivities;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3228      }                                                                                                             </span>
<span  style="">3229                                                                                                                    </span>
<span class="-5347330719934774268" onmouseenter="enter('-5347330719934774268');" onmouseout="out('-5347330719934774268');" style="">3230      ShortcutInfo infoFromShortcutIntent(Context context, Intent data, Bitmap fallbackIcon) {                      </span>
<span class="8885065625084988978" onmouseenter="enter('8885065625084988978');" onmouseout="out('8885065625084988978');" style="">3231          Intent intent = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_INTENT);                                    </span>
<span class="8754707358466729356" onmouseenter="enter('8754707358466729356');" onmouseout="out('8754707358466729356');" style="">3232          String name = data.getStringExtra(Intent.EXTRA_SHORTCUT_NAME);                                            </span>
<span class="-6415007334509386725" onmouseenter="enter('-6415007334509386725');" onmouseout="out('-6415007334509386725');" style="">3233          Parcelable bitmap = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON);                                  </span>
<span  style="">3234                                                                                                                    </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">3235          if (intent == null) {                                                                                     </span>
<span class="-7222749280640950660" onmouseenter="enter('-7222749280640950660');" onmouseout="out('-7222749280640950660');" style="">3236              // If the intent is null, we can&#x27;t construct a valid ShortcutInfo, so we return null                  </span>
<span class="2086461264164088394" onmouseenter="enter('2086461264164088394');" onmouseout="out('2086461264164088394');" style="">3237              Log.e(TAG, &quot;Can&#x27;t construct ShorcutInfo with null intent&quot;);                                           </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3238              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3239          }                                                                                                         </span>
<span  style="">3240                                                                                                                    </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3241          Bitmap icon = null;                                                                                       </span>
<span class="-5201738827927049970" onmouseenter="enter('-5201738827927049970');" onmouseout="out('-5201738827927049970');" style="">3242          boolean customIcon = false;                                                                               </span>
<span class="7106370779598857182" onmouseenter="enter('7106370779598857182');" onmouseout="out('7106370779598857182');" style="">3243          ShortcutIconResource iconResource = null;                                                                 </span>
<span  style="">3244                                                                                                                    </span>
<span class="4708321654003878831" onmouseenter="enter('4708321654003878831');" onmouseout="out('4708321654003878831');" style="">3245          if (bitmap != null &amp;&amp; bitmap instanceof Bitmap) {                                                         </span>
<span class="-4792971395534249505" onmouseenter="enter('-4792971395534249505');" onmouseout="out('-4792971395534249505');" style="">3246              icon = Utilities.createIconBitmap(new FastBitmapDrawable((Bitmap)bitmap), context);                   </span>
<span class="398283090594517644" onmouseenter="enter('398283090594517644');" onmouseout="out('398283090594517644');" style="">3247              customIcon = true;                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3248          } else {                                                                                                  </span>
<span class="8053278256512428939" onmouseenter="enter('8053278256512428939');" onmouseout="out('8053278256512428939');" style="">3249              Parcelable extra = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE);                      </span>
<span class="1150112908884585569" onmouseenter="enter('1150112908884585569');" onmouseout="out('1150112908884585569');" style="">3250              if (extra != null &amp;&amp; extra instanceof ShortcutIconResource) {                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3251                  try {                                                                                             </span>
<span class="7381422411731402038" onmouseenter="enter('7381422411731402038');" onmouseout="out('7381422411731402038');" style="">3252                      iconResource = (ShortcutIconResource) extra;                                                  </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">3253                      final PackageManager packageManager = context.getPackageManager();                            </span>
<span class="8040670109966211806" onmouseenter="enter('8040670109966211806');" onmouseout="out('8040670109966211806');" style="">3254                      Resources resources = packageManager.getResourcesForApplication(                              </span>
<span class="6486160691197808360" onmouseenter="enter('6486160691197808360');" onmouseout="out('6486160691197808360');" style="">3255                              iconResource.packageName);                                                            </span>
<span class="8660063882056417771" onmouseenter="enter('8660063882056417771');" onmouseout="out('8660063882056417771');" style="">3256                      final int id = resources.getIdentifier(iconResource.resourceName, null, null);                </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3257                      icon = Utilities.createIconBitmap(                                                            </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="">3258                              mIconCache.getFullResIcon(resources, id), context);                                   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3259                  } catch (Exception e) {                                                                           </span>
<span class="3904703345331845179" onmouseenter="enter('3904703345331845179');" onmouseout="out('3904703345331845179');" style="">3260                      Log.w(TAG, &quot;Could not load shortcut icon: &quot; + extra);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3261                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3262              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3263          }                                                                                                         </span>
<span  style="">3264                                                                                                                    </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3265          final ShortcutInfo info = new ShortcutInfo();                                                             </span>
<span  style="">3266                                                                                                                    </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3267          if (icon == null) {                                                                                       </span>
<span class="-5102432251092900261" onmouseenter="enter('-5102432251092900261');" onmouseout="out('-5102432251092900261');" style="">3268              if (fallbackIcon != null) {                                                                           </span>
<span class="5793590417920465615" onmouseenter="enter('5793590417920465615');" onmouseout="out('5793590417920465615');" style="">3269                  icon = fallbackIcon;                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3270              } else {                                                                                              </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">3271                  icon = getFallbackIcon();                                                                         </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3272                  info.usingFallbackIcon = true;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3273              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3274          }                                                                                                         </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3275          info.setIcon(icon);                                                                                       </span>
<span  style="">3276                                                                                                                    </span>
<span class="-1829710476241369792" onmouseenter="enter('-1829710476241369792');" onmouseout="out('-1829710476241369792');" style="">3277          info.title = name;                                                                                        </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">3278          info.intent = intent;                                                                                     </span>
<span class="4633184714742215751" onmouseenter="enter('4633184714742215751');" onmouseout="out('4633184714742215751');" style="">3279          info.customIcon = customIcon;                                                                             </span>
<span class="6083484121682275347" onmouseenter="enter('6083484121682275347');" onmouseout="out('6083484121682275347');" style="">3280          info.iconResource = iconResource;                                                                         </span>
<span  style="">3281                                                                                                                    </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3282          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3283      }                                                                                                             </span>
<span  style="">3284                                                                                                                    </span>
<span class="869799550823252877" onmouseenter="enter('869799550823252877');" onmouseout="out('869799550823252877');" style="">3285      boolean queueIconToBeChecked(HashMap&lt;Object, byte[]&gt; cache, ShortcutInfo info, Cursor c,                      </span>
<span class="650460935465639981" onmouseenter="enter('650460935465639981');" onmouseout="out('650460935465639981');" style="">3286              int iconIndex) {                                                                                      </span>
<span class="63801910951777151" onmouseenter="enter('63801910951777151');" onmouseout="out('63801910951777151');" style="">3287          // If apps can&#x27;t be on SD, don&#x27;t even bother.                                                             </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">3288          if (!mAppsCanBeOnRemoveableStorage) {                                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3289              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3290          }                                                                                                         </span>
<span class="861653016939823039" onmouseenter="enter('861653016939823039');" onmouseout="out('861653016939823039');" style="">3291          // If this icon doesn&#x27;t have a custom icon, check to see                                                  </span>
<span class="-1631525504415382572" onmouseenter="enter('-1631525504415382572');" onmouseout="out('-1631525504415382572');" style="">3292          // what&#x27;s stored in the DB, and if it doesn&#x27;t match what                                                  </span>
<span class="-2833764056931958051" onmouseenter="enter('-2833764056931958051');" onmouseout="out('-2833764056931958051');" style="">3293          // we&#x27;re going to show, store what we are going to show back                                              </span>
<span class="6822044102664419432" onmouseenter="enter('6822044102664419432');" onmouseout="out('6822044102664419432');" style="">3294          // into the DB.  We do this so when we&#x27;re loading, if the                                                 </span>
<span class="2186475696045222856" onmouseenter="enter('2186475696045222856');" onmouseout="out('2186475696045222856');" style="">3295          // package manager can&#x27;t find an icon (for example because                                                </span>
<span class="-3178081182524516354" onmouseenter="enter('-3178081182524516354');" onmouseout="out('-3178081182524516354');" style="">3296          // the app is on SD) then we can use that instead.                                                        </span>
<span class="6478679774718804760" onmouseenter="enter('6478679774718804760');" onmouseout="out('6478679774718804760');" style="">3297          if (!info.customIcon &amp;&amp; !info.usingFallbackIcon) {                                                        </span>
<span class="9182700683168292388" onmouseenter="enter('9182700683168292388');" onmouseout="out('9182700683168292388');" style="">3298              cache.put(info, c.getBlob(iconIndex));                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3299              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3300          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3301          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3302      }                                                                                                             </span>
<span class="1654527872685192879" onmouseenter="enter('1654527872685192879');" onmouseout="out('1654527872685192879');" style="">3303      void updateSavedIcon(Context context, ShortcutInfo info, byte[] data) {                                       </span>
<span class="2739424845963553299" onmouseenter="enter('2739424845963553299');" onmouseout="out('2739424845963553299');" style="">3304          boolean needSave = false;                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3305          try {                                                                                                     </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="">3306              if (data != null) {                                                                                   </span>
<span class="-7759318311620721467" onmouseenter="enter('-7759318311620721467');" onmouseout="out('-7759318311620721467');" style="">3307                  Bitmap saved = BitmapFactory.decodeByteArray(data, 0, data.length);                               </span>
<span class="5601916118931842920" onmouseenter="enter('5601916118931842920');" onmouseout="out('5601916118931842920');" style="">3308                  Bitmap loaded = info.getIcon(mIconCache);                                                         </span>
<span class="3622333829210083937" onmouseenter="enter('3622333829210083937');" onmouseout="out('3622333829210083937');" style="">3309                  needSave = !saved.sameAs(loaded);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3310              } else {                                                                                              </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3311                  needSave = true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3312              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3313          } catch (Exception e) {                                                                                   </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3314              needSave = true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3315          }                                                                                                         </span>
<span class="-1391846982631217245" onmouseenter="enter('-1391846982631217245');" onmouseout="out('-1391846982631217245');" style="">3316          if (needSave) {                                                                                           </span>
<span class="3557323548661765982" onmouseenter="enter('3557323548661765982');" onmouseout="out('3557323548661765982');" style="">3317              Log.d(TAG, &quot;going to save icon bitmap for info=&quot; + info);                                             </span>
<span class="2982884345620001266" onmouseenter="enter('2982884345620001266');" onmouseout="out('2982884345620001266');" style="">3318              // This is slower than is ideal, but this only happens once                                           </span>
<span class="6026812495787058898" onmouseenter="enter('6026812495787058898');" onmouseout="out('6026812495787058898');" style="">3319              // or when the app is updated with a new icon.                                                        </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">3320              updateItemInDatabase(context, info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3321          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3322      }                                                                                                             </span>
<span  style="">3323                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3324      /**                                                                                                           </span>
<span class="4855649975001229153" onmouseenter="enter('4855649975001229153');" onmouseout="out('4855649975001229153');" style="">3325       * Return an existing FolderInfo object if we have encountered this ID previously,                            </span>
<span class="1965046356881977619" onmouseenter="enter('1965046356881977619');" onmouseout="out('1965046356881977619');" style="">3326       * or make a new one.                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3327       */                                                                                                           </span>
<span class="-2475696420152943641" onmouseenter="enter('-2475696420152943641');" onmouseout="out('-2475696420152943641');" style="">3328      private static FolderInfo findOrMakeFolder(HashMap&lt;Long, FolderInfo&gt; folders, long id) {                      </span>
<span class="4702055422209629108" onmouseenter="enter('4702055422209629108');" onmouseout="out('4702055422209629108');" style="">3329          // See if a placeholder was created for us already                                                        </span>
<span class="5369947662598537472" onmouseenter="enter('5369947662598537472');" onmouseout="out('5369947662598537472');" style="">3330          FolderInfo folderInfo = folders.get(id);                                                                  </span>
<span class="-1935655509058582330" onmouseenter="enter('-1935655509058582330');" onmouseout="out('-1935655509058582330');" style="">3331          if (folderInfo == null) {                                                                                 </span>
<span class="-2837885610668527269" onmouseenter="enter('-2837885610668527269');" onmouseout="out('-2837885610668527269');" style="">3332              // No placeholder -- create a new instance                                                            </span>
<span class="-1173144769562528834" onmouseenter="enter('-1173144769562528834');" onmouseout="out('-1173144769562528834');" style="">3333              folderInfo = new FolderInfo();                                                                        </span>
<span class="-6364759527041918506" onmouseenter="enter('-6364759527041918506');" onmouseout="out('-6364759527041918506');" style="">3334              folders.put(id, folderInfo);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3335          }                                                                                                         </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style="">3336          return folderInfo;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3337      }                                                                                                             </span>
<span  style="">3338                                                                                                                    </span>
<span class="-958488581416967596" onmouseenter="enter('-958488581416967596');" onmouseout="out('-958488581416967596');" style="">3339      public static final Comparator&lt;AppInfo&gt; getAppNameComparator() {                                              </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">3340          final Collator collator = Collator.getInstance();                                                         </span>
<span class="-5613048777706091935" onmouseenter="enter('-5613048777706091935');" onmouseout="out('-5613048777706091935');" style="">3341          return new Comparator&lt;AppInfo&gt;() {                                                                        </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3342              public final int compare(AppInfo a, AppInfo b) {                                                      </span>
<span class="-7549376093488495011" onmouseenter="enter('-7549376093488495011');" onmouseout="out('-7549376093488495011');" style="">3343                  int result = collator.compare(a.title.toString().trim(),                                          </span>
<span class="1811873973139560730" onmouseenter="enter('1811873973139560730');" onmouseout="out('1811873973139560730');" style="">3344                          b.title.toString().trim());                                                               </span>
<span class="8606135965292633507" onmouseenter="enter('8606135965292633507');" onmouseout="out('8606135965292633507');" style="">3345                  if (result == 0) {                                                                                </span>
<span class="3669915132885915948" onmouseenter="enter('3669915132885915948');" onmouseout="out('3669915132885915948');" style="">3346                      result = a.componentName.compareTo(b.componentName);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3347                  }                                                                                                 </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">3348                  return result;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3349              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3350          };                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3351      }                                                                                                             </span>
<span class="394292360646743486" onmouseenter="enter('394292360646743486');" onmouseout="out('394292360646743486');" style="">3352      public static final Comparator&lt;AppInfo&gt; APP_INSTALL_TIME_COMPARATOR                                           </span>
<span class="-2973469265380285464" onmouseenter="enter('-2973469265380285464');" onmouseout="out('-2973469265380285464');" style="">3353              = new Comparator&lt;AppInfo&gt;() {                                                                         </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3354          public final int compare(AppInfo a, AppInfo b) {                                                          </span>
<span class="4743139001154708795" onmouseenter="enter('4743139001154708795');" onmouseout="out('4743139001154708795');" style="">3355              if (a.firstInstallTime &lt; b.firstInstallTime) return 1;                                                </span>
<span class="2246013200960361834" onmouseenter="enter('2246013200960361834');" onmouseout="out('2246013200960361834');" style="">3356              if (a.firstInstallTime &gt; b.firstInstallTime) return -1;                                               </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style="">3357              return 0;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3358          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3359      };                                                                                                            </span>
<span class="-8609474311948503984" onmouseenter="enter('-8609474311948503984');" onmouseout="out('-8609474311948503984');" style="">3360      public static final Comparator&lt;AppWidgetProviderInfo&gt; getWidgetNameComparator() {                             </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">3361          final Collator collator = Collator.getInstance();                                                         </span>
<span class="-2259377864696368534" onmouseenter="enter('-2259377864696368534');" onmouseout="out('-2259377864696368534');" style="">3362          return new Comparator&lt;AppWidgetProviderInfo&gt;() {                                                          </span>
<span class="-678507615594739242" onmouseenter="enter('-678507615594739242');" onmouseout="out('-678507615594739242');" style="">3363              public final int compare(AppWidgetProviderInfo a, AppWidgetProviderInfo b) {                          </span>
<span class="2077578932126968211" onmouseenter="enter('2077578932126968211');" onmouseout="out('2077578932126968211');" style="">3364                  return collator.compare(a.label.toString().trim(), b.label.toString().trim());                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3365              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3366          };                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3367      }                                                                                                             </span>
<span class="-2741084556110057526" onmouseenter="enter('-2741084556110057526');" onmouseout="out('-2741084556110057526');" style="">3368      static ComponentName getComponentNameFromResolveInfo(ResolveInfo info) {                                      </span>
<span class="5044967282776033452" onmouseenter="enter('5044967282776033452');" onmouseout="out('5044967282776033452');" style="">3369          if (info.activityInfo != null) {                                                                          </span>
<span class="4524084479320544608" onmouseenter="enter('4524084479320544608');" onmouseout="out('4524084479320544608');" style="">3370              return new ComponentName(info.activityInfo.packageName, info.activityInfo.name);                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3371          } else {                                                                                                  </span>
<span class="-6175863207819175779" onmouseenter="enter('-6175863207819175779');" onmouseout="out('-6175863207819175779');" style="">3372              return new ComponentName(info.serviceInfo.packageName, info.serviceInfo.name);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3373          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3374      }                                                                                                             </span>
<span class="-1238156797468239183" onmouseenter="enter('-1238156797468239183');" onmouseout="out('-1238156797468239183');" style="">3375      public static class ShortcutNameComparator implements Comparator&lt;ResolveInfo&gt; {                               </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">3376          private Collator mCollator;                                                                               </span>
<span class="3738582539680694944" onmouseenter="enter('3738582539680694944');" onmouseout="out('3738582539680694944');" style="">3377          private PackageManager mPackageManager;                                                                   </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">3378          private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                                        </span>
<span class="-5960404209194449161" onmouseenter="enter('-5960404209194449161');" onmouseout="out('-5960404209194449161');" style="">3379          ShortcutNameComparator(PackageManager pm) {                                                               </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="">3380              mPackageManager = pm;                                                                                 </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">3381              mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                                    </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3382              mCollator = Collator.getInstance();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3383          }                                                                                                         </span>
<span class="-5325604689380562785" onmouseenter="enter('-5325604689380562785');" onmouseout="out('-5325604689380562785');" style="">3384          ShortcutNameComparator(PackageManager pm, HashMap&lt;Object, CharSequence&gt; labelCache) {                     </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="">3385              mPackageManager = pm;                                                                                 </span>
<span class="-1230739904022851098" onmouseenter="enter('-1230739904022851098');" onmouseout="out('-1230739904022851098');" style="">3386              mLabelCache = labelCache;                                                                             </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3387              mCollator = Collator.getInstance();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3388          }                                                                                                         </span>
<span class="2504403784205444317" onmouseenter="enter('2504403784205444317');" onmouseout="out('2504403784205444317');" style="">3389          public final int compare(ResolveInfo a, ResolveInfo b) {                                                  </span>
<span class="177946296771916785" onmouseenter="enter('177946296771916785');" onmouseout="out('177946296771916785');" style="">3390              CharSequence labelA, labelB;                                                                          </span>
<span class="2313389288092914550" onmouseenter="enter('2313389288092914550');" onmouseout="out('2313389288092914550');" style="">3391              ComponentName keyA = LauncherModel.getComponentNameFromResolveInfo(a);                                </span>
<span class="1313017237584786738" onmouseenter="enter('1313017237584786738');" onmouseout="out('1313017237584786738');" style="">3392              ComponentName keyB = LauncherModel.getComponentNameFromResolveInfo(b);                                </span>
<span class="6987605502838603761" onmouseenter="enter('6987605502838603761');" onmouseout="out('6987605502838603761');" style="">3393              if (mLabelCache.containsKey(keyA)) {                                                                  </span>
<span class="-8432555163859180221" onmouseenter="enter('-8432555163859180221');" onmouseout="out('-8432555163859180221');" style="">3394                  labelA = mLabelCache.get(keyA);                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3395              } else {                                                                                              </span>
<span class="-2584626643586656789" onmouseenter="enter('-2584626643586656789');" onmouseout="out('-2584626643586656789');" style="">3396                  labelA = a.loadLabel(mPackageManager).toString().trim();                                          </span>
<span  style="">3397                                                                                                                    </span>
<span class="-8431652685509449538" onmouseenter="enter('-8431652685509449538');" onmouseout="out('-8431652685509449538');" style="">3398                  mLabelCache.put(keyA, labelA);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3399              }                                                                                                     </span>
<span class="-6450873724396873776" onmouseenter="enter('-6450873724396873776');" onmouseout="out('-6450873724396873776');" style="">3400              if (mLabelCache.containsKey(keyB)) {                                                                  </span>
<span class="-3184391819650288160" onmouseenter="enter('-3184391819650288160');" onmouseout="out('-3184391819650288160');" style="">3401                  labelB = mLabelCache.get(keyB);                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3402              } else {                                                                                              </span>
<span class="-6035042839601081566" onmouseenter="enter('-6035042839601081566');" onmouseout="out('-6035042839601081566');" style="">3403                  labelB = b.loadLabel(mPackageManager).toString().trim();                                          </span>
<span  style="">3404                                                                                                                    </span>
<span class="6304111994442836155" onmouseenter="enter('6304111994442836155');" onmouseout="out('6304111994442836155');" style="">3405                  mLabelCache.put(keyB, labelB);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3406              }                                                                                                     </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3407              return mCollator.compare(labelA, labelB);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3408          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3409      };                                                                                                            </span>
<span class="-9068712813001281029" onmouseenter="enter('-9068712813001281029');" onmouseout="out('-9068712813001281029');" style="">3410      public static class WidgetAndShortcutNameComparator implements Comparator&lt;Object&gt; {                           </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">3411          private Collator mCollator;                                                                               </span>
<span class="3738582539680694944" onmouseenter="enter('3738582539680694944');" onmouseout="out('3738582539680694944');" style="">3412          private PackageManager mPackageManager;                                                                   </span>
<span class="-3647203189121938913" onmouseenter="enter('-3647203189121938913');" onmouseout="out('-3647203189121938913');" style="">3413          private HashMap&lt;Object, String&gt; mLabelCache;                                                              </span>
<span class="-7973787508768304552" onmouseenter="enter('-7973787508768304552');" onmouseout="out('-7973787508768304552');" style="">3414          WidgetAndShortcutNameComparator(PackageManager pm) {                                                      </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="">3415              mPackageManager = pm;                                                                                 </span>
<span class="240497455152177218" onmouseenter="enter('240497455152177218');" onmouseout="out('240497455152177218');" style="">3416              mLabelCache = new HashMap&lt;Object, String&gt;();                                                          </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3417              mCollator = Collator.getInstance();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3418          }                                                                                                         </span>
<span class="6735042653098150116" onmouseenter="enter('6735042653098150116');" onmouseout="out('6735042653098150116');" style="">3419          public final int compare(Object a, Object b) {                                                            </span>
<span class="-655692707583917271" onmouseenter="enter('-655692707583917271');" onmouseout="out('-655692707583917271');" style="">3420              String labelA, labelB;                                                                                </span>
<span class="-5754282386436968390" onmouseenter="enter('-5754282386436968390');" onmouseout="out('-5754282386436968390');" style="">3421              if (mLabelCache.containsKey(a)) {                                                                     </span>
<span class="9174303291338212675" onmouseenter="enter('9174303291338212675');" onmouseout="out('9174303291338212675');" style="">3422                  labelA = mLabelCache.get(a);                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3423              } else {                                                                                              </span>
<span class="-5230674800178108876" onmouseenter="enter('-5230674800178108876');" onmouseout="out('-5230674800178108876');" style="">3424                  labelA = (a instanceof AppWidgetProviderInfo) ?                                                   </span>
<span class="8106329842535817312" onmouseenter="enter('8106329842535817312');" onmouseout="out('8106329842535817312');" style="">3425                      ((AppWidgetProviderInfo) a).label :                                                           </span>
<span class="2303647925533744119" onmouseenter="enter('2303647925533744119');" onmouseout="out('2303647925533744119');" style="">3426                      ((ResolveInfo) a).loadLabel(mPackageManager).toString().trim();                               </span>
<span class="-6757493580793216382" onmouseenter="enter('-6757493580793216382');" onmouseout="out('-6757493580793216382');" style="">3427                  mLabelCache.put(a, labelA);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3428              }                                                                                                     </span>
<span class="2173723640298609502" onmouseenter="enter('2173723640298609502');" onmouseout="out('2173723640298609502');" style="">3429              if (mLabelCache.containsKey(b)) {                                                                     </span>
<span class="-253401768434607465" onmouseenter="enter('-253401768434607465');" onmouseout="out('-253401768434607465');" style="">3430                  labelB = mLabelCache.get(b);                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3431              } else {                                                                                              </span>
<span class="2760475927841141319" onmouseenter="enter('2760475927841141319');" onmouseout="out('2760475927841141319');" style="">3432                  labelB = (b instanceof AppWidgetProviderInfo) ?                                                   </span>
<span class="-8579211562497370011" onmouseenter="enter('-8579211562497370011');" onmouseout="out('-8579211562497370011');" style="">3433                      ((AppWidgetProviderInfo) b).label :                                                           </span>
<span class="-7445104582750098413" onmouseenter="enter('-7445104582750098413');" onmouseout="out('-7445104582750098413');" style="">3434                      ((ResolveInfo) b).loadLabel(mPackageManager).toString().trim();                               </span>
<span class="1041849722861633477" onmouseenter="enter('1041849722861633477');" onmouseout="out('1041849722861633477');" style="">3435                  mLabelCache.put(b, labelB);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3436              }                                                                                                     </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3437              return mCollator.compare(labelA, labelB);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3438          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3439      };                                                                                                            </span>
<span  style="">3440                                                                                                                    </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">3441      public void dumpState() {                                                                                     </span>
<span class="-8509686920730582178" onmouseenter="enter('-8509686920730582178');" onmouseout="out('-8509686920730582178');" style="">3442          Log.d(TAG, &quot;mCallbacks=&quot; + mCallbacks);                                                                   </span>
<span class="-6032216957883964740" onmouseenter="enter('-6032216957883964740');" onmouseout="out('-6032216957883964740');" style="">3443          AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.data&quot;, mBgAllAppsList.data);                           </span>
<span class="8779182816240818818" onmouseenter="enter('8779182816240818818');" onmouseout="out('8779182816240818818');" style="">3444          AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.added&quot;, mBgAllAppsList.added);                         </span>
<span class="5513048904999210121" onmouseenter="enter('5513048904999210121');" onmouseout="out('5513048904999210121');" style="">3445          AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.removed&quot;, mBgAllAppsList.removed);                     </span>
<span class="-6417320778911436113" onmouseenter="enter('-6417320778911436113');" onmouseout="out('-6417320778911436113');" style="">3446          AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.modified&quot;, mBgAllAppsList.modified);                   </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">3447          if (mLoaderTask != null) {                                                                                </span>
<span class="-1961259503181318170" onmouseenter="enter('-1961259503181318170');" onmouseout="out('-1961259503181318170');" style="">3448              mLoaderTask.dumpState();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3449          } else {                                                                                                  </span>
<span class="-4934836822377624371" onmouseenter="enter('-4934836822377624371');" onmouseout="out('-4934836822377624371');" style="">3450              Log.d(TAG, &quot;mLoaderTask=null&quot;);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3451          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3452      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3453  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2   * Copyright (C) 2008 The Android Open Source Project                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span  style="">  16                                                                                                                    </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17  package com.android.launcher3;                                                                                    </span>
<span  style="">  18                                                                                                                    </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  19  import android.app.SearchManager;                                                                                 </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  20  import android.appwidget.AppWidgetManager;                                                                        </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  21  import android.appwidget.AppWidgetProviderInfo;                                                                   </span>
<span class="-984325520036959693" onmouseenter="enter('-984325520036959693');" onmouseout="out('-984325520036959693');" style="">  22  import android.content.*;                                                                                         </span>
<span class="-8524679231303418936" onmouseenter="enter('-8524679231303418936');" onmouseout="out('-8524679231303418936');" style="">  23  import android.content.Intent.ShortcutIconResource;                                                               </span>
<span class="-9183914406029598577" onmouseenter="enter('-9183914406029598577');" onmouseout="out('-9183914406029598577');" style="">  24  import android.content.pm.ActivityInfo;                                                                           </span>
<span class="-5891303348447418015" onmouseenter="enter('-5891303348447418015');" onmouseout="out('-5891303348447418015');" style="">  25  import android.content.pm.PackageInfo;                                                                            </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  26  import android.content.pm.PackageManager;                                                                         </span>
<span class="-2097531830514422912" onmouseenter="enter('-2097531830514422912');" onmouseout="out('-2097531830514422912');" style="">  27  import android.content.pm.PackageManager.NameNotFoundException;                                                   </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  28  import android.content.pm.ResolveInfo;                                                                            </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">  29  import android.content.res.Configuration;                                                                         </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  30  import android.content.res.Resources;                                                                             </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  31  import android.database.Cursor;                                                                                   </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  32  import android.graphics.Bitmap;                                                                                   </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  33  import android.graphics.BitmapFactory;                                                                            </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  34  import android.net.Uri;                                                                                           </span>
<span class="-5861542142927414420" onmouseenter="enter('-5861542142927414420');" onmouseout="out('-5861542142927414420');" style="">  35  import android.os.Environment;                                                                                    </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  36  import android.os.Handler;                                                                                        </span>
<span class="5075624728668821268" onmouseenter="enter('5075624728668821268');" onmouseout="out('5075624728668821268');" style="">  37  import android.os.HandlerThread;                                                                                  </span>
<span class="-3467845820974384276" onmouseenter="enter('-3467845820974384276');" onmouseout="out('-3467845820974384276');" style="">  38  import android.os.Parcelable;                                                                                     </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  39  import android.os.Process;                                                                                        </span>
<span class="2671599330745315048" onmouseenter="enter('2671599330745315048');" onmouseout="out('2671599330745315048');" style="">  40  import android.os.RemoteException;                                                                                </span>
<span class="2720528326800018495" onmouseenter="enter('2720528326800018495');" onmouseout="out('2720528326800018495');" style="">  41  import android.os.SystemClock;                                                                                    </span>
<span class="9209739606564279934" onmouseenter="enter('9209739606564279934');" onmouseout="out('9209739606564279934');" style="">  42  import android.provider.BaseColumns;                                                                              </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  43  import android.text.TextUtils;                                                                                    </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  44  import android.util.Log;                                                                                          </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  45  import android.util.Pair;                                                                                         </span>
<span  style="">  46                                                                                                                    </span>
<span class="2480987830742885141" onmouseenter="enter('2480987830742885141');" onmouseout="out('2480987830742885141');" style="">  47  import com.android.launcher3.InstallWidgetReceiver.WidgetMimeTypeHandlerData;                                     </span>
<span  style="">  48                                                                                                                    </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  49  import java.lang.ref.WeakReference;                                                                               </span>
<span class="7911689652558139170" onmouseenter="enter('7911689652558139170');" onmouseout="out('7911689652558139170');" style="">  50  import java.net.URISyntaxException;                                                                               </span>
<span class="-2082349054173013619" onmouseenter="enter('-2082349054173013619');" onmouseout="out('-2082349054173013619');" style="">  51  import java.text.Collator;                                                                                        </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  52  import java.util.ArrayList;                                                                                       </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  53  import java.util.Arrays;                                                                                          </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  54  import java.util.Collection;                                                                                      </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  55  import java.util.Collections;                                                                                     </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  56  import java.util.Comparator;                                                                                      </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  57  import java.util.HashMap;                                                                                         </span>
<span class="-1320562196372945707" onmouseenter="enter('-1320562196372945707');" onmouseout="out('-1320562196372945707');" style="">  58  import java.util.HashSet;                                                                                         </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  59  import java.util.Iterator;                                                                                        </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  60  import java.util.List;                                                                                            </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  61  import java.util.Set;                                                                                             </span>
<span class="7536840878424124946" onmouseenter="enter('7536840878424124946');" onmouseout="out('7536840878424124946');" style="">  62  import java.util.TreeMap;                                                                                         </span>
<span class="-2705241621224930031" onmouseenter="enter('-2705241621224930031');" onmouseout="out('-2705241621224930031');" style="">  63  import java.util.concurrent.atomic.AtomicBoolean;                                                                 </span>
<span  style="">  64                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  65  /**                                                                                                               </span>
<span class="-4436404655378914540" onmouseenter="enter('-4436404655378914540');" onmouseout="out('-4436404655378914540');" style="">  66   * Maintains in-memory state of the Launcher. It is expected that there should be only one                        </span>
<span class="-4273357065044936134" onmouseenter="enter('-4273357065044936134');" onmouseout="out('-4273357065044936134');" style="">  67   * LauncherModel object held in a static. Also provide APIs for updating the database state                       </span>
<span class="-4398933382026523538" onmouseenter="enter('-4398933382026523538');" onmouseout="out('-4398933382026523538');" style="">  68   * for the Launcher.                                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  69   */                                                                                                               </span>
<span class="-1237709953007126496" onmouseenter="enter('-1237709953007126496');" onmouseout="out('-1237709953007126496');" style="">  70  public class LauncherModel extends BroadcastReceiver {                                                            </span>
<span class="4817350607901898392" onmouseenter="enter('4817350607901898392');" onmouseout="out('4817350607901898392');" style="">  71      static final boolean DEBUG_LOADERS = false;                                                                   </span>
<span class="7166020908404799948" onmouseenter="enter('7166020908404799948');" onmouseout="out('7166020908404799948');" style="">  72      static final String TAG = &quot;Launcher.Model&quot;;                                                                   </span>
<span  style="">  73                                                                                                                    </span>
<span class="-110249828783225872" onmouseenter="enter('-110249828783225872');" onmouseout="out('-110249828783225872');" style="">  74      // true = use a &quot;More Apps&quot; folder for non-workspace apps on upgrade                                          </span>
<span class="2480947255658609927" onmouseenter="enter('2480947255658609927');" onmouseout="out('2480947255658609927');" style="">  75      // false = strew non-workspace apps across the workspace on upgrade                                           </span>
<span class="-258177193926802879" onmouseenter="enter('-258177193926802879');" onmouseout="out('-258177193926802879');" style="">  76      public static final boolean UPGRADE_USE_MORE_APPS_FOLDER = false;                                             </span>
<span  style="">  77                                                                                                                    </span>
<span class="2412961508740342038" onmouseenter="enter('2412961508740342038');" onmouseout="out('2412961508740342038');" style="">  78      public static final int LOADER_FLAG_NONE = 0;                                                                 </span>
<span class="-3582007365816200905" onmouseenter="enter('-3582007365816200905');" onmouseout="out('-3582007365816200905');" style="">  79      public static final int LOADER_FLAG_CLEAR_WORKSPACE = 1 &lt;&lt; 0;                                                 </span>
<span class="2276565639346953559" onmouseenter="enter('2276565639346953559');" onmouseout="out('2276565639346953559');" style="">  80      public static final int LOADER_FLAG_MIGRATE_SHORTCUTS = 1 &lt;&lt; 1;                                               </span>
<span  style="">  81                                                                                                                    </span>
<span class="-4154694662050657236" onmouseenter="enter('-4154694662050657236');" onmouseout="out('-4154694662050657236');" style="">  82      private static final int ITEMS_CHUNK = 6; // batch size for the workspace icons                               </span>
<span class="-5674768092661618077" onmouseenter="enter('-5674768092661618077');" onmouseout="out('-5674768092661618077');" style="">  83      private static final long INVALID_SCREEN_ID = -1L;                                                            </span>
<span  style="">  84                                                                                                                    </span>
<span class="-2106715535373822300" onmouseenter="enter('-2106715535373822300');" onmouseout="out('-2106715535373822300');" style="">  85      private final boolean mAppsCanBeOnRemoveableStorage;                                                          </span>
<span class="4731979794377415890" onmouseenter="enter('4731979794377415890');" onmouseout="out('4731979794377415890');" style="">  86      private final boolean mOldContentProviderExists;                                                              </span>
<span  style="">  87                                                                                                                    </span>
<span class="3718007027314914184" onmouseenter="enter('3718007027314914184');" onmouseout="out('3718007027314914184');" style="">  88      private final LauncherAppState mApp;                                                                          </span>
<span class="-7373075918619999414" onmouseenter="enter('-7373075918619999414');" onmouseout="out('-7373075918619999414');" style="">  89      private final Object mLock = new Object();                                                                    </span>
<span class="6556510276342102272" onmouseenter="enter('6556510276342102272');" onmouseout="out('6556510276342102272');" style="">  90      private DeferredHandler mHandler = new DeferredHandler();                                                     </span>
<span class="-7862379002163915329" onmouseenter="enter('-7862379002163915329');" onmouseout="out('-7862379002163915329');" style="">  91      private LoaderTask mLoaderTask;                                                                               </span>
<span class="-3485037850110155122" onmouseenter="enter('-3485037850110155122');" onmouseout="out('-3485037850110155122');" style="">  92      private boolean mIsLoaderTaskRunning;                                                                         </span>
<span class="7419034271767928159" onmouseenter="enter('7419034271767928159');" onmouseout="out('7419034271767928159');" style="">  93      private volatile boolean mFlushingWorkerThread;                                                               </span>
<span  style="">  94                                                                                                                    </span>
<span class="7008336552769109798" onmouseenter="enter('7008336552769109798');" onmouseout="out('7008336552769109798');" style="">  95      // Specific runnable types that are run on the main thread deferred handler, this allows us to                </span>
<span class="-2862621427901202146" onmouseenter="enter('-2862621427901202146');" onmouseout="out('-2862621427901202146');" style="">  96      // clear all queued binding runnables when the Launcher activity is destroyed.                                </span>
<span class="2773124109533293313" onmouseenter="enter('2773124109533293313');" onmouseout="out('2773124109533293313');" style="">  97      private static final int MAIN_THREAD_NORMAL_RUNNABLE = 0;                                                     </span>
<span class="3742092121997602406" onmouseenter="enter('3742092121997602406');" onmouseout="out('3742092121997602406');" style="">  98      private static final int MAIN_THREAD_BINDING_RUNNABLE = 1;                                                    </span>
<span  style="">  99                                                                                                                    </span>
<span  style=""> 100                                                                                                                    </span>
<span class="1887278082230738056" onmouseenter="enter('1887278082230738056');" onmouseout="out('1887278082230738056');" style=""> 101      private static final HandlerThread sWorkerThread = new HandlerThread(&quot;launcher-loader&quot;);                      </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style=""> 102      static {                                                                                                      </span>
<span class="3211376391739143126" onmouseenter="enter('3211376391739143126');" onmouseout="out('3211376391739143126');" style=""> 103          sWorkerThread.start();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104      }                                                                                                             </span>
<span class="2264102646027284513" onmouseenter="enter('2264102646027284513');" onmouseout="out('2264102646027284513');" style=""> 105      private static final Handler sWorker = new Handler(sWorkerThread.getLooper());                                </span>
<span  style=""> 106                                                                                                                    </span>
<span class="3535035959074757881" onmouseenter="enter('3535035959074757881');" onmouseout="out('3535035959074757881');" style=""> 107      // We start off with everything not loaded.  After that, we assume that                                       </span>
<span class="2643799052940090988" onmouseenter="enter('2643799052940090988');" onmouseout="out('2643799052940090988');" style=""> 108      // our monitoring of the package manager provides all updates and we never                                    </span>
<span class="-1838192547825761021" onmouseenter="enter('-1838192547825761021');" onmouseout="out('-1838192547825761021');" style=""> 109      // need to do a requery.  These are only ever touched from the loader thread.                                 </span>
<span class="-8758726942217087840" onmouseenter="enter('-8758726942217087840');" onmouseout="out('-8758726942217087840');" style=""> 110      private boolean mWorkspaceLoaded;                                                                             </span>
<span class="-1682003936594375249" onmouseenter="enter('-1682003936594375249');" onmouseout="out('-1682003936594375249');" style=""> 111      private boolean mAllAppsLoaded;                                                                               </span>
<span  style=""> 112                                                                                                                    </span>
<span class="4437381645098142172" onmouseenter="enter('4437381645098142172');" onmouseout="out('4437381645098142172');" style=""> 113      // When we are loading pages synchronously, we can&#x27;t just post the binding of items on the side               </span>
<span class="3512738277131757196" onmouseenter="enter('3512738277131757196');" onmouseout="out('3512738277131757196');" style=""> 114      // pages as this delays the rotation process.  Instead, we wait for a callback from the first                 </span>
<span class="1019766179129744653" onmouseenter="enter('1019766179129744653');" onmouseout="out('1019766179129744653');" style=""> 115      // draw (in Workspace) to initiate the binding of the remaining side pages.  Any time we start                </span>
<span class="7373070490167110663" onmouseenter="enter('7373070490167110663');" onmouseout="out('7373070490167110663');" style=""> 116      // a normal load, we also clear this set of Runnables.                                                        </span>
<span class="4843369785562403466" onmouseenter="enter('4843369785562403466');" onmouseout="out('4843369785562403466');" style=""> 117      static final ArrayList&lt;Runnable&gt; mDeferredBindRunnables = new ArrayList&lt;Runnable&gt;();                          </span>
<span  style=""> 118                                                                                                                    </span>
<span class="5593309185710650450" onmouseenter="enter('5593309185710650450');" onmouseout="out('5593309185710650450');" style=""> 119      private WeakReference&lt;Callbacks&gt; mCallbacks;                                                                  </span>
<span  style=""> 120                                                                                                                    </span>
<span class="-4825633287564006425" onmouseenter="enter('-4825633287564006425');" onmouseout="out('-4825633287564006425');" style=""> 121      // &lt; only access in worker thread &gt;                                                                           </span>
<span class="-7893410053402242276" onmouseenter="enter('-7893410053402242276');" onmouseout="out('-7893410053402242276');" style=""> 122      AllAppsList mBgAllAppsList;                                                                                   </span>
<span  style=""> 123                                                                                                                    </span>
<span class="-4696524037009093502" onmouseenter="enter('-4696524037009093502');" onmouseout="out('-4696524037009093502');" style=""> 124      // The lock that must be acquired before referencing any static bg data structures.  Unlike                   </span>
<span class="-2471307598696798987" onmouseenter="enter('-2471307598696798987');" onmouseout="out('-2471307598696798987');" style=""> 125      // other locks, this one can generally be held long-term because we never expect any of these                 </span>
<span class="4310884307601416106" onmouseenter="enter('4310884307601416106');" onmouseout="out('4310884307601416106');" style=""> 126      // static data structures to be referenced outside of the worker thread except on the first                   </span>
<span class="2260118264672300125" onmouseenter="enter('2260118264672300125');" onmouseout="out('2260118264672300125');" style=""> 127      // load after configuration change.                                                                           </span>
<span class="-8652324765300755578" onmouseenter="enter('-8652324765300755578');" onmouseout="out('-8652324765300755578');" style=""> 128      static final Object sBgLock = new Object();                                                                   </span>
<span  style=""> 129                                                                                                                    </span>
<span class="861828438456678075" onmouseenter="enter('861828438456678075');" onmouseout="out('861828438456678075');" style=""> 130      // sBgItemsIdMap maps *all* the ItemInfos (shortcuts, folders, and widgets) created by                        </span>
<span class="3964854605559074701" onmouseenter="enter('3964854605559074701');" onmouseout="out('3964854605559074701');" style=""> 131      // LauncherModel to their ids                                                                                 </span>
<span class="8713038185903703074" onmouseenter="enter('8713038185903703074');" onmouseout="out('8713038185903703074');" style=""> 132      static final HashMap&lt;Long, ItemInfo&gt; sBgItemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                           </span>
<span  style=""> 133                                                                                                                    </span>
<span class="-4875305940507672487" onmouseenter="enter('-4875305940507672487');" onmouseout="out('-4875305940507672487');" style=""> 134      // sBgWorkspaceItems is passed to bindItems, which expects a list of all folders and shortcuts                </span>
<span class="5836863726682543660" onmouseenter="enter('5836863726682543660');" onmouseout="out('5836863726682543660');" style=""> 135      //       created by LauncherModel that are directly on the home screen (however, no widgets or                </span>
<span class="4941255916545901139" onmouseenter="enter('4941255916545901139');" onmouseout="out('4941255916545901139');" style=""> 136      //       shortcuts within folders).                                                                           </span>
<span class="4770535944422974992" onmouseenter="enter('4770535944422974992');" onmouseout="out('4770535944422974992');" style=""> 137      static final ArrayList&lt;ItemInfo&gt; sBgWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                               </span>
<span  style=""> 138                                                                                                                    </span>
<span class="1795288911868581126" onmouseenter="enter('1795288911868581126');" onmouseout="out('1795288911868581126');" style=""> 139      // sBgAppWidgets is all LauncherAppWidgetInfo created by LauncherModel. Passed to bindAppWidget()             </span>
<span class="2792930227258213532" onmouseenter="enter('2792930227258213532');" onmouseout="out('2792930227258213532');" style=""> 140      static final ArrayList&lt;LauncherAppWidgetInfo&gt; sBgAppWidgets =                                                 </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style=""> 141          new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                                   </span>
<span  style=""> 142                                                                                                                    </span>
<span class="8356003681152445460" onmouseenter="enter('8356003681152445460');" onmouseout="out('8356003681152445460');" style=""> 143      // sBgFolders is all FolderInfos created by LauncherModel. Passed to bindFolders()                            </span>
<span class="8065187755370300271" onmouseenter="enter('8065187755370300271');" onmouseout="out('8065187755370300271');" style=""> 144      static final HashMap&lt;Long, FolderInfo&gt; sBgFolders = new HashMap&lt;Long, FolderInfo&gt;();                          </span>
<span  style=""> 145                                                                                                                    </span>
<span class="-6906235458204319724" onmouseenter="enter('-6906235458204319724');" onmouseout="out('-6906235458204319724');" style=""> 146      // sBgDbIconCache is the set of ItemInfos that need to have their icons updated in the database               </span>
<span class="-2979801471293813396" onmouseenter="enter('-2979801471293813396');" onmouseout="out('-2979801471293813396');" style=""> 147      static final HashMap&lt;Object, byte[]&gt; sBgDbIconCache = new HashMap&lt;Object, byte[]&gt;();                          </span>
<span  style=""> 148                                                                                                                    </span>
<span class="8536603216028959604" onmouseenter="enter('8536603216028959604');" onmouseout="out('8536603216028959604');" style=""> 149      // sBgWorkspaceScreens is the ordered set of workspace screens.                                               </span>
<span class="-1373680151983800221" onmouseenter="enter('-1373680151983800221');" onmouseout="out('-1373680151983800221');" style=""> 150      static final ArrayList&lt;Long&gt; sBgWorkspaceScreens = new ArrayList&lt;Long&gt;();                                     </span>
<span  style=""> 151                                                                                                                    </span>
<span class="-5356624270019806590" onmouseenter="enter('-5356624270019806590');" onmouseout="out('-5356624270019806590');" style=""> 152      // &lt;/ only access in worker thread &gt;                                                                          </span>
<span  style=""> 153                                                                                                                    </span>
<span class="-3446390922171092190" onmouseenter="enter('-3446390922171092190');" onmouseout="out('-3446390922171092190');" style=""> 154      private IconCache mIconCache;                                                                                 </span>
<span class="7327140815403295852" onmouseenter="enter('7327140815403295852');" onmouseout="out('7327140815403295852');" style=""> 155      private Bitmap mDefaultIcon;                                                                                  </span>
<span  style=""> 156                                                                                                                    </span>
<span class="-1428370913368008087" onmouseenter="enter('-1428370913368008087');" onmouseout="out('-1428370913368008087');" style=""> 157      protected int mPreviousConfigMcc;                                                                             </span>
<span  style=""> 158                                                                                                                    </span>
<span class="-3338718885622541528" onmouseenter="enter('-3338718885622541528');" onmouseout="out('-3338718885622541528');" style=""> 159      public interface Callbacks {                                                                                  </span>
<span class="-4231961333511672310" onmouseenter="enter('-4231961333511672310');" onmouseout="out('-4231961333511672310');" style=""> 160          public boolean setLoadOnResume();                                                                         </span>
<span class="803814078537529918" onmouseenter="enter('803814078537529918');" onmouseout="out('803814078537529918');" style=""> 161          public int getCurrentWorkspaceScreen();                                                                   </span>
<span class="9018975241375557324" onmouseenter="enter('9018975241375557324');" onmouseout="out('9018975241375557324');" style=""> 162          public void startBinding();                                                                               </span>
<span class="3160017311795321748" onmouseenter="enter('3160017311795321748');" onmouseout="out('3160017311795321748');" style=""> 163          public void bindItems(ArrayList&lt;ItemInfo&gt; shortcuts, int start, int end,                                  </span>
<span class="2581406714293150955" onmouseenter="enter('2581406714293150955');" onmouseout="out('2581406714293150955');" style=""> 164                                boolean forceAnimateIcons);                                                         </span>
<span class="5464078408309929972" onmouseenter="enter('5464078408309929972');" onmouseout="out('5464078408309929972');" style=""> 165          public void bindScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                                </span>
<span class="8828153861812868297" onmouseenter="enter('8828153861812868297');" onmouseout="out('8828153861812868297');" style=""> 166          public void bindAddScreens(ArrayList&lt;Long&gt; orderedScreenIds);                                             </span>
<span class="6163649300164694862" onmouseenter="enter('6163649300164694862');" onmouseout="out('6163649300164694862');" style=""> 167          public void bindFolders(HashMap&lt;Long,FolderInfo&gt; folders);                                                </span>
<span class="-3241982460320043016" onmouseenter="enter('-3241982460320043016');" onmouseout="out('-3241982460320043016');" style=""> 168          public void finishBindingItems(boolean upgradePath);                                                      </span>
<span class="-1509675786278068914" onmouseenter="enter('-1509675786278068914');" onmouseout="out('-1509675786278068914');" style=""> 169          public void bindAppWidget(LauncherAppWidgetInfo info);                                                    </span>
<span class="-8847143600952784869" onmouseenter="enter('-8847143600952784869');" onmouseout="out('-8847143600952784869');" style=""> 170          public void bindAllApplications(ArrayList&lt;AppInfo&gt; apps);                                                 </span>
<span class="1774766681438121710" onmouseenter="enter('1774766681438121710');" onmouseout="out('1774766681438121710');" style=""> 171          public void bindAppsAdded(ArrayList&lt;Long&gt; newScreens,                                                     </span>
<span class="-4634129325608240116" onmouseenter="enter('-4634129325608240116');" onmouseout="out('-4634129325608240116');" style=""> 172                                    ArrayList&lt;ItemInfo&gt; addNotAnimated,                                             </span>
<span class="-7991947031099209517" onmouseenter="enter('-7991947031099209517');" onmouseout="out('-7991947031099209517');" style=""> 173                                    ArrayList&lt;ItemInfo&gt; addAnimated,                                                </span>
<span class="7647862954797634111" onmouseenter="enter('7647862954797634111');" onmouseout="out('7647862954797634111');" style=""> 174                                    ArrayList&lt;AppInfo&gt; addedApps);                                                  </span>
<span class="4809991796097108143" onmouseenter="enter('4809991796097108143');" onmouseout="out('4809991796097108143');" style=""> 175          public void bindAppsUpdated(ArrayList&lt;AppInfo&gt; apps);                                                     </span>
<span class="-3322135261875169793" onmouseenter="enter('-3322135261875169793');" onmouseout="out('-3322135261875169793');" style=""> 176          public void bindComponentsRemoved(ArrayList&lt;String&gt; packageNames,                                         </span>
<span class="-4070092502400219459" onmouseenter="enter('-4070092502400219459');" onmouseout="out('-4070092502400219459');" style=""> 177                          ArrayList&lt;AppInfo&gt; appInfos);                                                             </span>
<span class="-5054203298075540925" onmouseenter="enter('-5054203298075540925');" onmouseout="out('-5054203298075540925');" style=""> 178          public void bindPackagesUpdated(ArrayList&lt;Object&gt; widgetsAndShortcuts);                                   </span>
<span class="7466294501708892199" onmouseenter="enter('7466294501708892199');" onmouseout="out('7466294501708892199');" style=""> 179          public void bindSearchablesChanged();                                                                     </span>
<span class="-4863664490041232492" onmouseenter="enter('-4863664490041232492');" onmouseout="out('-4863664490041232492');" style=""> 180          public boolean isAllAppsButtonRank(int rank);                                                             </span>
<span class="-6469605959563265863" onmouseenter="enter('-6469605959563265863');" onmouseout="out('-6469605959563265863');" style=""> 181          public void onPageBoundSynchronously(int page);                                                           </span>
<span class="2927470839806734779" onmouseenter="enter('2927470839806734779');" onmouseout="out('2927470839806734779');" style=""> 182          public void dumpLogsToLocalData();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183      }                                                                                                             </span>
<span  style=""> 184                                                                                                                    </span>
<span class="6660553528201779332" onmouseenter="enter('6660553528201779332');" onmouseout="out('6660553528201779332');" style=""> 185      public interface ItemInfoFilter {                                                                             </span>
<span class="-4205302945183309423" onmouseenter="enter('-4205302945183309423');" onmouseout="out('-4205302945183309423');" style=""> 186          public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187      }                                                                                                             </span>
<span  style=""> 188                                                                                                                    </span>
<span class="-7540253694606934273" onmouseenter="enter('-7540253694606934273');" onmouseout="out('-7540253694606934273');" style=""> 189      LauncherModel(LauncherAppState app, IconCache iconCache, AppFilter appFilter) {                               </span>
<span class="-3815285143453777974" onmouseenter="enter('-3815285143453777974');" onmouseout="out('-3815285143453777974');" style=""> 190          Context context = app.getContext();                                                                       </span>
<span class="5049533599805126653" onmouseenter="enter('5049533599805126653');" onmouseout="out('5049533599805126653');" style=""> 191          ContentResolver contentResolver = context.getContentResolver();                                           </span>
<span  style=""> 192                                                                                                                    </span>
<span class="1644001329477881511" onmouseenter="enter('1644001329477881511');" onmouseout="out('1644001329477881511');" style=""> 193          mAppsCanBeOnRemoveableStorage = Environment.isExternalStorageRemovable();                                 </span>
<span class="953599912945541719" onmouseenter="enter('953599912945541719');" onmouseout="out('953599912945541719');" style=""> 194          mOldContentProviderExists = (contentResolver.acquireContentProviderClient(                                </span>
<span class="6680469959813031014" onmouseenter="enter('6680469959813031014');" onmouseout="out('6680469959813031014');" style=""> 195                  LauncherSettings.Favorites.OLD_CONTENT_URI) != null);                                             </span>
<span class="8987557410347250467" onmouseenter="enter('8987557410347250467');" onmouseout="out('8987557410347250467');" style=""> 196          mApp = app;                                                                                               </span>
<span class="-1240051748269974178" onmouseenter="enter('-1240051748269974178');" onmouseout="out('-1240051748269974178');" style=""> 197          mBgAllAppsList = new AllAppsList(iconCache, appFilter);                                                   </span>
<span class="1920389422449187498" onmouseenter="enter('1920389422449187498');" onmouseout="out('1920389422449187498');" style=""> 198          mIconCache = iconCache;                                                                                   </span>
<span  style=""> 199                                                                                                                    </span>
<span class="3654972388535142593" onmouseenter="enter('3654972388535142593');" onmouseout="out('3654972388535142593');" style=""> 200          final Resources res = context.getResources();                                                             </span>
<span class="-4708036118337437843" onmouseenter="enter('-4708036118337437843');" onmouseout="out('-4708036118337437843');" style=""> 201          Configuration config = res.getConfiguration();                                                            </span>
<span class="-32775646941108504" onmouseenter="enter('-32775646941108504');" onmouseout="out('-32775646941108504');" style=""> 202          mPreviousConfigMcc = config.mcc;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203      }                                                                                                             </span>
<span  style=""> 204                                                                                                                    </span>
<span class="7032781054018231449" onmouseenter="enter('7032781054018231449');" onmouseout="out('7032781054018231449');" style=""> 205      /** Runs the specified runnable immediately if called from the main thread, otherwise it is                   </span>
<span class="7688515897456092220" onmouseenter="enter('7688515897456092220');" onmouseout="out('7688515897456092220');" style=""> 206       * posted on the main thread handler. */                                                                      </span>
<span class="-3461925467760565643" onmouseenter="enter('-3461925467760565643');" onmouseout="out('-3461925467760565643');" style=""> 207      private void runOnMainThread(Runnable r) {                                                                    </span>
<span class="-8277339055128647976" onmouseenter="enter('-8277339055128647976');" onmouseout="out('-8277339055128647976');" style=""> 208          runOnMainThread(r, 0);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209      }                                                                                                             </span>
<span class="2979979552252814736" onmouseenter="enter('2979979552252814736');" onmouseout="out('2979979552252814736');" style=""> 210      private void runOnMainThread(Runnable r, int type) {                                                          </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 211          if (sWorkerThread.getThreadId() == Process.myTid()) {                                                     </span>
<span class="-8713172384634047131" onmouseenter="enter('-8713172384634047131');" onmouseout="out('-8713172384634047131');" style=""> 212              // If we are on the worker thread, post onto the main handler                                         </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style=""> 213              mHandler.post(r);                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 214          } else {                                                                                                  </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 215              r.run();                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217      }                                                                                                             </span>
<span  style=""> 218                                                                                                                    </span>
<span class="3207003836565128" onmouseenter="enter('3207003836565128');" onmouseout="out('3207003836565128');" style=""> 219      /** Runs the specified runnable immediately if called from the worker thread, otherwise it is                 </span>
<span class="-2756655390038865740" onmouseenter="enter('-2756655390038865740');" onmouseout="out('-2756655390038865740');" style=""> 220       * posted on the worker thread handler. */                                                                    </span>
<span class="-6815764929820931194" onmouseenter="enter('-6815764929820931194');" onmouseout="out('-6815764929820931194');" style=""> 221      private static void runOnWorkerThread(Runnable r) {                                                           </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 222          if (sWorkerThread.getThreadId() == Process.myTid()) {                                                     </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style=""> 223              r.run();                                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 224          } else {                                                                                                  </span>
<span class="4127612692606453253" onmouseenter="enter('4127612692606453253');" onmouseout="out('4127612692606453253');" style=""> 225              // If we are not on the worker thread, then post to the worker handler                                </span>
<span class="8180187504738047103" onmouseenter="enter('8180187504738047103');" onmouseout="out('8180187504738047103');" style=""> 226              sWorker.post(r);                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228      }                                                                                                             </span>
<span  style=""> 229                                                                                                                    </span>
<span class="-7044369129545244866" onmouseenter="enter('-7044369129545244866');" onmouseout="out('-7044369129545244866');" style=""> 230      boolean canMigrateFromOldLauncherDb(Launcher launcher) {                                                      </span>
<span class="7588769537569950934" onmouseenter="enter('7588769537569950934');" onmouseout="out('7588769537569950934');" style=""> 231          return mOldContentProviderExists &amp;&amp; !launcher.isLauncherPreinstalled() ;                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232      }                                                                                                             </span>
<span  style=""> 233                                                                                                                    </span>
<span class="7006856679254675514" onmouseenter="enter('7006856679254675514');" onmouseout="out('7006856679254675514');" style=""> 234      static boolean findNextAvailableIconSpaceInScreen(ArrayList&lt;ItemInfo&gt; items, int[] xy,                        </span>
<span class="-6492711054324248109" onmouseenter="enter('-6492711054324248109');" onmouseout="out('-6492711054324248109');" style=""> 235                                   long screen) {                                                                   </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 236          LauncherAppState app = LauncherAppState.getInstance();                                                    </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style=""> 237          DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                             </span>
<span class="559481881935924132" onmouseenter="enter('559481881935924132');" onmouseout="out('559481881935924132');" style=""> 238          final int xCount = (int) grid.numColumns;                                                                 </span>
<span class="-3430391683121642487" onmouseenter="enter('-3430391683121642487');" onmouseout="out('-3430391683121642487');" style=""> 239          final int yCount = (int) grid.numRows;                                                                    </span>
<span class="9207855715228317472" onmouseenter="enter('9207855715228317472');" onmouseout="out('9207855715228317472');" style=""> 240          boolean[][] occupied = new boolean[xCount][yCount];                                                       </span>
<span  style=""> 241                                                                                                                    </span>
<span class="2963072137114824070" onmouseenter="enter('2963072137114824070');" onmouseout="out('2963072137114824070');" style=""> 242          int cellX, cellY, spanX, spanY;                                                                           </span>
<span class="5020765328610170980" onmouseenter="enter('5020765328610170980');" onmouseout="out('5020765328610170980');" style=""> 243          for (int i = 0; i &lt; items.size(); ++i) {                                                                  </span>
<span class="3181415890192694055" onmouseenter="enter('3181415890192694055');" onmouseout="out('3181415890192694055');" style=""> 244              final ItemInfo item = items.get(i);                                                                   </span>
<span class="-4074076028767186492" onmouseenter="enter('-4074076028767186492');" onmouseout="out('-4074076028767186492');" style=""> 245              if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                                 </span>
<span class="4879929299303230054" onmouseenter="enter('4879929299303230054');" onmouseout="out('4879929299303230054');" style=""> 246                  if (item.screenId == screen) {                                                                    </span>
<span class="-5253640052908660766" onmouseenter="enter('-5253640052908660766');" onmouseout="out('-5253640052908660766');" style=""> 247                      cellX = item.cellX;                                                                           </span>
<span class="8289808867760126989" onmouseenter="enter('8289808867760126989');" onmouseout="out('8289808867760126989');" style=""> 248                      cellY = item.cellY;                                                                           </span>
<span class="-1153670204852401248" onmouseenter="enter('-1153670204852401248');" onmouseout="out('-1153670204852401248');" style=""> 249                      spanX = item.spanX;                                                                           </span>
<span class="-1841066671071348880" onmouseenter="enter('-1841066671071348880');" onmouseout="out('-1841066671071348880');" style=""> 250                      spanY = item.spanY;                                                                           </span>
<span class="3713894754787265371" onmouseenter="enter('3713894754787265371');" onmouseout="out('3713894754787265371');" style=""> 251                      for (int x = cellX; 0 &lt;= x &amp;&amp; x &lt; cellX + spanX &amp;&amp; x &lt; xCount; x++) {                         </span>
<span class="1312990358377437379" onmouseenter="enter('1312990358377437379');" onmouseout="out('1312990358377437379');" style=""> 252                          for (int y = cellY; 0 &lt;= y &amp;&amp; y &lt; cellY + spanY &amp;&amp; y &lt; yCount; y++) {                     </span>
<span class="-8702463444488690423" onmouseenter="enter('-8702463444488690423');" onmouseout="out('-8702463444488690423');" style=""> 253                              occupied[x][y] = true;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 258          }                                                                                                         </span>
<span  style=""> 259                                                                                                                    </span>
<span class="-8431133162249858978" onmouseenter="enter('-8431133162249858978');" onmouseout="out('-8431133162249858978');" style=""> 260          return CellLayout.findVacantCell(xy, 1, 1, xCount, yCount, occupied);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261      }                                                                                                             </span>
<span class="-6259456544478400180" onmouseenter="enter('-6259456544478400180');" onmouseout="out('-6259456544478400180');" style=""> 262      static Pair&lt;Long, int[]&gt; findNextAvailableIconSpace(Context context, String name,                             </span>
<span class="-5771883199866145387" onmouseenter="enter('-5771883199866145387');" onmouseout="out('-5771883199866145387');" style=""> 263                                                          Intent launchIntent,                                      </span>
<span class="245504953411362786" onmouseenter="enter('245504953411362786');" onmouseout="out('245504953411362786');" style=""> 264                                                          int firstScreenIndex,                                     </span>
<span class="-3030748495081078938" onmouseenter="enter('-3030748495081078938');" onmouseout="out('-3030748495081078938');" style=""> 265                                                          ArrayList&lt;Long&gt; workspaceScreens) {                       </span>
<span class="721182088367487597" onmouseenter="enter('721182088367487597');" onmouseout="out('721182088367487597');" style=""> 266          // Lock on the app so that we don&#x27;t try and get the items while apps are being added                      </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style=""> 267          LauncherAppState app = LauncherAppState.getInstance();                                                    </span>
<span class="-2530158852228207709" onmouseenter="enter('-2530158852228207709');" onmouseout="out('-2530158852228207709');" style=""> 268          LauncherModel model = app.getModel();                                                                     </span>
<span class="-7742650363035610838" onmouseenter="enter('-7742650363035610838');" onmouseout="out('-7742650363035610838');" style=""> 269          boolean found = false;                                                                                    </span>
<span class="8915607661092661586" onmouseenter="enter('8915607661092661586');" onmouseout="out('8915607661092661586');" style=""> 270          synchronized (app) {                                                                                      </span>
<span class="7297018345010768725" onmouseenter="enter('7297018345010768725');" onmouseout="out('7297018345010768725');" style=""> 271              if (sWorkerThread.getThreadId() != Process.myTid()) {                                                 </span>
<span class="-8468687854737954991" onmouseenter="enter('-8468687854737954991');" onmouseout="out('-8468687854737954991');" style=""> 272                  // Flush the LauncherModel worker thread, so that if we just did another                          </span>
<span class="-8915737001643417667" onmouseenter="enter('-8915737001643417667');" onmouseout="out('-8915737001643417667');" style=""> 273                  // processInstallShortcut, we give it time for its shortcut to get added to the                   </span>
<span class="2341850028976611589" onmouseenter="enter('2341850028976611589');" onmouseout="out('2341850028976611589');" style=""> 274                  // database (getItemsInLocalCoordinates reads the database)                                       </span>
<span class="-3308163450517263024" onmouseenter="enter('-3308163450517263024');" onmouseout="out('-3308163450517263024');" style=""> 275                  model.flushWorkerThread();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276              }                                                                                                     </span>
<span class="8797318797001481965" onmouseenter="enter('8797318797001481965');" onmouseout="out('8797318797001481965');" style=""> 277              final ArrayList&lt;ItemInfo&gt; items = LauncherModel.getItemsInLocalCoordinates(context);                  </span>
<span  style=""> 278                                                                                                                    </span>
<span class="2319873497820841755" onmouseenter="enter('2319873497820841755');" onmouseout="out('2319873497820841755');" style=""> 279              // Try adding to the workspace screens incrementally, starting at the default or center               </span>
<span class="1139467458780899300" onmouseenter="enter('1139467458780899300');" onmouseout="out('1139467458780899300');" style=""> 280              // screen and alternating between +1, -1, +2, -2, etc. (using ~ ceil(i/2f)*(-1)^(i-1))                </span>
<span class="8331999200789555153" onmouseenter="enter('8331999200789555153');" onmouseout="out('8331999200789555153');" style=""> 281              firstScreenIndex = Math.min(firstScreenIndex, workspaceScreens.size());                               </span>
<span class="-5057452471390749214" onmouseenter="enter('-5057452471390749214');" onmouseout="out('-5057452471390749214');" style=""> 282              int count = workspaceScreens.size();                                                                  </span>
<span class="6323561107141122979" onmouseenter="enter('6323561107141122979');" onmouseout="out('6323561107141122979');" style=""> 283              for (int screen = firstScreenIndex; screen &lt; count &amp;&amp; !found; screen++) {                             </span>
<span class="-2680594161355971081" onmouseenter="enter('-2680594161355971081');" onmouseout="out('-2680594161355971081');" style=""> 284                  int[] tmpCoordinates = new int[2];                                                                </span>
<span class="7117247924377105749" onmouseenter="enter('7117247924377105749');" onmouseout="out('7117247924377105749');" style=""> 285                  if (findNextAvailableIconSpaceInScreen(items, tmpCoordinates,                                     </span>
<span class="-6258224581011394116" onmouseenter="enter('-6258224581011394116');" onmouseout="out('-6258224581011394116');" style=""> 286                          workspaceScreens.get(screen))) {                                                          </span>
<span class="-4461607076234575183" onmouseenter="enter('-4461607076234575183');" onmouseout="out('-4461607076234575183');" style=""> 287                      // Update the Launcher db                                                                     </span>
<span class="-6316225509374818886" onmouseenter="enter('-6316225509374818886');" onmouseout="out('-6316225509374818886');" style=""> 288                      return new Pair&lt;Long, int[]&gt;(workspaceScreens.get(screen), tmpCoordinates);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 292          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293      }                                                                                                             </span>
<span  style=""> 294                                                                                                                    </span>
<span class="7557267594336804520" onmouseenter="enter('7557267594336804520');" onmouseout="out('7557267594336804520');" style=""> 295      public void addAppsToAllApps(final Context ctx, final ArrayList&lt;AppInfo&gt; allAppsApps) {                       </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style=""> 296          final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                                 </span>
<span  style=""> 297                                                                                                                    </span>
<span class="-3382977171164412937" onmouseenter="enter('-3382977171164412937');" onmouseout="out('-3382977171164412937');" style=""> 298          if (allAppsApps == null) {                                                                                </span>
<span class="6531664792630326104" onmouseenter="enter('6531664792630326104');" onmouseout="out('6531664792630326104');" style=""> 299              throw new RuntimeException(&quot;allAppsApps must not be null&quot;);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300          }                                                                                                         </span>
<span class="9083517779694379730" onmouseenter="enter('9083517779694379730');" onmouseout="out('9083517779694379730');" style=""> 301          if (allAppsApps.isEmpty()) {                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 302              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303          }                                                                                                         </span>
<span  style=""> 304                                                                                                                    </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style=""> 305          final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                                    </span>
<span class="-1645043148265833418" onmouseenter="enter('-1645043148265833418');" onmouseout="out('-1645043148265833418');" style=""> 306          Iterator&lt;AppInfo&gt; iter = allAppsApps.iterator();                                                          </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 307          while (iter.hasNext()) {                                                                                  </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 308              ItemInfo a = iter.next();                                                                             </span>
<span class="-1900793198524744852" onmouseenter="enter('-1900793198524744852');" onmouseout="out('-1900793198524744852');" style=""> 309              if (LauncherModel.appWasRestored(ctx, a.getIntent())) {                                               </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style=""> 310                  restoredAppsFinal.add((AppInfo) a);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 311              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312          }                                                                                                         </span>
<span  style=""> 313                                                                                                                    </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 314          // Process the newly added applications and add them to the database first                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 315          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 316              public void run() {                                                                                   </span>
<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 317                  runOnMainThread(new Runnable() {                                                                  </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 318                      public void run() {                                                                           </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style=""> 319                          Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                              </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style=""> 320                          if (callbacks == cb &amp;&amp; cb != null) {                                                      </span>
<span class="2546703397119558662" onmouseenter="enter('2546703397119558662');" onmouseout="out('2546703397119558662');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 321 -                            callbacks.bindAppsAdded(null, null, null, allAppsApps);                               </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style=""> 322                              if (!restoredAppsFinal.isEmpty()) {                                                   </span>
<span class="74801564058707670" onmouseenter="enter('74801564058707670');" onmouseout="out('74801564058707670');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 323 +                                for (AppInfo info : restoredAppsFinal) {                                          </span>
<span class="5803126433316087462" onmouseenter="enter('5803126433316087462');" onmouseout="out('5803126433316087462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 324 +                                    final Intent intent = info.getIntent();                                       </span>
<span class="-8189023208257233726" onmouseenter="enter('-8189023208257233726');" onmouseout="out('-8189023208257233726');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 325 +                                    if (intent != null) {                                                         </span>
<span class="-1988411798343692534" onmouseenter="enter('-1988411798343692534');" onmouseout="out('-1988411798343692534');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 326 +                                        mIconCache.deletePreloadedIcon(intent.getComponent());                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 327 +                                    }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 328 +                                }                                                                                 </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style=""> 329                                  callbacks.bindAppsUpdated(restoredAppsFinal);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 330                              }                                                                                     </span>
<span class="2546703397119558662" onmouseenter="enter('2546703397119558662');" onmouseout="out('2546703397119558662');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 331 +                            callbacks.bindAppsAdded(null, null, null, allAppsApps);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 332                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333                      }                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 334                  });                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 335              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 336          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 337          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338      }                                                                                                             </span>
<span  style=""> 339                                                                                                                    </span>
<span class="-1568395532324485066" onmouseenter="enter('-1568395532324485066');" onmouseout="out('-1568395532324485066');" style=""> 340      public void addAndBindAddedWorkspaceApps(final Context context,                                               </span>
<span class="-2077533935123746745" onmouseenter="enter('-2077533935123746745');" onmouseout="out('-2077533935123746745');" style=""> 341              final ArrayList&lt;ItemInfo&gt; workspaceApps) {                                                            </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style=""> 342          final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                                 </span>
<span  style=""> 343                                                                                                                    </span>
<span class="7068544170534510976" onmouseenter="enter('7068544170534510976');" onmouseout="out('7068544170534510976');" style=""> 344          if (workspaceApps == null) {                                                                              </span>








<span class="-5351072863300047246" onmouseenter="enter('-5351072863300047246');" onmouseout="out('-5351072863300047246');" style=""> 345              throw new RuntimeException(&quot;workspaceApps and allAppsApps must not be null&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346          }                                                                                                         </span>
<span class="3300400308027950866" onmouseenter="enter('3300400308027950866');" onmouseout="out('3300400308027950866');" style=""> 347          if (workspaceApps.isEmpty()) {                                                                            </span>

<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 348              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 349          }                                                                                                         </span>
<span class="-1158252455189308667" onmouseenter="enter('-1158252455189308667');" onmouseout="out('-1158252455189308667');" style=""> 350          // Process the newly added applications and add them to the database first                                </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 351          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 352              public void run() {                                                                                   </span>
<span class="5854603691017442546" onmouseenter="enter('5854603691017442546');" onmouseout="out('5854603691017442546');" style=""> 353                  final ArrayList&lt;ItemInfo&gt; addedShortcutsFinal = new ArrayList&lt;ItemInfo&gt;();                        </span>
<span class="4777543170844968619" onmouseenter="enter('4777543170844968619');" onmouseout="out('4777543170844968619');" style=""> 354                  final ArrayList&lt;Long&gt; addedWorkspaceScreensFinal = new ArrayList&lt;Long&gt;();                         </span>
<span class="3198289197192179795" onmouseenter="enter('3198289197192179795');" onmouseout="out('3198289197192179795');" style=""> 355                  final ArrayList&lt;AppInfo&gt; restoredAppsFinal = new ArrayList&lt;AppInfo&gt;();                            </span>
<span  style=""> 356                                                                                                                    </span>
<span class="4915887978102159996" onmouseenter="enter('4915887978102159996');" onmouseout="out('4915887978102159996');" style=""> 357                  // Get the list of workspace screens.  We need to append to this list and                         </span>
<span class="-2543969750120350255" onmouseenter="enter('-2543969750120350255');" onmouseout="out('-2543969750120350255');" style=""> 358                  // can not use sBgWorkspaceScreens because loadWorkspace() may not have been                      </span>
<span class="-1621475725142003189" onmouseenter="enter('-1621475725142003189');" onmouseout="out('-1621475725142003189');" style=""> 359                  // called.                                                                                        </span>
<span class="-3443356389434560072" onmouseenter="enter('-3443356389434560072');" onmouseout="out('-3443356389434560072');" style=""> 360                  ArrayList&lt;Long&gt; workspaceScreens = new ArrayList&lt;Long&gt;();                                         </span>
<span class="-7213068701168456094" onmouseenter="enter('-7213068701168456094');" onmouseout="out('-7213068701168456094');" style=""> 361                  TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(context);                          </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style=""> 362                  for (Integer i : orderedScreens.keySet()) {                                                       </span>
<span class="3611014469778353319" onmouseenter="enter('3611014469778353319');" onmouseout="out('3611014469778353319');" style=""> 363                      long screenId = orderedScreens.get(i);                                                        </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 364                      workspaceScreens.add(screenId);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365                  }                                                                                                 </span>
<span  style=""> 366                                                                                                                    </span>
<span class="-6666487523794328873" onmouseenter="enter('-6666487523794328873');" onmouseout="out('-6666487523794328873');" style=""> 367                  synchronized(sBgLock) {                                                                           </span>
<span class="8076980411968102032" onmouseenter="enter('8076980411968102032');" onmouseout="out('8076980411968102032');" style=""> 368                      Iterator&lt;ItemInfo&gt; iter = workspaceApps.iterator();                                           </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style=""> 369                      while (iter.hasNext()) {                                                                      </span>
<span class="-1976847755238947760" onmouseenter="enter('-1976847755238947760');" onmouseout="out('-1976847755238947760');" style=""> 370                          ItemInfo a = iter.next();                                                                 </span>
<span class="5754535581277543167" onmouseenter="enter('5754535581277543167');" onmouseout="out('5754535581277543167');" style=""> 371                          final String name = a.title.toString();                                                   </span>
<span class="586533724609175080" onmouseenter="enter('586533724609175080');" onmouseout="out('586533724609175080');" style=""> 372                          final Intent launchIntent = a.getIntent();                                                </span>
<span  style=""> 373                                                                                                                    </span>
<span class="-3621515927242872869" onmouseenter="enter('-3621515927242872869');" onmouseout="out('-3621515927242872869');" style=""> 374                          // Short-circuit this logic if the icon exists somewhere on the workspace                 </span>
<span class="-636823087841001444" onmouseenter="enter('-636823087841001444');" onmouseout="out('-636823087841001444');" style=""> 375                          if (LauncherModel.shortcutExists(context, name, launchIntent)) {                          </span>
<span class="1114901652794496627" onmouseenter="enter('1114901652794496627');" onmouseout="out('1114901652794496627');" style=""> 376                              // Only InstallShortcutReceiver sends us shortcutInfos, ignore them                   </span>
<span class="-8314395278706468200" onmouseenter="enter('-8314395278706468200');" onmouseout="out('-8314395278706468200');" style=""> 377                              if (a instanceof AppInfo &amp;&amp;                                                           </span>
<span class="2825607628990780271" onmouseenter="enter('2825607628990780271');" onmouseout="out('2825607628990780271');" style=""> 378                                      LauncherModel.appWasRestored(context, launchIntent)) {                        </span>
<span class="1876144803592374746" onmouseenter="enter('1876144803592374746');" onmouseout="out('1876144803592374746');" style=""> 379                                  restoredAppsFinal.add((AppInfo) a);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380                              }                                                                                     </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 381                              continue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382                          }                                                                                         </span>
<span  style=""> 383                                                                                                                    </span>
<span class="7211587366126774382" onmouseenter="enter('7211587366126774382');" onmouseout="out('7211587366126774382');" style=""> 384                          // Add this icon to the db, creating a new page if necessary.  If there                   </span>
<span class="1191339950892304982" onmouseenter="enter('1191339950892304982');" onmouseout="out('1191339950892304982');" style=""> 385                          // is only the empty page then we just add items to the first page.                       </span>
<span class="1496171924920860168" onmouseenter="enter('1496171924920860168');" onmouseout="out('1496171924920860168');" style=""> 386                          // Otherwise, we add them to the next pages.                                              </span>
<span class="-506120048723665625" onmouseenter="enter('-506120048723665625');" onmouseout="out('-506120048723665625');" style=""> 387                          int startSearchPageIndex = workspaceScreens.isEmpty() ? 0 : 1;                            </span>
<span class="89807873419961601" onmouseenter="enter('89807873419961601');" onmouseout="out('89807873419961601');" style=""> 388                          Pair&lt;Long, int[]&gt; coords = LauncherModel.findNextAvailableIconSpace(context,              </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 389                                  name, launchIntent, startSearchPageIndex, workspaceScreens);                      </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 390                          if (coords == null) {                                                                     </span>
<span class="-1977519011864878718" onmouseenter="enter('-1977519011864878718');" onmouseout="out('-1977519011864878718');" style=""> 391                              LauncherProvider lp = LauncherAppState.getLauncherProvider();                         </span>
<span  style=""> 392                                                                                                                    </span>
<span class="-6633238510673534076" onmouseenter="enter('-6633238510673534076');" onmouseout="out('-6633238510673534076');" style=""> 393                              // If we can&#x27;t find a valid position, then just add a new screen.                     </span>
<span class="9059050260314553422" onmouseenter="enter('9059050260314553422');" onmouseout="out('9059050260314553422');" style=""> 394                              // This takes time so we need to re-queue the add until the new                       </span>
<span class="-5280811079167182328" onmouseenter="enter('-5280811079167182328');" onmouseout="out('-5280811079167182328');" style=""> 395                              // page is added.  Create as many screens as necessary to satisfy                     </span>
<span class="8455829478477151409" onmouseenter="enter('8455829478477151409');" onmouseout="out('8455829478477151409');" style=""> 396                              // the startSearchPageIndex.                                                          </span>
<span class="8487048175242917271" onmouseenter="enter('8487048175242917271');" onmouseout="out('8487048175242917271');" style=""> 397                              int numPagesToAdd = Math.max(1, startSearchPageIndex + 1 -                            </span>
<span class="-1324774811555943949" onmouseenter="enter('-1324774811555943949');" onmouseout="out('-1324774811555943949');" style=""> 398                                      workspaceScreens.size());                                                     </span>
<span class="1483283720296841413" onmouseenter="enter('1483283720296841413');" onmouseout="out('1483283720296841413');" style=""> 399                              while (numPagesToAdd &gt; 0) {                                                           </span>
<span class="5474653119612683837" onmouseenter="enter('5474653119612683837');" onmouseout="out('5474653119612683837');" style=""> 400                                  long screenId = lp.generateNewScreenId();                                         </span>
<span class="-5141234047937446124" onmouseenter="enter('-5141234047937446124');" onmouseout="out('-5141234047937446124');" style=""> 401                                  // Save the screen id for binding in the workspace                                </span>
<span class="4360940891918862640" onmouseenter="enter('4360940891918862640');" onmouseout="out('4360940891918862640');" style=""> 402                                  workspaceScreens.add(screenId);                                                   </span>
<span class="-3696618646623922220" onmouseenter="enter('-3696618646623922220');" onmouseout="out('-3696618646623922220');" style=""> 403                                  addedWorkspaceScreensFinal.add(screenId);                                         </span>
<span class="6351530934092402455" onmouseenter="enter('6351530934092402455');" onmouseout="out('6351530934092402455');" style=""> 404                                  numPagesToAdd--;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405                              }                                                                                     </span>
<span  style=""> 406                                                                                                                    </span>
<span class="3901243562383099159" onmouseenter="enter('3901243562383099159');" onmouseout="out('3901243562383099159');" style=""> 407                              // Find the coordinate again                                                          </span>
<span class="-3135847744636951602" onmouseenter="enter('-3135847744636951602');" onmouseout="out('-3135847744636951602');" style=""> 408                              coords = LauncherModel.findNextAvailableIconSpace(context,                            </span>
<span class="-2048407762697677216" onmouseenter="enter('-2048407762697677216');" onmouseout="out('-2048407762697677216');" style=""> 409                                      name, launchIntent, startSearchPageIndex, workspaceScreens);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410                          }                                                                                         </span>
<span class="-5507283660612316317" onmouseenter="enter('-5507283660612316317');" onmouseout="out('-5507283660612316317');" style=""> 411                          if (coords == null) {                                                                     </span>
<span class="-5449977300326458327" onmouseenter="enter('-5449977300326458327');" onmouseout="out('-5449977300326458327');" style=""> 412                              throw new RuntimeException(&quot;Coordinates should not be null&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 413                          }                                                                                         </span>
<span  style=""> 414                                                                                                                    </span>
<span class="2174473495010763804" onmouseenter="enter('2174473495010763804');" onmouseout="out('2174473495010763804');" style=""> 415                          ShortcutInfo shortcutInfo;                                                                </span>
<span class="3426516810566896093" onmouseenter="enter('3426516810566896093');" onmouseout="out('3426516810566896093');" style=""> 416                          if (a instanceof ShortcutInfo) {                                                          </span>
<span class="-5249556100657982245" onmouseenter="enter('-5249556100657982245');" onmouseout="out('-5249556100657982245');" style=""> 417                              shortcutInfo = (ShortcutInfo) a;                                                      </span>
<span class="-6332708218117638716" onmouseenter="enter('-6332708218117638716');" onmouseout="out('-6332708218117638716');" style=""> 418                          } else if (a instanceof AppInfo) {                                                        </span>
<span class="1865505886056520689" onmouseenter="enter('1865505886056520689');" onmouseout="out('1865505886056520689');" style=""> 419                              shortcutInfo = ((AppInfo) a).makeShortcut();                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 420                          } else {                                                                                  </span>
<span class="-2299195794588473913" onmouseenter="enter('-2299195794588473913');" onmouseout="out('-2299195794588473913');" style=""> 421                              throw new RuntimeException(&quot;Unexpected info type&quot;);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422                          }                                                                                         </span>
<span  style=""> 423                                                                                                                    </span>
<span class="-2461182371641304570" onmouseenter="enter('-2461182371641304570');" onmouseout="out('-2461182371641304570');" style=""> 424                          // Add the shortcut to the db                                                             </span>
<span class="-7320352620243561318" onmouseenter="enter('-7320352620243561318');" onmouseout="out('-7320352620243561318');" style=""> 425                          addItemToDatabase(context, shortcutInfo,                                                  </span>
<span class="-99165044777853060" onmouseenter="enter('-99165044777853060');" onmouseout="out('-99165044777853060');" style=""> 426                                  LauncherSettings.Favorites.CONTAINER_DESKTOP,                                     </span>
<span class="-5434732926326446745" onmouseenter="enter('-5434732926326446745');" onmouseout="out('-5434732926326446745');" style=""> 427                                  coords.first, coords.second[0], coords.second[1], false);                         </span>
<span class="-9035556179028036770" onmouseenter="enter('-9035556179028036770');" onmouseout="out('-9035556179028036770');" style=""> 428                          // Save the ShortcutInfo for binding in the workspace                                     </span>
<span class="-7926664864188687285" onmouseenter="enter('-7926664864188687285');" onmouseout="out('-7926664864188687285');" style=""> 429                          addedShortcutsFinal.add(shortcutInfo);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 430                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 431                  }                                                                                                 </span>
<span  style=""> 432                                                                                                                    </span>
<span class="-4345643046227374009" onmouseenter="enter('-4345643046227374009');" onmouseout="out('-4345643046227374009');" style=""> 433                  // Update the workspace screens                                                                   </span>
<span class="-8595972794596504077" onmouseenter="enter('-8595972794596504077');" onmouseout="out('-8595972794596504077');" style=""> 434                  updateWorkspaceScreenOrder(context, workspaceScreens);                                            </span>
<span  style=""> 435                                                                                                                    </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 436                  if (!addedShortcutsFinal.isEmpty()) {                                                             </span>

<span class="-8525408099135802789" onmouseenter="enter('-8525408099135802789');" onmouseout="out('-8525408099135802789');" style=""> 437                      runOnMainThread(new Runnable() {                                                              </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 438                          public void run() {                                                                       </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style=""> 439                              Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                          </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style=""> 440                              if (callbacks == cb &amp;&amp; cb != null) {                                                  </span>
<span class="-1019372697145415139" onmouseenter="enter('-1019372697145415139');" onmouseout="out('-1019372697145415139');" style=""> 441                                  final ArrayList&lt;ItemInfo&gt; addAnimated = new ArrayList&lt;ItemInfo&gt;();                </span>
<span class="2118444153049166132" onmouseenter="enter('2118444153049166132');" onmouseout="out('2118444153049166132');" style=""> 442                                  final ArrayList&lt;ItemInfo&gt; addNotAnimated = new ArrayList&lt;ItemInfo&gt;();             </span>
<span class="4713171779289560344" onmouseenter="enter('4713171779289560344');" onmouseout="out('4713171779289560344');" style=""> 443                                  if (!addedShortcutsFinal.isEmpty()) {                                             </span>
<span class="-7025153910539821495" onmouseenter="enter('-7025153910539821495');" onmouseout="out('-7025153910539821495');" style=""> 444                                      ItemInfo info = addedShortcutsFinal.get(addedShortcutsFinal.size() - 1);      </span>
<span class="2594218988288672349" onmouseenter="enter('2594218988288672349');" onmouseout="out('2594218988288672349');" style=""> 445                                      long lastScreenId = info.screenId;                                            </span>
<span class="-1990558815210533549" onmouseenter="enter('-1990558815210533549');" onmouseout="out('-1990558815210533549');" style=""> 446                                      for (ItemInfo i : addedShortcutsFinal) {                                      </span>
<span class="493217455474284777" onmouseenter="enter('493217455474284777');" onmouseout="out('493217455474284777');" style=""> 447                                          if (i.screenId == lastScreenId) {                                         </span>
<span class="-1039209268317612440" onmouseenter="enter('-1039209268317612440');" onmouseout="out('-1039209268317612440');" style=""> 448                                              addAnimated.add(i);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 449                                          } else {                                                                  </span>
<span class="-1143244035417449650" onmouseenter="enter('-1143244035417449650');" onmouseout="out('-1143244035417449650');" style=""> 450                                              addNotAnimated.add(i);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451                                          }                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 452                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453                                  }                                                                                 </span>
<span class="6311741688571123959" onmouseenter="enter('6311741688571123959');" onmouseout="out('6311741688571123959');" style=""> 454                                  callbacks.bindAppsAdded(addedWorkspaceScreensFinal,                               </span>
<span class="6252030951506738248" onmouseenter="enter('6252030951506738248');" onmouseout="out('6252030951506738248');" style=""> 455                                          addNotAnimated, addAnimated, null);                                       </span>
<span class="5014882870127588322" onmouseenter="enter('5014882870127588322');" onmouseout="out('5014882870127588322');" style=""> 456                                  if (!restoredAppsFinal.isEmpty()) {                                               </span>
<span class="-6976251379810787544" onmouseenter="enter('-6976251379810787544');" onmouseout="out('-6976251379810787544');" style=""> 457                                      callbacks.bindAppsUpdated(restoredAppsFinal);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 458                                  }                                                                                 </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460                          }                                                                                         </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 461                      });                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 464          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 465          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466      }                                                                                                             </span>
<span  style=""> 467                                                                                                                    </span>
<span class="6011793905538310529" onmouseenter="enter('6011793905538310529');" onmouseout="out('6011793905538310529');" style=""> 468      public Bitmap getFallbackIcon() {                                                                             </span>
<span class="-671044890656554786" onmouseenter="enter('-671044890656554786');" onmouseout="out('-671044890656554786');" style=""> 469          if (mDefaultIcon == null) {                                                                               </span>
<span class="6379788101570603758" onmouseenter="enter('6379788101570603758');" onmouseout="out('6379788101570603758');" style=""> 470              final Context context = LauncherAppState.getInstance().getContext();                                  </span>
<span class="-6730081374242205673" onmouseenter="enter('-6730081374242205673');" onmouseout="out('-6730081374242205673');" style=""> 471              mDefaultIcon = Utilities.createIconBitmap(                                                            </span>
<span class="-5707305257020956234" onmouseenter="enter('-5707305257020956234');" onmouseout="out('-5707305257020956234');" style=""> 472                      mIconCache.getFullResDefaultActivityIcon(), context);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 473          }                                                                                                         </span>
<span class="1334413422936499318" onmouseenter="enter('1334413422936499318');" onmouseout="out('1334413422936499318');" style=""> 474          return Bitmap.createBitmap(mDefaultIcon);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475      }                                                                                                             </span>
<span  style=""> 476                                                                                                                    </span>
<span class="-2534375214054854784" onmouseenter="enter('-2534375214054854784');" onmouseout="out('-2534375214054854784');" style=""> 477      public void unbindItemInfosAndClearQueuedBindRunnables() {                                                    </span>
<span class="-5831668519991628138" onmouseenter="enter('-5831668519991628138');" onmouseout="out('-5831668519991628138');" style=""> 478          if (sWorkerThread.getThreadId() == Process.myTid()) {                                                     </span>
<span class="3234081821162543737" onmouseenter="enter('3234081821162543737');" onmouseout="out('3234081821162543737');" style=""> 479              throw new RuntimeException(&quot;Expected unbindLauncherItemInfos() to be called from the &quot; +              </span>
<span class="-2105866874193436772" onmouseenter="enter('-2105866874193436772');" onmouseout="out('-2105866874193436772');" style=""> 480                      &quot;main thread&quot;);                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481          }                                                                                                         </span>
<span  style=""> 482                                                                                                                    </span>
<span class="2920227315927506269" onmouseenter="enter('2920227315927506269');" onmouseout="out('2920227315927506269');" style=""> 483          // Clear any deferred bind runnables                                                                      </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style=""> 484          mDeferredBindRunnables.clear();                                                                           </span>
<span class="8385691997542366613" onmouseenter="enter('8385691997542366613');" onmouseout="out('8385691997542366613');" style=""> 485          // Remove any queued bind runnables                                                                       </span>
<span class="5230017654050637935" onmouseenter="enter('5230017654050637935');" onmouseout="out('5230017654050637935');" style=""> 486          mHandler.cancelAllRunnablesOfType(MAIN_THREAD_BINDING_RUNNABLE);                                          </span>
<span class="1897803433846165569" onmouseenter="enter('1897803433846165569');" onmouseout="out('1897803433846165569');" style=""> 487          // Unbind all the workspace items                                                                         </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style=""> 488          unbindWorkspaceItemsOnMainThread();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489      }                                                                                                             </span>
<span  style=""> 490                                                                                                                    </span>
<span class="-8568492770799719308" onmouseenter="enter('-8568492770799719308');" onmouseout="out('-8568492770799719308');" style=""> 491      /** Unbinds all the sBgWorkspaceItems and sBgAppWidgets on the main thread */                                 </span>
<span class="-7789072121131450728" onmouseenter="enter('-7789072121131450728');" onmouseout="out('-7789072121131450728');" style=""> 492      void unbindWorkspaceItemsOnMainThread() {                                                                     </span>
<span class="7758625295624680992" onmouseenter="enter('7758625295624680992');" onmouseout="out('7758625295624680992');" style=""> 493          // Ensure that we don&#x27;t use the same workspace items data structure on the main thread                    </span>
<span class="737195251801262528" onmouseenter="enter('737195251801262528');" onmouseout="out('737195251801262528');" style=""> 494          // by making a copy of workspace items first.                                                             </span>
<span class="-1398641255292585189" onmouseenter="enter('-1398641255292585189');" onmouseout="out('-1398641255292585189');" style=""> 495          final ArrayList&lt;ItemInfo&gt; tmpWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                                  </span>
<span class="-3814257207504512344" onmouseenter="enter('-3814257207504512344');" onmouseout="out('-3814257207504512344');" style=""> 496          final ArrayList&lt;ItemInfo&gt; tmpAppWidgets = new ArrayList&lt;ItemInfo&gt;();                                      </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 497          synchronized (sBgLock) {                                                                                  </span>
<span class="871827956477804030" onmouseenter="enter('871827956477804030');" onmouseout="out('871827956477804030');" style=""> 498              tmpWorkspaceItems.addAll(sBgWorkspaceItems);                                                          </span>
<span class="7232141846966659069" onmouseenter="enter('7232141846966659069');" onmouseout="out('7232141846966659069');" style=""> 499              tmpAppWidgets.addAll(sBgAppWidgets);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 500          }                                                                                                         </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 501          Runnable r = new Runnable() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 502                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 503                  public void run() {                                                                               </span>
<span class="709208250683113430" onmouseenter="enter('709208250683113430');" onmouseout="out('709208250683113430');" style=""> 504                     for (ItemInfo item : tmpWorkspaceItems) {                                                      </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 505                         item.unbind();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506                     }                                                                                              </span>
<span class="5969585374646931804" onmouseenter="enter('5969585374646931804');" onmouseout="out('5969585374646931804');" style=""> 507                     for (ItemInfo item : tmpAppWidgets) {                                                          </span>
<span class="8046319354714679085" onmouseenter="enter('8046319354714679085');" onmouseout="out('8046319354714679085');" style=""> 508                         item.unbind();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 509                     }                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 510                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 511              };                                                                                                    </span>
<span class="7651423128405913164" onmouseenter="enter('7651423128405913164');" onmouseout="out('7651423128405913164');" style=""> 512          runOnMainThread(r);                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 513      }                                                                                                             </span>
<span  style=""> 514                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 515      /**                                                                                                           </span>
<span class="1848609696039738732" onmouseenter="enter('1848609696039738732');" onmouseout="out('1848609696039738732');" style=""> 516       * Adds an item to the DB if it was not created previously, or move it to a new                               </span>
<span class="-5676820686470662639" onmouseenter="enter('-5676820686470662639');" onmouseout="out('-5676820686470662639');" style=""> 517       * &lt;container, screen, cellX, cellY&gt;                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 518       */                                                                                                           </span>
<span class="-51543303805672089" onmouseenter="enter('-51543303805672089');" onmouseout="out('-51543303805672089');" style=""> 519      static void addOrMoveItemInDatabase(Context context, ItemInfo item, long container,                           </span>
<span class="-5245876562794627197" onmouseenter="enter('-5245876562794627197');" onmouseout="out('-5245876562794627197');" style=""> 520              long screenId, int cellX, int cellY) {                                                                </span>
<span class="32392699487480265" onmouseenter="enter('32392699487480265');" onmouseout="out('32392699487480265');" style=""> 521          if (item.container == ItemInfo.NO_ID) {                                                                   </span>
<span class="4419434731301535819" onmouseenter="enter('4419434731301535819');" onmouseout="out('4419434731301535819');" style=""> 522              // From all apps                                                                                      </span>
<span class="-8263439540868073092" onmouseenter="enter('-8263439540868073092');" onmouseout="out('-8263439540868073092');" style=""> 523              addItemToDatabase(context, item, container, screenId, cellX, cellY, false);                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 524          } else {                                                                                                  </span>
<span class="-7142861896488381117" onmouseenter="enter('-7142861896488381117');" onmouseout="out('-7142861896488381117');" style=""> 525              // From somewhere else                                                                                </span>
<span class="8117171250701950869" onmouseenter="enter('8117171250701950869');" onmouseout="out('8117171250701950869');" style=""> 526              moveItemInDatabase(context, item, container, screenId, cellX, cellY);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 528      }                                                                                                             </span>
<span  style=""> 529                                                                                                                    </span>
<span class="4702100753708951937" onmouseenter="enter('4702100753708951937');" onmouseout="out('4702100753708951937');" style=""> 530      static void checkItemInfoLocked(                                                                              </span>
<span class="5364875648309494693" onmouseenter="enter('5364875648309494693');" onmouseout="out('5364875648309494693');" style=""> 531              final long itemId, final ItemInfo item, StackTraceElement[] stackTrace) {                             </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 532          ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                           </span>
<span class="2193901808277988725" onmouseenter="enter('2193901808277988725');" onmouseout="out('2193901808277988725');" style=""> 533          if (modelItem != null &amp;&amp; item != modelItem) {                                                             </span>
<span class="-6911492637937320821" onmouseenter="enter('-6911492637937320821');" onmouseout="out('-6911492637937320821');" style=""> 534              // check all the data is consistent                                                                   </span>
<span class="3167281191986023088" onmouseenter="enter('3167281191986023088');" onmouseout="out('3167281191986023088');" style=""> 535              if (modelItem instanceof ShortcutInfo &amp;&amp; item instanceof ShortcutInfo) {                              </span>
<span class="-1653864946297504770" onmouseenter="enter('-1653864946297504770');" onmouseout="out('-1653864946297504770');" style=""> 536                  ShortcutInfo modelShortcut = (ShortcutInfo) modelItem;                                            </span>
<span class="-8536587564734321572" onmouseenter="enter('-8536587564734321572');" onmouseout="out('-8536587564734321572');" style=""> 537                  ShortcutInfo shortcut = (ShortcutInfo) item;                                                      </span>
<span class="-7217994585765985559" onmouseenter="enter('-7217994585765985559');" onmouseout="out('-7217994585765985559');" style=""> 538                  if (modelShortcut.title.toString().equals(shortcut.title.toString()) &amp;&amp;                           </span>
<span class="7021740932722535577" onmouseenter="enter('7021740932722535577');" onmouseout="out('7021740932722535577');" style=""> 539                          modelShortcut.intent.filterEquals(shortcut.intent) &amp;&amp;                                     </span>
<span class="4925161259592804600" onmouseenter="enter('4925161259592804600');" onmouseout="out('4925161259592804600');" style=""> 540                          modelShortcut.id == shortcut.id &amp;&amp;                                                        </span>
<span class="-1606801806764943644" onmouseenter="enter('-1606801806764943644');" onmouseout="out('-1606801806764943644');" style=""> 541                          modelShortcut.itemType == shortcut.itemType &amp;&amp;                                            </span>
<span class="-380653198024077357" onmouseenter="enter('-380653198024077357');" onmouseout="out('-380653198024077357');" style=""> 542                          modelShortcut.container == shortcut.container &amp;&amp;                                          </span>
<span class="2095015237441904975" onmouseenter="enter('2095015237441904975');" onmouseout="out('2095015237441904975');" style=""> 543                          modelShortcut.screenId == shortcut.screenId &amp;&amp;                                            </span>
<span class="8356312788511485655" onmouseenter="enter('8356312788511485655');" onmouseout="out('8356312788511485655');" style=""> 544                          modelShortcut.cellX == shortcut.cellX &amp;&amp;                                                  </span>
<span class="-8074804825298555262" onmouseenter="enter('-8074804825298555262');" onmouseout="out('-8074804825298555262');" style=""> 545                          modelShortcut.cellY == shortcut.cellY &amp;&amp;                                                  </span>
<span class="-7194734667210277438" onmouseenter="enter('-7194734667210277438');" onmouseout="out('-7194734667210277438');" style=""> 546                          modelShortcut.spanX == shortcut.spanX &amp;&amp;                                                  </span>
<span class="-7990526823057792041" onmouseenter="enter('-7990526823057792041');" onmouseout="out('-7990526823057792041');" style=""> 547                          modelShortcut.spanY == shortcut.spanY &amp;&amp;                                                  </span>
<span class="1791877648440959041" onmouseenter="enter('1791877648440959041');" onmouseout="out('1791877648440959041');" style=""> 548                          ((modelShortcut.dropPos == null &amp;&amp; shortcut.dropPos == null) ||                           </span>
<span class="-2385997644828375020" onmouseenter="enter('-2385997644828375020');" onmouseout="out('-2385997644828375020');" style=""> 549                          (modelShortcut.dropPos != null &amp;&amp;                                                         </span>
<span class="8673154118418480877" onmouseenter="enter('8673154118418480877');" onmouseout="out('8673154118418480877');" style=""> 550                                  shortcut.dropPos != null &amp;&amp;                                                       </span>
<span class="1110472284758384589" onmouseenter="enter('1110472284758384589');" onmouseout="out('1110472284758384589');" style=""> 551                                  modelShortcut.dropPos[0] == shortcut.dropPos[0] &amp;&amp;                                </span>
<span class="8614743944867507225" onmouseenter="enter('8614743944867507225');" onmouseout="out('8614743944867507225');" style=""> 552                          modelShortcut.dropPos[1] == shortcut.dropPos[1]))) {                                      </span>
<span class="-1826978062251207152" onmouseenter="enter('-1826978062251207152');" onmouseout="out('-1826978062251207152');" style=""> 553                      // For all intents and purposes, this is the same object                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 554                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 555                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556              }                                                                                                     </span>
<span  style=""> 557                                                                                                                    </span>
<span class="-2302662152798801960" onmouseenter="enter('-2302662152798801960');" onmouseout="out('-2302662152798801960');" style=""> 558              // the modelItem needs to match up perfectly with item if our model is                                </span>
<span class="2528116919227347475" onmouseenter="enter('2528116919227347475');" onmouseout="out('2528116919227347475');" style=""> 559              // to be consistent with the database-- for now, just require                                         </span>
<span class="-7120210409264493846" onmouseenter="enter('-7120210409264493846');" onmouseout="out('-7120210409264493846');" style=""> 560              // modelItem == item or the equality check above                                                      </span>
<span class="-3667577266304831846" onmouseenter="enter('-3667577266304831846');" onmouseout="out('-3667577266304831846');" style=""> 561              String msg = &quot;item: &quot; + ((item != null) ? item.toString() : &quot;null&quot;) +                                 </span>
<span class="-2910805653187511799" onmouseenter="enter('-2910805653187511799');" onmouseout="out('-2910805653187511799');" style=""> 562                      &quot;modelItem: &quot; +                                                                               </span>
<span class="-7298566834322238485" onmouseenter="enter('-7298566834322238485');" onmouseout="out('-7298566834322238485');" style=""> 563                      ((modelItem != null) ? modelItem.toString() : &quot;null&quot;) +                                       </span>
<span class="-1970027720063810255" onmouseenter="enter('-1970027720063810255');" onmouseout="out('-1970027720063810255');" style=""> 564                      &quot;Error: ItemInfo passed to checkItemInfo doesn&#x27;t match original&quot;;                             </span>
<span class="889449931745068267" onmouseenter="enter('889449931745068267');" onmouseout="out('889449931745068267');" style=""> 565              RuntimeException e = new RuntimeException(msg);                                                       </span>
<span class="746494671138810715" onmouseenter="enter('746494671138810715');" onmouseout="out('746494671138810715');" style=""> 566              if (stackTrace != null) {                                                                             </span>
<span class="6991917147302354492" onmouseenter="enter('6991917147302354492');" onmouseout="out('6991917147302354492');" style=""> 567                  e.setStackTrace(stackTrace);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 568              }                                                                                                     </span>
<span class="-2532054300390783036" onmouseenter="enter('-2532054300390783036');" onmouseout="out('-2532054300390783036');" style=""> 569              throw e;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 571      }                                                                                                             </span>
<span  style=""> 572                                                                                                                    </span>
<span class="8253262720993766341" onmouseenter="enter('8253262720993766341');" onmouseout="out('8253262720993766341');" style=""> 573      static void checkItemInfo(final ItemInfo item) {                                                              </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 574          final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                                   </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 575          final long itemId = item.id;                                                                              </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 576          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 577              public void run() {                                                                                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 578                  synchronized (sBgLock) {                                                                          </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 579                      checkItemInfoLocked(itemId, item, stackTrace);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 580                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 581              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 582          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 583          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 584      }                                                                                                             </span>
<span  style=""> 585                                                                                                                    </span>
<span class="-7795546628976526290" onmouseenter="enter('-7795546628976526290');" onmouseout="out('-7795546628976526290');" style=""> 586      static void updateItemInDatabaseHelper(Context context, final ContentValues values,                           </span>
<span class="-8227938209854841132" onmouseenter="enter('-8227938209854841132');" onmouseout="out('-8227938209854841132');" style=""> 587              final ItemInfo item, final String callingFunction) {                                                  </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 588          final long itemId = item.id;                                                                              </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 589          final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);                                  </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 590          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span  style=""> 591                                                                                                                    </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 592          final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                                   </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 593          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 594              public void run() {                                                                                   </span>
<span class="6508684228899883734" onmouseenter="enter('6508684228899883734');" onmouseout="out('6508684228899883734');" style=""> 595                  cr.update(uri, values, null, null);                                                               </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 596                  updateItemArrays(item, itemId, stackTrace);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 597              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 598          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 599          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 600      }                                                                                                             </span>
<span  style=""> 601                                                                                                                    </span>
<span class="-5268011833856431518" onmouseenter="enter('-5268011833856431518');" onmouseout="out('-5268011833856431518');" style=""> 602      static void updateItemsInDatabaseHelper(Context context, final ArrayList&lt;ContentValues&gt; valuesList,           </span>
<span class="-6813896065968537303" onmouseenter="enter('-6813896065968537303');" onmouseout="out('-6813896065968537303');" style=""> 603              final ArrayList&lt;ItemInfo&gt; items, final String callingFunction) {                                      </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 604          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span  style=""> 605                                                                                                                    </span>
<span class="7036434050061079005" onmouseenter="enter('7036434050061079005');" onmouseout="out('7036434050061079005');" style=""> 606          final StackTraceElement[] stackTrace = new Throwable().getStackTrace();                                   </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 607          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 608              public void run() {                                                                                   </span>
<span class="870344729843570934" onmouseenter="enter('870344729843570934');" onmouseout="out('870344729843570934');" style=""> 609                  ArrayList&lt;ContentProviderOperation&gt; ops =                                                         </span>
<span class="9022468941674050374" onmouseenter="enter('9022468941674050374');" onmouseout="out('9022468941674050374');" style=""> 610                          new ArrayList&lt;ContentProviderOperation&gt;();                                                </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 611                  int count = items.size();                                                                         </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 612                  for (int i = 0; i &lt; count; i++) {                                                                 </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 613                      ItemInfo item = items.get(i);                                                                 </span>
<span class="-9092024937699636155" onmouseenter="enter('-9092024937699636155');" onmouseout="out('-9092024937699636155');" style=""> 614                      final long itemId = item.id;                                                                  </span>
<span class="5982598779871216843" onmouseenter="enter('5982598779871216843');" onmouseout="out('5982598779871216843');" style=""> 615                      final Uri uri = LauncherSettings.Favorites.getContentUri(itemId, false);                      </span>
<span class="-8860263448497272048" onmouseenter="enter('-8860263448497272048');" onmouseout="out('-8860263448497272048');" style=""> 616                      ContentValues values = valuesList.get(i);                                                     </span>
<span  style=""> 617                                                                                                                    </span>
<span class="2997765192602662390" onmouseenter="enter('2997765192602662390');" onmouseout="out('2997765192602662390');" style=""> 618                      ops.add(ContentProviderOperation.newUpdate(uri).withValues(values).build());                  </span>
<span class="2445132547061682622" onmouseenter="enter('2445132547061682622');" onmouseout="out('2445132547061682622');" style=""> 619                      updateItemArrays(item, itemId, stackTrace);                                                   </span>
<span  style=""> 620                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 621                  }                                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 622                  try {                                                                                             </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style=""> 623                      cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                               </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 624                  } catch (Exception e) {                                                                           </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 625                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 626                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 627              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 628          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 629          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 630      }                                                                                                             </span>
<span  style=""> 631                                                                                                                    </span>
<span class="2082626234385770383" onmouseenter="enter('2082626234385770383');" onmouseout="out('2082626234385770383');" style=""> 632      static void updateItemArrays(ItemInfo item, long itemId, StackTraceElement[] stackTrace) {                    </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 633          // Lock on mBgLock *after* the db operation                                                               </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 634          synchronized (sBgLock) {                                                                                  </span>
<span class="-4404077056234961358" onmouseenter="enter('-4404077056234961358');" onmouseout="out('-4404077056234961358');" style=""> 635              checkItemInfoLocked(itemId, item, stackTrace);                                                        </span>
<span  style=""> 636                                                                                                                    </span>
<span class="5861445851049755510" onmouseenter="enter('5861445851049755510');" onmouseout="out('5861445851049755510');" style=""> 637              if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                                 </span>
<span class="-7006113140306734361" onmouseenter="enter('-7006113140306734361');" onmouseout="out('-7006113140306734361');" style=""> 638                      item.container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                             </span>
<span class="-6294566488312473300" onmouseenter="enter('-6294566488312473300');" onmouseout="out('-6294566488312473300');" style=""> 639                  // Item is in a folder, make sure this folder exists                                              </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 640                  if (!sBgFolders.containsKey(item.container)) {                                                    </span>
<span class="9065703941205621353" onmouseenter="enter('9065703941205621353');" onmouseout="out('9065703941205621353');" style=""> 641                      // An items container is being set to a that of an item which is not in                       </span>
<span class="-3172747387014066058" onmouseenter="enter('-3172747387014066058');" onmouseout="out('-3172747387014066058');" style=""> 642                      // the list of Folders.                                                                       </span>
<span class="151828163632620756" onmouseenter="enter('151828163632620756');" onmouseout="out('151828163632620756');" style=""> 643                      String msg = &quot;item: &quot; + item + &quot; container being set to: &quot; +                                  </span>
<span class="9080161357490611974" onmouseenter="enter('9080161357490611974');" onmouseout="out('9080161357490611974');" style=""> 644                              item.container + &quot;, not in the list of folders&quot;;                                      </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 645                      Log.e(TAG, msg);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 646                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647              }                                                                                                     </span>
<span  style=""> 648                                                                                                                    </span>
<span class="8378072337545652807" onmouseenter="enter('8378072337545652807');" onmouseout="out('8378072337545652807');" style=""> 649              // Items are added/removed from the corresponding FolderInfo elsewhere, such                          </span>
<span class="7844728369218635164" onmouseenter="enter('7844728369218635164');" onmouseout="out('7844728369218635164');" style=""> 650              // as in Workspace.onDrop. Here, we just add/remove them from the list of items                       </span>
<span class="4553148780571708557" onmouseenter="enter('4553148780571708557');" onmouseout="out('4553148780571708557');" style=""> 651              // that are on the desktop, as appropriate                                                            </span>
<span class="-7043900977802060007" onmouseenter="enter('-7043900977802060007');" onmouseout="out('-7043900977802060007');" style=""> 652              ItemInfo modelItem = sBgItemsIdMap.get(itemId);                                                       </span>
<span class="-8392915416586226921" onmouseenter="enter('-8392915416586226921');" onmouseout="out('-8392915416586226921');" style=""> 653              if (modelItem != null &amp;&amp;                                                                              </span>
<span class="3168075572498915363" onmouseenter="enter('3168075572498915363');" onmouseout="out('3168075572498915363');" style=""> 654                      (modelItem.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||                       </span>
<span class="-2354507674725904195" onmouseenter="enter('-2354507674725904195');" onmouseout="out('-2354507674725904195');" style=""> 655                       modelItem.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {                      </span>
<span class="-8474980351342559163" onmouseenter="enter('-8474980351342559163');" onmouseout="out('-8474980351342559163');" style=""> 656                  switch (modelItem.itemType) {                                                                     </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style=""> 657                      case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                        </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style=""> 658                      case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                           </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 659                      case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                             </span>
<span class="-2945309969071223861" onmouseenter="enter('-2945309969071223861');" onmouseout="out('-2945309969071223861');" style=""> 660                          if (!sBgWorkspaceItems.contains(modelItem)) {                                             </span>
<span class="-5660475538824179031" onmouseenter="enter('-5660475538824179031');" onmouseout="out('-5660475538824179031');" style=""> 661                              sBgWorkspaceItems.add(modelItem);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662                          }                                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 663                          break;                                                                                    </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 664                      default:                                                                                      </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 665                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 667              } else {                                                                                              </span>
<span class="-7939766627444392355" onmouseenter="enter('-7939766627444392355');" onmouseout="out('-7939766627444392355');" style=""> 668                  sBgWorkspaceItems.remove(modelItem);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 669              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 670          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 671      }                                                                                                             </span>
<span  style=""> 672                                                                                                                    </span>
<span class="-4020360329970845372" onmouseenter="enter('-4020360329970845372');" onmouseout="out('-4020360329970845372');" style=""> 673      public void flushWorkerThread() {                                                                             </span>
<span class="2458440832416538563" onmouseenter="enter('2458440832416538563');" onmouseout="out('2458440832416538563');" style=""> 674          mFlushingWorkerThread = true;                                                                             </span>
<span class="2941590529192344100" onmouseenter="enter('2941590529192344100');" onmouseout="out('2941590529192344100');" style=""> 675          Runnable waiter = new Runnable() {                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 676                  public void run() {                                                                               </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 677                      synchronized (this) {                                                                         </span>
<span class="-1428047894310886643" onmouseenter="enter('-1428047894310886643');" onmouseout="out('-1428047894310886643');" style=""> 678                          notifyAll();                                                                              </span>
<span class="3926508156885202999" onmouseenter="enter('3926508156885202999');" onmouseout="out('3926508156885202999');" style=""> 679                          mFlushingWorkerThread = false;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 681                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 682              };                                                                                                    </span>
<span  style=""> 683                                                                                                                    </span>
<span class="-7483564469787643608" onmouseenter="enter('-7483564469787643608');" onmouseout="out('-7483564469787643608');" style=""> 684          synchronized(waiter) {                                                                                    </span>
<span class="-8072658497280753067" onmouseenter="enter('-8072658497280753067');" onmouseout="out('-8072658497280753067');" style=""> 685              runOnWorkerThread(waiter);                                                                            </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style=""> 686              if (mLoaderTask != null) {                                                                            </span>
<span class="-756902833484627430" onmouseenter="enter('-756902833484627430');" onmouseout="out('-756902833484627430');" style=""> 687                  synchronized(mLoaderTask) {                                                                       </span>
<span class="58891182273081261" onmouseenter="enter('58891182273081261');" onmouseout="out('58891182273081261');" style=""> 688                      mLoaderTask.notify();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 690              }                                                                                                     </span>
<span class="4859668596787406566" onmouseenter="enter('4859668596787406566');" onmouseout="out('4859668596787406566');" style=""> 691              boolean success = false;                                                                              </span>
<span class="7536073198725464588" onmouseenter="enter('7536073198725464588');" onmouseout="out('7536073198725464588');" style=""> 692              while (!success) {                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 693                  try {                                                                                             </span>
<span class="8661527805225995774" onmouseenter="enter('8661527805225995774');" onmouseout="out('8661527805225995774');" style=""> 694                      waiter.wait();                                                                                </span>
<span class="-5965625035307022309" onmouseenter="enter('-5965625035307022309');" onmouseout="out('-5965625035307022309');" style=""> 695                      success = true;                                                                               </span>
<span class="-7528533024404460182" onmouseenter="enter('-7528533024404460182');" onmouseout="out('-7528533024404460182');" style=""> 696                  } catch (InterruptedException e) {                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 697                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 698              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 700      }                                                                                                             </span>
<span  style=""> 701                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 702      /**                                                                                                           </span>
<span class="6993284491606696239" onmouseenter="enter('6993284491606696239');" onmouseout="out('6993284491606696239');" style=""> 703       * Move an item in the DB to a new &lt;container, screen, cellX, cellY&gt;                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 704       */                                                                                                           </span>
<span class="4065343735615789149" onmouseenter="enter('4065343735615789149');" onmouseout="out('4065343735615789149');" style=""> 705      static void moveItemInDatabase(Context context, final ItemInfo item, final long container,                    </span>
<span class="-6409391853534757752" onmouseenter="enter('-6409391853534757752');" onmouseout="out('-6409391853534757752');" style=""> 706              final long screenId, final int cellX, final int cellY) {                                              </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 707          item.container = container;                                                                               </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 708          item.cellX = cellX;                                                                                       </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 709          item.cellY = cellY;                                                                                       </span>
<span  style=""> 710                                                                                                                    </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 711          // We store hotseat items in canonical form which is this orientation invariant position                  </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 712          // in the hotseat                                                                                         </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 713          if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                                        </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 714                  container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                      </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 715              item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 716          } else {                                                                                                  </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 717              item.screenId = screenId;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 718          }                                                                                                         </span>
<span  style=""> 719                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 720          final ContentValues values = new ContentValues();                                                         </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 721          values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                         </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 722          values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                                 </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 723          values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                                 </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 724          values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                             </span>
<span  style=""> 725                                                                                                                    </span>
<span class="-198415815572970699" onmouseenter="enter('-198415815572970699');" onmouseout="out('-198415815572970699');" style=""> 726          updateItemInDatabaseHelper(context, values, item, &quot;moveItemInDatabase&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 727      }                                                                                                             </span>
<span  style=""> 728                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 729      /**                                                                                                           </span>
<span class="-2318253408843035081" onmouseenter="enter('-2318253408843035081');" onmouseout="out('-2318253408843035081');" style=""> 730       * Move items in the DB to a new &lt;container, screen, cellX, cellY&gt;. We assume that the                        </span>
<span class="9095568381627098065" onmouseenter="enter('9095568381627098065');" onmouseout="out('9095568381627098065');" style=""> 731       * cellX, cellY have already been updated on the ItemInfos.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 732       */                                                                                                           </span>
<span class="2993462226149949147" onmouseenter="enter('2993462226149949147');" onmouseout="out('2993462226149949147');" style=""> 733      static void moveItemsInDatabase(Context context, final ArrayList&lt;ItemInfo&gt; items,                             </span>
<span class="4351605778470855925" onmouseenter="enter('4351605778470855925');" onmouseout="out('4351605778470855925');" style=""> 734              final long container, final int screen) {                                                             </span>
<span  style=""> 735                                                                                                                    </span>
<span class="3335073963685886452" onmouseenter="enter('3335073963685886452');" onmouseout="out('3335073963685886452');" style=""> 736          ArrayList&lt;ContentValues&gt; contentValues = new ArrayList&lt;ContentValues&gt;();                                  </span>
<span class="-1279958937348589807" onmouseenter="enter('-1279958937348589807');" onmouseout="out('-1279958937348589807');" style=""> 737          int count = items.size();                                                                                 </span>
<span  style=""> 738                                                                                                                    </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 739          for (int i = 0; i &lt; count; i++) {                                                                         </span>
<span class="-6495863071558935698" onmouseenter="enter('-6495863071558935698');" onmouseout="out('-6495863071558935698');" style=""> 740              ItemInfo item = items.get(i);                                                                         </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 741              item.container = container;                                                                           </span>
<span  style=""> 742                                                                                                                    </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 743              // We store hotseat items in canonical form which is this orientation invariant position              </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 744              // in the hotseat                                                                                     </span>
<span class="6331311558654873539" onmouseenter="enter('6331311558654873539');" onmouseout="out('6331311558654873539');" style=""> 745              if (context instanceof Launcher &amp;&amp; screen &lt; 0 &amp;&amp;                                                      </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 746                      container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                  </span>
<span class="-3476894176903330001" onmouseenter="enter('-3476894176903330001');" onmouseout="out('-3476894176903330001');" style=""> 747                  item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(item.cellX,                   </span>
<span class="8891673712343428946" onmouseenter="enter('8891673712343428946');" onmouseout="out('8891673712343428946');" style=""> 748                          item.cellY);                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 749              } else {                                                                                              </span>
<span class="-4307617232085975705" onmouseenter="enter('-4307617232085975705');" onmouseout="out('-4307617232085975705');" style=""> 750                  item.screenId = screen;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 751              }                                                                                                     </span>
<span  style=""> 752                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 753              final ContentValues values = new ContentValues();                                                     </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 754              values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                     </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 755              values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                             </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 756              values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                             </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 757              values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                         </span>
<span  style=""> 758                                                                                                                    </span>
<span class="2833686190506555422" onmouseenter="enter('2833686190506555422');" onmouseout="out('2833686190506555422');" style=""> 759              contentValues.add(values);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 760          }                                                                                                         </span>
<span class="-3017110074752693492" onmouseenter="enter('-3017110074752693492');" onmouseout="out('-3017110074752693492');" style=""> 761          updateItemsInDatabaseHelper(context, contentValues, items, &quot;moveItemInDatabase&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 762      }                                                                                                             </span>
<span  style=""> 763                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 764      /**                                                                                                           </span>
<span class="5893714151144352360" onmouseenter="enter('5893714151144352360');" onmouseout="out('5893714151144352360');" style=""> 765       * Move and/or resize item in the DB to a new &lt;container, screen, cellX, cellY, spanX, spanY&gt;                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 766       */                                                                                                           </span>
<span class="2794810618835410616" onmouseenter="enter('2794810618835410616');" onmouseout="out('2794810618835410616');" style=""> 767      static void modifyItemInDatabase(Context context, final ItemInfo item, final long container,                  </span>
<span class="5104971199972279845" onmouseenter="enter('5104971199972279845');" onmouseout="out('5104971199972279845');" style=""> 768              final long screenId, final int cellX, final int cellY, final int spanX, final int spanY) {            </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 769          item.container = container;                                                                               </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 770          item.cellX = cellX;                                                                                       </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 771          item.cellY = cellY;                                                                                       </span>
<span class="-7444681703441257019" onmouseenter="enter('-7444681703441257019');" onmouseout="out('-7444681703441257019');" style=""> 772          item.spanX = spanX;                                                                                       </span>
<span class="1797194204222415457" onmouseenter="enter('1797194204222415457');" onmouseout="out('1797194204222415457');" style=""> 773          item.spanY = spanY;                                                                                       </span>
<span  style=""> 774                                                                                                                    </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 775          // We store hotseat items in canonical form which is this orientation invariant position                  </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 776          // in the hotseat                                                                                         </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 777          if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                                        </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 778                  container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                      </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 779              item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 780          } else {                                                                                                  </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 781              item.screenId = screenId;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 782          }                                                                                                         </span>
<span  style=""> 783                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 784          final ContentValues values = new ContentValues();                                                         </span>
<span class="-6436059523023408929" onmouseenter="enter('-6436059523023408929');" onmouseout="out('-6436059523023408929');" style=""> 785          values.put(LauncherSettings.Favorites.CONTAINER, item.container);                                         </span>
<span class="-7302292491203026680" onmouseenter="enter('-7302292491203026680');" onmouseout="out('-7302292491203026680');" style=""> 786          values.put(LauncherSettings.Favorites.CELLX, item.cellX);                                                 </span>
<span class="-2331743061915189298" onmouseenter="enter('-2331743061915189298');" onmouseout="out('-2331743061915189298');" style=""> 787          values.put(LauncherSettings.Favorites.CELLY, item.cellY);                                                 </span>
<span class="-1263713769577317048" onmouseenter="enter('-1263713769577317048');" onmouseout="out('-1263713769577317048');" style=""> 788          values.put(LauncherSettings.Favorites.SPANX, item.spanX);                                                 </span>
<span class="847673422027095164" onmouseenter="enter('847673422027095164');" onmouseout="out('847673422027095164');" style=""> 789          values.put(LauncherSettings.Favorites.SPANY, item.spanY);                                                 </span>
<span class="6836043536487609495" onmouseenter="enter('6836043536487609495');" onmouseout="out('6836043536487609495');" style=""> 790          values.put(LauncherSettings.Favorites.SCREEN, item.screenId);                                             </span>
<span  style=""> 791                                                                                                                    </span>
<span class="5688211233374147409" onmouseenter="enter('5688211233374147409');" onmouseout="out('5688211233374147409');" style=""> 792          updateItemInDatabaseHelper(context, values, item, &quot;modifyItemInDatabase&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 793      }                                                                                                             </span>
<span  style=""> 794                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 795      /**                                                                                                           </span>
<span class="3263486289839218660" onmouseenter="enter('3263486289839218660');" onmouseout="out('3263486289839218660');" style=""> 796       * Update an item to the database in a specified container.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 797       */                                                                                                           </span>
<span class="459681340980680258" onmouseenter="enter('459681340980680258');" onmouseout="out('459681340980680258');" style=""> 798      static void updateItemInDatabase(Context context, final ItemInfo item) {                                      </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 799          final ContentValues values = new ContentValues();                                                         </span>
<span class="5176730964422589638" onmouseenter="enter('5176730964422589638');" onmouseout="out('5176730964422589638');" style=""> 800          item.onAddToDatabase(values);                                                                             </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 801          item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                         </span>
<span class="-2640379359931023102" onmouseenter="enter('-2640379359931023102');" onmouseout="out('-2640379359931023102');" style=""> 802          updateItemInDatabaseHelper(context, values, item, &quot;updateItemInDatabase&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 803      }                                                                                                             </span>
<span  style=""> 804                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 805      /**                                                                                                           </span>
<span class="-4717227181780328790" onmouseenter="enter('-4717227181780328790');" onmouseout="out('-4717227181780328790');" style=""> 806       * Returns true if the shortcuts already exists in the database.                                              </span>
<span class="-3331700288971341517" onmouseenter="enter('-3331700288971341517');" onmouseout="out('-3331700288971341517');" style=""> 807       * we identify a shortcut by its title and intent.                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 808       */                                                                                                           </span>
<span class="-6388905982866518653" onmouseenter="enter('-6388905982866518653');" onmouseout="out('-6388905982866518653');" style=""> 809      static boolean shortcutExists(Context context, String title, Intent intent) {                                 </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 810          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="2591581294492270218" onmouseenter="enter('2591581294492270218');" onmouseout="out('2591581294492270218');" style=""> 811          Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI,                                               </span>
<span class="-3970764614423238561" onmouseenter="enter('-3970764614423238561');" onmouseout="out('-3970764614423238561');" style=""> 812              new String[] { &quot;title&quot;, &quot;intent&quot; }, &quot;title=? and intent=?&quot;,                                           </span>
<span class="-8386684562645849198" onmouseenter="enter('-8386684562645849198');" onmouseout="out('-8386684562645849198');" style=""> 813              new String[] { title, intent.toUri(0) }, null);                                                       </span>
<span class="8422097272984539190" onmouseenter="enter('8422097272984539190');" onmouseout="out('8422097272984539190');" style=""> 814          boolean result = false;                                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 815          try {                                                                                                     </span>
<span class="-4458839479528090820" onmouseenter="enter('-4458839479528090820');" onmouseout="out('-4458839479528090820');" style=""> 816              result = c.moveToFirst();                                                                             </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 817          } finally {                                                                                               </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 818              c.close();                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 819          }                                                                                                         </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 820          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 821      }                                                                                                             </span>
<span  style=""> 822                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 823      /**                                                                                                           </span>
<span class="-4717227181780328790" onmouseenter="enter('-4717227181780328790');" onmouseout="out('-4717227181780328790');" style=""> 824       * Returns true if the shortcuts already exists in the database.                                              </span>
<span class="-5390310747970326975" onmouseenter="enter('-5390310747970326975');" onmouseout="out('-5390310747970326975');" style=""> 825       * we identify a shortcut by the component name of the intent.                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 826       */                                                                                                           </span>
<span class="3626515463358769016" onmouseenter="enter('3626515463358769016');" onmouseout="out('3626515463358769016');" style=""> 827      static boolean appWasRestored(Context context, Intent intent) {                                               </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 828          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="-3491314044087926833" onmouseenter="enter('-3491314044087926833');" onmouseout="out('-3491314044087926833');" style=""> 829          final ComponentName component = intent.getComponent();                                                    </span>
<span class="-8432366264448055826" onmouseenter="enter('-8432366264448055826');" onmouseout="out('-8432366264448055826');" style=""> 830          if (component == null) {                                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 831              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 832          }                                                                                                         </span>
<span class="-6109213241383384192" onmouseenter="enter('-6109213241383384192');" onmouseout="out('-6109213241383384192');" style=""> 833          String componentName = component.flattenToString();                                                       </span>
<span class="2986401886513054143" onmouseenter="enter('2986401886513054143');" onmouseout="out('2986401886513054143');" style=""> 834          final String where = &quot;intent glob \&quot;*component=&quot; + componentName + &quot;*\&quot; and restored = 1&quot;;                </span>
<span class="2591581294492270218" onmouseenter="enter('2591581294492270218');" onmouseout="out('2591581294492270218');" style=""> 835          Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI,                                               </span>
<span class="226242580801544183" onmouseenter="enter('226242580801544183');" onmouseout="out('226242580801544183');" style=""> 836                  new String[]{&quot;intent&quot;, &quot;restored&quot;}, where, null, null);                                           </span>
<span class="8422097272984539190" onmouseenter="enter('8422097272984539190');" onmouseout="out('8422097272984539190');" style=""> 837          boolean result = false;                                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 838          try {                                                                                                     </span>
<span class="-4458839479528090820" onmouseenter="enter('-4458839479528090820');" onmouseout="out('-4458839479528090820');" style=""> 839              result = c.moveToFirst();                                                                             </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 840          } finally {                                                                                               </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 841              c.close();                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 842          }                                                                                                         </span>
<span class="4307187737647963600" onmouseenter="enter('4307187737647963600');" onmouseout="out('4307187737647963600');" style=""> 843          Log.d(TAG, &quot;shortcutWasRestored is &quot; + result + &quot; for &quot; + componentName);                                 </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 844          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 845      }                                                                                                             </span>
<span  style=""> 846                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 847      /**                                                                                                           </span>
<span class="9160518604603288134" onmouseenter="enter('9160518604603288134');" onmouseout="out('9160518604603288134');" style=""> 848       * Returns an ItemInfo array containing all the items in the LauncherModel.                                   </span>
<span class="-7541433293033039987" onmouseenter="enter('-7541433293033039987');" onmouseout="out('-7541433293033039987');" style=""> 849       * The ItemInfo.id is not set through this function.                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 850       */                                                                                                           </span>
<span class="2306578838706816090" onmouseenter="enter('2306578838706816090');" onmouseout="out('2306578838706816090');" style=""> 851      static ArrayList&lt;ItemInfo&gt; getItemsInLocalCoordinates(Context context) {                                      </span>
<span class="-8890802543278206536" onmouseenter="enter('-8890802543278206536');" onmouseout="out('-8890802543278206536');" style=""> 852          ArrayList&lt;ItemInfo&gt; items = new ArrayList&lt;ItemInfo&gt;();                                                    </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 853          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="7862348045873845742" onmouseenter="enter('7862348045873845742');" onmouseout="out('7862348045873845742');" style=""> 854          Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, new String[] {                                </span>
<span class="-9030044796723696333" onmouseenter="enter('-9030044796723696333');" onmouseout="out('-9030044796723696333');" style=""> 855                  LauncherSettings.Favorites.ITEM_TYPE, LauncherSettings.Favorites.CONTAINER,                       </span>
<span class="-6654705994324280685" onmouseenter="enter('-6654705994324280685');" onmouseout="out('-6654705994324280685');" style=""><abbr title=" 856                  LauncherSettings.Favorites.SCREEN, LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CELLY,"> 856                  LauncherSettings.Favorites.SCREEN, LauncherSettings.Favorites.CELLX, LauncherSettings.Favorites.CE</abbr></span>
<span class="-8466015049460674478" onmouseenter="enter('-8466015049460674478');" onmouseout="out('-8466015049460674478');" style=""> 857                  LauncherSettings.Favorites.SPANX, LauncherSettings.Favorites.SPANY }, null, null, null);          </span>
<span  style=""> 858                                                                                                                    </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 859          final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);                  </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 860          final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);                 </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 861          final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);                       </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 862          final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                         </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 863          final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                         </span>
<span class="-802963670489258937" onmouseenter="enter('-802963670489258937');" onmouseout="out('-802963670489258937');" style=""> 864          final int spanXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANX);                         </span>
<span class="6925125615824777875" onmouseenter="enter('6925125615824777875');" onmouseout="out('6925125615824777875');" style=""> 865          final int spanYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SPANY);                         </span>
<span  style=""> 866                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 867          try {                                                                                                     </span>
<span class="7090462364644597234" onmouseenter="enter('7090462364644597234');" onmouseout="out('7090462364644597234');" style=""> 868              while (c.moveToNext()) {                                                                              </span>
<span class="-4116264954015845780" onmouseenter="enter('-4116264954015845780');" onmouseout="out('-4116264954015845780');" style=""> 869                  ItemInfo item = new ItemInfo();                                                                   </span>
<span class="3361172632220058931" onmouseenter="enter('3361172632220058931');" onmouseout="out('3361172632220058931');" style=""> 870                  item.cellX = c.getInt(cellXIndex);                                                                </span>
<span class="-3320299110004327663" onmouseenter="enter('-3320299110004327663');" onmouseout="out('-3320299110004327663');" style=""> 871                  item.cellY = c.getInt(cellYIndex);                                                                </span>
<span class="-3998513073647472943" onmouseenter="enter('-3998513073647472943');" onmouseout="out('-3998513073647472943');" style=""> 872                  item.spanX = Math.max(1, c.getInt(spanXIndex));                                                   </span>
<span class="584206030510259358" onmouseenter="enter('584206030510259358');" onmouseout="out('584206030510259358');" style=""> 873                  item.spanY = Math.max(1, c.getInt(spanYIndex));                                                   </span>
<span class="7755197868117966754" onmouseenter="enter('7755197868117966754');" onmouseout="out('7755197868117966754');" style=""> 874                  item.container = c.getInt(containerIndex);                                                        </span>
<span class="2520990540941204818" onmouseenter="enter('2520990540941204818');" onmouseout="out('2520990540941204818');" style=""> 875                  item.itemType = c.getInt(itemTypeIndex);                                                          </span>
<span class="-2693827439071435274" onmouseenter="enter('-2693827439071435274');" onmouseout="out('-2693827439071435274');" style=""> 876                  item.screenId = c.getInt(screenIndex);                                                            </span>
<span  style=""> 877                                                                                                                    </span>
<span class="5536427526498278966" onmouseenter="enter('5536427526498278966');" onmouseout="out('5536427526498278966');" style=""> 878                  items.add(item);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 879              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 880          } catch (Exception e) {                                                                                   </span>
<span class="4333495016815960454" onmouseenter="enter('4333495016815960454');" onmouseout="out('4333495016815960454');" style=""> 881              items.clear();                                                                                        </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 882          } finally {                                                                                               </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 883              c.close();                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 884          }                                                                                                         </span>
<span  style=""> 885                                                                                                                    </span>
<span class="4279419839789234429" onmouseenter="enter('4279419839789234429');" onmouseout="out('4279419839789234429');" style=""> 886          return items;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 887      }                                                                                                             </span>
<span  style=""> 888                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 889      /**                                                                                                           </span>
<span class="-8400747742808132543" onmouseenter="enter('-8400747742808132543');" onmouseout="out('-8400747742808132543');" style=""> 890       * Find a folder in the db, creating the FolderInfo if necessary, and adding it to folderList.                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 891       */                                                                                                           </span>
<span class="5907754851540050864" onmouseenter="enter('5907754851540050864');" onmouseout="out('5907754851540050864');" style=""> 892      FolderInfo getFolderById(Context context, HashMap&lt;Long,FolderInfo&gt; folderList, long id) {                     </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 893          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="-4509017961772931337" onmouseenter="enter('-4509017961772931337');" onmouseout="out('-4509017961772931337');" style=""> 894          Cursor c = cr.query(LauncherSettings.Favorites.CONTENT_URI, null,                                         </span>
<span class="-4259949945589236527" onmouseenter="enter('-4259949945589236527');" onmouseout="out('-4259949945589236527');" style=""> 895                  &quot;_id=? and (itemType=? or itemType=?)&quot;,                                                           </span>
<span class="6839251627547830421" onmouseenter="enter('6839251627547830421');" onmouseout="out('6839251627547830421');" style=""> 896                  new String[] { String.valueOf(id),                                                                </span>
<span class="-7910525153585982304" onmouseenter="enter('-7910525153585982304');" onmouseout="out('-7910525153585982304');" style=""> 897                          String.valueOf(LauncherSettings.Favorites.ITEM_TYPE_FOLDER)}, null);                      </span>
<span  style=""> 898                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 899          try {                                                                                                     </span>
<span class="-6302304746326789409" onmouseenter="enter('-6302304746326789409');" onmouseout="out('-6302304746326789409');" style=""> 900              if (c.moveToFirst()) {                                                                                </span>
<span class="6881570625383458268" onmouseenter="enter('6881570625383458268');" onmouseout="out('6881570625383458268');" style=""> 901                  final int itemTypeIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);          </span>
<span class="-4230091587709091274" onmouseenter="enter('-4230091587709091274');" onmouseout="out('-4230091587709091274');" style=""> 902                  final int titleIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);                 </span>
<span class="9151756379286957267" onmouseenter="enter('9151756379286957267');" onmouseout="out('9151756379286957267');" style=""> 903                  final int containerIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);         </span>
<span class="-3185633572652505278" onmouseenter="enter('-3185633572652505278');" onmouseout="out('-3185633572652505278');" style=""> 904                  final int screenIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);               </span>
<span class="-5664047081175404617" onmouseenter="enter('-5664047081175404617');" onmouseout="out('-5664047081175404617');" style=""> 905                  final int cellXIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);                 </span>
<span class="3334870944087071273" onmouseenter="enter('3334870944087071273');" onmouseout="out('3334870944087071273');" style=""> 906                  final int cellYIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);                 </span>
<span  style=""> 907                                                                                                                    </span>
<span class="7004752326616919357" onmouseenter="enter('7004752326616919357');" onmouseout="out('7004752326616919357');" style=""> 908                  FolderInfo folderInfo = null;                                                                     </span>
<span class="2938602155061951308" onmouseenter="enter('2938602155061951308');" onmouseout="out('2938602155061951308');" style=""> 909                  switch (c.getInt(itemTypeIndex)) {                                                                </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 910                      case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                             </span>
<span class="8497686210844969517" onmouseenter="enter('8497686210844969517');" onmouseout="out('8497686210844969517');" style=""> 911                          folderInfo = findOrMakeFolder(folderList, id);                                            </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 912                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 913                  }                                                                                                 </span>
<span  style=""> 914                                                                                                                    </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style=""> 915                  folderInfo.title = c.getString(titleIndex);                                                       </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style=""> 916                  folderInfo.id = id;                                                                               </span>
<span class="-3770649288661071555" onmouseenter="enter('-3770649288661071555');" onmouseout="out('-3770649288661071555');" style=""> 917                  folderInfo.container = c.getInt(containerIndex);                                                  </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style=""> 918                  folderInfo.screenId = c.getInt(screenIndex);                                                      </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style=""> 919                  folderInfo.cellX = c.getInt(cellXIndex);                                                          </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style=""> 920                  folderInfo.cellY = c.getInt(cellYIndex);                                                          </span>
<span  style=""> 921                                                                                                                    </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style=""> 922                  return folderInfo;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 923              }                                                                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 924          } finally {                                                                                               </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style=""> 925              c.close();                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 926          }                                                                                                         </span>
<span  style=""> 927                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 928          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 929      }                                                                                                             </span>
<span  style=""> 930                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 931      /**                                                                                                           </span>
<span class="-4485876183654335246" onmouseenter="enter('-4485876183654335246');" onmouseout="out('-4485876183654335246');" style=""> 932       * Add an item to the database in a specified container. Sets the container, screen, cellX and                </span>
<span class="5014383815638293688" onmouseenter="enter('5014383815638293688');" onmouseout="out('5014383815638293688');" style=""> 933       * cellY fields of the item. Also assigns an ID to the item.                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 934       */                                                                                                           </span>
<span class="7688823130205554121" onmouseenter="enter('7688823130205554121');" onmouseout="out('7688823130205554121');" style=""> 935      static void addItemToDatabase(Context context, final ItemInfo item, final long container,                     </span>
<span class="-5047869274291255898" onmouseenter="enter('-5047869274291255898');" onmouseout="out('-5047869274291255898');" style=""> 936              final long screenId, final int cellX, final int cellY, final boolean notify) {                        </span>
<span class="-5671405823157991512" onmouseenter="enter('-5671405823157991512');" onmouseout="out('-5671405823157991512');" style=""> 937          item.container = container;                                                                               </span>
<span class="-530728811034113482" onmouseenter="enter('-530728811034113482');" onmouseout="out('-530728811034113482');" style=""> 938          item.cellX = cellX;                                                                                       </span>
<span class="-2753327610924942740" onmouseenter="enter('-2753327610924942740');" onmouseout="out('-2753327610924942740');" style=""> 939          item.cellY = cellY;                                                                                       </span>
<span class="6138513360392779995" onmouseenter="enter('6138513360392779995');" onmouseout="out('6138513360392779995');" style=""> 940          // We store hotseat items in canonical form which is this orientation invariant position                  </span>
<span class="5422822788208522405" onmouseenter="enter('5422822788208522405');" onmouseout="out('5422822788208522405');" style=""> 941          // in the hotseat                                                                                         </span>
<span class="-7725460777470525870" onmouseenter="enter('-7725460777470525870');" onmouseout="out('-7725460777470525870');" style=""> 942          if (context instanceof Launcher &amp;&amp; screenId &lt; 0 &amp;&amp;                                                        </span>
<span class="-6556836558822859082" onmouseenter="enter('-6556836558822859082');" onmouseout="out('-6556836558822859082');" style=""> 943                  container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                      </span>
<span class="1819885036504730147" onmouseenter="enter('1819885036504730147');" onmouseout="out('1819885036504730147');" style=""> 944              item.screenId = ((Launcher) context).getHotseat().getOrderInHotseat(cellX, cellY);                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 945          } else {                                                                                                  </span>
<span class="-5024202073593825227" onmouseenter="enter('-5024202073593825227');" onmouseout="out('-5024202073593825227');" style=""> 946              item.screenId = screenId;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947          }                                                                                                         </span>
<span  style=""> 948                                                                                                                    </span>
<span class="7694375558102178162" onmouseenter="enter('7694375558102178162');" onmouseout="out('7694375558102178162');" style=""> 949          final ContentValues values = new ContentValues();                                                         </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style=""> 950          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="5176730964422589638" onmouseenter="enter('5176730964422589638');" onmouseout="out('5176730964422589638');" style=""> 951          item.onAddToDatabase(values);                                                                             </span>
<span  style=""> 952                                                                                                                    </span>
<span class="-1899316649519192705" onmouseenter="enter('-1899316649519192705');" onmouseout="out('-1899316649519192705');" style=""> 953          item.id = LauncherAppState.getLauncherProvider().generateNewItemId();                                     </span>
<span class="-154850703316330893" onmouseenter="enter('-154850703316330893');" onmouseout="out('-154850703316330893');" style=""> 954          values.put(LauncherSettings.Favorites._ID, item.id);                                                      </span>
<span class="1705982171614908292" onmouseenter="enter('1705982171614908292');" onmouseout="out('1705982171614908292');" style=""> 955          item.updateValuesWithCoordinates(values, item.cellX, item.cellY);                                         </span>
<span  style=""> 956                                                                                                                    </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style=""> 957          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 958              public void run() {                                                                                   </span>
<span class="-9004016634042314269" onmouseenter="enter('-9004016634042314269');" onmouseout="out('-9004016634042314269');" style=""> 959                  cr.insert(notify ? LauncherSettings.Favorites.CONTENT_URI :                                       </span>
<span class="-612779074530505821" onmouseenter="enter('-612779074530505821');" onmouseout="out('-612779074530505821');" style=""> 960                          LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION, values);                          </span>
<span  style=""> 961                                                                                                                    </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style=""> 962                  // Lock on mBgLock *after* the db operation                                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style=""> 963                  synchronized (sBgLock) {                                                                          </span>
<span class="7042391537046657417" onmouseenter="enter('7042391537046657417');" onmouseout="out('7042391537046657417');" style=""> 964                      checkItemInfoLocked(item.id, item, null);                                                     </span>
<span class="-1016681302040734126" onmouseenter="enter('-1016681302040734126');" onmouseout="out('-1016681302040734126');" style=""> 965                      sBgItemsIdMap.put(item.id, item);                                                             </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style=""> 966                      switch (item.itemType) {                                                                      </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style=""> 967                          case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                         </span>
<span class="7914552456706159325" onmouseenter="enter('7914552456706159325');" onmouseout="out('7914552456706159325');" style=""> 968                              sBgFolders.put(item.id, (FolderInfo) item);                                           </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style=""> 969                              // Fall through                                                                       </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style=""> 970                          case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                    </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style=""> 971                          case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                       </span>
<span class="-1329080713393586591" onmouseenter="enter('-1329080713393586591');" onmouseout="out('-1329080713393586591');" style=""> 972                              if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP ||                 </span>
<span class="-8703099407725800834" onmouseenter="enter('-8703099407725800834');" onmouseout="out('-8703099407725800834');" style=""> 973                                      item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {             </span>
<span class="-8146326631995897363" onmouseenter="enter('-8146326631995897363');" onmouseout="out('-8146326631995897363');" style=""> 974                                  sBgWorkspaceItems.add(item);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 975                              } else {                                                                              </span>
<span class="1723639232164610003" onmouseenter="enter('1723639232164610003');" onmouseout="out('1723639232164610003');" style=""> 976                                  if (!sBgFolders.containsKey(item.container)) {                                    </span>
<span class="-54073947043614801" onmouseenter="enter('-54073947043614801');" onmouseout="out('-54073947043614801');" style=""> 977                                      // Adding an item to a folder that doesn&#x27;t exist.                             </span>
<span class="-8178862485732913035" onmouseenter="enter('-8178862485732913035');" onmouseout="out('-8178862485732913035');" style=""> 978                                      String msg = &quot;adding item: &quot; + item + &quot; to a folder that &quot; +                  </span>
<span class="8069959129571777545" onmouseenter="enter('8069959129571777545');" onmouseout="out('8069959129571777545');" style=""> 979                                              &quot; doesn&#x27;t exist&quot;;                                                     </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style=""> 980                                      Log.e(TAG, msg);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 981                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 982                              }                                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 983                              break;                                                                                </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style=""> 984                          case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                                      </span>
<span class="-7161913213134623334" onmouseenter="enter('-7161913213134623334');" onmouseout="out('-7161913213134623334');" style=""> 985                              sBgAppWidgets.add((LauncherAppWidgetInfo) item);                                      </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 986                              break;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 987                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 988                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 989              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 990          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style=""> 991          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 992      }                                                                                                             </span>
<span  style=""> 993                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 994      /**                                                                                                           </span>
<span class="7476806510728309142" onmouseenter="enter('7476806510728309142');" onmouseout="out('7476806510728309142');" style=""> 995       * Creates a new unique child id, for a given cell span across all layouts.                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 996       */                                                                                                           </span>
<span class="6041396781761029986" onmouseenter="enter('6041396781761029986');" onmouseout="out('6041396781761029986');" style=""> 997      static int getCellLayoutChildId(                                                                              </span>
<span class="-7149445532835734900" onmouseenter="enter('-7149445532835734900');" onmouseout="out('-7149445532835734900');" style=""> 998              long container, long screen, int localCellX, int localCellY, int spanX, int spanY) {                  </span>
<span class="513362613558309253" onmouseenter="enter('513362613558309253');" onmouseout="out('513362613558309253');" style=""> 999          return (((int) container &amp; 0xFF) &lt;&lt; 24)                                                                   </span>
<span class="-7388843269158644047" onmouseenter="enter('-7388843269158644047');" onmouseout="out('-7388843269158644047');" style="">1000                  | ((int) screen &amp; 0xFF) &lt;&lt; 16 | (localCellX &amp; 0xFF) &lt;&lt; 8 | (localCellY &amp; 0xFF);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1001      }                                                                                                             </span>
<span  style="">1002                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1003      /**                                                                                                           </span>
<span class="-1037279788887787658" onmouseenter="enter('-1037279788887787658');" onmouseout="out('-1037279788887787658');" style="">1004       * Removes the specified item from the database                                                               </span>
<span class="-5592793211053726605" onmouseenter="enter('-5592793211053726605');" onmouseout="out('-5592793211053726605');" style="">1005       * @param context                                                                                             </span>
<span class="-4254350406439613482" onmouseenter="enter('-4254350406439613482');" onmouseout="out('-4254350406439613482');" style="">1006       * @param item                                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1007       */                                                                                                           </span>
<span class="6689175154077652032" onmouseenter="enter('6689175154077652032');" onmouseout="out('6689175154077652032');" style="">1008      static void deleteItemFromDatabase(Context context, final ItemInfo item) {                                    </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1009          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="-8662622705024005942" onmouseenter="enter('-8662622705024005942');" onmouseout="out('-8662622705024005942');" style="">1010          final Uri uriToDelete = LauncherSettings.Favorites.getContentUri(item.id, false);                         </span>
<span  style="">1011                                                                                                                    </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1012          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1013              public void run() {                                                                                   </span>
<span class="5853003155754312383" onmouseenter="enter('5853003155754312383');" onmouseout="out('5853003155754312383');" style="">1014                  cr.delete(uriToDelete, null, null);                                                               </span>
<span  style="">1015                                                                                                                    </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1016                  // Lock on mBgLock *after* the db operation                                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1017                  synchronized (sBgLock) {                                                                          </span>
<span class="-2405954290193554139" onmouseenter="enter('-2405954290193554139');" onmouseout="out('-2405954290193554139');" style="">1018                      switch (item.itemType) {                                                                      </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1019                          case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                         </span>
<span class="-7362435803416400268" onmouseenter="enter('-7362435803416400268');" onmouseout="out('-7362435803416400268');" style="">1020                              sBgFolders.remove(item.id);                                                           </span>
<span class="-7253547809349647013" onmouseenter="enter('-7253547809349647013');" onmouseout="out('-7253547809349647013');" style="">1021                              for (ItemInfo info: sBgItemsIdMap.values()) {                                         </span>
<span class="1662466266129331257" onmouseenter="enter('1662466266129331257');" onmouseout="out('1662466266129331257');" style="">1022                                  if (info.container == item.id) {                                                  </span>
<span class="-1893702506185878584" onmouseenter="enter('-1893702506185878584');" onmouseout="out('-1893702506185878584');" style="">1023                                      // We are deleting a folder which still contains items that                   </span>
<span class="-7314190253548819229" onmouseenter="enter('-7314190253548819229');" onmouseout="out('-7314190253548819229');" style="">1024                                      // think they are contained by that folder.                                   </span>
<span class="-2989844263372177086" onmouseenter="enter('-2989844263372177086');" onmouseout="out('-2989844263372177086');" style="">1025                                      String msg = &quot;deleting a folder (&quot; + item + &quot;) which still &quot; +                </span>
<span class="-6063695738801794388" onmouseenter="enter('-6063695738801794388');" onmouseout="out('-6063695738801794388');" style="">1026                                              &quot;contains items (&quot; + info + &quot;)&quot;;                                      </span>
<span class="-6647758959009774834" onmouseenter="enter('-6647758959009774834');" onmouseout="out('-6647758959009774834');" style="">1027                                      Log.e(TAG, msg);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1028                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1029                              }                                                                                     </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1030                              sBgWorkspaceItems.remove(item);                                                       </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1031                              break;                                                                                </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1032                          case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                    </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1033                          case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                       </span>
<span class="-403531992657831590" onmouseenter="enter('-403531992657831590');" onmouseout="out('-403531992657831590');" style="">1034                              sBgWorkspaceItems.remove(item);                                                       </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1035                              break;                                                                                </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">1036                          case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                                      </span>
<span class="5035692159539723007" onmouseenter="enter('5035692159539723007');" onmouseout="out('5035692159539723007');" style="">1037                              sBgAppWidgets.remove((LauncherAppWidgetInfo) item);                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1038                              break;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1039                      }                                                                                             </span>
<span class="414734963826797427" onmouseenter="enter('414734963826797427');" onmouseout="out('414734963826797427');" style="">1040                      sBgItemsIdMap.remove(item.id);                                                                </span>
<span class="4282085416776692307" onmouseenter="enter('4282085416776692307');" onmouseout="out('4282085416776692307');" style="">1041                      sBgDbIconCache.remove(item);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1042                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1043              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1044          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1045          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1046      }                                                                                                             </span>
<span  style="">1047                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1048      /**                                                                                                           </span>
<span class="-7001721478473539684" onmouseenter="enter('-7001721478473539684');" onmouseout="out('-7001721478473539684');" style="">1049       * Update the order of the workspace screens in the database. The array list contains                         </span>
<span class="-8575814248656839337" onmouseenter="enter('-8575814248656839337');" onmouseout="out('-8575814248656839337');" style="">1050       * a list of screen ids in the order that they should appear.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1051       */                                                                                                           </span>
<span class="8428215756529453230" onmouseenter="enter('8428215756529453230');" onmouseout="out('8428215756529453230');" style="">1052      void updateWorkspaceScreenOrder(Context context, final ArrayList&lt;Long&gt; screens) {                             </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1053          // Log to disk                                                                                            </span>
<span class="2597844157040813179" onmouseenter="enter('2597844157040813179');" onmouseout="out('2597844157040813179');" style="">1054          Launcher.addDumpLog(TAG, &quot;11683562 - updateWorkspaceScreenOrder()&quot;, true);                                </span>
<span class="-6712172470308057727" onmouseenter="enter('-6712172470308057727');" onmouseout="out('-6712172470308057727');" style="">1055          Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; + TextUtils.join(&quot;, &quot;, screens), true);                 </span>
<span  style="">1056                                                                                                                    </span>
<span class="468782492563171594" onmouseenter="enter('468782492563171594');" onmouseout="out('468782492563171594');" style="">1057          final ArrayList&lt;Long&gt; screensCopy = new ArrayList&lt;Long&gt;(screens);                                         </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1058          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span class="543518355232884435" onmouseenter="enter('543518355232884435');" onmouseout="out('543518355232884435');" style="">1059          final Uri uri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                                            </span>
<span  style="">1060                                                                                                                    </span>
<span class="4254834681163937802" onmouseenter="enter('4254834681163937802');" onmouseout="out('4254834681163937802');" style="">1061          // Remove any negative screen ids -- these aren&#x27;t persisted                                               </span>
<span class="2152325044441302341" onmouseenter="enter('2152325044441302341');" onmouseout="out('2152325044441302341');" style="">1062          Iterator&lt;Long&gt; iter = screensCopy.iterator();                                                             </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">1063          while (iter.hasNext()) {                                                                                  </span>
<span class="-927390677227055343" onmouseenter="enter('-927390677227055343');" onmouseout="out('-927390677227055343');" style="">1064              long id = iter.next();                                                                                </span>
<span class="-1178150068928662840" onmouseenter="enter('-1178150068928662840');" onmouseout="out('-1178150068928662840');" style="">1065              if (id &lt; 0) {                                                                                         </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">1066                  iter.remove();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1067              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1068          }                                                                                                         </span>
<span  style="">1069                                                                                                                    </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1070          Runnable r = new Runnable() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1071              @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1072              public void run() {                                                                                   </span>
<span class="-3030717489353459898" onmouseenter="enter('-3030717489353459898');" onmouseout="out('-3030717489353459898');" style="">1073                  ArrayList&lt;ContentProviderOperation&gt; ops = new ArrayList&lt;ContentProviderOperation&gt;();              </span>
<span class="-6225505341206658348" onmouseenter="enter('-6225505341206658348');" onmouseout="out('-6225505341206658348');" style="">1074                  // Clear the table                                                                                </span>
<span class="-429946239562688464" onmouseenter="enter('-429946239562688464');" onmouseout="out('-429946239562688464');" style="">1075                  ops.add(ContentProviderOperation.newDelete(uri).build());                                         </span>
<span class="-2619892188160552062" onmouseenter="enter('-2619892188160552062');" onmouseout="out('-2619892188160552062');" style="">1076                  int count = screensCopy.size();                                                                   </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style="">1077                  for (int i = 0; i &lt; count; i++) {                                                                 </span>
<span class="4061202061343128850" onmouseenter="enter('4061202061343128850');" onmouseout="out('4061202061343128850');" style="">1078                      ContentValues v = new ContentValues();                                                        </span>
<span class="-1711185173807510695" onmouseenter="enter('-1711185173807510695');" onmouseout="out('-1711185173807510695');" style="">1079                      long screenId = screensCopy.get(i);                                                           </span>
<span class="-5112420615000020353" onmouseenter="enter('-5112420615000020353');" onmouseout="out('-5112420615000020353');" style="">1080                      v.put(LauncherSettings.WorkspaceScreens._ID, screenId);                                       </span>
<span class="4685968830084375092" onmouseenter="enter('4685968830084375092');" onmouseout="out('4685968830084375092');" style="">1081                      v.put(LauncherSettings.WorkspaceScreens.SCREEN_RANK, i);                                      </span>
<span class="2820655584610684032" onmouseenter="enter('2820655584610684032');" onmouseout="out('2820655584610684032');" style="">1082                      ops.add(ContentProviderOperation.newInsert(uri).withValues(v).build());                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1083                  }                                                                                                 </span>
<span  style="">1084                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1085                  try {                                                                                             </span>
<span class="-6161231661394732252" onmouseenter="enter('-6161231661394732252');" onmouseout="out('-6161231661394732252');" style="">1086                      cr.applyBatch(LauncherProvider.AUTHORITY, ops);                                               </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style="">1087                  } catch (Exception ex) {                                                                          </span>
<span class="-9047539165825913138" onmouseenter="enter('-9047539165825913138');" onmouseout="out('-9047539165825913138');" style="">1088                      throw new RuntimeException(ex);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1089                  }                                                                                                 </span>
<span  style="">1090                                                                                                                    </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1091                  synchronized (sBgLock) {                                                                          </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1092                      sBgWorkspaceScreens.clear();                                                                  </span>
<span class="-2640283764679238318" onmouseenter="enter('-2640283764679238318');" onmouseout="out('-2640283764679238318');" style="">1093                      sBgWorkspaceScreens.addAll(screensCopy);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1094                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1095              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1096          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1097          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1098      }                                                                                                             </span>
<span  style="">1099                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1100      /**                                                                                                           </span>
<span class="-6789515923938750727" onmouseenter="enter('-6789515923938750727');" onmouseout="out('-6789515923938750727');" style="">1101       * Remove the contents of the specified folder from the database                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1102       */                                                                                                           </span>
<span class="686021856205334545" onmouseenter="enter('686021856205334545');" onmouseout="out('686021856205334545');" style="">1103      static void deleteFolderContentsFromDatabase(Context context, final FolderInfo info) {                        </span>
<span class="6638320083766205520" onmouseenter="enter('6638320083766205520');" onmouseout="out('6638320083766205520');" style="">1104          final ContentResolver cr = context.getContentResolver();                                                  </span>
<span  style="">1105                                                                                                                    </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">1106          Runnable r = new Runnable() {                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1107              public void run() {                                                                                   </span>
<span class="-8793927488200240422" onmouseenter="enter('-8793927488200240422');" onmouseout="out('-8793927488200240422');" style="">1108                  cr.delete(LauncherSettings.Favorites.getContentUri(info.id, false), null, null);                  </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1109                  // Lock on mBgLock *after* the db operation                                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1110                  synchronized (sBgLock) {                                                                          </span>
<span class="-4714602177116521128" onmouseenter="enter('-4714602177116521128');" onmouseout="out('-4714602177116521128');" style="">1111                      sBgItemsIdMap.remove(info.id);                                                                </span>
<span class="-3189879738488687685" onmouseenter="enter('-3189879738488687685');" onmouseout="out('-3189879738488687685');" style="">1112                      sBgFolders.remove(info.id);                                                                   </span>
<span class="5895316081502731153" onmouseenter="enter('5895316081502731153');" onmouseout="out('5895316081502731153');" style="">1113                      sBgDbIconCache.remove(info);                                                                  </span>
<span class="-6074846806723656328" onmouseenter="enter('-6074846806723656328');" onmouseout="out('-6074846806723656328');" style="">1114                      sBgWorkspaceItems.remove(info);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1115                  }                                                                                                 </span>
<span  style="">1116                                                                                                                    </span>
<span class="-1937171462652594970" onmouseenter="enter('-1937171462652594970');" onmouseout="out('-1937171462652594970');" style="">1117                  cr.delete(LauncherSettings.Favorites.CONTENT_URI_NO_NOTIFICATION,                                 </span>
<span class="9128354258649337519" onmouseenter="enter('9128354258649337519');" onmouseout="out('9128354258649337519');" style="">1118                          LauncherSettings.Favorites.CONTAINER + &quot;=&quot; + info.id, null);                              </span>
<span class="1541236194046833937" onmouseenter="enter('1541236194046833937');" onmouseout="out('1541236194046833937');" style="">1119                  // Lock on mBgLock *after* the db operation                                                       </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1120                  synchronized (sBgLock) {                                                                          </span>
<span class="7541292827914562010" onmouseenter="enter('7541292827914562010');" onmouseout="out('7541292827914562010');" style="">1121                      for (ItemInfo childInfo : info.contents) {                                                    </span>
<span class="-2237983399964272530" onmouseenter="enter('-2237983399964272530');" onmouseout="out('-2237983399964272530');" style="">1122                          sBgItemsIdMap.remove(childInfo.id);                                                       </span>
<span class="7662249246062224172" onmouseenter="enter('7662249246062224172');" onmouseout="out('7662249246062224172');" style="">1123                          sBgDbIconCache.remove(childInfo);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1124                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1126              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1127          };                                                                                                        </span>
<span class="-856696242060921280" onmouseenter="enter('-856696242060921280');" onmouseout="out('-856696242060921280');" style="">1128          runOnWorkerThread(r);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1129      }                                                                                                             </span>
<span  style="">1130                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1131      /**                                                                                                           </span>
<span class="8050600461131576642" onmouseenter="enter('8050600461131576642');" onmouseout="out('8050600461131576642');" style="">1132       * Set this as the current Launcher activity object for the loader.                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1133       */                                                                                                           </span>
<span class="8980870975348708436" onmouseenter="enter('8980870975348708436');" onmouseout="out('8980870975348708436');" style="">1134      public void initialize(Callbacks callbacks) {                                                                 </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1135          synchronized (mLock) {                                                                                    </span>
<span class="-641895236165954122" onmouseenter="enter('-641895236165954122');" onmouseout="out('-641895236165954122');" style="">1136              mCallbacks = new WeakReference&lt;Callbacks&gt;(callbacks);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1137          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1138      }                                                                                                             </span>
<span  style="">1139                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1140      /**                                                                                                           </span>
<span class="2369304932228112448" onmouseenter="enter('2369304932228112448');" onmouseout="out('2369304932228112448');" style="">1141       * Call from the handler for ACTION_PACKAGE_ADDED, ACTION_PACKAGE_REMOVED and                                 </span>
<span class="-8845819122914862467" onmouseenter="enter('-8845819122914862467');" onmouseout="out('-8845819122914862467');" style="">1142       * ACTION_PACKAGE_CHANGED.                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1143       */                                                                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1144      @Override                                                                                                     </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">1145      public void onReceive(Context context, Intent intent) {                                                       </span>
<span class="-4567737324281428641" onmouseenter="enter('-4567737324281428641');" onmouseout="out('-4567737324281428641');" style="">1146          if (DEBUG_LOADERS) Log.d(TAG, &quot;onReceive intent=&quot; + intent);                                              </span>
<span  style="">1147                                                                                                                    </span>
<span class="-4990819661547905021" onmouseenter="enter('-4990819661547905021');" onmouseout="out('-4990819661547905021');" style="">1148          final String action = intent.getAction();                                                                 </span>
<span  style="">1149                                                                                                                    </span>
<span class="3248856724191643889" onmouseenter="enter('3248856724191643889');" onmouseout="out('3248856724191643889');" style="">1150          if (Intent.ACTION_PACKAGE_CHANGED.equals(action)                                                          </span>
<span class="540624655569635000" onmouseenter="enter('540624655569635000');" onmouseout="out('540624655569635000');" style="">1151                  || Intent.ACTION_PACKAGE_REMOVED.equals(action)                                                   </span>
<span class="-2497532605624583235" onmouseenter="enter('-2497532605624583235');" onmouseout="out('-2497532605624583235');" style="">1152                  || Intent.ACTION_PACKAGE_ADDED.equals(action)) {                                                  </span>
<span class="3043595781762965417" onmouseenter="enter('3043595781762965417');" onmouseout="out('3043595781762965417');" style="">1153              final String packageName = intent.getData().getSchemeSpecificPart();                                  </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="">1154              final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);                      </span>
<span  style="">1155                                                                                                                    </span>
<span class="8732681156431716097" onmouseenter="enter('8732681156431716097');" onmouseout="out('8732681156431716097');" style="">1156              int op = PackageUpdatedTask.OP_NONE;                                                                  </span>
<span  style="">1157                                                                                                                    </span>
<span class="226916516395269330" onmouseenter="enter('226916516395269330');" onmouseout="out('226916516395269330');" style="">1158              if (packageName == null || packageName.length() == 0) {                                               </span>
<span class="6497011882963257234" onmouseenter="enter('6497011882963257234');" onmouseout="out('6497011882963257234');" style="">1159                  // they sent us a bad intent                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1160                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1161              }                                                                                                     </span>
<span  style="">1162                                                                                                                    </span>
<span class="-8410954317975616940" onmouseenter="enter('-8410954317975616940');" onmouseout="out('-8410954317975616940');" style="">1163              if (Intent.ACTION_PACKAGE_CHANGED.equals(action)) {                                                   </span>
<span class="-6985466686908158774" onmouseenter="enter('-6985466686908158774');" onmouseout="out('-6985466686908158774');" style="">1164                  op = PackageUpdatedTask.OP_UPDATE;                                                                </span>
<span class="-6129441538111285553" onmouseenter="enter('-6129441538111285553');" onmouseout="out('-6129441538111285553');" style="">1165              } else if (Intent.ACTION_PACKAGE_REMOVED.equals(action)) {                                            </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1166                  if (!replacing) {                                                                                 </span>
<span class="-6586396537735596399" onmouseenter="enter('-6586396537735596399');" onmouseout="out('-6586396537735596399');" style="">1167                      op = PackageUpdatedTask.OP_REMOVE;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1168                  }                                                                                                 </span>
<span class="596194884408948956" onmouseenter="enter('596194884408948956');" onmouseout="out('596194884408948956');" style="">1169                  // else, we are replacing the package, so a PACKAGE_ADDED will be sent                            </span>
<span class="8848734407792838356" onmouseenter="enter('8848734407792838356');" onmouseout="out('8848734407792838356');" style="">1170                  // later, we will update the package at this time                                                 </span>
<span class="1584650074780198559" onmouseenter="enter('1584650074780198559');" onmouseout="out('1584650074780198559');" style="">1171              } else if (Intent.ACTION_PACKAGE_ADDED.equals(action)) {                                              </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1172                  if (!replacing) {                                                                                 </span>
<span class="-8510632568607563672" onmouseenter="enter('-8510632568607563672');" onmouseout="out('-8510632568607563672');" style="">1173                      op = PackageUpdatedTask.OP_ADD;                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1174                  } else {                                                                                          </span>
<span class="-6985466686908158774" onmouseenter="enter('-6985466686908158774');" onmouseout="out('-6985466686908158774');" style="">1175                      op = PackageUpdatedTask.OP_UPDATE;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1176                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1177              }                                                                                                     </span>
<span  style="">1178                                                                                                                    </span>
<span class="4401752612772195970" onmouseenter="enter('4401752612772195970');" onmouseout="out('4401752612772195970');" style="">1179              if (op != PackageUpdatedTask.OP_NONE) {                                                               </span>
<span class="-3763042555791809504" onmouseenter="enter('-3763042555791809504');" onmouseout="out('-3763042555791809504');" style="">1180                  enqueuePackageUpdated(new PackageUpdatedTask(op, new String[] { packageName }));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1181              }                                                                                                     </span>
<span  style="">1182                                                                                                                    </span>
<span class="1438616399789326195" onmouseenter="enter('1438616399789326195');" onmouseout="out('1438616399789326195');" style="">1183          } else if (Intent.ACTION_EXTERNAL_APPLICATIONS_AVAILABLE.equals(action)) {                                </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="">1184              final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);                      </span>
<span class="-9048118809725232135" onmouseenter="enter('-9048118809725232135');" onmouseout="out('-9048118809725232135');" style="">1185              String[] packages = intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);                    </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1186              if (!replacing) {                                                                                     </span>
<span class="8106264297457531305" onmouseenter="enter('8106264297457531305');" onmouseout="out('8106264297457531305');" style="">1187                  enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_ADD, packages));               </span>
<span class="796476435191708892" onmouseenter="enter('796476435191708892');" onmouseout="out('796476435191708892');" style="">1188                  if (mAppsCanBeOnRemoveableStorage) {                                                              </span>
<span class="-460878835460866964" onmouseenter="enter('-460878835460866964');" onmouseout="out('-460878835460866964');" style="">1189                      // Only rebind if we support removable storage.  It catches the case where                    </span>
<span class="-4167475923329833908" onmouseenter="enter('-4167475923329833908');" onmouseout="out('-4167475923329833908');" style="">1190                      // apps on the external sd card need to be reloaded                                           </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1191                      startLoaderFromBackground();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1192                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1193              } else {                                                                                              </span>
<span class="-1596872044981704971" onmouseenter="enter('-1596872044981704971');" onmouseout="out('-1596872044981704971');" style="">1194                  // If we are replacing then just update the packages in the list                                  </span>
<span class="5890557645886373945" onmouseenter="enter('5890557645886373945');" onmouseout="out('5890557645886373945');" style="">1195                  enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE,                        </span>
<span class="-5628778258633473048" onmouseenter="enter('-5628778258633473048');" onmouseout="out('-5628778258633473048');" style="">1196                          packages));                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1197              }                                                                                                     </span>
<span class="7043932659231673518" onmouseenter="enter('7043932659231673518');" onmouseout="out('7043932659231673518');" style="">1198          } else if (Intent.ACTION_EXTERNAL_APPLICATIONS_UNAVAILABLE.equals(action)) {                              </span>
<span class="-5532071318800337836" onmouseenter="enter('-5532071318800337836');" onmouseout="out('-5532071318800337836');" style="">1199              final boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);                      </span>
<span class="2352622246719852693" onmouseenter="enter('2352622246719852693');" onmouseout="out('2352622246719852693');" style="">1200              if (!replacing) {                                                                                     </span>
<span class="-9048118809725232135" onmouseenter="enter('-9048118809725232135');" onmouseout="out('-9048118809725232135');" style="">1201                  String[] packages = intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);                </span>
<span class="-7496430100396306440" onmouseenter="enter('-7496430100396306440');" onmouseout="out('-7496430100396306440');" style="">1202                  enqueuePackageUpdated(new PackageUpdatedTask(                                                     </span>
<span class="296372570783844091" onmouseenter="enter('296372570783844091');" onmouseout="out('296372570783844091');" style="">1203                              PackageUpdatedTask.OP_UNAVAILABLE, packages));                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1204              }                                                                                                     </span>
<span class="1575594556961394504" onmouseenter="enter('1575594556961394504');" onmouseout="out('1575594556961394504');" style="">1205              // else, we are replacing the packages, so ignore this event and wait for                             </span>
<span class="-3059095335031402395" onmouseenter="enter('-3059095335031402395');" onmouseout="out('-3059095335031402395');" style="">1206              // EXTERNAL_APPLICATIONS_AVAILABLE to update the packages at that time                                </span>
<span class="-2062230633944308548" onmouseenter="enter('-2062230633944308548');" onmouseout="out('-2062230633944308548');" style="">1207          } else if (Intent.ACTION_LOCALE_CHANGED.equals(action)) {                                                 </span>
<span class="-6283043286710203920" onmouseenter="enter('-6283043286710203920');" onmouseout="out('-6283043286710203920');" style="">1208              // If we have changed locale we need to clear out the labels in all apps/workspace.                   </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1209              forceReload();                                                                                        </span>
<span class="4348516547288755383" onmouseenter="enter('4348516547288755383');" onmouseout="out('4348516547288755383');" style="">1210          } else if (Intent.ACTION_CONFIGURATION_CHANGED.equals(action)) {                                          </span>
<span class="6164116257081582847" onmouseenter="enter('6164116257081582847');" onmouseout="out('6164116257081582847');" style="">1211               // Check if configuration change was an mcc/mnc change which would affect app resources              </span>
<span class="-1334400353911346867" onmouseenter="enter('-1334400353911346867');" onmouseout="out('-1334400353911346867');" style="">1212               // and we would need to clear out the labels in all apps/workspace. Same handling as                 </span>
<span class="-5650891854452971889" onmouseenter="enter('-5650891854452971889');" onmouseout="out('-5650891854452971889');" style="">1213               // above for ACTION_LOCALE_CHANGED                                                                   </span>
<span class="5411318685984925146" onmouseenter="enter('5411318685984925146');" onmouseout="out('5411318685984925146');" style="">1214               Configuration currentConfig = context.getResources().getConfiguration();                             </span>
<span class="-5822569774152959183" onmouseenter="enter('-5822569774152959183');" onmouseout="out('-5822569774152959183');" style="">1215               if (mPreviousConfigMcc != currentConfig.mcc) {                                                       </span>
<span class="84255665079130844" onmouseenter="enter('84255665079130844');" onmouseout="out('84255665079130844');" style="">1216                     Log.d(TAG, &quot;Reload apps on config change. curr_mcc:&quot;                                           </span>
<span class="-5209278319615985301" onmouseenter="enter('-5209278319615985301');" onmouseout="out('-5209278319615985301');" style="">1217                         + currentConfig.mcc + &quot; prevmcc:&quot; + mPreviousConfigMcc);                                   </span>
<span class="-2579091453950888971" onmouseenter="enter('-2579091453950888971');" onmouseout="out('-2579091453950888971');" style="">1218                     forceReload();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1219               }                                                                                                    </span>
<span class="-3935663267934034322" onmouseenter="enter('-3935663267934034322');" onmouseout="out('-3935663267934034322');" style="">1220               // Update previousConfig                                                                             </span>
<span class="3962364908604221868" onmouseenter="enter('3962364908604221868');" onmouseout="out('3962364908604221868');" style="">1221               mPreviousConfigMcc = currentConfig.mcc;                                                              </span>
<span class="-625815149698974703" onmouseenter="enter('-625815149698974703');" onmouseout="out('-625815149698974703');" style="">1222          } else if (SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED.equals(action) ||                          </span>
<span class="-3901926890039161494" onmouseenter="enter('-3901926890039161494');" onmouseout="out('-3901926890039161494');" style="">1223                     SearchManager.INTENT_ACTION_SEARCHABLES_CHANGED.equals(action)) {                              </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1224              if (mCallbacks != null) {                                                                             </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1225                  Callbacks callbacks = mCallbacks.get();                                                           </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1226                  if (callbacks != null) {                                                                          </span>
<span class="-1936765454200843013" onmouseenter="enter('-1936765454200843013');" onmouseout="out('-1936765454200843013');" style="">1227                      callbacks.bindSearchablesChanged();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1228                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1230          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1231      }                                                                                                             </span>
<span  style="">1232                                                                                                                    </span>
<span class="-3490103774513517076" onmouseenter="enter('-3490103774513517076');" onmouseout="out('-3490103774513517076');" style="">1233      private void forceReload() {                                                                                  </span>
<span class="778547048286075437" onmouseenter="enter('778547048286075437');" onmouseout="out('778547048286075437');" style="">1234          resetLoadedState(true, true);                                                                             </span>
<span  style="">1235                                                                                                                    </span>
<span class="4237924176832789189" onmouseenter="enter('4237924176832789189');" onmouseout="out('4237924176832789189');" style="">1236          // Do this here because if the launcher activity is running it will be restarted.                         </span>
<span class="-3504249388484505584" onmouseenter="enter('-3504249388484505584');" onmouseout="out('-3504249388484505584');" style="">1237          // If it&#x27;s not running startLoaderFromBackground will merely tell it that it needs                        </span>
<span class="5637742608155670431" onmouseenter="enter('5637742608155670431');" onmouseout="out('5637742608155670431');" style="">1238          // to reload.                                                                                             </span>
<span class="-2236528095558531210" onmouseenter="enter('-2236528095558531210');" onmouseout="out('-2236528095558531210');" style="">1239          startLoaderFromBackground();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1240      }                                                                                                             </span>
<span  style="">1241                                                                                                                    </span>
<span class="-4293128577464776735" onmouseenter="enter('-4293128577464776735');" onmouseout="out('-4293128577464776735');" style="">1242      public void resetLoadedState(boolean resetAllAppsLoaded, boolean resetWorkspaceLoaded) {                      </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1243          synchronized (mLock) {                                                                                    </span>
<span class="-2609781935860166694" onmouseenter="enter('-2609781935860166694');" onmouseout="out('-2609781935860166694');" style="">1244              // Stop any existing loaders first, so they don&#x27;t set mAllAppsLoaded or                               </span>
<span class="1916843454374538934" onmouseenter="enter('1916843454374538934');" onmouseout="out('1916843454374538934');" style="">1245              // mWorkspaceLoaded to true later                                                                     </span>
<span class="-1528282254597569426" onmouseenter="enter('-1528282254597569426');" onmouseout="out('-1528282254597569426');" style="">1246              stopLoaderLocked();                                                                                   </span>
<span class="-4094161784675318974" onmouseenter="enter('-4094161784675318974');" onmouseout="out('-4094161784675318974');" style="">1247              if (resetAllAppsLoaded) mAllAppsLoaded = false;                                                       </span>
<span class="-3582216479388479825" onmouseenter="enter('-3582216479388479825');" onmouseout="out('-3582216479388479825');" style="">1248              if (resetWorkspaceLoaded) mWorkspaceLoaded = false;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1249          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1250      }                                                                                                             </span>
<span  style="">1251                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1252      /**                                                                                                           </span>
<span class="-2117548427273174966" onmouseenter="enter('-2117548427273174966');" onmouseout="out('-2117548427273174966');" style="">1253       * When the launcher is in the background, it&#x27;s possible for it to miss paired                                </span>
<span class="9045642034745197537" onmouseenter="enter('9045642034745197537');" onmouseout="out('9045642034745197537');" style="">1254       * configuration changes.  So whenever we trigger the loader from the background                              </span>
<span class="3717077838570548717" onmouseenter="enter('3717077838570548717');" onmouseout="out('3717077838570548717');" style="">1255       * tell the launcher that it needs to re-run the loader when it comes back instead                            </span>
<span class="8619803709595782118" onmouseenter="enter('8619803709595782118');" onmouseout="out('8619803709595782118');" style="">1256       * of doing it now.                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1257       */                                                                                                           </span>
<span class="2053805597450117019" onmouseenter="enter('2053805597450117019');" onmouseout="out('2053805597450117019');" style="">1258      public void startLoaderFromBackground() {                                                                     </span>
<span class="-3760886775206602162" onmouseenter="enter('-3760886775206602162');" onmouseout="out('-3760886775206602162');" style="">1259          boolean runLoader = false;                                                                                </span>
<span class="-1361400808929712677" onmouseenter="enter('-1361400808929712677');" onmouseout="out('-1361400808929712677');" style="">1260          if (mCallbacks != null) {                                                                                 </span>
<span class="-8182272400536278498" onmouseenter="enter('-8182272400536278498');" onmouseout="out('-8182272400536278498');" style="">1261              Callbacks callbacks = mCallbacks.get();                                                               </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">1262              if (callbacks != null) {                                                                              </span>
<span class="-8461765931128288918" onmouseenter="enter('-8461765931128288918');" onmouseout="out('-8461765931128288918');" style="">1263                  // Only actually run the loader if they&#x27;re not paused.                                            </span>
<span class="-462943306960371545" onmouseenter="enter('-462943306960371545');" onmouseout="out('-462943306960371545');" style="">1264                  if (!callbacks.setLoadOnResume()) {                                                               </span>
<span class="-8889848208331327581" onmouseenter="enter('-8889848208331327581');" onmouseout="out('-8889848208331327581');" style="">1265                      runLoader = true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1266                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1267              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1268          }                                                                                                         </span>
<span class="-2622291522100283788" onmouseenter="enter('-2622291522100283788');" onmouseout="out('-2622291522100283788');" style="">1269          if (runLoader) {                                                                                          </span>
<span class="-8998147482804817647" onmouseenter="enter('-8998147482804817647');" onmouseout="out('-8998147482804817647');" style="">1270              startLoader(false, PagedView.INVALID_RESTORE_PAGE);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1271          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1272      }                                                                                                             </span>
<span  style="">1273                                                                                                                    </span>
<span class="5010903034251856801" onmouseenter="enter('5010903034251856801');" onmouseout="out('5010903034251856801');" style="">1274      // If there is already a loader task running, tell it to stop.                                                </span>
<span class="796557558969242789" onmouseenter="enter('796557558969242789');" onmouseout="out('796557558969242789');" style="">1275      // returns true if isLaunching() was true on the old task                                                     </span>
<span class="-4581932122990216089" onmouseenter="enter('-4581932122990216089');" onmouseout="out('-4581932122990216089');" style="">1276      private boolean stopLoaderLocked() {                                                                          </span>
<span class="-998934784399408070" onmouseenter="enter('-998934784399408070');" onmouseout="out('-998934784399408070');" style="">1277          boolean isLaunching = false;                                                                              </span>
<span class="-7986438653599299764" onmouseenter="enter('-7986438653599299764');" onmouseout="out('-7986438653599299764');" style="">1278          LoaderTask oldTask = mLoaderTask;                                                                         </span>
<span class="-2859449282457612659" onmouseenter="enter('-2859449282457612659');" onmouseout="out('-2859449282457612659');" style="">1279          if (oldTask != null) {                                                                                    </span>
<span class="5507271139955657849" onmouseenter="enter('5507271139955657849');" onmouseout="out('5507271139955657849');" style="">1280              if (oldTask.isLaunching()) {                                                                          </span>
<span class="-2542349725897719409" onmouseenter="enter('-2542349725897719409');" onmouseout="out('-2542349725897719409');" style="">1281                  isLaunching = true;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1282              }                                                                                                     </span>
<span class="-1151918806087352732" onmouseenter="enter('-1151918806087352732');" onmouseout="out('-1151918806087352732');" style="">1283              oldTask.stopLocked();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1284          }                                                                                                         </span>
<span class="353443281501806148" onmouseenter="enter('353443281501806148');" onmouseout="out('353443281501806148');" style="">1285          return isLaunching;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1286      }                                                                                                             </span>
<span  style="">1287                                                                                                                    </span>
<span class="3837278165301095000" onmouseenter="enter('3837278165301095000');" onmouseout="out('3837278165301095000');" style="">1288      public void startLoader(boolean isLaunching, int synchronousBindPage) {                                       </span>
<span class="-5265370469502082000" onmouseenter="enter('-5265370469502082000');" onmouseout="out('-5265370469502082000');" style="">1289          startLoader(isLaunching, synchronousBindPage, LOADER_FLAG_NONE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1290      }                                                                                                             </span>
<span  style="">1291                                                                                                                    </span>
<span class="4886983231320039031" onmouseenter="enter('4886983231320039031');" onmouseout="out('4886983231320039031');" style="">1292      public void startLoader(boolean isLaunching, int synchronousBindPage, int loadFlags) {                        </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1293          synchronized (mLock) {                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1294              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="-3508213546782417324" onmouseenter="enter('-3508213546782417324');" onmouseout="out('-3508213546782417324');" style="">1295                  Log.d(TAG, &quot;startLoader isLaunching=&quot; + isLaunching);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1296              }                                                                                                     </span>
<span  style="">1297                                                                                                                    </span>
<span class="6333826815871699731" onmouseenter="enter('6333826815871699731');" onmouseout="out('6333826815871699731');" style="">1298              // Clear any deferred bind-runnables from the synchronized load process                               </span>
<span class="-7033809362198181476" onmouseenter="enter('-7033809362198181476');" onmouseout="out('-7033809362198181476');" style="">1299              // We must do this before any loading/binding is scheduled below.                                     </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1300              mDeferredBindRunnables.clear();                                                                       </span>
<span  style="">1301                                                                                                                    </span>
<span class="-2785438828901225561" onmouseenter="enter('-2785438828901225561');" onmouseout="out('-2785438828901225561');" style="">1302              // Don&#x27;t bother to start the thread if we know it&#x27;s not going to do anything                          </span>
<span class="-784058118581736702" onmouseenter="enter('-784058118581736702');" onmouseout="out('-784058118581736702');" style="">1303              if (mCallbacks != null &amp;&amp; mCallbacks.get() != null) {                                                 </span>
<span class="-5820527225743363271" onmouseenter="enter('-5820527225743363271');" onmouseout="out('-5820527225743363271');" style="">1304                  // If there is already one running, tell it to stop.                                              </span>
<span class="3990358955275755027" onmouseenter="enter('3990358955275755027');" onmouseout="out('3990358955275755027');" style="">1305                  // also, don&#x27;t downgrade isLaunching if we&#x27;re already running                                     </span>
<span class="-6024742637751579231" onmouseenter="enter('-6024742637751579231');" onmouseout="out('-6024742637751579231');" style="">1306                  isLaunching = isLaunching || stopLoaderLocked();                                                  </span>
<span class="7022676154060365524" onmouseenter="enter('7022676154060365524');" onmouseout="out('7022676154060365524');" style="">1307                  mLoaderTask = new LoaderTask(mApp.getContext(), isLaunching, loadFlags);                          </span>
<span class="1771251463067889729" onmouseenter="enter('1771251463067889729');" onmouseout="out('1771251463067889729');" style="">1308                  if (synchronousBindPage != PagedView.INVALID_RESTORE_PAGE                                         </span>
<span class="7049103546590409467" onmouseenter="enter('7049103546590409467');" onmouseout="out('7049103546590409467');" style="">1309                          &amp;&amp; mAllAppsLoaded &amp;&amp; mWorkspaceLoaded) {                                                  </span>
<span class="-8342371766149337044" onmouseenter="enter('-8342371766149337044');" onmouseout="out('-8342371766149337044');" style="">1310                      mLoaderTask.runBindSynchronousPage(synchronousBindPage);                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1311                  } else {                                                                                          </span>
<span class="-600387258114093875" onmouseenter="enter('-600387258114093875');" onmouseout="out('-600387258114093875');" style="">1312                      sWorkerThread.setPriority(Thread.NORM_PRIORITY);                                              </span>
<span class="7243935410050079045" onmouseenter="enter('7243935410050079045');" onmouseout="out('7243935410050079045');" style="">1313                      sWorker.post(mLoaderTask);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1314                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1315              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1316          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1317      }                                                                                                             </span>
<span  style="">1318                                                                                                                    </span>
<span class="8791491145548048370" onmouseenter="enter('8791491145548048370');" onmouseout="out('8791491145548048370');" style="">1319      void bindRemainingSynchronousPages() {                                                                        </span>
<span class="5033608739884582118" onmouseenter="enter('5033608739884582118');" onmouseout="out('5033608739884582118');" style="">1320          // Post the remaining side pages to be loaded                                                             </span>
<span class="-5332743236356375648" onmouseenter="enter('-5332743236356375648');" onmouseout="out('-5332743236356375648');" style="">1321          if (!mDeferredBindRunnables.isEmpty()) {                                                                  </span>
<span class="5296695443187413802" onmouseenter="enter('5296695443187413802');" onmouseout="out('5296695443187413802');" style="">1322              for (final Runnable r : mDeferredBindRunnables) {                                                     </span>
<span class="352794200584805787" onmouseenter="enter('352794200584805787');" onmouseout="out('352794200584805787');" style="">1323                  mHandler.post(r, MAIN_THREAD_BINDING_RUNNABLE);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1324              }                                                                                                     </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">1325              mDeferredBindRunnables.clear();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1326          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327      }                                                                                                             </span>
<span  style="">1328                                                                                                                    </span>
<span class="2340632222115195329" onmouseenter="enter('2340632222115195329');" onmouseout="out('2340632222115195329');" style="">1329      public void stopLoader() {                                                                                    </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1330          synchronized (mLock) {                                                                                    </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1331              if (mLoaderTask != null) {                                                                            </span>
<span class="-3264656657741930991" onmouseenter="enter('-3264656657741930991');" onmouseout="out('-3264656657741930991');" style="">1332                  mLoaderTask.stopLocked();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1333              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1334          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1335      }                                                                                                             </span>
<span  style="">1336                                                                                                                    </span>
<span class="-7250027300190670202" onmouseenter="enter('-7250027300190670202');" onmouseout="out('-7250027300190670202');" style="">1337      /** Loads the workspace screens db into a map of Rank -&gt; ScreenId */                                          </span>
<span class="122992606215727554" onmouseenter="enter('122992606215727554');" onmouseout="out('122992606215727554');" style="">1338      private static TreeMap&lt;Integer, Long&gt; loadWorkspaceScreensDb(Context context) {                               </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1339          final ContentResolver contentResolver = context.getContentResolver();                                     </span>
<span class="-2220596623746218138" onmouseenter="enter('-2220596623746218138');" onmouseout="out('-2220596623746218138');" style="">1340          final Uri screensUri = LauncherSettings.WorkspaceScreens.CONTENT_URI;                                     </span>
<span class="6273592658286011909" onmouseenter="enter('6273592658286011909');" onmouseout="out('6273592658286011909');" style="">1341          final Cursor sc = contentResolver.query(screensUri, null, null, null, null);                              </span>
<span class="-750342796873513708" onmouseenter="enter('-750342796873513708');" onmouseout="out('-750342796873513708');" style="">1342          TreeMap&lt;Integer, Long&gt; orderedScreens = new TreeMap&lt;Integer, Long&gt;();                                     </span>
<span  style="">1343                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1344          try {                                                                                                     </span>
<span class="-8175558610564469753" onmouseenter="enter('-8175558610564469753');" onmouseout="out('-8175558610564469753');" style="">1345              final int idIndex = sc.getColumnIndexOrThrow(                                                         </span>
<span class="-8946142257769661598" onmouseenter="enter('-8946142257769661598');" onmouseout="out('-8946142257769661598');" style="">1346                      LauncherSettings.WorkspaceScreens._ID);                                                       </span>
<span class="-8868089630781298600" onmouseenter="enter('-8868089630781298600');" onmouseout="out('-8868089630781298600');" style="">1347              final int rankIndex = sc.getColumnIndexOrThrow(                                                       </span>
<span class="5916017515631826997" onmouseenter="enter('5916017515631826997');" onmouseout="out('5916017515631826997');" style="">1348                      LauncherSettings.WorkspaceScreens.SCREEN_RANK);                                               </span>
<span class="204728523712198078" onmouseenter="enter('204728523712198078');" onmouseout="out('204728523712198078');" style="">1349              while (sc.moveToNext()) {                                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1350                  try {                                                                                             </span>
<span class="-3927530459574574291" onmouseenter="enter('-3927530459574574291');" onmouseout="out('-3927530459574574291');" style="">1351                      long screenId = sc.getLong(idIndex);                                                          </span>
<span class="4944528408544996755" onmouseenter="enter('4944528408544996755');" onmouseout="out('4944528408544996755');" style="">1352                      int rank = sc.getInt(rankIndex);                                                              </span>
<span class="3308047316092947062" onmouseenter="enter('3308047316092947062');" onmouseout="out('3308047316092947062');" style="">1353                      orderedScreens.put(rank, screenId);                                                           </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1354                  } catch (Exception e) {                                                                           </span>
<span class="-7912680121623740950" onmouseenter="enter('-7912680121623740950');" onmouseout="out('-7912680121623740950');" style="">1355                      Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted - invalid screens: &quot; + e, true);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1356                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1357              }                                                                                                     </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">1358          } finally {                                                                                               </span>
<span class="8048076729460304726" onmouseenter="enter('8048076729460304726');" onmouseout="out('8048076729460304726');" style="">1359              sc.close();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1360          }                                                                                                         </span>
<span  style="">1361                                                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1362          // Log to disk                                                                                            </span>
<span class="395286336309272035" onmouseenter="enter('395286336309272035');" onmouseout="out('395286336309272035');" style="">1363          Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspaceScreensDb()&quot;, true);                                    </span>
<span class="218635510720911915" onmouseenter="enter('218635510720911915');" onmouseout="out('218635510720911915');" style="">1364          ArrayList&lt;String&gt; orderedScreensPairs= new ArrayList&lt;String&gt;();                                           </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">1365          for (Integer i : orderedScreens.keySet()) {                                                               </span>
<span class="7491860136402808405" onmouseenter="enter('7491860136402808405');" onmouseout="out('7491860136402808405');" style="">1366              orderedScreensPairs.add(&quot;{ &quot; + i + &quot;: &quot; + orderedScreens.get(i) + &quot; }&quot;);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1367          }                                                                                                         </span>
<span class="-1337084683171534745" onmouseenter="enter('-1337084683171534745');" onmouseout="out('-1337084683171534745');" style="">1368          Launcher.addDumpLog(TAG, &quot;11683562 -   screens: &quot; +                                                       </span>
<span class="-2164573057986762020" onmouseenter="enter('-2164573057986762020');" onmouseout="out('-2164573057986762020');" style="">1369                  TextUtils.join(&quot;, &quot;, orderedScreensPairs), true);                                                 </span>
<span class="1470292219769535286" onmouseenter="enter('1470292219769535286');" onmouseout="out('1470292219769535286');" style="">1370          return orderedScreens;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1371      }                                                                                                             </span>
<span  style="">1372                                                                                                                    </span>
<span class="3555732154070898598" onmouseenter="enter('3555732154070898598');" onmouseout="out('3555732154070898598');" style="">1373      public boolean isAllAppsLoaded() {                                                                            </span>
<span class="-4479372220598901856" onmouseenter="enter('-4479372220598901856');" onmouseout="out('-4479372220598901856');" style="">1374          return mAllAppsLoaded;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1375      }                                                                                                             </span>
<span  style="">1376                                                                                                                    </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1377      boolean isLoadingWorkspace() {                                                                                </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1378          synchronized (mLock) {                                                                                    </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">1379              if (mLoaderTask != null) {                                                                            </span>
<span class="-8784543184221518678" onmouseenter="enter('-8784543184221518678');" onmouseout="out('-8784543184221518678');" style="">1380                  return mLoaderTask.isLoadingWorkspace();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1381              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1382          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1383          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1384      }                                                                                                             </span>
<span  style="">1385                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1386      /**                                                                                                           </span>
<span class="2155822975232422030" onmouseenter="enter('2155822975232422030');" onmouseout="out('2155822975232422030');" style="">1387       * Runnable for the thread that loads the contents of the launcher:                                           </span>
<span class="2245504796345070456" onmouseenter="enter('2245504796345070456');" onmouseout="out('2245504796345070456');" style="">1388       *   - workspace icons                                                                                        </span>
<span class="3748531824399873232" onmouseenter="enter('3748531824399873232');" onmouseout="out('3748531824399873232');" style="">1389       *   - widgets                                                                                                </span>
<span class="-1174287823865228312" onmouseenter="enter('-1174287823865228312');" onmouseout="out('-1174287823865228312');" style="">1390       *   - all apps icons                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1391       */                                                                                                           </span>
<span class="5152324394883908677" onmouseenter="enter('5152324394883908677');" onmouseout="out('5152324394883908677');" style="">1392      private class LoaderTask implements Runnable {                                                                </span>
<span class="6683852815807951473" onmouseenter="enter('6683852815807951473');" onmouseout="out('6683852815807951473');" style="">1393          private Context mContext;                                                                                 </span>
<span class="-8892613002903674576" onmouseenter="enter('-8892613002903674576');" onmouseout="out('-8892613002903674576');" style="">1394          private boolean mIsLaunching;                                                                             </span>
<span class="-8472062509666230595" onmouseenter="enter('-8472062509666230595');" onmouseout="out('-8472062509666230595');" style="">1395          private boolean mIsLoadingAndBindingWorkspace;                                                            </span>
<span class="840925515877441947" onmouseenter="enter('840925515877441947');" onmouseout="out('840925515877441947');" style="">1396          private boolean mStopped;                                                                                 </span>
<span class="-1108993435799622018" onmouseenter="enter('-1108993435799622018');" onmouseout="out('-1108993435799622018');" style="">1397          private boolean mLoadAndBindStepFinished;                                                                 </span>
<span class="2080823019438326837" onmouseenter="enter('2080823019438326837');" onmouseout="out('2080823019438326837');" style="">1398          private int mFlags;                                                                                       </span>
<span  style="">1399                                                                                                                    </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">1400          private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                                        </span>
<span  style="">1401                                                                                                                    </span>
<span class="-3637406926963361525" onmouseenter="enter('-3637406926963361525');" onmouseout="out('-3637406926963361525');" style="">1402          LoaderTask(Context context, boolean isLaunching, int flags) {                                             </span>
<span class="7260904205784329196" onmouseenter="enter('7260904205784329196');" onmouseout="out('7260904205784329196');" style="">1403              mContext = context;                                                                                   </span>
<span class="7512260519858493354" onmouseenter="enter('7512260519858493354');" onmouseout="out('7512260519858493354');" style="">1404              mIsLaunching = isLaunching;                                                                           </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">1405              mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                                    </span>
<span class="6183718553459964087" onmouseenter="enter('6183718553459964087');" onmouseout="out('6183718553459964087');" style="">1406              mFlags = flags;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1407          }                                                                                                         </span>
<span  style="">1408                                                                                                                    </span>
<span class="-3427713478562425776" onmouseenter="enter('-3427713478562425776');" onmouseout="out('-3427713478562425776');" style="">1409          boolean isLaunching() {                                                                                   </span>
<span class="-4684239236966951132" onmouseenter="enter('-4684239236966951132');" onmouseout="out('-4684239236966951132');" style="">1410              return mIsLaunching;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1411          }                                                                                                         </span>
<span  style="">1412                                                                                                                    </span>
<span class="-3362992225028300486" onmouseenter="enter('-3362992225028300486');" onmouseout="out('-3362992225028300486');" style="">1413          boolean isLoadingWorkspace() {                                                                            </span>
<span class="-1565626489511429864" onmouseenter="enter('-1565626489511429864');" onmouseout="out('-1565626489511429864');" style="">1414              return mIsLoadingAndBindingWorkspace;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1415          }                                                                                                         </span>
<span  style="">1416                                                                                                                    </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1417          /** Returns whether this is an upgrade path */                                                            </span>
<span class="-4912644643880785787" onmouseenter="enter('-4912644643880785787');" onmouseout="out('-4912644643880785787');" style="">1418          private boolean loadAndBindWorkspace() {                                                                  </span>
<span class="3221067006114111971" onmouseenter="enter('3221067006114111971');" onmouseout="out('3221067006114111971');" style="">1419              mIsLoadingAndBindingWorkspace = true;                                                                 </span>
<span  style="">1420                                                                                                                    </span>
<span class="1537270917172214589" onmouseenter="enter('1537270917172214589');" onmouseout="out('1537270917172214589');" style="">1421              // Load the workspace                                                                                 </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1422              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="8901273111544619292" onmouseenter="enter('8901273111544619292');" onmouseout="out('8901273111544619292');" style="">1423                  Log.d(TAG, &quot;loadAndBindWorkspace mWorkspaceLoaded=&quot; + mWorkspaceLoaded);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1424              }                                                                                                     </span>
<span  style="">1425                                                                                                                    </span>
<span class="-7050118912026035967" onmouseenter="enter('-7050118912026035967');" onmouseout="out('-7050118912026035967');" style="">1426              boolean isUpgradePath = false;                                                                        </span>
<span class="-6627511839388696673" onmouseenter="enter('-6627511839388696673');" onmouseout="out('-6627511839388696673');" style="">1427              if (!mWorkspaceLoaded) {                                                                              </span>
<span class="-5751837054227838000" onmouseenter="enter('-5751837054227838000');" onmouseout="out('-5751837054227838000');" style="">1428                  isUpgradePath = loadWorkspace();                                                                  </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1429                  synchronized (LoaderTask.this) {                                                                  </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1430                      if (mStopped) {                                                                               </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1431                          return isUpgradePath;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1432                      }                                                                                             </span>
<span class="3247008524984054391" onmouseenter="enter('3247008524984054391');" onmouseout="out('3247008524984054391');" style="">1433                      mWorkspaceLoaded = true;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1434                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1435              }                                                                                                     </span>
<span  style="">1436                                                                                                                    </span>
<span class="8161409494754485761" onmouseenter="enter('8161409494754485761');" onmouseout="out('8161409494754485761');" style="">1437              // Bind the workspace                                                                                 </span>
<span class="7984749853310309686" onmouseenter="enter('7984749853310309686');" onmouseout="out('7984749853310309686');" style="">1438              bindWorkspace(-1, isUpgradePath);                                                                     </span>
<span class="-2599579851753102041" onmouseenter="enter('-2599579851753102041');" onmouseout="out('-2599579851753102041');" style="">1439              return isUpgradePath;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1440          }                                                                                                         </span>
<span  style="">1441                                                                                                                    </span>
<span class="-1989226029052835978" onmouseenter="enter('-1989226029052835978');" onmouseout="out('-1989226029052835978');" style="">1442          private void waitForIdle() {                                                                              </span>
<span class="755597645611528735" onmouseenter="enter('755597645611528735');" onmouseout="out('755597645611528735');" style="">1443              // Wait until the either we&#x27;re stopped or the other threads are done.                                 </span>
<span class="-8727414813590658044" onmouseenter="enter('-8727414813590658044');" onmouseout="out('-8727414813590658044');" style="">1444              // This way we don&#x27;t start loading all apps until the workspace has settled                           </span>
<span class="519327046885180501" onmouseenter="enter('519327046885180501');" onmouseout="out('519327046885180501');" style="">1445              // down.                                                                                              </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1446              synchronized (LoaderTask.this) {                                                                      </span>
<span class="-83798755248439808" onmouseenter="enter('-83798755248439808');" onmouseout="out('-83798755248439808');" style="">1447                  final long workspaceWaitTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                    </span>
<span  style="">1448                                                                                                                    </span>
<span class="-8997106023930440912" onmouseenter="enter('-8997106023930440912');" onmouseout="out('-8997106023930440912');" style="">1449                  mHandler.postIdle(new Runnable() {                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1450                          public void run() {                                                                       </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1451                              synchronized (LoaderTask.this) {                                                      </span>
<span class="-4593766760064909367" onmouseenter="enter('-4593766760064909367');" onmouseout="out('-4593766760064909367');" style="">1452                                  mLoadAndBindStepFinished = true;                                                  </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1453                                  if (DEBUG_LOADERS) {                                                              </span>
<span class="-7140275656523627984" onmouseenter="enter('-7140275656523627984');" onmouseout="out('-7140275656523627984');" style="">1454                                      Log.d(TAG, &quot;done with previous binding step&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1455                                  }                                                                                 </span>
<span class="8111819661104992685" onmouseenter="enter('8111819661104992685');" onmouseout="out('8111819661104992685');" style="">1456                                  LoaderTask.this.notify();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1457                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1458                          }                                                                                         </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1459                      });                                                                                           </span>
<span  style="">1460                                                                                                                    </span>
<span class="7673579852599691461" onmouseenter="enter('7673579852599691461');" onmouseout="out('7673579852599691461');" style="">1461                  while (!mStopped &amp;&amp; !mLoadAndBindStepFinished &amp;&amp; !mFlushingWorkerThread) {                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1462                      try {                                                                                         </span>
<span class="-1997675543177729859" onmouseenter="enter('-1997675543177729859');" onmouseout="out('-1997675543177729859');" style="">1463                          // Just in case mFlushingWorkerThread changes but we aren&#x27;t woken up,                     </span>
<span class="4998753984474875942" onmouseenter="enter('4998753984474875942');" onmouseout="out('4998753984474875942');" style="">1464                          // wait no longer than 1sec at a time                                                     </span>
<span class="1515790047903299628" onmouseenter="enter('1515790047903299628');" onmouseout="out('1515790047903299628');" style="">1465                          this.wait(1000);                                                                          </span>
<span class="3493957724480568133" onmouseenter="enter('3493957724480568133');" onmouseout="out('3493957724480568133');" style="">1466                      } catch (InterruptedException ex) {                                                           </span>
<span class="-1642344425252950446" onmouseenter="enter('-1642344425252950446');" onmouseout="out('-1642344425252950446');" style="">1467                          // Ignore                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1468                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1469                  }                                                                                                 </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">1470                  if (DEBUG_LOADERS) {                                                                              </span>
<span class="-72139740866353106" onmouseenter="enter('-72139740866353106');" onmouseout="out('-72139740866353106');" style="">1471                      Log.d(TAG, &quot;waited &quot;                                                                          </span>
<span class="3094974955332165680" onmouseenter="enter('3094974955332165680');" onmouseout="out('3094974955332165680');" style="">1472                              + (SystemClock.uptimeMillis()-workspaceWaitTime)                                      </span>
<span class="4719480645001782920" onmouseenter="enter('4719480645001782920');" onmouseout="out('4719480645001782920');" style="">1473                              + &quot;ms for previous step to finish binding&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1474                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1475              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1476          }                                                                                                         </span>
<span  style="">1477                                                                                                                    </span>
<span class="6003497491863497289" onmouseenter="enter('6003497491863497289');" onmouseout="out('6003497491863497289');" style="">1478          void runBindSynchronousPage(int synchronousBindPage) {                                                    </span>
<span class="26631348189854486" onmouseenter="enter('26631348189854486');" onmouseout="out('26631348189854486');" style="">1479              if (synchronousBindPage == PagedView.INVALID_RESTORE_PAGE) {                                          </span>
<span class="-8503902330989669437" onmouseenter="enter('-8503902330989669437');" onmouseout="out('-8503902330989669437');" style="">1480                  // Ensure that we have a valid page index to load synchronously                                   </span>
<span class="4351877111278684588" onmouseenter="enter('4351877111278684588');" onmouseout="out('4351877111278684588');" style="">1481                  throw new RuntimeException(&quot;Should not call runBindSynchronousPage() without &quot; +                  </span>
<span class="-7231071987017264740" onmouseenter="enter('-7231071987017264740');" onmouseout="out('-7231071987017264740');" style="">1482                          &quot;valid page index&quot;);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1483              }                                                                                                     </span>
<span class="-1078848978706070277" onmouseenter="enter('-1078848978706070277');" onmouseout="out('-1078848978706070277');" style="">1484              if (!mAllAppsLoaded || !mWorkspaceLoaded) {                                                           </span>
<span class="2879437365312389694" onmouseenter="enter('2879437365312389694');" onmouseout="out('2879437365312389694');" style="">1485                  // Ensure that we don&#x27;t try and bind a specified page when the pages have not been                </span>
<span class="169159946226030638" onmouseenter="enter('169159946226030638');" onmouseout="out('169159946226030638');" style="">1486                  // loaded already (we should load everything asynchronously in that case)                         </span>
<span class="2803547673173241327" onmouseenter="enter('2803547673173241327');" onmouseout="out('2803547673173241327');" style="">1487                  throw new RuntimeException(&quot;Expecting AllApps and Workspace to be loaded&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1488              }                                                                                                     </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1489              synchronized (mLock) {                                                                                </span>
<span class="6834879657722268045" onmouseenter="enter('6834879657722268045');" onmouseout="out('6834879657722268045');" style="">1490                  if (mIsLoaderTaskRunning) {                                                                       </span>
<span class="3479473486057258175" onmouseenter="enter('3479473486057258175');" onmouseout="out('3479473486057258175');" style="">1491                      // Ensure that we are never running the background loading at this point since                </span>
<span class="5690931735845958615" onmouseenter="enter('5690931735845958615');" onmouseout="out('5690931735845958615');" style="">1492                      // we also touch the background collections                                                   </span>
<span class="-8789687649412956769" onmouseenter="enter('-8789687649412956769');" onmouseout="out('-8789687649412956769');" style="">1493                      throw new RuntimeException(&quot;Error! Background loading is already running&quot;);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1494                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1495              }                                                                                                     </span>
<span  style="">1496                                                                                                                    </span>
<span class="4081886748823582405" onmouseenter="enter('4081886748823582405');" onmouseout="out('4081886748823582405');" style="">1497              // XXX: Throw an exception if we are already loading (since we touch the worker thread                </span>
<span class="-98490365064007765" onmouseenter="enter('-98490365064007765');" onmouseout="out('-98490365064007765');" style="">1498              //      data structures, we can&#x27;t allow any other thread to touch that data, but because              </span>
<span class="4680477662519922026" onmouseenter="enter('4680477662519922026');" onmouseout="out('4680477662519922026');" style="">1499              //      this call is synchronous, we can get away with not locking).                                  </span>
<span  style="">1500                                                                                                                    </span>
<span class="-6012373927983533730" onmouseenter="enter('-6012373927983533730');" onmouseout="out('-6012373927983533730');" style="">1501              // The LauncherModel is static in the LauncherAppState and mHandler may have queued                   </span>
<span class="7586418927072898518" onmouseenter="enter('7586418927072898518');" onmouseout="out('7586418927072898518');" style="">1502              // operations from the previous activity.  We need to ensure that all queued operations               </span>
<span class="-70743228311848279" onmouseenter="enter('-70743228311848279');" onmouseout="out('-70743228311848279');" style="">1503              // are executed before any synchronous binding work is done.                                          </span>
<span class="-4498008587479034521" onmouseenter="enter('-4498008587479034521');" onmouseout="out('-4498008587479034521');" style="">1504              mHandler.flush();                                                                                     </span>
<span  style="">1505                                                                                                                    </span>
<span class="-3771221013488357479" onmouseenter="enter('-3771221013488357479');" onmouseout="out('-3771221013488357479');" style="">1506              // Divide the set of loaded items into those that we are binding synchronously, and                   </span>
<span class="5224432435633178726" onmouseenter="enter('5224432435633178726');" onmouseout="out('5224432435633178726');" style="">1507              // everything else that is to be bound normally (asynchronously).                                     </span>
<span class="-6685180061336045314" onmouseenter="enter('-6685180061336045314');" onmouseout="out('-6685180061336045314');" style="">1508              bindWorkspace(synchronousBindPage, false);                                                            </span>
<span class="6689685850222943783" onmouseenter="enter('6689685850222943783');" onmouseout="out('6689685850222943783');" style="">1509              // XXX: For now, continue posting the binding of AllApps as there are other issues that               </span>
<span class="-1574502332056641514" onmouseenter="enter('-1574502332056641514');" onmouseout="out('-1574502332056641514');" style="">1510              //      arise from that.                                                                              </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">1511              onlyBindAllApps();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1512          }                                                                                                         </span>
<span  style="">1513                                                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1514          public void run() {                                                                                       </span>
<span class="5752535899438246447" onmouseenter="enter('5752535899438246447');" onmouseout="out('5752535899438246447');" style="">1515              boolean isUpgrade = false;                                                                            </span>
<span  style="">1516                                                                                                                    </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1517              synchronized (mLock) {                                                                                </span>
<span class="4738665752688002399" onmouseenter="enter('4738665752688002399');" onmouseout="out('4738665752688002399');" style="">1518                  mIsLoaderTaskRunning = true;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1519              }                                                                                                     </span>
<span class="-1737494436521525410" onmouseenter="enter('-1737494436521525410');" onmouseout="out('-1737494436521525410');" style="">1520              // Optimize for end-user experience: if the Launcher is up and // running with the                    </span>
<span class="892988660615454533" onmouseenter="enter('892988660615454533');" onmouseout="out('892988660615454533');" style="">1521              // All Apps interface in the foreground, load All Apps first. Otherwise, load the                     </span>
<span class="-1944482210197593446" onmouseenter="enter('-1944482210197593446');" onmouseout="out('-1944482210197593446');" style="">1522              // workspace first (default).                                                                         </span>
<span class="-8128861992085659189" onmouseenter="enter('-8128861992085659189');" onmouseout="out('-8128861992085659189');" style="">1523              keep_running: {                                                                                       </span>
<span class="2293067736949718284" onmouseenter="enter('2293067736949718284');" onmouseout="out('2293067736949718284');" style="">1524                  // Elevate priority when Home launches for the first time to avoid                                </span>
<span class="-1381926741216219064" onmouseenter="enter('-1381926741216219064');" onmouseout="out('-1381926741216219064');" style="">1525                  // starving at boot time. Staring at a blank home is not cool.                                    </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1526                  synchronized (mLock) {                                                                            </span>
<span class="8946499537685848583" onmouseenter="enter('8946499537685848583');" onmouseout="out('8946499537685848583');" style="">1527                      if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to &quot; +                                 </span>
<span class="1787109731546912352" onmouseenter="enter('1787109731546912352');" onmouseout="out('1787109731546912352');" style="">1528                              (mIsLaunching ? &quot;DEFAULT&quot; : &quot;BACKGROUND&quot;));                                           </span>
<span class="-1912109441925598991" onmouseenter="enter('-1912109441925598991');" onmouseout="out('-1912109441925598991');" style="">1529                      android.os.Process.setThreadPriority(mIsLaunching                                             </span>
<span class="-5572949467661441178" onmouseenter="enter('-5572949467661441178');" onmouseout="out('-5572949467661441178');" style="">1530                              ? Process.THREAD_PRIORITY_DEFAULT : Process.THREAD_PRIORITY_BACKGROUND);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1531                  }                                                                                                 </span>
<span class="9220749004793568337" onmouseenter="enter('9220749004793568337');" onmouseout="out('9220749004793568337');" style="">1532                  if (DEBUG_LOADERS) Log.d(TAG, &quot;step 1: loading workspace&quot;);                                       </span>
<span class="8482653655407072483" onmouseenter="enter('8482653655407072483');" onmouseout="out('8482653655407072483');" style="">1533                  isUpgrade = loadAndBindWorkspace();                                                               </span>
<span  style="">1534                                                                                                                    </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1535                  if (mStopped) {                                                                                   </span>
<span class="-6818805659412975442" onmouseenter="enter('-6818805659412975442');" onmouseout="out('-6818805659412975442');" style="">1536                      break keep_running;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1537                  }                                                                                                 </span>
<span  style="">1538                                                                                                                    </span>
<span class="-5777092162251517407" onmouseenter="enter('-5777092162251517407');" onmouseout="out('-5777092162251517407');" style="">1539                  // Whew! Hard work done.  Slow us down, and wait until the UI thread has                          </span>
<span class="-4075896614387769686" onmouseenter="enter('-4075896614387769686');" onmouseout="out('-4075896614387769686');" style="">1540                  // settled down.                                                                                  </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1541                  synchronized (mLock) {                                                                            </span>
<span class="1926990202484285414" onmouseenter="enter('1926990202484285414');" onmouseout="out('1926990202484285414');" style="">1542                      if (mIsLaunching) {                                                                           </span>
<span class="-8046035155088057723" onmouseenter="enter('-8046035155088057723');" onmouseout="out('-8046035155088057723');" style="">1543                          if (DEBUG_LOADERS) Log.d(TAG, &quot;Setting thread priority to BACKGROUND&quot;);                   </span>
<span class="6194754511830950532" onmouseenter="enter('6194754511830950532');" onmouseout="out('6194754511830950532');" style="">1544                          android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1545                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1546                  }                                                                                                 </span>
<span class="2443484392604792624" onmouseenter="enter('2443484392604792624');" onmouseout="out('2443484392604792624');" style="">1547                  waitForIdle();                                                                                    </span>
<span  style="">1548                                                                                                                    </span>
<span class="1529750222663563109" onmouseenter="enter('1529750222663563109');" onmouseout="out('1529750222663563109');" style="">1549                  // second step                                                                                    </span>
<span class="4805812105190008803" onmouseenter="enter('4805812105190008803');" onmouseout="out('4805812105190008803');" style="">1550                  if (DEBUG_LOADERS) Log.d(TAG, &quot;step 2: loading all apps&quot;);                                        </span>
<span class="3758302759319518479" onmouseenter="enter('3758302759319518479');" onmouseout="out('3758302759319518479');" style="">1551                  loadAndBindAllApps();                                                                             </span>
<span  style="">1552                                                                                                                    </span>
<span class="4031538869478111" onmouseenter="enter('4031538869478111');" onmouseout="out('4031538869478111');" style="">1553                  // Restore the default thread priority after we are done loading items                            </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1554                  synchronized (mLock) {                                                                            </span>
<span class="6299511964324687923" onmouseenter="enter('6299511964324687923');" onmouseout="out('6299511964324687923');" style="">1555                      android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_DEFAULT);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1556                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1557              }                                                                                                     </span>
<span  style="">1558                                                                                                                    </span>
<span class="3508545587953199453" onmouseenter="enter('3508545587953199453');" onmouseout="out('3508545587953199453');" style="">1559              // Update the saved icons if necessary                                                                </span>
<span class="-4757805943857079956" onmouseenter="enter('-4757805943857079956');" onmouseout="out('-4757805943857079956');" style="">1560              if (DEBUG_LOADERS) Log.d(TAG, &quot;Comparing loaded icons to database icons&quot;);                            </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1561              synchronized (sBgLock) {                                                                              </span>
<span class="5900553346724410681" onmouseenter="enter('5900553346724410681');" onmouseout="out('5900553346724410681');" style="">1562                  for (Object key : sBgDbIconCache.keySet()) {                                                      </span>
<span class="404633043401473554" onmouseenter="enter('404633043401473554');" onmouseout="out('404633043401473554');" style="">1563                      updateSavedIcon(mContext, (ShortcutInfo) key, sBgDbIconCache.get(key));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1564                  }                                                                                                 </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1565                  sBgDbIconCache.clear();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1566              }                                                                                                     </span>
<span  style="">1567                                                                                                                    </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">1568              if (LauncherAppState.isDisableAllApps()) {                                                            </span>
<span class="6125270178763735331" onmouseenter="enter('6125270178763735331');" onmouseout="out('6125270178763735331');" style="">1569                  // Ensure that all the applications that are in the system are                                    </span>
<span class="305725628855266005" onmouseenter="enter('305725628855266005');" onmouseout="out('305725628855266005');" style="">1570                  // represented on the home screen.                                                                </span>
<span class="3562864863119627268" onmouseenter="enter('3562864863119627268');" onmouseout="out('3562864863119627268');" style="">1571                  if (!UPGRADE_USE_MORE_APPS_FOLDER || !isUpgrade) {                                                </span>
<span class="5095093339904195112" onmouseenter="enter('5095093339904195112');" onmouseout="out('5095093339904195112');" style="">1572                      verifyApplications();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1573                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1574              }                                                                                                     </span>
<span  style="">1575                                                                                                                    </span>
<span class="-745190257815883733" onmouseenter="enter('-745190257815883733');" onmouseout="out('-745190257815883733');" style="">1576              // Clear out this reference, otherwise we end up holding it until all of the                          </span>
<span class="4646172956484107396" onmouseenter="enter('4646172956484107396');" onmouseout="out('4646172956484107396');" style="">1577              // callback runnables are done.                                                                       </span>
<span class="-5116782011037529434" onmouseenter="enter('-5116782011037529434');" onmouseout="out('-5116782011037529434');" style="">1578              mContext = null;                                                                                      </span>
<span  style="">1579                                                                                                                    </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1580              synchronized (mLock) {                                                                                </span>
<span class="-2953553521466488464" onmouseenter="enter('-2953553521466488464');" onmouseout="out('-2953553521466488464');" style="">1581                  // If we are still the last one to be scheduled, remove ourselves.                                </span>
<span class="-1560897046285527036" onmouseenter="enter('-1560897046285527036');" onmouseout="out('-1560897046285527036');" style="">1582                  if (mLoaderTask == this) {                                                                        </span>
<span class="-8540970856372433004" onmouseenter="enter('-8540970856372433004');" onmouseout="out('-8540970856372433004');" style="">1583                      mLoaderTask = null;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1584                  }                                                                                                 </span>
<span class="8472658350888958885" onmouseenter="enter('8472658350888958885');" onmouseout="out('8472658350888958885');" style="">1585                  mIsLoaderTaskRunning = false;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1586              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1587          }                                                                                                         </span>
<span  style="">1588                                                                                                                    </span>
<span class="200135487053889456" onmouseenter="enter('200135487053889456');" onmouseout="out('200135487053889456');" style="">1589          public void stopLocked() {                                                                                </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">1590              synchronized (LoaderTask.this) {                                                                      </span>
<span class="8214677179915027824" onmouseenter="enter('8214677179915027824');" onmouseout="out('8214677179915027824');" style="">1591                  mStopped = true;                                                                                  </span>
<span class="3056713147428312392" onmouseenter="enter('3056713147428312392');" onmouseout="out('3056713147428312392');" style="">1592                  this.notify();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1593              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1594          }                                                                                                         </span>
<span  style="">1595                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1596          /**                                                                                                       </span>
<span class="8543020973836575883" onmouseenter="enter('8543020973836575883');" onmouseout="out('8543020973836575883');" style="">1597           * Gets the callbacks object.  If we&#x27;ve been stopped, or if the launcher object                           </span>
<span class="-5710779889390340322" onmouseenter="enter('-5710779889390340322');" onmouseout="out('-5710779889390340322');" style="">1598           * has somehow been garbage collected, return null instead.  Pass in the Callbacks                        </span>
<span class="1695163395735776366" onmouseenter="enter('1695163395735776366');" onmouseout="out('1695163395735776366');" style="">1599           * object that was around when the deferred message was scheduled, and if there&#x27;s                         </span>
<span class="7856411153887025232" onmouseenter="enter('7856411153887025232');" onmouseout="out('7856411153887025232');" style="">1600           * a new Callbacks object around then also return null.  This will save us from                           </span>
<span class="2242983124447893975" onmouseenter="enter('2242983124447893975');" onmouseout="out('2242983124447893975');" style="">1601           * calling onto it with data that will be ignored.                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1602           */                                                                                                       </span>
<span class="-2719659093140206912" onmouseenter="enter('-2719659093140206912');" onmouseout="out('-2719659093140206912');" style="">1603          Callbacks tryGetCallbacks(Callbacks oldCallbacks) {                                                       </span>
<span class="2284836950602155672" onmouseenter="enter('2284836950602155672');" onmouseout="out('2284836950602155672');" style="">1604              synchronized (mLock) {                                                                                </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">1605                  if (mStopped) {                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1606                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1607                  }                                                                                                 </span>
<span  style="">1608                                                                                                                    </span>
<span class="-1148437149844317216" onmouseenter="enter('-1148437149844317216');" onmouseout="out('-1148437149844317216');" style="">1609                  if (mCallbacks == null) {                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1610                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1611                  }                                                                                                 </span>
<span  style="">1612                                                                                                                    </span>
<span class="4487336468213395696" onmouseenter="enter('4487336468213395696');" onmouseout="out('4487336468213395696');" style="">1613                  final Callbacks callbacks = mCallbacks.get();                                                     </span>
<span class="-1088473782403214817" onmouseenter="enter('-1088473782403214817');" onmouseout="out('-1088473782403214817');" style="">1614                  if (callbacks != oldCallbacks) {                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1615                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1616                  }                                                                                                 </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">1617                  if (callbacks == null) {                                                                          </span>
<span class="-94531209925935523" onmouseenter="enter('-94531209925935523');" onmouseout="out('-94531209925935523');" style="">1618                      Log.w(TAG, &quot;no mCallbacks&quot;);                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1619                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1620                  }                                                                                                 </span>
<span  style="">1621                                                                                                                    </span>
<span class="7316466478630645098" onmouseenter="enter('7316466478630645098');" onmouseout="out('7316466478630645098');" style="">1622                  return callbacks;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1623              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1624          }                                                                                                         </span>
<span  style="">1625                                                                                                                    </span>
<span class="-732845747997402687" onmouseenter="enter('-732845747997402687');" onmouseout="out('-732845747997402687');" style="">1626          private void verifyApplications() {                                                                       </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">1627              final Context context = mApp.getContext();                                                            </span>
<span  style="">1628                                                                                                                    </span>
<span class="-895975897487385508" onmouseenter="enter('-895975897487385508');" onmouseout="out('-895975897487385508');" style="">1629              // Cross reference all the applications in our apps list with items in the workspace                  </span>
<span class="-10165714367555844" onmouseenter="enter('-10165714367555844');" onmouseout="out('-10165714367555844');" style="">1630              ArrayList&lt;ItemInfo&gt; tmpInfos;                                                                         </span>
<span class="-1498611641211142735" onmouseenter="enter('-1498611641211142735');" onmouseout="out('-1498611641211142735');" style="">1631              ArrayList&lt;ItemInfo&gt; added = new ArrayList&lt;ItemInfo&gt;();                                                </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1632              synchronized (sBgLock) {                                                                              </span>
<span class="-8503045385813305184" onmouseenter="enter('-8503045385813305184');" onmouseout="out('-8503045385813305184');" style="">1633                  for (AppInfo app : mBgAllAppsList.data) {                                                         </span>
<span class="8719756079786944918" onmouseenter="enter('8719756079786944918');" onmouseout="out('8719756079786944918');" style="">1634                      tmpInfos = getItemInfoForComponentName(app.componentName);                                    </span>
<span class="2520781471180992241" onmouseenter="enter('2520781471180992241');" onmouseout="out('2520781471180992241');" style="">1635                      if (tmpInfos.isEmpty()) {                                                                     </span>
<span class="-8553694446545507920" onmouseenter="enter('-8553694446545507920');" onmouseout="out('-8553694446545507920');" style="">1636                          // We are missing an application icon, so add this to the workspace                       </span>
<span class="-4039639638749761552" onmouseenter="enter('-4039639638749761552');" onmouseout="out('-4039639638749761552');" style="">1637                          added.add(app);                                                                           </span>
<span class="-6087209586339664607" onmouseenter="enter('-6087209586339664607');" onmouseout="out('-6087209586339664607');" style="">1638                          // This is a rare event, so lets log it                                                   </span>
<span class="-8409193735080295855" onmouseenter="enter('-8409193735080295855');" onmouseout="out('-8409193735080295855');" style="">1639                          Log.e(TAG, &quot;Missing Application on load: &quot; + app);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1640                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1641                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1642              }                                                                                                     </span>
<span class="-3228275885243238792" onmouseenter="enter('-3228275885243238792');" onmouseout="out('-3228275885243238792');" style="">1643              if (!added.isEmpty()) {                                                                               </span>
<span class="-2532202186705808951" onmouseenter="enter('-2532202186705808951');" onmouseout="out('-2532202186705808951');" style="">1644                  addAndBindAddedWorkspaceApps(context, added);                                                     </span>


<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1645              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1646          }                                                                                                         </span>
<span  style="">1647                                                                                                                    </span>
<span class="1799876722918383990" onmouseenter="enter('1799876722918383990');" onmouseout="out('1799876722918383990');" style="">1648          // check &amp; update map of what&#x27;s occupied; used to discard overlapping/invalid items                       </span>
<span class="1369641317894879083" onmouseenter="enter('1369641317894879083');" onmouseout="out('1369641317894879083');" style="">1649          private boolean checkItemPlacement(HashMap&lt;Long, ItemInfo[][]&gt; occupied, ItemInfo item,                   </span>
<span class="-1114457745240921120" onmouseenter="enter('-1114457745240921120');" onmouseout="out('-1114457745240921120');" style="">1650                                             AtomicBoolean deleteOnInvalidPlacement) {                              </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1651              LauncherAppState app = LauncherAppState.getInstance();                                                </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1652              DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                         </span>
<span class="2610967815704817337" onmouseenter="enter('2610967815704817337');" onmouseout="out('2610967815704817337');" style="">1653              final int countX = (int) grid.numColumns;                                                             </span>
<span class="-4666114634626787340" onmouseenter="enter('-4666114634626787340');" onmouseout="out('-4666114634626787340');" style="">1654              final int countY = (int) grid.numRows;                                                                </span>
<span  style="">1655                                                                                                                    </span>
<span class="6034161250987228772" onmouseenter="enter('6034161250987228772');" onmouseout="out('6034161250987228772');" style="">1656              long containerIndex = item.screenId;                                                                  </span>
<span class="-7373493273183889597" onmouseenter="enter('-7373493273183889597');" onmouseout="out('-7373493273183889597');" style="">1657              if (item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                                 </span>
<span class="2673995963777381740" onmouseenter="enter('2673995963777381740');" onmouseout="out('2673995963777381740');" style="">1658                  // Return early if we detect that an item is under the hotseat button                             </span>
<span class="8439501161968406722" onmouseenter="enter('8439501161968406722');" onmouseout="out('8439501161968406722');" style="">1659                  if (mCallbacks == null ||                                                                         </span>
<span class="2765367117287235525" onmouseenter="enter('2765367117287235525');" onmouseout="out('2765367117287235525');" style="">1660                          mCallbacks.get().isAllAppsButtonRank((int) item.screenId)) {                              </span>
<span class="-5585792196891628830" onmouseenter="enter('-5585792196891628830');" onmouseout="out('-5585792196891628830');" style="">1661                      deleteOnInvalidPlacement.set(true);                                                           </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1662                      Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                                      </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1663                              + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;                         </span>
<span class="-6945266911057923165" onmouseenter="enter('-6945266911057923165');" onmouseout="out('-6945266911057923165');" style="">1664                              + item.cellY + &quot;) occupied by all apps&quot;);                                             </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1665                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1666                  }                                                                                                 </span>
<span  style="">1667                                                                                                                    </span>
<span class="1283283798458548935" onmouseenter="enter('1283283798458548935');" onmouseout="out('1283283798458548935');" style="">1668                  final ItemInfo[][] hotseatItems =                                                                 </span>
<span class="1949963606333422560" onmouseenter="enter('1949963606333422560');" onmouseout="out('1949963606333422560');" style="">1669                          occupied.get((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT);                        </span>
<span  style="">1670                                                                                                                    </span>
<span class="4306415300339150674" onmouseenter="enter('4306415300339150674');" onmouseout="out('4306415300339150674');" style="">1671                  if (item.screenId &gt;= grid.numHotseatIcons) {                                                      </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1672                      Log.e(TAG, &quot;Error loading shortcut &quot; + item                                                   </span>
<span class="5751503886607422325" onmouseenter="enter('5751503886607422325');" onmouseout="out('5751503886607422325');" style="">1673                              + &quot; into hotseat position &quot; + item.screenId                                           </span>
<span class="8586084608145250937" onmouseenter="enter('8586084608145250937');" onmouseout="out('8586084608145250937');" style="">1674                              + &quot;, position out of bounds: (0 to &quot; + (grid.numHotseatIcons - 1)                     </span>
<span class="4670108460576455524" onmouseenter="enter('4670108460576455524');" onmouseout="out('4670108460576455524');" style="">1675                              + &quot;)&quot;);                                                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1676                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1677                  }                                                                                                 </span>
<span  style="">1678                                                                                                                    </span>
<span class="-96711597696201103" onmouseenter="enter('-96711597696201103');" onmouseout="out('-96711597696201103');" style="">1679                  if (hotseatItems != null) {                                                                       </span>
<span class="-5719492878362044891" onmouseenter="enter('-5719492878362044891');" onmouseout="out('-5719492878362044891');" style="">1680                      if (hotseatItems[(int) item.screenId][0] != null) {                                           </span>
<span class="7538713286954824926" onmouseenter="enter('7538713286954824926');" onmouseout="out('7538713286954824926');" style="">1681                          Log.e(TAG, &quot;Error loading shortcut into hotseat &quot; + item                                  </span>
<span class="-5060169663915819429" onmouseenter="enter('-5060169663915819429');" onmouseout="out('-5060169663915819429');" style="">1682                                  + &quot; into position (&quot; + item.screenId + &quot;:&quot; + item.cellX + &quot;,&quot;                     </span>
<span class="-5608765342526697238" onmouseenter="enter('-5608765342526697238');" onmouseout="out('-5608765342526697238');" style="">1683                                  + item.cellY + &quot;) occupied by &quot;                                                   </span>
<span class="-9216450188742256868" onmouseenter="enter('-9216450188742256868');" onmouseout="out('-9216450188742256868');" style="">1684                                  + occupied.get(LauncherSettings.Favorites.CONTAINER_HOTSEAT)                      </span>
<span class="8078550196904492215" onmouseenter="enter('8078550196904492215');" onmouseout="out('8078550196904492215');" style="">1685                                  [(int) item.screenId][0]);                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1686                              return false;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1687                      } else {                                                                                      </span>
<span class="774944626646586019" onmouseenter="enter('774944626646586019');" onmouseout="out('774944626646586019');" style="">1688                          hotseatItems[(int) item.screenId][0] = item;                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1689                          return true;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1690                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1691                  } else {                                                                                          </span>
<span class="7358314474516221203" onmouseenter="enter('7358314474516221203');" onmouseout="out('7358314474516221203');" style="">1692                      final ItemInfo[][] items = new ItemInfo[(int) grid.numHotseatIcons][1];                       </span>
<span class="-9070162012537345427" onmouseenter="enter('-9070162012537345427');" onmouseout="out('-9070162012537345427');" style="">1693                      items[(int) item.screenId][0] = item;                                                         </span>
<span class="-8158366679753027651" onmouseenter="enter('-8158366679753027651');" onmouseout="out('-8158366679753027651');" style="">1694                      occupied.put((long) LauncherSettings.Favorites.CONTAINER_HOTSEAT, items);                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1695                      return true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1696                  }                                                                                                 </span>
<span class="-303831338253138618" onmouseenter="enter('-303831338253138618');" onmouseout="out('-303831338253138618');" style="">1697              } else if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) {                          </span>
<span class="2023083187637338837" onmouseenter="enter('2023083187637338837');" onmouseout="out('2023083187637338837');" style="">1698                  // Skip further checking if it is not the hotseat or workspace container                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1699                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1700              }                                                                                                     </span>
<span  style="">1701                                                                                                                    </span>
<span class="4900594953050523912" onmouseenter="enter('4900594953050523912');" onmouseout="out('4900594953050523912');" style="">1702              if (!occupied.containsKey(item.screenId)) {                                                           </span>
<span class="4145930087010840378" onmouseenter="enter('4145930087010840378');" onmouseout="out('4145930087010840378');" style="">1703                  ItemInfo[][] items = new ItemInfo[countX + 1][countY + 1];                                        </span>
<span class="1227421706021504577" onmouseenter="enter('1227421706021504577');" onmouseout="out('1227421706021504577');" style="">1704                  occupied.put(item.screenId, items);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1705              }                                                                                                     </span>
<span  style="">1706                                                                                                                    </span>
<span class="1896300602190974138" onmouseenter="enter('1896300602190974138');" onmouseout="out('1896300602190974138');" style="">1707              final ItemInfo[][] screens = occupied.get(item.screenId);                                             </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">1708              if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                                 </span>
<span class="-5368423457014206987" onmouseenter="enter('-5368423457014206987');" onmouseout="out('-5368423457014206987');" style="">1709                      item.cellX &lt; 0 || item.cellY &lt; 0 ||                                                           </span>
<span class="-4742334469567284144" onmouseenter="enter('-4742334469567284144');" onmouseout="out('-4742334469567284144');" style="">1710                      item.cellX + item.spanX &gt; countX || item.cellY + item.spanY &gt; countY) {                       </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1711                  Log.e(TAG, &quot;Error loading shortcut &quot; + item                                                       </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1712                          + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                             </span>
<span class="6594976635866090975" onmouseenter="enter('6594976635866090975');" onmouseout="out('6594976635866090975');" style="">1713                          + item.cellX + &quot;,&quot; + item.cellY                                                           </span>
<span class="7810872796641797088" onmouseenter="enter('7810872796641797088');" onmouseout="out('7810872796641797088');" style="">1714                          + &quot;) out of screen bounds ( &quot; + countX + &quot;x&quot; + countY + &quot;)&quot;);                             </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1715                  return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1716              }                                                                                                     </span>
<span  style="">1717                                                                                                                    </span>
<span class="-5156128896960485993" onmouseenter="enter('-5156128896960485993');" onmouseout="out('-5156128896960485993');" style="">1718              // Check if any workspace icons overlap with each other                                               </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1719              for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                          </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1720                  for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                                      </span>
<span class="-6569355555223387047" onmouseenter="enter('-6569355555223387047');" onmouseout="out('-6569355555223387047');" style="">1721                      if (screens[x][y] != null) {                                                                  </span>
<span class="1594036939095365280" onmouseenter="enter('1594036939095365280');" onmouseout="out('1594036939095365280');" style="">1722                          Log.e(TAG, &quot;Error loading shortcut &quot; + item                                               </span>
<span class="732489445119670615" onmouseenter="enter('732489445119670615');" onmouseout="out('732489445119670615');" style="">1723                              + &quot; into cell (&quot; + containerIndex + &quot;-&quot; + item.screenId + &quot;:&quot;                         </span>
<span class="6817243246217428495" onmouseenter="enter('6817243246217428495');" onmouseout="out('6817243246217428495');" style="">1724                              + x + &quot;,&quot; + y                                                                         </span>
<span class="5682441617128381013" onmouseenter="enter('5682441617128381013');" onmouseout="out('5682441617128381013');" style="">1725                              + &quot;) occupied by &quot;                                                                    </span>
<span class="-1033476021967432581" onmouseenter="enter('-1033476021967432581');" onmouseout="out('-1033476021967432581');" style="">1726                              + screens[x][y]);                                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1727                          return false;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1728                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1729                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1730              }                                                                                                     </span>
<span class="-3464573179440560703" onmouseenter="enter('-3464573179440560703');" onmouseout="out('-3464573179440560703');" style="">1731              for (int x = item.cellX; x &lt; (item.cellX+item.spanX); x++) {                                          </span>
<span class="-671122620044584111" onmouseenter="enter('-671122620044584111');" onmouseout="out('-671122620044584111');" style="">1732                  for (int y = item.cellY; y &lt; (item.cellY+item.spanY); y++) {                                      </span>
<span class="4088526838574697064" onmouseenter="enter('4088526838574697064');" onmouseout="out('4088526838574697064');" style="">1733                      screens[x][y] = item;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1734                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1735              }                                                                                                     </span>
<span  style="">1736                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1737              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1738          }                                                                                                         </span>
<span  style="">1739                                                                                                                    </span>
<span class="-7185136003210132674" onmouseenter="enter('-7185136003210132674');" onmouseout="out('-7185136003210132674');" style="">1740          /** Clears all the sBg data structures */                                                                 </span>
<span class="1801132344752176061" onmouseenter="enter('1801132344752176061');" onmouseout="out('1801132344752176061');" style="">1741          private void clearSBgDataStructures() {                                                                   </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1742              synchronized (sBgLock) {                                                                              </span>
<span class="-7129433888089157992" onmouseenter="enter('-7129433888089157992');" onmouseout="out('-7129433888089157992');" style="">1743                  sBgWorkspaceItems.clear();                                                                        </span>
<span class="5052861278193385910" onmouseenter="enter('5052861278193385910');" onmouseout="out('5052861278193385910');" style="">1744                  sBgAppWidgets.clear();                                                                            </span>
<span class="3133219754838100126" onmouseenter="enter('3133219754838100126');" onmouseout="out('3133219754838100126');" style="">1745                  sBgFolders.clear();                                                                               </span>
<span class="-8505695193908377238" onmouseenter="enter('-8505695193908377238');" onmouseout="out('-8505695193908377238');" style="">1746                  sBgItemsIdMap.clear();                                                                            </span>
<span class="-9006013552970041131" onmouseenter="enter('-9006013552970041131');" onmouseout="out('-9006013552970041131');" style="">1747                  sBgDbIconCache.clear();                                                                           </span>
<span class="3737947530894746018" onmouseenter="enter('3737947530894746018');" onmouseout="out('3737947530894746018');" style="">1748                  sBgWorkspaceScreens.clear();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1749              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1750          }                                                                                                         </span>
<span  style="">1751                                                                                                                    </span>
<span class="8445325407089354461" onmouseenter="enter('8445325407089354461');" onmouseout="out('8445325407089354461');" style="">1752          /** Returns whether this is an upgrade path */                                                            </span>
<span class="-134197683999376379" onmouseenter="enter('-134197683999376379');" onmouseout="out('-134197683999376379');" style="">1753          private boolean loadWorkspace() {                                                                         </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1754              // Log to disk                                                                                        </span>
<span class="-1716174542198683127" onmouseenter="enter('-1716174542198683127');" onmouseout="out('-1716174542198683127');" style="">1755              Launcher.addDumpLog(TAG, &quot;11683562 - loadWorkspace()&quot;, true);                                         </span>
<span  style="">1756                                                                                                                    </span>
<span class="-1293377954506719064" onmouseenter="enter('-1293377954506719064');" onmouseout="out('-1293377954506719064');" style="">1757              final long t = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                                        </span>
<span  style="">1758                                                                                                                    </span>
<span class="-7540672363138308565" onmouseenter="enter('-7540672363138308565');" onmouseout="out('-7540672363138308565');" style="">1759              final Context context = mContext;                                                                     </span>
<span class="5935808792850723637" onmouseenter="enter('5935808792850723637');" onmouseout="out('5935808792850723637');" style="">1760              final ContentResolver contentResolver = context.getContentResolver();                                 </span>
<span class="-2531056455834918617" onmouseenter="enter('-2531056455834918617');" onmouseout="out('-2531056455834918617');" style="">1761              final PackageManager manager = context.getPackageManager();                                           </span>
<span class="9164904653123292763" onmouseenter="enter('9164904653123292763');" onmouseout="out('9164904653123292763');" style="">1762              final AppWidgetManager widgets = AppWidgetManager.getInstance(context);                               </span>
<span class="-100432956626051671" onmouseenter="enter('-100432956626051671');" onmouseout="out('-100432956626051671');" style="">1763              final boolean isSafeMode = manager.isSafeMode();                                                      </span>
<span  style="">1764                                                                                                                    </span>
<span class="5758562287855425209" onmouseenter="enter('5758562287855425209');" onmouseout="out('5758562287855425209');" style="">1765              LauncherAppState app = LauncherAppState.getInstance();                                                </span>
<span class="-6320967880672955396" onmouseenter="enter('-6320967880672955396');" onmouseout="out('-6320967880672955396');" style="">1766              DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                         </span>
<span class="-1268645472287944818" onmouseenter="enter('-1268645472287944818');" onmouseout="out('-1268645472287944818');" style="">1767              int countX = (int) grid.numColumns;                                                                   </span>
<span class="5825733578535079508" onmouseenter="enter('5825733578535079508');" onmouseout="out('5825733578535079508');" style="">1768              int countY = (int) grid.numRows;                                                                      </span>
<span  style="">1769                                                                                                                    </span>
<span class="4685154999280536885" onmouseenter="enter('4685154999280536885');" onmouseout="out('4685154999280536885');" style="">1770              if ((mFlags &amp; LOADER_FLAG_CLEAR_WORKSPACE) != 0) {                                                    </span>
<span class="1874866184467615023" onmouseenter="enter('1874866184467615023');" onmouseout="out('1874866184467615023');" style="">1771                  Launcher.addDumpLog(TAG, &quot;loadWorkspace: resetting launcher database&quot;, true);                     </span>
<span class="7130003991883838563" onmouseenter="enter('7130003991883838563');" onmouseout="out('7130003991883838563');" style="">1772                  LauncherAppState.getLauncherProvider().deleteDatabase();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1773              }                                                                                                     </span>
<span  style="">1774                                                                                                                    </span>
<span class="1786245758308608184" onmouseenter="enter('1786245758308608184');" onmouseout="out('1786245758308608184');" style="">1775              if ((mFlags &amp; LOADER_FLAG_MIGRATE_SHORTCUTS) != 0) {                                                  </span>
<span class="2622187273755861990" onmouseenter="enter('2622187273755861990');" onmouseout="out('2622187273755861990');" style="">1776                  // append the user&#x27;s Launcher2 shortcuts                                                          </span>
<span class="7991450201866933364" onmouseenter="enter('7991450201866933364');" onmouseout="out('7991450201866933364');" style="">1777                  Launcher.addDumpLog(TAG, &quot;loadWorkspace: migrating from launcher2&quot;, true);                        </span>
<span class="-4928149528895358870" onmouseenter="enter('-4928149528895358870');" onmouseout="out('-4928149528895358870');" style="">1778                  LauncherAppState.getLauncherProvider().migrateLauncher2Shortcuts();                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1779              } else {                                                                                              </span>
<span class="-6772917437561183819" onmouseenter="enter('-6772917437561183819');" onmouseout="out('-6772917437561183819');" style="">1780                  // Make sure the default workspace is loaded                                                      </span>
<span class="3161347234478650527" onmouseenter="enter('3161347234478650527');" onmouseout="out('3161347234478650527');" style="">1781                  Launcher.addDumpLog(TAG, &quot;loadWorkspace: loading default favorites&quot;, false);                      </span>
<span class="8096870978202898311" onmouseenter="enter('8096870978202898311');" onmouseout="out('8096870978202898311');" style="">1782                  LauncherAppState.getLauncherProvider().loadDefaultFavoritesIfNecessary(0);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1783              }                                                                                                     </span>
<span  style="">1784                                                                                                                    </span>
<span class="-8222313360488017709" onmouseenter="enter('-8222313360488017709');" onmouseout="out('-8222313360488017709');" style="">1785              // Check if we need to do any upgrade-path logic                                                      </span>
<span class="-995379543715394793" onmouseenter="enter('-995379543715394793');" onmouseout="out('-995379543715394793');" style="">1786              // (Includes having just imported default favorites)                                                  </span>
<span class="-2313666044770114963" onmouseenter="enter('-2313666044770114963');" onmouseout="out('-2313666044770114963');" style="">1787              boolean loadedOldDb = LauncherAppState.getLauncherProvider().justLoadedOldDb();                       </span>
<span  style="">1788                                                                                                                    </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">1789              // Log to disk                                                                                        </span>
<span class="4915608034810943289" onmouseenter="enter('4915608034810943289');" onmouseout="out('4915608034810943289');" style="">1790              Launcher.addDumpLog(TAG, &quot;11683562 -   loadedOldDb: &quot; + loadedOldDb, true);                           </span>
<span  style="">1791                                                                                                                    </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">1792              synchronized (sBgLock) {                                                                              </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">1793                  clearSBgDataStructures();                                                                         </span>
<span  style="">1794                                                                                                                    </span>
<span class="4830013596372552761" onmouseenter="enter('4830013596372552761');" onmouseout="out('4830013596372552761');" style="">1795                  final ArrayList&lt;Long&gt; itemsToRemove = new ArrayList&lt;Long&gt;();                                      </span>
<span class="-771425693233218078" onmouseenter="enter('-771425693233218078');" onmouseout="out('-771425693233218078');" style="">1796                  final ArrayList&lt;Long&gt; restoredRows = new ArrayList&lt;Long&gt;();                                       </span>
<span class="1337367669825309510" onmouseenter="enter('1337367669825309510');" onmouseout="out('1337367669825309510');" style="">1797                  final Uri contentUri = LauncherSettings.Favorites.CONTENT_URI;                                    </span>
<span class="6883183902805060832" onmouseenter="enter('6883183902805060832');" onmouseout="out('6883183902805060832');" style="">1798                  if (DEBUG_LOADERS) Log.d(TAG, &quot;loading model from &quot; + contentUri);                                </span>
<span class="4124323585340312806" onmouseenter="enter('4124323585340312806');" onmouseout="out('4124323585340312806');" style="">1799                  final Cursor c = contentResolver.query(contentUri, null, null, null, null);                       </span>
<span  style="">1800                                                                                                                    </span>
<span class="-6846195559440228008" onmouseenter="enter('-6846195559440228008');" onmouseout="out('-6846195559440228008');" style="">1801                  // +1 for the hotseat (it can be larger than the workspace)                                       </span>
<span class="-6570434370371395868" onmouseenter="enter('-6570434370371395868');" onmouseout="out('-6570434370371395868');" style="">1802                  // Load workspace in reverse order to ensure that latest items are loaded first (and              </span>
<span class="-2496742724026288329" onmouseenter="enter('-2496742724026288329');" onmouseout="out('-2496742724026288329');" style="">1803                  // before any earlier duplicates)                                                                 </span>
<span class="-575539041300461201" onmouseenter="enter('-575539041300461201');" onmouseout="out('-575539041300461201');" style="">1804                  final HashMap&lt;Long, ItemInfo[][]&gt; occupied = new HashMap&lt;Long, ItemInfo[][]&gt;();                   </span>
<span  style="">1805                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1806                  try {                                                                                             </span>
<span class="574469590853725413" onmouseenter="enter('574469590853725413');" onmouseout="out('574469590853725413');" style="">1807                      final int idIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites._ID);                  </span>
<span class="498695732843703978" onmouseenter="enter('498695732843703978');" onmouseout="out('498695732843703978');" style="">1808                      final int intentIndex = c.getColumnIndexOrThrow                                               </span>
<span class="-2710863683168773760" onmouseenter="enter('-2710863683168773760');" onmouseout="out('-2710863683168773760');" style="">1809                              (LauncherSettings.Favorites.INTENT);                                                  </span>
<span class="3135911520873448784" onmouseenter="enter('3135911520873448784');" onmouseout="out('3135911520873448784');" style="">1810                      final int titleIndex = c.getColumnIndexOrThrow                                                </span>
<span class="-7080768452290664563" onmouseenter="enter('-7080768452290664563');" onmouseout="out('-7080768452290664563');" style="">1811                              (LauncherSettings.Favorites.TITLE);                                                   </span>
<span class="-4350901823494792660" onmouseenter="enter('-4350901823494792660');" onmouseout="out('-4350901823494792660');" style="">1812                      final int iconTypeIndex = c.getColumnIndexOrThrow(                                            </span>
<span class="3108347623629035166" onmouseenter="enter('3108347623629035166');" onmouseout="out('3108347623629035166');" style="">1813                              LauncherSettings.Favorites.ICON_TYPE);                                                </span>
<span class="-8996166501365524686" onmouseenter="enter('-8996166501365524686');" onmouseout="out('-8996166501365524686');" style="">1814                      final int iconIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);               </span>
<span class="-3909234361304575452" onmouseenter="enter('-3909234361304575452');" onmouseout="out('-3909234361304575452');" style="">1815                      final int iconPackageIndex = c.getColumnIndexOrThrow(                                         </span>
<span class="-6787190495105525864" onmouseenter="enter('-6787190495105525864');" onmouseout="out('-6787190495105525864');" style="">1816                              LauncherSettings.Favorites.ICON_PACKAGE);                                             </span>
<span class="7790246664646081463" onmouseenter="enter('7790246664646081463');" onmouseout="out('7790246664646081463');" style="">1817                      final int iconResourceIndex = c.getColumnIndexOrThrow(                                        </span>
<span class="-1781116612765105159" onmouseenter="enter('-1781116612765105159');" onmouseout="out('-1781116612765105159');" style="">1818                              LauncherSettings.Favorites.ICON_RESOURCE);                                            </span>
<span class="3335971636920715852" onmouseenter="enter('3335971636920715852');" onmouseout="out('3335971636920715852');" style="">1819                      final int containerIndex = c.getColumnIndexOrThrow(                                           </span>
<span class="6570903028117113418" onmouseenter="enter('6570903028117113418');" onmouseout="out('6570903028117113418');" style="">1820                              LauncherSettings.Favorites.CONTAINER);                                                </span>
<span class="-8309152441179821869" onmouseenter="enter('-8309152441179821869');" onmouseout="out('-8309152441179821869');" style="">1821                      final int itemTypeIndex = c.getColumnIndexOrThrow(                                            </span>
<span class="7255885825914282267" onmouseenter="enter('7255885825914282267');" onmouseout="out('7255885825914282267');" style="">1822                              LauncherSettings.Favorites.ITEM_TYPE);                                                </span>
<span class="-9034335384452522965" onmouseenter="enter('-9034335384452522965');" onmouseout="out('-9034335384452522965');" style="">1823                      final int appWidgetIdIndex = c.getColumnIndexOrThrow(                                         </span>
<span class="6807201781176448908" onmouseenter="enter('6807201781176448908');" onmouseout="out('6807201781176448908');" style="">1824                              LauncherSettings.Favorites.APPWIDGET_ID);                                             </span>
<span class="-6125671603078297888" onmouseenter="enter('-6125671603078297888');" onmouseout="out('-6125671603078297888');" style="">1825                      final int appWidgetProviderIndex = c.getColumnIndexOrThrow(                                   </span>
<span class="4426033877353236522" onmouseenter="enter('4426033877353236522');" onmouseout="out('4426033877353236522');" style="">1826                              LauncherSettings.Favorites.APPWIDGET_PROVIDER);                                       </span>
<span class="-3079236723582024955" onmouseenter="enter('-3079236723582024955');" onmouseout="out('-3079236723582024955');" style="">1827                      final int screenIndex = c.getColumnIndexOrThrow(                                              </span>
<span class="-6667712815858132414" onmouseenter="enter('-6667712815858132414');" onmouseout="out('-6667712815858132414');" style="">1828                              LauncherSettings.Favorites.SCREEN);                                                   </span>
<span class="-6867547874094352828" onmouseenter="enter('-6867547874094352828');" onmouseout="out('-6867547874094352828');" style="">1829                      final int cellXIndex = c.getColumnIndexOrThrow                                                </span>
<span class="5262774206366152748" onmouseenter="enter('5262774206366152748');" onmouseout="out('5262774206366152748');" style="">1830                              (LauncherSettings.Favorites.CELLX);                                                   </span>
<span class="8831781951312982826" onmouseenter="enter('8831781951312982826');" onmouseout="out('8831781951312982826');" style="">1831                      final int cellYIndex = c.getColumnIndexOrThrow                                                </span>
<span class="-5037082342925021952" onmouseenter="enter('-5037082342925021952');" onmouseout="out('-5037082342925021952');" style="">1832                              (LauncherSettings.Favorites.CELLY);                                                   </span>
<span class="4727532435646923125" onmouseenter="enter('4727532435646923125');" onmouseout="out('4727532435646923125');" style="">1833                      final int spanXIndex = c.getColumnIndexOrThrow                                                </span>
<span class="-4661771410814353054" onmouseenter="enter('-4661771410814353054');" onmouseout="out('-4661771410814353054');" style="">1834                              (LauncherSettings.Favorites.SPANX);                                                   </span>
<span class="-2910068933310438864" onmouseenter="enter('-2910068933310438864');" onmouseout="out('-2910068933310438864');" style="">1835                      final int spanYIndex = c.getColumnIndexOrThrow(                                               </span>
<span class="99270330838913893" onmouseenter="enter('99270330838913893');" onmouseout="out('99270330838913893');" style="">1836                              LauncherSettings.Favorites.SPANY);                                                    </span>
<span class="4436227568732015168" onmouseenter="enter('4436227568732015168');" onmouseout="out('4436227568732015168');" style="">1837                      final int restoredIndex = c.getColumnIndexOrThrow(                                            </span>
<span class="6353272533239034373" onmouseenter="enter('6353272533239034373');" onmouseout="out('6353272533239034373');" style="">1838                              LauncherSettings.Favorites.RESTORED);                                                 </span>
<span class="4456964937873623262" onmouseenter="enter('4456964937873623262');" onmouseout="out('4456964937873623262');" style="">1839                      //final int uriIndex = c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);               </span>
<span class="2905983584052764586" onmouseenter="enter('2905983584052764586');" onmouseout="out('2905983584052764586');" style="">1840                      //final int displayModeIndex = c.getColumnIndexOrThrow(                                       </span>
<span class="-8556687182597342656" onmouseenter="enter('-8556687182597342656');" onmouseout="out('-8556687182597342656');" style="">1841                      //        LauncherSettings.Favorites.DISPLAY_MODE);                                           </span>
<span  style="">1842                                                                                                                    </span>
<span class="-6687913296565100881" onmouseenter="enter('-6687913296565100881');" onmouseout="out('-6687913296565100881');" style="">1843                      ShortcutInfo info;                                                                            </span>
<span class="-4294155297126257121" onmouseenter="enter('-4294155297126257121');" onmouseout="out('-4294155297126257121');" style="">1844                      String intentDescription;                                                                     </span>
<span class="1875374791140575019" onmouseenter="enter('1875374791140575019');" onmouseout="out('1875374791140575019');" style="">1845                      LauncherAppWidgetInfo appWidgetInfo;                                                          </span>
<span class="-7299509265635558160" onmouseenter="enter('-7299509265635558160');" onmouseout="out('-7299509265635558160');" style="">1846                      int container;                                                                                </span>
<span class="3268793718289878117" onmouseenter="enter('3268793718289878117');" onmouseout="out('3268793718289878117');" style="">1847                      long id;                                                                                      </span>
<span class="-7461708883398711413" onmouseenter="enter('-7461708883398711413');" onmouseout="out('-7461708883398711413');" style="">1848                      Intent intent;                                                                                </span>
<span  style="">1849                                                                                                                    </span>
<span class="1538645125823697533" onmouseenter="enter('1538645125823697533');" onmouseout="out('1538645125823697533');" style="">1850                      while (!mStopped &amp;&amp; c.moveToNext()) {                                                         </span>
<span class="-3056870665611820276" onmouseenter="enter('-3056870665611820276');" onmouseout="out('-3056870665611820276');" style="">1851                          AtomicBoolean deleteOnInvalidPlacement = new AtomicBoolean(false);                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1852                          try {                                                                                     </span>
<span class="-4443967809239824632" onmouseenter="enter('-4443967809239824632');" onmouseout="out('-4443967809239824632');" style="">1853                              int itemType = c.getInt(itemTypeIndex);                                               </span>
<span class="7426878920983746504" onmouseenter="enter('7426878920983746504');" onmouseout="out('7426878920983746504');" style="">1854                              boolean restored = 0 != c.getInt(restoredIndex);                                      </span>
<span  style="">1855                                                                                                                    </span>
<span class="-5665081285487591411" onmouseenter="enter('-5665081285487591411');" onmouseout="out('-5665081285487591411');" style="">1856                              switch (itemType) {                                                                   </span>
<span class="1297444244811807944" onmouseenter="enter('1297444244811807944');" onmouseout="out('1297444244811807944');" style="">1857                              case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:                                </span>
<span class="-5856773260083041243" onmouseenter="enter('-5856773260083041243');" onmouseout="out('-5856773260083041243');" style="">1858                              case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:                                   </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1859                                  id = c.getLong(idIndex);                                                          </span>
<span class="8199742400390876563" onmouseenter="enter('8199742400390876563');" onmouseout="out('8199742400390876563');" style="">1860                                  intentDescription = c.getString(intentIndex);                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1861                                  try {                                                                             </span>
<span class="-1059471947143689601" onmouseenter="enter('-1059471947143689601');" onmouseout="out('-1059471947143689601');" style="">1862                                      intent = Intent.parseUri(intentDescription, 0);                               </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style="">1863                                      ComponentName cn = intent.getComponent();                                     </span>
<span class="6294222122453554998" onmouseenter="enter('6294222122453554998');" onmouseout="out('6294222122453554998');" style="">1864                                      if (cn != null &amp;&amp; !isValidPackageComponent(manager, cn)) {                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1865                                          if (restored) {                                                           </span>
<span class="-4075692845887634995" onmouseenter="enter('-4075692845887634995');" onmouseout="out('-4075692845887634995');" style="">1866                                              // might be installed later                                           </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1867                                              Launcher.addDumpLog(TAG,                                              </span>
<span class="1853248294024116603" onmouseenter="enter('1853248294024116603');" onmouseout="out('1853248294024116603');" style="">1868                                                      &quot;package not yet restored: &quot; + cn, true);                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1869                                          } else {                                                                  </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">1870                                              if (!mAppsCanBeOnRemoveableStorage) {                                 </span>
<span class="-1319340498640723993" onmouseenter="enter('-1319340498640723993');" onmouseout="out('-1319340498640723993');" style="">1871                                                  // Log the invalid package, and remove it                         </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1872                                                  Launcher.addDumpLog(TAG,                                          </span>
<span class="556389557067898835" onmouseenter="enter('556389557067898835');" onmouseout="out('556389557067898835');" style="">1873                                                          &quot;Invalid package removed: &quot; + cn, true);                  </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1874                                                  itemsToRemove.add(id);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1875                                              } else {                                                              </span>
<span class="1135766729630553535" onmouseenter="enter('1135766729630553535');" onmouseout="out('1135766729630553535');" style="">1876                                                  // If apps can be on external storage, then we just               </span>
<span class="5840340868837727294" onmouseenter="enter('5840340868837727294');" onmouseout="out('5840340868837727294');" style="">1877                                                  // leave them for the user to remove (maybe add                   </span>
<span class="1838795663890338817" onmouseenter="enter('1838795663890338817');" onmouseout="out('1838795663890338817');" style="">1878                                                  // visual treatment to it)                                        </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1879                                                  Launcher.addDumpLog(TAG,                                          </span>
<span class="2228900775203516519" onmouseenter="enter('2228900775203516519');" onmouseout="out('2228900775203516519');" style="">1880                                                          &quot;Invalid package found: &quot; + cn, true);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1881                                              }                                                                     </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1882                                              continue;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1883                                          }                                                                         </span>
<span class="8327580054957946681" onmouseenter="enter('8327580054957946681');" onmouseout="out('8327580054957946681');" style="">1884                                      } else if (restored) {                                                        </span>
<span class="-9024381775763282363" onmouseenter="enter('-9024381775763282363');" onmouseout="out('-9024381775763282363');" style="">1885                                          // no special handling necessary for this restored item                   </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">1886                                          restoredRows.add(id);                                                     </span>
<span class="9034604346846800259" onmouseenter="enter('9034604346846800259');" onmouseout="out('9034604346846800259');" style="">1887                                          restored = false;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1888                                      }                                                                             </span>
<span class="900563632545065451" onmouseenter="enter('900563632545065451');" onmouseout="out('900563632545065451');" style="">1889                                  } catch (URISyntaxException e) {                                                  </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1890                                      Launcher.addDumpLog(TAG,                                                      </span>
<span class="-68540878136764174" onmouseenter="enter('-68540878136764174');" onmouseout="out('-68540878136764174');" style="">1891                                              &quot;Invalid uri: &quot; + intentDescription, true);                           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1892                                      continue;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1893                                  }                                                                                 </span>
<span  style="">1894                                                                                                                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1895                                  if (restored) {                                                                   </span>
<span class="8337166236749198483" onmouseenter="enter('8337166236749198483');" onmouseout="out('8337166236749198483');" style="">1896                                      Launcher.addDumpLog(TAG,                                                      </span>
<span class="-7520999071046454576" onmouseenter="enter('-7520999071046454576');" onmouseout="out('-7520999071046454576');" style="">1897                                              &quot;constructing info for partially restored package&quot;,                   </span>
<span class="-159362617709534437" onmouseenter="enter('-159362617709534437');" onmouseout="out('-159362617709534437');" style="">1898                                              true);                                                                </span>
<span class="6247116724061363734" onmouseenter="enter('6247116724061363734');" onmouseout="out('6247116724061363734');" style="">1899                                      info = getRestoredItemInfo(c, titleIndex, intent);                            </span>

<span class="1789530273111871261" onmouseenter="enter('1789530273111871261');" onmouseout="out('1789530273111871261');" style="">1900                                      intent = getRestoredItemIntent(c, context, intent);                           </span>
<span class="2485815571182318046" onmouseenter="enter('2485815571182318046');" onmouseout="out('2485815571182318046');" style="">1901                                  } else if (itemType ==                                                            </span>
<span class="2369871960694556087" onmouseenter="enter('2369871960694556087');" onmouseout="out('2369871960694556087');" style="">1902                                          LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) {                       </span>
<span class="8194872455546731015" onmouseenter="enter('8194872455546731015');" onmouseout="out('8194872455546731015');" style="">1903                                      info = getShortcutInfo(manager, intent, context, c, iconIndex,                </span>
<span class="-2187398528357571993" onmouseenter="enter('-2187398528357571993');" onmouseout="out('-2187398528357571993');" style="">1904                                              titleIndex, mLabelCache);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1905                                  } else {                                                                          </span>
<span class="-7258494880704199189" onmouseenter="enter('-7258494880704199189');" onmouseout="out('-7258494880704199189');" style="">1906                                      info = getShortcutInfo(c, context, iconTypeIndex,                             </span>
<span class="6962748064109777554" onmouseenter="enter('6962748064109777554');" onmouseout="out('6962748064109777554');" style="">1907                                              iconPackageIndex, iconResourceIndex, iconIndex,                       </span>
<span class="-1562426884587851404" onmouseenter="enter('-1562426884587851404');" onmouseout="out('-1562426884587851404');" style="">1908                                              titleIndex);                                                          </span>
<span  style="">1909                                                                                                                    </span>
<span class="8787316375412349400" onmouseenter="enter('8787316375412349400');" onmouseout="out('8787316375412349400');" style="">1910                                      // App shortcuts that used to be automatically added to Launcher              </span>
<span class="4423348586531939182" onmouseenter="enter('4423348586531939182');" onmouseout="out('4423348586531939182');" style="">1911                                      // didn&#x27;t always have the correct intent flags set, so do that                </span>
<span class="906874877447394391" onmouseenter="enter('906874877447394391');" onmouseout="out('906874877447394391');" style="">1912                                      // here                                                                       </span>
<span class="-8302893811746412301" onmouseenter="enter('-8302893811746412301');" onmouseout="out('-8302893811746412301');" style="">1913                                      if (intent.getAction() != null &amp;&amp;                                             </span>
<span class="-6792431597223839871" onmouseenter="enter('-6792431597223839871');" onmouseout="out('-6792431597223839871');" style="">1914                                          intent.getCategories() != null &amp;&amp;                                         </span>
<span class="-4482526573741019726" onmouseenter="enter('-4482526573741019726');" onmouseout="out('-4482526573741019726');" style="">1915                                          intent.getAction().equals(Intent.ACTION_MAIN) &amp;&amp;                          </span>
<span class="8802373298636081036" onmouseenter="enter('8802373298636081036');" onmouseout="out('8802373298636081036');" style="">1916                                          intent.getCategories().contains(Intent.CATEGORY_LAUNCHER)) {              </span>
<span class="-1437204964726011747" onmouseenter="enter('-1437204964726011747');" onmouseout="out('-1437204964726011747');" style="">1917                                          intent.addFlags(                                                          </span>
<span class="7533444403523837279" onmouseenter="enter('7533444403523837279');" onmouseout="out('7533444403523837279');" style="">1918                                              Intent.FLAG_ACTIVITY_NEW_TASK |                                       </span>
<span class="754211306232040187" onmouseenter="enter('754211306232040187');" onmouseout="out('754211306232040187');" style="">1919                                              Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1920                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1921                                  }                                                                                 </span>
<span  style="">1922                                                                                                                    </span>
<span class="-1845287058566655413" onmouseenter="enter('-1845287058566655413');" onmouseout="out('-1845287058566655413');" style="">1923                                  if (info != null) {                                                               </span>
<span class="-7372776081672801393" onmouseenter="enter('-7372776081672801393');" onmouseout="out('-7372776081672801393');" style="">1924                                      info.id = id;                                                                 </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">1925                                      info.intent = intent;                                                         </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">1926                                      container = c.getInt(containerIndex);                                         </span>
<span class="5031599210604047094" onmouseenter="enter('5031599210604047094');" onmouseout="out('5031599210604047094');" style="">1927                                      info.container = container;                                                   </span>
<span class="8385513109144822406" onmouseenter="enter('8385513109144822406');" onmouseout="out('8385513109144822406');" style="">1928                                      info.screenId = c.getInt(screenIndex);                                        </span>
<span class="8733666235794055799" onmouseenter="enter('8733666235794055799');" onmouseout="out('8733666235794055799');" style="">1929                                      info.cellX = c.getInt(cellXIndex);                                            </span>
<span class="4988345900238836581" onmouseenter="enter('4988345900238836581');" onmouseout="out('4988345900238836581');" style="">1930                                      info.cellY = c.getInt(cellYIndex);                                            </span>
<span class="6314319831626461685" onmouseenter="enter('6314319831626461685');" onmouseout="out('6314319831626461685');" style="">1931                                      info.spanX = 1;                                                               </span>
<span class="-7635592400178984643" onmouseenter="enter('-7635592400178984643');" onmouseout="out('-7635592400178984643');" style="">1932                                      info.spanY = 1;                                                               </span>
<span  style="">1933                                                                                                                    </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">1934                                      // check &amp; update map of what&#x27;s occupied                                      </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">1935                                      deleteOnInvalidPlacement.set(false);                                          </span>
<span class="8488570468437690238" onmouseenter="enter('8488570468437690238');" onmouseout="out('8488570468437690238');" style="">1936                                      if (!checkItemPlacement(occupied, info, deleteOnInvalidPlacement)) {          </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">1937                                          if (deleteOnInvalidPlacement.get()) {                                     </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1938                                              itemsToRemove.add(id);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1939                                          }                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1940                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1941                                      }                                                                             </span>
<span  style="">1942                                                                                                                    </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">1943                                      switch (container) {                                                          </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">1944                                      case LauncherSettings.Favorites.CONTAINER_DESKTOP:                            </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">1945                                      case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                            </span>
<span class="-3665356032627215639" onmouseenter="enter('-3665356032627215639');" onmouseout="out('-3665356032627215639');" style="">1946                                          sBgWorkspaceItems.add(info);                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1947                                          break;                                                                    </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">1948                                      default:                                                                      </span>
<span class="3928258456344537563" onmouseenter="enter('3928258456344537563');" onmouseout="out('3928258456344537563');" style="">1949                                          // Item is in a user folder                                               </span>
<span class="7253808449036323039" onmouseenter="enter('7253808449036323039');" onmouseout="out('7253808449036323039');" style="">1950                                          FolderInfo folderInfo =                                                   </span>
<span class="5827700611550420594" onmouseenter="enter('5827700611550420594');" onmouseout="out('5827700611550420594');" style="">1951                                                  findOrMakeFolder(sBgFolders, container);                          </span>
<span class="4210631970925384436" onmouseenter="enter('4210631970925384436');" onmouseout="out('4210631970925384436');" style="">1952                                          folderInfo.add(info);                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1953                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1954                                      }                                                                             </span>
<span class="-3593974647070903374" onmouseenter="enter('-3593974647070903374');" onmouseout="out('-3593974647070903374');" style="">1955                                      sBgItemsIdMap.put(info.id, info);                                             </span>
<span  style="">1956                                                                                                                    </span>
<span class="-8292894264257510493" onmouseenter="enter('-8292894264257510493');" onmouseout="out('-8292894264257510493');" style="">1957                                      // now that we&#x27;ve loaded everthing re-save it with the                        </span>
<span class="-1917607236140731811" onmouseenter="enter('-1917607236140731811');" onmouseout="out('-1917607236140731811');" style="">1958                                      // icon in case it disappears somehow.                                        </span>
<span class="-3056528193758781985" onmouseenter="enter('-3056528193758781985');" onmouseout="out('-3056528193758781985');" style="">1959                                      queueIconToBeChecked(sBgDbIconCache, info, c, iconIndex);                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1960                                  } else {                                                                          </span>
<span class="477637279977673890" onmouseenter="enter('477637279977673890');" onmouseout="out('477637279977673890');" style="">1961                                      throw new RuntimeException(&quot;Unexpected null ShortcutInfo&quot;);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1962                                  }                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1963                                  break;                                                                            </span>
<span  style="">1964                                                                                                                    </span>
<span class="7822766374650826847" onmouseenter="enter('7822766374650826847');" onmouseout="out('7822766374650826847');" style="">1965                              case LauncherSettings.Favorites.ITEM_TYPE_FOLDER:                                     </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">1966                                  id = c.getLong(idIndex);                                                          </span>
<span class="-711784092642716417" onmouseenter="enter('-711784092642716417');" onmouseout="out('-711784092642716417');" style="">1967                                  FolderInfo folderInfo = findOrMakeFolder(sBgFolders, id);                         </span>
<span  style="">1968                                                                                                                    </span>
<span class="209925890656384627" onmouseenter="enter('209925890656384627');" onmouseout="out('209925890656384627');" style="">1969                                  folderInfo.title = c.getString(titleIndex);                                       </span>
<span class="-8395143195141590927" onmouseenter="enter('-8395143195141590927');" onmouseout="out('-8395143195141590927');" style="">1970                                  folderInfo.id = id;                                                               </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">1971                                  container = c.getInt(containerIndex);                                             </span>
<span class="-7029361904102133577" onmouseenter="enter('-7029361904102133577');" onmouseout="out('-7029361904102133577');" style="">1972                                  folderInfo.container = container;                                                 </span>
<span class="-536839208140074359" onmouseenter="enter('-536839208140074359');" onmouseout="out('-536839208140074359');" style="">1973                                  folderInfo.screenId = c.getInt(screenIndex);                                      </span>
<span class="-6523305564765483956" onmouseenter="enter('-6523305564765483956');" onmouseout="out('-6523305564765483956');" style="">1974                                  folderInfo.cellX = c.getInt(cellXIndex);                                          </span>
<span class="4113106122182132998" onmouseenter="enter('4113106122182132998');" onmouseout="out('4113106122182132998');" style="">1975                                  folderInfo.cellY = c.getInt(cellYIndex);                                          </span>
<span class="5610283855861400391" onmouseenter="enter('5610283855861400391');" onmouseout="out('5610283855861400391');" style="">1976                                  folderInfo.spanX = 1;                                                             </span>
<span class="-3495026741287589829" onmouseenter="enter('-3495026741287589829');" onmouseout="out('-3495026741287589829');" style="">1977                                  folderInfo.spanY = 1;                                                             </span>
<span  style="">1978                                                                                                                    </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">1979                                  // check &amp; update map of what&#x27;s occupied                                          </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">1980                                  deleteOnInvalidPlacement.set(false);                                              </span>
<span class="-7285209150210174951" onmouseenter="enter('-7285209150210174951');" onmouseout="out('-7285209150210174951');" style="">1981                                  if (!checkItemPlacement(occupied, folderInfo,                                     </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">1982                                          deleteOnInvalidPlacement)) {                                              </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">1983                                      if (deleteOnInvalidPlacement.get()) {                                         </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">1984                                          itemsToRemove.add(id);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1985                                      }                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1986                                      break;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1987                                  }                                                                                 </span>
<span  style="">1988                                                                                                                    </span>
<span class="1143568839452772760" onmouseenter="enter('1143568839452772760');" onmouseout="out('1143568839452772760');" style="">1989                                  switch (container) {                                                              </span>
<span class="2578781186926612739" onmouseenter="enter('2578781186926612739');" onmouseout="out('2578781186926612739');" style="">1990                                      case LauncherSettings.Favorites.CONTAINER_DESKTOP:                            </span>
<span class="7849375548905372362" onmouseenter="enter('7849375548905372362');" onmouseout="out('7849375548905372362');" style="">1991                                      case LauncherSettings.Favorites.CONTAINER_HOTSEAT:                            </span>
<span class="-8699935089398023363" onmouseenter="enter('-8699935089398023363');" onmouseout="out('-8699935089398023363');" style="">1992                                          sBgWorkspaceItems.add(folderInfo);                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1993                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1994                                  }                                                                                 </span>
<span  style="">1995                                                                                                                    </span>
<span class="-5615818091434695562" onmouseenter="enter('-5615818091434695562');" onmouseout="out('-5615818091434695562');" style="">1996                                  if (restored) {                                                                   </span>
<span class="-4442362781295313201" onmouseenter="enter('-4442362781295313201');" onmouseout="out('-4442362781295313201');" style="">1997                                      // no special handling required for restored folders                          </span>
<span class="7547943646730222412" onmouseenter="enter('7547943646730222412');" onmouseout="out('7547943646730222412');" style="">1998                                      restoredRows.add(id);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1999                                  }                                                                                 </span>
<span  style="">2000                                                                                                                    </span>
<span class="-3375208674862622715" onmouseenter="enter('-3375208674862622715');" onmouseout="out('-3375208674862622715');" style="">2001                                  sBgItemsIdMap.put(folderInfo.id, folderInfo);                                     </span>
<span class="642717865586237287" onmouseenter="enter('642717865586237287');" onmouseout="out('642717865586237287');" style="">2002                                  sBgFolders.put(folderInfo.id, folderInfo);                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2003                                  break;                                                                            </span>
<span  style="">2004                                                                                                                    </span>
<span class="-5373268271186611305" onmouseenter="enter('-5373268271186611305');" onmouseout="out('-5373268271186611305');" style="">2005                              case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:                                  </span>
<span class="-7956270215965694003" onmouseenter="enter('-7956270215965694003');" onmouseout="out('-7956270215965694003');" style="">2006                                  // Read all Launcher-specific widget details                                      </span>
<span class="-1812352292626846958" onmouseenter="enter('-1812352292626846958');" onmouseout="out('-1812352292626846958');" style="">2007                                  int appWidgetId = c.getInt(appWidgetIdIndex);                                     </span>
<span class="7731617805561144619" onmouseenter="enter('7731617805561144619');" onmouseout="out('7731617805561144619');" style="">2008                                  String savedProvider = c.getString(appWidgetProviderIndex);                       </span>
<span  style="">2009                                                                                                                    </span>
<span class="2745644216334302613" onmouseenter="enter('2745644216334302613');" onmouseout="out('2745644216334302613');" style="">2010                                  id = c.getLong(idIndex);                                                          </span>
<span  style="">2011                                                                                                                    </span>
<span class="-94114412789236238" onmouseenter="enter('-94114412789236238');" onmouseout="out('-94114412789236238');" style="">2012                                  final AppWidgetProviderInfo provider =                                            </span>
<span class="1226551708060925883" onmouseenter="enter('1226551708060925883');" onmouseout="out('1226551708060925883');" style="">2013                                          widgets.getAppWidgetInfo(appWidgetId);                                    </span>
<span  style="">2014                                                                                                                    </span>
<span class="-3663768974834964011" onmouseenter="enter('-3663768974834964011');" onmouseout="out('-3663768974834964011');" style="">2015                                  if (!isSafeMode &amp;&amp; (provider == null || provider.provider == null ||              </span>
<span class="5896854251752877894" onmouseenter="enter('5896854251752877894');" onmouseout="out('5896854251752877894');" style="">2016                                          provider.provider.getPackageName() == null)) {                            </span>
<span class="6295139059851294613" onmouseenter="enter('6295139059851294613');" onmouseout="out('6295139059851294613');" style="">2017                                      String log = &quot;Deleting widget that isn&#x27;t installed anymore: id=&quot;              </span>
<span class="-582482747679217469" onmouseenter="enter('-582482747679217469');" onmouseout="out('-582482747679217469');" style="">2018                                          + id + &quot; appWidgetId=&quot; + appWidgetId;                                     </span>
<span class="-1161653447976501517" onmouseenter="enter('-1161653447976501517');" onmouseout="out('-1161653447976501517');" style="">2019                                      Log.e(TAG, log);                                                              </span>
<span class="-8769286334876902652" onmouseenter="enter('-8769286334876902652');" onmouseout="out('-8769286334876902652');" style="">2020                                      Launcher.addDumpLog(TAG, log, false);                                         </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2021                                      itemsToRemove.add(id);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2022                                  } else {                                                                          </span>
<span class="-3849675478934987658" onmouseenter="enter('-3849675478934987658');" onmouseout="out('-3849675478934987658');" style="">2023                                      appWidgetInfo = new LauncherAppWidgetInfo(appWidgetId,                        </span>
<span class="-1699940082949791423" onmouseenter="enter('-1699940082949791423');" onmouseout="out('-1699940082949791423');" style="">2024                                              provider.provider);                                                   </span>
<span class="-3490214853915757695" onmouseenter="enter('-3490214853915757695');" onmouseout="out('-3490214853915757695');" style="">2025                                      appWidgetInfo.id = id;                                                        </span>
<span class="-299823112742514494" onmouseenter="enter('-299823112742514494');" onmouseout="out('-299823112742514494');" style="">2026                                      appWidgetInfo.screenId = c.getInt(screenIndex);                               </span>
<span class="-3031374252236192886" onmouseenter="enter('-3031374252236192886');" onmouseout="out('-3031374252236192886');" style="">2027                                      appWidgetInfo.cellX = c.getInt(cellXIndex);                                   </span>
<span class="-6373958662014470902" onmouseenter="enter('-6373958662014470902');" onmouseout="out('-6373958662014470902');" style="">2028                                      appWidgetInfo.cellY = c.getInt(cellYIndex);                                   </span>
<span class="-1172974300892817728" onmouseenter="enter('-1172974300892817728');" onmouseout="out('-1172974300892817728');" style="">2029                                      appWidgetInfo.spanX = c.getInt(spanXIndex);                                   </span>
<span class="948367348399442562" onmouseenter="enter('948367348399442562');" onmouseout="out('948367348399442562');" style="">2030                                      appWidgetInfo.spanY = c.getInt(spanYIndex);                                   </span>
<span class="-5791068135067534357" onmouseenter="enter('-5791068135067534357');" onmouseout="out('-5791068135067534357');" style="">2031                                      int[] minSpan = Launcher.getMinSpanForWidget(context, provider);              </span>
<span class="663337698221632344" onmouseenter="enter('663337698221632344');" onmouseout="out('663337698221632344');" style="">2032                                      appWidgetInfo.minSpanX = minSpan[0];                                          </span>
<span class="-1876557735779698161" onmouseenter="enter('-1876557735779698161');" onmouseout="out('-1876557735779698161');" style="">2033                                      appWidgetInfo.minSpanY = minSpan[1];                                          </span>
<span  style="">2034                                                                                                                    </span>
<span class="-336881648885673155" onmouseenter="enter('-336881648885673155');" onmouseout="out('-336881648885673155');" style="">2035                                      container = c.getInt(containerIndex);                                         </span>
<span class="8804482754730728288" onmouseenter="enter('8804482754730728288');" onmouseout="out('8804482754730728288');" style="">2036                                      if (container != LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;              </span>
<span class="-8875646165072629077" onmouseenter="enter('-8875646165072629077');" onmouseout="out('-8875646165072629077');" style="">2037                                          container != LauncherSettings.Favorites.CONTAINER_HOTSEAT) {              </span>
<span class="8088576139032825639" onmouseenter="enter('8088576139032825639');" onmouseout="out('8088576139032825639');" style="">2038                                          Log.e(TAG, &quot;Widget found where container != &quot; +                           </span>
<span class="8462700098092543731" onmouseenter="enter('8462700098092543731');" onmouseout="out('8462700098092543731');" style="">2039                                              &quot;CONTAINER_DESKTOP nor CONTAINER_HOTSEAT - ignoring!&quot;);               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">2040                                          continue;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2041                                      }                                                                             </span>
<span  style="">2042                                                                                                                    </span>
<span class="3497044279011134930" onmouseenter="enter('3497044279011134930');" onmouseout="out('3497044279011134930');" style="">2043                                      appWidgetInfo.container = c.getInt(containerIndex);                           </span>
<span class="-458155091382680868" onmouseenter="enter('-458155091382680868');" onmouseout="out('-458155091382680868');" style="">2044                                      // check &amp; update map of what&#x27;s occupied                                      </span>
<span class="-3543381260069090083" onmouseenter="enter('-3543381260069090083');" onmouseout="out('-3543381260069090083');" style="">2045                                      deleteOnInvalidPlacement.set(false);                                          </span>
<span class="8646654463595497950" onmouseenter="enter('8646654463595497950');" onmouseout="out('8646654463595497950');" style="">2046                                      if (!checkItemPlacement(occupied, appWidgetInfo,                              </span>
<span class="5949087809990690469" onmouseenter="enter('5949087809990690469');" onmouseout="out('5949087809990690469');" style="">2047                                              deleteOnInvalidPlacement)) {                                          </span>
<span class="-3415376951791182722" onmouseenter="enter('-3415376951791182722');" onmouseout="out('-3415376951791182722');" style="">2048                                          if (deleteOnInvalidPlacement.get()) {                                     </span>
<span class="7394639685897384267" onmouseenter="enter('7394639685897384267');" onmouseout="out('7394639685897384267');" style="">2049                                              itemsToRemove.add(id);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2050                                          }                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2051                                          break;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2052                                      }                                                                             </span>
<span class="1434382407220101710" onmouseenter="enter('1434382407220101710');" onmouseout="out('1434382407220101710');" style="">2053                                      String providerName = provider.provider.flattenToString();                    </span>
<span class="-497618701172789575" onmouseenter="enter('-497618701172789575');" onmouseout="out('-497618701172789575');" style="">2054                                      if (!providerName.equals(savedProvider)) {                                    </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2055                                          ContentValues values = new ContentValues();                               </span>
<span class="-1769279011780203877" onmouseenter="enter('-1769279011780203877');" onmouseout="out('-1769279011780203877');" style="">2056                                          values.put(LauncherSettings.Favorites.APPWIDGET_PROVIDER,                 </span>
<span class="-4101567385035018098" onmouseenter="enter('-4101567385035018098');" onmouseout="out('-4101567385035018098');" style="">2057                                                  providerName);                                                    </span>
<span class="-959980003681222645" onmouseenter="enter('-959980003681222645');" onmouseout="out('-959980003681222645');" style="">2058                                          String where = BaseColumns._ID + &quot;= ?&quot;;                                   </span>
<span class="7642359228989935564" onmouseenter="enter('7642359228989935564');" onmouseout="out('7642359228989935564');" style="">2059                                          String[] args = {Integer.toString(c.getInt(idIndex))};                    </span>
<span class="-4464498584801213384" onmouseenter="enter('-4464498584801213384');" onmouseout="out('-4464498584801213384');" style="">2060                                          contentResolver.update(contentUri, values, where, args);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2061                                      }                                                                             </span>
<span class="-5618854840311135348" onmouseenter="enter('-5618854840311135348');" onmouseout="out('-5618854840311135348');" style="">2062                                      sBgItemsIdMap.put(appWidgetInfo.id, appWidgetInfo);                           </span>
<span class="-6085617845739613540" onmouseenter="enter('-6085617845739613540');" onmouseout="out('-6085617845739613540');" style="">2063                                      sBgAppWidgets.add(appWidgetInfo);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2064                                  }                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2065                                  break;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2066                              }                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">2067                          } catch (Exception e) {                                                                   </span>
<span class="5473197829797399592" onmouseenter="enter('5473197829797399592');" onmouseout="out('5473197829797399592');" style="">2068                              Launcher.addDumpLog(TAG, &quot;Desktop items loading interrupted&quot;, e, true);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2069                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2070                      }                                                                                             </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style="">2071                  } finally {                                                                                       </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2072                      if (c != null) {                                                                              </span>
<span class="-835460676370007859" onmouseenter="enter('-835460676370007859');" onmouseout="out('-835460676370007859');" style="">2073                          c.close();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2074                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2075                  }                                                                                                 </span>
<span  style="">2076                                                                                                                    </span>
<span class="3320499870953658089" onmouseenter="enter('3320499870953658089');" onmouseout="out('3320499870953658089');" style="">2077                  // Break early if we&#x27;ve stopped loading                                                           </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2078                  if (mStopped) {                                                                                   </span>
<span class="8635207088906960496" onmouseenter="enter('8635207088906960496');" onmouseout="out('8635207088906960496');" style="">2079                      clearSBgDataStructures();                                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2080                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2081                  }                                                                                                 </span>
<span  style="">2082                                                                                                                    </span>
<span class="-1044970196577970229" onmouseenter="enter('-1044970196577970229');" onmouseout="out('-1044970196577970229');" style="">2083                  if (itemsToRemove.size() &gt; 0) {                                                                   </span>
<span class="5677517768170489521" onmouseenter="enter('5677517768170489521');" onmouseout="out('5677517768170489521');" style="">2084                      ContentProviderClient client = contentResolver.acquireContentProviderClient(                  </span>
<span class="-41995321024364961" onmouseenter="enter('-41995321024364961');" onmouseout="out('-41995321024364961');" style="">2085                              LauncherSettings.Favorites.CONTENT_URI);                                              </span>
<span class="-6328990658741073682" onmouseenter="enter('-6328990658741073682');" onmouseout="out('-6328990658741073682');" style="">2086                      // Remove dead items                                                                          </span>
<span class="-2206673557334024830" onmouseenter="enter('-2206673557334024830');" onmouseout="out('-2206673557334024830');" style="">2087                      for (long id : itemsToRemove) {                                                               </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2088                          if (DEBUG_LOADERS) {                                                                      </span>
<span class="1693656419727492070" onmouseenter="enter('1693656419727492070');" onmouseout="out('1693656419727492070');" style="">2089                              Log.d(TAG, &quot;Removed id = &quot; + id);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2090                          }                                                                                         </span>
<span class="-756547997470617115" onmouseenter="enter('-756547997470617115');" onmouseout="out('-756547997470617115');" style="">2091                          // Don&#x27;t notify content observers                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2092                          try {                                                                                     </span>
<span class="-2525008622658612811" onmouseenter="enter('-2525008622658612811');" onmouseout="out('-2525008622658612811');" style="">2093                              client.delete(LauncherSettings.Favorites.getContentUri(id, false),                    </span>
<span class="789653475627010164" onmouseenter="enter('789653475627010164');" onmouseout="out('789653475627010164');" style="">2094                                      null, null);                                                                  </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2095                          } catch (RemoteException e) {                                                             </span>
<span class="1576133554677134200" onmouseenter="enter('1576133554677134200');" onmouseout="out('1576133554677134200');" style="">2096                              Log.w(TAG, &quot;Could not remove id = &quot; + id);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2097                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2098                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2099                  }                                                                                                 </span>
<span  style="">2100                                                                                                                    </span>
<span class="5384601782943406631" onmouseenter="enter('5384601782943406631');" onmouseout="out('5384601782943406631');" style="">2101                  if (restoredRows.size() &gt; 0) {                                                                    </span>
<span class="-7146881939578869751" onmouseenter="enter('-7146881939578869751');" onmouseout="out('-7146881939578869751');" style="">2102                      ContentProviderClient updater = contentResolver.acquireContentProviderClient(                 </span>
<span class="-41995321024364961" onmouseenter="enter('-41995321024364961');" onmouseout="out('-41995321024364961');" style="">2103                              LauncherSettings.Favorites.CONTENT_URI);                                              </span>
<span class="7218829760546841504" onmouseenter="enter('7218829760546841504');" onmouseout="out('7218829760546841504');" style="">2104                      // Update restored items that no longer require special handling                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2105                      try {                                                                                         </span>
<span class="-9131750597640912652" onmouseenter="enter('-9131750597640912652');" onmouseout="out('-9131750597640912652');" style="">2106                          StringBuilder selectionBuilder = new StringBuilder();                                     </span>
<span class="-2095273116509361612" onmouseenter="enter('-2095273116509361612');" onmouseout="out('-2095273116509361612');" style="">2107                          selectionBuilder.append(LauncherSettings.Favorites._ID);                                  </span>
<span class="6461653116160679746" onmouseenter="enter('6461653116160679746');" onmouseout="out('6461653116160679746');" style="">2108                          selectionBuilder.append(&quot; IN (&quot;);                                                         </span>
<span class="5779162458108712939" onmouseenter="enter('5779162458108712939');" onmouseout="out('5779162458108712939');" style="">2109                          selectionBuilder.append(TextUtils.join(&quot;, &quot;, restoredRows));                              </span>
<span class="-266914319355369866" onmouseenter="enter('-266914319355369866');" onmouseout="out('-266914319355369866');" style="">2110                          selectionBuilder.append(&quot;)&quot;);                                                             </span>
<span class="-1148718858541057189" onmouseenter="enter('-1148718858541057189');" onmouseout="out('-1148718858541057189');" style="">2111                          ContentValues values = new ContentValues();                                               </span>
<span class="-8469115157851156621" onmouseenter="enter('-8469115157851156621');" onmouseout="out('-8469115157851156621');" style="">2112                          values.put(LauncherSettings.Favorites.RESTORED, 0);                                       </span>
<span class="8477028357087705336" onmouseenter="enter('8477028357087705336');" onmouseout="out('8477028357087705336');" style="">2113                          updater.update(LauncherSettings.Favorites.CONTENT_URI,                                    </span>
<span class="-593768018781143118" onmouseenter="enter('-593768018781143118');" onmouseout="out('-593768018781143118');" style="">2114                                  values, selectionBuilder.toString(), null);                                       </span>
<span class="-5250370531964357382" onmouseenter="enter('-5250370531964357382');" onmouseout="out('-5250370531964357382');" style="">2115                      } catch (RemoteException e) {                                                                 </span>
<span class="-2048384695223094681" onmouseenter="enter('-2048384695223094681');" onmouseout="out('-2048384695223094681');" style="">2116                          Log.w(TAG, &quot;Could not update restored rows&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2117                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2118                  }                                                                                                 </span>
<span  style="">2119                                                                                                                    </span>
<span class="-4804263783578470698" onmouseenter="enter('-4804263783578470698');" onmouseout="out('-4804263783578470698');" style="">2120                  if (loadedOldDb) {                                                                                </span>
<span class="7600073100480404232" onmouseenter="enter('7600073100480404232');" onmouseout="out('7600073100480404232');" style="">2121                      long maxScreenId = 0;                                                                         </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2122                      // If we&#x27;re importing we use the old screen order.                                            </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2123                      for (ItemInfo item: sBgItemsIdMap.values()) {                                                 </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2124                          long screenId = item.screenId;                                                            </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2125                          if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                     </span>
<span class="2624616925341674614" onmouseenter="enter('2624616925341674614');" onmouseout="out('2624616925341674614');" style="">2126                                  !sBgWorkspaceScreens.contains(screenId)) {                                        </span>
<span class="-7031445051311703943" onmouseenter="enter('-7031445051311703943');" onmouseout="out('-7031445051311703943');" style="">2127                              sBgWorkspaceScreens.add(screenId);                                                    </span>
<span class="3854679960473080150" onmouseenter="enter('3854679960473080150');" onmouseout="out('3854679960473080150');" style="">2128                              if (screenId &gt; maxScreenId) {                                                         </span>
<span class="1021049293401799489" onmouseenter="enter('1021049293401799489');" onmouseout="out('1021049293401799489');" style="">2129                                  maxScreenId = screenId;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2130                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2131                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2132                      }                                                                                             </span>
<span class="6350361387624057443" onmouseenter="enter('6350361387624057443');" onmouseout="out('6350361387624057443');" style="">2133                      Collections.sort(sBgWorkspaceScreens);                                                        </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2134                      // Log to disk                                                                                </span>
<span class="866898408466051726" onmouseenter="enter('866898408466051726');" onmouseout="out('866898408466051726');" style="">2135                      Launcher.addDumpLog(TAG, &quot;11683562 -   maxScreenId: &quot; + maxScreenId, true);                   </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2136                      Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                               </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2137                              TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                                     </span>
<span  style="">2138                                                                                                                    </span>
<span class="7230913638388732518" onmouseenter="enter('7230913638388732518');" onmouseout="out('7230913638388732518');" style="">2139                      LauncherAppState.getLauncherProvider().updateMaxScreenId(maxScreenId);                        </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2140                      updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                                     </span>
<span  style="">2141                                                                                                                    </span>
<span class="7660079450024453672" onmouseenter="enter('7660079450024453672');" onmouseout="out('7660079450024453672');" style="">2142                      // Update the max item id after we load an old db                                             </span>
<span class="-1395936485676380465" onmouseenter="enter('-1395936485676380465');" onmouseout="out('-1395936485676380465');" style="">2143                      long maxItemId = 0;                                                                           </span>
<span class="6275853299781689071" onmouseenter="enter('6275853299781689071');" onmouseout="out('6275853299781689071');" style="">2144                      // If we&#x27;re importing we use the old screen order.                                            </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2145                      for (ItemInfo item: sBgItemsIdMap.values()) {                                                 </span>
<span class="570221416877950678" onmouseenter="enter('570221416877950678');" onmouseout="out('570221416877950678');" style="">2146                          maxItemId = Math.max(maxItemId, item.id);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2147                      }                                                                                             </span>
<span class="-9163109107539651846" onmouseenter="enter('-9163109107539651846');" onmouseout="out('-9163109107539651846');" style="">2148                      LauncherAppState.getLauncherProvider().updateMaxItemId(maxItemId);                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2149                  } else {                                                                                          </span>
<span class="-2685559954044032059" onmouseenter="enter('-2685559954044032059');" onmouseout="out('-2685559954044032059');" style="">2150                      TreeMap&lt;Integer, Long&gt; orderedScreens = loadWorkspaceScreensDb(mContext);                     </span>
<span class="7459378551128097397" onmouseenter="enter('7459378551128097397');" onmouseout="out('7459378551128097397');" style="">2151                      for (Integer i : orderedScreens.keySet()) {                                                   </span>
<span class="6018672691004586758" onmouseenter="enter('6018672691004586758');" onmouseout="out('6018672691004586758');" style="">2152                          sBgWorkspaceScreens.add(orderedScreens.get(i));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2153                      }                                                                                             </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2154                      // Log to disk                                                                                </span>
<span class="1917135156101141009" onmouseenter="enter('1917135156101141009');" onmouseout="out('1917135156101141009');" style="">2155                      Launcher.addDumpLog(TAG, &quot;11683562 -   sBgWorkspaceScreens: &quot; +                               </span>
<span class="7652024818245526756" onmouseenter="enter('7652024818245526756');" onmouseout="out('7652024818245526756');" style="">2156                              TextUtils.join(&quot;, &quot;, sBgWorkspaceScreens), true);                                     </span>
<span  style="">2157                                                                                                                    </span>
<span class="4349099944219760178" onmouseenter="enter('4349099944219760178');" onmouseout="out('4349099944219760178');" style="">2158                      // Remove any empty screens                                                                   </span>
<span class="4802911702169047278" onmouseenter="enter('4802911702169047278');" onmouseout="out('4802911702169047278');" style="">2159                      ArrayList&lt;Long&gt; unusedScreens = new ArrayList&lt;Long&gt;(sBgWorkspaceScreens);                     </span>
<span class="-7658118460023072090" onmouseenter="enter('-7658118460023072090');" onmouseout="out('-7658118460023072090');" style="">2160                      for (ItemInfo item: sBgItemsIdMap.values()) {                                                 </span>
<span class="5217792900410269024" onmouseenter="enter('5217792900410269024');" onmouseout="out('5217792900410269024');" style="">2161                          long screenId = item.screenId;                                                            </span>
<span class="7589215497942675163" onmouseenter="enter('7589215497942675163');" onmouseout="out('7589215497942675163');" style="">2162                          if (item.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                     </span>
<span class="2084246428391599841" onmouseenter="enter('2084246428391599841');" onmouseout="out('2084246428391599841');" style="">2163                                  unusedScreens.contains(screenId)) {                                               </span>
<span class="2563817896724806900" onmouseenter="enter('2563817896724806900');" onmouseout="out('2563817896724806900');" style="">2164                              unusedScreens.remove(screenId);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2165                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2166                      }                                                                                             </span>
<span  style="">2167                                                                                                                    </span>
<span class="589140823506694046" onmouseenter="enter('589140823506694046');" onmouseout="out('589140823506694046');" style="">2168                      // If there are any empty screens remove them, and update.                                    </span>
<span class="-6359391369875412389" onmouseenter="enter('-6359391369875412389');" onmouseout="out('-6359391369875412389');" style="">2169                      if (unusedScreens.size() != 0) {                                                              </span>
<span class="-1491903033538594858" onmouseenter="enter('-1491903033538594858');" onmouseout="out('-1491903033538594858');" style="">2170                          // Log to disk                                                                            </span>
<span class="7523849534574985307" onmouseenter="enter('7523849534574985307');" onmouseout="out('7523849534574985307');" style="">2171                          Launcher.addDumpLog(TAG, &quot;11683562 -   unusedScreens (to be removed): &quot; +                 </span>
<span class="-5777150032383965255" onmouseenter="enter('-5777150032383965255');" onmouseout="out('-5777150032383965255');" style="">2172                                  TextUtils.join(&quot;, &quot;, unusedScreens), true);                                       </span>
<span  style="">2173                                                                                                                    </span>
<span class="672027419163159367" onmouseenter="enter('672027419163159367');" onmouseout="out('672027419163159367');" style="">2174                          sBgWorkspaceScreens.removeAll(unusedScreens);                                             </span>
<span class="-5642605258210852236" onmouseenter="enter('-5642605258210852236');" onmouseout="out('-5642605258210852236');" style="">2175                          updateWorkspaceScreenOrder(context, sBgWorkspaceScreens);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2176                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2177                  }                                                                                                 </span>
<span  style="">2178                                                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2179                  if (DEBUG_LOADERS) {                                                                              </span>
<span class="7893701829803555503" onmouseenter="enter('7893701829803555503');" onmouseout="out('7893701829803555503');" style="">2180                      Log.d(TAG, &quot;loaded workspace in &quot; + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                   </span>
<span class="-4264600990510120523" onmouseenter="enter('-4264600990510120523');" onmouseout="out('-4264600990510120523');" style="">2181                      Log.d(TAG, &quot;workspace layout: &quot;);                                                             </span>
<span class="-7545020173780618827" onmouseenter="enter('-7545020173780618827');" onmouseout="out('-7545020173780618827');" style="">2182                      int nScreens = occupied.size();                                                               </span>
<span class="-1430677680506572849" onmouseenter="enter('-1430677680506572849');" onmouseout="out('-1430677680506572849');" style="">2183                      for (int y = 0; y &lt; countY; y++) {                                                            </span>
<span class="7912371425440139270" onmouseenter="enter('7912371425440139270');" onmouseout="out('7912371425440139270');" style="">2184                          String line = &quot;&quot;;                                                                         </span>
<span  style="">2185                                                                                                                    </span>
<span class="6696569755228044488" onmouseenter="enter('6696569755228044488');" onmouseout="out('6696569755228044488');" style="">2186                          Iterator&lt;Long&gt; iter = occupied.keySet().iterator();                                       </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2187                          while (iter.hasNext()) {                                                                  </span>
<span class="5362610809116292523" onmouseenter="enter('5362610809116292523');" onmouseout="out('5362610809116292523');" style="">2188                              long screenId = iter.next();                                                          </span>
<span class="-6362485911021715109" onmouseenter="enter('-6362485911021715109');" onmouseout="out('-6362485911021715109');" style="">2189                              if (screenId &gt; 0) {                                                                   </span>
<span class="6140668759815587097" onmouseenter="enter('6140668759815587097');" onmouseout="out('6140668759815587097');" style="">2190                                  line += &quot; | &quot;;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2191                              }                                                                                     </span>
<span class="5745233440242438196" onmouseenter="enter('5745233440242438196');" onmouseout="out('5745233440242438196');" style="">2192                              for (int x = 0; x &lt; countX; x++) {                                                    </span>
<span class="5427490612738327413" onmouseenter="enter('5427490612738327413');" onmouseout="out('5427490612738327413');" style="">2193                                  line += ((occupied.get(screenId)[x][y] != null) ? &quot;#&quot; : &quot;.&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2194                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2195                          }                                                                                         </span>
<span class="-6176135763032133271" onmouseenter="enter('-6176135763032133271');" onmouseout="out('-6176135763032133271');" style="">2196                          Log.d(TAG, &quot;[ &quot; + line + &quot; ]&quot;);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2197                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2198                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2199              }                                                                                                     </span>
<span class="-4220264685598194490" onmouseenter="enter('-4220264685598194490');" onmouseout="out('-4220264685598194490');" style="">2200              return loadedOldDb;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2201          }                                                                                                         </span>
<span  style="">2202                                                                                                                    </span>
<span class="2277304499071840713" onmouseenter="enter('2277304499071840713');" onmouseout="out('2277304499071840713');" style="">2203          /** Filters the set of items who are directly or indirectly (via another container) on the                </span>
<span class="1409652257454698285" onmouseenter="enter('1409652257454698285');" onmouseout="out('1409652257454698285');" style="">2204           * specified screen. */                                                                                   </span>
<span class="8795548304182075511" onmouseenter="enter('8795548304182075511');" onmouseout="out('8795548304182075511');" style="">2205          private void filterCurrentWorkspaceItems(long currentScreenId,                                            </span>
<span class="6681054994536048179" onmouseenter="enter('6681054994536048179');" onmouseout="out('6681054994536048179');" style="">2206                  ArrayList&lt;ItemInfo&gt; allWorkspaceItems,                                                            </span>
<span class="-22694560885899086" onmouseenter="enter('-22694560885899086');" onmouseout="out('-22694560885899086');" style="">2207                  ArrayList&lt;ItemInfo&gt; currentScreenItems,                                                           </span>
<span class="-4268074281529251610" onmouseenter="enter('-4268074281529251610');" onmouseout="out('-4268074281529251610');" style="">2208                  ArrayList&lt;ItemInfo&gt; otherScreenItems) {                                                           </span>
<span class="-3054856766549342984" onmouseenter="enter('-3054856766549342984');" onmouseout="out('-3054856766549342984');" style="">2209              // Purge any null ItemInfos                                                                           </span>
<span class="4510640209834542816" onmouseenter="enter('4510640209834542816');" onmouseout="out('4510640209834542816');" style="">2210              Iterator&lt;ItemInfo&gt; iter = allWorkspaceItems.iterator();                                               </span>
<span class="-1112121426929780205" onmouseenter="enter('-1112121426929780205');" onmouseout="out('-1112121426929780205');" style="">2211              while (iter.hasNext()) {                                                                              </span>
<span class="1859715860533284250" onmouseenter="enter('1859715860533284250');" onmouseout="out('1859715860533284250');" style="">2212                  ItemInfo i = iter.next();                                                                         </span>
<span class="-7805046366392198151" onmouseenter="enter('-7805046366392198151');" onmouseout="out('-7805046366392198151');" style="">2213                  if (i == null) {                                                                                  </span>
<span class="6531218048836267679" onmouseenter="enter('6531218048836267679');" onmouseout="out('6531218048836267679');" style="">2214                      iter.remove();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2215                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2216              }                                                                                                     </span>
<span  style="">2217                                                                                                                    </span>
<span class="-717820765531723775" onmouseenter="enter('-717820765531723775');" onmouseout="out('-717820765531723775');" style="">2218              // Order the set of items by their containers first, this allows use to walk through the              </span>
<span class="603841325148737819" onmouseenter="enter('603841325148737819');" onmouseout="out('603841325148737819');" style="">2219              // list sequentially, build up a list of containers that are in the specified screen,                 </span>
<span class="4141488165570775341" onmouseenter="enter('4141488165570775341');" onmouseout="out('4141488165570775341');" style="">2220              // as well as all items in those containers.                                                          </span>
<span class="-9034158841912487174" onmouseenter="enter('-9034158841912487174');" onmouseout="out('-9034158841912487174');" style="">2221              Set&lt;Long&gt; itemsOnScreen = new HashSet&lt;Long&gt;();                                                        </span>
<span class="8519661802904254165" onmouseenter="enter('8519661802904254165');" onmouseout="out('8519661802904254165');" style="">2222              Collections.sort(allWorkspaceItems, new Comparator&lt;ItemInfo&gt;() {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2223                  @Override                                                                                         </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2224                  public int compare(ItemInfo lhs, ItemInfo rhs) {                                                  </span>
<span class="-1156155221818606914" onmouseenter="enter('-1156155221818606914');" onmouseout="out('-1156155221818606914');" style="">2225                      return (int) (lhs.container - rhs.container);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2226                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2227              });                                                                                                   </span>
<span class="8857216393150717712" onmouseenter="enter('8857216393150717712');" onmouseout="out('8857216393150717712');" style="">2228              for (ItemInfo info : allWorkspaceItems) {                                                             </span>
<span class="6411036295955728093" onmouseenter="enter('6411036295955728093');" onmouseout="out('6411036295955728093');" style="">2229                  if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP) {                             </span>
<span class="243509375570472667" onmouseenter="enter('243509375570472667');" onmouseout="out('243509375570472667');" style="">2230                      if (info.screenId == currentScreenId) {                                                       </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2231                          currentScreenItems.add(info);                                                             </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2232                          itemsOnScreen.add(info.id);                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2233                      } else {                                                                                      </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2234                          otherScreenItems.add(info);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2235                      }                                                                                             </span>
<span class="8644731164584182238" onmouseenter="enter('8644731164584182238');" onmouseout="out('8644731164584182238');" style="">2236                  } else if (info.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {                      </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2237                      currentScreenItems.add(info);                                                                 </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2238                      itemsOnScreen.add(info.id);                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2239                  } else {                                                                                          </span>
<span class="580654991680085358" onmouseenter="enter('580654991680085358');" onmouseout="out('580654991680085358');" style="">2240                      if (itemsOnScreen.contains(info.container)) {                                                 </span>
<span class="-8197240363856213378" onmouseenter="enter('-8197240363856213378');" onmouseout="out('-8197240363856213378');" style="">2241                          currentScreenItems.add(info);                                                             </span>
<span class="3780714932105127414" onmouseenter="enter('3780714932105127414');" onmouseout="out('3780714932105127414');" style="">2242                          itemsOnScreen.add(info.id);                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2243                      } else {                                                                                      </span>
<span class="245888276970520968" onmouseenter="enter('245888276970520968');" onmouseout="out('245888276970520968');" style="">2244                          otherScreenItems.add(info);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2245                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2246                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2247              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2248          }                                                                                                         </span>
<span  style="">2249                                                                                                                    </span>
<span class="-2345588268248786161" onmouseenter="enter('-2345588268248786161');" onmouseout="out('-2345588268248786161');" style="">2250          /** Filters the set of widgets which are on the specified screen. */                                      </span>
<span class="7796530082634599981" onmouseenter="enter('7796530082634599981');" onmouseout="out('7796530082634599981');" style="">2251          private void filterCurrentAppWidgets(long currentScreenId,                                                </span>
<span class="-6457080946795761374" onmouseenter="enter('-6457080946795761374');" onmouseout="out('-6457080946795761374');" style="">2252                  ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                                      </span>
<span class="-4085190208868862406" onmouseenter="enter('-4085190208868862406');" onmouseout="out('-4085190208868862406');" style="">2253                  ArrayList&lt;LauncherAppWidgetInfo&gt; currentScreenWidgets,                                            </span>
<span class="-9000722418092093369" onmouseenter="enter('-9000722418092093369');" onmouseout="out('-9000722418092093369');" style="">2254                  ArrayList&lt;LauncherAppWidgetInfo&gt; otherScreenWidgets) {                                            </span>
<span  style="">2255                                                                                                                    </span>
<span class="298213435107913715" onmouseenter="enter('298213435107913715');" onmouseout="out('298213435107913715');" style="">2256              for (LauncherAppWidgetInfo widget : appWidgets) {                                                     </span>
<span class="2476844624609784590" onmouseenter="enter('2476844624609784590');" onmouseout="out('2476844624609784590');" style="">2257                  if (widget == null) continue;                                                                     </span>
<span class="8795712760973120755" onmouseenter="enter('8795712760973120755');" onmouseout="out('8795712760973120755');" style="">2258                  if (widget.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                           </span>
<span class="-573639449604607321" onmouseenter="enter('-573639449604607321');" onmouseout="out('-573639449604607321');" style="">2259                          widget.screenId == currentScreenId) {                                                     </span>
<span class="-7467860973438659792" onmouseenter="enter('-7467860973438659792');" onmouseout="out('-7467860973438659792');" style="">2260                      currentScreenWidgets.add(widget);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2261                  } else {                                                                                          </span>
<span class="918127297832417083" onmouseenter="enter('918127297832417083');" onmouseout="out('918127297832417083');" style="">2262                      otherScreenWidgets.add(widget);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2263                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2264              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2265          }                                                                                                         </span>
<span  style="">2266                                                                                                                    </span>
<span class="2890739696266248059" onmouseenter="enter('2890739696266248059');" onmouseout="out('2890739696266248059');" style="">2267          /** Filters the set of folders which are on the specified screen. */                                      </span>
<span class="1006156668309097499" onmouseenter="enter('1006156668309097499');" onmouseout="out('1006156668309097499');" style="">2268          private void filterCurrentFolders(long currentScreenId,                                                   </span>
<span class="5542015090877593488" onmouseenter="enter('5542015090877593488');" onmouseout="out('5542015090877593488');" style="">2269                  HashMap&lt;Long, ItemInfo&gt; itemsIdMap,                                                               </span>
<span class="5439463415012784721" onmouseenter="enter('5439463415012784721');" onmouseout="out('5439463415012784721');" style="">2270                  HashMap&lt;Long, FolderInfo&gt; folders,                                                                </span>
<span class="-835326304871961386" onmouseenter="enter('-835326304871961386');" onmouseout="out('-835326304871961386');" style="">2271                  HashMap&lt;Long, FolderInfo&gt; currentScreenFolders,                                                   </span>
<span class="-5337898381804311151" onmouseenter="enter('-5337898381804311151');" onmouseout="out('-5337898381804311151');" style="">2272                  HashMap&lt;Long, FolderInfo&gt; otherScreenFolders) {                                                   </span>
<span  style="">2273                                                                                                                    </span>
<span class="5476103458254751398" onmouseenter="enter('5476103458254751398');" onmouseout="out('5476103458254751398');" style="">2274              for (long id : folders.keySet()) {                                                                    </span>
<span class="-1043527829048640643" onmouseenter="enter('-1043527829048640643');" onmouseout="out('-1043527829048640643');" style="">2275                  ItemInfo info = itemsIdMap.get(id);                                                               </span>
<span class="2660177146353218833" onmouseenter="enter('2660177146353218833');" onmouseout="out('2660177146353218833');" style="">2276                  FolderInfo folder = folders.get(id);                                                              </span>
<span class="1070396563257369459" onmouseenter="enter('1070396563257369459');" onmouseout="out('1070396563257369459');" style="">2277                  if (info == null || folder == null) continue;                                                     </span>
<span class="-2700526009056688618" onmouseenter="enter('-2700526009056688618');" onmouseout="out('-2700526009056688618');" style="">2278                  if (info.container == LauncherSettings.Favorites.CONTAINER_DESKTOP &amp;&amp;                             </span>
<span class="-6694119585175412501" onmouseenter="enter('-6694119585175412501');" onmouseout="out('-6694119585175412501');" style="">2279                          info.screenId == currentScreenId) {                                                       </span>
<span class="9103793645851851238" onmouseenter="enter('9103793645851851238');" onmouseout="out('9103793645851851238');" style="">2280                      currentScreenFolders.put(id, folder);                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2281                  } else {                                                                                          </span>
<span class="2209694610169579401" onmouseenter="enter('2209694610169579401');" onmouseout="out('2209694610169579401');" style="">2282                      otherScreenFolders.put(id, folder);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2283                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2284              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2285          }                                                                                                         </span>
<span  style="">2286                                                                                                                    </span>
<span class="-1404838629334872973" onmouseenter="enter('-1404838629334872973');" onmouseout="out('-1404838629334872973');" style="">2287          /** Sorts the set of items by hotseat, workspace (spatially from top to bottom, left to                   </span>
<span class="2331484748997422212" onmouseenter="enter('2331484748997422212');" onmouseout="out('2331484748997422212');" style="">2288           * right) */                                                                                              </span>
<span class="4197577433481844567" onmouseenter="enter('4197577433481844567');" onmouseout="out('4197577433481844567');" style="">2289          private void sortWorkspaceItemsSpatially(ArrayList&lt;ItemInfo&gt; workspaceItems) {                            </span>
<span class="1185328747399966274" onmouseenter="enter('1185328747399966274');" onmouseout="out('1185328747399966274');" style="">2290              final LauncherAppState app = LauncherAppState.getInstance();                                          </span>
<span class="7124839587395892858" onmouseenter="enter('7124839587395892858');" onmouseout="out('7124839587395892858');" style="">2291              final DeviceProfile grid = app.getDynamicGrid().getDeviceProfile();                                   </span>
<span class="7420301678455304067" onmouseenter="enter('7420301678455304067');" onmouseout="out('7420301678455304067');" style="">2292              // XXX: review this                                                                                   </span>
<span class="5036789581710507500" onmouseenter="enter('5036789581710507500');" onmouseout="out('5036789581710507500');" style="">2293              Collections.sort(workspaceItems, new Comparator&lt;ItemInfo&gt;() {                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2294                  @Override                                                                                         </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style="">2295                  public int compare(ItemInfo lhs, ItemInfo rhs) {                                                  </span>
<span class="7519014981914073063" onmouseenter="enter('7519014981914073063');" onmouseout="out('7519014981914073063');" style="">2296                      int cellCountX = (int) grid.numColumns;                                                       </span>
<span class="5038685396458105053" onmouseenter="enter('5038685396458105053');" onmouseout="out('5038685396458105053');" style="">2297                      int cellCountY = (int) grid.numRows;                                                          </span>
<span class="2270724071285143981" onmouseenter="enter('2270724071285143981');" onmouseout="out('2270724071285143981');" style="">2298                      int screenOffset = cellCountX * cellCountY;                                                   </span>
<span class="-1359829540566141263" onmouseenter="enter('-1359829540566141263');" onmouseout="out('-1359829540566141263');" style="">2299                      int containerOffset = screenOffset * (Launcher.SCREEN_COUNT + 1); // +1 hotseat               </span>
<span class="-5686828087182476360" onmouseenter="enter('-5686828087182476360');" onmouseout="out('-5686828087182476360');" style="">2300                      long lr = (lhs.container * containerOffset + lhs.screenId * screenOffset +                    </span>
<span class="7712455780852264002" onmouseenter="enter('7712455780852264002');" onmouseout="out('7712455780852264002');" style="">2301                              lhs.cellY * cellCountX + lhs.cellX);                                                  </span>
<span class="4979104026657461493" onmouseenter="enter('4979104026657461493');" onmouseout="out('4979104026657461493');" style="">2302                      long rr = (rhs.container * containerOffset + rhs.screenId * screenOffset +                    </span>
<span class="-2381270400025166051" onmouseenter="enter('-2381270400025166051');" onmouseout="out('-2381270400025166051');" style="">2303                              rhs.cellY * cellCountX + rhs.cellX);                                                  </span>
<span class="-4118467969899844825" onmouseenter="enter('-4118467969899844825');" onmouseout="out('-4118467969899844825');" style="">2304                      return (int) (lr - rr);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2305                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2306              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2307          }                                                                                                         </span>
<span  style="">2308                                                                                                                    </span>
<span class="-2914095713166652734" onmouseenter="enter('-2914095713166652734');" onmouseout="out('-2914095713166652734');" style="">2309          private void bindWorkspaceScreens(final Callbacks oldCallbacks,                                           </span>
<span class="-4834279311466229697" onmouseenter="enter('-4834279311466229697');" onmouseout="out('-4834279311466229697');" style="">2310                  final ArrayList&lt;Long&gt; orderedScreens) {                                                           </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2311              final Runnable r = new Runnable() {                                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2312                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2313                  public void run() {                                                                               </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2314                      Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                          </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2315                      if (callbacks != null) {                                                                      </span>
<span class="-657438592163932392" onmouseenter="enter('-657438592163932392');" onmouseout="out('-657438592163932392');" style="">2316                          callbacks.bindScreens(orderedScreens);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2317                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2318                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2319              };                                                                                                    </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2320              runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2321          }                                                                                                         </span>
<span  style="">2322                                                                                                                    </span>
<span class="2462723938814167389" onmouseenter="enter('2462723938814167389');" onmouseout="out('2462723938814167389');" style="">2323          private void bindWorkspaceItems(final Callbacks oldCallbacks,                                             </span>
<span class="3131608111144182051" onmouseenter="enter('3131608111144182051');" onmouseout="out('3131608111144182051');" style="">2324                  final ArrayList&lt;ItemInfo&gt; workspaceItems,                                                         </span>
<span class="-9171435870290402492" onmouseenter="enter('-9171435870290402492');" onmouseout="out('-9171435870290402492');" style="">2325                  final ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets,                                                </span>
<span class="-215271553361392889" onmouseenter="enter('-215271553361392889');" onmouseout="out('-215271553361392889');" style="">2326                  final HashMap&lt;Long, FolderInfo&gt; folders,                                                          </span>
<span class="8358584326194096705" onmouseenter="enter('8358584326194096705');" onmouseout="out('8358584326194096705');" style="">2327                  ArrayList&lt;Runnable&gt; deferredBindRunnables) {                                                      </span>
<span  style="">2328                                                                                                                    </span>
<span class="6705996702729308966" onmouseenter="enter('6705996702729308966');" onmouseout="out('6705996702729308966');" style="">2329              final boolean postOnMainThread = (deferredBindRunnables != null);                                     </span>
<span  style="">2330                                                                                                                    </span>
<span class="-8582136977498244048" onmouseenter="enter('-8582136977498244048');" onmouseout="out('-8582136977498244048');" style="">2331              // Bind the workspace items                                                                           </span>
<span class="-7354566132986496753" onmouseenter="enter('-7354566132986496753');" onmouseout="out('-7354566132986496753');" style="">2332              int N = workspaceItems.size();                                                                        </span>
<span class="8316943469476905111" onmouseenter="enter('8316943469476905111');" onmouseout="out('8316943469476905111');" style="">2333              for (int i = 0; i &lt; N; i += ITEMS_CHUNK) {                                                            </span>
<span class="4892427267481855411" onmouseenter="enter('4892427267481855411');" onmouseout="out('4892427267481855411');" style="">2334                  final int start = i;                                                                              </span>
<span class="-1876539668545683746" onmouseenter="enter('-1876539668545683746');" onmouseout="out('-1876539668545683746');" style="">2335                  final int chunkSize = (i+ITEMS_CHUNK &lt;= N) ? ITEMS_CHUNK : (N-i);                                 </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2336                  final Runnable r = new Runnable() {                                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2337                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2338                      public void run() {                                                                           </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2339                          Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2340                          if (callbacks != null) {                                                                  </span>
<span class="5089922212197568209" onmouseenter="enter('5089922212197568209');" onmouseout="out('5089922212197568209');" style="">2341                              callbacks.bindItems(workspaceItems, start, start+chunkSize,                           </span>
<span class="9106099237950392606" onmouseenter="enter('9106099237950392606');" onmouseout="out('9106099237950392606');" style="">2342                                      false);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2343                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2344                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2345                  };                                                                                                </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2346                  if (postOnMainThread) {                                                                           </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2347                      deferredBindRunnables.add(r);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2348                  } else {                                                                                          </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2349                      runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2350                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2351              }                                                                                                     </span>
<span  style="">2352                                                                                                                    </span>
<span class="-3289339942871725334" onmouseenter="enter('-3289339942871725334');" onmouseout="out('-3289339942871725334');" style="">2353              // Bind the folders                                                                                   </span>
<span class="-7483796215228262161" onmouseenter="enter('-7483796215228262161');" onmouseout="out('-7483796215228262161');" style="">2354              if (!folders.isEmpty()) {                                                                             </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2355                  final Runnable r = new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2356                      public void run() {                                                                           </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2357                          Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2358                          if (callbacks != null) {                                                                  </span>
<span class="-5386182796873001970" onmouseenter="enter('-5386182796873001970');" onmouseout="out('-5386182796873001970');" style="">2359                              callbacks.bindFolders(folders);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2360                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2361                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2362                  };                                                                                                </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2363                  if (postOnMainThread) {                                                                           </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2364                      deferredBindRunnables.add(r);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2365                  } else {                                                                                          </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2366                      runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2367                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2368              }                                                                                                     </span>
<span  style="">2369                                                                                                                    </span>
<span class="-3655716380766613611" onmouseenter="enter('-3655716380766613611');" onmouseout="out('-3655716380766613611');" style="">2370              // Bind the widgets, one at a time                                                                    </span>
<span class="-8489280060790503293" onmouseenter="enter('-8489280060790503293');" onmouseout="out('-8489280060790503293');" style="">2371              N = appWidgets.size();                                                                                </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="">2372              for (int i = 0; i &lt; N; i++) {                                                                         </span>
<span class="1244623159456991119" onmouseenter="enter('1244623159456991119');" onmouseout="out('1244623159456991119');" style="">2373                  final LauncherAppWidgetInfo widget = appWidgets.get(i);                                           </span>
<span class="-2371757962046982678" onmouseenter="enter('-2371757962046982678');" onmouseout="out('-2371757962046982678');" style="">2374                  final Runnable r = new Runnable() {                                                               </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2375                      public void run() {                                                                           </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2376                          Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                      </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2377                          if (callbacks != null) {                                                                  </span>
<span class="-6128295543460120155" onmouseenter="enter('-6128295543460120155');" onmouseout="out('-6128295543460120155');" style="">2378                              callbacks.bindAppWidget(widget);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2379                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2380                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2381                  };                                                                                                </span>
<span class="4553666601845516242" onmouseenter="enter('4553666601845516242');" onmouseout="out('4553666601845516242');" style="">2382                  if (postOnMainThread) {                                                                           </span>
<span class="-3968808142934948073" onmouseenter="enter('-3968808142934948073');" onmouseout="out('-3968808142934948073');" style="">2383                      deferredBindRunnables.add(r);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2384                  } else {                                                                                          </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2385                      runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2386                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2387              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2388          }                                                                                                         </span>
<span  style="">2389                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2390          /**                                                                                                       </span>
<span class="2657234197326019604" onmouseenter="enter('2657234197326019604');" onmouseout="out('2657234197326019604');" style="">2391           * Binds all loaded data to actual views on the main thread.                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2392           */                                                                                                       </span>
<span class="2515782410575020505" onmouseenter="enter('2515782410575020505');" onmouseout="out('2515782410575020505');" style="">2393          private void bindWorkspace(int synchronizeBindPage, final boolean isUpgradePath) {                        </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2394              final long t = SystemClock.uptimeMillis();                                                            </span>
<span class="-6867724507948428803" onmouseenter="enter('-6867724507948428803');" onmouseout="out('-6867724507948428803');" style="">2395              Runnable r;                                                                                           </span>
<span  style="">2396                                                                                                                    </span>
<span class="7433359470613785749" onmouseenter="enter('7433359470613785749');" onmouseout="out('7433359470613785749');" style="">2397              // Don&#x27;t use these two variables in any of the callback runnables.                                    </span>
<span class="-3941343762342876699" onmouseenter="enter('-3941343762342876699');" onmouseout="out('-3941343762342876699');" style="">2398              // Otherwise we hold a reference to them.                                                             </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2399              final Callbacks oldCallbacks = mCallbacks.get();                                                      </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2400              if (oldCallbacks == null) {                                                                           </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2401                  // This launcher has exited and nobody bothered to tell us.  Just bail.                           </span>
<span class="3451244406562267616" onmouseenter="enter('3451244406562267616');" onmouseout="out('3451244406562267616');" style="">2402                  Log.w(TAG, &quot;LoaderTask running with no launcher&quot;);                                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2403                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2404              }                                                                                                     </span>
<span  style="">2405                                                                                                                    </span>
<span class="1896400737527502430" onmouseenter="enter('1896400737527502430');" onmouseout="out('1896400737527502430');" style="">2406              // Save a copy of all the bg-thread collections                                                       </span>
<span class="8376150118125167095" onmouseenter="enter('8376150118125167095');" onmouseout="out('8376150118125167095');" style="">2407              ArrayList&lt;ItemInfo&gt; workspaceItems = new ArrayList&lt;ItemInfo&gt;();                                       </span>
<span class="-9044996375001817267" onmouseenter="enter('-9044996375001817267');" onmouseout="out('-9044996375001817267');" style="">2408              ArrayList&lt;LauncherAppWidgetInfo&gt; appWidgets =                                                         </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2409                      new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                       </span>
<span class="1486993560554459234" onmouseenter="enter('1486993560554459234');" onmouseout="out('1486993560554459234');" style="">2410              HashMap&lt;Long, FolderInfo&gt; folders = new HashMap&lt;Long, FolderInfo&gt;();                                  </span>
<span class="-2531396011753159513" onmouseenter="enter('-2531396011753159513');" onmouseout="out('-2531396011753159513');" style="">2411              HashMap&lt;Long, ItemInfo&gt; itemsIdMap = new HashMap&lt;Long, ItemInfo&gt;();                                   </span>
<span class="2122428953856879736" onmouseenter="enter('2122428953856879736');" onmouseout="out('2122428953856879736');" style="">2412              ArrayList&lt;Long&gt; orderedScreenIds = new ArrayList&lt;Long&gt;();                                             </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2413              synchronized (sBgLock) {                                                                              </span>
<span class="2318166879831487746" onmouseenter="enter('2318166879831487746');" onmouseout="out('2318166879831487746');" style="">2414                  workspaceItems.addAll(sBgWorkspaceItems);                                                         </span>
<span class="5776161881735381038" onmouseenter="enter('5776161881735381038');" onmouseout="out('5776161881735381038');" style="">2415                  appWidgets.addAll(sBgAppWidgets);                                                                 </span>
<span class="1929780610659636161" onmouseenter="enter('1929780610659636161');" onmouseout="out('1929780610659636161');" style="">2416                  folders.putAll(sBgFolders);                                                                       </span>
<span class="3382494184063613290" onmouseenter="enter('3382494184063613290');" onmouseout="out('3382494184063613290');" style="">2417                  itemsIdMap.putAll(sBgItemsIdMap);                                                                 </span>
<span class="-8476373911620507604" onmouseenter="enter('-8476373911620507604');" onmouseout="out('-8476373911620507604');" style="">2418                  orderedScreenIds.addAll(sBgWorkspaceScreens);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2419              }                                                                                                     </span>
<span  style="">2420                                                                                                                    </span>
<span class="-6727444800593242016" onmouseenter="enter('-6727444800593242016');" onmouseout="out('-6727444800593242016');" style="">2421              final boolean isLoadingSynchronously =                                                                </span>
<span class="-5819807820500279130" onmouseenter="enter('-5819807820500279130');" onmouseout="out('-5819807820500279130');" style="">2422                      synchronizeBindPage != PagedView.INVALID_RESTORE_PAGE;                                        </span>
<span class="2949253642379813881" onmouseenter="enter('2949253642379813881');" onmouseout="out('2949253642379813881');" style="">2423              int currScreen = isLoadingSynchronously ? synchronizeBindPage :                                       </span>
<span class="-3178994835189561329" onmouseenter="enter('-3178994835189561329');" onmouseout="out('-3178994835189561329');" style="">2424                  oldCallbacks.getCurrentWorkspaceScreen();                                                         </span>
<span class="-8072033936298463796" onmouseenter="enter('-8072033936298463796');" onmouseout="out('-8072033936298463796');" style="">2425              if (currScreen &gt;= orderedScreenIds.size()) {                                                          </span>
<span class="6825640116866860115" onmouseenter="enter('6825640116866860115');" onmouseout="out('6825640116866860115');" style="">2426                  // There may be no workspace screens (just hotseat items and an empty page).                      </span>
<span class="-1349681419310339536" onmouseenter="enter('-1349681419310339536');" onmouseout="out('-1349681419310339536');" style="">2427                  currScreen = PagedView.INVALID_RESTORE_PAGE;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2428              }                                                                                                     </span>
<span class="-335994314648006585" onmouseenter="enter('-335994314648006585');" onmouseout="out('-335994314648006585');" style="">2429              final int currentScreen = currScreen;                                                                 </span>
<span class="2351793782480240365" onmouseenter="enter('2351793782480240365');" onmouseout="out('2351793782480240365');" style="">2430              final long currentScreenId = currentScreen &lt; 0                                                        </span>
<span class="-3569859106639415689" onmouseenter="enter('-3569859106639415689');" onmouseout="out('-3569859106639415689');" style="">2431                      ? INVALID_SCREEN_ID : orderedScreenIds.get(currentScreen);                                    </span>
<span  style="">2432                                                                                                                    </span>
<span class="6814554556760518768" onmouseenter="enter('6814554556760518768');" onmouseout="out('6814554556760518768');" style="">2433              // Load all the items that are on the current page first (and in the process, unbind                  </span>
<span class="-8025412368184811901" onmouseenter="enter('-8025412368184811901');" onmouseout="out('-8025412368184811901');" style="">2434              // all the existing workspace items before we call startBinding() below.                              </span>
<span class="-8984175365482549656" onmouseenter="enter('-8984175365482549656');" onmouseout="out('-8984175365482549656');" style="">2435              unbindWorkspaceItemsOnMainThread();                                                                   </span>
<span  style="">2436                                                                                                                    </span>
<span class="-2890632990436762470" onmouseenter="enter('-2890632990436762470');" onmouseout="out('-2890632990436762470');" style="">2437              // Separate the items that are on the current screen, and all the other remaining items               </span>
<span class="-1725873569461296561" onmouseenter="enter('-1725873569461296561');" onmouseout="out('-1725873569461296561');" style="">2438              ArrayList&lt;ItemInfo&gt; currentWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                                </span>
<span class="-3652813720009519444" onmouseenter="enter('-3652813720009519444');" onmouseout="out('-3652813720009519444');" style="">2439              ArrayList&lt;ItemInfo&gt; otherWorkspaceItems = new ArrayList&lt;ItemInfo&gt;();                                  </span>
<span class="1957921863279922763" onmouseenter="enter('1957921863279922763');" onmouseout="out('1957921863279922763');" style="">2440              ArrayList&lt;LauncherAppWidgetInfo&gt; currentAppWidgets =                                                  </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2441                      new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                       </span>
<span class="-340469327534164281" onmouseenter="enter('-340469327534164281');" onmouseout="out('-340469327534164281');" style="">2442              ArrayList&lt;LauncherAppWidgetInfo&gt; otherAppWidgets =                                                    </span>
<span class="9115049377917945504" onmouseenter="enter('9115049377917945504');" onmouseout="out('9115049377917945504');" style="">2443                      new ArrayList&lt;LauncherAppWidgetInfo&gt;();                                                       </span>
<span class="1678682221916250445" onmouseenter="enter('1678682221916250445');" onmouseout="out('1678682221916250445');" style="">2444              HashMap&lt;Long, FolderInfo&gt; currentFolders = new HashMap&lt;Long, FolderInfo&gt;();                           </span>
<span class="6055163357301009248" onmouseenter="enter('6055163357301009248');" onmouseout="out('6055163357301009248');" style="">2445              HashMap&lt;Long, FolderInfo&gt; otherFolders = new HashMap&lt;Long, FolderInfo&gt;();                             </span>
<span  style="">2446                                                                                                                    </span>
<span class="-6089822518842723893" onmouseenter="enter('-6089822518842723893');" onmouseout="out('-6089822518842723893');" style="">2447              filterCurrentWorkspaceItems(currentScreenId, workspaceItems, currentWorkspaceItems,                   </span>
<span class="-8375758480995422912" onmouseenter="enter('-8375758480995422912');" onmouseout="out('-8375758480995422912');" style="">2448                      otherWorkspaceItems);                                                                         </span>
<span class="-866463348054163616" onmouseenter="enter('-866463348054163616');" onmouseout="out('-866463348054163616');" style="">2449              filterCurrentAppWidgets(currentScreenId, appWidgets, currentAppWidgets,                               </span>
<span class="4579895579276341407" onmouseenter="enter('4579895579276341407');" onmouseout="out('4579895579276341407');" style="">2450                      otherAppWidgets);                                                                             </span>
<span class="-8098352111604685386" onmouseenter="enter('-8098352111604685386');" onmouseout="out('-8098352111604685386');" style="">2451              filterCurrentFolders(currentScreenId, itemsIdMap, folders, currentFolders,                            </span>
<span class="9146999591596374961" onmouseenter="enter('9146999591596374961');" onmouseout="out('9146999591596374961');" style="">2452                      otherFolders);                                                                                </span>
<span class="-3334490908115707670" onmouseenter="enter('-3334490908115707670');" onmouseout="out('-3334490908115707670');" style="">2453              sortWorkspaceItemsSpatially(currentWorkspaceItems);                                                   </span>
<span class="7557616132302919391" onmouseenter="enter('7557616132302919391');" onmouseout="out('7557616132302919391');" style="">2454              sortWorkspaceItemsSpatially(otherWorkspaceItems);                                                     </span>
<span  style="">2455                                                                                                                    </span>
<span class="-5681027322920042460" onmouseenter="enter('-5681027322920042460');" onmouseout="out('-5681027322920042460');" style="">2456              // Tell the workspace that we&#x27;re about to start binding items                                         </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2457              r = new Runnable() {                                                                                  </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2458                  public void run() {                                                                               </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2459                      Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                          </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2460                      if (callbacks != null) {                                                                      </span>
<span class="-4858717627969339167" onmouseenter="enter('-4858717627969339167');" onmouseout="out('-4858717627969339167');" style="">2461                          callbacks.startBinding();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2462                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2463                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2464              };                                                                                                    </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2465              runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                                     </span>
<span  style="">2466                                                                                                                    </span>
<span class="5270406270692369283" onmouseenter="enter('5270406270692369283');" onmouseout="out('5270406270692369283');" style="">2467              bindWorkspaceScreens(oldCallbacks, orderedScreenIds);                                                 </span>
<span  style="">2468                                                                                                                    </span>
<span class="-8614752954403058095" onmouseenter="enter('-8614752954403058095');" onmouseout="out('-8614752954403058095');" style="">2469              // Load items on the current page                                                                     </span>
<span class="7514755776427017102" onmouseenter="enter('7514755776427017102');" onmouseout="out('7514755776427017102');" style="">2470              bindWorkspaceItems(oldCallbacks, currentWorkspaceItems, currentAppWidgets,                            </span>
<span class="-6104188658851873503" onmouseenter="enter('-6104188658851873503');" onmouseout="out('-6104188658851873503');" style="">2471                      currentFolders, null);                                                                        </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2472              if (isLoadingSynchronously) {                                                                         </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2473                  r = new Runnable() {                                                                              </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2474                      public void run() {                                                                           </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2475                          Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                      </span>
<span class="1520569606497568986" onmouseenter="enter('1520569606497568986');" onmouseout="out('1520569606497568986');" style="">2476                          if (callbacks != null &amp;&amp; currentScreen != PagedView.INVALID_RESTORE_PAGE) {               </span>
<span class="-8453570054408401460" onmouseenter="enter('-8453570054408401460');" onmouseout="out('-8453570054408401460');" style="">2477                              callbacks.onPageBoundSynchronously(currentScreen);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2478                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2479                      }                                                                                             </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2480                  };                                                                                                </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2481                  runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2482              }                                                                                                     </span>
<span  style="">2483                                                                                                                    </span>
<span class="-5413736965388393233" onmouseenter="enter('-5413736965388393233');" onmouseout="out('-5413736965388393233');" style="">2484              // Load all the remaining pages (if we are loading synchronously, we want to defer this               </span>
<span class="-2955787106587599134" onmouseenter="enter('-2955787106587599134');" onmouseout="out('-2955787106587599134');" style="">2485              // work until after the first render)                                                                 </span>
<span class="822838480442729750" onmouseenter="enter('822838480442729750');" onmouseout="out('822838480442729750');" style="">2486              mDeferredBindRunnables.clear();                                                                       </span>
<span class="5032352887958756295" onmouseenter="enter('5032352887958756295');" onmouseout="out('5032352887958756295');" style="">2487              bindWorkspaceItems(oldCallbacks, otherWorkspaceItems, otherAppWidgets, otherFolders,                  </span>
<span class="-2167949041803207061" onmouseenter="enter('-2167949041803207061');" onmouseout="out('-2167949041803207061');" style="">2488                      (isLoadingSynchronously ? mDeferredBindRunnables : null));                                    </span>
<span  style="">2489                                                                                                                    </span>
<span class="4011061048965913553" onmouseenter="enter('4011061048965913553');" onmouseout="out('4011061048965913553');" style="">2490              // Tell the workspace that we&#x27;re done binding items                                                   </span>
<span class="8088945822265572401" onmouseenter="enter('8088945822265572401');" onmouseout="out('8088945822265572401');" style="">2491              r = new Runnable() {                                                                                  </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2492                  public void run() {                                                                               </span>
<span class="-2546914066653736289" onmouseenter="enter('-2546914066653736289');" onmouseout="out('-2546914066653736289');" style="">2493                      Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                          </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2494                      if (callbacks != null) {                                                                      </span>
<span class="4571657590383009749" onmouseenter="enter('4571657590383009749');" onmouseout="out('4571657590383009749');" style="">2495                          callbacks.finishBindingItems(isUpgradePath);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2496                      }                                                                                             </span>
<span  style="">2497                                                                                                                    </span>
<span class="3327220122133784387" onmouseenter="enter('3327220122133784387');" onmouseout="out('3327220122133784387');" style="">2498                      // If we&#x27;re profiling, ensure this is the last thing in the queue.                            </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2499                      if (DEBUG_LOADERS) {                                                                          </span>
<span class="355954012869630075" onmouseenter="enter('355954012869630075');" onmouseout="out('355954012869630075');" style="">2500                          Log.d(TAG, &quot;bound workspace in &quot;                                                          </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2501                              + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2502                      }                                                                                             </span>
<span  style="">2503                                                                                                                    </span>
<span class="-2372807547969983284" onmouseenter="enter('-2372807547969983284');" onmouseout="out('-2372807547969983284');" style="">2504                      mIsLoadingAndBindingWorkspace = false;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2505                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2506              };                                                                                                    </span>
<span class="8941204243979468414" onmouseenter="enter('8941204243979468414');" onmouseout="out('8941204243979468414');" style="">2507              if (isLoadingSynchronously) {                                                                         </span>
<span class="-7585940083186897617" onmouseenter="enter('-7585940083186897617');" onmouseout="out('-7585940083186897617');" style="">2508                  mDeferredBindRunnables.add(r);                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2509              } else {                                                                                              </span>
<span class="-7213979956848009346" onmouseenter="enter('-7213979956848009346');" onmouseout="out('-7213979956848009346');" style="">2510                  runOnMainThread(r, MAIN_THREAD_BINDING_RUNNABLE);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2511              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2512          }                                                                                                         </span>
<span  style="">2513                                                                                                                    </span>
<span class="-8837645024880398734" onmouseenter="enter('-8837645024880398734');" onmouseout="out('-8837645024880398734');" style="">2514          private void loadAndBindAllApps() {                                                                       </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2515              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="-2830976254331120227" onmouseenter="enter('-2830976254331120227');" onmouseout="out('-2830976254331120227');" style="">2516                  Log.d(TAG, &quot;loadAndBindAllApps mAllAppsLoaded=&quot; + mAllAppsLoaded);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2517              }                                                                                                     </span>
<span class="-6125216986221494355" onmouseenter="enter('-6125216986221494355');" onmouseout="out('-6125216986221494355');" style="">2518              if (!mAllAppsLoaded) {                                                                                </span>
<span class="5842757820135196564" onmouseenter="enter('5842757820135196564');" onmouseout="out('5842757820135196564');" style="">2519                  loadAllApps();                                                                                    </span>
<span class="3817723022891100760" onmouseenter="enter('3817723022891100760');" onmouseout="out('3817723022891100760');" style="">2520                  synchronized (LoaderTask.this) {                                                                  </span>
<span class="-5880379985434939744" onmouseenter="enter('-5880379985434939744');" onmouseout="out('-5880379985434939744');" style="">2521                      if (mStopped) {                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2522                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2523                      }                                                                                             </span>
<span class="4623635226903027710" onmouseenter="enter('4623635226903027710');" onmouseout="out('4623635226903027710');" style="">2524                      mAllAppsLoaded = true;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2525                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2526              } else {                                                                                              </span>
<span class="4912721264728253177" onmouseenter="enter('4912721264728253177');" onmouseout="out('4912721264728253177');" style="">2527                  onlyBindAllApps();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2528              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2529          }                                                                                                         </span>
<span  style="">2530                                                                                                                    </span>
<span class="4707433981787810272" onmouseenter="enter('4707433981787810272');" onmouseout="out('4707433981787810272');" style="">2531          private void onlyBindAllApps() {                                                                          </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2532              final Callbacks oldCallbacks = mCallbacks.get();                                                      </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2533              if (oldCallbacks == null) {                                                                           </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2534                  // This launcher has exited and nobody bothered to tell us.  Just bail.                           </span>
<span class="1659909424723635951" onmouseenter="enter('1659909424723635951');" onmouseout="out('1659909424723635951');" style="">2535                  Log.w(TAG, &quot;LoaderTask running with no launcher (onlyBindAllApps)&quot;);                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2536                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2537              }                                                                                                     </span>
<span  style="">2538                                                                                                                    </span>
<span class="904073869424416989" onmouseenter="enter('904073869424416989');" onmouseout="out('904073869424416989');" style="">2539              // shallow copy                                                                                       </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">2540              @SuppressWarnings(&quot;unchecked&quot;)                                                                        </span>
<span class="6400779648201267598" onmouseenter="enter('6400779648201267598');" onmouseout="out('6400779648201267598');" style="">2541              final ArrayList&lt;AppInfo&gt; list                                                                         </span>
<span class="-2385577679344520462" onmouseenter="enter('-2385577679344520462');" onmouseout="out('-2385577679344520462');" style="">2542                      = (ArrayList&lt;AppInfo&gt;) mBgAllAppsList.data.clone();                                           </span>
<span class="3702096559747581525" onmouseenter="enter('3702096559747581525');" onmouseout="out('3702096559747581525');" style="">2543              Runnable r = new Runnable() {                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2544                  public void run() {                                                                               </span>
<span class="3205044018564482034" onmouseenter="enter('3205044018564482034');" onmouseout="out('3205044018564482034');" style="">2545                      final long t = SystemClock.uptimeMillis();                                                    </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2546                      final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                    </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2547                      if (callbacks != null) {                                                                      </span>
<span class="-4175293191087427555" onmouseenter="enter('-4175293191087427555');" onmouseout="out('-4175293191087427555');" style="">2548                          callbacks.bindAllApplications(list);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2549                      }                                                                                             </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2550                      if (DEBUG_LOADERS) {                                                                          </span>
<span class="-8852680552322187165" onmouseenter="enter('-8852680552322187165');" onmouseout="out('-8852680552322187165');" style="">2551                          Log.d(TAG, &quot;bound all &quot; + list.size() + &quot; apps from cache in &quot;                            </span>
<span class="1608968688139606334" onmouseenter="enter('1608968688139606334');" onmouseout="out('1608968688139606334');" style="">2552                                  + (SystemClock.uptimeMillis()-t) + &quot;ms&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2553                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2554                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">2555              };                                                                                                    </span>
<span class="1625697599418198126" onmouseenter="enter('1625697599418198126');" onmouseout="out('1625697599418198126');" style="">2556              boolean isRunningOnMainThread = !(sWorkerThread.getThreadId() == Process.myTid());                    </span>
<span class="-5455987777066046644" onmouseenter="enter('-5455987777066046644');" onmouseout="out('-5455987777066046644');" style="">2557              if (isRunningOnMainThread) {                                                                          </span>
<span class="2078693157042196339" onmouseenter="enter('2078693157042196339');" onmouseout="out('2078693157042196339');" style="">2558                  r.run();                                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2559              } else {                                                                                              </span>
<span class="-6506123029534666092" onmouseenter="enter('-6506123029534666092');" onmouseout="out('-6506123029534666092');" style="">2560                  mHandler.post(r);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2561              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2562          }                                                                                                         </span>
<span  style="">2563                                                                                                                    </span>
<span class="-6895852158956881814" onmouseenter="enter('-6895852158956881814');" onmouseout="out('-6895852158956881814');" style="">2564          private void loadAllApps() {                                                                              </span>
<span class="3240137791137450764" onmouseenter="enter('3240137791137450764');" onmouseout="out('3240137791137450764');" style="">2565              final long loadTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                                 </span>
<span  style="">2566                                                                                                                    </span>
<span class="-9088900071606288893" onmouseenter="enter('-9088900071606288893');" onmouseout="out('-9088900071606288893');" style="">2567              final Callbacks oldCallbacks = mCallbacks.get();                                                      </span>
<span class="-8268059770979549595" onmouseenter="enter('-8268059770979549595');" onmouseout="out('-8268059770979549595');" style="">2568              if (oldCallbacks == null) {                                                                           </span>
<span class="-2674033186601246305" onmouseenter="enter('-2674033186601246305');" onmouseout="out('-2674033186601246305');" style="">2569                  // This launcher has exited and nobody bothered to tell us.  Just bail.                           </span>
<span class="-6509823964207432628" onmouseenter="enter('-6509823964207432628');" onmouseout="out('-6509823964207432628');" style="">2570                  Log.w(TAG, &quot;LoaderTask running with no launcher (loadAllApps)&quot;);                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2571                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2572              }                                                                                                     </span>
<span  style="">2573                                                                                                                    </span>
<span class="1501892088590866369" onmouseenter="enter('1501892088590866369');" onmouseout="out('1501892088590866369');" style="">2574              final PackageManager packageManager = mContext.getPackageManager();                                   </span>
<span class="3249044048564826962" onmouseenter="enter('3249044048564826962');" onmouseout="out('3249044048564826962');" style="">2575              final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);                                       </span>
<span class="7749064114250496515" onmouseenter="enter('7749064114250496515');" onmouseout="out('7749064114250496515');" style="">2576              mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                     </span>
<span  style="">2577                                                                                                                    </span>
<span class="2323997493385795900" onmouseenter="enter('2323997493385795900');" onmouseout="out('2323997493385795900');" style="">2578              // Clear the list of apps                                                                             </span>
<span class="-3100741238331493656" onmouseenter="enter('-3100741238331493656');" onmouseout="out('-3100741238331493656');" style="">2579              mBgAllAppsList.clear();                                                                               </span>
<span  style="">2580                                                                                                                    </span>
<span class="-4489177435133431981" onmouseenter="enter('-4489177435133431981');" onmouseout="out('-4489177435133431981');" style="">2581              // Query for the set of apps                                                                          </span>
<span class="6799319218362813943" onmouseenter="enter('6799319218362813943');" onmouseout="out('6799319218362813943');" style="">2582              final long qiaTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                                  </span>
<span class="-7993784721640929386" onmouseenter="enter('-7993784721640929386');" onmouseout="out('-7993784721640929386');" style="">2583              List&lt;ResolveInfo&gt; apps = packageManager.queryIntentActivities(mainIntent, 0);                         </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2584              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="-8953089628779584367" onmouseenter="enter('-8953089628779584367');" onmouseout="out('-8953089628779584367');" style="">2585                  Log.d(TAG, &quot;queryIntentActivities took &quot;                                                          </span>
<span class="8237341079980485738" onmouseenter="enter('8237341079980485738');" onmouseout="out('8237341079980485738');" style="">2586                          + (SystemClock.uptimeMillis()-qiaTime) + &quot;ms&quot;);                                           </span>
<span class="-9015079490762020933" onmouseenter="enter('-9015079490762020933');" onmouseout="out('-9015079490762020933');" style="">2587                  Log.d(TAG, &quot;queryIntentActivities got &quot; + apps.size() + &quot; apps&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2588              }                                                                                                     </span>
<span class="-1144129018602551066" onmouseenter="enter('-1144129018602551066');" onmouseout="out('-1144129018602551066');" style="">2589              // Fail if we don&#x27;t have any apps                                                                     </span>
<span class="-1385682343056466434" onmouseenter="enter('-1385682343056466434');" onmouseout="out('-1385682343056466434');" style="">2590              if (apps == null || apps.isEmpty()) {                                                                 </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2591                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2592              }                                                                                                     </span>
<span class="-5585112001695951885" onmouseenter="enter('-5585112001695951885');" onmouseout="out('-5585112001695951885');" style="">2593              // Sort the applications by name                                                                      </span>
<span class="5879018485786384871" onmouseenter="enter('5879018485786384871');" onmouseout="out('5879018485786384871');" style="">2594              final long sortTime = DEBUG_LOADERS ? SystemClock.uptimeMillis() : 0;                                 </span>
<span class="3347614076781191804" onmouseenter="enter('3347614076781191804');" onmouseout="out('3347614076781191804');" style="">2595              Collections.sort(apps,                                                                                </span>
<span class="-8211974845882715204" onmouseenter="enter('-8211974845882715204');" onmouseout="out('-8211974845882715204');" style="">2596                      new LauncherModel.ShortcutNameComparator(packageManager, mLabelCache));                       </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2597              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="8116347759372038508" onmouseenter="enter('8116347759372038508');" onmouseout="out('8116347759372038508');" style="">2598                  Log.d(TAG, &quot;sort took &quot;                                                                           </span>
<span class="992817212926202968" onmouseenter="enter('992817212926202968');" onmouseout="out('992817212926202968');" style="">2599                          + (SystemClock.uptimeMillis()-sortTime) + &quot;ms&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2600              }                                                                                                     </span>
<span  style="">2601                                                                                                                    </span>
<span class="7729934896614039986" onmouseenter="enter('7729934896614039986');" onmouseout="out('7729934896614039986');" style="">2602              // Create the ApplicationInfos                                                                        </span>
<span class="-5895751517948944509" onmouseenter="enter('-5895751517948944509');" onmouseout="out('-5895751517948944509');" style="">2603              for (int i = 0; i &lt; apps.size(); i++) {                                                               </span>
<span class="2626157602240887809" onmouseenter="enter('2626157602240887809');" onmouseout="out('2626157602240887809');" style="">2604                  ResolveInfo app = apps.get(i);                                                                    </span>
<span class="3586781851650279349" onmouseenter="enter('3586781851650279349');" onmouseout="out('3586781851650279349');" style="">2605                  // This builds the icon bitmaps.                                                                  </span>
<span class="-6607005785467864621" onmouseenter="enter('-6607005785467864621');" onmouseout="out('-6607005785467864621');" style="">2606                  mBgAllAppsList.add(new AppInfo(packageManager, app,                                               </span>
<span class="-2018038209439913805" onmouseenter="enter('-2018038209439913805');" onmouseout="out('-2018038209439913805');" style="">2607                          mIconCache, mLabelCache));                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2608              }                                                                                                     </span>
<span  style="">2609                                                                                                                    </span>
<span class="-5221747652878631284" onmouseenter="enter('-5221747652878631284');" onmouseout="out('-5221747652878631284');" style="">2610              // Huh? Shouldn&#x27;t this be inside the Runnable below?                                                  </span>
<span class="4457761250277868019" onmouseenter="enter('4457761250277868019');" onmouseout="out('4457761250277868019');" style="">2611              final ArrayList&lt;AppInfo&gt; added = mBgAllAppsList.added;                                                </span>
<span class="3218431008368817671" onmouseenter="enter('3218431008368817671');" onmouseout="out('3218431008368817671');" style="">2612              mBgAllAppsList.added = new ArrayList&lt;AppInfo&gt;();                                                      </span>
<span  style="">2613                                                                                                                    </span>
<span class="2526791049904400058" onmouseenter="enter('2526791049904400058');" onmouseout="out('2526791049904400058');" style="">2614              // Post callback on main thread                                                                       </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2615              mHandler.post(new Runnable() {                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2616                  public void run() {                                                                               </span>
<span class="-2007882421121122273" onmouseenter="enter('-2007882421121122273');" onmouseout="out('-2007882421121122273');" style="">2617                      final long bindTime = SystemClock.uptimeMillis();                                             </span>
<span class="-1598847862515505165" onmouseenter="enter('-1598847862515505165');" onmouseout="out('-1598847862515505165');" style="">2618                      final Callbacks callbacks = tryGetCallbacks(oldCallbacks);                                    </span>
<span class="3616959707297696383" onmouseenter="enter('3616959707297696383');" onmouseout="out('3616959707297696383');" style="">2619                      if (callbacks != null) {                                                                      </span>
<span class="8095088373687662981" onmouseenter="enter('8095088373687662981');" onmouseout="out('8095088373687662981');" style="">2620                          callbacks.bindAllApplications(added);                                                     </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2621                          if (DEBUG_LOADERS) {                                                                      </span>
<span class="1059969227192257889" onmouseenter="enter('1059969227192257889');" onmouseout="out('1059969227192257889');" style="">2622                              Log.d(TAG, &quot;bound &quot; + added.size() + &quot; apps in &quot;                                      </span>
<span class="-7437359873458345222" onmouseenter="enter('-7437359873458345222');" onmouseout="out('-7437359873458345222');" style="">2623                                  + (SystemClock.uptimeMillis() - bindTime) + &quot;ms&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2624                          }                                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2625                      } else {                                                                                      </span>
<span class="7641212838781589328" onmouseenter="enter('7641212838781589328');" onmouseout="out('7641212838781589328');" style="">2626                          Log.i(TAG, &quot;not binding apps: no Launcher activity&quot;);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2627                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2628                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2629              });                                                                                                   </span>
<span  style="">2630                                                                                                                    </span>
<span class="2831889734201780325" onmouseenter="enter('2831889734201780325');" onmouseout="out('2831889734201780325');" style="">2631              if (DEBUG_LOADERS) {                                                                                  </span>
<span class="-4702241865893587262" onmouseenter="enter('-4702241865893587262');" onmouseout="out('-4702241865893587262');" style="">2632                  Log.d(TAG, &quot;Icons processed in &quot;                                                                  </span>
<span class="-1277503613614461490" onmouseenter="enter('-1277503613614461490');" onmouseout="out('-1277503613614461490');" style="">2633                          + (SystemClock.uptimeMillis() - loadTime) + &quot;ms&quot;);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2634              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2635          }                                                                                                         </span>
<span  style="">2636                                                                                                                    </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">2637          public void dumpState() {                                                                                 </span>
<span class="-1892825856828850583" onmouseenter="enter('-1892825856828850583');" onmouseout="out('-1892825856828850583');" style="">2638              synchronized (sBgLock) {                                                                              </span>
<span class="8510692516384923340" onmouseenter="enter('8510692516384923340');" onmouseout="out('8510692516384923340');" style="">2639                  Log.d(TAG, &quot;mLoaderTask.mContext=&quot; + mContext);                                                   </span>
<span class="-5057473576968780754" onmouseenter="enter('-5057473576968780754');" onmouseout="out('-5057473576968780754');" style="">2640                  Log.d(TAG, &quot;mLoaderTask.mIsLaunching=&quot; + mIsLaunching);                                           </span>
<span class="5394362584347621452" onmouseenter="enter('5394362584347621452');" onmouseout="out('5394362584347621452');" style="">2641                  Log.d(TAG, &quot;mLoaderTask.mStopped=&quot; + mStopped);                                                   </span>
<span class="2283901653600186000" onmouseenter="enter('2283901653600186000');" onmouseout="out('2283901653600186000');" style="">2642                  Log.d(TAG, &quot;mLoaderTask.mLoadAndBindStepFinished=&quot; + mLoadAndBindStepFinished);                   </span>
<span class="-259407417202798794" onmouseenter="enter('-259407417202798794');" onmouseout="out('-259407417202798794');" style="">2643                  Log.d(TAG, &quot;mItems size=&quot; + sBgWorkspaceItems.size());                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2644              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2645          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2646      }                                                                                                             </span>
<span  style="">2647                                                                                                                    </span>
<span class="7630100460211487014" onmouseenter="enter('7630100460211487014');" onmouseout="out('7630100460211487014');" style="">2648      void enqueuePackageUpdated(PackageUpdatedTask task) {                                                         </span>
<span class="5827584276449890800" onmouseenter="enter('5827584276449890800');" onmouseout="out('5827584276449890800');" style="">2649          sWorker.post(task);                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2650      }                                                                                                             </span>
<span  style="">2651                                                                                                                    </span>
<span class="4517543426948493114" onmouseenter="enter('4517543426948493114');" onmouseout="out('4517543426948493114');" style="">2652      private class PackageUpdatedTask implements Runnable {                                                        </span>
<span class="-2369313534963024986" onmouseenter="enter('-2369313534963024986');" onmouseout="out('-2369313534963024986');" style="">2653          int mOp;                                                                                                  </span>
<span class="1329266106484135476" onmouseenter="enter('1329266106484135476');" onmouseout="out('1329266106484135476');" style="">2654          String[] mPackages;                                                                                       </span>
<span  style="">2655                                                                                                                    </span>
<span class="7962554983790751070" onmouseenter="enter('7962554983790751070');" onmouseout="out('7962554983790751070');" style="">2656          public static final int OP_NONE = 0;                                                                      </span>
<span class="2199739460496975128" onmouseenter="enter('2199739460496975128');" onmouseout="out('2199739460496975128');" style="">2657          public static final int OP_ADD = 1;                                                                       </span>
<span class="-6492257742329868745" onmouseenter="enter('-6492257742329868745');" onmouseout="out('-6492257742329868745');" style="">2658          public static final int OP_UPDATE = 2;                                                                    </span>
<span class="7223750328294921743" onmouseenter="enter('7223750328294921743');" onmouseout="out('7223750328294921743');" style="">2659          public static final int OP_REMOVE = 3; // uninstlled                                                      </span>
<span class="8627918612960647103" onmouseenter="enter('8627918612960647103');" onmouseout="out('8627918612960647103');" style="">2660          public static final int OP_UNAVAILABLE = 4; // external media unmounted                                   </span>
<span  style="">2661                                                                                                                    </span>
<span  style="">2662                                                                                                                    </span>
<span class="-2899951589874278155" onmouseenter="enter('-2899951589874278155');" onmouseout="out('-2899951589874278155');" style="">2663          public PackageUpdatedTask(int op, String[] packages) {                                                    </span>
<span class="191999664456871419" onmouseenter="enter('191999664456871419');" onmouseout="out('191999664456871419');" style="">2664              mOp = op;                                                                                             </span>
<span class="-8641118446551244060" onmouseenter="enter('-8641118446551244060');" onmouseout="out('-8641118446551244060');" style="">2665              mPackages = packages;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2666          }                                                                                                         </span>
<span  style="">2667                                                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2668          public void run() {                                                                                       </span>
<span class="6428444159905040885" onmouseenter="enter('6428444159905040885');" onmouseout="out('6428444159905040885');" style="">2669              final Context context = mApp.getContext();                                                            </span>
<span  style="">2670                                                                                                                    </span>
<span class="-8513751550533795426" onmouseenter="enter('-8513751550533795426');" onmouseout="out('-8513751550533795426');" style="">2671              final String[] packages = mPackages;                                                                  </span>
<span class="3997761927841529422" onmouseenter="enter('3997761927841529422');" onmouseout="out('3997761927841529422');" style="">2672              final int N = packages.length;                                                                        </span>
<span class="-2883270888213154035" onmouseenter="enter('-2883270888213154035');" onmouseout="out('-2883270888213154035');" style="">2673              switch (mOp) {                                                                                        </span>
<span class="449333994232188305" onmouseenter="enter('449333994232188305');" onmouseout="out('449333994232188305');" style="">2674                  case OP_ADD:                                                                                      </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">2675                      for (int i=0; i&lt;N; i++) {                                                                     </span>
<span class="8529503526854951097" onmouseenter="enter('8529503526854951097');" onmouseout="out('8529503526854951097');" style="">2676                          if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.addPackage &quot; + packages[i]);                  </span>
<span class="-7654565316708220659" onmouseenter="enter('-7654565316708220659');" onmouseout="out('-7654565316708220659');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2677 +                        mIconCache.remove(packages[i]);                                                           </span>
<span class="-2949849672001849759" onmouseenter="enter('-2949849672001849759');" onmouseout="out('-2949849672001849759');" style="">2678                          mBgAllAppsList.addPackage(context, packages[i]);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2679                      }                                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2680                      break;                                                                                        </span>
<span class="-4770369244410347850" onmouseenter="enter('-4770369244410347850');" onmouseout="out('-4770369244410347850');" style="">2681                  case OP_UPDATE:                                                                                   </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">2682                      for (int i=0; i&lt;N; i++) {                                                                     </span>
<span class="-3432436938232924374" onmouseenter="enter('-3432436938232924374');" onmouseout="out('-3432436938232924374');" style="">2683                          if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.updatePackage &quot; + packages[i]);               </span>
<span class="-272128531266392722" onmouseenter="enter('-272128531266392722');" onmouseout="out('-272128531266392722');" style="">2684                          mBgAllAppsList.updatePackage(context, packages[i]);                                       </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">2685                          WidgetPreviewLoader.removePackageFromDb(                                                  </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">2686                                  mApp.getWidgetPreviewCacheDb(), packages[i]);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2687                      }                                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2688                      break;                                                                                        </span>
<span class="-5474983820901132713" onmouseenter="enter('-5474983820901132713');" onmouseout="out('-5474983820901132713');" style="">2689                  case OP_REMOVE:                                                                                   </span>
<span class="9130220194739024640" onmouseenter="enter('9130220194739024640');" onmouseout="out('9130220194739024640');" style="">2690                  case OP_UNAVAILABLE:                                                                              </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">2691                      for (int i=0; i&lt;N; i++) {                                                                     </span>
<span class="3815138171377980553" onmouseenter="enter('3815138171377980553');" onmouseout="out('3815138171377980553');" style="">2692                          if (DEBUG_LOADERS) Log.d(TAG, &quot;mAllAppsList.removePackage &quot; + packages[i]);               </span>
<span class="7669526743413608016" onmouseenter="enter('7669526743413608016');" onmouseout="out('7669526743413608016');" style="">2693                          mBgAllAppsList.removePackage(packages[i]);                                                </span>
<span class="-6565407022438633287" onmouseenter="enter('-6565407022438633287');" onmouseout="out('-6565407022438633287');" style="">2694                          WidgetPreviewLoader.removePackageFromDb(                                                  </span>
<span class="8965513256841368516" onmouseenter="enter('8965513256841368516');" onmouseout="out('8965513256841368516');" style="">2695                                  mApp.getWidgetPreviewCacheDb(), packages[i]);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2696                      }                                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2697                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2698              }                                                                                                     </span>
<span  style="">2699                                                                                                                    </span>
<span class="1572309132673002234" onmouseenter="enter('1572309132673002234');" onmouseout="out('1572309132673002234');" style="">2700              ArrayList&lt;AppInfo&gt; added = null;                                                                      </span>
<span class="-3271065843717738915" onmouseenter="enter('-3271065843717738915');" onmouseout="out('-3271065843717738915');" style="">2701              ArrayList&lt;AppInfo&gt; modified = null;                                                                   </span>
<span class="-5760221660526082511" onmouseenter="enter('-5760221660526082511');" onmouseout="out('-5760221660526082511');" style="">2702              final ArrayList&lt;AppInfo&gt; removedApps = new ArrayList&lt;AppInfo&gt;();                                      </span>
<span  style="">2703                                                                                                                    </span>
<span class="5103344907876037986" onmouseenter="enter('5103344907876037986');" onmouseout="out('5103344907876037986');" style="">2704              if (mBgAllAppsList.added.size() &gt; 0) {                                                                </span>
<span class="-6832117111735480722" onmouseenter="enter('-6832117111735480722');" onmouseout="out('-6832117111735480722');" style="">2705                  added = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.added);                                             </span>
<span class="7424740575354292437" onmouseenter="enter('7424740575354292437');" onmouseout="out('7424740575354292437');" style="">2706                  mBgAllAppsList.added.clear();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2707              }                                                                                                     </span>
<span class="-2487689472149982581" onmouseenter="enter('-2487689472149982581');" onmouseout="out('-2487689472149982581');" style="">2708              if (mBgAllAppsList.modified.size() &gt; 0) {                                                             </span>
<span class="-263080790556278433" onmouseenter="enter('-263080790556278433');" onmouseout="out('-263080790556278433');" style="">2709                  modified = new ArrayList&lt;AppInfo&gt;(mBgAllAppsList.modified);                                       </span>
<span class="7356755564467619497" onmouseenter="enter('7356755564467619497');" onmouseout="out('7356755564467619497');" style="">2710                  mBgAllAppsList.modified.clear();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2711              }                                                                                                     </span>
<span class="1067177803970588976" onmouseenter="enter('1067177803970588976');" onmouseout="out('1067177803970588976');" style="">2712              if (mBgAllAppsList.removed.size() &gt; 0) {                                                              </span>
<span class="7103303915069909513" onmouseenter="enter('7103303915069909513');" onmouseout="out('7103303915069909513');" style="">2713                  removedApps.addAll(mBgAllAppsList.removed);                                                       </span>
<span class="6489927836548040849" onmouseenter="enter('6489927836548040849');" onmouseout="out('6489927836548040849');" style="">2714                  mBgAllAppsList.removed.clear();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2715              }                                                                                                     </span>
<span  style="">2716                                                                                                                    </span>
<span class="1973895877691170904" onmouseenter="enter('1973895877691170904');" onmouseout="out('1973895877691170904');" style="">2717              final Callbacks callbacks = mCallbacks != null ? mCallbacks.get() : null;                             </span>
<span class="1789456945216036972" onmouseenter="enter('1789456945216036972');" onmouseout="out('1789456945216036972');" style="">2718              if (callbacks == null) {                                                                              </span>
<span class="8755914139287185296" onmouseenter="enter('8755914139287185296');" onmouseout="out('8755914139287185296');" style="">2719                  Log.w(TAG, &quot;Nobody to tell about the new app.  Launcher is probably loading.&quot;);                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">2720                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2721              }                                                                                                     </span>
<span  style="">2722                                                                                                                    </span>
<span class="-6581952787492343966" onmouseenter="enter('-6581952787492343966');" onmouseout="out('-6581952787492343966');" style="">2723              if (added != null) {                                                                                  </span>
<span class="2110051729201547029" onmouseenter="enter('2110051729201547029');" onmouseout="out('2110051729201547029');" style="">2724                  // Ensure that we add all the workspace applications to the db                                    </span>
<span class="-2063587394443154556" onmouseenter="enter('-2063587394443154556');" onmouseout="out('-2063587394443154556');" style="">2725                  if (LauncherAppState.isDisableAllApps()) {                                                        </span>




<span class="7560882443822012182" onmouseenter="enter('7560882443822012182');" onmouseout="out('7560882443822012182');" style="">2726                      final ArrayList&lt;ItemInfo&gt; addedInfos = new ArrayList&lt;ItemInfo&gt;(added);                        </span>
<span class="-3306619504252280502" onmouseenter="enter('-3306619504252280502');" onmouseout="out('-3306619504252280502');" style="">2727                      addAndBindAddedWorkspaceApps(context, addedInfos);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2728                  } else {                                                                                          </span>
<span class="-4365713328493794841" onmouseenter="enter('-4365713328493794841');" onmouseout="out('-4365713328493794841');" style="">2729                      addAppsToAllApps(context, added);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2730                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2731              }                                                                                                     </span>
<span  style="">2732                                                                                                                    </span>



<span class="4007684711155860753" onmouseenter="enter('4007684711155860753');" onmouseout="out('4007684711155860753');" style="">2733              if (modified != null) {                                                                               </span>
<span class="-853311881612082067" onmouseenter="enter('-853311881612082067');" onmouseout="out('-853311881612082067');" style="">2734                  final ArrayList&lt;AppInfo&gt; modifiedFinal = modified;                                                </span>
<span  style="">2735                                                                                                                    </span>
<span class="417723722259394800" onmouseenter="enter('417723722259394800');" onmouseout="out('417723722259394800');" style="">2736                  // Update the launcher db to reflect the changes                                                  </span>
<span class="3799410015074169733" onmouseenter="enter('3799410015074169733');" onmouseout="out('3799410015074169733');" style="">2737                  for (AppInfo a : modifiedFinal) {                                                                 </span>
<span class="9185020132746469320" onmouseenter="enter('9185020132746469320');" onmouseout="out('9185020132746469320');" style="">2738                      ArrayList&lt;ItemInfo&gt; infos =                                                                   </span>
<span class="1259644807303209381" onmouseenter="enter('1259644807303209381');" onmouseout="out('1259644807303209381');" style="">2739                              getItemInfoForComponentName(a.componentName);                                         </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2740                      for (ItemInfo i : infos) {                                                                    </span>
<span class="5214363519588275687" onmouseenter="enter('5214363519588275687');" onmouseout="out('5214363519588275687');" style="">2741                          if (isShortcutInfoUpdateable(i)) {                                                        </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">2742                              ShortcutInfo info = (ShortcutInfo) i;                                                 </span>
<span class="8144150917785227032" onmouseenter="enter('8144150917785227032');" onmouseout="out('8144150917785227032');" style="">2743                              info.title = a.title.toString();                                                      </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">2744                              updateItemInDatabase(context, info);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2745                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2746                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2747                  }                                                                                                 </span>
<span  style="">2748                                                                                                                    </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2749                  mHandler.post(new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2750                      public void run() {                                                                           </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2751                          Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                              </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2752                          if (callbacks == cb &amp;&amp; cb != null) {                                                      </span>
<span class="-2589314362702357801" onmouseenter="enter('-2589314362702357801');" onmouseout="out('-2589314362702357801');" style="">2753                              callbacks.bindAppsUpdated(modifiedFinal);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2754                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2755                      }                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2756                  });                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2757              }                                                                                                     </span>
<span  style="">2758                                                                                                                    </span>
<span class="-1170284362245625596" onmouseenter="enter('-1170284362245625596');" onmouseout="out('-1170284362245625596');" style="">2759              final ArrayList&lt;String&gt; removedPackageNames =                                                         </span>
<span class="-5690129641574664711" onmouseenter="enter('-5690129641574664711');" onmouseout="out('-5690129641574664711');" style="">2760                      new ArrayList&lt;String&gt;();                                                                      </span>
<span class="-5885531662055245301" onmouseenter="enter('-5885531662055245301');" onmouseout="out('-5885531662055245301');" style="">2761              if (mOp == OP_REMOVE) {                                                                               </span>
<span class="6542623662317418523" onmouseenter="enter('6542623662317418523');" onmouseout="out('6542623662317418523');" style="">2762                  // Mark all packages in the broadcast to be removed                                               </span>
<span class="7356949459385151824" onmouseenter="enter('7356949459385151824');" onmouseout="out('7356949459385151824');" style="">2763                  removedPackageNames.addAll(Arrays.asList(packages));                                              </span>
<span class="-2422536769068214973" onmouseenter="enter('-2422536769068214973');" onmouseout="out('-2422536769068214973');" style="">2764              } else if (mOp == OP_UPDATE) {                                                                        </span>
<span class="3231313637982916616" onmouseenter="enter('3231313637982916616');" onmouseout="out('3231313637982916616');" style="">2765                  // Mark disabled packages in the broadcast to be removed                                          </span>
<span class="-2640468621226648159" onmouseenter="enter('-2640468621226648159');" onmouseout="out('-2640468621226648159');" style="">2766                  final PackageManager pm = context.getPackageManager();                                            </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="">2767                  for (int i=0; i&lt;N; i++) {                                                                         </span>
<span class="2935426733804348481" onmouseenter="enter('2935426733804348481');" onmouseout="out('2935426733804348481');" style="">2768                      if (isPackageDisabled(pm, packages[i])) {                                                     </span>
<span class="3041794132682496657" onmouseenter="enter('3041794132682496657');" onmouseout="out('3041794132682496657');" style="">2769                          removedPackageNames.add(packages[i]);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2770                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2771                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2772              }                                                                                                     </span>
<span class="-6735782234278978643" onmouseenter="enter('-6735782234278978643');" onmouseout="out('-6735782234278978643');" style="">2773              // Remove all the components associated with this package                                             </span>
<span class="8695538150112490085" onmouseenter="enter('8695538150112490085');" onmouseout="out('8695538150112490085');" style="">2774              for (String pn : removedPackageNames) {                                                               </span>
<span class="-8111972255125637177" onmouseenter="enter('-8111972255125637177');" onmouseout="out('-8111972255125637177');" style="">2775                  ArrayList&lt;ItemInfo&gt; infos = getItemInfoForPackageName(pn);                                        </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2776                  for (ItemInfo i : infos) {                                                                        </span>
<span class="3909885620637543615" onmouseenter="enter('3909885620637543615');" onmouseout="out('3909885620637543615');" style="">2777                      deleteItemFromDatabase(context, i);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2778                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2779              }                                                                                                     </span>
<span class="-2056292254334887175" onmouseenter="enter('-2056292254334887175');" onmouseout="out('-2056292254334887175');" style="">2780              // Remove all the specific components                                                                 </span>
<span class="-974749610616658114" onmouseenter="enter('-974749610616658114');" onmouseout="out('-974749610616658114');" style="">2781              for (AppInfo a : removedApps) {                                                                       </span>
<span class="-8237639399264107586" onmouseenter="enter('-8237639399264107586');" onmouseout="out('-8237639399264107586');" style="">2782                  ArrayList&lt;ItemInfo&gt; infos = getItemInfoForComponentName(a.componentName);                         </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">2783                  for (ItemInfo i : infos) {                                                                        </span>
<span class="3909885620637543615" onmouseenter="enter('3909885620637543615');" onmouseout="out('3909885620637543615');" style="">2784                      deleteItemFromDatabase(context, i);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2785                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2786              }                                                                                                     </span>
<span class="5309180485107849948" onmouseenter="enter('5309180485107849948');" onmouseout="out('5309180485107849948');" style="">2787              if (!removedPackageNames.isEmpty() || !removedApps.isEmpty()) {                                       </span>
<span class="-8579411662137624168" onmouseenter="enter('-8579411662137624168');" onmouseout="out('-8579411662137624168');" style="">2788                  // Remove any queued items from the install queue                                                 </span>
<span class="3234789264345159650" onmouseenter="enter('3234789264345159650');" onmouseout="out('3234789264345159650');" style="">2789                  String spKey = LauncherAppState.getSharedPreferencesKey();                                        </span>
<span class="-4155822077911930566" onmouseenter="enter('-4155822077911930566');" onmouseout="out('-4155822077911930566');" style="">2790                  SharedPreferences sp =                                                                            </span>
<span class="-7232857049720959502" onmouseenter="enter('-7232857049720959502');" onmouseout="out('-7232857049720959502');" style="">2791                          context.getSharedPreferences(spKey, Context.MODE_PRIVATE);                                </span>
<span class="3942499314707869646" onmouseenter="enter('3942499314707869646');" onmouseout="out('3942499314707869646');" style="">2792                  InstallShortcutReceiver.removeFromInstallQueue(sp, removedPackageNames);                          </span>
<span class="-3818855430394316108" onmouseenter="enter('-3818855430394316108');" onmouseout="out('-3818855430394316108');" style="">2793                  // Call the components-removed callback                                                           </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2794                  mHandler.post(new Runnable() {                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2795                      public void run() {                                                                           </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2796                          Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                              </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2797                          if (callbacks == cb &amp;&amp; cb != null) {                                                      </span>
<span class="7123425932844918056" onmouseenter="enter('7123425932844918056');" onmouseout="out('7123425932844918056');" style="">2798                              callbacks.bindComponentsRemoved(removedPackageNames, removedApps);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2799                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2800                      }                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2801                  });                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2802              }                                                                                                     </span>
<span  style="">2803                                                                                                                    </span>
<span class="4263868642545515204" onmouseenter="enter('4263868642545515204');" onmouseout="out('4263868642545515204');" style="">2804              final ArrayList&lt;Object&gt; widgetsAndShortcuts =                                                         </span>
<span class="-4925739004532916789" onmouseenter="enter('-4925739004532916789');" onmouseout="out('-4925739004532916789');" style="">2805                  getSortedWidgetsAndShortcuts(context);                                                            </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2806              mHandler.post(new Runnable() {                                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2807                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2808                  public void run() {                                                                               </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2809                      Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                  </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2810                      if (callbacks == cb &amp;&amp; cb != null) {                                                          </span>
<span class="-5360632898061832848" onmouseenter="enter('-5360632898061832848');" onmouseout="out('-5360632898061832848');" style="">2811                          callbacks.bindPackagesUpdated(widgetsAndShortcuts);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2812                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2813                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2814              });                                                                                                   </span>
<span  style="">2815                                                                                                                    </span>
<span class="2246235439938918294" onmouseenter="enter('2246235439938918294');" onmouseout="out('2246235439938918294');" style="">2816              // Write all the logs to disk                                                                         </span>
<span class="5305209108557863368" onmouseenter="enter('5305209108557863368');" onmouseout="out('5305209108557863368');" style="">2817              mHandler.post(new Runnable() {                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">2818                  public void run() {                                                                               </span>
<span class="-6723171626344867679" onmouseenter="enter('-6723171626344867679');" onmouseout="out('-6723171626344867679');" style="">2819                      Callbacks cb = mCallbacks != null ? mCallbacks.get() : null;                                  </span>
<span class="-6951170169794898369" onmouseenter="enter('-6951170169794898369');" onmouseout="out('-6951170169794898369');" style="">2820                      if (callbacks == cb &amp;&amp; cb != null) {                                                          </span>
<span class="-3509183204751013036" onmouseenter="enter('-3509183204751013036');" onmouseout="out('-3509183204751013036');" style="">2821                          callbacks.dumpLogsToLocalData();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2822                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2823                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2824              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2825          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2826      }                                                                                                             </span>
<span  style="">2827                                                                                                                    </span>
<span class="5799248721363180071" onmouseenter="enter('5799248721363180071');" onmouseout="out('5799248721363180071');" style="">2828      // Returns a list of ResolveInfos/AppWindowInfos in sorted order                                              </span>
<span class="-3838691324560082495" onmouseenter="enter('-3838691324560082495');" onmouseout="out('-3838691324560082495');" style="">2829      public static ArrayList&lt;Object&gt; getSortedWidgetsAndShortcuts(Context context) {                               </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">2830          PackageManager packageManager = context.getPackageManager();                                              </span>
<span class="-7530033640159092210" onmouseenter="enter('-7530033640159092210');" onmouseout="out('-7530033640159092210');" style="">2831          final ArrayList&lt;Object&gt; widgetsAndShortcuts = new ArrayList&lt;Object&gt;();                                    </span>
<span class="-3206018607877806445" onmouseenter="enter('-3206018607877806445');" onmouseout="out('-3206018607877806445');" style="">2832          widgetsAndShortcuts.addAll(AppWidgetManager.getInstance(context).getInstalledProviders());                </span>
<span class="7483011368565278291" onmouseenter="enter('7483011368565278291');" onmouseout="out('7483011368565278291');" style="">2833          Intent shortcutsIntent = new Intent(Intent.ACTION_CREATE_SHORTCUT);                                       </span>
<span class="-1563771411674199697" onmouseenter="enter('-1563771411674199697');" onmouseout="out('-1563771411674199697');" style="">2834          widgetsAndShortcuts.addAll(packageManager.queryIntentActivities(shortcutsIntent, 0));                     </span>
<span class="-1102952865112100125" onmouseenter="enter('-1102952865112100125');" onmouseout="out('-1102952865112100125');" style="">2835          Collections.sort(widgetsAndShortcuts,                                                                     </span>
<span class="-1681839338823179912" onmouseenter="enter('-1681839338823179912');" onmouseout="out('-1681839338823179912');" style="">2836              new LauncherModel.WidgetAndShortcutNameComparator(packageManager));                                   </span>
<span class="4818388040543649614" onmouseenter="enter('4818388040543649614');" onmouseout="out('4818388040543649614');" style="">2837          return widgetsAndShortcuts;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2838      }                                                                                                             </span>
<span  style="">2839                                                                                                                    </span>
<span class="8250241672786329916" onmouseenter="enter('8250241672786329916');" onmouseout="out('8250241672786329916');" style="">2840      private static boolean isPackageDisabled(PackageManager pm, String packageName) {                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2841          try {                                                                                                     </span>
<span class="4500642088138919346" onmouseenter="enter('4500642088138919346');" onmouseout="out('4500642088138919346');" style="">2842              PackageInfo pi = pm.getPackageInfo(packageName, 0);                                                   </span>
<span class="-3710685366547959245" onmouseenter="enter('-3710685366547959245');" onmouseout="out('-3710685366547959245');" style="">2843              return !pi.applicationInfo.enabled;                                                                   </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="">2844          } catch (NameNotFoundException e) {                                                                       </span>
<span class="-6128833453766813860" onmouseenter="enter('-6128833453766813860');" onmouseout="out('-6128833453766813860');" style="">2845              // Fall through                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2846          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2847          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2848      }                                                                                                             </span>
<span  style="">2849                                                                                                                    </span>
<span class="5484824579758440772" onmouseenter="enter('5484824579758440772');" onmouseout="out('5484824579758440772');" style="">2850      public static boolean isValidPackageComponent(PackageManager pm, ComponentName cn) {                          </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style="">2851          if (cn == null) {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2852              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2853          }                                                                                                         </span>
<span class="3920598161938602311" onmouseenter="enter('3920598161938602311');" onmouseout="out('3920598161938602311');" style="">2854          if (isPackageDisabled(pm, cn.getPackageName())) {                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2855              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2856          }                                                                                                         </span>
<span  style="">2857                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2858          try {                                                                                                     </span>
<span class="5148337441661745301" onmouseenter="enter('5148337441661745301');" onmouseout="out('5148337441661745301');" style="">2859              // Check the activity                                                                                 </span>
<span class="-3548512208842411383" onmouseenter="enter('-3548512208842411383');" onmouseout="out('-3548512208842411383');" style="">2860              PackageInfo pi = pm.getPackageInfo(cn.getPackageName(), 0);                                           </span>
<span class="-7304348613249571904" onmouseenter="enter('-7304348613249571904');" onmouseout="out('-7304348613249571904');" style="">2861              return (pm.getActivityInfo(cn, 0) != null);                                                           </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="">2862          } catch (NameNotFoundException e) {                                                                       </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2863              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2864          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2865      }                                                                                                             </span>
<span  style="">2866                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2867      /**                                                                                                           </span>
<span class="-1422058377481062223" onmouseenter="enter('-1422058377481062223');" onmouseout="out('-1422058377481062223');" style="">2868       * Make an ShortcutInfo object for a restored application or shortcut item that points                        </span>
<span class="-3240825039404734763" onmouseenter="enter('-3240825039404734763');" onmouseout="out('-3240825039404734763');" style="">2869       * to a package that is not yet installed on the system.                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2870       */                                                                                                           </span>
<span class="8070224997591472859" onmouseenter="enter('8070224997591472859');" onmouseout="out('8070224997591472859');" style="">2871      public ShortcutInfo getRestoredItemInfo(Cursor cursor, int titleIndex, Intent intent) {                       </span>

<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">2872          final ShortcutInfo info = new ShortcutInfo();                                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2873 -        info.usingFallbackIcon = true;                                                                            </span>
<span class="4720658287044976809" onmouseenter="enter('4720658287044976809');" onmouseout="out('4720658287044976809');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">2874 -        info.setIcon(getFallbackIcon());                                                                          </span>
<span class="-6884521933390835722" onmouseenter="enter('-6884521933390835722');" onmouseout="out('-6884521933390835722');" style="">2875          if (cursor != null) {                                                                                     </span>
<span class="-7858065958686887242" onmouseenter="enter('-7858065958686887242');" onmouseout="out('-7858065958686887242');" style="">2876              info.title =  cursor.getString(titleIndex);                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2877          } else {                                                                                                  </span>
<span class="-9179287796133695880" onmouseenter="enter('-9179287796133695880');" onmouseout="out('-9179287796133695880');" style="">2878              info.title = &quot;&quot;;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2879          }                                                                                                         </span>
<span class="-1591268116362889652" onmouseenter="enter('-1591268116362889652');" onmouseout="out('-1591268116362889652');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2880 +        info.setIcon(mIconCache.getIcon(intent, info.title.toString()));                                          </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">2881          info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                            </span>
<span class="-5029095292884465134" onmouseenter="enter('-5029095292884465134');" onmouseout="out('-5029095292884465134');" style="">2882          info.restoredIntent = intent;                                                                             </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">2883          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2884      }                                                                                                             </span>
<span  style="">2885                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2886      /**                                                                                                           </span>
<span class="3086315656576237338" onmouseenter="enter('3086315656576237338');" onmouseout="out('3086315656576237338');" style="">2887       * Make an Intent object for a restored application or shortcut item that points                              </span>
<span class="-6367188518910147180" onmouseenter="enter('-6367188518910147180');" onmouseout="out('-6367188518910147180');" style="">2888       * to the market page for the item.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2889       */                                                                                                           </span>
<span class="-6647643744207470673" onmouseenter="enter('-6647643744207470673');" onmouseout="out('-6647643744207470673');" style="">2890      private Intent getRestoredItemIntent(Cursor c, Context context, Intent intent) {                              </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style="">2891          final boolean debug = false;                                                                              </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">2892          ComponentName componentName = intent.getComponent();                                                      </span>
<span class="5230577021520033618" onmouseenter="enter('5230577021520033618');" onmouseout="out('5230577021520033618');" style="">2893          Intent marketIntent = new Intent(Intent.ACTION_VIEW);                                                     </span>
<span class="-6224205935725503646" onmouseenter="enter('-6224205935725503646');" onmouseout="out('-6224205935725503646');" style="">2894          Uri marketUri = new Uri.Builder()                                                                         </span>
<span class="-9027153585574964790" onmouseenter="enter('-9027153585574964790');" onmouseout="out('-9027153585574964790');" style="">2895                  .scheme(&quot;market&quot;)                                                                                 </span>
<span class="-1106866791415129127" onmouseenter="enter('-1106866791415129127');" onmouseout="out('-1106866791415129127');" style="">2896                  .authority(&quot;details&quot;)                                                                             </span>
<span class="-6156875340655442296" onmouseenter="enter('-6156875340655442296');" onmouseout="out('-6156875340655442296');" style="">2897                  .appendQueryParameter(&quot;id&quot;, componentName.getPackageName())                                       </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style="">2898                  .build();                                                                                         </span>
<span class="1889430633002020321" onmouseenter="enter('1889430633002020321');" onmouseout="out('1889430633002020321');" style="">2899          if (debug) Log.d(TAG, &quot;manufactured intent uri: &quot; + marketUri.toString());                                </span>

<span class="8200775736438266685" onmouseenter="enter('8200775736438266685');" onmouseout="out('8200775736438266685');" style="">2900          marketIntent.setData(marketUri);                                                                          </span>
<span class="-840031405639981960" onmouseenter="enter('-840031405639981960');" onmouseout="out('-840031405639981960');" style="">2901          return marketIntent;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2902      }                                                                                                             </span>
<span  style="">2903                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2904      /**                                                                                                           </span>
<span class="6759547650823633948" onmouseenter="enter('6759547650823633948');" onmouseout="out('6759547650823633948');" style="">2905       * This is called from the code that adds shortcuts from the intent receiver.  This                           </span>
<span class="1598280755109073179" onmouseenter="enter('1598280755109073179');" onmouseout="out('1598280755109073179');" style="">2906       * doesn&#x27;t have a Cursor, but                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2907       */                                                                                                           </span>
<span class="5614106103309211810" onmouseenter="enter('5614106103309211810');" onmouseout="out('5614106103309211810');" style="">2908      public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context) {                 </span>
<span class="-3335806789481426156" onmouseenter="enter('-3335806789481426156');" onmouseout="out('-3335806789481426156');" style="">2909          return getShortcutInfo(manager, intent, context, null, -1, -1, null);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2910      }                                                                                                             </span>
<span  style="">2911                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2912      /**                                                                                                           </span>
<span class="-1467760634860339139" onmouseenter="enter('-1467760634860339139');" onmouseout="out('-1467760634860339139');" style="">2913       * Make an ShortcutInfo object for a shortcut that is an application.                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2914       *                                                                                                            </span>
<span class="-3542647944112672905" onmouseenter="enter('-3542647944112672905');" onmouseout="out('-3542647944112672905');" style="">2915       * If c is not null, then it will be used to fill in missing data like the title and icon.                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2916       */                                                                                                           </span>
<span class="1276500584496912228" onmouseenter="enter('1276500584496912228');" onmouseout="out('1276500584496912228');" style="">2917      public ShortcutInfo getShortcutInfo(PackageManager manager, Intent intent, Context context,                   </span>
<span class="-7918747784600027039" onmouseenter="enter('-7918747784600027039');" onmouseout="out('-7918747784600027039');" style="">2918              Cursor c, int iconIndex, int titleIndex, HashMap&lt;Object, CharSequence&gt; labelCache) {                  </span>
<span class="-4108077571415570944" onmouseenter="enter('-4108077571415570944');" onmouseout="out('-4108077571415570944');" style="">2919          ComponentName componentName = intent.getComponent();                                                      </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">2920          final ShortcutInfo info = new ShortcutInfo();                                                             </span>
<span class="444940595441544179" onmouseenter="enter('444940595441544179');" onmouseout="out('444940595441544179');" style="">2921          if (componentName != null &amp;&amp; !isValidPackageComponent(manager, componentName)) {                          </span>
<span class="-409027952341615484" onmouseenter="enter('-409027952341615484');" onmouseout="out('-409027952341615484');" style="">2922              Log.d(TAG, &quot;Invalid package found in getShortcutInfo: &quot; + componentName);                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">2923              return null;                                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2924          } else {                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2925              try {                                                                                                 </span>
<span class="4294749985361673643" onmouseenter="enter('4294749985361673643');" onmouseout="out('4294749985361673643');" style="">2926                  PackageInfo pi = manager.getPackageInfo(componentName.getPackageName(), 0);                       </span>
<span class="3308885914817688196" onmouseenter="enter('3308885914817688196');" onmouseout="out('3308885914817688196');" style="">2927                  info.initFlagsAndFirstInstallTime(pi);                                                            </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style="">2928              } catch (NameNotFoundException e) {                                                                   </span>
<span class="-3402401844985211338" onmouseenter="enter('-3402401844985211338');" onmouseout="out('-3402401844985211338');" style="">2929                  Log.d(TAG, &quot;getPackInfo failed for package &quot; +                                                    </span>
<span class="-7617949507024469990" onmouseenter="enter('-7617949507024469990');" onmouseout="out('-7617949507024469990');" style="">2930                          componentName.getPackageName());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2931              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2932          }                                                                                                         </span>
<span  style="">2933                                                                                                                    </span>
<span class="-5839804976451698217" onmouseenter="enter('-5839804976451698217');" onmouseout="out('-5839804976451698217');" style="">2934          // TODO: See if the PackageManager knows about this case.  If it doesn&#x27;t                                  </span>
<span class="-575420847374711684" onmouseenter="enter('-575420847374711684');" onmouseout="out('-575420847374711684');" style="">2935          // then return null &amp; delete this.                                                                        </span>
<span  style="">2936                                                                                                                    </span>
<span class="5323402181664282980" onmouseenter="enter('5323402181664282980');" onmouseout="out('5323402181664282980');" style="">2937          // the resource -- This may implicitly give us back the fallback icon,                                    </span>
<span class="-798092997962515080" onmouseenter="enter('-798092997962515080');" onmouseout="out('-798092997962515080');" style="">2938          // but don&#x27;t worry about that.  All we&#x27;re doing with usingFallbackIcon is                                 </span>
<span class="4614559195454825202" onmouseenter="enter('4614559195454825202');" onmouseout="out('4614559195454825202');" style="">2939          // to avoid saving lots of copies of that in the database, and most apps                                  </span>
<span class="2042041324737915810" onmouseenter="enter('2042041324737915810');" onmouseout="out('2042041324737915810');" style="">2940          // have icons anyway.                                                                                     </span>
<span  style="">2941                                                                                                                    </span>
<span class="1748721733354639816" onmouseenter="enter('1748721733354639816');" onmouseout="out('1748721733354639816');" style="">2942          // Attempt to use queryIntentActivities to get the ResolveInfo (with IntentFilter info) and               </span>
<span class="-6676021501376744578" onmouseenter="enter('-6676021501376744578');" onmouseout="out('-6676021501376744578');" style="">2943          // if that fails, or is ambiguious, fallback to the standard way of getting the resolve info              </span>
<span class="-6094266232633177049" onmouseenter="enter('-6094266232633177049');" onmouseout="out('-6094266232633177049');" style="">2944          // via resolveActivity().                                                                                 </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">2945          Bitmap icon = null;                                                                                       </span>
<span class="-12205607414596767" onmouseenter="enter('-12205607414596767');" onmouseout="out('-12205607414596767');" style="">2946          ResolveInfo resolveInfo = null;                                                                           </span>
<span class="5248255614039346565" onmouseenter="enter('5248255614039346565');" onmouseout="out('5248255614039346565');" style="">2947          ComponentName oldComponent = intent.getComponent();                                                       </span>
<span class="70056291231254629" onmouseenter="enter('70056291231254629');" onmouseout="out('70056291231254629');" style="">2948          Intent newIntent = new Intent(intent.getAction(), null);                                                  </span>
<span class="-1452692057882979766" onmouseenter="enter('-1452692057882979766');" onmouseout="out('-1452692057882979766');" style="">2949          newIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                          </span>
<span class="-4528672120988578527" onmouseenter="enter('-4528672120988578527');" onmouseout="out('-4528672120988578527');" style="">2950          newIntent.setPackage(oldComponent.getPackageName());                                                      </span>
<span class="-4266560778617611378" onmouseenter="enter('-4266560778617611378');" onmouseout="out('-4266560778617611378');" style="">2951          List&lt;ResolveInfo&gt; infos = manager.queryIntentActivities(newIntent, 0);                                    </span>
<span class="-1258353831095463835" onmouseenter="enter('-1258353831095463835');" onmouseout="out('-1258353831095463835');" style="">2952          for (ResolveInfo i : infos) {                                                                             </span>
<span class="5094763243037624802" onmouseenter="enter('5094763243037624802');" onmouseout="out('5094763243037624802');" style="">2953              ComponentName cn = new ComponentName(i.activityInfo.packageName,                                      </span>
<span class="1720373740013823268" onmouseenter="enter('1720373740013823268');" onmouseout="out('1720373740013823268');" style="">2954                      i.activityInfo.name);                                                                         </span>
<span class="-7290368567659218563" onmouseenter="enter('-7290368567659218563');" onmouseout="out('-7290368567659218563');" style="">2955              if (cn.equals(oldComponent)) {                                                                        </span>
<span class="-6794055892963959667" onmouseenter="enter('-6794055892963959667');" onmouseout="out('-6794055892963959667');" style="">2956                  resolveInfo = i;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2957              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2958          }                                                                                                         </span>
<span class="6326898777629576914" onmouseenter="enter('6326898777629576914');" onmouseout="out('6326898777629576914');" style="">2959          if (resolveInfo == null) {                                                                                </span>
<span class="8776212146813846258" onmouseenter="enter('8776212146813846258');" onmouseout="out('8776212146813846258');" style="">2960              resolveInfo = manager.resolveActivity(intent, 0);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2961          }                                                                                                         </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="">2962          if (resolveInfo != null) {                                                                                </span>
<span class="-7448006110826377930" onmouseenter="enter('-7448006110826377930');" onmouseout="out('-7448006110826377930');" style="">2963              icon = mIconCache.getIcon(componentName, resolveInfo, labelCache);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2964          }                                                                                                         </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">2965          // the db                                                                                                 </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">2966          if (icon == null) {                                                                                       </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2967              if (c != null) {                                                                                      </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">2968                  icon = getIconFromCursor(c, iconIndex, context);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2969              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2970          }                                                                                                         </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">2971          // the fallback icon                                                                                      </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">2972          if (icon == null) {                                                                                       </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">2973              icon = getFallbackIcon();                                                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">2974              info.usingFallbackIcon = true;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2975          }                                                                                                         </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">2976          info.setIcon(icon);                                                                                       </span>
<span  style="">2977                                                                                                                    </span>
<span class="7054767873271725898" onmouseenter="enter('7054767873271725898');" onmouseout="out('7054767873271725898');" style="">2978          // from the resource                                                                                      </span>
<span class="8318276323083857893" onmouseenter="enter('8318276323083857893');" onmouseout="out('8318276323083857893');" style="">2979          if (resolveInfo != null) {                                                                                </span>
<span class="4800110805856691594" onmouseenter="enter('4800110805856691594');" onmouseout="out('4800110805856691594');" style="">2980              ComponentName key = LauncherModel.getComponentNameFromResolveInfo(resolveInfo);                       </span>
<span class="8748582400169036217" onmouseenter="enter('8748582400169036217');" onmouseout="out('8748582400169036217');" style="">2981              if (labelCache != null &amp;&amp; labelCache.containsKey(key)) {                                              </span>
<span class="3192670581922801839" onmouseenter="enter('3192670581922801839');" onmouseout="out('3192670581922801839');" style="">2982                  info.title = labelCache.get(key);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2983              } else {                                                                                              </span>
<span class="-2714967885034418454" onmouseenter="enter('-2714967885034418454');" onmouseout="out('-2714967885034418454');" style="">2984                  info.title = resolveInfo.activityInfo.loadLabel(manager);                                         </span>
<span class="1778921540057734080" onmouseenter="enter('1778921540057734080');" onmouseout="out('1778921540057734080');" style="">2985                  if (labelCache != null) {                                                                         </span>
<span class="-7678945850387299322" onmouseenter="enter('-7678945850387299322');" onmouseout="out('-7678945850387299322');" style="">2986                      labelCache.put(key, info.title);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2987                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2988              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2989          }                                                                                                         </span>
<span class="-7465759676168587687" onmouseenter="enter('-7465759676168587687');" onmouseout="out('-7465759676168587687');" style="">2990          // from the db                                                                                            </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">2991          if (info.title == null) {                                                                                 </span>
<span class="-6948023604691785621" onmouseenter="enter('-6948023604691785621');" onmouseout="out('-6948023604691785621');" style="">2992              if (c != null) {                                                                                      </span>
<span class="-3184821142709825057" onmouseenter="enter('-3184821142709825057');" onmouseout="out('-3184821142709825057');" style="">2993                  info.title =  c.getString(titleIndex);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2994              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2995          }                                                                                                         </span>
<span class="-3300288691074588674" onmouseenter="enter('-3300288691074588674');" onmouseout="out('-3300288691074588674');" style="">2996          // fall back to the class name of the activity                                                            </span>
<span class="1027301675755343448" onmouseenter="enter('1027301675755343448');" onmouseout="out('1027301675755343448');" style="">2997          if (info.title == null) {                                                                                 </span>
<span class="-8852275649252281641" onmouseenter="enter('-8852275649252281641');" onmouseout="out('-8852275649252281641');" style="">2998              info.title = componentName.getClassName();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2999          }                                                                                                         </span>
<span class="7933897515512130399" onmouseenter="enter('7933897515512130399');" onmouseout="out('7933897515512130399');" style="">3000          info.itemType = LauncherSettings.Favorites.ITEM_TYPE_APPLICATION;                                         </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3001          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3002      }                                                                                                             </span>
<span  style="">3003                                                                                                                    </span>
<span class="4439425861689174202" onmouseenter="enter('4439425861689174202');" onmouseout="out('4439425861689174202');" style="">3004      static ArrayList&lt;ItemInfo&gt; filterItemInfos(Collection&lt;ItemInfo&gt; infos,                                        </span>
<span class="6562040460462558270" onmouseenter="enter('6562040460462558270');" onmouseout="out('6562040460462558270');" style="">3005              ItemInfoFilter f) {                                                                                   </span>
<span class="-341948731893176054" onmouseenter="enter('-341948731893176054');" onmouseout="out('-341948731893176054');" style="">3006          HashSet&lt;ItemInfo&gt; filtered = new HashSet&lt;ItemInfo&gt;();                                                     </span>
<span class="-5707773946011903479" onmouseenter="enter('-5707773946011903479');" onmouseout="out('-5707773946011903479');" style="">3007          for (ItemInfo i : infos) {                                                                                </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3008              if (i instanceof ShortcutInfo) {                                                                      </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3009                  ShortcutInfo info = (ShortcutInfo) i;                                                             </span>
<span class="299648897077832064" onmouseenter="enter('299648897077832064');" onmouseout="out('299648897077832064');" style="">3010                  ComponentName cn = info.intent.getComponent();                                                    </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3011                  if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                                 </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3012                      filtered.add(info);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3013                  }                                                                                                 </span>
<span class="-3991875190988320435" onmouseenter="enter('-3991875190988320435');" onmouseout="out('-3991875190988320435');" style="">3014              } else if (i instanceof FolderInfo) {                                                                 </span>
<span class="5655388972065239375" onmouseenter="enter('5655388972065239375');" onmouseout="out('5655388972065239375');" style="">3015                  FolderInfo info = (FolderInfo) i;                                                                 </span>
<span class="551974476971988370" onmouseenter="enter('551974476971988370');" onmouseout="out('551974476971988370');" style="">3016                  for (ShortcutInfo s : info.contents) {                                                            </span>
<span class="2331162999822676145" onmouseenter="enter('2331162999822676145');" onmouseout="out('2331162999822676145');" style="">3017                      ComponentName cn = s.intent.getComponent();                                                   </span>
<span class="-203564141906270755" onmouseenter="enter('-203564141906270755');" onmouseout="out('-203564141906270755');" style="">3018                      if (cn != null &amp;&amp; f.filterItem(info, s, cn)) {                                                </span>
<span class="-3396286072640698031" onmouseenter="enter('-3396286072640698031');" onmouseout="out('-3396286072640698031');" style="">3019                          filtered.add(s);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3020                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3021                  }                                                                                                 </span>
<span class="-6245773261295261120" onmouseenter="enter('-6245773261295261120');" onmouseout="out('-6245773261295261120');" style="">3022              } else if (i instanceof LauncherAppWidgetInfo) {                                                      </span>
<span class="-9066656906031581030" onmouseenter="enter('-9066656906031581030');" onmouseout="out('-9066656906031581030');" style="">3023                  LauncherAppWidgetInfo info = (LauncherAppWidgetInfo) i;                                           </span>
<span class="7149829203308063306" onmouseenter="enter('7149829203308063306');" onmouseout="out('7149829203308063306');" style="">3024                  ComponentName cn = info.providerName;                                                             </span>
<span class="-6649963844873487879" onmouseenter="enter('-6649963844873487879');" onmouseout="out('-6649963844873487879');" style="">3025                  if (cn != null &amp;&amp; f.filterItem(null, info, cn)) {                                                 </span>
<span class="5504760499023917879" onmouseenter="enter('5504760499023917879');" onmouseout="out('5504760499023917879');" style="">3026                      filtered.add(info);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3027                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3028              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3029          }                                                                                                         </span>
<span class="-61899809234431084" onmouseenter="enter('-61899809234431084');" onmouseout="out('-61899809234431084');" style="">3030          return new ArrayList&lt;ItemInfo&gt;(filtered);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3031      }                                                                                                             </span>
<span  style="">3032                                                                                                                    </span>
<span class="-3045683366231863679" onmouseenter="enter('-3045683366231863679');" onmouseout="out('-3045683366231863679');" style="">3033      private ArrayList&lt;ItemInfo&gt; getItemInfoForPackageName(final String pn) {                                      </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">3034          ItemInfoFilter filter  = new ItemInfoFilter() {                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3035              @Override                                                                                             </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">3036              public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                         </span>
<span class="4366277958827250658" onmouseenter="enter('4366277958827250658');" onmouseout="out('4366277958827250658');" style="">3037                  return cn.getPackageName().equals(pn);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3038              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3039          };                                                                                                        </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">3040          return filterItemInfos(sBgItemsIdMap.values(), filter);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3041      }                                                                                                             </span>
<span  style="">3042                                                                                                                    </span>
<span class="5278497386445713053" onmouseenter="enter('5278497386445713053');" onmouseout="out('5278497386445713053');" style="">3043      private ArrayList&lt;ItemInfo&gt; getItemInfoForComponentName(final ComponentName cname) {                          </span>
<span class="-2532527968822546383" onmouseenter="enter('-2532527968822546383');" onmouseout="out('-2532527968822546383');" style="">3044          ItemInfoFilter filter  = new ItemInfoFilter() {                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">3045              @Override                                                                                             </span>
<span class="-5014543141753920962" onmouseenter="enter('-5014543141753920962');" onmouseout="out('-5014543141753920962');" style="">3046              public boolean filterItem(ItemInfo parent, ItemInfo info, ComponentName cn) {                         </span>
<span class="8793480353967270" onmouseenter="enter('8793480353967270');" onmouseout="out('8793480353967270');" style="">3047                  return cn.equals(cname);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3048              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3049          };                                                                                                        </span>
<span class="-2073371141274796376" onmouseenter="enter('-2073371141274796376');" onmouseout="out('-2073371141274796376');" style="">3050          return filterItemInfos(sBgItemsIdMap.values(), filter);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3051      }                                                                                                             </span>
<span  style="">3052                                                                                                                    </span>
<span class="1124396970102851152" onmouseenter="enter('1124396970102851152');" onmouseout="out('1124396970102851152');" style="">3053      public static boolean isShortcutInfoUpdateable(ItemInfo i) {                                                  </span>
<span class="7491317713006596901" onmouseenter="enter('7491317713006596901');" onmouseout="out('7491317713006596901');" style="">3054          if (i instanceof ShortcutInfo) {                                                                          </span>
<span class="6591783650423770010" onmouseenter="enter('6591783650423770010');" onmouseout="out('6591783650423770010');" style="">3055              ShortcutInfo info = (ShortcutInfo) i;                                                                 </span>
<span class="-4176416752413564182" onmouseenter="enter('-4176416752413564182');" onmouseout="out('-4176416752413564182');" style="">3056              // We need to check for ACTION_MAIN otherwise getComponent() might                                    </span>
<span class="-4431177575884820054" onmouseenter="enter('-4431177575884820054');" onmouseout="out('-4431177575884820054');" style="">3057              // return null for some shortcuts (for instance, for shortcuts to                                     </span>
<span class="5405126151757999271" onmouseenter="enter('5405126151757999271');" onmouseout="out('5405126151757999271');" style="">3058              // web pages.)                                                                                        </span>
<span class="2400775771645829424" onmouseenter="enter('2400775771645829424');" onmouseout="out('2400775771645829424');" style="">3059              Intent intent = info.intent;                                                                          </span>
<span class="5515215321882412237" onmouseenter="enter('5515215321882412237');" onmouseout="out('5515215321882412237');" style="">3060              ComponentName name = intent.getComponent();                                                           </span>
<span class="-7226540389871247766" onmouseenter="enter('-7226540389871247766');" onmouseout="out('-7226540389871247766');" style="">3061              if (info.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION &amp;&amp;                              </span>
<span class="-3498713534944595637" onmouseenter="enter('-3498713534944595637');" onmouseout="out('-3498713534944595637');" style="">3062                      Intent.ACTION_MAIN.equals(intent.getAction()) &amp;&amp; name != null) {                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3063                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3064              }                                                                                                     </span>
<span class="-5396282347241069474" onmouseenter="enter('-5396282347241069474');" onmouseout="out('-5396282347241069474');" style="">3065              // placeholder shortcuts get special treatment, let them through too.                                 </span>
<span class="-969316460988421609" onmouseenter="enter('-969316460988421609');" onmouseout="out('-969316460988421609');" style="">3066              if (info.getRestoredIntent() != null) {                                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3067                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3068              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3069          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3070          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3071      }                                                                                                             </span>
<span  style="">3072                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3073      /**                                                                                                           </span>
<span class="-7383302121747425580" onmouseenter="enter('-7383302121747425580');" onmouseout="out('-7383302121747425580');" style="">3074       * Make an ShortcutInfo object for a shortcut that isn&#x27;t an application.                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3075       */                                                                                                           </span>
<span class="-832588879686874653" onmouseenter="enter('-832588879686874653');" onmouseout="out('-832588879686874653');" style="">3076      private ShortcutInfo getShortcutInfo(Cursor c, Context context,                                               </span>
<span class="4905943326370352288" onmouseenter="enter('4905943326370352288');" onmouseout="out('4905943326370352288');" style="">3077              int iconTypeIndex, int iconPackageIndex, int iconResourceIndex, int iconIndex,                        </span>
<span class="483103881605747557" onmouseenter="enter('483103881605747557');" onmouseout="out('483103881605747557');" style="">3078              int titleIndex) {                                                                                     </span>
<span  style="">3079                                                                                                                    </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3080          Bitmap icon = null;                                                                                       </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3081          final ShortcutInfo info = new ShortcutInfo();                                                             </span>
<span class="1376641185313174494" onmouseenter="enter('1376641185313174494');" onmouseout="out('1376641185313174494');" style="">3082          info.itemType = LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;                                            </span>
<span  style="">3083                                                                                                                    </span>
<span class="7613558771605813536" onmouseenter="enter('7613558771605813536');" onmouseout="out('7613558771605813536');" style="">3084          // TODO: If there&#x27;s an explicit component and we can&#x27;t install that, delete it.                           </span>
<span  style="">3085                                                                                                                    </span>
<span class="7288105011746485932" onmouseenter="enter('7288105011746485932');" onmouseout="out('7288105011746485932');" style="">3086          info.title = c.getString(titleIndex);                                                                     </span>
<span  style="">3087                                                                                                                    </span>
<span class="3612299538514072472" onmouseenter="enter('3612299538514072472');" onmouseout="out('3612299538514072472');" style="">3088          int iconType = c.getInt(iconTypeIndex);                                                                   </span>
<span class="587586912378863553" onmouseenter="enter('587586912378863553');" onmouseout="out('587586912378863553');" style="">3089          switch (iconType) {                                                                                       </span>
<span class="-349524516714147238" onmouseenter="enter('-349524516714147238');" onmouseout="out('-349524516714147238');" style="">3090          case LauncherSettings.Favorites.ICON_TYPE_RESOURCE:                                                       </span>
<span class="-8135410904448428370" onmouseenter="enter('-8135410904448428370');" onmouseout="out('-8135410904448428370');" style="">3091              String packageName = c.getString(iconPackageIndex);                                                   </span>
<span class="-8435258133535712396" onmouseenter="enter('-8435258133535712396');" onmouseout="out('-8435258133535712396');" style="">3092              String resourceName = c.getString(iconResourceIndex);                                                 </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="">3093              PackageManager packageManager = context.getPackageManager();                                          </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3094              info.customIcon = false;                                                                              </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style="">3095              // the resource                                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3096              try {                                                                                                 </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style="">3097                  Resources resources = packageManager.getResourcesForApplication(packageName);                     </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style="">3098                  if (resources != null) {                                                                          </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style="">3099                      final int id = resources.getIdentifier(resourceName, null, null);                             </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3100                      icon = Utilities.createIconBitmap(                                                            </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="">3101                              mIconCache.getFullResIcon(resources, id), context);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3102                  }                                                                                                 </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3103              } catch (Exception e) {                                                                               </span>
<span class="5772476326804770264" onmouseenter="enter('5772476326804770264');" onmouseout="out('5772476326804770264');" style="">3104                  // drop this.  we have other places to look for icons                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3105              }                                                                                                     </span>
<span class="-1927069290366058344" onmouseenter="enter('-1927069290366058344');" onmouseout="out('-1927069290366058344');" style="">3106              // the db                                                                                             </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3107              if (icon == null) {                                                                                   </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3108                  icon = getIconFromCursor(c, iconIndex, context);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3109              }                                                                                                     </span>
<span class="-7087690521108398100" onmouseenter="enter('-7087690521108398100');" onmouseout="out('-7087690521108398100');" style="">3110              // the fallback icon                                                                                  </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3111              if (icon == null) {                                                                                   </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">3112                  icon = getFallbackIcon();                                                                         </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3113                  info.usingFallbackIcon = true;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3114              }                                                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3115              break;                                                                                                </span>
<span class="8287056964614325383" onmouseenter="enter('8287056964614325383');" onmouseout="out('8287056964614325383');" style="">3116          case LauncherSettings.Favorites.ICON_TYPE_BITMAP:                                                         </span>
<span class="2608707857368685153" onmouseenter="enter('2608707857368685153');" onmouseout="out('2608707857368685153');" style="">3117              icon = getIconFromCursor(c, iconIndex, context);                                                      </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3118              if (icon == null) {                                                                                   </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">3119                  icon = getFallbackIcon();                                                                         </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3120                  info.customIcon = false;                                                                          </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3121                  info.usingFallbackIcon = true;                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3122              } else {                                                                                              </span>
<span class="5065693686602940755" onmouseenter="enter('5065693686602940755');" onmouseout="out('5065693686602940755');" style="">3123                  info.customIcon = true;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3124              }                                                                                                     </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3125              break;                                                                                                </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style="">3126          default:                                                                                                  </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">3127              icon = getFallbackIcon();                                                                             </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3128              info.usingFallbackIcon = true;                                                                        </span>
<span class="-5700016718045569376" onmouseenter="enter('-5700016718045569376');" onmouseout="out('-5700016718045569376');" style="">3129              info.customIcon = false;                                                                              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">3130              break;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3131          }                                                                                                         </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3132          info.setIcon(icon);                                                                                       </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3133          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3134      }                                                                                                             </span>
<span  style="">3135                                                                                                                    </span>
<span class="6654370236660323989" onmouseenter="enter('6654370236660323989');" onmouseout="out('6654370236660323989');" style="">3136      Bitmap getIconFromCursor(Cursor c, int iconIndex, Context context) {                                          </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style="">3137          @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                                    </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style="">3138          final boolean debug = false;                                                                              </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style="">3139          if (debug) {                                                                                              </span>
<span class="-6059745727821652987" onmouseenter="enter('-6059745727821652987');" onmouseout="out('-6059745727821652987');" style="">3140              Log.d(TAG, &quot;getIconFromCursor app=&quot;                                                                   </span>
<span class="3938717124241653137" onmouseenter="enter('3938717124241653137');" onmouseout="out('3938717124241653137');" style="">3141                      + c.getString(c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE)));                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3142          }                                                                                                         </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="">3143          byte[] data = c.getBlob(iconIndex);                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3144          try {                                                                                                     </span>
<span class="-8927216840433750458" onmouseenter="enter('-8927216840433750458');" onmouseout="out('-8927216840433750458');" style="">3145              return Utilities.createIconBitmap(                                                                    </span>
<span class="5146235978369237158" onmouseenter="enter('5146235978369237158');" onmouseout="out('5146235978369237158');" style="">3146                      BitmapFactory.decodeByteArray(data, 0, data.length), context);                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3147          } catch (Exception e) {                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3148              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3149          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3150      }                                                                                                             </span>
<span  style="">3151                                                                                                                    </span>
<span class="-7359014031490826383" onmouseenter="enter('-7359014031490826383');" onmouseout="out('-7359014031490826383');" style="">3152      ShortcutInfo addShortcut(Context context, Intent data, long container, int screen,                            </span>
<span class="6268414987721391526" onmouseenter="enter('6268414987721391526');" onmouseout="out('6268414987721391526');" style="">3153              int cellX, int cellY, boolean notify) {                                                               </span>
<span class="2628174670305655041" onmouseenter="enter('2628174670305655041');" onmouseout="out('2628174670305655041');" style="">3154          final ShortcutInfo info = infoFromShortcutIntent(context, data, null);                                    </span>
<span class="164903852834130891" onmouseenter="enter('164903852834130891');" onmouseout="out('164903852834130891');" style="">3155          if (info == null) {                                                                                       </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3156              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3157          }                                                                                                         </span>
<span class="-221445018295793081" onmouseenter="enter('-221445018295793081');" onmouseout="out('-221445018295793081');" style="">3158          addItemToDatabase(context, info, container, screen, cellX, cellY, notify);                                </span>
<span  style="">3159                                                                                                                    </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3160          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3161      }                                                                                                             </span>
<span  style="">3162                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3163      /**                                                                                                           </span>
<span class="-2170604135443496089" onmouseenter="enter('-2170604135443496089');" onmouseout="out('-2170604135443496089');" style="">3164       * Attempts to find an AppWidgetProviderInfo that matches the given component.                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3165       */                                                                                                           </span>
<span class="-5080859468016274115" onmouseenter="enter('-5080859468016274115');" onmouseout="out('-5080859468016274115');" style="">3166      AppWidgetProviderInfo findAppWidgetProviderInfoWithComponent(Context context,                                 </span>
<span class="2095123178876202639" onmouseenter="enter('2095123178876202639');" onmouseout="out('2095123178876202639');" style="">3167              ComponentName component) {                                                                            </span>
<span class="-6575430528437366773" onmouseenter="enter('-6575430528437366773');" onmouseout="out('-6575430528437366773');" style="">3168          List&lt;AppWidgetProviderInfo&gt; widgets =                                                                     </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="">3169              AppWidgetManager.getInstance(context).getInstalledProviders();                                        </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">3170          for (AppWidgetProviderInfo info : widgets) {                                                              </span>
<span class="444529726636175405" onmouseenter="enter('444529726636175405');" onmouseout="out('444529726636175405');" style="">3171              if (info.provider.equals(component)) {                                                                </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3172                  return info;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3173              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3174          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3175          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3176      }                                                                                                             </span>
<span  style="">3177                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3178      /**                                                                                                           </span>
<span class="7439199513195640847" onmouseenter="enter('7439199513195640847');" onmouseout="out('7439199513195640847');" style="">3179       * Returns a list of all the widgets that can handle configuration with a particular mimeType.                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3180       */                                                                                                           </span>
<span class="6325854662222182070" onmouseenter="enter('6325854662222182070');" onmouseout="out('6325854662222182070');" style="">3181      List&lt;WidgetMimeTypeHandlerData&gt; resolveWidgetsForMimeType(Context context, String mimeType) {                 </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">3182          final PackageManager packageManager = context.getPackageManager();                                        </span>
<span class="3847705782231652914" onmouseenter="enter('3847705782231652914');" onmouseout="out('3847705782231652914');" style="">3183          final List&lt;WidgetMimeTypeHandlerData&gt; supportedConfigurationActivities =                                  </span>
<span class="-5417931937414580646" onmouseenter="enter('-5417931937414580646');" onmouseout="out('-5417931937414580646');" style="">3184              new ArrayList&lt;WidgetMimeTypeHandlerData&gt;();                                                           </span>
<span  style="">3185                                                                                                                    </span>
<span class="3700104316520923099" onmouseenter="enter('3700104316520923099');" onmouseout="out('3700104316520923099');" style="">3186          final Intent supportsIntent =                                                                             </span>
<span class="-5996974504874484707" onmouseenter="enter('-5996974504874484707');" onmouseout="out('-5996974504874484707');" style="">3187              new Intent(InstallWidgetReceiver.ACTION_SUPPORTS_CLIPDATA_MIMETYPE);                                  </span>
<span class="6679063100467623292" onmouseenter="enter('6679063100467623292');" onmouseout="out('6679063100467623292');" style="">3188          supportsIntent.setType(mimeType);                                                                         </span>
<span  style="">3189                                                                                                                    </span>
<span class="6275845746944894373" onmouseenter="enter('6275845746944894373');" onmouseout="out('6275845746944894373');" style="">3190          // Create a set of widget configuration components that we can test against                               </span>
<span class="361965435897470734" onmouseenter="enter('361965435897470734');" onmouseout="out('361965435897470734');" style="">3191          final List&lt;AppWidgetProviderInfo&gt; widgets =                                                               </span>
<span class="-5612359239682847687" onmouseenter="enter('-5612359239682847687');" onmouseout="out('-5612359239682847687');" style="">3192              AppWidgetManager.getInstance(context).getInstalledProviders();                                        </span>
<span class="9185108259439406491" onmouseenter="enter('9185108259439406491');" onmouseout="out('9185108259439406491');" style="">3193          final HashMap&lt;ComponentName, AppWidgetProviderInfo&gt; configurationComponentToWidget =                      </span>
<span class="-4320342521313681795" onmouseenter="enter('-4320342521313681795');" onmouseout="out('-4320342521313681795');" style="">3194              new HashMap&lt;ComponentName, AppWidgetProviderInfo&gt;();                                                  </span>
<span class="-8778466029712113419" onmouseenter="enter('-8778466029712113419');" onmouseout="out('-8778466029712113419');" style="">3195          for (AppWidgetProviderInfo info : widgets) {                                                              </span>
<span class="-5537825176935075872" onmouseenter="enter('-5537825176935075872');" onmouseout="out('-5537825176935075872');" style="">3196              configurationComponentToWidget.put(info.configure, info);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3197          }                                                                                                         </span>
<span  style="">3198                                                                                                                    </span>
<span class="7227984661430491714" onmouseenter="enter('7227984661430491714');" onmouseout="out('7227984661430491714');" style="">3199          // Run through each of the intents that can handle this type of clip data, and cross                      </span>
<span class="-5312515598910931459" onmouseenter="enter('-5312515598910931459');" onmouseout="out('-5312515598910931459');" style="">3200          // reference them with the components that are actual configuration components                            </span>
<span class="96188399651153294" onmouseenter="enter('96188399651153294');" onmouseout="out('96188399651153294');" style="">3201          final List&lt;ResolveInfo&gt; activities = packageManager.queryIntentActivities(supportsIntent,                 </span>
<span class="2456166036476176214" onmouseenter="enter('2456166036476176214');" onmouseout="out('2456166036476176214');" style="">3202                  PackageManager.MATCH_DEFAULT_ONLY);                                                               </span>
<span class="-6210771211908512935" onmouseenter="enter('-6210771211908512935');" onmouseout="out('-6210771211908512935');" style="">3203          for (ResolveInfo info : activities) {                                                                     </span>
<span class="4178492805266676194" onmouseenter="enter('4178492805266676194');" onmouseout="out('4178492805266676194');" style="">3204              final ActivityInfo activityInfo = info.activityInfo;                                                  </span>
<span class="5911001791562559694" onmouseenter="enter('5911001791562559694');" onmouseout="out('5911001791562559694');" style="">3205              final ComponentName infoComponent = new ComponentName(activityInfo.packageName,                       </span>
<span class="2224927995621460603" onmouseenter="enter('2224927995621460603');" onmouseout="out('2224927995621460603');" style="">3206                      activityInfo.name);                                                                           </span>
<span class="5227428239073058925" onmouseenter="enter('5227428239073058925');" onmouseout="out('5227428239073058925');" style="">3207              if (configurationComponentToWidget.containsKey(infoComponent)) {                                      </span>
<span class="1978663855217064477" onmouseenter="enter('1978663855217064477');" onmouseout="out('1978663855217064477');" style="">3208                  supportedConfigurationActivities.add(                                                             </span>
<span class="-7165755523548006690" onmouseenter="enter('-7165755523548006690');" onmouseout="out('-7165755523548006690');" style="">3209                          new InstallWidgetReceiver.WidgetMimeTypeHandlerData(info,                                 </span>
<span class="-7657609803705245302" onmouseenter="enter('-7657609803705245302');" onmouseout="out('-7657609803705245302');" style="">3210                                  configurationComponentToWidget.get(infoComponent)));                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3211              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3212          }                                                                                                         </span>
<span class="8087136273107515292" onmouseenter="enter('8087136273107515292');" onmouseout="out('8087136273107515292');" style="">3213          return supportedConfigurationActivities;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3214      }                                                                                                             </span>
<span  style="">3215                                                                                                                    </span>
<span class="-5347330719934774268" onmouseenter="enter('-5347330719934774268');" onmouseout="out('-5347330719934774268');" style="">3216      ShortcutInfo infoFromShortcutIntent(Context context, Intent data, Bitmap fallbackIcon) {                      </span>
<span class="8885065625084988978" onmouseenter="enter('8885065625084988978');" onmouseout="out('8885065625084988978');" style="">3217          Intent intent = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_INTENT);                                    </span>
<span class="8754707358466729356" onmouseenter="enter('8754707358466729356');" onmouseout="out('8754707358466729356');" style="">3218          String name = data.getStringExtra(Intent.EXTRA_SHORTCUT_NAME);                                            </span>
<span class="-6415007334509386725" onmouseenter="enter('-6415007334509386725');" onmouseout="out('-6415007334509386725');" style="">3219          Parcelable bitmap = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON);                                  </span>
<span  style="">3220                                                                                                                    </span>
<span class="-8400111569787613467" onmouseenter="enter('-8400111569787613467');" onmouseout="out('-8400111569787613467');" style="">3221          if (intent == null) {                                                                                     </span>
<span class="-7222749280640950660" onmouseenter="enter('-7222749280640950660');" onmouseout="out('-7222749280640950660');" style="">3222              // If the intent is null, we can&#x27;t construct a valid ShortcutInfo, so we return null                  </span>
<span class="2086461264164088394" onmouseenter="enter('2086461264164088394');" onmouseout="out('2086461264164088394');" style="">3223              Log.e(TAG, &quot;Can&#x27;t construct ShorcutInfo with null intent&quot;);                                           </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">3224              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3225          }                                                                                                         </span>
<span  style="">3226                                                                                                                    </span>
<span class="1433981209089789613" onmouseenter="enter('1433981209089789613');" onmouseout="out('1433981209089789613');" style="">3227          Bitmap icon = null;                                                                                       </span>
<span class="-5201738827927049970" onmouseenter="enter('-5201738827927049970');" onmouseout="out('-5201738827927049970');" style="">3228          boolean customIcon = false;                                                                               </span>
<span class="7106370779598857182" onmouseenter="enter('7106370779598857182');" onmouseout="out('7106370779598857182');" style="">3229          ShortcutIconResource iconResource = null;                                                                 </span>
<span  style="">3230                                                                                                                    </span>
<span class="4708321654003878831" onmouseenter="enter('4708321654003878831');" onmouseout="out('4708321654003878831');" style="">3231          if (bitmap != null &amp;&amp; bitmap instanceof Bitmap) {                                                         </span>
<span class="-4792971395534249505" onmouseenter="enter('-4792971395534249505');" onmouseout="out('-4792971395534249505');" style="">3232              icon = Utilities.createIconBitmap(new FastBitmapDrawable((Bitmap)bitmap), context);                   </span>
<span class="398283090594517644" onmouseenter="enter('398283090594517644');" onmouseout="out('398283090594517644');" style="">3233              customIcon = true;                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3234          } else {                                                                                                  </span>
<span class="8053278256512428939" onmouseenter="enter('8053278256512428939');" onmouseout="out('8053278256512428939');" style="">3235              Parcelable extra = data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE);                      </span>
<span class="1150112908884585569" onmouseenter="enter('1150112908884585569');" onmouseout="out('1150112908884585569');" style="">3236              if (extra != null &amp;&amp; extra instanceof ShortcutIconResource) {                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3237                  try {                                                                                             </span>
<span class="7381422411731402038" onmouseenter="enter('7381422411731402038');" onmouseout="out('7381422411731402038');" style="">3238                      iconResource = (ShortcutIconResource) extra;                                                  </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="">3239                      final PackageManager packageManager = context.getPackageManager();                            </span>
<span class="8040670109966211806" onmouseenter="enter('8040670109966211806');" onmouseout="out('8040670109966211806');" style="">3240                      Resources resources = packageManager.getResourcesForApplication(                              </span>
<span class="6486160691197808360" onmouseenter="enter('6486160691197808360');" onmouseout="out('6486160691197808360');" style="">3241                              iconResource.packageName);                                                            </span>
<span class="8660063882056417771" onmouseenter="enter('8660063882056417771');" onmouseout="out('8660063882056417771');" style="">3242                      final int id = resources.getIdentifier(iconResource.resourceName, null, null);                </span>
<span class="-4716895571739102505" onmouseenter="enter('-4716895571739102505');" onmouseout="out('-4716895571739102505');" style="">3243                      icon = Utilities.createIconBitmap(                                                            </span>
<span class="5953912359126165551" onmouseenter="enter('5953912359126165551');" onmouseout="out('5953912359126165551');" style="">3244                              mIconCache.getFullResIcon(resources, id), context);                                   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3245                  } catch (Exception e) {                                                                           </span>
<span class="3904703345331845179" onmouseenter="enter('3904703345331845179');" onmouseout="out('3904703345331845179');" style="">3246                      Log.w(TAG, &quot;Could not load shortcut icon: &quot; + extra);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3247                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3248              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3249          }                                                                                                         </span>
<span  style="">3250                                                                                                                    </span>
<span class="5219751599757670867" onmouseenter="enter('5219751599757670867');" onmouseout="out('5219751599757670867');" style="">3251          final ShortcutInfo info = new ShortcutInfo();                                                             </span>
<span  style="">3252                                                                                                                    </span>
<span class="1725352956749743202" onmouseenter="enter('1725352956749743202');" onmouseout="out('1725352956749743202');" style="">3253          if (icon == null) {                                                                                       </span>
<span class="-5102432251092900261" onmouseenter="enter('-5102432251092900261');" onmouseout="out('-5102432251092900261');" style="">3254              if (fallbackIcon != null) {                                                                           </span>
<span class="5793590417920465615" onmouseenter="enter('5793590417920465615');" onmouseout="out('5793590417920465615');" style="">3255                  icon = fallbackIcon;                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3256              } else {                                                                                              </span>
<span class="2420148711394730622" onmouseenter="enter('2420148711394730622');" onmouseout="out('2420148711394730622');" style="">3257                  icon = getFallbackIcon();                                                                         </span>
<span class="3801126379872332840" onmouseenter="enter('3801126379872332840');" onmouseout="out('3801126379872332840');" style="">3258                  info.usingFallbackIcon = true;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3259              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3260          }                                                                                                         </span>
<span class="2049054968354085728" onmouseenter="enter('2049054968354085728');" onmouseout="out('2049054968354085728');" style="">3261          info.setIcon(icon);                                                                                       </span>
<span  style="">3262                                                                                                                    </span>
<span class="-1829710476241369792" onmouseenter="enter('-1829710476241369792');" onmouseout="out('-1829710476241369792');" style="">3263          info.title = name;                                                                                        </span>
<span class="-5495467554099251492" onmouseenter="enter('-5495467554099251492');" onmouseout="out('-5495467554099251492');" style="">3264          info.intent = intent;                                                                                     </span>
<span class="4633184714742215751" onmouseenter="enter('4633184714742215751');" onmouseout="out('4633184714742215751');" style="">3265          info.customIcon = customIcon;                                                                             </span>
<span class="6083484121682275347" onmouseenter="enter('6083484121682275347');" onmouseout="out('6083484121682275347');" style="">3266          info.iconResource = iconResource;                                                                         </span>
<span  style="">3267                                                                                                                    </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style="">3268          return info;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3269      }                                                                                                             </span>
<span  style="">3270                                                                                                                    </span>
<span class="869799550823252877" onmouseenter="enter('869799550823252877');" onmouseout="out('869799550823252877');" style="">3271      boolean queueIconToBeChecked(HashMap&lt;Object, byte[]&gt; cache, ShortcutInfo info, Cursor c,                      </span>
<span class="650460935465639981" onmouseenter="enter('650460935465639981');" onmouseout="out('650460935465639981');" style="">3272              int iconIndex) {                                                                                      </span>
<span class="63801910951777151" onmouseenter="enter('63801910951777151');" onmouseout="out('63801910951777151');" style="">3273          // If apps can&#x27;t be on SD, don&#x27;t even bother.                                                             </span>
<span class="3575767446700015335" onmouseenter="enter('3575767446700015335');" onmouseout="out('3575767446700015335');" style="">3274          if (!mAppsCanBeOnRemoveableStorage) {                                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3275              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3276          }                                                                                                         </span>
<span class="861653016939823039" onmouseenter="enter('861653016939823039');" onmouseout="out('861653016939823039');" style="">3277          // If this icon doesn&#x27;t have a custom icon, check to see                                                  </span>
<span class="-1631525504415382572" onmouseenter="enter('-1631525504415382572');" onmouseout="out('-1631525504415382572');" style="">3278          // what&#x27;s stored in the DB, and if it doesn&#x27;t match what                                                  </span>
<span class="-2833764056931958051" onmouseenter="enter('-2833764056931958051');" onmouseout="out('-2833764056931958051');" style="">3279          // we&#x27;re going to show, store what we are going to show back                                              </span>
<span class="6822044102664419432" onmouseenter="enter('6822044102664419432');" onmouseout="out('6822044102664419432');" style="">3280          // into the DB.  We do this so when we&#x27;re loading, if the                                                 </span>
<span class="2186475696045222856" onmouseenter="enter('2186475696045222856');" onmouseout="out('2186475696045222856');" style="">3281          // package manager can&#x27;t find an icon (for example because                                                </span>
<span class="-3178081182524516354" onmouseenter="enter('-3178081182524516354');" onmouseout="out('-3178081182524516354');" style="">3282          // the app is on SD) then we can use that instead.                                                        </span>
<span class="6478679774718804760" onmouseenter="enter('6478679774718804760');" onmouseout="out('6478679774718804760');" style="">3283          if (!info.customIcon &amp;&amp; !info.usingFallbackIcon) {                                                        </span>
<span class="9182700683168292388" onmouseenter="enter('9182700683168292388');" onmouseout="out('9182700683168292388');" style="">3284              cache.put(info, c.getBlob(iconIndex));                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">3285              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3286          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">3287          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3288      }                                                                                                             </span>
<span class="1654527872685192879" onmouseenter="enter('1654527872685192879');" onmouseout="out('1654527872685192879');" style="">3289      void updateSavedIcon(Context context, ShortcutInfo info, byte[] data) {                                       </span>
<span class="2739424845963553299" onmouseenter="enter('2739424845963553299');" onmouseout="out('2739424845963553299');" style="">3290          boolean needSave = false;                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">3291          try {                                                                                                     </span>
<span class="8818251485791898564" onmouseenter="enter('8818251485791898564');" onmouseout="out('8818251485791898564');" style="">3292              if (data != null) {                                                                                   </span>
<span class="-7759318311620721467" onmouseenter="enter('-7759318311620721467');" onmouseout="out('-7759318311620721467');" style="">3293                  Bitmap saved = BitmapFactory.decodeByteArray(data, 0, data.length);                               </span>
<span class="5601916118931842920" onmouseenter="enter('5601916118931842920');" onmouseout="out('5601916118931842920');" style="">3294                  Bitmap loaded = info.getIcon(mIconCache);                                                         </span>
<span class="3622333829210083937" onmouseenter="enter('3622333829210083937');" onmouseout="out('3622333829210083937');" style="">3295                  needSave = !saved.sameAs(loaded);                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3296              } else {                                                                                              </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3297                  needSave = true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3298              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">3299          } catch (Exception e) {                                                                                   </span>
<span class="7373976534529300329" onmouseenter="enter('7373976534529300329');" onmouseout="out('7373976534529300329');" style="">3300              needSave = true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3301          }                                                                                                         </span>
<span class="-1391846982631217245" onmouseenter="enter('-1391846982631217245');" onmouseout="out('-1391846982631217245');" style="">3302          if (needSave) {                                                                                           </span>
<span class="3557323548661765982" onmouseenter="enter('3557323548661765982');" onmouseout="out('3557323548661765982');" style="">3303              Log.d(TAG, &quot;going to save icon bitmap for info=&quot; + info);                                             </span>
<span class="2982884345620001266" onmouseenter="enter('2982884345620001266');" onmouseout="out('2982884345620001266');" style="">3304              // This is slower than is ideal, but this only happens once                                           </span>
<span class="6026812495787058898" onmouseenter="enter('6026812495787058898');" onmouseout="out('6026812495787058898');" style="">3305              // or when the app is updated with a new icon.                                                        </span>
<span class="-1065631531085966005" onmouseenter="enter('-1065631531085966005');" onmouseout="out('-1065631531085966005');" style="">3306              updateItemInDatabase(context, info);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3307          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3308      }                                                                                                             </span>
<span  style="">3309                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">3310      /**                                                                                                           </span>
<span class="4855649975001229153" onmouseenter="enter('4855649975001229153');" onmouseout="out('4855649975001229153');" style="">3311       * Return an existing FolderInfo object if we have encountered this ID previously,                            </span>
<span class="1965046356881977619" onmouseenter="enter('1965046356881977619');" onmouseout="out('1965046356881977619');" style="">3312       * or make a new one.                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">3313       */                                                                                                           </span>
<span class="-2475696420152943641" onmouseenter="enter('-2475696420152943641');" onmouseout="out('-2475696420152943641');" style="">3314      private static FolderInfo findOrMakeFolder(HashMap&lt;Long, FolderInfo&gt; folders, long id) {                      </span>
<span class="4702055422209629108" onmouseenter="enter('4702055422209629108');" onmouseout="out('4702055422209629108');" style="">3315          // See if a placeholder was created for us already                                                        </span>
<span class="5369947662598537472" onmouseenter="enter('5369947662598537472');" onmouseout="out('5369947662598537472');" style="">3316          FolderInfo folderInfo = folders.get(id);                                                                  </span>
<span class="-1935655509058582330" onmouseenter="enter('-1935655509058582330');" onmouseout="out('-1935655509058582330');" style="">3317          if (folderInfo == null) {                                                                                 </span>
<span class="-2837885610668527269" onmouseenter="enter('-2837885610668527269');" onmouseout="out('-2837885610668527269');" style="">3318              // No placeholder -- create a new instance                                                            </span>
<span class="-1173144769562528834" onmouseenter="enter('-1173144769562528834');" onmouseout="out('-1173144769562528834');" style="">3319              folderInfo = new FolderInfo();                                                                        </span>
<span class="-6364759527041918506" onmouseenter="enter('-6364759527041918506');" onmouseout="out('-6364759527041918506');" style="">3320              folders.put(id, folderInfo);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3321          }                                                                                                         </span>
<span class="-7399978011941799260" onmouseenter="enter('-7399978011941799260');" onmouseout="out('-7399978011941799260');" style="">3322          return folderInfo;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3323      }                                                                                                             </span>
<span  style="">3324                                                                                                                    </span>
<span class="-958488581416967596" onmouseenter="enter('-958488581416967596');" onmouseout="out('-958488581416967596');" style="">3325      public static final Comparator&lt;AppInfo&gt; getAppNameComparator() {                                              </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">3326          final Collator collator = Collator.getInstance();                                                         </span>
<span class="-5613048777706091935" onmouseenter="enter('-5613048777706091935');" onmouseout="out('-5613048777706091935');" style="">3327          return new Comparator&lt;AppInfo&gt;() {                                                                        </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3328              public final int compare(AppInfo a, AppInfo b) {                                                      </span>
<span class="-7549376093488495011" onmouseenter="enter('-7549376093488495011');" onmouseout="out('-7549376093488495011');" style="">3329                  int result = collator.compare(a.title.toString().trim(),                                          </span>
<span class="1811873973139560730" onmouseenter="enter('1811873973139560730');" onmouseout="out('1811873973139560730');" style="">3330                          b.title.toString().trim());                                                               </span>
<span class="8606135965292633507" onmouseenter="enter('8606135965292633507');" onmouseout="out('8606135965292633507');" style="">3331                  if (result == 0) {                                                                                </span>
<span class="3669915132885915948" onmouseenter="enter('3669915132885915948');" onmouseout="out('3669915132885915948');" style="">3332                      result = a.componentName.compareTo(b.componentName);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3333                  }                                                                                                 </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">3334                  return result;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3335              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3336          };                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3337      }                                                                                                             </span>
<span class="394292360646743486" onmouseenter="enter('394292360646743486');" onmouseout="out('394292360646743486');" style="">3338      public static final Comparator&lt;AppInfo&gt; APP_INSTALL_TIME_COMPARATOR                                           </span>
<span class="-2973469265380285464" onmouseenter="enter('-2973469265380285464');" onmouseout="out('-2973469265380285464');" style="">3339              = new Comparator&lt;AppInfo&gt;() {                                                                         </span>
<span class="-7069495216745198714" onmouseenter="enter('-7069495216745198714');" onmouseout="out('-7069495216745198714');" style="">3340          public final int compare(AppInfo a, AppInfo b) {                                                          </span>
<span class="4743139001154708795" onmouseenter="enter('4743139001154708795');" onmouseout="out('4743139001154708795');" style="">3341              if (a.firstInstallTime &lt; b.firstInstallTime) return 1;                                                </span>
<span class="2246013200960361834" onmouseenter="enter('2246013200960361834');" onmouseout="out('2246013200960361834');" style="">3342              if (a.firstInstallTime &gt; b.firstInstallTime) return -1;                                               </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style="">3343              return 0;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3344          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3345      };                                                                                                            </span>
<span class="-8609474311948503984" onmouseenter="enter('-8609474311948503984');" onmouseout="out('-8609474311948503984');" style="">3346      public static final Comparator&lt;AppWidgetProviderInfo&gt; getWidgetNameComparator() {                             </span>
<span class="-7224882780818200101" onmouseenter="enter('-7224882780818200101');" onmouseout="out('-7224882780818200101');" style="">3347          final Collator collator = Collator.getInstance();                                                         </span>
<span class="-2259377864696368534" onmouseenter="enter('-2259377864696368534');" onmouseout="out('-2259377864696368534');" style="">3348          return new Comparator&lt;AppWidgetProviderInfo&gt;() {                                                          </span>
<span class="-678507615594739242" onmouseenter="enter('-678507615594739242');" onmouseout="out('-678507615594739242');" style="">3349              public final int compare(AppWidgetProviderInfo a, AppWidgetProviderInfo b) {                          </span>
<span class="2077578932126968211" onmouseenter="enter('2077578932126968211');" onmouseout="out('2077578932126968211');" style="">3350                  return collator.compare(a.label.toString().trim(), b.label.toString().trim());                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3351              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3352          };                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3353      }                                                                                                             </span>
<span class="-2741084556110057526" onmouseenter="enter('-2741084556110057526');" onmouseout="out('-2741084556110057526');" style="">3354      static ComponentName getComponentNameFromResolveInfo(ResolveInfo info) {                                      </span>
<span class="5044967282776033452" onmouseenter="enter('5044967282776033452');" onmouseout="out('5044967282776033452');" style="">3355          if (info.activityInfo != null) {                                                                          </span>
<span class="4524084479320544608" onmouseenter="enter('4524084479320544608');" onmouseout="out('4524084479320544608');" style="">3356              return new ComponentName(info.activityInfo.packageName, info.activityInfo.name);                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3357          } else {                                                                                                  </span>
<span class="-6175863207819175779" onmouseenter="enter('-6175863207819175779');" onmouseout="out('-6175863207819175779');" style="">3358              return new ComponentName(info.serviceInfo.packageName, info.serviceInfo.name);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3359          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3360      }                                                                                                             </span>
<span class="-1238156797468239183" onmouseenter="enter('-1238156797468239183');" onmouseout="out('-1238156797468239183');" style="">3361      public static class ShortcutNameComparator implements Comparator&lt;ResolveInfo&gt; {                               </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">3362          private Collator mCollator;                                                                               </span>
<span class="3738582539680694944" onmouseenter="enter('3738582539680694944');" onmouseout="out('3738582539680694944');" style="">3363          private PackageManager mPackageManager;                                                                   </span>
<span class="5508794446264022854" onmouseenter="enter('5508794446264022854');" onmouseout="out('5508794446264022854');" style="">3364          private HashMap&lt;Object, CharSequence&gt; mLabelCache;                                                        </span>
<span class="-5960404209194449161" onmouseenter="enter('-5960404209194449161');" onmouseout="out('-5960404209194449161');" style="">3365          ShortcutNameComparator(PackageManager pm) {                                                               </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="">3366              mPackageManager = pm;                                                                                 </span>
<span class="-5721569830439684608" onmouseenter="enter('-5721569830439684608');" onmouseout="out('-5721569830439684608');" style="">3367              mLabelCache = new HashMap&lt;Object, CharSequence&gt;();                                                    </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3368              mCollator = Collator.getInstance();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3369          }                                                                                                         </span>
<span class="-5325604689380562785" onmouseenter="enter('-5325604689380562785');" onmouseout="out('-5325604689380562785');" style="">3370          ShortcutNameComparator(PackageManager pm, HashMap&lt;Object, CharSequence&gt; labelCache) {                     </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="">3371              mPackageManager = pm;                                                                                 </span>
<span class="-1230739904022851098" onmouseenter="enter('-1230739904022851098');" onmouseout="out('-1230739904022851098');" style="">3372              mLabelCache = labelCache;                                                                             </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3373              mCollator = Collator.getInstance();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3374          }                                                                                                         </span>
<span class="2504403784205444317" onmouseenter="enter('2504403784205444317');" onmouseout="out('2504403784205444317');" style="">3375          public final int compare(ResolveInfo a, ResolveInfo b) {                                                  </span>
<span class="177946296771916785" onmouseenter="enter('177946296771916785');" onmouseout="out('177946296771916785');" style="">3376              CharSequence labelA, labelB;                                                                          </span>
<span class="2313389288092914550" onmouseenter="enter('2313389288092914550');" onmouseout="out('2313389288092914550');" style="">3377              ComponentName keyA = LauncherModel.getComponentNameFromResolveInfo(a);                                </span>
<span class="1313017237584786738" onmouseenter="enter('1313017237584786738');" onmouseout="out('1313017237584786738');" style="">3378              ComponentName keyB = LauncherModel.getComponentNameFromResolveInfo(b);                                </span>
<span class="6987605502838603761" onmouseenter="enter('6987605502838603761');" onmouseout="out('6987605502838603761');" style="">3379              if (mLabelCache.containsKey(keyA)) {                                                                  </span>
<span class="-8432555163859180221" onmouseenter="enter('-8432555163859180221');" onmouseout="out('-8432555163859180221');" style="">3380                  labelA = mLabelCache.get(keyA);                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3381              } else {                                                                                              </span>
<span class="-2584626643586656789" onmouseenter="enter('-2584626643586656789');" onmouseout="out('-2584626643586656789');" style="">3382                  labelA = a.loadLabel(mPackageManager).toString().trim();                                          </span>
<span  style="">3383                                                                                                                    </span>
<span class="-8431652685509449538" onmouseenter="enter('-8431652685509449538');" onmouseout="out('-8431652685509449538');" style="">3384                  mLabelCache.put(keyA, labelA);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3385              }                                                                                                     </span>
<span class="-6450873724396873776" onmouseenter="enter('-6450873724396873776');" onmouseout="out('-6450873724396873776');" style="">3386              if (mLabelCache.containsKey(keyB)) {                                                                  </span>
<span class="-3184391819650288160" onmouseenter="enter('-3184391819650288160');" onmouseout="out('-3184391819650288160');" style="">3387                  labelB = mLabelCache.get(keyB);                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3388              } else {                                                                                              </span>
<span class="-6035042839601081566" onmouseenter="enter('-6035042839601081566');" onmouseout="out('-6035042839601081566');" style="">3389                  labelB = b.loadLabel(mPackageManager).toString().trim();                                          </span>
<span  style="">3390                                                                                                                    </span>
<span class="6304111994442836155" onmouseenter="enter('6304111994442836155');" onmouseout="out('6304111994442836155');" style="">3391                  mLabelCache.put(keyB, labelB);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3392              }                                                                                                     </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3393              return mCollator.compare(labelA, labelB);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3394          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3395      };                                                                                                            </span>
<span class="-9068712813001281029" onmouseenter="enter('-9068712813001281029');" onmouseout="out('-9068712813001281029');" style="">3396      public static class WidgetAndShortcutNameComparator implements Comparator&lt;Object&gt; {                           </span>
<span class="-6279647777403653894" onmouseenter="enter('-6279647777403653894');" onmouseout="out('-6279647777403653894');" style="">3397          private Collator mCollator;                                                                               </span>
<span class="3738582539680694944" onmouseenter="enter('3738582539680694944');" onmouseout="out('3738582539680694944');" style="">3398          private PackageManager mPackageManager;                                                                   </span>
<span class="-3647203189121938913" onmouseenter="enter('-3647203189121938913');" onmouseout="out('-3647203189121938913');" style="">3399          private HashMap&lt;Object, String&gt; mLabelCache;                                                              </span>
<span class="-7973787508768304552" onmouseenter="enter('-7973787508768304552');" onmouseout="out('-7973787508768304552');" style="">3400          WidgetAndShortcutNameComparator(PackageManager pm) {                                                      </span>
<span class="-7354382253372786274" onmouseenter="enter('-7354382253372786274');" onmouseout="out('-7354382253372786274');" style="">3401              mPackageManager = pm;                                                                                 </span>
<span class="240497455152177218" onmouseenter="enter('240497455152177218');" onmouseout="out('240497455152177218');" style="">3402              mLabelCache = new HashMap&lt;Object, String&gt;();                                                          </span>
<span class="-2995251655139106221" onmouseenter="enter('-2995251655139106221');" onmouseout="out('-2995251655139106221');" style="">3403              mCollator = Collator.getInstance();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3404          }                                                                                                         </span>
<span class="6735042653098150116" onmouseenter="enter('6735042653098150116');" onmouseout="out('6735042653098150116');" style="">3405          public final int compare(Object a, Object b) {                                                            </span>
<span class="-655692707583917271" onmouseenter="enter('-655692707583917271');" onmouseout="out('-655692707583917271');" style="">3406              String labelA, labelB;                                                                                </span>
<span class="-5754282386436968390" onmouseenter="enter('-5754282386436968390');" onmouseout="out('-5754282386436968390');" style="">3407              if (mLabelCache.containsKey(a)) {                                                                     </span>
<span class="9174303291338212675" onmouseenter="enter('9174303291338212675');" onmouseout="out('9174303291338212675');" style="">3408                  labelA = mLabelCache.get(a);                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3409              } else {                                                                                              </span>
<span class="-5230674800178108876" onmouseenter="enter('-5230674800178108876');" onmouseout="out('-5230674800178108876');" style="">3410                  labelA = (a instanceof AppWidgetProviderInfo) ?                                                   </span>
<span class="8106329842535817312" onmouseenter="enter('8106329842535817312');" onmouseout="out('8106329842535817312');" style="">3411                      ((AppWidgetProviderInfo) a).label :                                                           </span>
<span class="2303647925533744119" onmouseenter="enter('2303647925533744119');" onmouseout="out('2303647925533744119');" style="">3412                      ((ResolveInfo) a).loadLabel(mPackageManager).toString().trim();                               </span>
<span class="-6757493580793216382" onmouseenter="enter('-6757493580793216382');" onmouseout="out('-6757493580793216382');" style="">3413                  mLabelCache.put(a, labelA);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3414              }                                                                                                     </span>
<span class="2173723640298609502" onmouseenter="enter('2173723640298609502');" onmouseout="out('2173723640298609502');" style="">3415              if (mLabelCache.containsKey(b)) {                                                                     </span>
<span class="-253401768434607465" onmouseenter="enter('-253401768434607465');" onmouseout="out('-253401768434607465');" style="">3416                  labelB = mLabelCache.get(b);                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3417              } else {                                                                                              </span>
<span class="2760475927841141319" onmouseenter="enter('2760475927841141319');" onmouseout="out('2760475927841141319');" style="">3418                  labelB = (b instanceof AppWidgetProviderInfo) ?                                                   </span>
<span class="-8579211562497370011" onmouseenter="enter('-8579211562497370011');" onmouseout="out('-8579211562497370011');" style="">3419                      ((AppWidgetProviderInfo) b).label :                                                           </span>
<span class="-7445104582750098413" onmouseenter="enter('-7445104582750098413');" onmouseout="out('-7445104582750098413');" style="">3420                      ((ResolveInfo) b).loadLabel(mPackageManager).toString().trim();                               </span>
<span class="1041849722861633477" onmouseenter="enter('1041849722861633477');" onmouseout="out('1041849722861633477');" style="">3421                  mLabelCache.put(b, labelB);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3422              }                                                                                                     </span>
<span class="-6564833450366251595" onmouseenter="enter('-6564833450366251595');" onmouseout="out('-6564833450366251595');" style="">3423              return mCollator.compare(labelA, labelB);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3424          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">3425      };                                                                                                            </span>
<span  style="">3426                                                                                                                    </span>
<span class="-9211964353779436536" onmouseenter="enter('-9211964353779436536');" onmouseout="out('-9211964353779436536');" style="">3427      public void dumpState() {                                                                                     </span>
<span class="-8509686920730582178" onmouseenter="enter('-8509686920730582178');" onmouseout="out('-8509686920730582178');" style="">3428          Log.d(TAG, &quot;mCallbacks=&quot; + mCallbacks);                                                                   </span>
<span class="-6032216957883964740" onmouseenter="enter('-6032216957883964740');" onmouseout="out('-6032216957883964740');" style="">3429          AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.data&quot;, mBgAllAppsList.data);                           </span>
<span class="8779182816240818818" onmouseenter="enter('8779182816240818818');" onmouseout="out('8779182816240818818');" style="">3430          AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.added&quot;, mBgAllAppsList.added);                         </span>
<span class="5513048904999210121" onmouseenter="enter('5513048904999210121');" onmouseout="out('5513048904999210121');" style="">3431          AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.removed&quot;, mBgAllAppsList.removed);                     </span>
<span class="-6417320778911436113" onmouseenter="enter('-6417320778911436113');" onmouseout="out('-6417320778911436113');" style="">3432          AppInfo.dumpApplicationInfoList(TAG, &quot;mAllAppsList.modified&quot;, mBgAllAppsList.modified);                   </span>
<span class="5483971855788835958" onmouseenter="enter('5483971855788835958');" onmouseout="out('5483971855788835958');" style="">3433          if (mLoaderTask != null) {                                                                                </span>
<span class="-1961259503181318170" onmouseenter="enter('-1961259503181318170');" onmouseout="out('-1961259503181318170');" style="">3434              mLoaderTask.dumpState();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">3435          } else {                                                                                                  </span>
<span class="-4934836822377624371" onmouseenter="enter('-4934836822377624371');" onmouseout="out('-4934836822377624371');" style="">3436              Log.d(TAG, &quot;mLoaderTask=null&quot;);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3437          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3438      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">3439  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            