<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>513</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    513
                    <a href="512.html">prev</a>
                    <a href="514.html">next</a>
                    <a href="513_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Freeyourgadget/Gadgetbridge_b34e74494dc89fe0797b49032a56b38cf876e33a_app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/qhybrid/adapter/fossil_hr/FossilHRWatchAdapter.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Freeyourgadget\Gadgetbridge show &quot;b34e74494dc89fe0797b49032a56b38cf876e33a:app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/qhybrid/adapter/fossil_hr/FossilHRWatchAdapter.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Freeyourgadget\Gadgetbridge show &quot;b34e74494dc89fe0797b49032a56b38cf876e33a^1:app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/qhybrid/adapter/fossil_hr/FossilHRWatchAdapter.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Freeyourgadget\Gadgetbridge show &quot;b34e74494dc89fe0797b49032a56b38cf876e33a^2:app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/qhybrid/adapter/fossil_hr/FossilHRWatchAdapter.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Freeyourgadget\Gadgetbridge show &quot;91a3a2f2c5111956ffc9fa2f8a30b757a62ad1c9:app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/qhybrid/adapter/fossil_hr/FossilHRWatchAdapter.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[bj]], subset: [[bj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="-2997913422227863975" onmouseenter="enter('-2997913422227863975');" onmouseout="out('-2997913422227863975');" style="">   1 package nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.adapter.fossil_hr;                  </span>
<span  style="">   2                                                                                                          </span>
<span class="4736969144974683041" onmouseenter="enter('4736969144974683041');" onmouseout="out('4736969144974683041');" style="">   3 import android.bluetooth.BluetoothGattCharacteristic;                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   4 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   5 import android.content.Intent;                                                                           </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   6 import android.content.SharedPreferences;                                                                </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">   7 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">   8 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">   9 import android.graphics.Canvas;                                                                          </span>
<span class="-5868658801447575011" onmouseenter="enter('-5868658801447575011');" onmouseout="out('-5868658801447575011');" style="">  10 import android.graphics.Color;                                                                           </span>
<span class="-1586527322890291073" onmouseenter="enter('-1586527322890291073');" onmouseout="out('-1586527322890291073');" style="">  11 import android.graphics.Paint;                                                                           </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  12 import android.os.Build;                                                                                 </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  13 import android.widget.Toast;                                                                             </span>
<span  style="">  14                                                                                                          </span>
<span class="-9193129351684262878" onmouseenter="enter('-9193129351684262878');" onmouseout="out('-9193129351684262878');" style="">  15 import org.json.JSONArray;                                                                               </span>
<span class="-8573375701834280359" onmouseenter="enter('-8573375701834280359');" onmouseout="out('-8573375701834280359');" style="">  16 import org.json.JSONException;                                                                           </span>
<span class="7232075261178918144" onmouseenter="enter('7232075261178918144');" onmouseout="out('7232075261178918144');" style="">  17 import org.json.JSONObject;                                                                              </span>
<span  style="">  18                                                                                                          </span>
<span class="-3926401431737521278" onmouseenter="enter('-3926401431737521278');" onmouseout="out('-3926401431737521278');" style="">  19 import java.io.File;                                                                                     </span>
<span class="-535075201057145249" onmouseenter="enter('-535075201057145249');" onmouseout="out('-535075201057145249');" style="">  20 import java.io.FileInputStream;                                                                          </span>
<span class="-75475733228177869" onmouseenter="enter('-75475733228177869');" onmouseout="out('-75475733228177869');" style="">  21 import java.io.FileNotFoundException;                                                                    </span>
<span class="4915709264156936957" onmouseenter="enter('4915709264156936957');" onmouseout="out('4915709264156936957');" style="">  22 import java.io.FileOutputStream;                                                                         </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  23 import java.io.IOException;                                                                              </span>
<span class="-351121020327003485" onmouseenter="enter('-351121020327003485');" onmouseout="out('-351121020327003485');" style="">  24 import java.nio.BufferOverflowException;                                                                 </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  25 import java.util.ArrayList;                                                                              </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  26 import java.util.Calendar;                                                                               </span>
<span class="-4685965902094386510" onmouseenter="enter('-4685965902094386510');" onmouseout="out('-4685965902094386510');" style="">  27 import java.util.GregorianCalendar;                                                                      </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  28 import java.util.HashMap;                                                                                </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  29 import java.util.Iterator;                                                                               </span>
<span class="-3682115440535733483" onmouseenter="enter('-3682115440535733483');" onmouseout="out('-3682115440535733483');" style="">  30 import java.util.TimeZone;                                                                               </span>
<span class="2390503830490498598" onmouseenter="enter('2390503830490498598');" onmouseout="out('2390503830490498598');" style="">  31 import java.util.UUID;                                                                                   </span>
<span  style="">  32                                                                                                          </span>
<span class="-8113221927992302576" onmouseenter="enter('-8113221927992302576');" onmouseout="out('-8113221927992302576');" style="">  33 import nodomain.freeyourgadget.gadgetbridge.GBApplication;                                               </span>
<span class="-7265768043057292499" onmouseenter="enter('-7265768043057292499');" onmouseout="out('-7265768043057292499');" style="">  34 import nodomain.freeyourgadget.gadgetbridge.activities.GBActivity;                                       </span>
<span class="-141107564105590930" onmouseenter="enter('-141107564105590930');" onmouseout="out('-141107564105590930');" style="">  35 import nodomain.freeyourgadget.gadgetbridge.activities.devicesettings.DeviceSettingsPreferenceConst;     </span>
<span class="7017557905176594961" onmouseenter="enter('7017557905176594961');" onmouseout="out('7017557905176594961');" style="">  36 import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventCallControl;                       </span>
<span class="6368471362458763033" onmouseenter="enter('6368471362458763033');" onmouseout="out('6368471362458763033');" style="">  37 import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventFindPhone;                         </span>
<span class="4012861689788039008" onmouseenter="enter('4012861689788039008');" onmouseout="out('4012861689788039008');" style="">  38 import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventMusicControl;                      </span>
<span class="3654131406467691963" onmouseenter="enter('3654131406467691963');" onmouseout="out('3654131406467691963');" style="">  39 import nodomain.freeyourgadget.gadgetbridge.devices.qhybrid.HRConfigActivity;                            </span>
<span class="-7487037549552160195" onmouseenter="enter('-7487037549552160195');" onmouseout="out('-7487037549552160195');" style="">  40 import nodomain.freeyourgadget.gadgetbridge.devices.qhybrid.NotificationHRConfiguration;                 </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  41 import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                               </span>
<span class="-9074570965792323186" onmouseenter="enter('-9074570965792323186');" onmouseout="out('-9074570965792323186');" style="">  42 import nodomain.freeyourgadget.gadgetbridge.model.CallSpec;                                              </span>
<span class="-4068239021838445503" onmouseenter="enter('-4068239021838445503');" onmouseout="out('-4068239021838445503');" style="">  43 import nodomain.freeyourgadget.gadgetbridge.model.MusicSpec;                                             </span>
<span class="7536481506851862405" onmouseenter="enter('7536481506851862405');" onmouseout="out('7536481506851862405');" style="">  44 import nodomain.freeyourgadget.gadgetbridge.model.MusicStateSpec;                                        </span>
<span class="8239808916005009388" onmouseenter="enter('8239808916005009388');" onmouseout="out('8239808916005009388');" style="">  45 import nodomain.freeyourgadget.gadgetbridge.model.NotificationSpec;                                      </span>
<span class="-1384004108526222390" onmouseenter="enter('-1384004108526222390');" onmouseout="out('-1384004108526222390');" style="">  46 import nodomain.freeyourgadget.gadgetbridge.model.Weather;                                               </span>
<span class="-40839721936664146" onmouseenter="enter('-40839721936664146');" onmouseout="out('-40839721936664146');" style="">  47 import nodomain.freeyourgadget.gadgetbridge.model.WeatherSpec;                                           </span>
<span class="3410519392510510669" onmouseenter="enter('3410519392510510669');" onmouseout="out('3410519392510510669');" style="">  48 import nodomain.freeyourgadget.gadgetbridge.service.btle.TransactionBuilder;                             </span>
<span class="4332661620965164672" onmouseenter="enter('4332661620965164672');" onmouseout="out('4332661620965164672');" style="">  49 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.QHybridSupport;                      </span>
<span class="4386715749828831010" onmouseenter="enter('4386715749828831010');" onmouseout="out('4386715749828831010');" style="">  50 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.adapter.fossil.FossilWatchAdapter;   </span>
<span class="6910520238976776146" onmouseenter="enter('6910520238976776146');" onmouseout="out('6910520238976776146');" style="">  51 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.RequestMtuRequest;   </span>
<span class="5089968700906553867" onmouseenter="enter('5089968700906553867');" onmouseout="out('5089968700906553867');" style=""><abbr title="  52 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.SetDeviceStateRequest;">  52 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.SetDeviceStateRequestðŸ”µ</abbr></span>
<span class="6112441966638764283" onmouseenter="enter('6112441966638764283');" onmouseout="out('6112441966638764283');" style=""><abbr title="  53 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.configuration.ConfigurationPutRequest.TimeConfigItem;">  53 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.configuration.ConfiguðŸ”µ</abbr></span>
<span class="7471646323585627177" onmouseenter="enter('7471646323585627177');" onmouseout="out('7471646323585627177');" style=""><abbr title="  54 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayCallNotificationRequest;">  54 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayCallðŸ”µ</abbr></span>
<span class="-6858926904400925756" onmouseenter="enter('-6858926904400925756');" onmouseout="out('-6858926904400925756');" style=""><abbr title="  55 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayTextNotificationRequest;">  55 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayTextðŸ”µ</abbr></span>
<span class="-7335239105811257712" onmouseenter="enter('-7335239105811257712');" onmouseout="out('-7335239105811257712');" style=""><abbr title="  56 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.authentication.VerifyPrivateKeyRequest;">  56 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.authentication.VerðŸ”µ</abbr></span>
<span class="-8586181035863106404" onmouseenter="enter('-8586181035863106404');" onmouseout="out('-8586181035863106404');" style=""><abbr title="  57 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.buttons.ButtonConfigurationPutRequest;">  57 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.buttons.ButtonConfðŸ”µ</abbr></span>
<span class="-7616394483813386160" onmouseenter="enter('-7616394483813386160');" onmouseout="out('-7616394483813386160');" style=""><abbr title="  58 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfigurationGetRequest;">  58 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfðŸ”µ</abbr></span>
<span class="1784930373847085070" onmouseenter="enter('1784930373847085070');" onmouseout="out('1784930373847085070');" style=""><abbr title="  59 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfigurationPutRequest;">  59 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfðŸ”µ</abbr></span>
<span class="-7479827832081411210" onmouseenter="enter('-7479827832081411210');" onmouseout="out('-7479827832081411210');" style=""><abbr title="  60 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.file.AssetFilePutRequest;">  60 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.file.AssetFilePutRðŸ”µ</abbr></span>
<span class="6886533222315535550" onmouseenter="enter('6886533222315535550');" onmouseout="out('6886533222315535550');" style="">  61 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.AssetImage; </span>
<span class="4714390797546975821" onmouseenter="enter('4714390797546975821');" onmouseout="out('4714390797546975821');" style=""><abbr title="  62 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.AssetImageFactory;">  62 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.AssetImageFaðŸ”µ</abbr></span>
<span class="-6584136629945154367" onmouseenter="enter('-6584136629945154367');" onmouseout="out('-6584136629945154367');" style=""><abbr title="  63 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.ImagesSetRequest;">  63 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.ImagesSetReqðŸ”µ</abbr></span>
<span class="4407251461002993468" onmouseenter="enter('4407251461002993468');" onmouseout="out('4407251461002993468');" style=""><abbr title="  64 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.json.JsonPutRequest;">  64 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.json.JsonPutRequesðŸ”µ</abbr></span>
<span class="-3572348114301784964" onmouseenter="enter('-3572348114301784964');" onmouseout="out('-3572348114301784964');" style=""><abbr title="  65 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.menu.SetCommuteMenuMessage;">  65 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.menu.SetCommuteMenðŸ”µ</abbr></span>
<span class="7919188738795660329" onmouseenter="enter('7919188738795660329');" onmouseout="out('7919188738795660329');" style=""><abbr title="  66 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlRequest;">  66 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlðŸ”µ</abbr></span>
<span class="1138328726217316685" onmouseenter="enter('1138328726217316685');" onmouseout="out('1138328726217316685');" style=""><abbr title="  67 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicInfoSetRequest;">  67 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicInfoSetðŸ”µ</abbr></span>
<span class="-6007419784157735296" onmouseenter="enter('-6007419784157735296');" onmouseout="out('-6007419784157735296');" style=""><abbr title="  68 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.notification.NotificationFilterPutHRRequest;">  68 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.notification.NotifðŸ”µ</abbr></span>
<span class="2272282218964023705" onmouseenter="enter('2272282218964023705');" onmouseout="out('2272282218964023705');" style=""><abbr title="  69 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomBackgroundWidgetElement;">  69 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomBackgðŸ”µ</abbr></span>
<span class="-6693404726045535805" onmouseenter="enter('-6693404726045535805');" onmouseout="out('-6693404726045535805');" style=""><abbr title="  70 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomTextWidgetElement;">  70 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomTextWðŸ”µ</abbr></span>
<span class="6618883795787964297" onmouseenter="enter('6618883795787964297');" onmouseout="out('6618883795787964297');" style=""><abbr title="  71 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomWidget;">  71 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomWidgeðŸ”µ</abbr></span>
<span class="2778086687948821087" onmouseenter="enter('2778086687948821087');" onmouseout="out('2778086687948821087');" style=""><abbr title="  72 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomWidgetElement;">  72 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomWidgeðŸ”µ</abbr></span>
<span class="-5838235376860565233" onmouseenter="enter('-5838235376860565233');" onmouseout="out('-5838235376860565233');" style="">  73 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.Widget;    </span>
<span class="-8988880482945476231" onmouseenter="enter('-8988880482945476231');" onmouseout="out('-8988880482945476231');" style=""><abbr title="  74 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.WidgetsPutRequest;">  74 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.WidgetsPutRðŸ”µ</abbr></span>
<span class="-3798970344596478499" onmouseenter="enter('-3798970344596478499');" onmouseout="out('-3798970344596478499');" style="">  75 import nodomain.freeyourgadget.gadgetbridge.util.GB;                                                     </span>
<span class="-600862318521663319" onmouseenter="enter('-600862318521663319');" onmouseout="out('-600862318521663319');" style="">  76 import nodomain.freeyourgadget.gadgetbridge.util.Prefs;                                                  </span>
<span class="1710555602396666834" onmouseenter="enter('1710555602396666834');" onmouseout="out('1710555602396666834');" style="">  77 import nodomain.freeyourgadget.gadgetbridge.util.StringUtils;                                            </span>
<span  style="">  78                                                                                                          </span>
<span class="-6920508692158968227" onmouseenter="enter('-6920508692158968227');" onmouseout="out('-6920508692158968227');" style=""><abbr title="  79 import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlRequest.MUSIC_PHONE_REQUEST;">  79 import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicðŸ”µ</abbr></span>
<span class="1244615468169562272" onmouseenter="enter('1244615468169562272');" onmouseout="out('1244615468169562272');" style=""><abbr title="  80 import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlRequest.MUSIC_WATCH_REQUEST;">  80 import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicðŸ”µ</abbr></span>
<span  style="">  81                                                                                                          </span>
<span class="3592572912775199945" onmouseenter="enter('3592572912775199945');" onmouseout="out('3592572912775199945');" style="">  82 public class FossilHRWatchAdapter extends FossilWatchAdapter {                                           </span>
<span class="5088344414276172788" onmouseenter="enter('5088344414276172788');" onmouseout="out('5088344414276172788');" style="">  83     private byte[] phoneRandomNumber;                                                                    </span>
<span class="-506162566914247320" onmouseenter="enter('-506162566914247320');" onmouseout="out('-506162566914247320');" style="">  84     private byte[] watchRandomNumber;                                                                    </span>
<span  style="">  85                                                                                                          </span>
<span class="7640912025063028053" onmouseenter="enter('7640912025063028053');" onmouseout="out('7640912025063028053');" style="">  86     private ArrayList&lt;Widget&gt; widgets = new ArrayList&lt;&gt;();                                               </span>
<span  style="">  87                                                                                                          </span>
<span class="-2578264008762844907" onmouseenter="enter('-2578264008762844907');" onmouseout="out('-2578264008762844907');" style="">  88     private NotificationHRConfiguration[] notificationConfigurations;                                    </span>
<span  style="">  89                                                                                                          </span>
<span class="2535750949384339971" onmouseenter="enter('2535750949384339971');" onmouseout="out('2535750949384339971');" style="">  90     private MusicSpec currentSpec = null;                                                                </span>
<span  style="">  91                                                                                                          </span>
<span class="-6092139116600387375" onmouseenter="enter('-6092139116600387375');" onmouseout="out('-6092139116600387375');" style="">  92     int imageNameIndex = 0;                                                                              </span>
<span class="-1794288330955340230" onmouseenter="enter('-1794288330955340230');" onmouseout="out('-1794288330955340230');" style="">  93     private byte jsonIndex = 0;                                                                          </span>
<span  style="">  94                                                                                                          </span>
<span class="-4156328390524362965" onmouseenter="enter('-4156328390524362965');" onmouseout="out('-4156328390524362965');" style="">  95     private AssetImage backGroundImage = null;                                                           </span>
<span  style="">  96                                                                                                          </span>
<span class="-5170367685934262595" onmouseenter="enter('-5170367685934262595');" onmouseout="out('-5170367685934262595');" style="">  97     public FossilHRWatchAdapter(QHybridSupport deviceSupport) {                                          </span>
<span class="7895217862057392900" onmouseenter="enter('7895217862057392900');" onmouseout="out('7895217862057392900');" style="">  98         super(deviceSupport);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99     }                                                                                                    </span>
<span  style=""> 100                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 101     @Override                                                                                            </span>
<span class="6973867701261680867" onmouseenter="enter('6973867701261680867');" onmouseout="out('6973867701261680867');" style=""> 102     public void initialize() {                                                                           </span>
<span class="-6207208930684914824" onmouseenter="enter('-6207208930684914824');" onmouseout="out('-6207208930684914824');" style=""> 103         if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {                                     </span>
<span class="-3436726469441820604" onmouseenter="enter('-3436726469441820604');" onmouseout="out('-3436726469441820604');" style=""> 104             queueWrite(new RequestMtuRequest(512));                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105         }                                                                                                </span>
<span  style=""> 106                                                                                                          </span>
<span class="2214751643672186972" onmouseenter="enter('2214751643672186972');" onmouseout="out('2214751643672186972');" style=""> 107         queueWrite(new SetDeviceStateRequest(GBDevice.State.AUTHENTICATING));                            </span>
<span  style=""> 108                                                                                                          </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 109         negotiateSymmetricKey();                                                                         </span>
<span  style=""> 110                                                                                                          </span>
<span class="7150849353095805702" onmouseenter="enter('7150849353095805702');" onmouseout="out('7150849353095805702');" style=""> 111         queueWrite(new SetDeviceStateRequest(GBDevice.State.INITIALIZING));                              </span>
<span  style=""> 112                                                                                                          </span>
<span class="-4417803371223487901" onmouseenter="enter('-4417803371223487901');" onmouseout="out('-4417803371223487901');" style=""> 113         loadNotificationConfigurations();                                                                </span>
<span class="-45277995236735037" onmouseenter="enter('-45277995236735037');" onmouseout="out('-45277995236735037');" style=""> 114         queueWrite(new NotificationFilterPutHRRequest(this.notificationConfigurations, this));           </span>
<span class="-4331994456315640395" onmouseenter="enter('-4331994456315640395');" onmouseout="out('-4331994456315640395');" style=""> 115         setVibrationStrength();                                                                          </span>
<span  style=""> 116                                                                                                          </span>
<span class="-9031387911705611686" onmouseenter="enter('-9031387911705611686');" onmouseout="out('-9031387911705611686');" style=""> 117         syncSettings();                                                                                  </span>
<span  style=""> 118                                                                                                          </span>
<span class="7548848230134815961" onmouseenter="enter('7548848230134815961');" onmouseout="out('7548848230134815961');" style=""> 119         setTime();                                                                                       </span>
<span  style=""> 120                                                                                                          </span>
<span class="-7476048809216327685" onmouseenter="enter('-7476048809216327685');" onmouseout="out('-7476048809216327685');" style=""> 121         overwriteButtons(null);                                                                          </span>
<span  style=""> 122                                                                                                          </span>
<span  style=""> 123                                                                                                          </span>
<span class="1285717461947698949" onmouseenter="enter('1285717461947698949');" onmouseout="out('1285717461947698949');" style=""> 124         loadBackground();                                                                                </span>
<span class="-8671838943786981246" onmouseenter="enter('-8671838943786981246');" onmouseout="out('-8671838943786981246');" style=""> 125         loadWidgets();                                                                                   </span>
<span class="8810184639176192527" onmouseenter="enter('8810184639176192527');" onmouseout="out('8810184639176192527');" style=""> 126         // renderWidgets();                                                                              </span>
<span class="7961004691166238388" onmouseenter="enter('7961004691166238388');" onmouseout="out('7961004691166238388');" style=""><abbr title=" 127         // dunno if there is any point in doing this at start since when no watch is connected the QHybridSupport will not receive any intents anyway"> 127         // dunno if there is any point in doing this at start since when no watch is connected the QHybriðŸ”µ</abbr></span>
<span  style=""> 128                                                                                                          </span>
<span class="-673558019044966288" onmouseenter="enter('-673558019044966288');" onmouseout="out('-673558019044966288');" style=""> 129         queueWrite(new SetDeviceStateRequest(GBDevice.State.INITIALIZED));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130     }                                                                                                    </span>
<span  style=""> 131                                                                                                          </span>
<span class="2678698660370291293" onmouseenter="enter('2678698660370291293');" onmouseout="out('2678698660370291293');" style=""> 132     private void setVibrationStrength() {                                                                </span>
<span class="583153348914013546" onmouseenter="enter('583153348914013546');" onmouseout="out('583153348914013546');" style=""> 133         Prefs prefs = new Prefs(getDeviceSpecificPreferences());                                         </span>
<span class="3731955474946957698" onmouseenter="enter('3731955474946957698');" onmouseout="out('3731955474946957698');" style=""><abbr title=" 134         int vibrationStrengh = prefs.getInt(DeviceSettingsPreferenceConst.PREF_VIBRATION_STRENGH_PERCENTAGE, 2);"> 134         int vibrationStrengh = prefs.getInt(DeviceSettingsPreferenceConst.PREF_VIBRATION_STRENGH_PERCENTAðŸ”µ</abbr></span>
<span class="-1867169202627257001" onmouseenter="enter('-1867169202627257001');" onmouseout="out('-1867169202627257001');" style=""> 135         if (vibrationStrengh &gt; 0) {                                                                      </span>
<span class="2644384104178590300" onmouseenter="enter('2644384104178590300');" onmouseout="out('2644384104178590300');" style=""> 136             vibrationStrengh = (vibrationStrengh + 1) * 25; // Seems 0,50,75,100 are working...          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137         }                                                                                                </span>
<span class="6672289413916591004" onmouseenter="enter('6672289413916591004');" onmouseout="out('6672289413916591004');" style=""> 138         setVibrationStrength((short) (vibrationStrengh));                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139     }                                                                                                    </span>
<span  style=""> 140                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 141     @Override                                                                                            </span>
<span class="1506969207519742362" onmouseenter="enter('1506969207519742362');" onmouseout="out('1506969207519742362');" style=""> 142     public void setVibrationStrength(short strength) {                                                   </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 143         negotiateSymmetricKey();                                                                         </span>
<span class="-4629474970994412283" onmouseenter="enter('-4629474970994412283');" onmouseout="out('-4629474970994412283');" style=""><abbr title=" 144         queueWrite(new ConfigurationPutRequest(new nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.configuration.ConfigurationPutRequest.VibrationStrengthConfigItem((byte) strength), this));"> 144         queueWrite(new ConfigurationPutRequest(new nodomain.freeyourgadget.gadgetbridge.service.devices.qðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145     }                                                                                                    </span>
<span  style=""> 146                                                                                                          </span>
<span class="1303454475379501012" onmouseenter="enter('1303454475379501012');" onmouseout="out('1303454475379501012');" style=""> 147     private void loadNotificationConfigurations(){                                                       </span>
<span class="-6235602809275246814" onmouseenter="enter('-6235602809275246814');" onmouseout="out('-6235602809275246814');" style=""> 148         this.notificationConfigurations = new NotificationHRConfiguration[]{                             </span>
<span class="7544968341376302636" onmouseenter="enter('7544968341376302636');" onmouseout="out('7544968341376302636');" style=""> 149                 new NotificationHRConfiguration(&quot;generic&quot;, 0),                                           </span>
<span class="-4749339465775723964" onmouseenter="enter('-4749339465775723964');" onmouseout="out('-4749339465775723964');" style=""><abbr title=" 150                 new NotificationHRConfiguration(&quot;call&quot;, new byte[]{(byte)0x80, (byte) 0x00, (byte) 0x59, (byte) 0xB7}, 0)"> 150                 new NotificationHRConfiguration(&quot;call&quot;, new byte[]{(byte)0x80, (byte) 0x00, (byte) 0x59, ðŸ”µ</abbr></span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 151         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 152     }                                                                                                    </span>
<span  style=""> 153                                                                                                          </span>
<span class="-5868467879198664223" onmouseenter="enter('-5868467879198664223');" onmouseout="out('-5868467879198664223');" style=""> 154     private File getBackgroundFile(){                                                                    </span>
<span class="5017199467844905364" onmouseenter="enter('5017199467844905364');" onmouseout="out('5017199467844905364');" style=""> 155         return new File(getContext().getExternalFilesDir(null), &quot;hr_background.bin&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 156     }                                                                                                    </span>
<span  style=""> 157                                                                                                          </span>
<span class="2056476783265891076" onmouseenter="enter('2056476783265891076');" onmouseout="out('2056476783265891076');" style=""> 158     private void loadBackground(){                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 159         try {                                                                                            </span>
<span class="3309811734082012592" onmouseenter="enter('3309811734082012592');" onmouseout="out('3309811734082012592');" style=""> 160             FileInputStream fis = new FileInputStream(getBackgroundFile());                              </span>
<span class="-8713501432928954369" onmouseenter="enter('-8713501432928954369');" onmouseout="out('-8713501432928954369');" style=""> 161             int count = fis.available();                                                                 </span>
<span class="2364866196500043323" onmouseenter="enter('2364866196500043323');" onmouseout="out('2364866196500043323');" style=""> 162             if(count != 14400){                                                                          </span>
<span class="6959480734525400649" onmouseenter="enter('6959480734525400649');" onmouseout="out('6959480734525400649');" style=""> 163                 throw new RuntimeException(&quot;wrong background file length&quot;);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 164             }                                                                                            </span>
<span class="6140245791534089823" onmouseenter="enter('6140245791534089823');" onmouseout="out('6140245791534089823');" style=""> 165             byte[] file = new byte[14400];                                                               </span>
<span class="-5391697857306213357" onmouseenter="enter('-5391697857306213357');" onmouseout="out('-5391697857306213357');" style=""> 166             fis.read(file);                                                                              </span>
<span class="847792512951278267" onmouseenter="enter('847792512951278267');" onmouseout="out('847792512951278267');" style=""> 167             fis.close();                                                                                 </span>
<span class="3514823294174383549" onmouseenter="enter('3514823294174383549');" onmouseout="out('3514823294174383549');" style=""> 168             this.backGroundImage = AssetImageFactory.createAssetImage(file, 0, 0, 0);                    </span>
<span class="400908373044587289" onmouseenter="enter('400908373044587289');" onmouseout="out('400908373044587289');" style=""> 169         } catch (FileNotFoundException e) {                                                              </span>
<span class="-5301954684616781966" onmouseenter="enter('-5301954684616781966');" onmouseout="out('-5301954684616781966');" style=""> 170             SharedPreferences preferences = getDeviceSpecificPreferences();                              </span>
<span class="-3378614681722876648" onmouseenter="enter('-3378614681722876648');" onmouseout="out('-3378614681722876648');" style=""> 171             if (preferences.getBoolean(&quot;force_white_color_scheme&quot;, false)) {                             </span>
<span class="-3418877583116429834" onmouseenter="enter('-3418877583116429834');" onmouseout="out('-3418877583116429834');" style=""> 172                 Bitmap whiteBitmap = Bitmap.createBitmap(239, 239, Bitmap.Config.ARGB_8888);             </span>
<span class="2380885980553220395" onmouseenter="enter('2380885980553220395');" onmouseout="out('2380885980553220395');" style=""> 173                 new Canvas(whiteBitmap).drawColor(Color.WHITE);                                          </span>
<span  style=""> 174                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 175                 try {                                                                                    </span>
<span class="1512735353479138147" onmouseenter="enter('1512735353479138147');" onmouseout="out('1512735353479138147');" style=""><abbr title=" 176                     this.backGroundImage = AssetImageFactory.createAssetImage(whiteBitmap, true, 0, 1, 0);"> 176                     this.backGroundImage = AssetImageFactory.createAssetImage(whiteBitmap, true, 0, 1, 0)ðŸ”µ</abbr></span>
<span class="8494295836730416248" onmouseenter="enter('8494295836730416248');" onmouseout="out('8494295836730416248');" style=""> 177                     queueWrite(new AssetFilePutRequest(this.backGroundImage, (byte) 0x00, this));        </span>
<span class="8708702391695364841" onmouseenter="enter('8708702391695364841');" onmouseout="out('8708702391695364841');" style=""> 178                 } catch (IOException e2) {                                                               </span>
<span class="7907507332013532218" onmouseenter="enter('7907507332013532218');" onmouseout="out('7907507332013532218');" style=""> 179                     logger.error(&quot;Backgroundimage error&quot;, e2);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181             }                                                                                            </span>
<span class="-7675632770970923843" onmouseenter="enter('-7675632770970923843');" onmouseout="out('-7675632770970923843');" style=""> 182         } catch (IOException | RuntimeException e) {                                                     </span>
<span class="995952486198027790" onmouseenter="enter('995952486198027790');" onmouseout="out('995952486198027790');" style=""> 183             GB.log(&quot;error opening background file&quot;, GB.ERROR, e);                                        </span>
<span class="4357598448521854023" onmouseenter="enter('4357598448521854023');" onmouseout="out('4357598448521854023');" style=""> 184             GB.toast(&quot;error opening background file&quot;, Toast.LENGTH_LONG, GB.ERROR);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186     }                                                                                                    </span>
<span  style=""> 187                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 188     @Override                                                                                            </span>
<span class="-2142032910036758703" onmouseenter="enter('-2142032910036758703');" onmouseout="out('-2142032910036758703');" style=""> 189     public void setBackgroundImage(byte[] pixels) {                                                      </span>
<span class="5866108376506033812" onmouseenter="enter('5866108376506033812');" onmouseout="out('5866108376506033812');" style=""> 190         if(pixels == null){                                                                              </span>
<span class="-1287700881772654168" onmouseenter="enter('-1287700881772654168');" onmouseout="out('-1287700881772654168');" style=""> 191             getBackgroundFile().delete();                                                                </span>
<span class="-5827926495289856375" onmouseenter="enter('-5827926495289856375');" onmouseout="out('-5827926495289856375');" style=""> 192             this.backGroundImage = null;                                                                 </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style=""> 193         }else{                                                                                           </span>
<span class="-3590785795915305813" onmouseenter="enter('-3590785795915305813');" onmouseout="out('-3590785795915305813');" style=""> 194             this.backGroundImage = AssetImageFactory.createAssetImage(pixels, 0, 0, 0);                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 195             try {                                                                                        </span>
<span class="-1705375458919026059" onmouseenter="enter('-1705375458919026059');" onmouseout="out('-1705375458919026059');" style=""> 196                 FileOutputStream fos = new FileOutputStream(getBackgroundFile(), false);                 </span>
<span class="-358410701198294033" onmouseenter="enter('-358410701198294033');" onmouseout="out('-358410701198294033');" style=""> 197                 fos.write(pixels);                                                                       </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 198             } catch (IOException e) {                                                                    </span>
<span class="615895175007642974" onmouseenter="enter('615895175007642974');" onmouseout="out('615895175007642974');" style=""> 199                 GB.log(&quot;error saving background&quot;, GB.ERROR, e);                                          </span>
<span class="-5639824001846510052" onmouseenter="enter('-5639824001846510052');" onmouseout="out('-5639824001846510052');" style=""> 200                 GB.toast(&quot;error persistent saving background&quot;, Toast.LENGTH_LONG, GB.ERROR);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202         }                                                                                                </span>
<span class="-686042699702875094" onmouseenter="enter('-686042699702875094');" onmouseout="out('-686042699702875094');" style=""> 203         renderWidgets();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204     }                                                                                                    </span>
<span  style=""> 205                                                                                                          </span>
<span class="-3367927790602792525" onmouseenter="enter('-3367927790602792525');" onmouseout="out('-3367927790602792525');" style=""> 206     private void loadWidgets() {                                                                         </span>
<span class="-5253497129600185491" onmouseenter="enter('-5253497129600185491');" onmouseout="out('-5253497129600185491');" style=""><abbr title=" 207         Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddress()));"> 207         Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice()ðŸ”µ</abbr></span>
<span class="7432400165234073302" onmouseenter="enter('7432400165234073302');" onmouseout="out('7432400165234073302');" style=""> 208         boolean forceWhiteBackground = prefs.getBoolean(&quot;force_white_color_scheme&quot;, false);              </span>
<span class="-6285451443425028752" onmouseenter="enter('-6285451443425028752');" onmouseout="out('-6285451443425028752');" style=""> 209         String fontColor = forceWhiteBackground ? &quot;black&quot; : &quot;default&quot;;                                   </span>
<span  style=""> 210                                                                                                          </span>
<span class="-4620331257752093891" onmouseenter="enter('-4620331257752093891');" onmouseout="out('-4620331257752093891');" style=""> 211         this.widgets.clear();                                                                            </span>
<span class="-3336910807232744925" onmouseenter="enter('-3336910807232744925');" onmouseout="out('-3336910807232744925');" style=""><abbr title=" 212         String widgetJson = GBApplication.getPrefs().getPreferences().getString(&quot;FOSSIL_HR_WIDGETS&quot;, &quot;{}&quot;);"> 212         String widgetJson = GBApplication.getPrefs().getPreferences().getString(&quot;FOSSIL_HR_WIDGETS&quot;, &quot;{}&quot;ðŸ”µ</abbr></span>
<span class="4155798482965333136" onmouseenter="enter('4155798482965333136');" onmouseout="out('4155798482965333136');" style=""> 213         String customWidgetJson = GBApplication.getPrefs().getString(&quot;QHYBRID_CUSTOM_WIDGETS&quot;, &quot;[]&quot;);    </span>
<span  style=""> 214                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 215         try {                                                                                            </span>
<span class="-1451023518703013419" onmouseenter="enter('-1451023518703013419');" onmouseout="out('-1451023518703013419');" style=""> 216             JSONObject widgetConfig = new JSONObject(widgetJson);                                        </span>
<span class="-1475171196435240579" onmouseenter="enter('-1475171196435240579');" onmouseout="out('-1475171196435240579');" style=""> 217             JSONArray customWidgets = new JSONArray(customWidgetJson);                                   </span>
<span  style=""> 218                                                                                                          </span>
<span class="-2247029910180567010" onmouseenter="enter('-2247029910180567010');" onmouseout="out('-2247029910180567010');" style=""> 219             Iterator&lt;String&gt; keyIterator = widgetConfig.keys();                                          </span>
<span class="3005942427600422729" onmouseenter="enter('3005942427600422729');" onmouseout="out('3005942427600422729');" style=""> 220             HashMap&lt;String, Integer&gt; positionMap = new HashMap&lt;&gt;(4);                                     </span>
<span class="-4809379780136917034" onmouseenter="enter('-4809379780136917034');" onmouseout="out('-4809379780136917034');" style=""> 221             positionMap.put(&quot;top&quot;, 0);                                                                   </span>
<span class="3242470301011869998" onmouseenter="enter('3242470301011869998');" onmouseout="out('3242470301011869998');" style=""> 222             positionMap.put(&quot;right&quot;, 90);                                                                </span>
<span class="47603222909284588" onmouseenter="enter('47603222909284588');" onmouseout="out('47603222909284588');" style=""> 223             positionMap.put(&quot;bottom&quot;, 180);                                                              </span>
<span class="-7872157185013762906" onmouseenter="enter('-7872157185013762906');" onmouseout="out('-7872157185013762906');" style=""> 224             positionMap.put(&quot;left&quot;, 270);                                                                </span>
<span  style=""> 225                                                                                                          </span>
<span class="8605964287118037960" onmouseenter="enter('8605964287118037960');" onmouseout="out('8605964287118037960');" style=""> 226             while(keyIterator.hasNext()){                                                                </span>
<span class="2952369380408185535" onmouseenter="enter('2952369380408185535');" onmouseout="out('2952369380408185535');" style=""> 227                 String position = keyIterator.next();                                                    </span>
<span class="-4761670352334006129" onmouseenter="enter('-4761670352334006129');" onmouseout="out('-4761670352334006129');" style=""> 228                 String identifier = widgetConfig.getString(position);                                    </span>
<span class="-3371646214022229496" onmouseenter="enter('-3371646214022229496');" onmouseout="out('-3371646214022229496');" style=""> 229                 Widget.WidgetType type = Widget.WidgetType.fromJsonIdentifier(identifier);               </span>
<span  style=""> 230                                                                                                          </span>
<span class="4389075284580548581" onmouseenter="enter('4389075284580548581');" onmouseout="out('4389075284580548581');" style=""> 231                 Widget widget = null;                                                                    </span>
<span class="2866536352941526980" onmouseenter="enter('2866536352941526980');" onmouseout="out('2866536352941526980');" style=""> 232                 if(type != null) {                                                                       </span>
<span class="-7841183104811053833" onmouseenter="enter('-7841183104811053833');" onmouseout="out('-7841183104811053833');" style=""> 233                     widget = new Widget(type, positionMap.get(position), 63, fontColor);                 </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style=""> 234                 }else{                                                                                   </span>
<span class="-175697937656295673" onmouseenter="enter('-175697937656295673');" onmouseout="out('-175697937656295673');" style=""> 235                     identifier = identifier.substring(7);                                                </span>
<span class="-5386134246414871772" onmouseenter="enter('-5386134246414871772');" onmouseout="out('-5386134246414871772');" style=""> 236                     for(int i = 0; i &lt; customWidgets.length(); i++){                                     </span>
<span class="-4459010997644705661" onmouseenter="enter('-4459010997644705661');" onmouseout="out('-4459010997644705661');" style=""> 237                         JSONObject customWidget = customWidgets.getJSONObject(i);                        </span>
<span class="-3508428963545043924" onmouseenter="enter('-3508428963545043924');" onmouseout="out('-3508428963545043924');" style=""> 238                         if(customWidget.getString(&quot;name&quot;).equals(identifier)){                           </span>
<span class="-7054423990219086531" onmouseenter="enter('-7054423990219086531');" onmouseout="out('-7054423990219086531');" style=""> 239                             boolean drawCircle = false;                                                  </span>
<span class="4470534368972356610" onmouseenter="enter('4470534368972356610');" onmouseout="out('4470534368972356610');" style=""><abbr title=" 240                             if(customWidget.has(&quot;drawCircle&quot;)) drawCircle = customWidget.getBoolean(&quot;drawCircle&quot;);"> 240                             if(customWidget.has(&quot;drawCircle&quot;)) drawCircle = customWidget.getBoolean(&quot;drawðŸ”µ</abbr></span>
<span class="-8778192717851062623" onmouseenter="enter('-8778192717851062623');" onmouseout="out('-8778192717851062623');" style=""> 241                             CustomWidget newWidget = new CustomWidget(                                   </span>
<span class="3512413394145535740" onmouseenter="enter('3512413394145535740');" onmouseout="out('3512413394145535740');" style=""> 242                                     customWidget.getString(&quot;name&quot;),                                      </span>
<span class="-4996195677187410364" onmouseenter="enter('-4996195677187410364');" onmouseout="out('-4996195677187410364');" style=""> 243                                     positionMap.get(position),                                           </span>
<span class="3193660705107837549" onmouseenter="enter('3193660705107837549');" onmouseout="out('3193660705107837549');" style=""> 244                                     63,                                                                  </span>
<span class="3561617863275761236" onmouseenter="enter('3561617863275761236');" onmouseout="out('3561617863275761236');" style=""> 245                                     fontColor                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 246                             );                                                                           </span>
<span class="2785037360953974218" onmouseenter="enter('2785037360953974218');" onmouseout="out('2785037360953974218');" style=""> 247                             JSONArray elements = customWidget.getJSONArray(&quot;elements&quot;);                  </span>
<span  style=""> 248                                                                                                          </span>
<span class="3871742226603844038" onmouseenter="enter('3871742226603844038');" onmouseout="out('3871742226603844038');" style=""> 249                             for (int i2 = 0; i2 &lt; elements.length(); i2++) {                             </span>
<span class="-7151905776418266127" onmouseenter="enter('-7151905776418266127');" onmouseout="out('-7151905776418266127');" style=""> 250                                 JSONObject element = elements.getJSONObject(i2);                         </span>
<span class="6397770772172009485" onmouseenter="enter('6397770772172009485');" onmouseout="out('6397770772172009485');" style=""> 251                                 if (element.getString(&quot;type&quot;).equals(&quot;text&quot;)) {                          </span>
<span class="2334141174646848010" onmouseenter="enter('2334141174646848010');" onmouseout="out('2334141174646848010');" style=""> 252                                     newWidget.addElement(new CustomTextWidgetElement(                    </span>
<span class="822830221051301303" onmouseenter="enter('822830221051301303');" onmouseout="out('822830221051301303');" style=""> 253                                             element.getString(&quot;id&quot;),                                     </span>
<span class="4980700817635867661" onmouseenter="enter('4980700817635867661');" onmouseout="out('4980700817635867661');" style=""> 254                                             element.getString(&quot;value&quot;),                                  </span>
<span class="9063642109599004190" onmouseenter="enter('9063642109599004190');" onmouseout="out('9063642109599004190');" style=""> 255                                             element.getInt(&quot;x&quot;),                                         </span>
<span class="-4454797006849514808" onmouseenter="enter('-4454797006849514808');" onmouseout="out('-4454797006849514808');" style=""> 256                                             element.getInt(&quot;y&quot;)                                          </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 257                                     ));                                                                  </span>
<span class="-8940325902652201532" onmouseenter="enter('-8940325902652201532');" onmouseout="out('-8940325902652201532');" style=""> 258                                 } else if (element.getString(&quot;type&quot;).equals(&quot;background&quot;)) {             </span>
<span class="-4431923028910732143" onmouseenter="enter('-4431923028910732143');" onmouseout="out('-4431923028910732143');" style=""> 259                                     newWidget.addElement(new CustomBackgroundWidgetElement(              </span>
<span class="822830221051301303" onmouseenter="enter('822830221051301303');" onmouseout="out('822830221051301303');" style=""> 260                                             element.getString(&quot;id&quot;),                                     </span>
<span class="-7580773937564088589" onmouseenter="enter('-7580773937564088589');" onmouseout="out('-7580773937564088589');" style=""> 261                                             element.getString(&quot;value&quot;)                                   </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 262                                     ));                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 263                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264                             }                                                                            </span>
<span class="2257436902070421227" onmouseenter="enter('2257436902070421227');" onmouseout="out('2257436902070421227');" style=""> 265                             widget = newWidget;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268                 }                                                                                        </span>
<span  style=""> 269                                                                                                          </span>
<span class="-8350136702671077859" onmouseenter="enter('-8350136702671077859');" onmouseout="out('-8350136702671077859');" style=""> 270                 if(widget == null) continue;                                                             </span>
<span class="-6171680299070194420" onmouseenter="enter('-6171680299070194420');" onmouseout="out('-6171680299070194420');" style=""> 271                 this.widgets.add(widget);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272             }                                                                                            </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 273         } catch (JSONException e) {                                                                      </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 274             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275         }                                                                                                </span>
<span  style=""> 276                                                                                                          </span>
<span class="-8358671306989560601" onmouseenter="enter('-8358671306989560601');" onmouseout="out('-8358671306989560601');" style=""> 277         uploadWidgets();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278     }                                                                                                    </span>
<span  style=""> 279                                                                                                          </span>
<span class="5530468676950845344" onmouseenter="enter('5530468676950845344');" onmouseout="out('5530468676950845344');" style=""> 280     private void uploadWidgets(){                                                                        </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 281         negotiateSymmetricKey();                                                                         </span>
<span class="5140546967358631022" onmouseenter="enter('5140546967358631022');" onmouseout="out('5140546967358631022');" style=""> 282         ArrayList&lt;Widget&gt; systemWidgets = new ArrayList&lt;&gt;(widgets.size());                               </span>
<span class="-3447555470280778363" onmouseenter="enter('-3447555470280778363');" onmouseout="out('-3447555470280778363');" style=""> 283         for(Widget widget : this.widgets){                                                               </span>
<span class="1576906399201786111" onmouseenter="enter('1576906399201786111');" onmouseout="out('1576906399201786111');" style=""> 284             if(!(widget instanceof CustomWidget)) systemWidgets.add(widget);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285         }                                                                                                </span>
<span class="-2475473149296747573" onmouseenter="enter('-2475473149296747573');" onmouseout="out('-2475473149296747573');" style=""> 286         queueWrite(new WidgetsPutRequest(systemWidgets.toArray(new Widget[0]), this));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287     }                                                                                                    </span>
<span  style=""> 288                                                                                                          </span>
<span class="903870811454511101" onmouseenter="enter('903870811454511101');" onmouseout="out('903870811454511101');" style=""> 289     private void renderWidgets() {                                                                       </span>
<span class="-5253497129600185491" onmouseenter="enter('-5253497129600185491');" onmouseout="out('-5253497129600185491');" style=""><abbr title=" 290         Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddress()));"> 290         Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice()ðŸ”µ</abbr></span>
<span class="7432400165234073302" onmouseenter="enter('7432400165234073302');" onmouseout="out('7432400165234073302');" style=""> 291         boolean forceWhiteBackground = prefs.getBoolean(&quot;force_white_color_scheme&quot;, false);              </span>
<span class="-4957838723144238098" onmouseenter="enter('-4957838723144238098');" onmouseout="out('-4957838723144238098');" style=""> 292         boolean drawCircles = prefs.getBoolean(&quot;widget_draw_circles&quot;, false);                            </span>
<span  style=""> 293                                                                                                          </span>
<span class="-4150936410867644378" onmouseenter="enter('-4150936410867644378');" onmouseout="out('-4150936410867644378');" style=""> 294         Bitmap circleBitmap = null;                                                                      </span>
<span class="4297491638185878541" onmouseenter="enter('4297491638185878541');" onmouseout="out('4297491638185878541');" style=""> 295         if(drawCircles) {                                                                                </span>
<span class="-5595442960800349101" onmouseenter="enter('-5595442960800349101');" onmouseout="out('-5595442960800349101');" style=""> 296             circleBitmap = Bitmap.createBitmap(76, 76, Bitmap.Config.ARGB_8888);                         </span>
<span class="-928516426453882846" onmouseenter="enter('-928516426453882846');" onmouseout="out('-928516426453882846');" style=""> 297             Canvas circleCanvas = new Canvas(circleBitmap);                                              </span>
<span class="2814962491382878487" onmouseenter="enter('2814962491382878487');" onmouseout="out('2814962491382878487');" style=""> 298             Paint circlePaint = new Paint();                                                             </span>
<span class="-6694382119531121333" onmouseenter="enter('-6694382119531121333');" onmouseout="out('-6694382119531121333');" style=""> 299             circlePaint.setColor(forceWhiteBackground ? Color.WHITE : Color.BLACK);                      </span>
<span class="7023202196844894280" onmouseenter="enter('7023202196844894280');" onmouseout="out('7023202196844894280');" style=""> 300             circlePaint.setStyle(Paint.Style.FILL);                                                      </span>
<span class="3207244326755712140" onmouseenter="enter('3207244326755712140');" onmouseout="out('3207244326755712140');" style=""> 301             circlePaint.setStrokeWidth(3);                                                               </span>
<span class="4026559028524057875" onmouseenter="enter('4026559028524057875');" onmouseout="out('4026559028524057875');" style=""> 302             circleCanvas.drawCircle(38, 38, 37, circlePaint);                                            </span>
<span  style=""> 303                                                                                                          </span>
<span class="2381447846028007273" onmouseenter="enter('2381447846028007273');" onmouseout="out('2381447846028007273');" style=""> 304             circlePaint.setColor(forceWhiteBackground ? Color.BLACK : Color.WHITE);                      </span>
<span class="-2529291397399672174" onmouseenter="enter('-2529291397399672174');" onmouseout="out('-2529291397399672174');" style=""> 305             circlePaint.setStyle(Paint.Style.STROKE);                                                    </span>
<span class="3207244326755712140" onmouseenter="enter('3207244326755712140');" onmouseout="out('3207244326755712140');" style=""> 306             circlePaint.setStrokeWidth(3);                                                               </span>
<span class="4026559028524057875" onmouseenter="enter('4026559028524057875');" onmouseout="out('4026559028524057875');" style=""> 307             circleCanvas.drawCircle(38, 38, 37, circlePaint);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 308         }                                                                                                </span>
<span  style=""> 309                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 310         try {                                                                                            </span>
<span class="-373590907859483538" onmouseenter="enter('-373590907859483538');" onmouseout="out('-373590907859483538');" style=""> 311             ArrayList&lt;AssetImage&gt; widgetImages = new ArrayList&lt;&gt;();                                      </span>
<span  style=""> 312                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 313 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 314 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="2814962491382878487" onmouseenter="enter('2814962491382878487');" onmouseout="out('2814962491382878487');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 315                     Paint circlePaint = new Paint();                                                     </span>
<span class="-6694382119531121333" onmouseenter="enter('-6694382119531121333');" onmouseout="out('-6694382119531121333');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 316                     circlePaint.setColor(forceWhiteBackground ? Color.WHITE : Color.BLACK);              </span>
<span class="7023202196844894280" onmouseenter="enter('7023202196844894280');" onmouseout="out('7023202196844894280');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 317                     circlePaint.setStyle(Paint.Style.FILL);                                              </span>
<span class="3207244326755712140" onmouseenter="enter('3207244326755712140');" onmouseout="out('3207244326755712140');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 318                     circlePaint.setStrokeWidth(3);                                                       </span>
<span class="-9125685889860219804" onmouseenter="enter('-9125685889860219804');" onmouseout="out('-9125685889860219804');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 319                     widgetCanvas.drawCircle(38, 38, 37, circlePaint);                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 320                                                                                                          </span>
<span class="2381447846028007273" onmouseenter="enter('2381447846028007273');" onmouseout="out('2381447846028007273');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 321                     circlePaint.setColor(forceWhiteBackground ? Color.BLACK : Color.WHITE);              </span>
<span class="-2529291397399672174" onmouseenter="enter('-2529291397399672174');" onmouseout="out('-2529291397399672174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 322                     circlePaint.setStyle(Paint.Style.STROKE);                                            </span>
<span class="3207244326755712140" onmouseenter="enter('3207244326755712140');" onmouseout="out('3207244326755712140');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 323                     circlePaint.setStrokeWidth(3);                                                       </span>
<span class="-9125685889860219804" onmouseenter="enter('-9125685889860219804');" onmouseout="out('-9125685889860219804');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 324                     widgetCanvas.drawCircle(38, 38, 37, circlePaint);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 325                 }                                                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 326                                                                                                          </span>
<span class="757605497541712230" onmouseenter="enter('757605497541712230');" onmouseout="out('757605497541712230');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 327                 for (CustomWidgetElement element : widget.getElements()) {                               </span>
<span class="7400170023887894754" onmouseenter="enter('7400170023887894754');" onmouseout="out('7400170023887894754');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 328                     if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_BACKGROUND) {"> 328                     if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_BACKðŸ”µ</abbr></span>
<span class="-676638329273944558" onmouseenter="enter('-676638329273944558');" onmouseout="out('-676638329273944558');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 329                         File imageFile = new File(element.getValue());                                   </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 330                                                                                                          </span>
<span class="7384441147080120976" onmouseenter="enter('7384441147080120976');" onmouseout="out('7384441147080120976');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 331                         if(!imageFile.exists() || !imageFile.isFile()){                                  </span>
<span class="8572942832707006367" onmouseenter="enter('8572942832707006367');" onmouseout="out('8572942832707006367');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 332                             logger.debug(&quot;Image file &quot; + element.getValue() + &quot; not found&quot;);             </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 333                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 334                         }                                                                                </span>
<span class="-1261560715133039949" onmouseenter="enter('-1261560715133039949');" onmouseout="out('-1261560715133039949');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 335                         Bitmap imageBitmap = BitmapFactory.decodeFile(element.getValue());               </span>
<span class="6232182932301203372" onmouseenter="enter('6232182932301203372');" onmouseout="out('6232182932301203372');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 336                         if(imageBitmap == null){                                                         </span>
<span class="-7905366545073842666" onmouseenter="enter('-7905366545073842666');" onmouseout="out('-7905366545073842666');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 337                             logger.debug(&quot;image file &quot; + element.getValue() + &quot; could not be decoded&quot;);  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 338                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 339                         }                                                                                </span>
<span class="4351764494403839190" onmouseenter="enter('4351764494403839190');" onmouseout="out('4351764494403839190');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 340                         Bitmap scaledBitmap = Bitmap.createScaledBitmap(imageBitmap, 76, 76, false);     </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 341 =======                                                                                                  </span>
<span class="-7135747421857686049" onmouseenter="enter('-7135747421857686049');" onmouseout="out('-7135747421857686049');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 342             if(this.backGroundImage != null){                                                            </span>
<span class="-1341990675909940474" onmouseenter="enter('-1341990675909940474');" onmouseout="out('-1341990675909940474');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 343                 widgetImages.add(this.backGroundImage);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 344             }                                                                                            </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 345 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span  style=""> 346                                                                                                          </span>
<span class="-8143608132748507128" onmouseenter="enter('-8143608132748507128');" onmouseout="out('-8143608132748507128');" style=""> 347             for (int i = 0; i &lt; this.widgets.size(); i++) {                                              </span>
<span class="-3360344478910316540" onmouseenter="enter('-3360344478910316540');" onmouseout="out('-3360344478910316540');" style=""> 348                 Widget w = widgets.get(i);                                                               </span>
<span class="-2112273356566079696" onmouseenter="enter('-2112273356566079696');" onmouseout="out('-2112273356566079696');" style=""> 349                 if(!(w instanceof CustomWidget)){                                                        </span>
<span class="4297491638185878541" onmouseenter="enter('4297491638185878541');" onmouseout="out('4297491638185878541');" style=""> 350                     if(drawCircles) {                                                                    </span>
<span class="-5480032434325078611" onmouseenter="enter('-5480032434325078611');" onmouseout="out('-5480032434325078611');" style=""> 351                         widgetImages.add(AssetImageFactory.createAssetImage(                             </span>
<span class="1059813510113582459" onmouseenter="enter('1059813510113582459');" onmouseout="out('1059813510113582459');" style=""> 352                                 circleBitmap,                                                            </span>
<span class="1283834832483333129" onmouseenter="enter('1283834832483333129');" onmouseout="out('1283834832483333129');" style=""> 353                                 true,                                                                    </span>
<span class="427599116612284959" onmouseenter="enter('427599116612284959');" onmouseout="out('427599116612284959');" style=""> 354                                 w.getAngle(),                                                            </span>
<span class="879666240058458328" onmouseenter="enter('879666240058458328');" onmouseout="out('879666240058458328');" style=""> 355                                 w.getDistance(),                                                         </span>
<span class="-6707054910432036291" onmouseenter="enter('-6707054910432036291');" onmouseout="out('-6707054910432036291');" style=""> 356                                 1                                                                        </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 357                         ));                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358                     }                                                                                    </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 359                     continue;                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 360                 };                                                                                       </span>
<span class="-119827139856937313" onmouseenter="enter('-119827139856937313');" onmouseout="out('-119827139856937313');" style=""> 361                 CustomWidget widget = (CustomWidget) w;                                                  </span>
<span  style=""> 362                                                                                                          </span>
<span class="7010238729887612961" onmouseenter="enter('7010238729887612961');" onmouseout="out('7010238729887612961');" style=""> 363                 Bitmap widgetBitmap = Bitmap.createBitmap(76, 76, Bitmap.Config.ARGB_8888);              </span>
<span  style=""> 364                                                                                                          </span>
<span class="-3285187784434415926" onmouseenter="enter('-3285187784434415926');" onmouseout="out('-3285187784434415926');" style=""> 365                 Canvas widgetCanvas = new Canvas(widgetBitmap);                                          </span>
<span  style=""> 366                                                                                                          </span>
<span class="1399126767030654892" onmouseenter="enter('1399126767030654892');" onmouseout="out('1399126767030654892');" style=""> 367                 if(drawCircles){                                                                         </span>
<span class="2052312058071761513" onmouseenter="enter('2052312058071761513');" onmouseout="out('2052312058071761513');" style=""> 368                     widgetCanvas.drawBitmap(circleBitmap, 0, 0, null);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369                 }                                                                                        </span>
<span  style=""> 370                                                                                                          </span>
<span class="757605497541712230" onmouseenter="enter('757605497541712230');" onmouseout="out('757605497541712230');" style=""> 371                 for (CustomWidgetElement element : widget.getElements()) {                               </span>
<span class="7400170023887894754" onmouseenter="enter('7400170023887894754');" onmouseout="out('7400170023887894754');" style=""><abbr title=" 372                     if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_BACKGROUND) {"> 372                     if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_BACKðŸ”µ</abbr></span>
<span class="-676638329273944558" onmouseenter="enter('-676638329273944558');" onmouseout="out('-676638329273944558');" style=""> 373                         File imageFile = new File(element.getValue());                                   </span>
<span  style=""> 374                                                                                                          </span>
<span class="7384441147080120976" onmouseenter="enter('7384441147080120976');" onmouseout="out('7384441147080120976');" style=""> 375                         if(!imageFile.exists() || !imageFile.isFile()){                                  </span>
<span class="8572942832707006367" onmouseenter="enter('8572942832707006367');" onmouseout="out('8572942832707006367');" style=""> 376                             logger.debug(&quot;Image file &quot; + element.getValue() + &quot; not found&quot;);             </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 377                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 378                         }                                                                                </span>
<span class="-1261560715133039949" onmouseenter="enter('-1261560715133039949');" onmouseout="out('-1261560715133039949');" style=""> 379                         Bitmap imageBitmap = BitmapFactory.decodeFile(element.getValue());               </span>
<span class="6232182932301203372" onmouseenter="enter('6232182932301203372');" onmouseout="out('6232182932301203372');" style=""> 380                         if(imageBitmap == null){                                                         </span>
<span class="-7905366545073842666" onmouseenter="enter('-7905366545073842666');" onmouseout="out('-7905366545073842666');" style=""> 381                             logger.debug(&quot;image file &quot; + element.getValue() + &quot; could not be decoded&quot;);  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 382                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383                         }                                                                                </span>
<span class="4351764494403839190" onmouseenter="enter('4351764494403839190');" onmouseout="out('4351764494403839190');" style=""> 384                         Bitmap scaledBitmap = Bitmap.createScaledBitmap(imageBitmap, 76, 76, false);     </span>
<span  style=""> 385                                                                                                          </span>
<span class="3660116155044120822" onmouseenter="enter('3660116155044120822');" onmouseout="out('3660116155044120822');" style=""> 386                         widgetCanvas.drawBitmap(                                                         </span>
<span class="5191324505806482314" onmouseenter="enter('5191324505806482314');" onmouseout="out('5191324505806482314');" style=""> 387                                 scaledBitmap,                                                            </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 388                                 0,                                                                       </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 389                                 0,                                                                       </span>
<span class="-5950258146809433717" onmouseenter="enter('-5950258146809433717');" onmouseout="out('-5950258146809433717');" style=""> 390                                 null);                                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 391                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 392                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 393                 }                                                                                        </span>
<span  style=""> 394                                                                                                          </span>
<span class="757605497541712230" onmouseenter="enter('757605497541712230');" onmouseout="out('757605497541712230');" style=""> 395                 for (CustomWidgetElement element : widget.getElements()) {                               </span>
<span class="-8374841026396869451" onmouseenter="enter('-8374841026396869451');" onmouseout="out('-8374841026396869451');" style=""><abbr title=" 396                     if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_TEXT) {"> 396                     if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_TEXTðŸ”µ</abbr></span>
<span class="8404149927879958117" onmouseenter="enter('8404149927879958117');" onmouseout="out('8404149927879958117');" style=""> 397                         Paint textPaint = new Paint();                                                   </span>
<span class="424156949088872290" onmouseenter="enter('424156949088872290');" onmouseout="out('424156949088872290');" style=""> 398                         textPaint.setStrokeWidth(4);                                                     </span>
<span class="-7858016953995282215" onmouseenter="enter('-7858016953995282215');" onmouseout="out('-7858016953995282215');" style=""> 399                         textPaint.setTextSize(17f);                                                      </span>
<span class="7085320690650566449" onmouseenter="enter('7085320690650566449');" onmouseout="out('7085320690650566449');" style=""> 400                         textPaint.setStyle(Paint.Style.FILL);                                            </span>
<span class="4582184244946630782" onmouseenter="enter('4582184244946630782');" onmouseout="out('4582184244946630782');" style=""> 401                         textPaint.setColor(forceWhiteBackground ? Color.BLACK : Color.WHITE);            </span>
<span class="8080777884851070420" onmouseenter="enter('8080777884851070420');" onmouseout="out('8080777884851070420');" style=""> 402                         textPaint.setTextAlign(Paint.Align.CENTER);                                      </span>
<span  style=""> 403                                                                                                          </span>
<span class="-3687982044961117698" onmouseenter="enter('-3687982044961117698');" onmouseout="out('-3687982044961117698');" style=""><abbr title=" 404                         widgetCanvas.drawText(element.getValue(), element.getX(), element.getY() - (textPaint.descent() + textPaint.ascent()) / 2f, textPaint);"> 404                         widgetCanvas.drawText(element.getValue(), element.getX(), element.getY() - (textPðŸ”µ</abbr></span>
<span class="-2221545646012742491" onmouseenter="enter('-2221545646012742491');" onmouseout="out('-2221545646012742491');" style=""><abbr title=" 405                     }else if(element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_IMAGE) {"> 405                     }else if(element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPEðŸ”µ</abbr></span>
<span class="-1261560715133039949" onmouseenter="enter('-1261560715133039949');" onmouseout="out('-1261560715133039949');" style=""> 406                         Bitmap imageBitmap = BitmapFactory.decodeFile(element.getValue());               </span>
<span  style=""> 407                                                                                                          </span>
<span class="850565005306985750" onmouseenter="enter('850565005306985750');" onmouseout="out('850565005306985750');" style=""><abbr title=" 408                         widgetCanvas.drawBitmap(imageBitmap, element.getX() - imageBitmap.getWidth() / 2f, element.getY() - imageBitmap.getHeight() / 2f, null);"> 408                         widgetCanvas.drawBitmap(imageBitmap, element.getX() - imageBitmap.getWidth() / 2fðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 409                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410                 }                                                                                        </span>
<span class="-5480032434325078611" onmouseenter="enter('-5480032434325078611');" onmouseout="out('-5480032434325078611');" style=""> 411                 widgetImages.add(AssetImageFactory.createAssetImage(                                     </span>
<span class="6927266072716207452" onmouseenter="enter('6927266072716207452');" onmouseout="out('6927266072716207452');" style=""> 412                         widgetBitmap,                                                                    </span>
<span class="1283834832483333129" onmouseenter="enter('1283834832483333129');" onmouseout="out('1283834832483333129');" style=""> 413                         true,                                                                            </span>
<span class="-5673825003729303026" onmouseenter="enter('-5673825003729303026');" onmouseout="out('-5673825003729303026');" style=""> 414                         widget.getAngle(),                                                               </span>
<span class="-686125949143974898" onmouseenter="enter('-686125949143974898');" onmouseout="out('-686125949143974898');" style=""> 415                         widget.getDistance(),                                                            </span>
<span class="-6707054910432036291" onmouseenter="enter('-6707054910432036291');" onmouseout="out('-6707054910432036291');" style=""> 416                         1                                                                                </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 417                 ));                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418             }                                                                                            </span>
<span  style=""> 419                                                                                                          </span>
<span  style=""> 420                                                                                                          </span>
<span class="-7135747421857686049" onmouseenter="enter('-7135747421857686049');" onmouseout="out('-7135747421857686049');" style=""> 421             if(this.backGroundImage != null){                                                            </span>
<span class="-1341990675909940474" onmouseenter="enter('-1341990675909940474');" onmouseout="out('-1341990675909940474');" style=""> 422                 widgetImages.add(this.backGroundImage);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423             }                                                                                            </span>
<span  style=""> 424                                                                                                          </span>
<span class="4734673173370309989" onmouseenter="enter('4734673173370309989');" onmouseout="out('4734673173370309989');" style=""> 425             queueWrite(new AssetFilePutRequest(                                                          </span>
<span class="-4286172266088300066" onmouseenter="enter('-4286172266088300066');" onmouseout="out('-4286172266088300066');" style=""> 426                     widgetImages.toArray(new AssetImage[0]),                                             </span>
<span class="-3953921874774397702" onmouseenter="enter('-3953921874774397702');" onmouseout="out('-3953921874774397702');" style=""> 427                     (byte) 0x00,                                                                         </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 428                     this                                                                                 </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 429             ));                                                                                          </span>
<span class="-1216850278071707444" onmouseenter="enter('-1216850278071707444');" onmouseout="out('-1216850278071707444');" style=""> 430             // queueWrite(new FileDeleteRequest((short) 0x0503));                                        </span>
<span class="-6828394027622892361" onmouseenter="enter('-6828394027622892361');" onmouseout="out('-6828394027622892361');" style=""> 431             queueWrite(new ImagesSetRequest(                                                             </span>
<span class="-4286172266088300066" onmouseenter="enter('-4286172266088300066');" onmouseout="out('-4286172266088300066');" style=""> 432                     widgetImages.toArray(new AssetImage[0]),                                             </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 433                     this                                                                                 </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 434             ));                                                                                          </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 435         } catch (IOException e) {                                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 436             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 438     }                                                                                                    </span>
<span  style=""> 439                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 440     @Override                                                                                            </span>
<span class="768796884755462959" onmouseenter="enter('768796884755462959');" onmouseout="out('768796884755462959');" style=""> 441     public void setWidgetContent(String widgetID, String content, boolean renderOnWatch) {               </span>
<span class="-1104872319984701354" onmouseenter="enter('-1104872319984701354');" onmouseout="out('-1104872319984701354');" style=""> 442         boolean update = false;                                                                          </span>
<span class="4250664064039944058" onmouseenter="enter('4250664064039944058');" onmouseout="out('4250664064039944058');" style=""> 443         for (Widget widget : this.widgets) {                                                             </span>
<span class="6599617715616763984" onmouseenter="enter('6599617715616763984');" onmouseout="out('6599617715616763984');" style=""> 444             if(!(widget instanceof CustomWidget)) continue;                                              </span>
<span class="-7367617630703350990" onmouseenter="enter('-7367617630703350990');" onmouseout="out('-7367617630703350990');" style=""> 445             if(((CustomWidget) widget).updateElementValue(widgetID, content)) update = true;             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446         }                                                                                                </span>
<span  style=""> 447                                                                                                          </span>
<span class="-2887538322855201281" onmouseenter="enter('-2887538322855201281');" onmouseout="out('-2887538322855201281');" style=""> 448         if (renderOnWatch &amp;&amp; update) renderWidgets();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449     }                                                                                                    </span>
<span  style=""> 450                                                                                                          </span>
<span class="6173588091729977369" onmouseenter="enter('6173588091729977369');" onmouseout="out('6173588091729977369');" style=""> 451     private void negotiateSymmetricKey() {                                                               </span>
<span class="-7168973652814870469" onmouseenter="enter('-7168973652814870469');" onmouseout="out('-7168973652814870469');" style=""> 452         queueWrite(new VerifyPrivateKeyRequest(                                                          </span>
<span class="2474409468109046352" onmouseenter="enter('2474409468109046352');" onmouseout="out('2474409468109046352');" style=""> 453                 this.getSecretKey(),                                                                     </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 454                 this                                                                                     </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 455         ));                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456     }                                                                                                    </span>
<span  style=""> 457                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 458     @Override                                                                                            </span>
<span class="8564159631865081592" onmouseenter="enter('8564159631865081592');" onmouseout="out('8564159631865081592');" style=""> 459     public void setTime() {                                                                              </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 460         negotiateSymmetricKey();                                                                         </span>
<span  style=""> 461                                                                                                          </span>
<span class="-4700399361923900561" onmouseenter="enter('-4700399361923900561');" onmouseout="out('-4700399361923900561');" style=""> 462         long millis = System.currentTimeMillis();                                                        </span>
<span class="8010236317671933907" onmouseenter="enter('8010236317671933907');" onmouseout="out('8010236317671933907');" style=""> 463         TimeZone zone = new GregorianCalendar().getTimeZone();                                           </span>
<span  style=""> 464                                                                                                          </span>
<span class="5277346296728804081" onmouseenter="enter('5277346296728804081');" onmouseout="out('5277346296728804081');" style=""> 465         queueWrite(                                                                                      </span>
<span class="9082684383999307863" onmouseenter="enter('9082684383999307863');" onmouseout="out('9082684383999307863');" style=""> 466                 new ConfigurationPutRequest(                                                             </span>
<span class="6747723926021094395" onmouseenter="enter('6747723926021094395');" onmouseout="out('6747723926021094395');" style=""> 467                         new TimeConfigItem(                                                              </span>
<span class="-4594139798000988877" onmouseenter="enter('-4594139798000988877');" onmouseout="out('-4594139798000988877');" style=""> 468                                 (int) (millis / 1000 + getDeviceSupport().getTimeOffset() * 60),         </span>
<span class="6701954853301529159" onmouseenter="enter('6701954853301529159');" onmouseout="out('6701954853301529159');" style=""> 469                                 (short) (millis % 1000),                                                 </span>
<span class="2740305831490303835" onmouseenter="enter('2740305831490303835');" onmouseout="out('2740305831490303835');" style=""> 470                                 (short) (zone.getOffset(millis) / 60000)                                 </span>
<span class="5925056120740059197" onmouseenter="enter('5925056120740059197');" onmouseout="out('5925056120740059197');" style=""> 471                         ),                                                                               </span>
<span class="-573149562926997335" onmouseenter="enter('-573149562926997335');" onmouseout="out('-573149562926997335');" style=""> 472                         this), false                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 473         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 474     }                                                                                                    </span>
<span  style=""> 475                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 476     @Override                                                                                            </span>
<span class="5743699626454161990" onmouseenter="enter('5743699626454161990');" onmouseout="out('5743699626454161990');" style=""> 477     public void setMusicInfo(MusicSpec musicSpec) {                                                      </span>
<span class="7717622633225589961" onmouseenter="enter('7717622633225589961');" onmouseout="out('7717622633225589961');" style=""> 478         if (                                                                                             </span>
<span class="-2721767562250030479" onmouseenter="enter('-2721767562250030479');" onmouseout="out('-2721767562250030479');" style=""> 479                 currentSpec != null                                                                      </span>
<span class="6347316233900210670" onmouseenter="enter('6347316233900210670');" onmouseout="out('6347316233900210670');" style=""> 480                         &amp;&amp; currentSpec.album.equals(musicSpec.album)                                     </span>
<span class="-7026697945522803285" onmouseenter="enter('-7026697945522803285');" onmouseout="out('-7026697945522803285');" style=""> 481                         &amp;&amp; currentSpec.artist.equals(musicSpec.artist)                                   </span>
<span class="234002389956897367" onmouseenter="enter('234002389956897367');" onmouseout="out('234002389956897367');" style=""> 482                         &amp;&amp; currentSpec.track.equals(musicSpec.track)                                     </span>
<span class="129544933216380196" onmouseenter="enter('129544933216380196');" onmouseout="out('129544933216380196');" style=""> 483         ) return;                                                                                        </span>
<span class="5122037976784129938" onmouseenter="enter('5122037976784129938');" onmouseout="out('5122037976784129938');" style=""> 484         currentSpec = musicSpec;                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 485         try {                                                                                            </span>
<span class="2807680215991082156" onmouseenter="enter('2807680215991082156');" onmouseout="out('2807680215991082156');" style=""> 486             queueWrite(new MusicInfoSetRequest(                                                          </span>
<span class="-4995357750126688628" onmouseenter="enter('-4995357750126688628');" onmouseout="out('-4995357750126688628');" style=""> 487                     musicSpec.artist,                                                                    </span>
<span class="-2625665048867935009" onmouseenter="enter('-2625665048867935009');" onmouseout="out('-2625665048867935009');" style=""> 488                     musicSpec.album,                                                                     </span>
<span class="4393990709676517095" onmouseenter="enter('4393990709676517095');" onmouseout="out('4393990709676517095');" style=""> 489                     musicSpec.track,                                                                     </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 490                     this                                                                                 </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 491             ));                                                                                          </span>
<span class="-6150396604962993275" onmouseenter="enter('-6150396604962993275');" onmouseout="out('-6150396604962993275');" style=""> 492         }catch (BufferOverflowException e){                                                              </span>
<span class="-5802249110858364829" onmouseenter="enter('-5802249110858364829');" onmouseout="out('-5802249110858364829');" style=""> 493             GB.log(&quot;musicInfo: &quot; + musicSpec, GB.ERROR, e);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 494         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 495     }                                                                                                    </span>
<span  style=""> 496                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 497     @Override                                                                                            </span>
<span class="6484409227794913685" onmouseenter="enter('6484409227794913685');" onmouseout="out('6484409227794913685');" style=""> 498     public void setMusicState(MusicStateSpec stateSpec) {                                                </span>
<span class="-8825084358361918368" onmouseenter="enter('-8825084358361918368');" onmouseout="out('-8825084358361918368');" style=""> 499         super.setMusicState(stateSpec);                                                                  </span>
<span  style=""> 500                                                                                                          </span>
<span class="-5832778985397101291" onmouseenter="enter('-5832778985397101291');" onmouseout="out('-5832778985397101291');" style=""> 501         queueWrite(new MusicControlRequest(                                                              </span>
<span class="6749687689436260015" onmouseenter="enter('6749687689436260015');" onmouseout="out('6749687689436260015');" style=""><abbr title=" 502                 stateSpec.state == MusicStateSpec.STATE_PLAYING ? MUSIC_PHONE_REQUEST.MUSIC_REQUEST_SET_PLAYING : MUSIC_PHONE_REQUEST.MUSIC_REQUEST_SET_PAUSED"> 502                 stateSpec.state == MusicStateSpec.STATE_PLAYING ? MUSIC_PHONE_REQUEST.MUSIC_REQUEST_SET_PðŸ”µ</abbr></span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 503         ));                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504     }                                                                                                    </span>
<span  style=""> 505                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 506     @Override                                                                                            </span>
<span class="-4328830144100754457" onmouseenter="enter('-4328830144100754457');" onmouseout="out('-4328830144100754457');" style=""> 507     public void updateWidgets() {                                                                        </span>
<span class="-8671838943786981246" onmouseenter="enter('-8671838943786981246');" onmouseout="out('-8671838943786981246');" style=""> 508         loadWidgets();                                                                                   </span>
<span class="-686042699702875094" onmouseenter="enter('-686042699702875094');" onmouseout="out('-686042699702875094');" style=""> 509         renderWidgets();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 510     }                                                                                                    </span>
<span  style=""> 511                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 512     @Override                                                                                            </span>
<span class="-3215171005460530491" onmouseenter="enter('-3215171005460530491');" onmouseout="out('-3215171005460530491');" style=""> 513     public void onFetchActivityData() {                                                                  </span>
<span class="-9031387911705611686" onmouseenter="enter('-9031387911705611686');" onmouseout="out('-9031387911705611686');" style=""> 514         syncSettings();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 515     }                                                                                                    </span>
<span  style=""> 516                                                                                                          </span>
<span class="4739601400713241401" onmouseenter="enter('4739601400713241401');" onmouseout="out('4739601400713241401');" style=""> 517     private void syncSettings() {                                                                        </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 518         negotiateSymmetricKey();                                                                         </span>
<span  style=""> 519                                                                                                          </span>
<span class="1672016935910782047" onmouseenter="enter('1672016935910782047');" onmouseout="out('1672016935910782047');" style=""> 520         queueWrite(new ConfigurationGetRequest(this));                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521     }                                                                                                    </span>
<span  style=""> 522                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 523     @Override                                                                                            </span>
<span class="3426069938226863461" onmouseenter="enter('3426069938226863461');" onmouseout="out('3426069938226863461');" style=""> 524     public void setActivityHand(double progress) {                                                       </span>
<span class="-1967647950949041220" onmouseenter="enter('-1967647950949041220');" onmouseout="out('-1967647950949041220');" style=""> 525         // super.setActivityHand(progress);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 526     }                                                                                                    </span>
<span  style=""> 527                                                                                                          </span>
<span class="4432705569944803605" onmouseenter="enter('4432705569944803605');" onmouseout="out('4432705569944803605');" style=""> 528     public boolean playRawNotification(NotificationSpec notificationSpec) {                              </span>
<span class="-6989280013139049302" onmouseenter="enter('-6989280013139049302');" onmouseout="out('-6989280013139049302');" style=""> 529         String senderOrTitle = StringUtils.getFirstOf(notificationSpec.sender, notificationSpec.title);  </span>
<span  style=""> 530                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 531         try {                                                                                            </span>
<span class="-2594216627053610262" onmouseenter="enter('-2594216627053610262');" onmouseout="out('-2594216627053610262');" style=""> 532             for (NotificationHRConfiguration configuration : this.notificationConfigurations){           </span>
<span class="-6012792330028782499" onmouseenter="enter('-6012792330028782499');" onmouseout="out('-6012792330028782499');" style=""> 533                 if(configuration.getPackageName().equals(notificationSpec.sourceAppId)){                 </span>
<span class="-8304200794962410012" onmouseenter="enter('-8304200794962410012');" onmouseout="out('-8304200794962410012');" style=""><abbr title=" 534                     queueWrite(new PlayTextNotificationRequest(notificationSpec.sourceAppId, senderOrTitle, notificationSpec.body, this));"> 534                     queueWrite(new PlayTextNotificationRequest(notificationSpec.sourceAppId, senderOrTitlðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 535                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 536                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 537             }                                                                                            </span>
<span class="6520985087381761239" onmouseenter="enter('6520985087381761239');" onmouseout="out('6520985087381761239');" style=""><abbr title=" 538             queueWrite(new PlayTextNotificationRequest(&quot;generic&quot;, senderOrTitle, notificationSpec.body, this));"> 538             queueWrite(new PlayTextNotificationRequest(&quot;generic&quot;, senderOrTitle, notificationSpec.body, tðŸ”µ</abbr></span>
<span class="-1580407524319062305" onmouseenter="enter('-1580407524319062305');" onmouseout="out('-1580407524319062305');" style=""> 539         }catch (Exception e){                                                                            </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 540             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 541         }                                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 542         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 543     }                                                                                                    </span>
<span  style=""> 544                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 545     @Override                                                                                            </span>
<span class="-3287587973518064190" onmouseenter="enter('-3287587973518064190');" onmouseout="out('-3287587973518064190');" style=""> 546     public void onFindDevice(boolean start) {                                                            </span>
<span class="5693720137067729069" onmouseenter="enter('5693720137067729069');" onmouseout="out('5693720137067729069');" style=""> 547         if(start){                                                                                       </span>
<span class="1659990903962259675" onmouseenter="enter('1659990903962259675');" onmouseout="out('1659990903962259675');" style=""> 548             new TransactionBuilder(&quot;vibrate find&quot;)                                                       </span>
<span class="-2922806062965776165" onmouseenter="enter('-2922806062965776165');" onmouseout="out('-2922806062965776165');" style=""> 549                     .write(                                                                              </span>
<span class="4897579106813855607" onmouseenter="enter('4897579106813855607');" onmouseout="out('4897579106813855607');" style=""><abbr title=" 550                             getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6-74696673696d&quot;)),"> 550                             getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6ðŸ”µ</abbr></span>
<span class="-4709444814666373888" onmouseenter="enter('-4709444814666373888');" onmouseout="out('-4709444814666373888');" style=""><abbr title=" 551                             new byte[]{(byte) 0x01, (byte) 0x04, (byte) 0x30, (byte) 0x75, (byte) 0x00, (byte) 0x00}"> 551                             new byte[]{(byte) 0x01, (byte) 0x04, (byte) 0x30, (byte) 0x75, (byte) 0x00, (ðŸ”µ</abbr></span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 552                             )                                                                            </span>
<span class="7475982186340408444" onmouseenter="enter('7475982186340408444');" onmouseout="out('7475982186340408444');" style=""> 553                     .queue(getDeviceSupport().getQueue());                                               </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style=""> 554         }else{                                                                                           </span>
<span class="1659990903962259675" onmouseenter="enter('1659990903962259675');" onmouseout="out('1659990903962259675');" style=""> 555             new TransactionBuilder(&quot;vibrate find&quot;)                                                       </span>
<span class="-2922806062965776165" onmouseenter="enter('-2922806062965776165');" onmouseout="out('-2922806062965776165');" style=""> 556                     .write(                                                                              </span>
<span class="4897579106813855607" onmouseenter="enter('4897579106813855607');" onmouseout="out('4897579106813855607');" style=""><abbr title=" 557                             getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6-74696673696d&quot;)),"> 557                             getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6ðŸ”µ</abbr></span>
<span class="-5350492152909335002" onmouseenter="enter('-5350492152909335002');" onmouseout="out('-5350492152909335002');" style=""> 558                             new byte[]{(byte) 0x02, (byte) 0x05, (byte) 0x04}                            </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 559                     )                                                                                    </span>
<span class="7475982186340408444" onmouseenter="enter('7475982186340408444');" onmouseout="out('7475982186340408444');" style=""> 560                     .queue(getDeviceSupport().getQueue());                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 561         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562     }                                                                                                    </span>
<span  style=""> 563                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 564     @Override                                                                                            </span>
<span class="8502851833159229707" onmouseenter="enter('8502851833159229707');" onmouseout="out('8502851833159229707');" style=""> 565     public void onSetCallState(CallSpec callSpec) {                                                      </span>
<span class="2570082300251631790" onmouseenter="enter('2570082300251631790');" onmouseout="out('2570082300251631790');" style=""> 566         super.onSetCallState(callSpec);                                                                  </span>
<span class="-5845444396137068141" onmouseenter="enter('-5845444396137068141');" onmouseout="out('-5845444396137068141');" style=""><abbr title=" 567         queueWrite(new PlayCallNotificationRequest(StringUtils.getFirstOf(callSpec.name, callSpec.number), callSpec.command == CallSpec.CALL_INCOMING, this));"> 567         queueWrite(new PlayCallNotificationRequest(StringUtils.getFirstOf(callSpec.name, callSpec.number)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 568     }                                                                                                    </span>
<span  style=""> 569                                                                                                          </span>
<span class="-9163390227004502495" onmouseenter="enter('-9163390227004502495');" onmouseout="out('-9163390227004502495');" style=""> 570     // this method is based on the one from AppMessageHandlerYWeather.java                               </span>
<span class="-7257237953502575841" onmouseenter="enter('-7257237953502575841');" onmouseout="out('-7257237953502575841');" style=""> 571     private int getIconForConditionCode(int conditionCode, boolean isNight) {                            </span>
<span class="-7242773537695047282" onmouseenter="enter('-7242773537695047282');" onmouseout="out('-7242773537695047282');" style=""> 572         final int CLEAR_DAY = 0;                                                                         </span>
<span class="4533171043840830733" onmouseenter="enter('4533171043840830733');" onmouseout="out('4533171043840830733');" style=""> 573         final int CLEAR_NIGHT = 1;                                                                       </span>
<span class="-1044203258765846265" onmouseenter="enter('-1044203258765846265');" onmouseout="out('-1044203258765846265');" style=""> 574         final int CLOUDY = 2;                                                                            </span>
<span class="6767089093966645579" onmouseenter="enter('6767089093966645579');" onmouseout="out('6767089093966645579');" style=""> 575         final int PARTLY_CLOUDY_DAY = 3;                                                                 </span>
<span class="4494290528913924840" onmouseenter="enter('4494290528913924840');" onmouseout="out('4494290528913924840');" style=""> 576         final int PARTLY_CLOUDY_NIGHT = 4;                                                               </span>
<span class="-948427530318648638" onmouseenter="enter('-948427530318648638');" onmouseout="out('-948427530318648638');" style=""> 577         final int RAIN = 5;                                                                              </span>
<span class="-7891962438645220671" onmouseenter="enter('-7891962438645220671');" onmouseout="out('-7891962438645220671');" style=""> 578         final int SNOW = 6;                                                                              </span>
<span class="7487235255100620000" onmouseenter="enter('7487235255100620000');" onmouseout="out('7487235255100620000');" style=""> 579         final int SNOW_2 = 7; // same as 6?                                                              </span>
<span class="6109174568599434520" onmouseenter="enter('6109174568599434520');" onmouseout="out('6109174568599434520');" style=""> 580         final int THUNDERSTORM = 8;                                                                      </span>
<span class="-1407557299840080809" onmouseenter="enter('-1407557299840080809');" onmouseout="out('-1407557299840080809');" style=""> 581         final int CLOUDY_2 = 9; // same as 2?                                                            </span>
<span class="-235578585516231192" onmouseenter="enter('-235578585516231192');" onmouseout="out('-235578585516231192');" style=""> 582         final int WINDY = 10;                                                                            </span>
<span  style=""> 583                                                                                                          </span>
<span class="-6750306522095776186" onmouseenter="enter('-6750306522095776186');" onmouseout="out('-6750306522095776186');" style=""> 584         if (conditionCode == 800 || conditionCode == 951) {                                              </span>
<span class="-7722401087902140861" onmouseenter="enter('-7722401087902140861');" onmouseout="out('-7722401087902140861');" style=""> 585             return isNight ? CLEAR_NIGHT : CLEAR_DAY;                                                    </span>
<span class="3088760508183910638" onmouseenter="enter('3088760508183910638');" onmouseout="out('3088760508183910638');" style=""> 586         } else if (conditionCode &gt; 800 &amp;&amp; conditionCode &lt; 900) {                                         </span>
<span class="6220617342345108517" onmouseenter="enter('6220617342345108517');" onmouseout="out('6220617342345108517');" style=""> 587             return isNight ? PARTLY_CLOUDY_NIGHT : PARTLY_CLOUDY_DAY;                                    </span>
<span class="3057497190260727363" onmouseenter="enter('3057497190260727363');" onmouseout="out('3057497190260727363');" style=""> 588         } else if (conditionCode &gt;= 300 &amp;&amp; conditionCode &lt; 400) {                                        </span>
<span class="7963689777117946550" onmouseenter="enter('7963689777117946550');" onmouseout="out('7963689777117946550');" style=""> 589             return RAIN; // drizzle mapped to rain                                                       </span>
<span class="-3733606442935144190" onmouseenter="enter('-3733606442935144190');" onmouseout="out('-3733606442935144190');" style=""> 590         } else if (conditionCode &gt;= 500 &amp;&amp; conditionCode &lt; 600) {                                        </span>
<span class="2508004717339579833" onmouseenter="enter('2508004717339579833');" onmouseout="out('2508004717339579833');" style=""> 591             return RAIN;                                                                                 </span>
<span class="4918040359999714885" onmouseenter="enter('4918040359999714885');" onmouseout="out('4918040359999714885');" style=""> 592         } else if (conditionCode &gt;= 700 &amp;&amp; conditionCode &lt; 732) {                                        </span>
<span class="6233122099491282445" onmouseenter="enter('6233122099491282445');" onmouseout="out('6233122099491282445');" style=""> 593             return CLOUDY;                                                                               </span>
<span class="6405170419319947758" onmouseenter="enter('6405170419319947758');" onmouseout="out('6405170419319947758');" style=""><abbr title=" 594         } else if (conditionCode == 741 || conditionCode == 751 || conditionCode == 761 || conditionCode == 762) {"> 594         } else if (conditionCode == 741 || conditionCode == 751 || conditionCode == 761 || conditionCode ðŸ”µ</abbr></span>
<span class="2536039853244368761" onmouseenter="enter('2536039853244368761');" onmouseout="out('2536039853244368761');" style=""> 595             return CLOUDY; // fog mapped to cloudy                                                       </span>
<span class="6580216626725103203" onmouseenter="enter('6580216626725103203');" onmouseout="out('6580216626725103203');" style=""> 596         } else if (conditionCode == 771) {                                                               </span>
<span class="-5268377561975928582" onmouseenter="enter('-5268377561975928582');" onmouseout="out('-5268377561975928582');" style=""> 597             return CLOUDY; // squalls mapped to cloudy                                                   </span>
<span class="-6475883863999659582" onmouseenter="enter('-6475883863999659582');" onmouseout="out('-6475883863999659582');" style=""> 598         } else if (conditionCode == 781) {                                                               </span>
<span class="-2651444700159349229" onmouseenter="enter('-2651444700159349229');" onmouseout="out('-2651444700159349229');" style=""> 599             return WINDY; // tornato mapped to windy                                                     </span>
<span class="-3846351950108028451" onmouseenter="enter('-3846351950108028451');" onmouseout="out('-3846351950108028451');" style=""> 600         } else if (conditionCode &gt;= 200 &amp;&amp; conditionCode &lt; 300) {                                        </span>
<span class="-7893213180272113492" onmouseenter="enter('-7893213180272113492');" onmouseout="out('-7893213180272113492');" style=""> 601             return THUNDERSTORM;                                                                         </span>
<span class="-160375692992858182" onmouseenter="enter('-160375692992858182');" onmouseout="out('-160375692992858182');" style=""> 602         } else if (conditionCode &gt;= 600 &amp;&amp; conditionCode &lt;= 602) {                                       </span>
<span class="4577577423549625750" onmouseenter="enter('4577577423549625750');" onmouseout="out('4577577423549625750');" style=""> 603             return SNOW;                                                                                 </span>
<span class="73124631780569399" onmouseenter="enter('73124631780569399');" onmouseout="out('73124631780569399');" style=""> 604         } else if (conditionCode &gt;= 611 &amp;&amp; conditionCode &lt;= 622) {                                       </span>
<span class="2508004717339579833" onmouseenter="enter('2508004717339579833');" onmouseout="out('2508004717339579833');" style=""> 605             return RAIN;                                                                                 </span>
<span class="5918520655852856943" onmouseenter="enter('5918520655852856943');" onmouseout="out('5918520655852856943');" style=""> 606         } else if (conditionCode == 906) {                                                               </span>
<span class="-8494627517236710847" onmouseenter="enter('-8494627517236710847');" onmouseout="out('-8494627517236710847');" style=""> 607             return RAIN; // hail mapped to rain                                                          </span>
<span class="-4632432821354911151" onmouseenter="enter('-4632432821354911151');" onmouseout="out('-4632432821354911151');" style=""> 608         } else if (conditionCode &gt;= 907 &amp;&amp; conditionCode &lt; 957) {                                        </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 609             return WINDY;                                                                                </span>
<span class="884594439890815837" onmouseenter="enter('884594439890815837');" onmouseout="out('884594439890815837');" style=""> 610         } else if (conditionCode == 905) {                                                               </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 611             return WINDY;                                                                                </span>
<span class="7058363657246863920" onmouseenter="enter('7058363657246863920');" onmouseout="out('7058363657246863920');" style=""> 612         } else if (conditionCode == 900) {                                                               </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 613             return WINDY;                                                                                </span>
<span class="-7755582696699634395" onmouseenter="enter('-7755582696699634395');" onmouseout="out('-7755582696699634395');" style=""> 614         } else if (conditionCode == 901 || conditionCode == 902 || conditionCode == 962) {               </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 615             return WINDY;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 616         }                                                                                                </span>
<span class="-7722401087902140861" onmouseenter="enter('-7722401087902140861');" onmouseout="out('-7722401087902140861');" style=""> 617         return isNight ? CLEAR_NIGHT : CLEAR_DAY;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618     }                                                                                                    </span>
<span  style=""> 619                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 620     @Override                                                                                            </span>
<span class="-6167041048283935417" onmouseenter="enter('-6167041048283935417');" onmouseout="out('-6167041048283935417');" style=""> 621     public void onSendWeather(WeatherSpec weatherSpec) {                                                 </span>
<span class="-580696616137890311" onmouseenter="enter('-580696616137890311');" onmouseout="out('-580696616137890311');" style=""> 622         long ts = System.currentTimeMillis();                                                            </span>
<span class="-8981233749074677785" onmouseenter="enter('-8981233749074677785');" onmouseout="out('-8981233749074677785');" style=""> 623         ts /= 1000;                                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 624         try {                                                                                            </span>
<span class="-4452014417400702333" onmouseenter="enter('-4452014417400702333');" onmouseout="out('-4452014417400702333');" style=""> 625             JSONObject responseObject = new JSONObject()                                                 </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 626                     .put(&quot;res&quot;, new JSONObject()                                                         </span>
<span class="-311134376594128902" onmouseenter="enter('-311134376594128902');" onmouseout="out('-311134376594128902');" style=""> 627                             .put(&quot;id&quot;, 0) // seems the id does not matter?                               </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 628                             .put(&quot;set&quot;, new JSONObject()                                                 </span>
<span class="-7491386685560898919" onmouseenter="enter('-7491386685560898919');" onmouseout="out('-7491386685560898919');" style=""> 629                                     .put(&quot;weatherInfo&quot;, new JSONObject()                                 </span>
<span class="3913809787685967455" onmouseenter="enter('3913809787685967455');" onmouseout="out('3913809787685967455');" style=""> 630                                             .put(&quot;alive&quot;, ts + 60 * 60)                                  </span>
<span class="4823146304358131104" onmouseenter="enter('4823146304358131104');" onmouseout="out('4823146304358131104');" style=""> 631                                             .put(&quot;unit&quot;, &quot;c&quot;) // FIXME: do not hardcode                  </span>
<span class="3465794128886265400" onmouseenter="enter('3465794128886265400');" onmouseout="out('3465794128886265400');" style=""> 632                                             .put(&quot;temp&quot;, weatherSpec.currentTemp - 273)                  </span>
<span class="-2978941176103258929" onmouseenter="enter('-2978941176103258929');" onmouseout="out('-2978941176103258929');" style=""><abbr title=" 633                                             .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.currentConditionCode, false)) // FIXME do not assume daylight"> 633                                             .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.currentCoðŸ”µ</abbr></span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 634                                     )                                                                    </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 635                             )                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 636                     );                                                                                   </span>
<span  style=""> 637                                                                                                          </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 638             queueWrite(new JsonPutRequest(responseObject, this));                                        </span>
<span  style=""> 639                                                                                                          </span>
<span class="5317082335628225584" onmouseenter="enter('5317082335628225584');" onmouseout="out('5317082335628225584');" style=""> 640             JSONArray forecastWeekArray = new JSONArray();                                               </span>
<span class="-2368043815888700658" onmouseenter="enter('-2368043815888700658');" onmouseout="out('-2368043815888700658');" style=""> 641             final String[] weekdays = {&quot;&quot;, &quot;Sun&quot;, &quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;};             </span>
<span class="-364158713171851732" onmouseenter="enter('-364158713171851732');" onmouseout="out('-364158713171851732');" style=""> 642             Calendar cal = Calendar.getInstance();                                                       </span>
<span class="-4637281821247246720" onmouseenter="enter('-4637281821247246720');" onmouseout="out('-4637281821247246720');" style=""> 643             cal.setTimeInMillis(weatherSpec.timestamp * 1000L);                                          </span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style=""> 644             int i = 0;                                                                                   </span>
<span class="4625687820668156386" onmouseenter="enter('4625687820668156386');" onmouseout="out('4625687820668156386');" style=""> 645             for (WeatherSpec.Forecast forecast : weatherSpec.forecasts) {                                </span>
<span class="3497173000510224029" onmouseenter="enter('3497173000510224029');" onmouseout="out('3497173000510224029');" style=""> 646                 cal.add(Calendar.DATE, 1);                                                               </span>
<span class="-2706943182093550956" onmouseenter="enter('-2706943182093550956');" onmouseout="out('-2706943182093550956');" style=""> 647                 int dayOfWeek = cal.get(Calendar.DAY_OF_WEEK);                                           </span>
<span class="8445249603810894149" onmouseenter="enter('8445249603810894149');" onmouseout="out('8445249603810894149');" style=""> 648                 forecastWeekArray.put(new JSONObject()                                                   </span>
<span class="3406552519892389037" onmouseenter="enter('3406552519892389037');" onmouseout="out('3406552519892389037');" style=""> 649                         .put(&quot;day&quot;, weekdays[dayOfWeek])                                                 </span>
<span class="-3341352462469645269" onmouseenter="enter('-3341352462469645269');" onmouseout="out('-3341352462469645269');" style=""><abbr title=" 650                         .put(&quot;cond_id&quot;, getIconForConditionCode(forecast.conditionCode, false)) // FIXME do not assume daylight"> 650                         .put(&quot;cond_id&quot;, getIconForConditionCode(forecast.conditionCode, false)) // FIXME ðŸ”µ</abbr></span>
<span class="2713736984512170635" onmouseenter="enter('2713736984512170635');" onmouseout="out('2713736984512170635');" style=""> 651                         .put(&quot;high&quot;, forecast.maxTemp - 273)                                             </span>
<span class="8922707616504433133" onmouseenter="enter('8922707616504433133');" onmouseout="out('8922707616504433133');" style=""> 652                         .put(&quot;low&quot;, forecast.minTemp - 273)                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 653                 );                                                                                       </span>
<span class="-1631419655189706967" onmouseenter="enter('-1631419655189706967');" onmouseout="out('-1631419655189706967');" style=""> 654                 if (++i == 3) break; // max 3                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655             }                                                                                            </span>
<span  style=""> 656                                                                                                          </span>
<span class="1945247200353653685" onmouseenter="enter('1945247200353653685');" onmouseout="out('1945247200353653685');" style=""> 657             JSONArray forecastDayArray = new JSONArray();                                                </span>
<span class="-3162654741636225130" onmouseenter="enter('-3162654741636225130');" onmouseout="out('-3162654741636225130');" style=""> 658             final int[] hours = {0, 0, 0};                                                               </span>
<span  style=""> 659                                                                                                          </span>
<span class="6125525781312818118" onmouseenter="enter('6125525781312818118');" onmouseout="out('6125525781312818118');" style=""> 660             for (int hour : hours) {                                                                     </span>
<span class="1068601706398434110" onmouseenter="enter('1068601706398434110');" onmouseout="out('1068601706398434110');" style=""> 661                 forecastDayArray.put(new JSONObject()                                                    </span>
<span class="-3870856117199987769" onmouseenter="enter('-3870856117199987769');" onmouseout="out('-3870856117199987769');" style=""> 662                         .put(&quot;hour&quot;, hour)                                                               </span>
<span class="-6006964472079792051" onmouseenter="enter('-6006964472079792051');" onmouseout="out('-6006964472079792051');" style=""> 663                         .put(&quot;cond_id&quot;, 0)                                                               </span>
<span class="-6609285657661916066" onmouseenter="enter('-6609285657661916066');" onmouseout="out('-6609285657661916066');" style=""> 664                         .put(&quot;temp&quot;, 0)                                                                  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 665                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666             }                                                                                            </span>
<span  style=""> 667                                                                                                          </span>
<span  style=""> 668                                                                                                          </span>
<span class="3790951608586851062" onmouseenter="enter('3790951608586851062');" onmouseout="out('3790951608586851062');" style=""> 669             JSONObject forecastResponseObject = new JSONObject()                                         </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 670                     .put(&quot;res&quot;, new JSONObject()                                                         </span>
<span class="3332377282695166753" onmouseenter="enter('3332377282695166753');" onmouseout="out('3332377282695166753');" style=""> 671                             .put(&quot;id&quot;, 0)                                                                </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 672                             .put(&quot;set&quot;, new JSONObject()                                                 </span>
<span class="7467737770827774855" onmouseenter="enter('7467737770827774855');" onmouseout="out('7467737770827774855');" style=""> 673                                     .put(&quot;weatherApp._.config.locations&quot;, new JSONArray()                </span>
<span class="-2773638428741427529" onmouseenter="enter('-2773638428741427529');" onmouseout="out('-2773638428741427529');" style=""> 674                                             .put(new JSONObject()                                        </span>
<span class="3913809787685967455" onmouseenter="enter('3913809787685967455');" onmouseout="out('3913809787685967455');" style=""> 675                                                     .put(&quot;alive&quot;, ts + 60 * 60)                          </span>
<span class="886713691773163342" onmouseenter="enter('886713691773163342');" onmouseout="out('886713691773163342');" style=""> 676                                                     .put(&quot;city&quot;, weatherSpec.location)                   </span>
<span class="4823146304358131104" onmouseenter="enter('4823146304358131104');" onmouseout="out('4823146304358131104');" style=""> 677                                                     .put(&quot;unit&quot;, &quot;c&quot;) // FIXME: do not hardcode          </span>
<span class="3465794128886265400" onmouseenter="enter('3465794128886265400');" onmouseout="out('3465794128886265400');" style=""> 678                                                     .put(&quot;temp&quot;, weatherSpec.currentTemp - 273)          </span>
<span class="6957530022753247995" onmouseenter="enter('6957530022753247995');" onmouseout="out('6957530022753247995');" style=""> 679                                                     .put(&quot;high&quot;, weatherSpec.todayMaxTemp - 273)         </span>
<span class="-7717570350252662201" onmouseenter="enter('-7717570350252662201');" onmouseout="out('-7717570350252662201');" style=""> 680                                                     .put(&quot;low&quot;, weatherSpec.todayMinTemp - 273)          </span>
<span class="-5985677233453575860" onmouseenter="enter('-5985677233453575860');" onmouseout="out('-5985677233453575860');" style=""> 681                                                     .put(&quot;rain&quot;, 0)                                      </span>
<span class="-2978941176103258929" onmouseenter="enter('-2978941176103258929');" onmouseout="out('-2978941176103258929');" style=""><abbr title=" 682                                                     .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.currentConditionCode, false)) // FIXME do not assume daylight"> 682                                                     .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.cðŸ”µ</abbr></span>
<span class="-3427053046266686031" onmouseenter="enter('-3427053046266686031');" onmouseout="out('-3427053046266686031');" style=""> 683                                                     .put(&quot;forecast_day&quot;, forecastDayArray)               </span>
<span class="-6314376065462434614" onmouseenter="enter('-6314376065462434614');" onmouseout="out('-6314376065462434614');" style=""> 684                                                     .put(&quot;forecast_week&quot;, forecastWeekArray)             </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 685                                             )                                                            </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 686                                     )                                                                    </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 687                             )                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 688                     );                                                                                   </span>
<span  style=""> 689                                                                                                          </span>
<span class="5488486443475038572" onmouseenter="enter('5488486443475038572');" onmouseout="out('5488486443475038572');" style=""> 690             queueWrite(new JsonPutRequest(forecastResponseObject, this));                                </span>
<span  style=""> 691                                                                                                          </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 692         } catch (JSONException e) {                                                                      </span>
<span class="-3518979045088336375" onmouseenter="enter('-3518979045088336375');" onmouseout="out('-3518979045088336375');" style=""> 693             logger.error(&quot;JSON exception: &quot;, e);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 695     }                                                                                                    </span>
<span  style=""> 696                                                                                                          </span>
<span  style=""> 697                                                                                                          </span>
<span class="-8903998240903156866" onmouseenter="enter('-8903998240903156866');" onmouseout="out('-8903998240903156866');" style=""> 698     // this was used to enumerate the weather icons :)                                                   </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 699     /*                                                                                                   </span>
<span class="9097322268338941135" onmouseenter="enter('9097322268338941135');" onmouseout="out('9097322268338941135');" style=""> 700     static int i = 0;                                                                                    </span>
<span  style=""> 701                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 702     @Override                                                                                            </span>
<span class="-1180224994468071186" onmouseenter="enter('-1180224994468071186');" onmouseout="out('-1180224994468071186');" style=""> 703     public void onTestNewFunction() {                                                                    </span>
<span class="-580696616137890311" onmouseenter="enter('-580696616137890311');" onmouseout="out('-580696616137890311');" style=""> 704         long ts = System.currentTimeMillis();                                                            </span>
<span class="-8981233749074677785" onmouseenter="enter('-8981233749074677785');" onmouseout="out('-8981233749074677785');" style=""> 705         ts /= 1000;                                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 706         try {                                                                                            </span>
<span class="-4452014417400702333" onmouseenter="enter('-4452014417400702333');" onmouseout="out('-4452014417400702333');" style=""> 707             JSONObject responseObject = new JSONObject()                                                 </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 708                     .put(&quot;res&quot;, new JSONObject()                                                         </span>
<span class="-311134376594128902" onmouseenter="enter('-311134376594128902');" onmouseout="out('-311134376594128902');" style=""> 709                             .put(&quot;id&quot;, 0) // seems the id does not matter?                               </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 710                             .put(&quot;set&quot;, new JSONObject()                                                 </span>
<span class="-7491386685560898919" onmouseenter="enter('-7491386685560898919');" onmouseout="out('-7491386685560898919');" style=""> 711                                     .put(&quot;weatherInfo&quot;, new JSONObject()                                 </span>
<span class="3913809787685967455" onmouseenter="enter('3913809787685967455');" onmouseout="out('3913809787685967455');" style=""> 712                                             .put(&quot;alive&quot;, ts + 60 * 60)                                  </span>
<span class="8812574869889008786" onmouseenter="enter('8812574869889008786');" onmouseout="out('8812574869889008786');" style=""> 713                                             .put(&quot;unit&quot;, &quot;c&quot;)                                            </span>
<span class="-9027201993479344069" onmouseenter="enter('-9027201993479344069');" onmouseout="out('-9027201993479344069');" style=""> 714                                             .put(&quot;temp&quot;, i)                                              </span>
<span class="-503000518492904339" onmouseenter="enter('-503000518492904339');" onmouseout="out('-503000518492904339');" style=""> 715                                             .put(&quot;cond_id&quot;, i++)                                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 716                                     )                                                                    </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 717                             ));                                                                          </span>
<span  style=""> 718                                                                                                          </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 719             queueWrite(new JsonPutRequest(responseObject, this));                                        </span>
<span  style=""> 720                                                                                                          </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 721         } catch (JSONException e) {                                                                      </span>
<span class="-255862428648050787" onmouseenter="enter('-255862428648050787');" onmouseout="out('-255862428648050787');" style=""> 722             logger.error(&quot; JSON exception: &quot;, e);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 723         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724     }                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 725 */                                                                                                       </span>
<span class="4061760400153145133" onmouseenter="enter('4061760400153145133');" onmouseout="out('4061760400153145133');" style=""> 726     public byte[] getSecretKey() {                                                                       </span>
<span class="877865931329337758" onmouseenter="enter('877865931329337758');" onmouseout="out('877865931329337758');" style=""> 727         byte[] authKeyBytes = new byte[16];                                                              </span>
<span  style=""> 728                                                                                                          </span>
<span class="6732301069337237036" onmouseenter="enter('6732301069337237036');" onmouseout="out('6732301069337237036');" style=""><abbr title=" 729         SharedPreferences sharedPrefs = GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddress());"> 729         SharedPreferences sharedPrefs = GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getðŸ”µ</abbr></span>
<span  style=""> 730                                                                                                          </span>
<span class="-3395951777279535435" onmouseenter="enter('-3395951777279535435');" onmouseout="out('-3395951777279535435');" style=""> 731         String authKey = sharedPrefs.getString(&quot;authkey&quot;, null);                                         </span>
<span class="-7368286337752989387" onmouseenter="enter('-7368286337752989387');" onmouseout="out('-7368286337752989387');" style=""> 732         if (authKey != null &amp;&amp; !authKey.isEmpty()) {                                                     </span>
<span class="-7318628780836353920" onmouseenter="enter('-7318628780836353920');" onmouseout="out('-7318628780836353920');" style=""> 733             byte[] srcBytes = authKey.trim().getBytes();                                                 </span>
<span class="-7029558868717651202" onmouseenter="enter('-7029558868717651202');" onmouseout="out('-7029558868717651202');" style=""> 734             if (authKey.length() == 34 &amp;&amp; authKey.startsWith(&quot;0x&quot;)) {                                    </span>
<span class="3552614168594468794" onmouseenter="enter('3552614168594468794');" onmouseout="out('3552614168594468794');" style=""> 735                 srcBytes = GB.hexStringToByteArray(authKey.substring(2));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 736             }                                                                                            </span>
<span class="6598760317559003341" onmouseenter="enter('6598760317559003341');" onmouseout="out('6598760317559003341');" style=""> 737             System.arraycopy(srcBytes, 0, authKeyBytes, 0, Math.min(srcBytes.length, 16));               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 738         }                                                                                                </span>
<span  style=""> 739                                                                                                          </span>
<span class="340030267486824060" onmouseenter="enter('340030267486824060');" onmouseout="out('340030267486824060');" style=""> 740         return authKeyBytes;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 741     }                                                                                                    </span>
<span  style=""> 742                                                                                                          </span>
<span class="1797454318126944117" onmouseenter="enter('1797454318126944117');" onmouseout="out('1797454318126944117');" style=""> 743     public void setPhoneRandomNumber(byte[] phoneRandomNumber) {                                         </span>
<span class="-1045014803983093080" onmouseenter="enter('-1045014803983093080');" onmouseout="out('-1045014803983093080');" style=""> 744         this.phoneRandomNumber = phoneRandomNumber;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 745     }                                                                                                    </span>
<span  style=""> 746                                                                                                          </span>
<span class="6353599412516657012" onmouseenter="enter('6353599412516657012');" onmouseout="out('6353599412516657012');" style=""> 747     public byte[] getPhoneRandomNumber() {                                                               </span>
<span class="-8473936821502081479" onmouseenter="enter('-8473936821502081479');" onmouseout="out('-8473936821502081479');" style=""> 748         return phoneRandomNumber;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 749     }                                                                                                    </span>
<span  style=""> 750                                                                                                          </span>
<span class="8524954629356124134" onmouseenter="enter('8524954629356124134');" onmouseout="out('8524954629356124134');" style=""> 751     public void setWatchRandomNumber(byte[] watchRandomNumber) {                                         </span>
<span class="-8554456578054756330" onmouseenter="enter('-8554456578054756330');" onmouseout="out('-8554456578054756330');" style=""> 752         this.watchRandomNumber = watchRandomNumber;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 753     }                                                                                                    </span>
<span  style=""> 754                                                                                                          </span>
<span class="-817141622160847580" onmouseenter="enter('-817141622160847580');" onmouseout="out('-817141622160847580');" style=""> 755     public byte[] getWatchRandomNumber() {                                                               </span>
<span class="4512956887887166379" onmouseenter="enter('4512956887887166379');" onmouseout="out('4512956887887166379');" style=""> 756         return watchRandomNumber;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 757     }                                                                                                    </span>
<span  style=""> 758                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 759     @Override                                                                                            </span>
<span class="-8332902696773003591" onmouseenter="enter('-8332902696773003591');" onmouseout="out('-8332902696773003591');" style=""> 760     public void overwriteButtons(String jsonConfigString) {                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 761         try {                                                                                            </span>
<span class="-5757883755283420088" onmouseenter="enter('-5757883755283420088');" onmouseout="out('-5757883755283420088');" style=""> 762             JSONArray jsonArray = new JSONArray(                                                         </span>
<span class="-5162550843991564685" onmouseenter="enter('-5162550843991564685');" onmouseout="out('-5162550843991564685');" style=""> 763                     GBApplication.getPrefs().getString(HRConfigActivity.CONFIG_KEY_Q_ACTIONS, &quot;[]&quot;)      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 764             );                                                                                           </span>
<span class="-3670193080643996757" onmouseenter="enter('-3670193080643996757');" onmouseout="out('-3670193080643996757');" style=""> 765             String[] menuItems = new String[jsonArray.length()];                                         </span>
<span class="3800396328797868230" onmouseenter="enter('3800396328797868230');" onmouseout="out('3800396328797868230');" style=""> 766             for (int i = 0; i &lt; jsonArray.length(); i++) menuItems[i] = jsonArray.getString(i);          </span>
<span  style=""> 767                                                                                                          </span>
<span class="-8974533950525390112" onmouseenter="enter('-8974533950525390112');" onmouseout="out('-8974533950525390112');" style=""> 768             SharedPreferences prefs = getDeviceSpecificPreferences();                                    </span>
<span class="3731441667100257289" onmouseenter="enter('3731441667100257289');" onmouseout="out('3731441667100257289');" style=""><abbr title=" 769             String upperButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_1_FUNCTION, &quot;weatherApp&quot;);"> 769             String upperButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_1_FUNCTION,ðŸ”µ</abbr></span>
<span class="8778701870293152792" onmouseenter="enter('8778701870293152792');" onmouseout="out('8778701870293152792');" style=""><abbr title=" 770             String middleButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_2_FUNCTION, &quot;commuteApp&quot;);"> 770             String middleButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_2_FUNCTIONðŸ”µ</abbr></span>
<span class="-9179810663962091339" onmouseenter="enter('-9179810663962091339');" onmouseout="out('-9179810663962091339');" style=""><abbr title=" 771             String lowerButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_3_FUNCTION, &quot;musicApp&quot;);"> 771             String lowerButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_3_FUNCTION,ðŸ”µ</abbr></span>
<span  style=""> 772                                                                                                          </span>
<span class="-2546877682423996320" onmouseenter="enter('-2546877682423996320');" onmouseout="out('-2546877682423996320');" style=""> 773             queueWrite(new ButtonConfigurationPutRequest(                                                </span>
<span class="959305012337743007" onmouseenter="enter('959305012337743007');" onmouseout="out('959305012337743007');" style=""> 774                     menuItems,                                                                           </span>
<span class="-2429855445172031576" onmouseenter="enter('-2429855445172031576');" onmouseout="out('-2429855445172031576');" style=""> 775                     upperButtonApp,                                                                      </span>
<span class="7250962454256273524" onmouseenter="enter('7250962454256273524');" onmouseout="out('7250962454256273524');" style=""> 776                     middleButtonApp,                                                                     </span>
<span class="3869959890859912879" onmouseenter="enter('3869959890859912879');" onmouseout="out('3869959890859912879');" style=""> 777                     lowerButtonApp,                                                                      </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 778                     this                                                                                 </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 779             ));                                                                                          </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 780         } catch (JSONException e) {                                                                      </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 781             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 782         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 783     }                                                                                                    </span>
<span  style=""> 784                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 785     @Override                                                                                            </span>
<span class="349159621018699769" onmouseenter="enter('349159621018699769');" onmouseout="out('349159621018699769');" style=""> 786     public void onSendConfiguration(String config) {                                                     </span>
<span class="-5681424438451116078" onmouseenter="enter('-5681424438451116078');" onmouseout="out('-5681424438451116078');" style=""> 787         switch (config) {                                                                                </span>
<span class="-3013237703294184776" onmouseenter="enter('-3013237703294184776');" onmouseout="out('-3013237703294184776');" style=""> 788             case DeviceSettingsPreferenceConst.PREF_BUTTON_1_FUNCTION:                                   </span>
<span class="4315270877947230307" onmouseenter="enter('4315270877947230307');" onmouseout="out('4315270877947230307');" style=""> 789             case DeviceSettingsPreferenceConst.PREF_BUTTON_2_FUNCTION:                                   </span>
<span class="-6016648312979442964" onmouseenter="enter('-6016648312979442964');" onmouseout="out('-6016648312979442964');" style=""> 790             case DeviceSettingsPreferenceConst.PREF_BUTTON_3_FUNCTION:                                   </span>
<span class="-7476048809216327685" onmouseenter="enter('-7476048809216327685');" onmouseout="out('-7476048809216327685');" style=""> 791                 overwriteButtons(null);                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 792                 break;                                                                                   </span>
<span class="4621265622900955004" onmouseenter="enter('4621265622900955004');" onmouseout="out('4621265622900955004');" style=""> 793             case DeviceSettingsPreferenceConst.PREF_VIBRATION_STRENGH_PERCENTAGE:                        </span>
<span class="-4331994456315640395" onmouseenter="enter('-4331994456315640395');" onmouseout="out('-4331994456315640395');" style=""> 794                 setVibrationStrength();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 795         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 796     }                                                                                                    </span>
<span  style=""> 797                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 798     @Override                                                                                            </span>
<span class="-1745999502816791714" onmouseenter="enter('-1745999502816791714');" onmouseout="out('-1745999502816791714');" style=""> 799     public void handleHeartRateCharacteristic(BluetoothGattCharacteristic characteristic) {              </span>
<span class="644393070755783970" onmouseenter="enter('644393070755783970');" onmouseout="out('644393070755783970');" style=""> 800         super.handleHeartRateCharacteristic(characteristic);                                             </span>
<span  style=""> 801                                                                                                          </span>
<span class="-4350509998999229188" onmouseenter="enter('-4350509998999229188');" onmouseout="out('-4350509998999229188');" style=""> 802         byte[] value = characteristic.getValue();                                                        </span>
<span  style=""> 803                                                                                                          </span>
<span class="3002516447616481759" onmouseenter="enter('3002516447616481759');" onmouseout="out('3002516447616481759');" style=""> 804         int heartRate = value[1];                                                                        </span>
<span  style=""> 805                                                                                                          </span>
<span class="-3503506213363643375" onmouseenter="enter('-3503506213363643375');" onmouseout="out('-3503506213363643375');" style=""> 806         logger.debug(&quot;heart rate: &quot; + heartRate);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807     }                                                                                                    </span>
<span  style=""> 808                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 809     @Override                                                                                            </span>
<span class="6377473851875601996" onmouseenter="enter('6377473851875601996');" onmouseout="out('6377473851875601996');" style=""> 810     protected void handleBackgroundCharacteristic(BluetoothGattCharacteristic characteristic) {          </span>
<span class="-2825981250293151244" onmouseenter="enter('-2825981250293151244');" onmouseout="out('-2825981250293151244');" style=""> 811         super.handleBackgroundCharacteristic(characteristic);                                            </span>
<span  style=""> 812                                                                                                          </span>
<span class="-4350509998999229188" onmouseenter="enter('-4350509998999229188');" onmouseout="out('-4350509998999229188');" style=""> 813         byte[] value = characteristic.getValue();                                                        </span>
<span  style=""> 814                                                                                                          </span>
<span class="-8910138668401756259" onmouseenter="enter('-8910138668401756259');" onmouseout="out('-8910138668401756259');" style=""> 815         byte requestType = value[1];                                                                     </span>
<span  style=""> 816                                                                                                          </span>
<span class="-188939088446447101" onmouseenter="enter('-188939088446447101');" onmouseout="out('-188939088446447101');" style=""> 817         if(requestType == (byte) 0x04){                                                                  </span>
<span class="-7559460541575142851" onmouseenter="enter('-7559460541575142851');" onmouseout="out('-7559460541575142851');" style=""> 818             handleCallRequest(value);                                                                    </span>
<span class="8941437976865019066" onmouseenter="enter('8941437976865019066');" onmouseout="out('8941437976865019066');" style=""> 819         }else if (requestType == (byte) 0x05) {                                                          </span>
<span class="-6049325109739304315" onmouseenter="enter('-6049325109739304315');" onmouseout="out('-6049325109739304315');" style=""> 820             handleMusicRequest(value);                                                                   </span>
<span class="-1129186254434475226" onmouseenter="enter('-1129186254434475226');" onmouseout="out('-1129186254434475226');" style=""> 821         } else if (requestType == (byte) 0x01) {                                                         </span>
<span class="5556569467739549651" onmouseenter="enter('5556569467739549651');" onmouseout="out('5556569467739549651');" style=""> 822             int eventId = value[2];                                                                      </span>
<span class="4584038208845194803" onmouseenter="enter('4584038208845194803');" onmouseout="out('4584038208845194803');" style=""> 823             logger.info(&quot;got event id &quot; + eventId);                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 824             try {                                                                                        </span>
<span class="2511008795236813092" onmouseenter="enter('2511008795236813092');" onmouseout="out('2511008795236813092');" style=""> 825                 String jsonString = new String(value, 3, value.length - 3);                              </span>
<span class="-5055085421008485579" onmouseenter="enter('-5055085421008485579');" onmouseout="out('-5055085421008485579');" style=""> 826                 logger.info(jsonString);                                                                 </span>
<span class="7978684515011278150" onmouseenter="enter('7978684515011278150');" onmouseout="out('7978684515011278150');" style=""> 827                 JSONObject requestJson = new JSONObject(jsonString);                                     </span>
<span  style=""> 828                                                                                                          </span>
<span class="-2320957157152693274" onmouseenter="enter('-2320957157152693274');" onmouseout="out('-2320957157152693274');" style=""> 829                 JSONObject request = requestJson.getJSONObject(&quot;req&quot;);                                   </span>
<span class="-4724867393653322739" onmouseenter="enter('-4724867393653322739');" onmouseout="out('-4724867393653322739');" style=""> 830                 int requestId = request.getInt(&quot;id&quot;);                                                    </span>
<span  style=""> 831                                                                                                          </span>
<span class="-9049634342561224124" onmouseenter="enter('-9049634342561224124');" onmouseout="out('-9049634342561224124');" style=""> 832                 if (request.has(&quot;ringMyPhone&quot;)) {                                                        </span>
<span class="-8947281113981412895" onmouseenter="enter('-8947281113981412895');" onmouseout="out('-8947281113981412895');" style=""> 833                     String action = request.getJSONObject(&quot;ringMyPhone&quot;).getString(&quot;action&quot;);            </span>
<span class="2672973027305420404" onmouseenter="enter('2672973027305420404');" onmouseout="out('2672973027305420404');" style=""> 834                     logger.info(&quot;got ringMyPhone request; &quot; + action);                                   </span>
<span class="-5388490694046828121" onmouseenter="enter('-5388490694046828121');" onmouseout="out('-5388490694046828121');" style=""> 835                     GBDeviceEventFindPhone findPhoneEvent = new GBDeviceEventFindPhone();                </span>
<span  style=""> 836                                                                                                          </span>
<span class="-4452014417400702333" onmouseenter="enter('-4452014417400702333');" onmouseout="out('-4452014417400702333');" style=""> 837                     JSONObject responseObject = new JSONObject()                                         </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 838                             .put(&quot;res&quot;, new JSONObject()                                                 </span>
<span class="1179326437824087972" onmouseenter="enter('1179326437824087972');" onmouseout="out('1179326437824087972');" style=""> 839                                     .put(&quot;id&quot;, requestId)                                                </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 840                                     .put(&quot;set&quot;, new JSONObject()                                         </span>
<span class="-1885979276882630426" onmouseenter="enter('-1885979276882630426');" onmouseout="out('-1885979276882630426');" style=""> 841                                             .put(&quot;ringMyPhone&quot;, new JSONObject()                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 842                                             )                                                            </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 843                                     )                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 844                             );                                                                           </span>
<span  style=""> 845                                                                                                          </span>
<span class="8447204792056966026" onmouseenter="enter('8447204792056966026');" onmouseout="out('8447204792056966026');" style=""> 846                     if (&quot;on&quot;.equals(action)) {                                                           </span>
<span class="-2212046129077350542" onmouseenter="enter('-2212046129077350542');" onmouseout="out('-2212046129077350542');" style=""> 847                         findPhoneEvent.event = GBDeviceEventFindPhone.Event.START;                       </span>
<span class="1008493374584433440" onmouseenter="enter('1008493374584433440');" onmouseout="out('1008493374584433440');" style=""> 848                         getDeviceSupport().evaluateGBDeviceEvent(findPhoneEvent);                        </span>
<span class="7519888082405137596" onmouseenter="enter('7519888082405137596');" onmouseout="out('7519888082405137596');" style=""> 849                         responseObject                                                                   </span>
<span class="9073084076350179656" onmouseenter="enter('9073084076350179656');" onmouseout="out('9073084076350179656');" style=""> 850                                 .getJSONObject(&quot;res&quot;)                                                    </span>
<span class="8250331190708228233" onmouseenter="enter('8250331190708228233');" onmouseout="out('8250331190708228233');" style=""> 851                                 .getJSONObject(&quot;set&quot;)                                                    </span>
<span class="-5085635855523546299" onmouseenter="enter('-5085635855523546299');" onmouseout="out('-5085635855523546299');" style=""> 852                                 .getJSONObject(&quot;ringMyPhone&quot;)                                            </span>
<span class="1178745681736221021" onmouseenter="enter('1178745681736221021');" onmouseout="out('1178745681736221021');" style=""> 853                                 .put(&quot;result&quot;, &quot;on&quot;);                                                    </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 854                         queueWrite(new JsonPutRequest(responseObject, this));                            </span>
<span class="1879749671025083715" onmouseenter="enter('1879749671025083715');" onmouseout="out('1879749671025083715');" style=""> 855                     } else if (&quot;off&quot;.equals(action)) {                                                   </span>
<span class="-7600947716940752063" onmouseenter="enter('-7600947716940752063');" onmouseout="out('-7600947716940752063');" style=""> 856                         findPhoneEvent.event = GBDeviceEventFindPhone.Event.STOP;                        </span>
<span class="1008493374584433440" onmouseenter="enter('1008493374584433440');" onmouseout="out('1008493374584433440');" style=""> 857                         getDeviceSupport().evaluateGBDeviceEvent(findPhoneEvent);                        </span>
<span class="7519888082405137596" onmouseenter="enter('7519888082405137596');" onmouseout="out('7519888082405137596');" style=""> 858                         responseObject                                                                   </span>
<span class="9073084076350179656" onmouseenter="enter('9073084076350179656');" onmouseout="out('9073084076350179656');" style=""> 859                                 .getJSONObject(&quot;res&quot;)                                                    </span>
<span class="8250331190708228233" onmouseenter="enter('8250331190708228233');" onmouseout="out('8250331190708228233');" style=""> 860                                 .getJSONObject(&quot;set&quot;)                                                    </span>
<span class="-5085635855523546299" onmouseenter="enter('-5085635855523546299');" onmouseout="out('-5085635855523546299');" style=""> 861                                 .getJSONObject(&quot;ringMyPhone&quot;)                                            </span>
<span class="211329696159530084" onmouseenter="enter('211329696159530084');" onmouseout="out('211329696159530084');" style=""> 862                                 .put(&quot;result&quot;, &quot;off&quot;);                                                   </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 863                         queueWrite(new JsonPutRequest(responseObject, this));                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 864                     }                                                                                    </span>
<span class="-7323615196530492579" onmouseenter="enter('-7323615196530492579');" onmouseout="out('-7323615196530492579');" style=""> 865                 } else if (request.has(&quot;weatherInfo&quot;) || request.has(&quot;weatherApp._.config.locations&quot;)) { </span>
<span class="85506892621979159" onmouseenter="enter('85506892621979159');" onmouseout="out('85506892621979159');" style=""> 866                     logger.info(&quot;Got weatherInfo request&quot;);                                              </span>
<span class="6306353349066792310" onmouseenter="enter('6306353349066792310');" onmouseout="out('6306353349066792310');" style=""> 867                     WeatherSpec weatherSpec = Weather.getInstance().getWeatherSpec();                    </span>
<span class="-6517897774017589507" onmouseenter="enter('-6517897774017589507');" onmouseout="out('-6517897774017589507');" style=""> 868                     if (weatherSpec != null) {                                                           </span>
<span class="850959570716159748" onmouseenter="enter('850959570716159748');" onmouseout="out('850959570716159748');" style=""> 869                         onSendWeather(weatherSpec);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 870                     } else {                                                                             </span>
<span class="-4814341531313102419" onmouseenter="enter('-4814341531313102419');" onmouseout="out('-4814341531313102419');" style=""> 871                         logger.info(&quot;no weather data available  - ignoring request&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 872                     }                                                                                    </span>
<span class="-3372250782701972691" onmouseenter="enter('-3372250782701972691');" onmouseout="out('-3372250782701972691');" style=""> 873                 } else if (request.has(&quot;commuteApp._.config.commute_info&quot;)) {                            </span>
<span class="-7484039887953392259" onmouseenter="enter('-7484039887953392259');" onmouseout="out('-7484039887953392259');" style=""> 874                     String action = request.getJSONObject(&quot;commuteApp._.config.commute_info&quot;)            </span>
<span class="-2601365183494494605" onmouseenter="enter('-2601365183494494605');" onmouseout="out('-2601365183494494605');" style=""> 875                             .getString(&quot;dest&quot;);                                                          </span>
<span  style=""> 876                                                                                                          </span>
<span class="8677829822000511176" onmouseenter="enter('8677829822000511176');" onmouseout="out('8677829822000511176');" style=""> 877                     String startStop = request.getJSONObject(&quot;commuteApp._.config.commute_info&quot;)         </span>
<span class="4504014461373376475" onmouseenter="enter('4504014461373376475');" onmouseout="out('4504014461373376475');" style=""> 878                             .getString(&quot;action&quot;);                                                        </span>
<span  style=""> 879                                                                                                          </span>
<span class="-187304836507611230" onmouseenter="enter('-187304836507611230');" onmouseout="out('-187304836507611230');" style=""> 880                     if (startStop.equals(&quot;stop&quot;)) {                                                      </span>
<span class="3122353555208900571" onmouseenter="enter('3122353555208900571');" onmouseout="out('3122353555208900571');" style=""> 881                         // overwriteButtons(null);                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 882                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 883                     }                                                                                    </span>
<span  style=""> 884                                                                                                          </span>
<span class="1150832081372187083" onmouseenter="enter('1150832081372187083');" onmouseout="out('1150832081372187083');" style=""> 885                     queueWrite(new SetCommuteMenuMessage(&quot;Anfrage wird weitergeleitet...&quot;, false, this));</span>
<span  style=""> 886                                                                                                          </span>
<span class="5917993708031460775" onmouseenter="enter('5917993708031460775');" onmouseout="out('5917993708031460775');" style=""> 887                     Intent menuIntent = new Intent(QHybridSupport.QHYBRID_EVENT_COMMUTE_MENU);           </span>
<span class="-7593836382272947716" onmouseenter="enter('-7593836382272947716');" onmouseout="out('-7593836382272947716');" style=""> 888                     menuIntent.putExtra(&quot;EXTRA_ACTION&quot;, action);                                         </span>
<span class="-3894772479235782461" onmouseenter="enter('-3894772479235782461');" onmouseout="out('-3894772479235782461');" style=""> 889                     getContext().sendBroadcast(menuIntent);                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 890                 } else {                                                                                 </span>
<span class="5137598666970820784" onmouseenter="enter('5137598666970820784');" onmouseout="out('5137598666970820784');" style=""> 891                     logger.warn(&quot;Unhandled request from watch: &quot; + requestJson.toString());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 892                 }                                                                                        </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 893             } catch (JSONException e) {                                                                  </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 894                 e.printStackTrace();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 895             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 896         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 897     }                                                                                                    </span>
<span  style=""> 898                                                                                                          </span>
<span class="-6400233286061743273" onmouseenter="enter('-6400233286061743273');" onmouseout="out('-6400233286061743273');" style=""> 899     private void handleCallRequest(byte[] value) {                                                       </span>
<span class="-3590644139230548939" onmouseenter="enter('-3590644139230548939');" onmouseout="out('-3590644139230548939');" style=""> 900         boolean acceptCall = value[7] == (byte) 0x00;                                                    </span>
<span class="4049879043820680121" onmouseenter="enter('4049879043820680121');" onmouseout="out('4049879043820680121');" style=""> 901         queueWrite(new PlayCallNotificationRequest(&quot;&quot;, false, this));                                    </span>
<span  style=""> 902                                                                                                          </span>
<span class="6665458041909146094" onmouseenter="enter('6665458041909146094');" onmouseout="out('6665458041909146094');" style=""> 903         GBDeviceEventCallControl callControlEvent = new GBDeviceEventCallControl();                      </span>
<span class="3689026460844638555" onmouseenter="enter('3689026460844638555');" onmouseout="out('3689026460844638555');" style=""><abbr title=" 904         callControlEvent.event = acceptCall ? GBDeviceEventCallControl.Event.START : GBDeviceEventCallControl.Event.REJECT;"> 904         callControlEvent.event = acceptCall ? GBDeviceEventCallControl.Event.START : GBDeviceEventCallConðŸ”µ</abbr></span>
<span  style=""> 905                                                                                                          </span>
<span class="4738702385903726677" onmouseenter="enter('4738702385903726677');" onmouseout="out('4738702385903726677');" style=""> 906         getDeviceSupport().evaluateGBDeviceEvent(callControlEvent);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 907     }                                                                                                    </span>
<span  style=""> 908                                                                                                          </span>
<span class="8416553974703547913" onmouseenter="enter('8416553974703547913');" onmouseout="out('8416553974703547913');" style=""> 909     private void handleMusicRequest(byte[] value) {                                                      </span>
<span class="-7264442020313207444" onmouseenter="enter('-7264442020313207444');" onmouseout="out('-7264442020313207444');" style=""> 910         byte command = value[3];                                                                         </span>
<span class="439297978283151496" onmouseenter="enter('439297978283151496');" onmouseout="out('439297978283151496');" style=""> 911         logger.info(&quot;got music command: &quot; + command);                                                    </span>
<span class="-1813511864680047347" onmouseenter="enter('-1813511864680047347');" onmouseout="out('-1813511864680047347');" style=""> 912         MUSIC_WATCH_REQUEST request = MUSIC_WATCH_REQUEST.fromCommandByte(command);                      </span>
<span  style=""> 913                                                                                                          </span>
<span class="-5683743334008418698" onmouseenter="enter('-5683743334008418698');" onmouseout="out('-5683743334008418698');" style=""> 914         GBDeviceEventMusicControl deviceEventMusicControl = new GBDeviceEventMusicControl();             </span>
<span class="-3093471053493654809" onmouseenter="enter('-3093471053493654809');" onmouseout="out('-3093471053493654809');" style=""> 915         deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.PLAY;                            </span>
<span  style=""> 916                                                                                                          </span>
<span class="-5367969794814104253" onmouseenter="enter('-5367969794814104253');" onmouseout="out('-5367969794814104253');" style=""> 917         // TODO add skipping/seeking                                                                     </span>
<span  style=""> 918                                                                                                          </span>
<span class="-1476594108120808605" onmouseenter="enter('-1476594108120808605');" onmouseout="out('-1476594108120808605');" style=""> 919         switch (request) {                                                                               </span>
<span class="-7604808754482491529" onmouseenter="enter('-7604808754482491529');" onmouseout="out('-7604808754482491529');" style=""> 920             case MUSIC_REQUEST_PLAY_PAUSE: {                                                             </span>
<span class="6628176114625634916" onmouseenter="enter('6628176114625634916');" onmouseout="out('6628176114625634916');" style=""> 921                 queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_PLAY_PAUSE));       </span>
<span class="-7292571951332838856" onmouseenter="enter('-7292571951332838856');" onmouseout="out('-7292571951332838856');" style=""> 922                 deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.PLAYPAUSE;               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 923                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 924             }                                                                                            </span>
<span class="-3513943256990950658" onmouseenter="enter('-3513943256990950658');" onmouseout="out('-3513943256990950658');" style=""> 925             case MUSIC_REQUEST_NEXT: {                                                                   </span>
<span class="-2914236159900871664" onmouseenter="enter('-2914236159900871664');" onmouseout="out('-2914236159900871664');" style=""> 926                 queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_NEXT));             </span>
<span class="7432071170862747108" onmouseenter="enter('7432071170862747108');" onmouseout="out('7432071170862747108');" style=""> 927                 deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.NEXT;                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 928                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 929             }                                                                                            </span>
<span class="-320503160388671458" onmouseenter="enter('-320503160388671458');" onmouseout="out('-320503160388671458');" style=""> 930             case MUSIC_REQUEST_PREVIOUS: {                                                               </span>
<span class="6742500320012674264" onmouseenter="enter('6742500320012674264');" onmouseout="out('6742500320012674264');" style=""> 931                 queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_PREVIOUS));         </span>
<span class="-101590717290727599" onmouseenter="enter('-101590717290727599');" onmouseout="out('-101590717290727599');" style=""> 932                 deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.PREVIOUS;                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 933                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 934             }                                                                                            </span>
<span class="5859425638057110790" onmouseenter="enter('5859425638057110790');" onmouseout="out('5859425638057110790');" style=""> 935             case MUSIC_REQUEST_LOUDER: {                                                                 </span>
<span class="-3857602001706076214" onmouseenter="enter('-3857602001706076214');" onmouseout="out('-3857602001706076214');" style=""> 936                 queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_LOUDER));           </span>
<span class="-6752597915337654134" onmouseenter="enter('-6752597915337654134');" onmouseout="out('-6752597915337654134');" style=""> 937                 deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.VOLUMEUP;                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 938                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 939             }                                                                                            </span>
<span class="3750638360823897863" onmouseenter="enter('3750638360823897863');" onmouseout="out('3750638360823897863');" style=""> 940             case MUSIC_REQUEST_QUITER: {                                                                 </span>
<span class="2129420423363786169" onmouseenter="enter('2129420423363786169');" onmouseout="out('2129420423363786169');" style=""> 941                 queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_QUITER));           </span>
<span class="-9110787157641698322" onmouseenter="enter('-9110787157641698322');" onmouseout="out('-9110787157641698322');" style=""> 942                 deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.VOLUMEDOWN;              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 943                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 944             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 945         }                                                                                                </span>
<span  style=""> 946                                                                                                          </span>
<span class="-3574719939637901034" onmouseenter="enter('-3574719939637901034');" onmouseout="out('-3574719939637901034');" style=""> 947         getDeviceSupport().evaluateGBDeviceEvent(deviceEventMusicControl);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 948     }                                                                                                    </span>
<span  style=""> 949                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 950     @Override                                                                                            </span>
<span class="-3634467212876653578" onmouseenter="enter('-3634467212876653578');" onmouseout="out('-3634467212876653578');" style=""> 951     public void setCommuteMenuMessage(String message, boolean finished) {                                </span>
<span class="-2545716908437572756" onmouseenter="enter('-2545716908437572756');" onmouseout="out('-2545716908437572756');" style=""> 952         queueWrite(new SetCommuteMenuMessage(message, finished, this));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 953     }                                                                                                    </span>
<span  style=""> 954                                                                                                          </span>
<span class="-8749192936898481998" onmouseenter="enter('-8749192936898481998');" onmouseout="out('-8749192936898481998');" style=""> 955     public byte getJsonIndex() {                                                                         </span>
<span class="-7259315456684755672" onmouseenter="enter('-7259315456684755672');" onmouseout="out('-7259315456684755672');" style=""> 956         return jsonIndex++;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 957     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 958 }                                                                                                        </span></pre></td>
                            <td><pre><span class="-2997913422227863975" onmouseenter="enter('-2997913422227863975');" onmouseout="out('-2997913422227863975');" style="">   1 package nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.adapter.fossil_hr;                  </span>
<span  style="">   2                                                                                                          </span>
<span class="4736969144974683041" onmouseenter="enter('4736969144974683041');" onmouseout="out('4736969144974683041');" style="">   3 import android.bluetooth.BluetoothGattCharacteristic;                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   4 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   5 import android.content.Intent;                                                                           </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   6 import android.content.SharedPreferences;                                                                </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">   7 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">   8 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">   9 import android.graphics.Canvas;                                                                          </span>
<span class="-5868658801447575011" onmouseenter="enter('-5868658801447575011');" onmouseout="out('-5868658801447575011');" style="">  10 import android.graphics.Color;                                                                           </span>
<span class="-1586527322890291073" onmouseenter="enter('-1586527322890291073');" onmouseout="out('-1586527322890291073');" style="">  11 import android.graphics.Paint;                                                                           </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  12 import android.os.Build;                                                                                 </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  13 import android.widget.Toast;                                                                             </span>
<span  style="">  14                                                                                                          </span>
<span class="-9193129351684262878" onmouseenter="enter('-9193129351684262878');" onmouseout="out('-9193129351684262878');" style="">  15 import org.json.JSONArray;                                                                               </span>
<span class="-8573375701834280359" onmouseenter="enter('-8573375701834280359');" onmouseout="out('-8573375701834280359');" style="">  16 import org.json.JSONException;                                                                           </span>
<span class="7232075261178918144" onmouseenter="enter('7232075261178918144');" onmouseout="out('7232075261178918144');" style="">  17 import org.json.JSONObject;                                                                              </span>
<span  style="">  18                                                                                                          </span>
<span class="-3926401431737521278" onmouseenter="enter('-3926401431737521278');" onmouseout="out('-3926401431737521278');" style="">  19 import java.io.File;                                                                                     </span>
<span class="-535075201057145249" onmouseenter="enter('-535075201057145249');" onmouseout="out('-535075201057145249');" style="">  20 import java.io.FileInputStream;                                                                          </span>
<span class="-75475733228177869" onmouseenter="enter('-75475733228177869');" onmouseout="out('-75475733228177869');" style="">  21 import java.io.FileNotFoundException;                                                                    </span>
<span class="4915709264156936957" onmouseenter="enter('4915709264156936957');" onmouseout="out('4915709264156936957');" style="">  22 import java.io.FileOutputStream;                                                                         </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  23 import java.io.IOException;                                                                              </span>
<span class="-351121020327003485" onmouseenter="enter('-351121020327003485');" onmouseout="out('-351121020327003485');" style="">  24 import java.nio.BufferOverflowException;                                                                 </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  25 import java.util.ArrayList;                                                                              </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  26 import java.util.Calendar;                                                                               </span>
<span class="-4685965902094386510" onmouseenter="enter('-4685965902094386510');" onmouseout="out('-4685965902094386510');" style="">  27 import java.util.GregorianCalendar;                                                                      </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  28 import java.util.HashMap;                                                                                </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  29 import java.util.Iterator;                                                                               </span>
<span class="-3682115440535733483" onmouseenter="enter('-3682115440535733483');" onmouseout="out('-3682115440535733483');" style="">  30 import java.util.TimeZone;                                                                               </span>
<span class="2390503830490498598" onmouseenter="enter('2390503830490498598');" onmouseout="out('2390503830490498598');" style="">  31 import java.util.UUID;                                                                                   </span>
<span  style="">  32                                                                                                          </span>
<span class="-8113221927992302576" onmouseenter="enter('-8113221927992302576');" onmouseout="out('-8113221927992302576');" style="">  33 import nodomain.freeyourgadget.gadgetbridge.GBApplication;                                               </span>
<span class="-7265768043057292499" onmouseenter="enter('-7265768043057292499');" onmouseout="out('-7265768043057292499');" style="">  34 import nodomain.freeyourgadget.gadgetbridge.activities.GBActivity;                                       </span>
<span class="-141107564105590930" onmouseenter="enter('-141107564105590930');" onmouseout="out('-141107564105590930');" style="">  35 import nodomain.freeyourgadget.gadgetbridge.activities.devicesettings.DeviceSettingsPreferenceConst;     </span>
<span class="7017557905176594961" onmouseenter="enter('7017557905176594961');" onmouseout="out('7017557905176594961');" style="">  36 import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventCallControl;                       </span>
<span class="6368471362458763033" onmouseenter="enter('6368471362458763033');" onmouseout="out('6368471362458763033');" style="">  37 import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventFindPhone;                         </span>
<span class="4012861689788039008" onmouseenter="enter('4012861689788039008');" onmouseout="out('4012861689788039008');" style="">  38 import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventMusicControl;                      </span>
<span class="3654131406467691963" onmouseenter="enter('3654131406467691963');" onmouseout="out('3654131406467691963');" style="">  39 import nodomain.freeyourgadget.gadgetbridge.devices.qhybrid.HRConfigActivity;                            </span>
<span class="-7487037549552160195" onmouseenter="enter('-7487037549552160195');" onmouseout="out('-7487037549552160195');" style="">  40 import nodomain.freeyourgadget.gadgetbridge.devices.qhybrid.NotificationHRConfiguration;                 </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  41 import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                               </span>
<span class="-9074570965792323186" onmouseenter="enter('-9074570965792323186');" onmouseout="out('-9074570965792323186');" style="">  42 import nodomain.freeyourgadget.gadgetbridge.model.CallSpec;                                              </span>
<span class="-4068239021838445503" onmouseenter="enter('-4068239021838445503');" onmouseout="out('-4068239021838445503');" style="">  43 import nodomain.freeyourgadget.gadgetbridge.model.MusicSpec;                                             </span>
<span class="7536481506851862405" onmouseenter="enter('7536481506851862405');" onmouseout="out('7536481506851862405');" style="">  44 import nodomain.freeyourgadget.gadgetbridge.model.MusicStateSpec;                                        </span>
<span class="8239808916005009388" onmouseenter="enter('8239808916005009388');" onmouseout="out('8239808916005009388');" style="">  45 import nodomain.freeyourgadget.gadgetbridge.model.NotificationSpec;                                      </span>
<span class="-1384004108526222390" onmouseenter="enter('-1384004108526222390');" onmouseout="out('-1384004108526222390');" style="">  46 import nodomain.freeyourgadget.gadgetbridge.model.Weather;                                               </span>
<span class="-40839721936664146" onmouseenter="enter('-40839721936664146');" onmouseout="out('-40839721936664146');" style="">  47 import nodomain.freeyourgadget.gadgetbridge.model.WeatherSpec;                                           </span>
<span class="3410519392510510669" onmouseenter="enter('3410519392510510669');" onmouseout="out('3410519392510510669');" style="">  48 import nodomain.freeyourgadget.gadgetbridge.service.btle.TransactionBuilder;                             </span>
<span class="4332661620965164672" onmouseenter="enter('4332661620965164672');" onmouseout="out('4332661620965164672');" style="">  49 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.QHybridSupport;                      </span>
<span class="4386715749828831010" onmouseenter="enter('4386715749828831010');" onmouseout="out('4386715749828831010');" style="">  50 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.adapter.fossil.FossilWatchAdapter;   </span>
<span class="6910520238976776146" onmouseenter="enter('6910520238976776146');" onmouseout="out('6910520238976776146');" style="">  51 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.RequestMtuRequest;   </span>
<span class="5089968700906553867" onmouseenter="enter('5089968700906553867');" onmouseout="out('5089968700906553867');" style=""><abbr title="  52 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.SetDeviceStateRequest;">  52 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.SetDeviceStateRequestðŸ”µ</abbr></span>
<span class="6112441966638764283" onmouseenter="enter('6112441966638764283');" onmouseout="out('6112441966638764283');" style=""><abbr title="  53 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.configuration.ConfigurationPutRequest.TimeConfigItem;">  53 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.configuration.ConfiguðŸ”µ</abbr></span>
<span class="7471646323585627177" onmouseenter="enter('7471646323585627177');" onmouseout="out('7471646323585627177');" style=""><abbr title="  54 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayCallNotificationRequest;">  54 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayCallðŸ”µ</abbr></span>
<span class="-6858926904400925756" onmouseenter="enter('-6858926904400925756');" onmouseout="out('-6858926904400925756');" style=""><abbr title="  55 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayTextNotificationRequest;">  55 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayTextðŸ”µ</abbr></span>
<span class="-7335239105811257712" onmouseenter="enter('-7335239105811257712');" onmouseout="out('-7335239105811257712');" style=""><abbr title="  56 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.authentication.VerifyPrivateKeyRequest;">  56 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.authentication.VerðŸ”µ</abbr></span>
<span class="-8586181035863106404" onmouseenter="enter('-8586181035863106404');" onmouseout="out('-8586181035863106404');" style=""><abbr title="  57 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.buttons.ButtonConfigurationPutRequest;">  57 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.buttons.ButtonConfðŸ”µ</abbr></span>
<span class="-7616394483813386160" onmouseenter="enter('-7616394483813386160');" onmouseout="out('-7616394483813386160');" style=""><abbr title="  58 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfigurationGetRequest;">  58 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfðŸ”µ</abbr></span>
<span class="1784930373847085070" onmouseenter="enter('1784930373847085070');" onmouseout="out('1784930373847085070');" style=""><abbr title="  59 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfigurationPutRequest;">  59 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfðŸ”µ</abbr></span>
<span class="-7479827832081411210" onmouseenter="enter('-7479827832081411210');" onmouseout="out('-7479827832081411210');" style=""><abbr title="  60 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.file.AssetFilePutRequest;">  60 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.file.AssetFilePutRðŸ”µ</abbr></span>
<span class="6886533222315535550" onmouseenter="enter('6886533222315535550');" onmouseout="out('6886533222315535550');" style="">  61 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.AssetImage; </span>
<span class="4714390797546975821" onmouseenter="enter('4714390797546975821');" onmouseout="out('4714390797546975821');" style=""><abbr title="  62 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.AssetImageFactory;">  62 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.AssetImageFaðŸ”µ</abbr></span>
<span class="-6584136629945154367" onmouseenter="enter('-6584136629945154367');" onmouseout="out('-6584136629945154367');" style=""><abbr title="  63 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.ImagesSetRequest;">  63 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.ImagesSetReqðŸ”µ</abbr></span>
<span class="4407251461002993468" onmouseenter="enter('4407251461002993468');" onmouseout="out('4407251461002993468');" style=""><abbr title="  64 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.json.JsonPutRequest;">  64 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.json.JsonPutRequesðŸ”µ</abbr></span>
<span class="-3572348114301784964" onmouseenter="enter('-3572348114301784964');" onmouseout="out('-3572348114301784964');" style=""><abbr title="  65 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.menu.SetCommuteMenuMessage;">  65 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.menu.SetCommuteMenðŸ”µ</abbr></span>
<span class="7919188738795660329" onmouseenter="enter('7919188738795660329');" onmouseout="out('7919188738795660329');" style=""><abbr title="  66 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlRequest;">  66 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlðŸ”µ</abbr></span>
<span class="1138328726217316685" onmouseenter="enter('1138328726217316685');" onmouseout="out('1138328726217316685');" style=""><abbr title="  67 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicInfoSetRequest;">  67 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicInfoSetðŸ”µ</abbr></span>
<span class="-6007419784157735296" onmouseenter="enter('-6007419784157735296');" onmouseout="out('-6007419784157735296');" style=""><abbr title="  68 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.notification.NotificationFilterPutHRRequest;">  68 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.notification.NotifðŸ”µ</abbr></span>
<span class="2272282218964023705" onmouseenter="enter('2272282218964023705');" onmouseout="out('2272282218964023705');" style=""><abbr title="  69 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomBackgroundWidgetElement;">  69 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomBackgðŸ”µ</abbr></span>
<span class="-6693404726045535805" onmouseenter="enter('-6693404726045535805');" onmouseout="out('-6693404726045535805');" style=""><abbr title="  70 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomTextWidgetElement;">  70 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomTextWðŸ”µ</abbr></span>
<span class="6618883795787964297" onmouseenter="enter('6618883795787964297');" onmouseout="out('6618883795787964297');" style=""><abbr title="  71 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomWidget;">  71 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomWidgeðŸ”µ</abbr></span>
<span class="2778086687948821087" onmouseenter="enter('2778086687948821087');" onmouseout="out('2778086687948821087');" style=""><abbr title="  72 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomWidgetElement;">  72 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomWidgeðŸ”µ</abbr></span>
<span class="-5838235376860565233" onmouseenter="enter('-5838235376860565233');" onmouseout="out('-5838235376860565233');" style="">  73 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.Widget;    </span>
<span class="-8988880482945476231" onmouseenter="enter('-8988880482945476231');" onmouseout="out('-8988880482945476231');" style=""><abbr title="  74 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.WidgetsPutRequest;">  74 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.WidgetsPutRðŸ”µ</abbr></span>
<span class="-3798970344596478499" onmouseenter="enter('-3798970344596478499');" onmouseout="out('-3798970344596478499');" style="">  75 import nodomain.freeyourgadget.gadgetbridge.util.GB;                                                     </span>
<span class="-600862318521663319" onmouseenter="enter('-600862318521663319');" onmouseout="out('-600862318521663319');" style="">  76 import nodomain.freeyourgadget.gadgetbridge.util.Prefs;                                                  </span>
<span class="1710555602396666834" onmouseenter="enter('1710555602396666834');" onmouseout="out('1710555602396666834');" style="">  77 import nodomain.freeyourgadget.gadgetbridge.util.StringUtils;                                            </span>
<span  style="">  78                                                                                                          </span>
<span class="-6920508692158968227" onmouseenter="enter('-6920508692158968227');" onmouseout="out('-6920508692158968227');" style=""><abbr title="  79 import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlRequest.MUSIC_PHONE_REQUEST;">  79 import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicðŸ”µ</abbr></span>
<span class="1244615468169562272" onmouseenter="enter('1244615468169562272');" onmouseout="out('1244615468169562272');" style=""><abbr title="  80 import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlRequest.MUSIC_WATCH_REQUEST;">  80 import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicðŸ”µ</abbr></span>
<span  style="">  81                                                                                                          </span>
<span class="3592572912775199945" onmouseenter="enter('3592572912775199945');" onmouseout="out('3592572912775199945');" style="">  82 public class FossilHRWatchAdapter extends FossilWatchAdapter {                                           </span>
<span class="5088344414276172788" onmouseenter="enter('5088344414276172788');" onmouseout="out('5088344414276172788');" style="">  83     private byte[] phoneRandomNumber;                                                                    </span>
<span class="-506162566914247320" onmouseenter="enter('-506162566914247320');" onmouseout="out('-506162566914247320');" style="">  84     private byte[] watchRandomNumber;                                                                    </span>
<span  style="">  85                                                                                                          </span>
<span class="7640912025063028053" onmouseenter="enter('7640912025063028053');" onmouseout="out('7640912025063028053');" style="">  86     private ArrayList&lt;Widget&gt; widgets = new ArrayList&lt;&gt;();                                               </span>
<span  style="">  87                                                                                                          </span>
<span class="-2578264008762844907" onmouseenter="enter('-2578264008762844907');" onmouseout="out('-2578264008762844907');" style="">  88     private NotificationHRConfiguration[] notificationConfigurations;                                    </span>
<span  style="">  89                                                                                                          </span>
<span class="2535750949384339971" onmouseenter="enter('2535750949384339971');" onmouseout="out('2535750949384339971');" style="">  90     private MusicSpec currentSpec = null;                                                                </span>
<span  style="">  91                                                                                                          </span>
<span class="-6092139116600387375" onmouseenter="enter('-6092139116600387375');" onmouseout="out('-6092139116600387375');" style="">  92     int imageNameIndex = 0;                                                                              </span>
<span class="-1794288330955340230" onmouseenter="enter('-1794288330955340230');" onmouseout="out('-1794288330955340230');" style="">  93     private byte jsonIndex = 0;                                                                          </span>
<span  style="">  94                                                                                                          </span>
<span class="-4156328390524362965" onmouseenter="enter('-4156328390524362965');" onmouseout="out('-4156328390524362965');" style="">  95     private AssetImage backGroundImage = null;                                                           </span>
<span  style="">  96                                                                                                          </span>
<span class="-5170367685934262595" onmouseenter="enter('-5170367685934262595');" onmouseout="out('-5170367685934262595');" style="">  97     public FossilHRWatchAdapter(QHybridSupport deviceSupport) {                                          </span>
<span class="7895217862057392900" onmouseenter="enter('7895217862057392900');" onmouseout="out('7895217862057392900');" style="">  98         super(deviceSupport);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99     }                                                                                                    </span>
<span  style=""> 100                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 101     @Override                                                                                            </span>
<span class="6973867701261680867" onmouseenter="enter('6973867701261680867');" onmouseout="out('6973867701261680867');" style=""> 102     public void initialize() {                                                                           </span>
<span class="-6207208930684914824" onmouseenter="enter('-6207208930684914824');" onmouseout="out('-6207208930684914824');" style=""> 103         if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {                                     </span>
<span class="-3436726469441820604" onmouseenter="enter('-3436726469441820604');" onmouseout="out('-3436726469441820604');" style=""> 104             queueWrite(new RequestMtuRequest(512));                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105         }                                                                                                </span>
<span  style=""> 106                                                                                                          </span>
<span class="2214751643672186972" onmouseenter="enter('2214751643672186972');" onmouseout="out('2214751643672186972');" style=""> 107         queueWrite(new SetDeviceStateRequest(GBDevice.State.AUTHENTICATING));                            </span>
<span  style=""> 108                                                                                                          </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 109         negotiateSymmetricKey();                                                                         </span>
<span  style=""> 110                                                                                                          </span>
<span class="7150849353095805702" onmouseenter="enter('7150849353095805702');" onmouseout="out('7150849353095805702');" style=""> 111         queueWrite(new SetDeviceStateRequest(GBDevice.State.INITIALIZING));                              </span>
<span  style=""> 112                                                                                                          </span>
<span class="-4417803371223487901" onmouseenter="enter('-4417803371223487901');" onmouseout="out('-4417803371223487901');" style=""> 113         loadNotificationConfigurations();                                                                </span>
<span class="-45277995236735037" onmouseenter="enter('-45277995236735037');" onmouseout="out('-45277995236735037');" style=""> 114         queueWrite(new NotificationFilterPutHRRequest(this.notificationConfigurations, this));           </span>
<span class="-4331994456315640395" onmouseenter="enter('-4331994456315640395');" onmouseout="out('-4331994456315640395');" style=""> 115         setVibrationStrength();                                                                          </span>
<span  style=""> 116                                                                                                          </span>
<span class="-9031387911705611686" onmouseenter="enter('-9031387911705611686');" onmouseout="out('-9031387911705611686');" style=""> 117         syncSettings();                                                                                  </span>
<span  style=""> 118                                                                                                          </span>
<span class="7548848230134815961" onmouseenter="enter('7548848230134815961');" onmouseout="out('7548848230134815961');" style=""> 119         setTime();                                                                                       </span>
<span  style=""> 120                                                                                                          </span>
<span class="-7476048809216327685" onmouseenter="enter('-7476048809216327685');" onmouseout="out('-7476048809216327685');" style=""> 121         overwriteButtons(null);                                                                          </span>
<span  style=""> 122                                                                                                          </span>
<span  style=""> 123                                                                                                          </span>
<span class="1285717461947698949" onmouseenter="enter('1285717461947698949');" onmouseout="out('1285717461947698949');" style=""> 124         loadBackground();                                                                                </span>
<span class="-8671838943786981246" onmouseenter="enter('-8671838943786981246');" onmouseout="out('-8671838943786981246');" style=""> 125         loadWidgets();                                                                                   </span>
<span class="8810184639176192527" onmouseenter="enter('8810184639176192527');" onmouseout="out('8810184639176192527');" style=""> 126         // renderWidgets();                                                                              </span>
<span class="7961004691166238388" onmouseenter="enter('7961004691166238388');" onmouseout="out('7961004691166238388');" style=""><abbr title=" 127         // dunno if there is any point in doing this at start since when no watch is connected the QHybridSupport will not receive any intents anyway"> 127         // dunno if there is any point in doing this at start since when no watch is connected the QHybriðŸ”µ</abbr></span>
<span  style=""> 128                                                                                                          </span>
<span class="-673558019044966288" onmouseenter="enter('-673558019044966288');" onmouseout="out('-673558019044966288');" style=""> 129         queueWrite(new SetDeviceStateRequest(GBDevice.State.INITIALIZED));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130     }                                                                                                    </span>
<span  style=""> 131                                                                                                          </span>
<span class="2678698660370291293" onmouseenter="enter('2678698660370291293');" onmouseout="out('2678698660370291293');" style=""> 132     private void setVibrationStrength() {                                                                </span>
<span class="583153348914013546" onmouseenter="enter('583153348914013546');" onmouseout="out('583153348914013546');" style=""> 133         Prefs prefs = new Prefs(getDeviceSpecificPreferences());                                         </span>
<span class="3731955474946957698" onmouseenter="enter('3731955474946957698');" onmouseout="out('3731955474946957698');" style=""><abbr title=" 134         int vibrationStrengh = prefs.getInt(DeviceSettingsPreferenceConst.PREF_VIBRATION_STRENGH_PERCENTAGE, 2);"> 134         int vibrationStrengh = prefs.getInt(DeviceSettingsPreferenceConst.PREF_VIBRATION_STRENGH_PERCENTAðŸ”µ</abbr></span>
<span class="-1867169202627257001" onmouseenter="enter('-1867169202627257001');" onmouseout="out('-1867169202627257001');" style=""> 135         if (vibrationStrengh &gt; 0) {                                                                      </span>
<span class="2644384104178590300" onmouseenter="enter('2644384104178590300');" onmouseout="out('2644384104178590300');" style=""> 136             vibrationStrengh = (vibrationStrengh + 1) * 25; // Seems 0,50,75,100 are working...          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137         }                                                                                                </span>
<span class="6672289413916591004" onmouseenter="enter('6672289413916591004');" onmouseout="out('6672289413916591004');" style=""> 138         setVibrationStrength((short) (vibrationStrengh));                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139     }                                                                                                    </span>
<span  style=""> 140                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 141     @Override                                                                                            </span>
<span class="1506969207519742362" onmouseenter="enter('1506969207519742362');" onmouseout="out('1506969207519742362');" style=""> 142     public void setVibrationStrength(short strength) {                                                   </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 143         negotiateSymmetricKey();                                                                         </span>
<span class="-4629474970994412283" onmouseenter="enter('-4629474970994412283');" onmouseout="out('-4629474970994412283');" style=""><abbr title=" 144         queueWrite(new ConfigurationPutRequest(new nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.configuration.ConfigurationPutRequest.VibrationStrengthConfigItem((byte) strength), this));"> 144         queueWrite(new ConfigurationPutRequest(new nodomain.freeyourgadget.gadgetbridge.service.devices.qðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145     }                                                                                                    </span>
<span  style=""> 146                                                                                                          </span>
<span class="1303454475379501012" onmouseenter="enter('1303454475379501012');" onmouseout="out('1303454475379501012');" style=""> 147     private void loadNotificationConfigurations(){                                                       </span>
<span class="-6235602809275246814" onmouseenter="enter('-6235602809275246814');" onmouseout="out('-6235602809275246814');" style=""> 148         this.notificationConfigurations = new NotificationHRConfiguration[]{                             </span>
<span class="7544968341376302636" onmouseenter="enter('7544968341376302636');" onmouseout="out('7544968341376302636');" style=""> 149                 new NotificationHRConfiguration(&quot;generic&quot;, 0),                                           </span>
<span class="-4749339465775723964" onmouseenter="enter('-4749339465775723964');" onmouseout="out('-4749339465775723964');" style=""><abbr title=" 150                 new NotificationHRConfiguration(&quot;call&quot;, new byte[]{(byte)0x80, (byte) 0x00, (byte) 0x59, (byte) 0xB7}, 0)"> 150                 new NotificationHRConfiguration(&quot;call&quot;, new byte[]{(byte)0x80, (byte) 0x00, (byte) 0x59, ðŸ”µ</abbr></span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 151         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 152     }                                                                                                    </span>
<span  style=""> 153                                                                                                          </span>
<span class="-5868467879198664223" onmouseenter="enter('-5868467879198664223');" onmouseout="out('-5868467879198664223');" style=""> 154     private File getBackgroundFile(){                                                                    </span>
<span class="5017199467844905364" onmouseenter="enter('5017199467844905364');" onmouseout="out('5017199467844905364');" style=""> 155         return new File(getContext().getExternalFilesDir(null), &quot;hr_background.bin&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 156     }                                                                                                    </span>
<span  style=""> 157                                                                                                          </span>
<span class="2056476783265891076" onmouseenter="enter('2056476783265891076');" onmouseout="out('2056476783265891076');" style=""> 158     private void loadBackground(){                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 159         try {                                                                                            </span>
<span class="3309811734082012592" onmouseenter="enter('3309811734082012592');" onmouseout="out('3309811734082012592');" style=""> 160             FileInputStream fis = new FileInputStream(getBackgroundFile());                              </span>
<span class="-8713501432928954369" onmouseenter="enter('-8713501432928954369');" onmouseout="out('-8713501432928954369');" style=""> 161             int count = fis.available();                                                                 </span>
<span class="2364866196500043323" onmouseenter="enter('2364866196500043323');" onmouseout="out('2364866196500043323');" style=""> 162             if(count != 14400){                                                                          </span>
<span class="6959480734525400649" onmouseenter="enter('6959480734525400649');" onmouseout="out('6959480734525400649');" style=""> 163                 throw new RuntimeException(&quot;wrong background file length&quot;);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 164             }                                                                                            </span>
<span class="6140245791534089823" onmouseenter="enter('6140245791534089823');" onmouseout="out('6140245791534089823');" style=""> 165             byte[] file = new byte[14400];                                                               </span>
<span class="-5391697857306213357" onmouseenter="enter('-5391697857306213357');" onmouseout="out('-5391697857306213357');" style=""> 166             fis.read(file);                                                                              </span>
<span class="847792512951278267" onmouseenter="enter('847792512951278267');" onmouseout="out('847792512951278267');" style=""> 167             fis.close();                                                                                 </span>
<span class="3514823294174383549" onmouseenter="enter('3514823294174383549');" onmouseout="out('3514823294174383549');" style=""> 168             this.backGroundImage = AssetImageFactory.createAssetImage(file, 0, 0, 0);                    </span>
<span class="400908373044587289" onmouseenter="enter('400908373044587289');" onmouseout="out('400908373044587289');" style=""> 169         } catch (FileNotFoundException e) {                                                              </span>
<span class="-5301954684616781966" onmouseenter="enter('-5301954684616781966');" onmouseout="out('-5301954684616781966');" style=""> 170             SharedPreferences preferences = getDeviceSpecificPreferences();                              </span>
<span class="-3378614681722876648" onmouseenter="enter('-3378614681722876648');" onmouseout="out('-3378614681722876648');" style=""> 171             if (preferences.getBoolean(&quot;force_white_color_scheme&quot;, false)) {                             </span>
<span class="-3418877583116429834" onmouseenter="enter('-3418877583116429834');" onmouseout="out('-3418877583116429834');" style=""> 172             Bitmap whiteBitmap = Bitmap.createBitmap(239, 239, Bitmap.Config.ARGB_8888);                 </span>
<span class="2380885980553220395" onmouseenter="enter('2380885980553220395');" onmouseout="out('2380885980553220395');" style=""> 173             new Canvas(whiteBitmap).drawColor(Color.WHITE);                                              </span>
<span  style=""> 174                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 175             try {                                                                                        </span>
<span class="1512735353479138147" onmouseenter="enter('1512735353479138147');" onmouseout="out('1512735353479138147');" style=""> 176                 this.backGroundImage = AssetImageFactory.createAssetImage(whiteBitmap, true, 0, 1, 0);   </span>
<span class="8494295836730416248" onmouseenter="enter('8494295836730416248');" onmouseout="out('8494295836730416248');" style=""> 177                     queueWrite(new AssetFilePutRequest(this.backGroundImage, (byte) 0x00, this));        </span>
<span class="8708702391695364841" onmouseenter="enter('8708702391695364841');" onmouseout="out('8708702391695364841');" style=""> 178                 } catch (IOException e2) {                                                               </span>
<span class="7907507332013532218" onmouseenter="enter('7907507332013532218');" onmouseout="out('7907507332013532218');" style=""> 179                     logger.error(&quot;Backgroundimage error&quot;, e2);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181         }                                                                                                </span>
<span class="-7675632770970923843" onmouseenter="enter('-7675632770970923843');" onmouseout="out('-7675632770970923843');" style=""> 182         } catch (IOException | RuntimeException e) {                                                     </span>
<span class="995952486198027790" onmouseenter="enter('995952486198027790');" onmouseout="out('995952486198027790');" style=""> 183             GB.log(&quot;error opening background file&quot;, GB.ERROR, e);                                        </span>
<span class="4357598448521854023" onmouseenter="enter('4357598448521854023');" onmouseout="out('4357598448521854023');" style=""> 184             GB.toast(&quot;error opening background file&quot;, Toast.LENGTH_LONG, GB.ERROR);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186     }                                                                                                    </span>
<span  style=""> 187                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 188     @Override                                                                                            </span>
<span class="-2142032910036758703" onmouseenter="enter('-2142032910036758703');" onmouseout="out('-2142032910036758703');" style=""> 189     public void setBackgroundImage(byte[] pixels) {                                                      </span>
<span class="5866108376506033812" onmouseenter="enter('5866108376506033812');" onmouseout="out('5866108376506033812');" style=""> 190         if(pixels == null){                                                                              </span>
<span class="-1287700881772654168" onmouseenter="enter('-1287700881772654168');" onmouseout="out('-1287700881772654168');" style=""> 191             getBackgroundFile().delete();                                                                </span>
<span class="-5827926495289856375" onmouseenter="enter('-5827926495289856375');" onmouseout="out('-5827926495289856375');" style=""> 192             this.backGroundImage = null;                                                                 </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style=""> 193         }else{                                                                                           </span>
<span class="-3590785795915305813" onmouseenter="enter('-3590785795915305813');" onmouseout="out('-3590785795915305813');" style=""> 194             this.backGroundImage = AssetImageFactory.createAssetImage(pixels, 0, 0, 0);                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 195             try {                                                                                        </span>
<span class="-1705375458919026059" onmouseenter="enter('-1705375458919026059');" onmouseout="out('-1705375458919026059');" style=""> 196                 FileOutputStream fos = new FileOutputStream(getBackgroundFile(), false);                 </span>
<span class="-358410701198294033" onmouseenter="enter('-358410701198294033');" onmouseout="out('-358410701198294033');" style=""> 197                 fos.write(pixels);                                                                       </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 198             } catch (IOException e) {                                                                    </span>
<span class="615895175007642974" onmouseenter="enter('615895175007642974');" onmouseout="out('615895175007642974');" style=""> 199                 GB.log(&quot;error saving background&quot;, GB.ERROR, e);                                          </span>
<span class="-5639824001846510052" onmouseenter="enter('-5639824001846510052');" onmouseout="out('-5639824001846510052');" style=""> 200                 GB.toast(&quot;error persistent saving background&quot;, Toast.LENGTH_LONG, GB.ERROR);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202         }                                                                                                </span>
<span class="-686042699702875094" onmouseenter="enter('-686042699702875094');" onmouseout="out('-686042699702875094');" style=""> 203         renderWidgets();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204     }                                                                                                    </span>
<span  style=""> 205                                                                                                          </span>
<span class="-3367927790602792525" onmouseenter="enter('-3367927790602792525');" onmouseout="out('-3367927790602792525');" style=""> 206     private void loadWidgets() {                                                                         </span>
<span class="-5253497129600185491" onmouseenter="enter('-5253497129600185491');" onmouseout="out('-5253497129600185491');" style=""><abbr title=" 207         Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddress()));"> 207         Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice()ðŸ”µ</abbr></span>
<span class="7432400165234073302" onmouseenter="enter('7432400165234073302');" onmouseout="out('7432400165234073302');" style=""> 208         boolean forceWhiteBackground = prefs.getBoolean(&quot;force_white_color_scheme&quot;, false);              </span>
<span class="-6285451443425028752" onmouseenter="enter('-6285451443425028752');" onmouseout="out('-6285451443425028752');" style=""> 209         String fontColor = forceWhiteBackground ? &quot;black&quot; : &quot;default&quot;;                                   </span>
<span  style=""> 210                                                                                                          </span>
<span class="-4620331257752093891" onmouseenter="enter('-4620331257752093891');" onmouseout="out('-4620331257752093891');" style=""> 211         this.widgets.clear();                                                                            </span>
<span class="-3336910807232744925" onmouseenter="enter('-3336910807232744925');" onmouseout="out('-3336910807232744925');" style=""><abbr title=" 212         String widgetJson = GBApplication.getPrefs().getPreferences().getString(&quot;FOSSIL_HR_WIDGETS&quot;, &quot;{}&quot;);"> 212         String widgetJson = GBApplication.getPrefs().getPreferences().getString(&quot;FOSSIL_HR_WIDGETS&quot;, &quot;{}&quot;ðŸ”µ</abbr></span>
<span class="4155798482965333136" onmouseenter="enter('4155798482965333136');" onmouseout="out('4155798482965333136');" style=""> 213         String customWidgetJson = GBApplication.getPrefs().getString(&quot;QHYBRID_CUSTOM_WIDGETS&quot;, &quot;[]&quot;);    </span>
<span  style=""> 214                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 215         try {                                                                                            </span>
<span class="-1451023518703013419" onmouseenter="enter('-1451023518703013419');" onmouseout="out('-1451023518703013419');" style=""> 216             JSONObject widgetConfig = new JSONObject(widgetJson);                                        </span>
<span class="-1475171196435240579" onmouseenter="enter('-1475171196435240579');" onmouseout="out('-1475171196435240579');" style=""> 217             JSONArray customWidgets = new JSONArray(customWidgetJson);                                   </span>
<span  style=""> 218                                                                                                          </span>
<span class="-2247029910180567010" onmouseenter="enter('-2247029910180567010');" onmouseout="out('-2247029910180567010');" style=""> 219             Iterator&lt;String&gt; keyIterator = widgetConfig.keys();                                          </span>
<span class="3005942427600422729" onmouseenter="enter('3005942427600422729');" onmouseout="out('3005942427600422729');" style=""> 220             HashMap&lt;String, Integer&gt; positionMap = new HashMap&lt;&gt;(4);                                     </span>
<span class="-4809379780136917034" onmouseenter="enter('-4809379780136917034');" onmouseout="out('-4809379780136917034');" style=""> 221             positionMap.put(&quot;top&quot;, 0);                                                                   </span>
<span class="3242470301011869998" onmouseenter="enter('3242470301011869998');" onmouseout="out('3242470301011869998');" style=""> 222             positionMap.put(&quot;right&quot;, 90);                                                                </span>
<span class="47603222909284588" onmouseenter="enter('47603222909284588');" onmouseout="out('47603222909284588');" style=""> 223             positionMap.put(&quot;bottom&quot;, 180);                                                              </span>
<span class="-7872157185013762906" onmouseenter="enter('-7872157185013762906');" onmouseout="out('-7872157185013762906');" style=""> 224             positionMap.put(&quot;left&quot;, 270);                                                                </span>
<span  style=""> 225                                                                                                          </span>
<span class="8605964287118037960" onmouseenter="enter('8605964287118037960');" onmouseout="out('8605964287118037960');" style=""> 226             while(keyIterator.hasNext()){                                                                </span>
<span class="2952369380408185535" onmouseenter="enter('2952369380408185535');" onmouseout="out('2952369380408185535');" style=""> 227                 String position = keyIterator.next();                                                    </span>
<span class="-4761670352334006129" onmouseenter="enter('-4761670352334006129');" onmouseout="out('-4761670352334006129');" style=""> 228                 String identifier = widgetConfig.getString(position);                                    </span>
<span class="-3371646214022229496" onmouseenter="enter('-3371646214022229496');" onmouseout="out('-3371646214022229496');" style=""> 229                 Widget.WidgetType type = Widget.WidgetType.fromJsonIdentifier(identifier);               </span>
<span  style=""> 230                                                                                                          </span>
<span class="4389075284580548581" onmouseenter="enter('4389075284580548581');" onmouseout="out('4389075284580548581');" style=""> 231                 Widget widget = null;                                                                    </span>
<span class="2866536352941526980" onmouseenter="enter('2866536352941526980');" onmouseout="out('2866536352941526980');" style=""> 232                 if(type != null) {                                                                       </span>
<span class="-7841183104811053833" onmouseenter="enter('-7841183104811053833');" onmouseout="out('-7841183104811053833');" style=""> 233                     widget = new Widget(type, positionMap.get(position), 63, fontColor);                 </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style=""> 234                 }else{                                                                                   </span>
<span class="-175697937656295673" onmouseenter="enter('-175697937656295673');" onmouseout="out('-175697937656295673');" style=""> 235                     identifier = identifier.substring(7);                                                </span>
<span class="-5386134246414871772" onmouseenter="enter('-5386134246414871772');" onmouseout="out('-5386134246414871772');" style=""> 236                     for(int i = 0; i &lt; customWidgets.length(); i++){                                     </span>
<span class="-4459010997644705661" onmouseenter="enter('-4459010997644705661');" onmouseout="out('-4459010997644705661');" style=""> 237                         JSONObject customWidget = customWidgets.getJSONObject(i);                        </span>
<span class="-3508428963545043924" onmouseenter="enter('-3508428963545043924');" onmouseout="out('-3508428963545043924');" style=""> 238                         if(customWidget.getString(&quot;name&quot;).equals(identifier)){                           </span>
<span class="-7054423990219086531" onmouseenter="enter('-7054423990219086531');" onmouseout="out('-7054423990219086531');" style=""> 239                             boolean drawCircle = false;                                                  </span>
<span class="4470534368972356610" onmouseenter="enter('4470534368972356610');" onmouseout="out('4470534368972356610');" style=""><abbr title=" 240                             if(customWidget.has(&quot;drawCircle&quot;)) drawCircle = customWidget.getBoolean(&quot;drawCircle&quot;);"> 240                             if(customWidget.has(&quot;drawCircle&quot;)) drawCircle = customWidget.getBoolean(&quot;drawðŸ”µ</abbr></span>
<span class="-8778192717851062623" onmouseenter="enter('-8778192717851062623');" onmouseout="out('-8778192717851062623');" style=""> 241                             CustomWidget newWidget = new CustomWidget(                                   </span>
<span class="3512413394145535740" onmouseenter="enter('3512413394145535740');" onmouseout="out('3512413394145535740');" style=""> 242                                     customWidget.getString(&quot;name&quot;),                                      </span>
<span class="-4996195677187410364" onmouseenter="enter('-4996195677187410364');" onmouseout="out('-4996195677187410364');" style=""> 243                                     positionMap.get(position),                                           </span>
<span class="3193660705107837549" onmouseenter="enter('3193660705107837549');" onmouseout="out('3193660705107837549');" style=""> 244                                     63,                                                                  </span>
<span class="3561617863275761236" onmouseenter="enter('3561617863275761236');" onmouseout="out('3561617863275761236');" style=""> 245                                     fontColor                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 246                             );                                                                           </span>
<span class="2785037360953974218" onmouseenter="enter('2785037360953974218');" onmouseout="out('2785037360953974218');" style=""> 247                             JSONArray elements = customWidget.getJSONArray(&quot;elements&quot;);                  </span>
<span  style=""> 248                                                                                                          </span>
<span class="3871742226603844038" onmouseenter="enter('3871742226603844038');" onmouseout="out('3871742226603844038');" style=""> 249                             for (int i2 = 0; i2 &lt; elements.length(); i2++) {                             </span>
<span class="-7151905776418266127" onmouseenter="enter('-7151905776418266127');" onmouseout="out('-7151905776418266127');" style=""> 250                                 JSONObject element = elements.getJSONObject(i2);                         </span>
<span class="6397770772172009485" onmouseenter="enter('6397770772172009485');" onmouseout="out('6397770772172009485');" style=""> 251                                 if (element.getString(&quot;type&quot;).equals(&quot;text&quot;)) {                          </span>
<span class="2334141174646848010" onmouseenter="enter('2334141174646848010');" onmouseout="out('2334141174646848010');" style=""> 252                                     newWidget.addElement(new CustomTextWidgetElement(                    </span>
<span class="822830221051301303" onmouseenter="enter('822830221051301303');" onmouseout="out('822830221051301303');" style=""> 253                                             element.getString(&quot;id&quot;),                                     </span>
<span class="4980700817635867661" onmouseenter="enter('4980700817635867661');" onmouseout="out('4980700817635867661');" style=""> 254                                             element.getString(&quot;value&quot;),                                  </span>
<span class="9063642109599004190" onmouseenter="enter('9063642109599004190');" onmouseout="out('9063642109599004190');" style=""> 255                                             element.getInt(&quot;x&quot;),                                         </span>
<span class="-4454797006849514808" onmouseenter="enter('-4454797006849514808');" onmouseout="out('-4454797006849514808');" style=""> 256                                             element.getInt(&quot;y&quot;)                                          </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 257                                     ));                                                                  </span>
<span class="-8940325902652201532" onmouseenter="enter('-8940325902652201532');" onmouseout="out('-8940325902652201532');" style=""> 258                                 } else if (element.getString(&quot;type&quot;).equals(&quot;background&quot;)) {             </span>
<span class="-4431923028910732143" onmouseenter="enter('-4431923028910732143');" onmouseout="out('-4431923028910732143');" style=""> 259                                     newWidget.addElement(new CustomBackgroundWidgetElement(              </span>
<span class="822830221051301303" onmouseenter="enter('822830221051301303');" onmouseout="out('822830221051301303');" style=""> 260                                             element.getString(&quot;id&quot;),                                     </span>
<span class="-7580773937564088589" onmouseenter="enter('-7580773937564088589');" onmouseout="out('-7580773937564088589');" style=""> 261                                             element.getString(&quot;value&quot;)                                   </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 262                                     ));                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 263                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264                             }                                                                            </span>
<span class="2257436902070421227" onmouseenter="enter('2257436902070421227');" onmouseout="out('2257436902070421227');" style=""> 265                             widget = newWidget;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268                 }                                                                                        </span>
<span  style=""> 269                                                                                                          </span>
<span class="-8350136702671077859" onmouseenter="enter('-8350136702671077859');" onmouseout="out('-8350136702671077859');" style=""> 270                 if(widget == null) continue;                                                             </span>
<span class="-6171680299070194420" onmouseenter="enter('-6171680299070194420');" onmouseout="out('-6171680299070194420');" style=""> 271                 this.widgets.add(widget);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272             }                                                                                            </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 273         } catch (JSONException e) {                                                                      </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 274             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275         }                                                                                                </span>
<span  style=""> 276                                                                                                          </span>
<span class="-8358671306989560601" onmouseenter="enter('-8358671306989560601');" onmouseout="out('-8358671306989560601');" style=""> 277         uploadWidgets();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278     }                                                                                                    </span>
<span  style=""> 279                                                                                                          </span>
<span class="5530468676950845344" onmouseenter="enter('5530468676950845344');" onmouseout="out('5530468676950845344');" style=""> 280     private void uploadWidgets(){                                                                        </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 281         negotiateSymmetricKey();                                                                         </span>
<span class="5140546967358631022" onmouseenter="enter('5140546967358631022');" onmouseout="out('5140546967358631022');" style=""> 282         ArrayList&lt;Widget&gt; systemWidgets = new ArrayList&lt;&gt;(widgets.size());                               </span>
<span class="-3447555470280778363" onmouseenter="enter('-3447555470280778363');" onmouseout="out('-3447555470280778363');" style=""> 283         for(Widget widget : this.widgets){                                                               </span>
<span class="1576906399201786111" onmouseenter="enter('1576906399201786111');" onmouseout="out('1576906399201786111');" style=""> 284             if(!(widget instanceof CustomWidget)) systemWidgets.add(widget);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285         }                                                                                                </span>
<span class="-2475473149296747573" onmouseenter="enter('-2475473149296747573');" onmouseout="out('-2475473149296747573');" style=""> 286         queueWrite(new WidgetsPutRequest(systemWidgets.toArray(new Widget[0]), this));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287     }                                                                                                    </span>
<span  style=""> 288                                                                                                          </span>
<span class="903870811454511101" onmouseenter="enter('903870811454511101');" onmouseout="out('903870811454511101');" style=""> 289     private void renderWidgets() {                                                                       </span>
<span class="-5253497129600185491" onmouseenter="enter('-5253497129600185491');" onmouseout="out('-5253497129600185491');" style=""><abbr title=" 290         Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddress()));"> 290         Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice()ðŸ”µ</abbr></span>
<span class="7432400165234073302" onmouseenter="enter('7432400165234073302');" onmouseout="out('7432400165234073302');" style=""> 291         boolean forceWhiteBackground = prefs.getBoolean(&quot;force_white_color_scheme&quot;, false);              </span>
<span class="-4957838723144238098" onmouseenter="enter('-4957838723144238098');" onmouseout="out('-4957838723144238098');" style=""> 292         boolean drawCircles = prefs.getBoolean(&quot;widget_draw_circles&quot;, false);                            </span>
<span  style=""> 293                                                                                                          </span>
<span class="-4150936410867644378" onmouseenter="enter('-4150936410867644378');" onmouseout="out('-4150936410867644378');" style=""> 294         Bitmap circleBitmap = null;                                                                      </span>
<span class="4297491638185878541" onmouseenter="enter('4297491638185878541');" onmouseout="out('4297491638185878541');" style=""> 295         if(drawCircles) {                                                                                </span>
<span class="-5595442960800349101" onmouseenter="enter('-5595442960800349101');" onmouseout="out('-5595442960800349101');" style=""> 296             circleBitmap = Bitmap.createBitmap(76, 76, Bitmap.Config.ARGB_8888);                         </span>
<span class="-928516426453882846" onmouseenter="enter('-928516426453882846');" onmouseout="out('-928516426453882846');" style=""> 297             Canvas circleCanvas = new Canvas(circleBitmap);                                              </span>
<span class="2814962491382878487" onmouseenter="enter('2814962491382878487');" onmouseout="out('2814962491382878487');" style=""> 298             Paint circlePaint = new Paint();                                                             </span>
<span class="-6694382119531121333" onmouseenter="enter('-6694382119531121333');" onmouseout="out('-6694382119531121333');" style=""> 299             circlePaint.setColor(forceWhiteBackground ? Color.WHITE : Color.BLACK);                      </span>
<span class="7023202196844894280" onmouseenter="enter('7023202196844894280');" onmouseout="out('7023202196844894280');" style=""> 300             circlePaint.setStyle(Paint.Style.FILL);                                                      </span>
<span class="3207244326755712140" onmouseenter="enter('3207244326755712140');" onmouseout="out('3207244326755712140');" style=""> 301             circlePaint.setStrokeWidth(3);                                                               </span>
<span class="4026559028524057875" onmouseenter="enter('4026559028524057875');" onmouseout="out('4026559028524057875');" style=""> 302             circleCanvas.drawCircle(38, 38, 37, circlePaint);                                            </span>
<span  style=""> 303                                                                                                          </span>
<span class="2381447846028007273" onmouseenter="enter('2381447846028007273');" onmouseout="out('2381447846028007273');" style=""> 304             circlePaint.setColor(forceWhiteBackground ? Color.BLACK : Color.WHITE);                      </span>
<span class="-2529291397399672174" onmouseenter="enter('-2529291397399672174');" onmouseout="out('-2529291397399672174');" style=""> 305             circlePaint.setStyle(Paint.Style.STROKE);                                                    </span>
<span class="3207244326755712140" onmouseenter="enter('3207244326755712140');" onmouseout="out('3207244326755712140');" style=""> 306             circlePaint.setStrokeWidth(3);                                                               </span>
<span class="4026559028524057875" onmouseenter="enter('4026559028524057875');" onmouseout="out('4026559028524057875');" style=""> 307             circleCanvas.drawCircle(38, 38, 37, circlePaint);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 308         }                                                                                                </span>
<span  style=""> 309                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 310         try {                                                                                            </span>
<span class="-373590907859483538" onmouseenter="enter('-373590907859483538');" onmouseout="out('-373590907859483538');" style=""> 311             ArrayList&lt;AssetImage&gt; widgetImages = new ArrayList&lt;&gt;();                                      </span>
<span  style=""> 312                                                                                                          </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 313 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 314 ||||||| BASE                                                                                             </span>
<span class="-7135747421857686049" onmouseenter="enter('-7135747421857686049');" onmouseout="out('-7135747421857686049');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 315             if(this.backGroundImage != null){                                                            </span>
<span class="-1341990675909940474" onmouseenter="enter('-1341990675909940474');" onmouseout="out('-1341990675909940474');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 316                 widgetImages.add(this.backGroundImage);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 317             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 318                                                                                                          </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 319                                                                                                          </span>
<span class="-8143608132748507128" onmouseenter="enter('-8143608132748507128');" onmouseout="out('-8143608132748507128');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 320             for (int i = 0; i &lt; this.widgets.size(); i++) {                                              </span>
<span class="-3360344478910316540" onmouseenter="enter('-3360344478910316540');" onmouseout="out('-3360344478910316540');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 321                 Widget w = widgets.get(i);                                                               </span>
<span class="7755552181933604323" onmouseenter="enter('7755552181933604323');" onmouseout="out('7755552181933604323');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 322                 if(!(w instanceof CustomWidget)) continue;                                               </span>
<span class="-119827139856937313" onmouseenter="enter('-119827139856937313');" onmouseout="out('-119827139856937313');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 323                 CustomWidget widget = (CustomWidget) w;                                                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 324                                                                                                          </span>
<span class="7010238729887612961" onmouseenter="enter('7010238729887612961');" onmouseout="out('7010238729887612961');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 325                 Bitmap widgetBitmap = Bitmap.createBitmap(76, 76, Bitmap.Config.ARGB_8888);              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 326                                                                                                          </span>
<span class="-3285187784434415926" onmouseenter="enter('-3285187784434415926');" onmouseout="out('-3285187784434415926');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 327                 Canvas widgetCanvas = new Canvas(widgetBitmap);                                          </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 328                                                                                                          </span>
<span class="4574864979763228349" onmouseenter="enter('4574864979763228349');" onmouseout="out('4574864979763228349');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 329                 boolean backgroundDrawn = false;                                                         </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 330                                                                                                          </span>
<span class="-7321857461549810249" onmouseenter="enter('-7321857461549810249');" onmouseout="out('-7321857461549810249');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 331                 if(widget.getDrawCircle() &amp;&amp; !backgroundDrawn){                                          </span>
<span class="2814962491382878487" onmouseenter="enter('2814962491382878487');" onmouseout="out('2814962491382878487');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 332                     Paint circlePaint = new Paint();                                                     </span>
<span class="-6694382119531121333" onmouseenter="enter('-6694382119531121333');" onmouseout="out('-6694382119531121333');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 333                     circlePaint.setColor(forceWhiteBackground ? Color.WHITE : Color.BLACK);              </span>
<span class="7023202196844894280" onmouseenter="enter('7023202196844894280');" onmouseout="out('7023202196844894280');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 334                     circlePaint.setStyle(Paint.Style.FILL);                                              </span>
<span class="3207244326755712140" onmouseenter="enter('3207244326755712140');" onmouseout="out('3207244326755712140');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 335                     circlePaint.setStrokeWidth(3);                                                       </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 336 =======                                                                                                  </span>
<span class="-7135747421857686049" onmouseenter="enter('-7135747421857686049');" onmouseout="out('-7135747421857686049');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 337             if(this.backGroundImage != null){                                                            </span>
<span class="-1341990675909940474" onmouseenter="enter('-1341990675909940474');" onmouseout="out('-1341990675909940474');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 338                 widgetImages.add(this.backGroundImage);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 339             }                                                                                            </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 340 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span  style=""> 341                                                                                                          </span>
<span class="-8143608132748507128" onmouseenter="enter('-8143608132748507128');" onmouseout="out('-8143608132748507128');" style=""> 342             for (int i = 0; i &lt; this.widgets.size(); i++) {                                              </span>
<span class="-3360344478910316540" onmouseenter="enter('-3360344478910316540');" onmouseout="out('-3360344478910316540');" style=""> 343                 Widget w = widgets.get(i);                                                               </span>
<span class="-2112273356566079696" onmouseenter="enter('-2112273356566079696');" onmouseout="out('-2112273356566079696');" style=""> 344                 if(!(w instanceof CustomWidget)){                                                        </span>
<span class="4297491638185878541" onmouseenter="enter('4297491638185878541');" onmouseout="out('4297491638185878541');" style=""> 345                     if(drawCircles) {                                                                    </span>
<span class="-5480032434325078611" onmouseenter="enter('-5480032434325078611');" onmouseout="out('-5480032434325078611');" style=""> 346                         widgetImages.add(AssetImageFactory.createAssetImage(                             </span>
<span class="1059813510113582459" onmouseenter="enter('1059813510113582459');" onmouseout="out('1059813510113582459');" style=""> 347                                 circleBitmap,                                                            </span>
<span class="1283834832483333129" onmouseenter="enter('1283834832483333129');" onmouseout="out('1283834832483333129');" style=""> 348                                 true,                                                                    </span>
<span class="427599116612284959" onmouseenter="enter('427599116612284959');" onmouseout="out('427599116612284959');" style=""> 349                                 w.getAngle(),                                                            </span>
<span class="879666240058458328" onmouseenter="enter('879666240058458328');" onmouseout="out('879666240058458328');" style=""> 350                                 w.getDistance(),                                                         </span>
<span class="-6707054910432036291" onmouseenter="enter('-6707054910432036291');" onmouseout="out('-6707054910432036291');" style=""> 351                                 1                                                                        </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 352                         ));                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353                     }                                                                                    </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 354                     continue;                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 355                 };                                                                                       </span>
<span class="-119827139856937313" onmouseenter="enter('-119827139856937313');" onmouseout="out('-119827139856937313');" style=""> 356                 CustomWidget widget = (CustomWidget) w;                                                  </span>
<span  style=""> 357                                                                                                          </span>
<span class="7010238729887612961" onmouseenter="enter('7010238729887612961');" onmouseout="out('7010238729887612961');" style=""> 358                 Bitmap widgetBitmap = Bitmap.createBitmap(76, 76, Bitmap.Config.ARGB_8888);              </span>
<span  style=""> 359                                                                                                          </span>
<span class="-3285187784434415926" onmouseenter="enter('-3285187784434415926');" onmouseout="out('-3285187784434415926');" style=""> 360                 Canvas widgetCanvas = new Canvas(widgetBitmap);                                          </span>
<span  style=""> 361                                                                                                          </span>
<span class="1399126767030654892" onmouseenter="enter('1399126767030654892');" onmouseout="out('1399126767030654892');" style=""> 362                 if(drawCircles){                                                                         </span>
<span class="2052312058071761513" onmouseenter="enter('2052312058071761513');" onmouseout="out('2052312058071761513');" style=""> 363                     widgetCanvas.drawBitmap(circleBitmap, 0, 0, null);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364                 }                                                                                        </span>
<span  style=""> 365                                                                                                          </span>
<span class="757605497541712230" onmouseenter="enter('757605497541712230');" onmouseout="out('757605497541712230');" style=""> 366                 for (CustomWidgetElement element : widget.getElements()) {                               </span>
<span class="7400170023887894754" onmouseenter="enter('7400170023887894754');" onmouseout="out('7400170023887894754');" style=""><abbr title=" 367                     if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_BACKGROUND) {"> 367                     if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_BACKðŸ”µ</abbr></span>
<span class="-676638329273944558" onmouseenter="enter('-676638329273944558');" onmouseout="out('-676638329273944558');" style=""> 368                         File imageFile = new File(element.getValue());                                   </span>
<span  style=""> 369                                                                                                          </span>
<span class="7384441147080120976" onmouseenter="enter('7384441147080120976');" onmouseout="out('7384441147080120976');" style=""> 370                         if(!imageFile.exists() || !imageFile.isFile()){                                  </span>
<span class="8572942832707006367" onmouseenter="enter('8572942832707006367');" onmouseout="out('8572942832707006367');" style=""> 371                             logger.debug(&quot;Image file &quot; + element.getValue() + &quot; not found&quot;);             </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 372                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 373                         }                                                                                </span>
<span class="-1261560715133039949" onmouseenter="enter('-1261560715133039949');" onmouseout="out('-1261560715133039949');" style=""> 374                         Bitmap imageBitmap = BitmapFactory.decodeFile(element.getValue());               </span>
<span class="6232182932301203372" onmouseenter="enter('6232182932301203372');" onmouseout="out('6232182932301203372');" style=""> 375                         if(imageBitmap == null){                                                         </span>
<span class="-7905366545073842666" onmouseenter="enter('-7905366545073842666');" onmouseout="out('-7905366545073842666');" style=""> 376                             logger.debug(&quot;image file &quot; + element.getValue() + &quot; could not be decoded&quot;);  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 377                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 378                         }                                                                                </span>
<span class="4351764494403839190" onmouseenter="enter('4351764494403839190');" onmouseout="out('4351764494403839190');" style=""> 379                         Bitmap scaledBitmap = Bitmap.createScaledBitmap(imageBitmap, 76, 76, false);     </span>
<span  style=""> 380                                                                                                          </span>
<span class="3660116155044120822" onmouseenter="enter('3660116155044120822');" onmouseout="out('3660116155044120822');" style=""> 381                         widgetCanvas.drawBitmap(                                                         </span>
<span class="5191324505806482314" onmouseenter="enter('5191324505806482314');" onmouseout="out('5191324505806482314');" style=""> 382                                 scaledBitmap,                                                            </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 383                                 0,                                                                       </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 384                                 0,                                                                       </span>
<span class="-5950258146809433717" onmouseenter="enter('-5950258146809433717');" onmouseout="out('-5950258146809433717');" style=""> 385                                 null);                                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 386                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388                 }                                                                                        </span>
<span  style=""> 389                                                                                                          </span>
<span class="757605497541712230" onmouseenter="enter('757605497541712230');" onmouseout="out('757605497541712230');" style=""> 390                 for (CustomWidgetElement element : widget.getElements()) {                               </span>
<span class="-8374841026396869451" onmouseenter="enter('-8374841026396869451');" onmouseout="out('-8374841026396869451');" style=""><abbr title=" 391                     if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_TEXT) {"> 391                     if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_TEXTðŸ”µ</abbr></span>
<span class="8404149927879958117" onmouseenter="enter('8404149927879958117');" onmouseout="out('8404149927879958117');" style=""> 392                         Paint textPaint = new Paint();                                                   </span>
<span class="424156949088872290" onmouseenter="enter('424156949088872290');" onmouseout="out('424156949088872290');" style=""> 393                         textPaint.setStrokeWidth(4);                                                     </span>
<span class="-7858016953995282215" onmouseenter="enter('-7858016953995282215');" onmouseout="out('-7858016953995282215');" style=""> 394                         textPaint.setTextSize(17f);                                                      </span>
<span class="7085320690650566449" onmouseenter="enter('7085320690650566449');" onmouseout="out('7085320690650566449');" style=""> 395                         textPaint.setStyle(Paint.Style.FILL);                                            </span>
<span class="4582184244946630782" onmouseenter="enter('4582184244946630782');" onmouseout="out('4582184244946630782');" style=""> 396                         textPaint.setColor(forceWhiteBackground ? Color.BLACK : Color.WHITE);            </span>
<span class="8080777884851070420" onmouseenter="enter('8080777884851070420');" onmouseout="out('8080777884851070420');" style=""> 397                         textPaint.setTextAlign(Paint.Align.CENTER);                                      </span>
<span  style=""> 398                                                                                                          </span>
<span class="-3687982044961117698" onmouseenter="enter('-3687982044961117698');" onmouseout="out('-3687982044961117698');" style=""><abbr title=" 399                         widgetCanvas.drawText(element.getValue(), element.getX(), element.getY() - (textPaint.descent() + textPaint.ascent()) / 2f, textPaint);"> 399                         widgetCanvas.drawText(element.getValue(), element.getX(), element.getY() - (textPðŸ”µ</abbr></span>
<span class="-2221545646012742491" onmouseenter="enter('-2221545646012742491');" onmouseout="out('-2221545646012742491');" style=""><abbr title=" 400                     }else if(element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_IMAGE) {"> 400                     }else if(element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPEðŸ”µ</abbr></span>
<span class="-1261560715133039949" onmouseenter="enter('-1261560715133039949');" onmouseout="out('-1261560715133039949');" style=""> 401                         Bitmap imageBitmap = BitmapFactory.decodeFile(element.getValue());               </span>
<span  style=""> 402                                                                                                          </span>
<span class="850565005306985750" onmouseenter="enter('850565005306985750');" onmouseout="out('850565005306985750');" style=""><abbr title=" 403                         widgetCanvas.drawBitmap(imageBitmap, element.getX() - imageBitmap.getWidth() / 2f, element.getY() - imageBitmap.getHeight() / 2f, null);"> 403                         widgetCanvas.drawBitmap(imageBitmap, element.getX() - imageBitmap.getWidth() / 2fðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405                 }                                                                                        </span>
<span class="-5480032434325078611" onmouseenter="enter('-5480032434325078611');" onmouseout="out('-5480032434325078611');" style=""> 406                 widgetImages.add(AssetImageFactory.createAssetImage(                                     </span>
<span class="6927266072716207452" onmouseenter="enter('6927266072716207452');" onmouseout="out('6927266072716207452');" style=""> 407                         widgetBitmap,                                                                    </span>
<span class="1283834832483333129" onmouseenter="enter('1283834832483333129');" onmouseout="out('1283834832483333129');" style=""> 408                         true,                                                                            </span>
<span class="-5673825003729303026" onmouseenter="enter('-5673825003729303026');" onmouseout="out('-5673825003729303026');" style=""> 409                         widget.getAngle(),                                                               </span>
<span class="-686125949143974898" onmouseenter="enter('-686125949143974898');" onmouseout="out('-686125949143974898');" style=""> 410                         widget.getDistance(),                                                            </span>
<span class="-6707054910432036291" onmouseenter="enter('-6707054910432036291');" onmouseout="out('-6707054910432036291');" style=""> 411                         1                                                                                </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 412                 ));                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 413             }                                                                                            </span>
<span  style=""> 414                                                                                                          </span>
<span  style=""> 415                                                                                                          </span>
<span class="-7135747421857686049" onmouseenter="enter('-7135747421857686049');" onmouseout="out('-7135747421857686049');" style=""> 416             if(this.backGroundImage != null){                                                            </span>
<span class="-1341990675909940474" onmouseenter="enter('-1341990675909940474');" onmouseout="out('-1341990675909940474');" style=""> 417                 widgetImages.add(this.backGroundImage);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418             }                                                                                            </span>
<span  style=""> 419                                                                                                          </span>
<span class="4734673173370309989" onmouseenter="enter('4734673173370309989');" onmouseout="out('4734673173370309989');" style=""> 420             queueWrite(new AssetFilePutRequest(                                                          </span>
<span class="-4286172266088300066" onmouseenter="enter('-4286172266088300066');" onmouseout="out('-4286172266088300066');" style=""> 421                     widgetImages.toArray(new AssetImage[0]),                                             </span>
<span class="-3953921874774397702" onmouseenter="enter('-3953921874774397702');" onmouseout="out('-3953921874774397702');" style=""> 422                     (byte) 0x00,                                                                         </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 423                     this                                                                                 </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 424             ));                                                                                          </span>
<span class="-1216850278071707444" onmouseenter="enter('-1216850278071707444');" onmouseout="out('-1216850278071707444');" style=""> 425             // queueWrite(new FileDeleteRequest((short) 0x0503));                                        </span>
<span class="-6828394027622892361" onmouseenter="enter('-6828394027622892361');" onmouseout="out('-6828394027622892361');" style=""> 426             queueWrite(new ImagesSetRequest(                                                             </span>
<span class="-4286172266088300066" onmouseenter="enter('-4286172266088300066');" onmouseout="out('-4286172266088300066');" style=""> 427                     widgetImages.toArray(new AssetImage[0]),                                             </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 428                     this                                                                                 </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 429             ));                                                                                          </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 430         } catch (IOException e) {                                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 431             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433     }                                                                                                    </span>
<span  style=""> 434                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 435     @Override                                                                                            </span>
<span class="768796884755462959" onmouseenter="enter('768796884755462959');" onmouseout="out('768796884755462959');" style=""> 436     public void setWidgetContent(String widgetID, String content, boolean renderOnWatch) {               </span>
<span class="-1104872319984701354" onmouseenter="enter('-1104872319984701354');" onmouseout="out('-1104872319984701354');" style=""> 437         boolean update = false;                                                                          </span>
<span class="4250664064039944058" onmouseenter="enter('4250664064039944058');" onmouseout="out('4250664064039944058');" style=""> 438         for (Widget widget : this.widgets) {                                                             </span>
<span class="6599617715616763984" onmouseenter="enter('6599617715616763984');" onmouseout="out('6599617715616763984');" style=""> 439             if(!(widget instanceof CustomWidget)) continue;                                              </span>
<span class="-7367617630703350990" onmouseenter="enter('-7367617630703350990');" onmouseout="out('-7367617630703350990');" style=""> 440             if(((CustomWidget) widget).updateElementValue(widgetID, content)) update = true;             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441         }                                                                                                </span>
<span  style=""> 442                                                                                                          </span>
<span class="-2887538322855201281" onmouseenter="enter('-2887538322855201281');" onmouseout="out('-2887538322855201281');" style=""> 443         if (renderOnWatch &amp;&amp; update) renderWidgets();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444     }                                                                                                    </span>
<span  style=""> 445                                                                                                          </span>
<span class="6173588091729977369" onmouseenter="enter('6173588091729977369');" onmouseout="out('6173588091729977369');" style=""> 446     private void negotiateSymmetricKey() {                                                               </span>
<span class="-7168973652814870469" onmouseenter="enter('-7168973652814870469');" onmouseout="out('-7168973652814870469');" style=""> 447         queueWrite(new VerifyPrivateKeyRequest(                                                          </span>
<span class="2474409468109046352" onmouseenter="enter('2474409468109046352');" onmouseout="out('2474409468109046352');" style=""> 448                 this.getSecretKey(),                                                                     </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 449                 this                                                                                     </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 450         ));                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451     }                                                                                                    </span>
<span  style=""> 452                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 453     @Override                                                                                            </span>
<span class="8564159631865081592" onmouseenter="enter('8564159631865081592');" onmouseout="out('8564159631865081592');" style=""> 454     public void setTime() {                                                                              </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 455         negotiateSymmetricKey();                                                                         </span>
<span  style=""> 456                                                                                                          </span>
<span class="-4700399361923900561" onmouseenter="enter('-4700399361923900561');" onmouseout="out('-4700399361923900561');" style=""> 457         long millis = System.currentTimeMillis();                                                        </span>
<span class="8010236317671933907" onmouseenter="enter('8010236317671933907');" onmouseout="out('8010236317671933907');" style=""> 458         TimeZone zone = new GregorianCalendar().getTimeZone();                                           </span>
<span  style=""> 459                                                                                                          </span>
<span class="5277346296728804081" onmouseenter="enter('5277346296728804081');" onmouseout="out('5277346296728804081');" style=""> 460         queueWrite(                                                                                      </span>
<span class="9082684383999307863" onmouseenter="enter('9082684383999307863');" onmouseout="out('9082684383999307863');" style=""> 461                 new ConfigurationPutRequest(                                                             </span>
<span class="6747723926021094395" onmouseenter="enter('6747723926021094395');" onmouseout="out('6747723926021094395');" style=""> 462                         new TimeConfigItem(                                                              </span>
<span class="-4594139798000988877" onmouseenter="enter('-4594139798000988877');" onmouseout="out('-4594139798000988877');" style=""> 463                                 (int) (millis / 1000 + getDeviceSupport().getTimeOffset() * 60),         </span>
<span class="6701954853301529159" onmouseenter="enter('6701954853301529159');" onmouseout="out('6701954853301529159');" style=""> 464                                 (short) (millis % 1000),                                                 </span>
<span class="2740305831490303835" onmouseenter="enter('2740305831490303835');" onmouseout="out('2740305831490303835');" style=""> 465                                 (short) (zone.getOffset(millis) / 60000)                                 </span>
<span class="5925056120740059197" onmouseenter="enter('5925056120740059197');" onmouseout="out('5925056120740059197');" style=""> 466                         ),                                                                               </span>
<span class="-573149562926997335" onmouseenter="enter('-573149562926997335');" onmouseout="out('-573149562926997335');" style=""> 467                         this), false                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 468         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 469     }                                                                                                    </span>
<span  style=""> 470                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 471     @Override                                                                                            </span>
<span class="5743699626454161990" onmouseenter="enter('5743699626454161990');" onmouseout="out('5743699626454161990');" style=""> 472     public void setMusicInfo(MusicSpec musicSpec) {                                                      </span>
<span class="7717622633225589961" onmouseenter="enter('7717622633225589961');" onmouseout="out('7717622633225589961');" style=""> 473         if (                                                                                             </span>
<span class="-2721767562250030479" onmouseenter="enter('-2721767562250030479');" onmouseout="out('-2721767562250030479');" style=""> 474                 currentSpec != null                                                                      </span>
<span class="6347316233900210670" onmouseenter="enter('6347316233900210670');" onmouseout="out('6347316233900210670');" style=""> 475                         &amp;&amp; currentSpec.album.equals(musicSpec.album)                                     </span>
<span class="-7026697945522803285" onmouseenter="enter('-7026697945522803285');" onmouseout="out('-7026697945522803285');" style=""> 476                         &amp;&amp; currentSpec.artist.equals(musicSpec.artist)                                   </span>
<span class="234002389956897367" onmouseenter="enter('234002389956897367');" onmouseout="out('234002389956897367');" style=""> 477                         &amp;&amp; currentSpec.track.equals(musicSpec.track)                                     </span>
<span class="129544933216380196" onmouseenter="enter('129544933216380196');" onmouseout="out('129544933216380196');" style=""> 478         ) return;                                                                                        </span>
<span class="5122037976784129938" onmouseenter="enter('5122037976784129938');" onmouseout="out('5122037976784129938');" style=""> 479         currentSpec = musicSpec;                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 480         try {                                                                                            </span>
<span class="2807680215991082156" onmouseenter="enter('2807680215991082156');" onmouseout="out('2807680215991082156');" style=""> 481             queueWrite(new MusicInfoSetRequest(                                                          </span>
<span class="-4995357750126688628" onmouseenter="enter('-4995357750126688628');" onmouseout="out('-4995357750126688628');" style=""> 482                     musicSpec.artist,                                                                    </span>
<span class="-2625665048867935009" onmouseenter="enter('-2625665048867935009');" onmouseout="out('-2625665048867935009');" style=""> 483                     musicSpec.album,                                                                     </span>
<span class="4393990709676517095" onmouseenter="enter('4393990709676517095');" onmouseout="out('4393990709676517095');" style=""> 484                     musicSpec.track,                                                                     </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 485                     this                                                                                 </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 486             ));                                                                                          </span>
<span class="-6150396604962993275" onmouseenter="enter('-6150396604962993275');" onmouseout="out('-6150396604962993275');" style=""> 487         }catch (BufferOverflowException e){                                                              </span>
<span class="-5802249110858364829" onmouseenter="enter('-5802249110858364829');" onmouseout="out('-5802249110858364829');" style=""> 488             GB.log(&quot;musicInfo: &quot; + musicSpec, GB.ERROR, e);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 490     }                                                                                                    </span>
<span  style=""> 491                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 492     @Override                                                                                            </span>
<span class="6484409227794913685" onmouseenter="enter('6484409227794913685');" onmouseout="out('6484409227794913685');" style=""> 493     public void setMusicState(MusicStateSpec stateSpec) {                                                </span>
<span class="-8825084358361918368" onmouseenter="enter('-8825084358361918368');" onmouseout="out('-8825084358361918368');" style=""> 494         super.setMusicState(stateSpec);                                                                  </span>
<span  style=""> 495                                                                                                          </span>
<span class="-5832778985397101291" onmouseenter="enter('-5832778985397101291');" onmouseout="out('-5832778985397101291');" style=""> 496         queueWrite(new MusicControlRequest(                                                              </span>
<span class="6749687689436260015" onmouseenter="enter('6749687689436260015');" onmouseout="out('6749687689436260015');" style=""><abbr title=" 497                 stateSpec.state == MusicStateSpec.STATE_PLAYING ? MUSIC_PHONE_REQUEST.MUSIC_REQUEST_SET_PLAYING : MUSIC_PHONE_REQUEST.MUSIC_REQUEST_SET_PAUSED"> 497                 stateSpec.state == MusicStateSpec.STATE_PLAYING ? MUSIC_PHONE_REQUEST.MUSIC_REQUEST_SET_PðŸ”µ</abbr></span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 498         ));                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 499     }                                                                                                    </span>
<span  style=""> 500                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 501     @Override                                                                                            </span>
<span class="-4328830144100754457" onmouseenter="enter('-4328830144100754457');" onmouseout="out('-4328830144100754457');" style=""> 502     public void updateWidgets() {                                                                        </span>
<span class="-8671838943786981246" onmouseenter="enter('-8671838943786981246');" onmouseout="out('-8671838943786981246');" style=""> 503         loadWidgets();                                                                                   </span>
<span class="-686042699702875094" onmouseenter="enter('-686042699702875094');" onmouseout="out('-686042699702875094');" style=""> 504         renderWidgets();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505     }                                                                                                    </span>
<span  style=""> 506                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 507     @Override                                                                                            </span>
<span class="-3215171005460530491" onmouseenter="enter('-3215171005460530491');" onmouseout="out('-3215171005460530491');" style=""> 508     public void onFetchActivityData() {                                                                  </span>
<span class="-9031387911705611686" onmouseenter="enter('-9031387911705611686');" onmouseout="out('-9031387911705611686');" style=""> 509         syncSettings();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 510     }                                                                                                    </span>
<span  style=""> 511                                                                                                          </span>
<span class="4739601400713241401" onmouseenter="enter('4739601400713241401');" onmouseout="out('4739601400713241401');" style=""> 512     private void syncSettings() {                                                                        </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 513         negotiateSymmetricKey();                                                                         </span>
<span  style=""> 514                                                                                                          </span>
<span class="1672016935910782047" onmouseenter="enter('1672016935910782047');" onmouseout="out('1672016935910782047');" style=""> 515         queueWrite(new ConfigurationGetRequest(this));                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 516     }                                                                                                    </span>
<span  style=""> 517                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 518     @Override                                                                                            </span>
<span class="3426069938226863461" onmouseenter="enter('3426069938226863461');" onmouseout="out('3426069938226863461');" style=""> 519     public void setActivityHand(double progress) {                                                       </span>
<span class="-1967647950949041220" onmouseenter="enter('-1967647950949041220');" onmouseout="out('-1967647950949041220');" style=""> 520         // super.setActivityHand(progress);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521     }                                                                                                    </span>
<span  style=""> 522                                                                                                          </span>
<span class="4432705569944803605" onmouseenter="enter('4432705569944803605');" onmouseout="out('4432705569944803605');" style=""> 523     public boolean playRawNotification(NotificationSpec notificationSpec) {                              </span>
<span class="-6989280013139049302" onmouseenter="enter('-6989280013139049302');" onmouseout="out('-6989280013139049302');" style=""> 524         String senderOrTitle = StringUtils.getFirstOf(notificationSpec.sender, notificationSpec.title);  </span>
<span  style=""> 525                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 526         try {                                                                                            </span>
<span class="-2594216627053610262" onmouseenter="enter('-2594216627053610262');" onmouseout="out('-2594216627053610262');" style=""> 527             for (NotificationHRConfiguration configuration : this.notificationConfigurations){           </span>
<span class="-6012792330028782499" onmouseenter="enter('-6012792330028782499');" onmouseout="out('-6012792330028782499');" style=""> 528                 if(configuration.getPackageName().equals(notificationSpec.sourceAppId)){                 </span>
<span class="-8304200794962410012" onmouseenter="enter('-8304200794962410012');" onmouseout="out('-8304200794962410012');" style=""><abbr title=" 529                     queueWrite(new PlayTextNotificationRequest(notificationSpec.sourceAppId, senderOrTitle, notificationSpec.body, this));"> 529                     queueWrite(new PlayTextNotificationRequest(notificationSpec.sourceAppId, senderOrTitlðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 530                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532             }                                                                                            </span>
<span class="6520985087381761239" onmouseenter="enter('6520985087381761239');" onmouseout="out('6520985087381761239');" style=""><abbr title=" 533             queueWrite(new PlayTextNotificationRequest(&quot;generic&quot;, senderOrTitle, notificationSpec.body, this));"> 533             queueWrite(new PlayTextNotificationRequest(&quot;generic&quot;, senderOrTitle, notificationSpec.body, tðŸ”µ</abbr></span>
<span class="-1580407524319062305" onmouseenter="enter('-1580407524319062305');" onmouseout="out('-1580407524319062305');" style=""> 534         }catch (Exception e){                                                                            </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 535             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 536         }                                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 537         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 538     }                                                                                                    </span>
<span  style=""> 539                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 540     @Override                                                                                            </span>
<span class="-3287587973518064190" onmouseenter="enter('-3287587973518064190');" onmouseout="out('-3287587973518064190');" style=""> 541     public void onFindDevice(boolean start) {                                                            </span>
<span class="5693720137067729069" onmouseenter="enter('5693720137067729069');" onmouseout="out('5693720137067729069');" style=""> 542         if(start){                                                                                       </span>
<span class="1659990903962259675" onmouseenter="enter('1659990903962259675');" onmouseout="out('1659990903962259675');" style=""> 543             new TransactionBuilder(&quot;vibrate find&quot;)                                                       </span>
<span class="-2922806062965776165" onmouseenter="enter('-2922806062965776165');" onmouseout="out('-2922806062965776165');" style=""> 544                     .write(                                                                              </span>
<span class="4897579106813855607" onmouseenter="enter('4897579106813855607');" onmouseout="out('4897579106813855607');" style=""><abbr title=" 545                             getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6-74696673696d&quot;)),"> 545                             getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6ðŸ”µ</abbr></span>
<span class="-4709444814666373888" onmouseenter="enter('-4709444814666373888');" onmouseout="out('-4709444814666373888');" style=""><abbr title=" 546                             new byte[]{(byte) 0x01, (byte) 0x04, (byte) 0x30, (byte) 0x75, (byte) 0x00, (byte) 0x00}"> 546                             new byte[]{(byte) 0x01, (byte) 0x04, (byte) 0x30, (byte) 0x75, (byte) 0x00, (ðŸ”µ</abbr></span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 547                             )                                                                            </span>
<span class="7475982186340408444" onmouseenter="enter('7475982186340408444');" onmouseout="out('7475982186340408444');" style=""> 548                     .queue(getDeviceSupport().getQueue());                                               </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style=""> 549         }else{                                                                                           </span>
<span class="1659990903962259675" onmouseenter="enter('1659990903962259675');" onmouseout="out('1659990903962259675');" style=""> 550             new TransactionBuilder(&quot;vibrate find&quot;)                                                       </span>
<span class="-2922806062965776165" onmouseenter="enter('-2922806062965776165');" onmouseout="out('-2922806062965776165');" style=""> 551                     .write(                                                                              </span>
<span class="4897579106813855607" onmouseenter="enter('4897579106813855607');" onmouseout="out('4897579106813855607');" style=""><abbr title=" 552                             getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6-74696673696d&quot;)),"> 552                             getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6ðŸ”µ</abbr></span>
<span class="-5350492152909335002" onmouseenter="enter('-5350492152909335002');" onmouseout="out('-5350492152909335002');" style=""> 553                             new byte[]{(byte) 0x02, (byte) 0x05, (byte) 0x04}                            </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 554                     )                                                                                    </span>
<span class="7475982186340408444" onmouseenter="enter('7475982186340408444');" onmouseout="out('7475982186340408444');" style=""> 555                     .queue(getDeviceSupport().getQueue());                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 557     }                                                                                                    </span>
<span  style=""> 558                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 559     @Override                                                                                            </span>
<span class="8502851833159229707" onmouseenter="enter('8502851833159229707');" onmouseout="out('8502851833159229707');" style=""> 560     public void onSetCallState(CallSpec callSpec) {                                                      </span>
<span class="2570082300251631790" onmouseenter="enter('2570082300251631790');" onmouseout="out('2570082300251631790');" style=""> 561         super.onSetCallState(callSpec);                                                                  </span>
<span class="-5845444396137068141" onmouseenter="enter('-5845444396137068141');" onmouseout="out('-5845444396137068141');" style=""><abbr title=" 562         queueWrite(new PlayCallNotificationRequest(StringUtils.getFirstOf(callSpec.name, callSpec.number), callSpec.command == CallSpec.CALL_INCOMING, this));"> 562         queueWrite(new PlayCallNotificationRequest(StringUtils.getFirstOf(callSpec.name, callSpec.number)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 563     }                                                                                                    </span>
<span  style=""> 564                                                                                                          </span>
<span class="-9163390227004502495" onmouseenter="enter('-9163390227004502495');" onmouseout="out('-9163390227004502495');" style=""> 565     // this method is based on the one from AppMessageHandlerYWeather.java                               </span>
<span class="-7257237953502575841" onmouseenter="enter('-7257237953502575841');" onmouseout="out('-7257237953502575841');" style=""> 566     private int getIconForConditionCode(int conditionCode, boolean isNight) {                            </span>
<span class="-7242773537695047282" onmouseenter="enter('-7242773537695047282');" onmouseout="out('-7242773537695047282');" style=""> 567         final int CLEAR_DAY = 0;                                                                         </span>
<span class="4533171043840830733" onmouseenter="enter('4533171043840830733');" onmouseout="out('4533171043840830733');" style=""> 568         final int CLEAR_NIGHT = 1;                                                                       </span>
<span class="-1044203258765846265" onmouseenter="enter('-1044203258765846265');" onmouseout="out('-1044203258765846265');" style=""> 569         final int CLOUDY = 2;                                                                            </span>
<span class="6767089093966645579" onmouseenter="enter('6767089093966645579');" onmouseout="out('6767089093966645579');" style=""> 570         final int PARTLY_CLOUDY_DAY = 3;                                                                 </span>
<span class="4494290528913924840" onmouseenter="enter('4494290528913924840');" onmouseout="out('4494290528913924840');" style=""> 571         final int PARTLY_CLOUDY_NIGHT = 4;                                                               </span>
<span class="-948427530318648638" onmouseenter="enter('-948427530318648638');" onmouseout="out('-948427530318648638');" style=""> 572         final int RAIN = 5;                                                                              </span>
<span class="-7891962438645220671" onmouseenter="enter('-7891962438645220671');" onmouseout="out('-7891962438645220671');" style=""> 573         final int SNOW = 6;                                                                              </span>
<span class="7487235255100620000" onmouseenter="enter('7487235255100620000');" onmouseout="out('7487235255100620000');" style=""> 574         final int SNOW_2 = 7; // same as 6?                                                              </span>
<span class="6109174568599434520" onmouseenter="enter('6109174568599434520');" onmouseout="out('6109174568599434520');" style=""> 575         final int THUNDERSTORM = 8;                                                                      </span>
<span class="-1407557299840080809" onmouseenter="enter('-1407557299840080809');" onmouseout="out('-1407557299840080809');" style=""> 576         final int CLOUDY_2 = 9; // same as 2?                                                            </span>
<span class="-235578585516231192" onmouseenter="enter('-235578585516231192');" onmouseout="out('-235578585516231192');" style=""> 577         final int WINDY = 10;                                                                            </span>
<span  style=""> 578                                                                                                          </span>
<span class="-6750306522095776186" onmouseenter="enter('-6750306522095776186');" onmouseout="out('-6750306522095776186');" style=""> 579         if (conditionCode == 800 || conditionCode == 951) {                                              </span>
<span class="-7722401087902140861" onmouseenter="enter('-7722401087902140861');" onmouseout="out('-7722401087902140861');" style=""> 580             return isNight ? CLEAR_NIGHT : CLEAR_DAY;                                                    </span>
<span class="3088760508183910638" onmouseenter="enter('3088760508183910638');" onmouseout="out('3088760508183910638');" style=""> 581         } else if (conditionCode &gt; 800 &amp;&amp; conditionCode &lt; 900) {                                         </span>
<span class="6220617342345108517" onmouseenter="enter('6220617342345108517');" onmouseout="out('6220617342345108517');" style=""> 582             return isNight ? PARTLY_CLOUDY_NIGHT : PARTLY_CLOUDY_DAY;                                    </span>
<span class="3057497190260727363" onmouseenter="enter('3057497190260727363');" onmouseout="out('3057497190260727363');" style=""> 583         } else if (conditionCode &gt;= 300 &amp;&amp; conditionCode &lt; 400) {                                        </span>
<span class="7963689777117946550" onmouseenter="enter('7963689777117946550');" onmouseout="out('7963689777117946550');" style=""> 584             return RAIN; // drizzle mapped to rain                                                       </span>
<span class="-3733606442935144190" onmouseenter="enter('-3733606442935144190');" onmouseout="out('-3733606442935144190');" style=""> 585         } else if (conditionCode &gt;= 500 &amp;&amp; conditionCode &lt; 600) {                                        </span>
<span class="2508004717339579833" onmouseenter="enter('2508004717339579833');" onmouseout="out('2508004717339579833');" style=""> 586             return RAIN;                                                                                 </span>
<span class="4918040359999714885" onmouseenter="enter('4918040359999714885');" onmouseout="out('4918040359999714885');" style=""> 587         } else if (conditionCode &gt;= 700 &amp;&amp; conditionCode &lt; 732) {                                        </span>
<span class="6233122099491282445" onmouseenter="enter('6233122099491282445');" onmouseout="out('6233122099491282445');" style=""> 588             return CLOUDY;                                                                               </span>
<span class="6405170419319947758" onmouseenter="enter('6405170419319947758');" onmouseout="out('6405170419319947758');" style=""><abbr title=" 589         } else if (conditionCode == 741 || conditionCode == 751 || conditionCode == 761 || conditionCode == 762) {"> 589         } else if (conditionCode == 741 || conditionCode == 751 || conditionCode == 761 || conditionCode ðŸ”µ</abbr></span>
<span class="2536039853244368761" onmouseenter="enter('2536039853244368761');" onmouseout="out('2536039853244368761');" style=""> 590             return CLOUDY; // fog mapped to cloudy                                                       </span>
<span class="6580216626725103203" onmouseenter="enter('6580216626725103203');" onmouseout="out('6580216626725103203');" style=""> 591         } else if (conditionCode == 771) {                                                               </span>
<span class="-5268377561975928582" onmouseenter="enter('-5268377561975928582');" onmouseout="out('-5268377561975928582');" style=""> 592             return CLOUDY; // squalls mapped to cloudy                                                   </span>
<span class="-6475883863999659582" onmouseenter="enter('-6475883863999659582');" onmouseout="out('-6475883863999659582');" style=""> 593         } else if (conditionCode == 781) {                                                               </span>
<span class="-2651444700159349229" onmouseenter="enter('-2651444700159349229');" onmouseout="out('-2651444700159349229');" style=""> 594             return WINDY; // tornato mapped to windy                                                     </span>
<span class="-3846351950108028451" onmouseenter="enter('-3846351950108028451');" onmouseout="out('-3846351950108028451');" style=""> 595         } else if (conditionCode &gt;= 200 &amp;&amp; conditionCode &lt; 300) {                                        </span>
<span class="-7893213180272113492" onmouseenter="enter('-7893213180272113492');" onmouseout="out('-7893213180272113492');" style=""> 596             return THUNDERSTORM;                                                                         </span>
<span class="-160375692992858182" onmouseenter="enter('-160375692992858182');" onmouseout="out('-160375692992858182');" style=""> 597         } else if (conditionCode &gt;= 600 &amp;&amp; conditionCode &lt;= 602) {                                       </span>
<span class="4577577423549625750" onmouseenter="enter('4577577423549625750');" onmouseout="out('4577577423549625750');" style=""> 598             return SNOW;                                                                                 </span>
<span class="73124631780569399" onmouseenter="enter('73124631780569399');" onmouseout="out('73124631780569399');" style=""> 599         } else if (conditionCode &gt;= 611 &amp;&amp; conditionCode &lt;= 622) {                                       </span>
<span class="2508004717339579833" onmouseenter="enter('2508004717339579833');" onmouseout="out('2508004717339579833');" style=""> 600             return RAIN;                                                                                 </span>
<span class="5918520655852856943" onmouseenter="enter('5918520655852856943');" onmouseout="out('5918520655852856943');" style=""> 601         } else if (conditionCode == 906) {                                                               </span>
<span class="-8494627517236710847" onmouseenter="enter('-8494627517236710847');" onmouseout="out('-8494627517236710847');" style=""> 602             return RAIN; // hail mapped to rain                                                          </span>
<span class="-4632432821354911151" onmouseenter="enter('-4632432821354911151');" onmouseout="out('-4632432821354911151');" style=""> 603         } else if (conditionCode &gt;= 907 &amp;&amp; conditionCode &lt; 957) {                                        </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 604             return WINDY;                                                                                </span>
<span class="884594439890815837" onmouseenter="enter('884594439890815837');" onmouseout="out('884594439890815837');" style=""> 605         } else if (conditionCode == 905) {                                                               </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 606             return WINDY;                                                                                </span>
<span class="7058363657246863920" onmouseenter="enter('7058363657246863920');" onmouseout="out('7058363657246863920');" style=""> 607         } else if (conditionCode == 900) {                                                               </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 608             return WINDY;                                                                                </span>
<span class="-7755582696699634395" onmouseenter="enter('-7755582696699634395');" onmouseout="out('-7755582696699634395');" style=""> 609         } else if (conditionCode == 901 || conditionCode == 902 || conditionCode == 962) {               </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 610             return WINDY;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 611         }                                                                                                </span>
<span class="-7722401087902140861" onmouseenter="enter('-7722401087902140861');" onmouseout="out('-7722401087902140861');" style=""> 612         return isNight ? CLEAR_NIGHT : CLEAR_DAY;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 613     }                                                                                                    </span>
<span  style=""> 614                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 615     @Override                                                                                            </span>
<span class="-6167041048283935417" onmouseenter="enter('-6167041048283935417');" onmouseout="out('-6167041048283935417');" style=""> 616     public void onSendWeather(WeatherSpec weatherSpec) {                                                 </span>
<span class="-580696616137890311" onmouseenter="enter('-580696616137890311');" onmouseout="out('-580696616137890311');" style=""> 617         long ts = System.currentTimeMillis();                                                            </span>
<span class="-8981233749074677785" onmouseenter="enter('-8981233749074677785');" onmouseout="out('-8981233749074677785');" style=""> 618         ts /= 1000;                                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 619         try {                                                                                            </span>
<span class="-4452014417400702333" onmouseenter="enter('-4452014417400702333');" onmouseout="out('-4452014417400702333');" style=""> 620             JSONObject responseObject = new JSONObject()                                                 </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 621                     .put(&quot;res&quot;, new JSONObject()                                                         </span>
<span class="-311134376594128902" onmouseenter="enter('-311134376594128902');" onmouseout="out('-311134376594128902');" style=""> 622                             .put(&quot;id&quot;, 0) // seems the id does not matter?                               </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 623                             .put(&quot;set&quot;, new JSONObject()                                                 </span>
<span class="-7491386685560898919" onmouseenter="enter('-7491386685560898919');" onmouseout="out('-7491386685560898919');" style=""> 624                                     .put(&quot;weatherInfo&quot;, new JSONObject()                                 </span>
<span class="3913809787685967455" onmouseenter="enter('3913809787685967455');" onmouseout="out('3913809787685967455');" style=""> 625                                             .put(&quot;alive&quot;, ts + 60 * 60)                                  </span>
<span class="4823146304358131104" onmouseenter="enter('4823146304358131104');" onmouseout="out('4823146304358131104');" style=""> 626                                             .put(&quot;unit&quot;, &quot;c&quot;) // FIXME: do not hardcode                  </span>
<span class="3465794128886265400" onmouseenter="enter('3465794128886265400');" onmouseout="out('3465794128886265400');" style=""> 627                                             .put(&quot;temp&quot;, weatherSpec.currentTemp - 273)                  </span>
<span class="-2978941176103258929" onmouseenter="enter('-2978941176103258929');" onmouseout="out('-2978941176103258929');" style=""><abbr title=" 628                                             .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.currentConditionCode, false)) // FIXME do not assume daylight"> 628                                             .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.currentCoðŸ”µ</abbr></span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 629                                     )                                                                    </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 630                             )                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 631                     );                                                                                   </span>
<span  style=""> 632                                                                                                          </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 633             queueWrite(new JsonPutRequest(responseObject, this));                                        </span>
<span  style=""> 634                                                                                                          </span>
<span class="5317082335628225584" onmouseenter="enter('5317082335628225584');" onmouseout="out('5317082335628225584');" style=""> 635             JSONArray forecastWeekArray = new JSONArray();                                               </span>
<span class="-2368043815888700658" onmouseenter="enter('-2368043815888700658');" onmouseout="out('-2368043815888700658');" style=""> 636             final String[] weekdays = {&quot;&quot;, &quot;Sun&quot;, &quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;};             </span>
<span class="-364158713171851732" onmouseenter="enter('-364158713171851732');" onmouseout="out('-364158713171851732');" style=""> 637             Calendar cal = Calendar.getInstance();                                                       </span>
<span class="-4637281821247246720" onmouseenter="enter('-4637281821247246720');" onmouseout="out('-4637281821247246720');" style=""> 638             cal.setTimeInMillis(weatherSpec.timestamp * 1000L);                                          </span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style=""> 639             int i = 0;                                                                                   </span>
<span class="4625687820668156386" onmouseenter="enter('4625687820668156386');" onmouseout="out('4625687820668156386');" style=""> 640             for (WeatherSpec.Forecast forecast : weatherSpec.forecasts) {                                </span>
<span class="3497173000510224029" onmouseenter="enter('3497173000510224029');" onmouseout="out('3497173000510224029');" style=""> 641                 cal.add(Calendar.DATE, 1);                                                               </span>
<span class="-2706943182093550956" onmouseenter="enter('-2706943182093550956');" onmouseout="out('-2706943182093550956');" style=""> 642                 int dayOfWeek = cal.get(Calendar.DAY_OF_WEEK);                                           </span>
<span class="8445249603810894149" onmouseenter="enter('8445249603810894149');" onmouseout="out('8445249603810894149');" style=""> 643                 forecastWeekArray.put(new JSONObject()                                                   </span>
<span class="3406552519892389037" onmouseenter="enter('3406552519892389037');" onmouseout="out('3406552519892389037');" style=""> 644                         .put(&quot;day&quot;, weekdays[dayOfWeek])                                                 </span>
<span class="-3341352462469645269" onmouseenter="enter('-3341352462469645269');" onmouseout="out('-3341352462469645269');" style=""><abbr title=" 645                         .put(&quot;cond_id&quot;, getIconForConditionCode(forecast.conditionCode, false)) // FIXME do not assume daylight"> 645                         .put(&quot;cond_id&quot;, getIconForConditionCode(forecast.conditionCode, false)) // FIXME ðŸ”µ</abbr></span>
<span class="2713736984512170635" onmouseenter="enter('2713736984512170635');" onmouseout="out('2713736984512170635');" style=""> 646                         .put(&quot;high&quot;, forecast.maxTemp - 273)                                             </span>
<span class="8922707616504433133" onmouseenter="enter('8922707616504433133');" onmouseout="out('8922707616504433133');" style=""> 647                         .put(&quot;low&quot;, forecast.minTemp - 273)                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 648                 );                                                                                       </span>
<span class="-1631419655189706967" onmouseenter="enter('-1631419655189706967');" onmouseout="out('-1631419655189706967');" style=""> 649                 if (++i == 3) break; // max 3                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650             }                                                                                            </span>
<span  style=""> 651                                                                                                          </span>
<span class="1945247200353653685" onmouseenter="enter('1945247200353653685');" onmouseout="out('1945247200353653685');" style=""> 652             JSONArray forecastDayArray = new JSONArray();                                                </span>
<span class="-3162654741636225130" onmouseenter="enter('-3162654741636225130');" onmouseout="out('-3162654741636225130');" style=""> 653             final int[] hours = {0, 0, 0};                                                               </span>
<span  style=""> 654                                                                                                          </span>
<span class="6125525781312818118" onmouseenter="enter('6125525781312818118');" onmouseout="out('6125525781312818118');" style=""> 655             for (int hour : hours) {                                                                     </span>
<span class="1068601706398434110" onmouseenter="enter('1068601706398434110');" onmouseout="out('1068601706398434110');" style=""> 656                 forecastDayArray.put(new JSONObject()                                                    </span>
<span class="-3870856117199987769" onmouseenter="enter('-3870856117199987769');" onmouseout="out('-3870856117199987769');" style=""> 657                         .put(&quot;hour&quot;, hour)                                                               </span>
<span class="-6006964472079792051" onmouseenter="enter('-6006964472079792051');" onmouseout="out('-6006964472079792051');" style=""> 658                         .put(&quot;cond_id&quot;, 0)                                                               </span>
<span class="-6609285657661916066" onmouseenter="enter('-6609285657661916066');" onmouseout="out('-6609285657661916066');" style=""> 659                         .put(&quot;temp&quot;, 0)                                                                  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 660                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661             }                                                                                            </span>
<span  style=""> 662                                                                                                          </span>
<span  style=""> 663                                                                                                          </span>
<span class="3790951608586851062" onmouseenter="enter('3790951608586851062');" onmouseout="out('3790951608586851062');" style=""> 664             JSONObject forecastResponseObject = new JSONObject()                                         </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 665                     .put(&quot;res&quot;, new JSONObject()                                                         </span>
<span class="3332377282695166753" onmouseenter="enter('3332377282695166753');" onmouseout="out('3332377282695166753');" style=""> 666                             .put(&quot;id&quot;, 0)                                                                </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 667                             .put(&quot;set&quot;, new JSONObject()                                                 </span>
<span class="7467737770827774855" onmouseenter="enter('7467737770827774855');" onmouseout="out('7467737770827774855');" style=""> 668                                     .put(&quot;weatherApp._.config.locations&quot;, new JSONArray()                </span>
<span class="-2773638428741427529" onmouseenter="enter('-2773638428741427529');" onmouseout="out('-2773638428741427529');" style=""> 669                                             .put(new JSONObject()                                        </span>
<span class="3913809787685967455" onmouseenter="enter('3913809787685967455');" onmouseout="out('3913809787685967455');" style=""> 670                                                     .put(&quot;alive&quot;, ts + 60 * 60)                          </span>
<span class="886713691773163342" onmouseenter="enter('886713691773163342');" onmouseout="out('886713691773163342');" style=""> 671                                                     .put(&quot;city&quot;, weatherSpec.location)                   </span>
<span class="4823146304358131104" onmouseenter="enter('4823146304358131104');" onmouseout="out('4823146304358131104');" style=""> 672                                                     .put(&quot;unit&quot;, &quot;c&quot;) // FIXME: do not hardcode          </span>
<span class="3465794128886265400" onmouseenter="enter('3465794128886265400');" onmouseout="out('3465794128886265400');" style=""> 673                                                     .put(&quot;temp&quot;, weatherSpec.currentTemp - 273)          </span>
<span class="6957530022753247995" onmouseenter="enter('6957530022753247995');" onmouseout="out('6957530022753247995');" style=""> 674                                                     .put(&quot;high&quot;, weatherSpec.todayMaxTemp - 273)         </span>
<span class="-7717570350252662201" onmouseenter="enter('-7717570350252662201');" onmouseout="out('-7717570350252662201');" style=""> 675                                                     .put(&quot;low&quot;, weatherSpec.todayMinTemp - 273)          </span>
<span class="-5985677233453575860" onmouseenter="enter('-5985677233453575860');" onmouseout="out('-5985677233453575860');" style=""> 676                                                     .put(&quot;rain&quot;, 0)                                      </span>
<span class="-2978941176103258929" onmouseenter="enter('-2978941176103258929');" onmouseout="out('-2978941176103258929');" style=""><abbr title=" 677                                                     .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.currentConditionCode, false)) // FIXME do not assume daylight"> 677                                                     .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.cðŸ”µ</abbr></span>
<span class="-3427053046266686031" onmouseenter="enter('-3427053046266686031');" onmouseout="out('-3427053046266686031');" style=""> 678                                                     .put(&quot;forecast_day&quot;, forecastDayArray)               </span>
<span class="-6314376065462434614" onmouseenter="enter('-6314376065462434614');" onmouseout="out('-6314376065462434614');" style=""> 679                                                     .put(&quot;forecast_week&quot;, forecastWeekArray)             </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 680                                             )                                                            </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 681                                     )                                                                    </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 682                             )                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 683                     );                                                                                   </span>
<span  style=""> 684                                                                                                          </span>
<span class="5488486443475038572" onmouseenter="enter('5488486443475038572');" onmouseout="out('5488486443475038572');" style=""> 685             queueWrite(new JsonPutRequest(forecastResponseObject, this));                                </span>
<span  style=""> 686                                                                                                          </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 687         } catch (JSONException e) {                                                                      </span>
<span class="-3518979045088336375" onmouseenter="enter('-3518979045088336375');" onmouseout="out('-3518979045088336375');" style=""> 688             logger.error(&quot;JSON exception: &quot;, e);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 690     }                                                                                                    </span>
<span  style=""> 691                                                                                                          </span>
<span  style=""> 692                                                                                                          </span>
<span class="-8903998240903156866" onmouseenter="enter('-8903998240903156866');" onmouseout="out('-8903998240903156866');" style=""> 693     // this was used to enumerate the weather icons :)                                                   </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 694     /*                                                                                                   </span>
<span class="9097322268338941135" onmouseenter="enter('9097322268338941135');" onmouseout="out('9097322268338941135');" style=""> 695     static int i = 0;                                                                                    </span>
<span  style=""> 696                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 697     @Override                                                                                            </span>
<span class="-1180224994468071186" onmouseenter="enter('-1180224994468071186');" onmouseout="out('-1180224994468071186');" style=""> 698     public void onTestNewFunction() {                                                                    </span>
<span class="-580696616137890311" onmouseenter="enter('-580696616137890311');" onmouseout="out('-580696616137890311');" style=""> 699         long ts = System.currentTimeMillis();                                                            </span>
<span class="-8981233749074677785" onmouseenter="enter('-8981233749074677785');" onmouseout="out('-8981233749074677785');" style=""> 700         ts /= 1000;                                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 701         try {                                                                                            </span>
<span class="-4452014417400702333" onmouseenter="enter('-4452014417400702333');" onmouseout="out('-4452014417400702333');" style=""> 702             JSONObject responseObject = new JSONObject()                                                 </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 703                     .put(&quot;res&quot;, new JSONObject()                                                         </span>
<span class="-311134376594128902" onmouseenter="enter('-311134376594128902');" onmouseout="out('-311134376594128902');" style=""> 704                             .put(&quot;id&quot;, 0) // seems the id does not matter?                               </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 705                             .put(&quot;set&quot;, new JSONObject()                                                 </span>
<span class="-7491386685560898919" onmouseenter="enter('-7491386685560898919');" onmouseout="out('-7491386685560898919');" style=""> 706                                     .put(&quot;weatherInfo&quot;, new JSONObject()                                 </span>
<span class="3913809787685967455" onmouseenter="enter('3913809787685967455');" onmouseout="out('3913809787685967455');" style=""> 707                                             .put(&quot;alive&quot;, ts + 60 * 60)                                  </span>
<span class="8812574869889008786" onmouseenter="enter('8812574869889008786');" onmouseout="out('8812574869889008786');" style=""> 708                                             .put(&quot;unit&quot;, &quot;c&quot;)                                            </span>
<span class="-9027201993479344069" onmouseenter="enter('-9027201993479344069');" onmouseout="out('-9027201993479344069');" style=""> 709                                             .put(&quot;temp&quot;, i)                                              </span>
<span class="-503000518492904339" onmouseenter="enter('-503000518492904339');" onmouseout="out('-503000518492904339');" style=""> 710                                             .put(&quot;cond_id&quot;, i++)                                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 711                                     )                                                                    </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 712                             ));                                                                          </span>
<span  style=""> 713                                                                                                          </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 714             queueWrite(new JsonPutRequest(responseObject, this));                                        </span>
<span  style=""> 715                                                                                                          </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 716         } catch (JSONException e) {                                                                      </span>
<span class="-255862428648050787" onmouseenter="enter('-255862428648050787');" onmouseout="out('-255862428648050787');" style=""> 717             logger.error(&quot; JSON exception: &quot;, e);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 718         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 719     }                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 720 */                                                                                                       </span>
<span class="4061760400153145133" onmouseenter="enter('4061760400153145133');" onmouseout="out('4061760400153145133');" style=""> 721     public byte[] getSecretKey() {                                                                       </span>
<span class="877865931329337758" onmouseenter="enter('877865931329337758');" onmouseout="out('877865931329337758');" style=""> 722         byte[] authKeyBytes = new byte[16];                                                              </span>
<span  style=""> 723                                                                                                          </span>
<span class="6732301069337237036" onmouseenter="enter('6732301069337237036');" onmouseout="out('6732301069337237036');" style=""><abbr title=" 724         SharedPreferences sharedPrefs = GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddress());"> 724         SharedPreferences sharedPrefs = GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getðŸ”µ</abbr></span>
<span  style=""> 725                                                                                                          </span>
<span class="-3395951777279535435" onmouseenter="enter('-3395951777279535435');" onmouseout="out('-3395951777279535435');" style=""> 726         String authKey = sharedPrefs.getString(&quot;authkey&quot;, null);                                         </span>
<span class="-7368286337752989387" onmouseenter="enter('-7368286337752989387');" onmouseout="out('-7368286337752989387');" style=""> 727         if (authKey != null &amp;&amp; !authKey.isEmpty()) {                                                     </span>
<span class="-7318628780836353920" onmouseenter="enter('-7318628780836353920');" onmouseout="out('-7318628780836353920');" style=""> 728             byte[] srcBytes = authKey.trim().getBytes();                                                 </span>
<span class="-7029558868717651202" onmouseenter="enter('-7029558868717651202');" onmouseout="out('-7029558868717651202');" style=""> 729             if (authKey.length() == 34 &amp;&amp; authKey.startsWith(&quot;0x&quot;)) {                                    </span>
<span class="3552614168594468794" onmouseenter="enter('3552614168594468794');" onmouseout="out('3552614168594468794');" style=""> 730                 srcBytes = GB.hexStringToByteArray(authKey.substring(2));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 731             }                                                                                            </span>
<span class="6598760317559003341" onmouseenter="enter('6598760317559003341');" onmouseout="out('6598760317559003341');" style=""> 732             System.arraycopy(srcBytes, 0, authKeyBytes, 0, Math.min(srcBytes.length, 16));               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733         }                                                                                                </span>
<span  style=""> 734                                                                                                          </span>
<span class="340030267486824060" onmouseenter="enter('340030267486824060');" onmouseout="out('340030267486824060');" style=""> 735         return authKeyBytes;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 736     }                                                                                                    </span>
<span  style=""> 737                                                                                                          </span>
<span class="1797454318126944117" onmouseenter="enter('1797454318126944117');" onmouseout="out('1797454318126944117');" style=""> 738     public void setPhoneRandomNumber(byte[] phoneRandomNumber) {                                         </span>
<span class="-1045014803983093080" onmouseenter="enter('-1045014803983093080');" onmouseout="out('-1045014803983093080');" style=""> 739         this.phoneRandomNumber = phoneRandomNumber;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740     }                                                                                                    </span>
<span  style=""> 741                                                                                                          </span>
<span class="6353599412516657012" onmouseenter="enter('6353599412516657012');" onmouseout="out('6353599412516657012');" style=""> 742     public byte[] getPhoneRandomNumber() {                                                               </span>
<span class="-8473936821502081479" onmouseenter="enter('-8473936821502081479');" onmouseout="out('-8473936821502081479');" style=""> 743         return phoneRandomNumber;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744     }                                                                                                    </span>
<span  style=""> 745                                                                                                          </span>
<span class="8524954629356124134" onmouseenter="enter('8524954629356124134');" onmouseout="out('8524954629356124134');" style=""> 746     public void setWatchRandomNumber(byte[] watchRandomNumber) {                                         </span>
<span class="-8554456578054756330" onmouseenter="enter('-8554456578054756330');" onmouseout="out('-8554456578054756330');" style=""> 747         this.watchRandomNumber = watchRandomNumber;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 748     }                                                                                                    </span>
<span  style=""> 749                                                                                                          </span>
<span class="-817141622160847580" onmouseenter="enter('-817141622160847580');" onmouseout="out('-817141622160847580');" style=""> 750     public byte[] getWatchRandomNumber() {                                                               </span>
<span class="4512956887887166379" onmouseenter="enter('4512956887887166379');" onmouseout="out('4512956887887166379');" style=""> 751         return watchRandomNumber;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 752     }                                                                                                    </span>
<span  style=""> 753                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 754     @Override                                                                                            </span>
<span class="-8332902696773003591" onmouseenter="enter('-8332902696773003591');" onmouseout="out('-8332902696773003591');" style=""> 755     public void overwriteButtons(String jsonConfigString) {                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 756         try {                                                                                            </span>
<span class="-5757883755283420088" onmouseenter="enter('-5757883755283420088');" onmouseout="out('-5757883755283420088');" style=""> 757             JSONArray jsonArray = new JSONArray(                                                         </span>
<span class="-5162550843991564685" onmouseenter="enter('-5162550843991564685');" onmouseout="out('-5162550843991564685');" style=""> 758                     GBApplication.getPrefs().getString(HRConfigActivity.CONFIG_KEY_Q_ACTIONS, &quot;[]&quot;)      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 759             );                                                                                           </span>
<span class="-3670193080643996757" onmouseenter="enter('-3670193080643996757');" onmouseout="out('-3670193080643996757');" style=""> 760             String[] menuItems = new String[jsonArray.length()];                                         </span>
<span class="3800396328797868230" onmouseenter="enter('3800396328797868230');" onmouseout="out('3800396328797868230');" style=""> 761             for (int i = 0; i &lt; jsonArray.length(); i++) menuItems[i] = jsonArray.getString(i);          </span>
<span  style=""> 762                                                                                                          </span>
<span class="-8974533950525390112" onmouseenter="enter('-8974533950525390112');" onmouseout="out('-8974533950525390112');" style=""> 763             SharedPreferences prefs = getDeviceSpecificPreferences();                                    </span>
<span class="3731441667100257289" onmouseenter="enter('3731441667100257289');" onmouseout="out('3731441667100257289');" style=""><abbr title=" 764             String upperButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_1_FUNCTION, &quot;weatherApp&quot;);"> 764             String upperButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_1_FUNCTION,ðŸ”µ</abbr></span>
<span class="8778701870293152792" onmouseenter="enter('8778701870293152792');" onmouseout="out('8778701870293152792');" style=""><abbr title=" 765             String middleButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_2_FUNCTION, &quot;commuteApp&quot;);"> 765             String middleButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_2_FUNCTIONðŸ”µ</abbr></span>
<span class="-9179810663962091339" onmouseenter="enter('-9179810663962091339');" onmouseout="out('-9179810663962091339');" style=""><abbr title=" 766             String lowerButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_3_FUNCTION, &quot;musicApp&quot;);"> 766             String lowerButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_3_FUNCTION,ðŸ”µ</abbr></span>
<span  style=""> 767                                                                                                          </span>
<span class="-2546877682423996320" onmouseenter="enter('-2546877682423996320');" onmouseout="out('-2546877682423996320');" style=""> 768             queueWrite(new ButtonConfigurationPutRequest(                                                </span>
<span class="959305012337743007" onmouseenter="enter('959305012337743007');" onmouseout="out('959305012337743007');" style=""> 769                     menuItems,                                                                           </span>
<span class="-2429855445172031576" onmouseenter="enter('-2429855445172031576');" onmouseout="out('-2429855445172031576');" style=""> 770                     upperButtonApp,                                                                      </span>
<span class="7250962454256273524" onmouseenter="enter('7250962454256273524');" onmouseout="out('7250962454256273524');" style=""> 771                     middleButtonApp,                                                                     </span>
<span class="3869959890859912879" onmouseenter="enter('3869959890859912879');" onmouseout="out('3869959890859912879');" style=""> 772                     lowerButtonApp,                                                                      </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 773                     this                                                                                 </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 774             ));                                                                                          </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 775         } catch (JSONException e) {                                                                      </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 776             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 777         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778     }                                                                                                    </span>
<span  style=""> 779                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 780     @Override                                                                                            </span>
<span class="349159621018699769" onmouseenter="enter('349159621018699769');" onmouseout="out('349159621018699769');" style=""> 781     public void onSendConfiguration(String config) {                                                     </span>
<span class="-5681424438451116078" onmouseenter="enter('-5681424438451116078');" onmouseout="out('-5681424438451116078');" style=""> 782         switch (config) {                                                                                </span>
<span class="-3013237703294184776" onmouseenter="enter('-3013237703294184776');" onmouseout="out('-3013237703294184776');" style=""> 783             case DeviceSettingsPreferenceConst.PREF_BUTTON_1_FUNCTION:                                   </span>
<span class="4315270877947230307" onmouseenter="enter('4315270877947230307');" onmouseout="out('4315270877947230307');" style=""> 784             case DeviceSettingsPreferenceConst.PREF_BUTTON_2_FUNCTION:                                   </span>
<span class="-6016648312979442964" onmouseenter="enter('-6016648312979442964');" onmouseout="out('-6016648312979442964');" style=""> 785             case DeviceSettingsPreferenceConst.PREF_BUTTON_3_FUNCTION:                                   </span>
<span class="-7476048809216327685" onmouseenter="enter('-7476048809216327685');" onmouseout="out('-7476048809216327685');" style=""> 786                 overwriteButtons(null);                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 787                 break;                                                                                   </span>
<span class="4621265622900955004" onmouseenter="enter('4621265622900955004');" onmouseout="out('4621265622900955004');" style=""> 788             case DeviceSettingsPreferenceConst.PREF_VIBRATION_STRENGH_PERCENTAGE:                        </span>
<span class="-4331994456315640395" onmouseenter="enter('-4331994456315640395');" onmouseout="out('-4331994456315640395');" style=""> 789                 setVibrationStrength();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 791     }                                                                                                    </span>
<span  style=""> 792                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 793     @Override                                                                                            </span>
<span class="-1745999502816791714" onmouseenter="enter('-1745999502816791714');" onmouseout="out('-1745999502816791714');" style=""> 794     public void handleHeartRateCharacteristic(BluetoothGattCharacteristic characteristic) {              </span>
<span class="644393070755783970" onmouseenter="enter('644393070755783970');" onmouseout="out('644393070755783970');" style=""> 795         super.handleHeartRateCharacteristic(characteristic);                                             </span>
<span  style=""> 796                                                                                                          </span>
<span class="-4350509998999229188" onmouseenter="enter('-4350509998999229188');" onmouseout="out('-4350509998999229188');" style=""> 797         byte[] value = characteristic.getValue();                                                        </span>
<span  style=""> 798                                                                                                          </span>
<span class="3002516447616481759" onmouseenter="enter('3002516447616481759');" onmouseout="out('3002516447616481759');" style=""> 799         int heartRate = value[1];                                                                        </span>
<span  style=""> 800                                                                                                          </span>
<span class="-3503506213363643375" onmouseenter="enter('-3503506213363643375');" onmouseout="out('-3503506213363643375');" style=""> 801         logger.debug(&quot;heart rate: &quot; + heartRate);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 802     }                                                                                                    </span>
<span  style=""> 803                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 804     @Override                                                                                            </span>
<span class="6377473851875601996" onmouseenter="enter('6377473851875601996');" onmouseout="out('6377473851875601996');" style=""> 805     protected void handleBackgroundCharacteristic(BluetoothGattCharacteristic characteristic) {          </span>
<span class="-2825981250293151244" onmouseenter="enter('-2825981250293151244');" onmouseout="out('-2825981250293151244');" style=""> 806         super.handleBackgroundCharacteristic(characteristic);                                            </span>
<span  style=""> 807                                                                                                          </span>
<span class="-4350509998999229188" onmouseenter="enter('-4350509998999229188');" onmouseout="out('-4350509998999229188');" style=""> 808         byte[] value = characteristic.getValue();                                                        </span>
<span  style=""> 809                                                                                                          </span>
<span class="-8910138668401756259" onmouseenter="enter('-8910138668401756259');" onmouseout="out('-8910138668401756259');" style=""> 810         byte requestType = value[1];                                                                     </span>
<span  style=""> 811                                                                                                          </span>
<span class="-188939088446447101" onmouseenter="enter('-188939088446447101');" onmouseout="out('-188939088446447101');" style=""> 812         if(requestType == (byte) 0x04){                                                                  </span>
<span class="-7559460541575142851" onmouseenter="enter('-7559460541575142851');" onmouseout="out('-7559460541575142851');" style=""> 813             handleCallRequest(value);                                                                    </span>
<span class="8941437976865019066" onmouseenter="enter('8941437976865019066');" onmouseout="out('8941437976865019066');" style=""> 814         }else if (requestType == (byte) 0x05) {                                                          </span>
<span class="-6049325109739304315" onmouseenter="enter('-6049325109739304315');" onmouseout="out('-6049325109739304315');" style=""> 815             handleMusicRequest(value);                                                                   </span>
<span class="-1129186254434475226" onmouseenter="enter('-1129186254434475226');" onmouseout="out('-1129186254434475226');" style=""> 816         } else if (requestType == (byte) 0x01) {                                                         </span>
<span class="5556569467739549651" onmouseenter="enter('5556569467739549651');" onmouseout="out('5556569467739549651');" style=""> 817             int eventId = value[2];                                                                      </span>
<span class="4584038208845194803" onmouseenter="enter('4584038208845194803');" onmouseout="out('4584038208845194803');" style=""> 818             logger.info(&quot;got event id &quot; + eventId);                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 819             try {                                                                                        </span>
<span class="2511008795236813092" onmouseenter="enter('2511008795236813092');" onmouseout="out('2511008795236813092');" style=""> 820                 String jsonString = new String(value, 3, value.length - 3);                              </span>
<span class="-5055085421008485579" onmouseenter="enter('-5055085421008485579');" onmouseout="out('-5055085421008485579');" style=""> 821                 logger.info(jsonString);                                                                 </span>
<span class="7978684515011278150" onmouseenter="enter('7978684515011278150');" onmouseout="out('7978684515011278150');" style=""> 822                 JSONObject requestJson = new JSONObject(jsonString);                                     </span>
<span  style=""> 823                                                                                                          </span>
<span class="-2320957157152693274" onmouseenter="enter('-2320957157152693274');" onmouseout="out('-2320957157152693274');" style=""> 824                 JSONObject request = requestJson.getJSONObject(&quot;req&quot;);                                   </span>
<span class="-4724867393653322739" onmouseenter="enter('-4724867393653322739');" onmouseout="out('-4724867393653322739');" style=""> 825                 int requestId = request.getInt(&quot;id&quot;);                                                    </span>
<span  style=""> 826                                                                                                          </span>
<span class="-9049634342561224124" onmouseenter="enter('-9049634342561224124');" onmouseout="out('-9049634342561224124');" style=""> 827                 if (request.has(&quot;ringMyPhone&quot;)) {                                                        </span>
<span class="-8947281113981412895" onmouseenter="enter('-8947281113981412895');" onmouseout="out('-8947281113981412895');" style=""> 828                     String action = request.getJSONObject(&quot;ringMyPhone&quot;).getString(&quot;action&quot;);            </span>
<span class="2672973027305420404" onmouseenter="enter('2672973027305420404');" onmouseout="out('2672973027305420404');" style=""> 829                     logger.info(&quot;got ringMyPhone request; &quot; + action);                                   </span>
<span class="-5388490694046828121" onmouseenter="enter('-5388490694046828121');" onmouseout="out('-5388490694046828121');" style=""> 830                     GBDeviceEventFindPhone findPhoneEvent = new GBDeviceEventFindPhone();                </span>
<span  style=""> 831                                                                                                          </span>
<span class="-4452014417400702333" onmouseenter="enter('-4452014417400702333');" onmouseout="out('-4452014417400702333');" style=""> 832                     JSONObject responseObject = new JSONObject()                                         </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 833                             .put(&quot;res&quot;, new JSONObject()                                                 </span>
<span class="1179326437824087972" onmouseenter="enter('1179326437824087972');" onmouseout="out('1179326437824087972');" style=""> 834                                     .put(&quot;id&quot;, requestId)                                                </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 835                                     .put(&quot;set&quot;, new JSONObject()                                         </span>
<span class="-1885979276882630426" onmouseenter="enter('-1885979276882630426');" onmouseout="out('-1885979276882630426');" style=""> 836                                             .put(&quot;ringMyPhone&quot;, new JSONObject()                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 837                                             )                                                            </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 838                                     )                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 839                             );                                                                           </span>
<span  style=""> 840                                                                                                          </span>
<span class="8447204792056966026" onmouseenter="enter('8447204792056966026');" onmouseout="out('8447204792056966026');" style=""> 841                     if (&quot;on&quot;.equals(action)) {                                                           </span>
<span class="-2212046129077350542" onmouseenter="enter('-2212046129077350542');" onmouseout="out('-2212046129077350542');" style=""> 842                         findPhoneEvent.event = GBDeviceEventFindPhone.Event.START;                       </span>
<span class="1008493374584433440" onmouseenter="enter('1008493374584433440');" onmouseout="out('1008493374584433440');" style=""> 843                         getDeviceSupport().evaluateGBDeviceEvent(findPhoneEvent);                        </span>
<span class="7519888082405137596" onmouseenter="enter('7519888082405137596');" onmouseout="out('7519888082405137596');" style=""> 844                         responseObject                                                                   </span>
<span class="9073084076350179656" onmouseenter="enter('9073084076350179656');" onmouseout="out('9073084076350179656');" style=""> 845                                 .getJSONObject(&quot;res&quot;)                                                    </span>
<span class="8250331190708228233" onmouseenter="enter('8250331190708228233');" onmouseout="out('8250331190708228233');" style=""> 846                                 .getJSONObject(&quot;set&quot;)                                                    </span>
<span class="-5085635855523546299" onmouseenter="enter('-5085635855523546299');" onmouseout="out('-5085635855523546299');" style=""> 847                                 .getJSONObject(&quot;ringMyPhone&quot;)                                            </span>
<span class="1178745681736221021" onmouseenter="enter('1178745681736221021');" onmouseout="out('1178745681736221021');" style=""> 848                                 .put(&quot;result&quot;, &quot;on&quot;);                                                    </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 849                         queueWrite(new JsonPutRequest(responseObject, this));                            </span>
<span class="1879749671025083715" onmouseenter="enter('1879749671025083715');" onmouseout="out('1879749671025083715');" style=""> 850                     } else if (&quot;off&quot;.equals(action)) {                                                   </span>
<span class="-7600947716940752063" onmouseenter="enter('-7600947716940752063');" onmouseout="out('-7600947716940752063');" style=""> 851                         findPhoneEvent.event = GBDeviceEventFindPhone.Event.STOP;                        </span>
<span class="1008493374584433440" onmouseenter="enter('1008493374584433440');" onmouseout="out('1008493374584433440');" style=""> 852                         getDeviceSupport().evaluateGBDeviceEvent(findPhoneEvent);                        </span>
<span class="7519888082405137596" onmouseenter="enter('7519888082405137596');" onmouseout="out('7519888082405137596');" style=""> 853                         responseObject                                                                   </span>
<span class="9073084076350179656" onmouseenter="enter('9073084076350179656');" onmouseout="out('9073084076350179656');" style=""> 854                                 .getJSONObject(&quot;res&quot;)                                                    </span>
<span class="8250331190708228233" onmouseenter="enter('8250331190708228233');" onmouseout="out('8250331190708228233');" style=""> 855                                 .getJSONObject(&quot;set&quot;)                                                    </span>
<span class="-5085635855523546299" onmouseenter="enter('-5085635855523546299');" onmouseout="out('-5085635855523546299');" style=""> 856                                 .getJSONObject(&quot;ringMyPhone&quot;)                                            </span>
<span class="211329696159530084" onmouseenter="enter('211329696159530084');" onmouseout="out('211329696159530084');" style=""> 857                                 .put(&quot;result&quot;, &quot;off&quot;);                                                   </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 858                         queueWrite(new JsonPutRequest(responseObject, this));                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 859                     }                                                                                    </span>
<span class="-7323615196530492579" onmouseenter="enter('-7323615196530492579');" onmouseout="out('-7323615196530492579');" style=""> 860                 } else if (request.has(&quot;weatherInfo&quot;) || request.has(&quot;weatherApp._.config.locations&quot;)) { </span>
<span class="85506892621979159" onmouseenter="enter('85506892621979159');" onmouseout="out('85506892621979159');" style=""> 861                     logger.info(&quot;Got weatherInfo request&quot;);                                              </span>
<span class="6306353349066792310" onmouseenter="enter('6306353349066792310');" onmouseout="out('6306353349066792310');" style=""> 862                     WeatherSpec weatherSpec = Weather.getInstance().getWeatherSpec();                    </span>
<span class="-6517897774017589507" onmouseenter="enter('-6517897774017589507');" onmouseout="out('-6517897774017589507');" style=""> 863                     if (weatherSpec != null) {                                                           </span>
<span class="850959570716159748" onmouseenter="enter('850959570716159748');" onmouseout="out('850959570716159748');" style=""> 864                         onSendWeather(weatherSpec);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 865                     } else {                                                                             </span>
<span class="-4814341531313102419" onmouseenter="enter('-4814341531313102419');" onmouseout="out('-4814341531313102419');" style=""> 866                         logger.info(&quot;no weather data available  - ignoring request&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 867                     }                                                                                    </span>
<span class="-3372250782701972691" onmouseenter="enter('-3372250782701972691');" onmouseout="out('-3372250782701972691');" style=""> 868                 } else if (request.has(&quot;commuteApp._.config.commute_info&quot;)) {                            </span>
<span class="-7484039887953392259" onmouseenter="enter('-7484039887953392259');" onmouseout="out('-7484039887953392259');" style=""> 869                     String action = request.getJSONObject(&quot;commuteApp._.config.commute_info&quot;)            </span>
<span class="-2601365183494494605" onmouseenter="enter('-2601365183494494605');" onmouseout="out('-2601365183494494605');" style=""> 870                             .getString(&quot;dest&quot;);                                                          </span>
<span  style=""> 871                                                                                                          </span>
<span class="8677829822000511176" onmouseenter="enter('8677829822000511176');" onmouseout="out('8677829822000511176');" style=""> 872                     String startStop = request.getJSONObject(&quot;commuteApp._.config.commute_info&quot;)         </span>
<span class="4504014461373376475" onmouseenter="enter('4504014461373376475');" onmouseout="out('4504014461373376475');" style=""> 873                             .getString(&quot;action&quot;);                                                        </span>
<span  style=""> 874                                                                                                          </span>
<span class="-187304836507611230" onmouseenter="enter('-187304836507611230');" onmouseout="out('-187304836507611230');" style=""> 875                     if (startStop.equals(&quot;stop&quot;)) {                                                      </span>
<span class="3122353555208900571" onmouseenter="enter('3122353555208900571');" onmouseout="out('3122353555208900571');" style=""> 876                         // overwriteButtons(null);                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 877                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 878                     }                                                                                    </span>
<span  style=""> 879                                                                                                          </span>
<span class="1150832081372187083" onmouseenter="enter('1150832081372187083');" onmouseout="out('1150832081372187083');" style=""> 880                     queueWrite(new SetCommuteMenuMessage(&quot;Anfrage wird weitergeleitet...&quot;, false, this));</span>
<span  style=""> 881                                                                                                          </span>
<span class="5917993708031460775" onmouseenter="enter('5917993708031460775');" onmouseout="out('5917993708031460775');" style=""> 882                     Intent menuIntent = new Intent(QHybridSupport.QHYBRID_EVENT_COMMUTE_MENU);           </span>
<span class="-7593836382272947716" onmouseenter="enter('-7593836382272947716');" onmouseout="out('-7593836382272947716');" style=""> 883                     menuIntent.putExtra(&quot;EXTRA_ACTION&quot;, action);                                         </span>
<span class="-3894772479235782461" onmouseenter="enter('-3894772479235782461');" onmouseout="out('-3894772479235782461');" style=""> 884                     getContext().sendBroadcast(menuIntent);                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 885                 } else {                                                                                 </span>
<span class="5137598666970820784" onmouseenter="enter('5137598666970820784');" onmouseout="out('5137598666970820784');" style=""> 886                     logger.warn(&quot;Unhandled request from watch: &quot; + requestJson.toString());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 887                 }                                                                                        </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 888             } catch (JSONException e) {                                                                  </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 889                 e.printStackTrace();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 890             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 892     }                                                                                                    </span>
<span  style=""> 893                                                                                                          </span>
<span class="-6400233286061743273" onmouseenter="enter('-6400233286061743273');" onmouseout="out('-6400233286061743273');" style=""> 894     private void handleCallRequest(byte[] value) {                                                       </span>
<span class="-3590644139230548939" onmouseenter="enter('-3590644139230548939');" onmouseout="out('-3590644139230548939');" style=""> 895         boolean acceptCall = value[7] == (byte) 0x00;                                                    </span>
<span class="4049879043820680121" onmouseenter="enter('4049879043820680121');" onmouseout="out('4049879043820680121');" style=""> 896         queueWrite(new PlayCallNotificationRequest(&quot;&quot;, false, this));                                    </span>
<span  style=""> 897                                                                                                          </span>
<span class="6665458041909146094" onmouseenter="enter('6665458041909146094');" onmouseout="out('6665458041909146094');" style=""> 898         GBDeviceEventCallControl callControlEvent = new GBDeviceEventCallControl();                      </span>
<span class="3689026460844638555" onmouseenter="enter('3689026460844638555');" onmouseout="out('3689026460844638555');" style=""><abbr title=" 899         callControlEvent.event = acceptCall ? GBDeviceEventCallControl.Event.START : GBDeviceEventCallControl.Event.REJECT;"> 899         callControlEvent.event = acceptCall ? GBDeviceEventCallControl.Event.START : GBDeviceEventCallConðŸ”µ</abbr></span>
<span  style=""> 900                                                                                                          </span>
<span class="4738702385903726677" onmouseenter="enter('4738702385903726677');" onmouseout="out('4738702385903726677');" style=""> 901         getDeviceSupport().evaluateGBDeviceEvent(callControlEvent);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 902     }                                                                                                    </span>
<span  style=""> 903                                                                                                          </span>
<span class="8416553974703547913" onmouseenter="enter('8416553974703547913');" onmouseout="out('8416553974703547913');" style=""> 904     private void handleMusicRequest(byte[] value) {                                                      </span>
<span class="-7264442020313207444" onmouseenter="enter('-7264442020313207444');" onmouseout="out('-7264442020313207444');" style=""> 905         byte command = value[3];                                                                         </span>
<span class="439297978283151496" onmouseenter="enter('439297978283151496');" onmouseout="out('439297978283151496');" style=""> 906         logger.info(&quot;got music command: &quot; + command);                                                    </span>
<span class="-1813511864680047347" onmouseenter="enter('-1813511864680047347');" onmouseout="out('-1813511864680047347');" style=""> 907         MUSIC_WATCH_REQUEST request = MUSIC_WATCH_REQUEST.fromCommandByte(command);                      </span>
<span  style=""> 908                                                                                                          </span>
<span class="-5683743334008418698" onmouseenter="enter('-5683743334008418698');" onmouseout="out('-5683743334008418698');" style=""> 909         GBDeviceEventMusicControl deviceEventMusicControl = new GBDeviceEventMusicControl();             </span>
<span class="-3093471053493654809" onmouseenter="enter('-3093471053493654809');" onmouseout="out('-3093471053493654809');" style=""> 910         deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.PLAY;                            </span>
<span  style=""> 911                                                                                                          </span>
<span class="-5367969794814104253" onmouseenter="enter('-5367969794814104253');" onmouseout="out('-5367969794814104253');" style=""> 912         // TODO add skipping/seeking                                                                     </span>
<span  style=""> 913                                                                                                          </span>
<span class="-1476594108120808605" onmouseenter="enter('-1476594108120808605');" onmouseout="out('-1476594108120808605');" style=""> 914         switch (request) {                                                                               </span>
<span class="-7604808754482491529" onmouseenter="enter('-7604808754482491529');" onmouseout="out('-7604808754482491529');" style=""> 915             case MUSIC_REQUEST_PLAY_PAUSE: {                                                             </span>
<span class="6628176114625634916" onmouseenter="enter('6628176114625634916');" onmouseout="out('6628176114625634916');" style=""> 916                 queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_PLAY_PAUSE));       </span>
<span class="-7292571951332838856" onmouseenter="enter('-7292571951332838856');" onmouseout="out('-7292571951332838856');" style=""> 917                 deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.PLAYPAUSE;               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 918                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 919             }                                                                                            </span>
<span class="-3513943256990950658" onmouseenter="enter('-3513943256990950658');" onmouseout="out('-3513943256990950658');" style=""> 920             case MUSIC_REQUEST_NEXT: {                                                                   </span>
<span class="-2914236159900871664" onmouseenter="enter('-2914236159900871664');" onmouseout="out('-2914236159900871664');" style=""> 921                 queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_NEXT));             </span>
<span class="7432071170862747108" onmouseenter="enter('7432071170862747108');" onmouseout="out('7432071170862747108');" style=""> 922                 deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.NEXT;                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 923                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 924             }                                                                                            </span>
<span class="-320503160388671458" onmouseenter="enter('-320503160388671458');" onmouseout="out('-320503160388671458');" style=""> 925             case MUSIC_REQUEST_PREVIOUS: {                                                               </span>
<span class="6742500320012674264" onmouseenter="enter('6742500320012674264');" onmouseout="out('6742500320012674264');" style=""> 926                 queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_PREVIOUS));         </span>
<span class="-101590717290727599" onmouseenter="enter('-101590717290727599');" onmouseout="out('-101590717290727599');" style=""> 927                 deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.PREVIOUS;                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 928                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 929             }                                                                                            </span>
<span class="5859425638057110790" onmouseenter="enter('5859425638057110790');" onmouseout="out('5859425638057110790');" style=""> 930             case MUSIC_REQUEST_LOUDER: {                                                                 </span>
<span class="-3857602001706076214" onmouseenter="enter('-3857602001706076214');" onmouseout="out('-3857602001706076214');" style=""> 931                 queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_LOUDER));           </span>
<span class="-6752597915337654134" onmouseenter="enter('-6752597915337654134');" onmouseout="out('-6752597915337654134');" style=""> 932                 deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.VOLUMEUP;                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 933                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 934             }                                                                                            </span>
<span class="3750638360823897863" onmouseenter="enter('3750638360823897863');" onmouseout="out('3750638360823897863');" style=""> 935             case MUSIC_REQUEST_QUITER: {                                                                 </span>
<span class="2129420423363786169" onmouseenter="enter('2129420423363786169');" onmouseout="out('2129420423363786169');" style=""> 936                 queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_QUITER));           </span>
<span class="-9110787157641698322" onmouseenter="enter('-9110787157641698322');" onmouseout="out('-9110787157641698322');" style=""> 937                 deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.VOLUMEDOWN;              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 938                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 939             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 940         }                                                                                                </span>
<span  style=""> 941                                                                                                          </span>
<span class="-3574719939637901034" onmouseenter="enter('-3574719939637901034');" onmouseout="out('-3574719939637901034');" style=""> 942         getDeviceSupport().evaluateGBDeviceEvent(deviceEventMusicControl);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 943     }                                                                                                    </span>
<span  style=""> 944                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 945     @Override                                                                                            </span>
<span class="-3634467212876653578" onmouseenter="enter('-3634467212876653578');" onmouseout="out('-3634467212876653578');" style=""> 946     public void setCommuteMenuMessage(String message, boolean finished) {                                </span>
<span class="-2545716908437572756" onmouseenter="enter('-2545716908437572756');" onmouseout="out('-2545716908437572756');" style=""> 947         queueWrite(new SetCommuteMenuMessage(message, finished, this));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 948     }                                                                                                    </span>
<span  style=""> 949                                                                                                          </span>
<span class="-8749192936898481998" onmouseenter="enter('-8749192936898481998');" onmouseout="out('-8749192936898481998');" style=""> 950     public byte getJsonIndex() {                                                                         </span>
<span class="-7259315456684755672" onmouseenter="enter('-7259315456684755672');" onmouseout="out('-7259315456684755672');" style=""> 951         return jsonIndex++;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 952     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 953 }                                                                                                        </span>



</pre></td>
                            <td><pre><span class="-2997913422227863975" onmouseenter="enter('-2997913422227863975');" onmouseout="out('-2997913422227863975');" style="">   1 package nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.adapter.fossil_hr;                  </span>
<span  style="">   2                                                                                                          </span>
<span class="4736969144974683041" onmouseenter="enter('4736969144974683041');" onmouseout="out('4736969144974683041');" style="">   3 import android.bluetooth.BluetoothGattCharacteristic;                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   4 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   5 import android.content.Intent;                                                                           </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   6 import android.content.SharedPreferences;                                                                </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">   7 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">   8 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">   9 import android.graphics.Canvas;                                                                          </span>
<span class="-5868658801447575011" onmouseenter="enter('-5868658801447575011');" onmouseout="out('-5868658801447575011');" style="">  10 import android.graphics.Color;                                                                           </span>
<span class="-1586527322890291073" onmouseenter="enter('-1586527322890291073');" onmouseout="out('-1586527322890291073');" style="">  11 import android.graphics.Paint;                                                                           </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  12 import android.os.Build;                                                                                 </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  13 import android.widget.Toast;                                                                             </span>
<span class="-3926401431737521278" onmouseenter="enter('-3926401431737521278');" onmouseout="out('-3926401431737521278');" style="">  14 import java.io.File;                                                                                     </span>
<span class="-535075201057145249" onmouseenter="enter('-535075201057145249');" onmouseout="out('-535075201057145249');" style="">  15 import java.io.FileInputStream;                                                                          </span>
<span class="-75475733228177869" onmouseenter="enter('-75475733228177869');" onmouseout="out('-75475733228177869');" style="">  16 import java.io.FileNotFoundException;                                                                    </span>
<span class="4915709264156936957" onmouseenter="enter('4915709264156936957');" onmouseout="out('4915709264156936957');" style="">  17 import java.io.FileOutputStream;                                                                         </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  18 import java.io.IOException;                                                                              </span>
<span class="-351121020327003485" onmouseenter="enter('-351121020327003485');" onmouseout="out('-351121020327003485');" style="">  19 import java.nio.BufferOverflowException;                                                                 </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  20 import java.util.ArrayList;                                                                              </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  21 import java.util.Calendar;                                                                               </span>
<span class="-4685965902094386510" onmouseenter="enter('-4685965902094386510');" onmouseout="out('-4685965902094386510');" style="">  22 import java.util.GregorianCalendar;                                                                      </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  23 import java.util.HashMap;                                                                                </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  24 import java.util.Iterator;                                                                               </span>
<span class="-3682115440535733483" onmouseenter="enter('-3682115440535733483');" onmouseout="out('-3682115440535733483');" style="">  25 import java.util.TimeZone;                                                                               </span>
<span class="2390503830490498598" onmouseenter="enter('2390503830490498598');" onmouseout="out('2390503830490498598');" style="">  26 import java.util.UUID;                                                                                   </span>
<span class="-8113221927992302576" onmouseenter="enter('-8113221927992302576');" onmouseout="out('-8113221927992302576');" style="">  27 import nodomain.freeyourgadget.gadgetbridge.GBApplication;                                               </span>
<span class="-7265768043057292499" onmouseenter="enter('-7265768043057292499');" onmouseout="out('-7265768043057292499');" style="">  28 import nodomain.freeyourgadget.gadgetbridge.activities.GBActivity;                                       </span>
<span class="-141107564105590930" onmouseenter="enter('-141107564105590930');" onmouseout="out('-141107564105590930');" style="">  29 import nodomain.freeyourgadget.gadgetbridge.activities.devicesettings.DeviceSettingsPreferenceConst;     </span>
<span class="7017557905176594961" onmouseenter="enter('7017557905176594961');" onmouseout="out('7017557905176594961');" style="">  30 import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventCallControl;                       </span>
<span class="6368471362458763033" onmouseenter="enter('6368471362458763033');" onmouseout="out('6368471362458763033');" style="">  31 import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventFindPhone;                         </span>
<span class="4012861689788039008" onmouseenter="enter('4012861689788039008');" onmouseout="out('4012861689788039008');" style="">  32 import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventMusicControl;                      </span>
<span class="3654131406467691963" onmouseenter="enter('3654131406467691963');" onmouseout="out('3654131406467691963');" style="">  33 import nodomain.freeyourgadget.gadgetbridge.devices.qhybrid.HRConfigActivity;                            </span>
<span class="-7487037549552160195" onmouseenter="enter('-7487037549552160195');" onmouseout="out('-7487037549552160195');" style="">  34 import nodomain.freeyourgadget.gadgetbridge.devices.qhybrid.NotificationHRConfiguration;                 </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  35 import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                               </span>
<span class="-9074570965792323186" onmouseenter="enter('-9074570965792323186');" onmouseout="out('-9074570965792323186');" style="">  36 import nodomain.freeyourgadget.gadgetbridge.model.CallSpec;                                              </span>
<span class="-4068239021838445503" onmouseenter="enter('-4068239021838445503');" onmouseout="out('-4068239021838445503');" style="">  37 import nodomain.freeyourgadget.gadgetbridge.model.MusicSpec;                                             </span>
<span class="7536481506851862405" onmouseenter="enter('7536481506851862405');" onmouseout="out('7536481506851862405');" style="">  38 import nodomain.freeyourgadget.gadgetbridge.model.MusicStateSpec;                                        </span>
<span class="8239808916005009388" onmouseenter="enter('8239808916005009388');" onmouseout="out('8239808916005009388');" style="">  39 import nodomain.freeyourgadget.gadgetbridge.model.NotificationSpec;                                      </span>
<span class="-1384004108526222390" onmouseenter="enter('-1384004108526222390');" onmouseout="out('-1384004108526222390');" style="">  40 import nodomain.freeyourgadget.gadgetbridge.model.Weather;                                               </span>
<span class="-40839721936664146" onmouseenter="enter('-40839721936664146');" onmouseout="out('-40839721936664146');" style="">  41 import nodomain.freeyourgadget.gadgetbridge.model.WeatherSpec;                                           </span>
<span class="3410519392510510669" onmouseenter="enter('3410519392510510669');" onmouseout="out('3410519392510510669');" style="">  42 import nodomain.freeyourgadget.gadgetbridge.service.btle.TransactionBuilder;                             </span>
<span class="4332661620965164672" onmouseenter="enter('4332661620965164672');" onmouseout="out('4332661620965164672');" style="">  43 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.QHybridSupport;                      </span>
<span class="4386715749828831010" onmouseenter="enter('4386715749828831010');" onmouseout="out('4386715749828831010');" style="">  44 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.adapter.fossil.FossilWatchAdapter;   </span>
<span class="6910520238976776146" onmouseenter="enter('6910520238976776146');" onmouseout="out('6910520238976776146');" style="">  45 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.RequestMtuRequest;   </span>
<span class="5089968700906553867" onmouseenter="enter('5089968700906553867');" onmouseout="out('5089968700906553867');" style=""><abbr title="  46 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.SetDeviceStateRequest;">  46 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.SetDeviceStateRequestðŸ”µ</abbr></span>
<span class="6112441966638764283" onmouseenter="enter('6112441966638764283');" onmouseout="out('6112441966638764283');" style=""><abbr title="  47 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.configuration.ConfigurationPutRequest.TimeConfigItem;">  47 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.configuration.ConfiguðŸ”µ</abbr></span>
<span class="7471646323585627177" onmouseenter="enter('7471646323585627177');" onmouseout="out('7471646323585627177');" style=""><abbr title="  48 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayCallNotificationRequest;">  48 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayCallðŸ”µ</abbr></span>
<span class="-6858926904400925756" onmouseenter="enter('-6858926904400925756');" onmouseout="out('-6858926904400925756');" style=""><abbr title="  49 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayTextNotificationRequest;">  49 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayTextðŸ”µ</abbr></span>
<span class="-7335239105811257712" onmouseenter="enter('-7335239105811257712');" onmouseout="out('-7335239105811257712');" style=""><abbr title="  50 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.authentication.VerifyPrivateKeyRequest;">  50 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.authentication.VerðŸ”µ</abbr></span>
<span class="-8586181035863106404" onmouseenter="enter('-8586181035863106404');" onmouseout="out('-8586181035863106404');" style=""><abbr title="  51 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.buttons.ButtonConfigurationPutRequest;">  51 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.buttons.ButtonConfðŸ”µ</abbr></span>
<span class="-7616394483813386160" onmouseenter="enter('-7616394483813386160');" onmouseout="out('-7616394483813386160');" style=""><abbr title="  52 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfigurationGetRequest;">  52 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfðŸ”µ</abbr></span>
<span class="1784930373847085070" onmouseenter="enter('1784930373847085070');" onmouseout="out('1784930373847085070');" style=""><abbr title="  53 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfigurationPutRequest;">  53 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfðŸ”µ</abbr></span>
<span class="-7479827832081411210" onmouseenter="enter('-7479827832081411210');" onmouseout="out('-7479827832081411210');" style=""><abbr title="  54 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.file.AssetFilePutRequest;">  54 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.file.AssetFilePutRðŸ”µ</abbr></span>
<span class="6886533222315535550" onmouseenter="enter('6886533222315535550');" onmouseout="out('6886533222315535550');" style="">  55 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.AssetImage; </span>
<span class="4714390797546975821" onmouseenter="enter('4714390797546975821');" onmouseout="out('4714390797546975821');" style=""><abbr title="  56 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.AssetImageFactory;">  56 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.AssetImageFaðŸ”µ</abbr></span>
<span class="-6584136629945154367" onmouseenter="enter('-6584136629945154367');" onmouseout="out('-6584136629945154367');" style=""><abbr title="  57 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.ImagesSetRequest;">  57 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.ImagesSetReqðŸ”µ</abbr></span>
<span class="4407251461002993468" onmouseenter="enter('4407251461002993468');" onmouseout="out('4407251461002993468');" style=""><abbr title="  58 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.json.JsonPutRequest;">  58 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.json.JsonPutRequesðŸ”µ</abbr></span>
<span class="-3572348114301784964" onmouseenter="enter('-3572348114301784964');" onmouseout="out('-3572348114301784964');" style=""><abbr title="  59 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.menu.SetCommuteMenuMessage;">  59 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.menu.SetCommuteMenðŸ”µ</abbr></span>
<span class="7919188738795660329" onmouseenter="enter('7919188738795660329');" onmouseout="out('7919188738795660329');" style=""><abbr title="  60 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlRequest;">  60 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlðŸ”µ</abbr></span>
<span class="1138328726217316685" onmouseenter="enter('1138328726217316685');" onmouseout="out('1138328726217316685');" style=""><abbr title="  61 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicInfoSetRequest;">  61 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicInfoSetðŸ”µ</abbr></span>
<span class="-6007419784157735296" onmouseenter="enter('-6007419784157735296');" onmouseout="out('-6007419784157735296');" style=""><abbr title="  62 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.notification.NotificationFilterPutHRRequest;">  62 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.notification.NotifðŸ”µ</abbr></span>
<span class="2272282218964023705" onmouseenter="enter('2272282218964023705');" onmouseout="out('2272282218964023705');" style=""><abbr title="  63 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomBackgroundWidgetElement;">  63 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomBackgðŸ”µ</abbr></span>
<span class="-6693404726045535805" onmouseenter="enter('-6693404726045535805');" onmouseout="out('-6693404726045535805');" style=""><abbr title="  64 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomTextWidgetElement;">  64 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomTextWðŸ”µ</abbr></span>
<span class="6618883795787964297" onmouseenter="enter('6618883795787964297');" onmouseout="out('6618883795787964297');" style=""><abbr title="  65 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomWidget;">  65 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomWidgeðŸ”µ</abbr></span>
<span class="2778086687948821087" onmouseenter="enter('2778086687948821087');" onmouseout="out('2778086687948821087');" style=""><abbr title="  66 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomWidgetElement;">  66 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomWidgeðŸ”µ</abbr></span>
<span class="-5838235376860565233" onmouseenter="enter('-5838235376860565233');" onmouseout="out('-5838235376860565233');" style="">  67 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.Widget;    </span>
<span class="-8988880482945476231" onmouseenter="enter('-8988880482945476231');" onmouseout="out('-8988880482945476231');" style=""><abbr title="  68 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.WidgetsPutRequest;">  68 import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.WidgetsPutRðŸ”µ</abbr></span>
<span class="-3798970344596478499" onmouseenter="enter('-3798970344596478499');" onmouseout="out('-3798970344596478499');" style="">  69 import nodomain.freeyourgadget.gadgetbridge.util.GB;                                                     </span>
<span class="-600862318521663319" onmouseenter="enter('-600862318521663319');" onmouseout="out('-600862318521663319');" style="">  70 import nodomain.freeyourgadget.gadgetbridge.util.Prefs;                                                  </span>
<span class="1710555602396666834" onmouseenter="enter('1710555602396666834');" onmouseout="out('1710555602396666834');" style="">  71 import nodomain.freeyourgadget.gadgetbridge.util.StringUtils;                                            </span>
<span class="-9193129351684262878" onmouseenter="enter('-9193129351684262878');" onmouseout="out('-9193129351684262878');" style="">  72 import org.json.JSONArray;                                                                               </span>
<span class="-8573375701834280359" onmouseenter="enter('-8573375701834280359');" onmouseout="out('-8573375701834280359');" style="">  73 import org.json.JSONException;                                                                           </span>
<span class="7232075261178918144" onmouseenter="enter('7232075261178918144');" onmouseout="out('7232075261178918144');" style="">  74 import org.json.JSONObject;                                                                              </span>
<span class="-6920508692158968227" onmouseenter="enter('-6920508692158968227');" onmouseout="out('-6920508692158968227');" style=""><abbr title="  75 import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlRequest.MUSIC_PHONE_REQUEST;">  75 import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicðŸ”µ</abbr></span>
<span class="1244615468169562272" onmouseenter="enter('1244615468169562272');" onmouseout="out('1244615468169562272');" style=""><abbr title="  76 import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlRequest.MUSIC_WATCH_REQUEST;">  76 import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicðŸ”µ</abbr></span>
<span  style="">  77                                                                                                          </span>
<span  style="">  78                                                                                                          </span>
<span class="3592572912775199945" onmouseenter="enter('3592572912775199945');" onmouseout="out('3592572912775199945');" style="">  79 public class FossilHRWatchAdapter extends FossilWatchAdapter {                                           </span>
<span class="5088344414276172788" onmouseenter="enter('5088344414276172788');" onmouseout="out('5088344414276172788');" style="">  80     private byte[] phoneRandomNumber;                                                                    </span>
<span  style="">  81                                                                                                          </span>
<span class="-506162566914247320" onmouseenter="enter('-506162566914247320');" onmouseout="out('-506162566914247320');" style="">  82     private byte[] watchRandomNumber;                                                                    </span>
<span  style="">  83                                                                                                          </span>
<span class="7640912025063028053" onmouseenter="enter('7640912025063028053');" onmouseout="out('7640912025063028053');" style="">  84     private ArrayList&lt;Widget&gt; widgets = new ArrayList&lt;&gt;();                                               </span>
<span  style="">  85                                                                                                          </span>
<span class="-2578264008762844907" onmouseenter="enter('-2578264008762844907');" onmouseout="out('-2578264008762844907');" style="">  86     private NotificationHRConfiguration[] notificationConfigurations;                                    </span>
<span  style="">  87                                                                                                          </span>
<span class="2535750949384339971" onmouseenter="enter('2535750949384339971');" onmouseout="out('2535750949384339971');" style="">  88     private MusicSpec currentSpec = null;                                                                </span>
<span  style="">  89                                                                                                          </span>
<span class="-6092139116600387375" onmouseenter="enter('-6092139116600387375');" onmouseout="out('-6092139116600387375');" style="">  90     int imageNameIndex = 0;                                                                              </span>
<span  style="">  91                                                                                                          </span>
<span class="-1794288330955340230" onmouseenter="enter('-1794288330955340230');" onmouseout="out('-1794288330955340230');" style="">  92     private byte jsonIndex = 0;                                                                          </span>
<span  style="">  93                                                                                                          </span>
<span class="-4156328390524362965" onmouseenter="enter('-4156328390524362965');" onmouseout="out('-4156328390524362965');" style="">  94     private AssetImage backGroundImage = null;                                                           </span>
<span  style="">  95                                                                                                          </span>
<span class="-5170367685934262595" onmouseenter="enter('-5170367685934262595');" onmouseout="out('-5170367685934262595');" style="">  96     public FossilHRWatchAdapter(QHybridSupport deviceSupport) {                                          </span>
<span class="7895217862057392900" onmouseenter="enter('7895217862057392900');" onmouseout="out('7895217862057392900');" style="">  97         super(deviceSupport);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  98     }                                                                                                    </span>
<span  style="">  99                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 100     @Override                                                                                            </span>
<span class="6973867701261680867" onmouseenter="enter('6973867701261680867');" onmouseout="out('6973867701261680867');" style=""> 101     public void initialize() {                                                                           </span>
<span class="-6207208930684914824" onmouseenter="enter('-6207208930684914824');" onmouseout="out('-6207208930684914824');" style=""> 102         if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {                                     </span>
<span class="-3436726469441820604" onmouseenter="enter('-3436726469441820604');" onmouseout="out('-3436726469441820604');" style=""> 103             queueWrite(new RequestMtuRequest(512));                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104         }                                                                                                </span>
<span  style=""> 105                                                                                                          </span>
<span class="2214751643672186972" onmouseenter="enter('2214751643672186972');" onmouseout="out('2214751643672186972');" style=""> 106         queueWrite(new SetDeviceStateRequest(GBDevice.State.AUTHENTICATING));                            </span>
<span  style=""> 107                                                                                                          </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 108         negotiateSymmetricKey();                                                                         </span>
<span  style=""> 109                                                                                                          </span>
<span class="7150849353095805702" onmouseenter="enter('7150849353095805702');" onmouseout="out('7150849353095805702');" style=""> 110         queueWrite(new SetDeviceStateRequest(GBDevice.State.INITIALIZING));                              </span>
<span  style=""> 111                                                                                                          </span>
<span class="-4417803371223487901" onmouseenter="enter('-4417803371223487901');" onmouseout="out('-4417803371223487901');" style=""> 112         loadNotificationConfigurations();                                                                </span>
<span class="-45277995236735037" onmouseenter="enter('-45277995236735037');" onmouseout="out('-45277995236735037');" style=""> 113         queueWrite(new NotificationFilterPutHRRequest(this.notificationConfigurations, this));           </span>
<span class="-4331994456315640395" onmouseenter="enter('-4331994456315640395');" onmouseout="out('-4331994456315640395');" style=""> 114         setVibrationStrength();                                                                          </span>
<span  style=""> 115                                                                                                          </span>
<span class="-9031387911705611686" onmouseenter="enter('-9031387911705611686');" onmouseout="out('-9031387911705611686');" style=""> 116         syncSettings();                                                                                  </span>
<span  style=""> 117                                                                                                          </span>
<span class="7548848230134815961" onmouseenter="enter('7548848230134815961');" onmouseout="out('7548848230134815961');" style=""> 118         setTime();                                                                                       </span>
<span  style=""> 119                                                                                                          </span>
<span class="-7476048809216327685" onmouseenter="enter('-7476048809216327685');" onmouseout="out('-7476048809216327685');" style=""> 120         overwriteButtons(null);                                                                          </span>
<span  style=""> 121                                                                                                          </span>
<span  style=""> 122                                                                                                          </span>
<span class="1285717461947698949" onmouseenter="enter('1285717461947698949');" onmouseout="out('1285717461947698949');" style=""> 123         loadBackground();                                                                                </span>
<span class="-8671838943786981246" onmouseenter="enter('-8671838943786981246');" onmouseout="out('-8671838943786981246');" style=""> 124         loadWidgets();                                                                                   </span>
<span class="8810184639176192527" onmouseenter="enter('8810184639176192527');" onmouseout="out('8810184639176192527');" style=""> 125         // renderWidgets();                                                                              </span>
<span class="7961004691166238388" onmouseenter="enter('7961004691166238388');" onmouseout="out('7961004691166238388');" style=""><abbr title=" 126         // dunno if there is any point in doing this at start since when no watch is connected the QHybridSupport will not receive any intents anyway"> 126         // dunno if there is any point in doing this at start since when no watch is connected the QHybriðŸ”µ</abbr></span>
<span  style=""> 127                                                                                                          </span>
<span class="-673558019044966288" onmouseenter="enter('-673558019044966288');" onmouseout="out('-673558019044966288');" style=""> 128         queueWrite(new SetDeviceStateRequest(GBDevice.State.INITIALIZED));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129     }                                                                                                    </span>
<span  style=""> 130                                                                                                          </span>
<span class="2678698660370291293" onmouseenter="enter('2678698660370291293');" onmouseout="out('2678698660370291293');" style=""> 131     private void setVibrationStrength() {                                                                </span>
<span class="583153348914013546" onmouseenter="enter('583153348914013546');" onmouseout="out('583153348914013546');" style=""> 132         Prefs prefs = new Prefs(getDeviceSpecificPreferences());                                         </span>
<span class="3731955474946957698" onmouseenter="enter('3731955474946957698');" onmouseout="out('3731955474946957698');" style=""><abbr title=" 133         int vibrationStrengh = prefs.getInt(DeviceSettingsPreferenceConst.PREF_VIBRATION_STRENGH_PERCENTAGE, 2);"> 133         int vibrationStrengh = prefs.getInt(DeviceSettingsPreferenceConst.PREF_VIBRATION_STRENGH_PERCENTAðŸ”µ</abbr></span>
<span class="-1867169202627257001" onmouseenter="enter('-1867169202627257001');" onmouseout="out('-1867169202627257001');" style=""> 134         if (vibrationStrengh &gt; 0) {                                                                      </span>
<span class="2644384104178590300" onmouseenter="enter('2644384104178590300');" onmouseout="out('2644384104178590300');" style=""> 135             vibrationStrengh = (vibrationStrengh + 1) * 25; // Seems 0,50,75,100 are working...          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136         }                                                                                                </span>
<span class="6672289413916591004" onmouseenter="enter('6672289413916591004');" onmouseout="out('6672289413916591004');" style=""> 137         setVibrationStrength((short) (vibrationStrengh));                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 138     }                                                                                                    </span>
<span  style=""> 139                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 140     @Override                                                                                            </span>
<span class="1506969207519742362" onmouseenter="enter('1506969207519742362');" onmouseout="out('1506969207519742362');" style=""> 141     public void setVibrationStrength(short strength) {                                                   </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 142         negotiateSymmetricKey();                                                                         </span>
<span class="-4629474970994412283" onmouseenter="enter('-4629474970994412283');" onmouseout="out('-4629474970994412283');" style=""><abbr title=" 143         queueWrite(new ConfigurationPutRequest(new nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.configuration.ConfigurationPutRequest.VibrationStrengthConfigItem((byte) strength), this));"> 143         queueWrite(new ConfigurationPutRequest(new nodomain.freeyourgadget.gadgetbridge.service.devices.qðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144     }                                                                                                    </span>
<span  style=""> 145                                                                                                          </span>
<span class="1303454475379501012" onmouseenter="enter('1303454475379501012');" onmouseout="out('1303454475379501012');" style=""> 146     private void loadNotificationConfigurations(){                                                       </span>
<span class="-6235602809275246814" onmouseenter="enter('-6235602809275246814');" onmouseout="out('-6235602809275246814');" style=""> 147         this.notificationConfigurations = new NotificationHRConfiguration[]{                             </span>
<span class="7544968341376302636" onmouseenter="enter('7544968341376302636');" onmouseout="out('7544968341376302636');" style=""> 148                 new NotificationHRConfiguration(&quot;generic&quot;, 0),                                           </span>
<span class="-4749339465775723964" onmouseenter="enter('-4749339465775723964');" onmouseout="out('-4749339465775723964');" style=""><abbr title=" 149                 new NotificationHRConfiguration(&quot;call&quot;, new byte[]{(byte)0x80, (byte) 0x00, (byte) 0x59, (byte) 0xB7}, 0)"> 149                 new NotificationHRConfiguration(&quot;call&quot;, new byte[]{(byte)0x80, (byte) 0x00, (byte) 0x59, ðŸ”µ</abbr></span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 150         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151     }                                                                                                    </span>
<span  style=""> 152                                                                                                          </span>
<span class="-5868467879198664223" onmouseenter="enter('-5868467879198664223');" onmouseout="out('-5868467879198664223');" style=""> 153     private File getBackgroundFile(){                                                                    </span>
<span class="5017199467844905364" onmouseenter="enter('5017199467844905364');" onmouseout="out('5017199467844905364');" style=""> 154         return new File(getContext().getExternalFilesDir(null), &quot;hr_background.bin&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 155     }                                                                                                    </span>
<span  style=""> 156                                                                                                          </span>
<span class="-8329440189277726688" onmouseenter="enter('-8329440189277726688');" onmouseout="out('-8329440189277726688');" style=""> 157     private void loadBackground() {                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 158         try {                                                                                            </span>
<span class="3309811734082012592" onmouseenter="enter('3309811734082012592');" onmouseout="out('3309811734082012592');" style=""> 159             FileInputStream fis = new FileInputStream(getBackgroundFile());                              </span>
<span class="-8713501432928954369" onmouseenter="enter('-8713501432928954369');" onmouseout="out('-8713501432928954369');" style=""> 160             int count = fis.available();                                                                 </span>
<span class="-7031464995928962341" onmouseenter="enter('-7031464995928962341');" onmouseout="out('-7031464995928962341');" style=""> 161             if (count != 14400) {                                                                        </span>
<span class="6959480734525400649" onmouseenter="enter('6959480734525400649');" onmouseout="out('6959480734525400649');" style=""> 162                 throw new RuntimeException(&quot;wrong background file length&quot;);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 163             }                                                                                            </span>
<span class="6140245791534089823" onmouseenter="enter('6140245791534089823');" onmouseout="out('6140245791534089823');" style=""> 164             byte[] file = new byte[14400];                                                               </span>
<span class="-5391697857306213357" onmouseenter="enter('-5391697857306213357');" onmouseout="out('-5391697857306213357');" style=""> 165             fis.read(file);                                                                              </span>
<span class="847792512951278267" onmouseenter="enter('847792512951278267');" onmouseout="out('847792512951278267');" style=""> 166             fis.close();                                                                                 </span>
<span class="3514823294174383549" onmouseenter="enter('3514823294174383549');" onmouseout="out('3514823294174383549');" style=""> 167             this.backGroundImage = AssetImageFactory.createAssetImage(file, 0, 0, 0);                    </span>
<span class="400908373044587289" onmouseenter="enter('400908373044587289');" onmouseout="out('400908373044587289');" style=""> 168         } catch (FileNotFoundException e) {                                                              </span>
<span class="-5301954684616781966" onmouseenter="enter('-5301954684616781966');" onmouseout="out('-5301954684616781966');" style=""> 169             SharedPreferences preferences = getDeviceSpecificPreferences();                              </span>
<span class="-3378614681722876648" onmouseenter="enter('-3378614681722876648');" onmouseout="out('-3378614681722876648');" style=""> 170             if (preferences.getBoolean(&quot;force_white_color_scheme&quot;, false)) {                             </span>
<span class="-3418877583116429834" onmouseenter="enter('-3418877583116429834');" onmouseout="out('-3418877583116429834');" style=""> 171                 Bitmap whiteBitmap = Bitmap.createBitmap(239, 239, Bitmap.Config.ARGB_8888);             </span>
<span class="2380885980553220395" onmouseenter="enter('2380885980553220395');" onmouseout="out('2380885980553220395');" style=""> 172                 new Canvas(whiteBitmap).drawColor(Color.WHITE);                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 173                 try {                                                                                    </span>
<span class="1512735353479138147" onmouseenter="enter('1512735353479138147');" onmouseout="out('1512735353479138147');" style=""><abbr title=" 174                     this.backGroundImage = AssetImageFactory.createAssetImage(whiteBitmap, true, 0, 1, 0);"> 174                     this.backGroundImage = AssetImageFactory.createAssetImage(whiteBitmap, true, 0, 1, 0)ðŸ”µ</abbr></span>
<span class="6855304482177546507" onmouseenter="enter('6855304482177546507');" onmouseout="out('6855304482177546507');" style=""> 175                     queueWrite(new AssetFilePutRequest(this.backGroundImage, ((byte) (0x0)), this));     </span>
<span class="8708702391695364841" onmouseenter="enter('8708702391695364841');" onmouseout="out('8708702391695364841');" style=""> 176                 } catch (IOException e2) {                                                               </span>
<span class="7907507332013532218" onmouseenter="enter('7907507332013532218');" onmouseout="out('7907507332013532218');" style=""> 177                     logger.error(&quot;Backgroundimage error&quot;, e2);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179             }                                                                                            </span>
<span class="-3865210082043831909" onmouseenter="enter('-3865210082043831909');" onmouseout="out('-3865210082043831909');" style=""> 180         } catch (IOException | java.lang.RuntimeException e) {                                           </span>
<span class="995952486198027790" onmouseenter="enter('995952486198027790');" onmouseout="out('995952486198027790');" style=""> 181             GB.log(&quot;error opening background file&quot;, GB.ERROR, e);                                        </span>
<span class="4357598448521854023" onmouseenter="enter('4357598448521854023');" onmouseout="out('4357598448521854023');" style=""> 182             GB.toast(&quot;error opening background file&quot;, Toast.LENGTH_LONG, GB.ERROR);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184     }                                                                                                    </span>
<span  style=""> 185                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 186     @Override                                                                                            </span>
<span class="-2142032910036758703" onmouseenter="enter('-2142032910036758703');" onmouseout="out('-2142032910036758703');" style=""> 187     public void setBackgroundImage(byte[] pixels) {                                                      </span>
<span class="3499321790516242490" onmouseenter="enter('3499321790516242490');" onmouseout="out('3499321790516242490');" style=""> 188         if (pixels == null) {                                                                            </span>
<span class="-1287700881772654168" onmouseenter="enter('-1287700881772654168');" onmouseout="out('-1287700881772654168');" style=""> 189             getBackgroundFile().delete();                                                                </span>
<span class="-5827926495289856375" onmouseenter="enter('-5827926495289856375');" onmouseout="out('-5827926495289856375');" style=""> 190             this.backGroundImage = null;                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 191         } else {                                                                                         </span>
<span class="-3590785795915305813" onmouseenter="enter('-3590785795915305813');" onmouseout="out('-3590785795915305813');" style=""> 192             this.backGroundImage = AssetImageFactory.createAssetImage(pixels, 0, 0, 0);                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 193             try {                                                                                        </span>
<span class="-1705375458919026059" onmouseenter="enter('-1705375458919026059');" onmouseout="out('-1705375458919026059');" style=""> 194                 FileOutputStream fos = new FileOutputStream(getBackgroundFile(), false);                 </span>
<span class="-358410701198294033" onmouseenter="enter('-358410701198294033');" onmouseout="out('-358410701198294033');" style=""> 195                 fos.write(pixels);                                                                       </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 196             } catch (IOException e) {                                                                    </span>
<span class="615895175007642974" onmouseenter="enter('615895175007642974');" onmouseout="out('615895175007642974');" style=""> 197                 GB.log(&quot;error saving background&quot;, GB.ERROR, e);                                          </span>
<span class="-5639824001846510052" onmouseenter="enter('-5639824001846510052');" onmouseout="out('-5639824001846510052');" style=""> 198                 GB.toast(&quot;error persistent saving background&quot;, Toast.LENGTH_LONG, GB.ERROR);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200         }                                                                                                </span>
<span class="-686042699702875094" onmouseenter="enter('-686042699702875094');" onmouseout="out('-686042699702875094');" style=""> 201         renderWidgets();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202     }                                                                                                    </span>
<span  style=""> 203                                                                                                          </span>
<span class="-3367927790602792525" onmouseenter="enter('-3367927790602792525');" onmouseout="out('-3367927790602792525');" style=""> 204     private void loadWidgets() {                                                                         </span>
<span class="-5253497129600185491" onmouseenter="enter('-5253497129600185491');" onmouseout="out('-5253497129600185491');" style=""><abbr title=" 205         Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddress()));"> 205         Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice()ðŸ”µ</abbr></span>
<span class="7432400165234073302" onmouseenter="enter('7432400165234073302');" onmouseout="out('7432400165234073302');" style=""> 206         boolean forceWhiteBackground = prefs.getBoolean(&quot;force_white_color_scheme&quot;, false);              </span>
<span class="8498546838404906158" onmouseenter="enter('8498546838404906158');" onmouseout="out('8498546838404906158');" style=""> 207         String fontColor = (forceWhiteBackground) ? &quot;black&quot; : &quot;default&quot;;                                 </span>
<span class="-4620331257752093891" onmouseenter="enter('-4620331257752093891');" onmouseout="out('-4620331257752093891');" style=""> 208         this.widgets.clear();                                                                            </span>
<span class="-3336910807232744925" onmouseenter="enter('-3336910807232744925');" onmouseout="out('-3336910807232744925');" style=""><abbr title=" 209         String widgetJson = GBApplication.getPrefs().getPreferences().getString(&quot;FOSSIL_HR_WIDGETS&quot;, &quot;{}&quot;);"> 209         String widgetJson = GBApplication.getPrefs().getPreferences().getString(&quot;FOSSIL_HR_WIDGETS&quot;, &quot;{}&quot;ðŸ”µ</abbr></span>
<span class="4155798482965333136" onmouseenter="enter('4155798482965333136');" onmouseout="out('4155798482965333136');" style=""> 210         String customWidgetJson = GBApplication.getPrefs().getString(&quot;QHYBRID_CUSTOM_WIDGETS&quot;, &quot;[]&quot;);    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 211         try {                                                                                            </span>
<span class="-1451023518703013419" onmouseenter="enter('-1451023518703013419');" onmouseout="out('-1451023518703013419');" style=""> 212             JSONObject widgetConfig = new JSONObject(widgetJson);                                        </span>
<span class="-1475171196435240579" onmouseenter="enter('-1475171196435240579');" onmouseout="out('-1475171196435240579');" style=""> 213             JSONArray customWidgets = new JSONArray(customWidgetJson);                                   </span>
<span class="-2247029910180567010" onmouseenter="enter('-2247029910180567010');" onmouseout="out('-2247029910180567010');" style=""> 214             Iterator&lt;String&gt; keyIterator = widgetConfig.keys();                                          </span>
<span class="3005942427600422729" onmouseenter="enter('3005942427600422729');" onmouseout="out('3005942427600422729');" style=""> 215             HashMap&lt;String, Integer&gt; positionMap = new HashMap&lt;&gt;(4);                                     </span>
<span class="-4809379780136917034" onmouseenter="enter('-4809379780136917034');" onmouseout="out('-4809379780136917034');" style=""> 216             positionMap.put(&quot;top&quot;, 0);                                                                   </span>
<span class="3242470301011869998" onmouseenter="enter('3242470301011869998');" onmouseout="out('3242470301011869998');" style=""> 217             positionMap.put(&quot;right&quot;, 90);                                                                </span>
<span class="47603222909284588" onmouseenter="enter('47603222909284588');" onmouseout="out('47603222909284588');" style=""> 218             positionMap.put(&quot;bottom&quot;, 180);                                                              </span>
<span class="-7872157185013762906" onmouseenter="enter('-7872157185013762906');" onmouseout="out('-7872157185013762906');" style=""> 219             positionMap.put(&quot;left&quot;, 270);                                                                </span>
<span class="5417927536664509531" onmouseenter="enter('5417927536664509531');" onmouseout="out('5417927536664509531');" style=""> 220             while (keyIterator.hasNext()) {                                                              </span>
<span class="2952369380408185535" onmouseenter="enter('2952369380408185535');" onmouseout="out('2952369380408185535');" style=""> 221                 String position = keyIterator.next();                                                    </span>
<span class="-4761670352334006129" onmouseenter="enter('-4761670352334006129');" onmouseout="out('-4761670352334006129');" style=""> 222                 String identifier = widgetConfig.getString(position);                                    </span>
<span class="-3371646214022229496" onmouseenter="enter('-3371646214022229496');" onmouseout="out('-3371646214022229496');" style=""> 223                 Widget.WidgetType type = Widget.WidgetType.fromJsonIdentifier(identifier);               </span>
<span class="4389075284580548581" onmouseenter="enter('4389075284580548581');" onmouseout="out('4389075284580548581');" style=""> 224                 Widget widget = null;                                                                    </span>
<span class="4884954898474632441" onmouseenter="enter('4884954898474632441');" onmouseout="out('4884954898474632441');" style=""> 225                 if (type != null) {                                                                      </span>
<span class="-7841183104811053833" onmouseenter="enter('-7841183104811053833');" onmouseout="out('-7841183104811053833');" style=""> 226                     widget = new Widget(type, positionMap.get(position), 63, fontColor);                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 227                 } else {                                                                                 </span>
<span class="-175697937656295673" onmouseenter="enter('-175697937656295673');" onmouseout="out('-175697937656295673');" style=""> 228                     identifier = identifier.substring(7);                                                </span>
<span class="-6727263374102073261" onmouseenter="enter('-6727263374102073261');" onmouseout="out('-6727263374102073261');" style=""> 229                     for (int i = 0; i &lt; customWidgets.length(); i++) {                                   </span>
<span class="-4459010997644705661" onmouseenter="enter('-4459010997644705661');" onmouseout="out('-4459010997644705661');" style=""> 230                         JSONObject customWidget = customWidgets.getJSONObject(i);                        </span>
<span class="7782648665491807105" onmouseenter="enter('7782648665491807105');" onmouseout="out('7782648665491807105');" style=""> 231                         if (customWidget.getString(&quot;name&quot;).equals(identifier)) {                         </span>
<span class="-7054423990219086531" onmouseenter="enter('-7054423990219086531');" onmouseout="out('-7054423990219086531');" style=""> 232                             boolean drawCircle = false;                                                  </span>
<span class="-8771415303226078864" onmouseenter="enter('-8771415303226078864');" onmouseout="out('-8771415303226078864');" style=""> 233                             if (customWidget.has(&quot;drawCircle&quot;)) {                                        </span>
<span class="-4228666486606938108" onmouseenter="enter('-4228666486606938108');" onmouseout="out('-4228666486606938108');" style=""> 234                                 drawCircle = customWidget.getBoolean(&quot;drawCircle&quot;);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235                             }                                                                            </span>
<span class="-8445214204428413404" onmouseenter="enter('-8445214204428413404');" onmouseout="out('-8445214204428413404');" style=""><abbr title=" 236                             CustomWidget newWidget = new CustomWidget(customWidget.getString(&quot;name&quot;), positionMap.get(position), 63, fontColor);"> 236                             CustomWidget newWidget = new CustomWidget(customWidget.getString(&quot;name&quot;), posðŸ”µ</abbr></span>
<span class="2785037360953974218" onmouseenter="enter('2785037360953974218');" onmouseout="out('2785037360953974218');" style=""> 237                             JSONArray elements = customWidget.getJSONArray(&quot;elements&quot;);                  </span>
<span class="3871742226603844038" onmouseenter="enter('3871742226603844038');" onmouseout="out('3871742226603844038');" style=""> 238                             for (int i2 = 0; i2 &lt; elements.length(); i2++) {                             </span>
<span class="-7151905776418266127" onmouseenter="enter('-7151905776418266127');" onmouseout="out('-7151905776418266127');" style=""> 239                                 JSONObject element = elements.getJSONObject(i2);                         </span>
<span class="6397770772172009485" onmouseenter="enter('6397770772172009485');" onmouseout="out('6397770772172009485');" style=""> 240                                 if (element.getString(&quot;type&quot;).equals(&quot;text&quot;)) {                          </span>
<span class="6058818148464943272" onmouseenter="enter('6058818148464943272');" onmouseout="out('6058818148464943272');" style=""><abbr title=" 241                                     newWidget.addElement(new CustomTextWidgetElement(element.getString(&quot;id&quot;), element.getString(&quot;value&quot;), element.getInt(&quot;x&quot;), element.getInt(&quot;y&quot;)));"> 241                                     newWidget.addElement(new CustomTextWidgetElement(element.getString(&quot;iðŸ”µ</abbr></span>
<span class="-8940325902652201532" onmouseenter="enter('-8940325902652201532');" onmouseout="out('-8940325902652201532');" style=""> 242                                 } else if (element.getString(&quot;type&quot;).equals(&quot;background&quot;)) {             </span>
<span class="-2170151421958453752" onmouseenter="enter('-2170151421958453752');" onmouseout="out('-2170151421958453752');" style=""><abbr title=" 243                                     newWidget.addElement(new CustomBackgroundWidgetElement(element.getString(&quot;id&quot;), element.getString(&quot;value&quot;)));"> 243                                     newWidget.addElement(new CustomBackgroundWidgetElement(element.getStrðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 245                             }                                                                            </span>
<span class="2257436902070421227" onmouseenter="enter('2257436902070421227');" onmouseout="out('2257436902070421227');" style=""> 246                             widget = newWidget;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 247                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 248                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249                 }                                                                                        </span>
<span class="3820080085881789794" onmouseenter="enter('3820080085881789794');" onmouseout="out('3820080085881789794');" style=""> 250                 if (widget == null) {                                                                    </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 251                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252                 }                                                                                        </span>
<span class="-6171680299070194420" onmouseenter="enter('-6171680299070194420');" onmouseout="out('-6171680299070194420');" style=""> 253                 this.widgets.add(widget);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254             }                                                                                            </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 255         } catch (JSONException e) {                                                                      </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 256             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257         }                                                                                                </span>
<span class="-8358671306989560601" onmouseenter="enter('-8358671306989560601');" onmouseout="out('-8358671306989560601');" style=""> 258         uploadWidgets();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259     }                                                                                                    </span>
<span  style=""> 260                                                                                                          </span>
<span class="5530468676950845344" onmouseenter="enter('5530468676950845344');" onmouseout="out('5530468676950845344');" style=""> 261     private void uploadWidgets(){                                                                        </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 262         negotiateSymmetricKey();                                                                         </span>
<span class="5140546967358631022" onmouseenter="enter('5140546967358631022');" onmouseout="out('5140546967358631022');" style=""> 263         ArrayList&lt;Widget&gt; systemWidgets = new ArrayList&lt;&gt;(widgets.size());                               </span>
<span class="-3447555470280778363" onmouseenter="enter('-3447555470280778363');" onmouseout="out('-3447555470280778363');" style=""> 264         for(Widget widget : this.widgets){                                                               </span>
<span class="1576906399201786111" onmouseenter="enter('1576906399201786111');" onmouseout="out('1576906399201786111');" style=""> 265             if(!(widget instanceof CustomWidget)) systemWidgets.add(widget);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266         }                                                                                                </span>
<span class="-2475473149296747573" onmouseenter="enter('-2475473149296747573');" onmouseout="out('-2475473149296747573');" style=""> 267         queueWrite(new WidgetsPutRequest(systemWidgets.toArray(new Widget[0]), this));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268     }                                                                                                    </span>
<span  style=""> 269                                                                                                          </span>
<span class="903870811454511101" onmouseenter="enter('903870811454511101');" onmouseout="out('903870811454511101');" style=""> 270     private void renderWidgets() {                                                                       </span>
<span class="-5253497129600185491" onmouseenter="enter('-5253497129600185491');" onmouseout="out('-5253497129600185491');" style=""><abbr title=" 271         Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddress()));"> 271         Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice()ðŸ”µ</abbr></span>
<span class="7432400165234073302" onmouseenter="enter('7432400165234073302');" onmouseout="out('7432400165234073302');" style=""> 272         boolean forceWhiteBackground = prefs.getBoolean(&quot;force_white_color_scheme&quot;, false);              </span>
<span class="-4957838723144238098" onmouseenter="enter('-4957838723144238098');" onmouseout="out('-4957838723144238098');" style=""> 273         boolean drawCircles = prefs.getBoolean(&quot;widget_draw_circles&quot;, false);                            </span>
<span class="-4150936410867644378" onmouseenter="enter('-4150936410867644378');" onmouseout="out('-4150936410867644378');" style=""> 274         Bitmap circleBitmap = null;                                                                      </span>
<span class="-103683773484365692" onmouseenter="enter('-103683773484365692');" onmouseout="out('-103683773484365692');" style=""> 275         if (drawCircles) {                                                                               </span>
<span class="-5595442960800349101" onmouseenter="enter('-5595442960800349101');" onmouseout="out('-5595442960800349101');" style=""> 276             circleBitmap = Bitmap.createBitmap(76, 76, Bitmap.Config.ARGB_8888);                         </span>
<span class="-928516426453882846" onmouseenter="enter('-928516426453882846');" onmouseout="out('-928516426453882846');" style=""> 277             Canvas circleCanvas = new Canvas(circleBitmap);                                              </span>
<span class="2814962491382878487" onmouseenter="enter('2814962491382878487');" onmouseout="out('2814962491382878487');" style=""> 278             Paint circlePaint = new Paint();                                                             </span>
<span class="-6694382119531121333" onmouseenter="enter('-6694382119531121333');" onmouseout="out('-6694382119531121333');" style=""> 279             circlePaint.setColor(forceWhiteBackground ? Color.WHITE : Color.BLACK);                      </span>
<span class="7023202196844894280" onmouseenter="enter('7023202196844894280');" onmouseout="out('7023202196844894280');" style=""> 280             circlePaint.setStyle(Paint.Style.FILL);                                                      </span>
<span class="3207244326755712140" onmouseenter="enter('3207244326755712140');" onmouseout="out('3207244326755712140');" style=""> 281             circlePaint.setStrokeWidth(3);                                                               </span>
<span class="4026559028524057875" onmouseenter="enter('4026559028524057875');" onmouseout="out('4026559028524057875');" style=""> 282             circleCanvas.drawCircle(38, 38, 37, circlePaint);                                            </span>
<span class="2381447846028007273" onmouseenter="enter('2381447846028007273');" onmouseout="out('2381447846028007273');" style=""> 283             circlePaint.setColor(forceWhiteBackground ? Color.BLACK : Color.WHITE);                      </span>
<span class="-2529291397399672174" onmouseenter="enter('-2529291397399672174');" onmouseout="out('-2529291397399672174');" style=""> 284             circlePaint.setStyle(Paint.Style.STROKE);                                                    </span>
<span class="3207244326755712140" onmouseenter="enter('3207244326755712140');" onmouseout="out('3207244326755712140');" style=""> 285             circlePaint.setStrokeWidth(3);                                                               </span>
<span class="4026559028524057875" onmouseenter="enter('4026559028524057875');" onmouseout="out('4026559028524057875');" style=""> 286             circleCanvas.drawCircle(38, 38, 37, circlePaint);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 288         try {                                                                                            </span>
<span class="-373590907859483538" onmouseenter="enter('-373590907859483538');" onmouseout="out('-373590907859483538');" style=""> 289             ArrayList&lt;AssetImage&gt; widgetImages = new ArrayList&lt;&gt;();                                      </span>
<span class="-8143608132748507128" onmouseenter="enter('-8143608132748507128');" onmouseout="out('-8143608132748507128');" style=""> 290             for (int i = 0; i &lt; this.widgets.size(); i++) {                                              </span>
<span class="-3360344478910316540" onmouseenter="enter('-3360344478910316540');" onmouseout="out('-3360344478910316540');" style=""> 291                 Widget w = widgets.get(i);                                                               </span>
<span class="8967521457203733269" onmouseenter="enter('8967521457203733269');" onmouseout="out('8967521457203733269');" style=""> 292                 if (!(w instanceof CustomWidget)) {                                                      </span>
<span class="-103683773484365692" onmouseenter="enter('-103683773484365692');" onmouseout="out('-103683773484365692');" style=""> 293                     if (drawCircles) {                                                                   </span>
<span class="5575015807399825534" onmouseenter="enter('5575015807399825534');" onmouseout="out('5575015807399825534');" style=""><abbr title=" 294                         widgetImages.add(AssetImageFactory.createAssetImage(circleBitmap, true, w.getAngle(), w.getDistance(), 1));"> 294                         widgetImages.add(AssetImageFactory.createAssetImage(circleBitmap, true, w.getAnglðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 295                     }                                                                                    </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 296                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 297                 }                                                                                        </span>
<span class="-1825560650945295615" onmouseenter="enter('-1825560650945295615');" onmouseout="out('-1825560650945295615');" style=""> 298                 CustomWidget widget = ((CustomWidget) (w));                                              </span>
<span class="7010238729887612961" onmouseenter="enter('7010238729887612961');" onmouseout="out('7010238729887612961');" style=""> 299                 Bitmap widgetBitmap = Bitmap.createBitmap(76, 76, Bitmap.Config.ARGB_8888);              </span>
<span class="-3285187784434415926" onmouseenter="enter('-3285187784434415926');" onmouseout="out('-3285187784434415926');" style=""> 300                 Canvas widgetCanvas = new Canvas(widgetBitmap);                                          </span>
<span class="-103683773484365692" onmouseenter="enter('-103683773484365692');" onmouseout="out('-103683773484365692');" style=""> 301                 if (drawCircles) {                                                                       </span>
<span class="2052312058071761513" onmouseenter="enter('2052312058071761513');" onmouseout="out('2052312058071761513');" style=""> 302                     widgetCanvas.drawBitmap(circleBitmap, 0, 0, null);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303                 }                                                                                        </span>
<span class="757605497541712230" onmouseenter="enter('757605497541712230');" onmouseout="out('757605497541712230');" style=""> 304                 for (CustomWidgetElement element : widget.getElements()) {                               </span>
<span class="7400170023887894754" onmouseenter="enter('7400170023887894754');" onmouseout="out('7400170023887894754');" style=""><abbr title=" 305                     if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_BACKGROUND) {"> 305                     if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_BACKðŸ”µ</abbr></span>
<span class="-676638329273944558" onmouseenter="enter('-676638329273944558');" onmouseout="out('-676638329273944558');" style=""> 306                         File imageFile = new File(element.getValue());                                   </span>
<span class="4186466842592030597" onmouseenter="enter('4186466842592030597');" onmouseout="out('4186466842592030597');" style=""> 307                         if ((!imageFile.exists()) || (!imageFile.isFile())) {                            </span>
<span class="-1154464350623879177" onmouseenter="enter('-1154464350623879177');" onmouseout="out('-1154464350623879177');" style=""> 308                             logger.debug((&quot;Image file &quot; + element.getValue()) + &quot; not found&quot;);           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 309                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 310                         }                                                                                </span>
<span class="-1261560715133039949" onmouseenter="enter('-1261560715133039949');" onmouseout="out('-1261560715133039949');" style=""> 311                         Bitmap imageBitmap = BitmapFactory.decodeFile(element.getValue());               </span>
<span class="4351387492281360688" onmouseenter="enter('4351387492281360688');" onmouseout="out('4351387492281360688');" style=""> 312                         if (imageBitmap == null) {                                                       </span>
<span class="1000941453451815297" onmouseenter="enter('1000941453451815297');" onmouseout="out('1000941453451815297');" style=""> 313                             logger.debug((&quot;image file &quot; + element.getValue()) + &quot; could not be decoded&quot;);</span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 314                             continue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315                         }                                                                                </span>
<span class="4351764494403839190" onmouseenter="enter('4351764494403839190');" onmouseout="out('4351764494403839190');" style=""> 316                         Bitmap scaledBitmap = Bitmap.createScaledBitmap(imageBitmap, 76, 76, false);     </span>
<span class="-4159517019804962686" onmouseenter="enter('-4159517019804962686');" onmouseout="out('-4159517019804962686');" style=""> 317                         widgetCanvas.drawBitmap(scaledBitmap, 0, 0, null);                               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 318                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 319                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320                 }                                                                                        </span>
<span class="757605497541712230" onmouseenter="enter('757605497541712230');" onmouseout="out('757605497541712230');" style=""> 321                 for (CustomWidgetElement element : widget.getElements()) {                               </span>
<span class="-8374841026396869451" onmouseenter="enter('-8374841026396869451');" onmouseout="out('-8374841026396869451');" style=""><abbr title=" 322                     if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_TEXT) {"> 322                     if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_TEXTðŸ”µ</abbr></span>
<span class="8404149927879958117" onmouseenter="enter('8404149927879958117');" onmouseout="out('8404149927879958117');" style=""> 323                         Paint textPaint = new Paint();                                                   </span>
<span class="424156949088872290" onmouseenter="enter('424156949088872290');" onmouseout="out('424156949088872290');" style=""> 324                         textPaint.setStrokeWidth(4);                                                     </span>
<span class="1003656927330558161" onmouseenter="enter('1003656927330558161');" onmouseout="out('1003656927330558161');" style=""> 325                         textPaint.setTextSize(17.0F);                                                    </span>
<span class="7085320690650566449" onmouseenter="enter('7085320690650566449');" onmouseout="out('7085320690650566449');" style=""> 326                         textPaint.setStyle(Paint.Style.FILL);                                            </span>
<span class="4582184244946630782" onmouseenter="enter('4582184244946630782');" onmouseout="out('4582184244946630782');" style=""> 327                         textPaint.setColor(forceWhiteBackground ? Color.BLACK : Color.WHITE);            </span>
<span class="8080777884851070420" onmouseenter="enter('8080777884851070420');" onmouseout="out('8080777884851070420');" style=""> 328                         textPaint.setTextAlign(Paint.Align.CENTER);                                      </span>
<span class="1553568062762675664" onmouseenter="enter('1553568062762675664');" onmouseout="out('1553568062762675664');" style=""><abbr title=" 329                         widgetCanvas.drawText(element.getValue(), element.getX(), element.getY() - ((textPaint.descent() + textPaint.ascent()) / 2.0F), textPaint);"> 329                         widgetCanvas.drawText(element.getValue(), element.getX(), element.getY() - ((textðŸ”µ</abbr></span>
<span class="3604000204148948968" onmouseenter="enter('3604000204148948968');" onmouseout="out('3604000204148948968');" style=""><abbr title=" 330                     } else if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_IMAGE) {"> 330                     } else if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYðŸ”µ</abbr></span>
<span class="-1261560715133039949" onmouseenter="enter('-1261560715133039949');" onmouseout="out('-1261560715133039949');" style=""> 331                         Bitmap imageBitmap = BitmapFactory.decodeFile(element.getValue());               </span>
<span class="4586973941139481076" onmouseenter="enter('4586973941139481076');" onmouseout="out('4586973941139481076');" style=""><abbr title=" 332                         widgetCanvas.drawBitmap(imageBitmap, element.getX() - (imageBitmap.getWidth() / 2.0F), element.getY() - (imageBitmap.getHeight() / 2.0F), null);"> 332                         widgetCanvas.drawBitmap(imageBitmap, element.getX() - (imageBitmap.getWidth() / 2ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334                 }                                                                                        </span>
<span class="-9081941057980383550" onmouseenter="enter('-9081941057980383550');" onmouseout="out('-9081941057980383550');" style=""><abbr title=" 335                 widgetImages.add(AssetImageFactory.createAssetImage(widgetBitmap, true, widget.getAngle(), widget.getDistance(), 1));"> 335                 widgetImages.add(AssetImageFactory.createAssetImage(widgetBitmap, true, widget.getAngle()ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336             }                                                                                            </span>
<span class="-6511712465265524048" onmouseenter="enter('-6511712465265524048');" onmouseout="out('-6511712465265524048');" style=""> 337             if (this.backGroundImage != null) {                                                          </span>
<span class="-1341990675909940474" onmouseenter="enter('-1341990675909940474');" onmouseout="out('-1341990675909940474');" style=""> 338                 widgetImages.add(this.backGroundImage);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 339             }                                                                                            </span>
<span class="8817695966942419836" onmouseenter="enter('8817695966942419836');" onmouseout="out('8817695966942419836');" style=""><abbr title=" 340             queueWrite(new AssetFilePutRequest(widgetImages.toArray(new AssetImage[0]), ((byte) (0x0)), this));"> 340             queueWrite(new AssetFilePutRequest(widgetImages.toArray(new AssetImage[0]), ((byte) (0x0)), tðŸ”µ</abbr></span>
<span class="-1216850278071707444" onmouseenter="enter('-1216850278071707444');" onmouseout="out('-1216850278071707444');" style=""> 341             // queueWrite(new FileDeleteRequest((short) 0x0503));                                        </span>
<span class="6173523046516675945" onmouseenter="enter('6173523046516675945');" onmouseout="out('6173523046516675945');" style=""> 342             queueWrite(new ImagesSetRequest(widgetImages.toArray(new AssetImage[0]), this));             </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 343         } catch (IOException e) {                                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 344             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 345         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346     }                                                                                                    </span>
<span  style=""> 347                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 348     @Override                                                                                            </span>
<span class="768796884755462959" onmouseenter="enter('768796884755462959');" onmouseout="out('768796884755462959');" style=""> 349     public void setWidgetContent(String widgetID, String content, boolean renderOnWatch) {               </span>
<span class="-1104872319984701354" onmouseenter="enter('-1104872319984701354');" onmouseout="out('-1104872319984701354');" style=""> 350         boolean update = false;                                                                          </span>
<span class="4250664064039944058" onmouseenter="enter('4250664064039944058');" onmouseout="out('4250664064039944058');" style=""> 351         for (Widget widget : this.widgets) {                                                             </span>
<span class="6599617715616763984" onmouseenter="enter('6599617715616763984');" onmouseout="out('6599617715616763984');" style=""> 352             if(!(widget instanceof CustomWidget)) continue;                                              </span>
<span class="-7367617630703350990" onmouseenter="enter('-7367617630703350990');" onmouseout="out('-7367617630703350990');" style=""> 353             if(((CustomWidget) widget).updateElementValue(widgetID, content)) update = true;             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354         }                                                                                                </span>
<span  style=""> 355                                                                                                          </span>
<span class="-2887538322855201281" onmouseenter="enter('-2887538322855201281');" onmouseout="out('-2887538322855201281');" style=""> 356         if (renderOnWatch &amp;&amp; update) renderWidgets();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357     }                                                                                                    </span>
<span  style=""> 358                                                                                                          </span>
<span class="6173588091729977369" onmouseenter="enter('6173588091729977369');" onmouseout="out('6173588091729977369');" style=""> 359     private void negotiateSymmetricKey() {                                                               </span>
<span class="-7168973652814870469" onmouseenter="enter('-7168973652814870469');" onmouseout="out('-7168973652814870469');" style=""> 360         queueWrite(new VerifyPrivateKeyRequest(                                                          </span>
<span class="2474409468109046352" onmouseenter="enter('2474409468109046352');" onmouseout="out('2474409468109046352');" style=""> 361                 this.getSecretKey(),                                                                     </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 362                 this                                                                                     </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 363         ));                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364     }                                                                                                    </span>
<span  style=""> 365                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 366     @Override                                                                                            </span>
<span class="8564159631865081592" onmouseenter="enter('8564159631865081592');" onmouseout="out('8564159631865081592');" style=""> 367     public void setTime() {                                                                              </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 368         negotiateSymmetricKey();                                                                         </span>
<span  style=""> 369                                                                                                          </span>
<span class="-4700399361923900561" onmouseenter="enter('-4700399361923900561');" onmouseout="out('-4700399361923900561');" style=""> 370         long millis = System.currentTimeMillis();                                                        </span>
<span class="8010236317671933907" onmouseenter="enter('8010236317671933907');" onmouseout="out('8010236317671933907');" style=""> 371         TimeZone zone = new GregorianCalendar().getTimeZone();                                           </span>
<span  style=""> 372                                                                                                          </span>
<span class="5277346296728804081" onmouseenter="enter('5277346296728804081');" onmouseout="out('5277346296728804081');" style=""> 373         queueWrite(                                                                                      </span>
<span class="9082684383999307863" onmouseenter="enter('9082684383999307863');" onmouseout="out('9082684383999307863');" style=""> 374                 new ConfigurationPutRequest(                                                             </span>
<span class="6747723926021094395" onmouseenter="enter('6747723926021094395');" onmouseout="out('6747723926021094395');" style=""> 375                         new TimeConfigItem(                                                              </span>
<span class="-4594139798000988877" onmouseenter="enter('-4594139798000988877');" onmouseout="out('-4594139798000988877');" style=""> 376                                 (int) (millis / 1000 + getDeviceSupport().getTimeOffset() * 60),         </span>
<span class="6701954853301529159" onmouseenter="enter('6701954853301529159');" onmouseout="out('6701954853301529159');" style=""> 377                                 (short) (millis % 1000),                                                 </span>
<span class="2740305831490303835" onmouseenter="enter('2740305831490303835');" onmouseout="out('2740305831490303835');" style=""> 378                                 (short) (zone.getOffset(millis) / 60000)                                 </span>
<span class="5925056120740059197" onmouseenter="enter('5925056120740059197');" onmouseout="out('5925056120740059197');" style=""> 379                         ),                                                                               </span>
<span class="-573149562926997335" onmouseenter="enter('-573149562926997335');" onmouseout="out('-573149562926997335');" style=""> 380                         this), false                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 381         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382     }                                                                                                    </span>
<span  style=""> 383                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 384     @Override                                                                                            </span>
<span class="5743699626454161990" onmouseenter="enter('5743699626454161990');" onmouseout="out('5743699626454161990');" style=""> 385     public void setMusicInfo(MusicSpec musicSpec) {                                                      </span>
<span class="7717622633225589961" onmouseenter="enter('7717622633225589961');" onmouseout="out('7717622633225589961');" style=""> 386         if (                                                                                             </span>
<span class="-2721767562250030479" onmouseenter="enter('-2721767562250030479');" onmouseout="out('-2721767562250030479');" style=""> 387                 currentSpec != null                                                                      </span>
<span class="6347316233900210670" onmouseenter="enter('6347316233900210670');" onmouseout="out('6347316233900210670');" style=""> 388                         &amp;&amp; currentSpec.album.equals(musicSpec.album)                                     </span>
<span class="-7026697945522803285" onmouseenter="enter('-7026697945522803285');" onmouseout="out('-7026697945522803285');" style=""> 389                         &amp;&amp; currentSpec.artist.equals(musicSpec.artist)                                   </span>
<span class="234002389956897367" onmouseenter="enter('234002389956897367');" onmouseout="out('234002389956897367');" style=""> 390                         &amp;&amp; currentSpec.track.equals(musicSpec.track)                                     </span>
<span class="129544933216380196" onmouseenter="enter('129544933216380196');" onmouseout="out('129544933216380196');" style=""> 391         ) return;                                                                                        </span>
<span class="5122037976784129938" onmouseenter="enter('5122037976784129938');" onmouseout="out('5122037976784129938');" style=""> 392         currentSpec = musicSpec;                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 393         try {                                                                                            </span>
<span class="2807680215991082156" onmouseenter="enter('2807680215991082156');" onmouseout="out('2807680215991082156');" style=""> 394             queueWrite(new MusicInfoSetRequest(                                                          </span>
<span class="-4995357750126688628" onmouseenter="enter('-4995357750126688628');" onmouseout="out('-4995357750126688628');" style=""> 395                     musicSpec.artist,                                                                    </span>
<span class="-2625665048867935009" onmouseenter="enter('-2625665048867935009');" onmouseout="out('-2625665048867935009');" style=""> 396                     musicSpec.album,                                                                     </span>
<span class="4393990709676517095" onmouseenter="enter('4393990709676517095');" onmouseout="out('4393990709676517095');" style=""> 397                     musicSpec.track,                                                                     </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 398                     this                                                                                 </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 399             ));                                                                                          </span>
<span class="-6150396604962993275" onmouseenter="enter('-6150396604962993275');" onmouseout="out('-6150396604962993275');" style=""> 400         }catch (BufferOverflowException e){                                                              </span>
<span class="-5802249110858364829" onmouseenter="enter('-5802249110858364829');" onmouseout="out('-5802249110858364829');" style=""> 401             GB.log(&quot;musicInfo: &quot; + musicSpec, GB.ERROR, e);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 402         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403     }                                                                                                    </span>
<span  style=""> 404                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 405     @Override                                                                                            </span>
<span class="6484409227794913685" onmouseenter="enter('6484409227794913685');" onmouseout="out('6484409227794913685');" style=""> 406     public void setMusicState(MusicStateSpec stateSpec) {                                                </span>
<span class="-8825084358361918368" onmouseenter="enter('-8825084358361918368');" onmouseout="out('-8825084358361918368');" style=""> 407         super.setMusicState(stateSpec);                                                                  </span>
<span  style=""> 408                                                                                                          </span>
<span class="-5832778985397101291" onmouseenter="enter('-5832778985397101291');" onmouseout="out('-5832778985397101291');" style=""> 409         queueWrite(new MusicControlRequest(                                                              </span>
<span class="6749687689436260015" onmouseenter="enter('6749687689436260015');" onmouseout="out('6749687689436260015');" style=""><abbr title=" 410                 stateSpec.state == MusicStateSpec.STATE_PLAYING ? MUSIC_PHONE_REQUEST.MUSIC_REQUEST_SET_PLAYING : MUSIC_PHONE_REQUEST.MUSIC_REQUEST_SET_PAUSED"> 410                 stateSpec.state == MusicStateSpec.STATE_PLAYING ? MUSIC_PHONE_REQUEST.MUSIC_REQUEST_SET_PðŸ”µ</abbr></span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 411         ));                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 412     }                                                                                                    </span>
<span  style=""> 413                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 414     @Override                                                                                            </span>
<span class="-4328830144100754457" onmouseenter="enter('-4328830144100754457');" onmouseout="out('-4328830144100754457');" style=""> 415     public void updateWidgets() {                                                                        </span>
<span class="-8671838943786981246" onmouseenter="enter('-8671838943786981246');" onmouseout="out('-8671838943786981246');" style=""> 416         loadWidgets();                                                                                   </span>
<span class="-686042699702875094" onmouseenter="enter('-686042699702875094');" onmouseout="out('-686042699702875094');" style=""> 417         renderWidgets();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418     }                                                                                                    </span>
<span  style=""> 419                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 420     @Override                                                                                            </span>
<span class="-3215171005460530491" onmouseenter="enter('-3215171005460530491');" onmouseout="out('-3215171005460530491');" style=""> 421     public void onFetchActivityData() {                                                                  </span>
<span class="-9031387911705611686" onmouseenter="enter('-9031387911705611686');" onmouseout="out('-9031387911705611686');" style=""> 422         syncSettings();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423     }                                                                                                    </span>
<span  style=""> 424                                                                                                          </span>
<span class="4739601400713241401" onmouseenter="enter('4739601400713241401');" onmouseout="out('4739601400713241401');" style=""> 425     private void syncSettings() {                                                                        </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 426         negotiateSymmetricKey();                                                                         </span>
<span  style=""> 427                                                                                                          </span>
<span class="1672016935910782047" onmouseenter="enter('1672016935910782047');" onmouseout="out('1672016935910782047');" style=""> 428         queueWrite(new ConfigurationGetRequest(this));                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 429     }                                                                                                    </span>
<span  style=""> 430                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 431     @Override                                                                                            </span>
<span class="3426069938226863461" onmouseenter="enter('3426069938226863461');" onmouseout="out('3426069938226863461');" style=""> 432     public void setActivityHand(double progress) {                                                       </span>
<span class="-1967647950949041220" onmouseenter="enter('-1967647950949041220');" onmouseout="out('-1967647950949041220');" style=""> 433         // super.setActivityHand(progress);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 434     }                                                                                                    </span>
<span  style=""> 435                                                                                                          </span>
<span class="4432705569944803605" onmouseenter="enter('4432705569944803605');" onmouseout="out('4432705569944803605');" style=""> 436     public boolean playRawNotification(NotificationSpec notificationSpec) {                              </span>
<span class="-6989280013139049302" onmouseenter="enter('-6989280013139049302');" onmouseout="out('-6989280013139049302');" style=""> 437         String senderOrTitle = StringUtils.getFirstOf(notificationSpec.sender, notificationSpec.title);  </span>
<span  style=""> 438                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 439         try {                                                                                            </span>
<span class="-2594216627053610262" onmouseenter="enter('-2594216627053610262');" onmouseout="out('-2594216627053610262');" style=""> 440             for (NotificationHRConfiguration configuration : this.notificationConfigurations){           </span>
<span class="-6012792330028782499" onmouseenter="enter('-6012792330028782499');" onmouseout="out('-6012792330028782499');" style=""> 441                 if(configuration.getPackageName().equals(notificationSpec.sourceAppId)){                 </span>
<span class="-8304200794962410012" onmouseenter="enter('-8304200794962410012');" onmouseout="out('-8304200794962410012');" style=""><abbr title=" 442                     queueWrite(new PlayTextNotificationRequest(notificationSpec.sourceAppId, senderOrTitle, notificationSpec.body, this));"> 442                     queueWrite(new PlayTextNotificationRequest(notificationSpec.sourceAppId, senderOrTitlðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 443                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445             }                                                                                            </span>
<span class="6520985087381761239" onmouseenter="enter('6520985087381761239');" onmouseout="out('6520985087381761239');" style=""><abbr title=" 446             queueWrite(new PlayTextNotificationRequest(&quot;generic&quot;, senderOrTitle, notificationSpec.body, this));"> 446             queueWrite(new PlayTextNotificationRequest(&quot;generic&quot;, senderOrTitle, notificationSpec.body, tðŸ”µ</abbr></span>
<span class="-1580407524319062305" onmouseenter="enter('-1580407524319062305');" onmouseout="out('-1580407524319062305');" style=""> 447         }catch (Exception e){                                                                            </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 448             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449         }                                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 450         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451     }                                                                                                    </span>
<span  style=""> 452                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 453     @Override                                                                                            </span>
<span class="-3287587973518064190" onmouseenter="enter('-3287587973518064190');" onmouseout="out('-3287587973518064190');" style=""> 454     public void onFindDevice(boolean start) {                                                            </span>
<span class="5693720137067729069" onmouseenter="enter('5693720137067729069');" onmouseout="out('5693720137067729069');" style=""> 455         if(start){                                                                                       </span>
<span class="1659990903962259675" onmouseenter="enter('1659990903962259675');" onmouseout="out('1659990903962259675');" style=""> 456             new TransactionBuilder(&quot;vibrate find&quot;)                                                       </span>
<span class="-2922806062965776165" onmouseenter="enter('-2922806062965776165');" onmouseout="out('-2922806062965776165');" style=""> 457                     .write(                                                                              </span>
<span class="4897579106813855607" onmouseenter="enter('4897579106813855607');" onmouseout="out('4897579106813855607');" style=""><abbr title=" 458                             getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6-74696673696d&quot;)),"> 458                             getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6ðŸ”µ</abbr></span>
<span class="-4709444814666373888" onmouseenter="enter('-4709444814666373888');" onmouseout="out('-4709444814666373888');" style=""><abbr title=" 459                             new byte[]{(byte) 0x01, (byte) 0x04, (byte) 0x30, (byte) 0x75, (byte) 0x00, (byte) 0x00}"> 459                             new byte[]{(byte) 0x01, (byte) 0x04, (byte) 0x30, (byte) 0x75, (byte) 0x00, (ðŸ”µ</abbr></span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 460                             )                                                                            </span>
<span class="7475982186340408444" onmouseenter="enter('7475982186340408444');" onmouseout="out('7475982186340408444');" style=""> 461                     .queue(getDeviceSupport().getQueue());                                               </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style=""> 462         }else{                                                                                           </span>
<span class="1659990903962259675" onmouseenter="enter('1659990903962259675');" onmouseout="out('1659990903962259675');" style=""> 463             new TransactionBuilder(&quot;vibrate find&quot;)                                                       </span>
<span class="-2922806062965776165" onmouseenter="enter('-2922806062965776165');" onmouseout="out('-2922806062965776165');" style=""> 464                     .write(                                                                              </span>
<span class="4897579106813855607" onmouseenter="enter('4897579106813855607');" onmouseout="out('4897579106813855607');" style=""><abbr title=" 465                             getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6-74696673696d&quot;)),"> 465                             getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6ðŸ”µ</abbr></span>
<span class="-5350492152909335002" onmouseenter="enter('-5350492152909335002');" onmouseout="out('-5350492152909335002');" style=""> 466                             new byte[]{(byte) 0x02, (byte) 0x05, (byte) 0x04}                            </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 467                     )                                                                                    </span>
<span class="7475982186340408444" onmouseenter="enter('7475982186340408444');" onmouseout="out('7475982186340408444');" style=""> 468                     .queue(getDeviceSupport().getQueue());                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 469         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 470     }                                                                                                    </span>
<span  style=""> 471                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 472     @Override                                                                                            </span>
<span class="8502851833159229707" onmouseenter="enter('8502851833159229707');" onmouseout="out('8502851833159229707');" style=""> 473     public void onSetCallState(CallSpec callSpec) {                                                      </span>
<span class="2570082300251631790" onmouseenter="enter('2570082300251631790');" onmouseout="out('2570082300251631790');" style=""> 474         super.onSetCallState(callSpec);                                                                  </span>
<span class="-5845444396137068141" onmouseenter="enter('-5845444396137068141');" onmouseout="out('-5845444396137068141');" style=""><abbr title=" 475         queueWrite(new PlayCallNotificationRequest(StringUtils.getFirstOf(callSpec.name, callSpec.number), callSpec.command == CallSpec.CALL_INCOMING, this));"> 475         queueWrite(new PlayCallNotificationRequest(StringUtils.getFirstOf(callSpec.name, callSpec.number)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476     }                                                                                                    </span>
<span  style=""> 477                                                                                                          </span>
<span class="-9163390227004502495" onmouseenter="enter('-9163390227004502495');" onmouseout="out('-9163390227004502495');" style=""> 478     // this method is based on the one from AppMessageHandlerYWeather.java                               </span>
<span class="-7257237953502575841" onmouseenter="enter('-7257237953502575841');" onmouseout="out('-7257237953502575841');" style=""> 479     private int getIconForConditionCode(int conditionCode, boolean isNight) {                            </span>
<span class="-7242773537695047282" onmouseenter="enter('-7242773537695047282');" onmouseout="out('-7242773537695047282');" style=""> 480         final int CLEAR_DAY = 0;                                                                         </span>
<span class="4533171043840830733" onmouseenter="enter('4533171043840830733');" onmouseout="out('4533171043840830733');" style=""> 481         final int CLEAR_NIGHT = 1;                                                                       </span>
<span class="-1044203258765846265" onmouseenter="enter('-1044203258765846265');" onmouseout="out('-1044203258765846265');" style=""> 482         final int CLOUDY = 2;                                                                            </span>
<span class="6767089093966645579" onmouseenter="enter('6767089093966645579');" onmouseout="out('6767089093966645579');" style=""> 483         final int PARTLY_CLOUDY_DAY = 3;                                                                 </span>
<span class="4494290528913924840" onmouseenter="enter('4494290528913924840');" onmouseout="out('4494290528913924840');" style=""> 484         final int PARTLY_CLOUDY_NIGHT = 4;                                                               </span>
<span class="-948427530318648638" onmouseenter="enter('-948427530318648638');" onmouseout="out('-948427530318648638');" style=""> 485         final int RAIN = 5;                                                                              </span>
<span class="-7891962438645220671" onmouseenter="enter('-7891962438645220671');" onmouseout="out('-7891962438645220671');" style=""> 486         final int SNOW = 6;                                                                              </span>
<span class="7487235255100620000" onmouseenter="enter('7487235255100620000');" onmouseout="out('7487235255100620000');" style=""> 487         final int SNOW_2 = 7; // same as 6?                                                              </span>
<span class="6109174568599434520" onmouseenter="enter('6109174568599434520');" onmouseout="out('6109174568599434520');" style=""> 488         final int THUNDERSTORM = 8;                                                                      </span>
<span class="-1407557299840080809" onmouseenter="enter('-1407557299840080809');" onmouseout="out('-1407557299840080809');" style=""> 489         final int CLOUDY_2 = 9; // same as 2?                                                            </span>
<span class="-235578585516231192" onmouseenter="enter('-235578585516231192');" onmouseout="out('-235578585516231192');" style=""> 490         final int WINDY = 10;                                                                            </span>
<span  style=""> 491                                                                                                          </span>
<span class="-6750306522095776186" onmouseenter="enter('-6750306522095776186');" onmouseout="out('-6750306522095776186');" style=""> 492         if (conditionCode == 800 || conditionCode == 951) {                                              </span>
<span class="-7722401087902140861" onmouseenter="enter('-7722401087902140861');" onmouseout="out('-7722401087902140861');" style=""> 493             return isNight ? CLEAR_NIGHT : CLEAR_DAY;                                                    </span>
<span class="3088760508183910638" onmouseenter="enter('3088760508183910638');" onmouseout="out('3088760508183910638');" style=""> 494         } else if (conditionCode &gt; 800 &amp;&amp; conditionCode &lt; 900) {                                         </span>
<span class="6220617342345108517" onmouseenter="enter('6220617342345108517');" onmouseout="out('6220617342345108517');" style=""> 495             return isNight ? PARTLY_CLOUDY_NIGHT : PARTLY_CLOUDY_DAY;                                    </span>
<span class="3057497190260727363" onmouseenter="enter('3057497190260727363');" onmouseout="out('3057497190260727363');" style=""> 496         } else if (conditionCode &gt;= 300 &amp;&amp; conditionCode &lt; 400) {                                        </span>
<span class="7963689777117946550" onmouseenter="enter('7963689777117946550');" onmouseout="out('7963689777117946550');" style=""> 497             return RAIN; // drizzle mapped to rain                                                       </span>
<span class="-3733606442935144190" onmouseenter="enter('-3733606442935144190');" onmouseout="out('-3733606442935144190');" style=""> 498         } else if (conditionCode &gt;= 500 &amp;&amp; conditionCode &lt; 600) {                                        </span>
<span class="2508004717339579833" onmouseenter="enter('2508004717339579833');" onmouseout="out('2508004717339579833');" style=""> 499             return RAIN;                                                                                 </span>
<span class="4918040359999714885" onmouseenter="enter('4918040359999714885');" onmouseout="out('4918040359999714885');" style=""> 500         } else if (conditionCode &gt;= 700 &amp;&amp; conditionCode &lt; 732) {                                        </span>
<span class="6233122099491282445" onmouseenter="enter('6233122099491282445');" onmouseout="out('6233122099491282445');" style=""> 501             return CLOUDY;                                                                               </span>
<span class="6405170419319947758" onmouseenter="enter('6405170419319947758');" onmouseout="out('6405170419319947758');" style=""><abbr title=" 502         } else if (conditionCode == 741 || conditionCode == 751 || conditionCode == 761 || conditionCode == 762) {"> 502         } else if (conditionCode == 741 || conditionCode == 751 || conditionCode == 761 || conditionCode ðŸ”µ</abbr></span>
<span class="2536039853244368761" onmouseenter="enter('2536039853244368761');" onmouseout="out('2536039853244368761');" style=""> 503             return CLOUDY; // fog mapped to cloudy                                                       </span>
<span class="6580216626725103203" onmouseenter="enter('6580216626725103203');" onmouseout="out('6580216626725103203');" style=""> 504         } else if (conditionCode == 771) {                                                               </span>
<span class="-5268377561975928582" onmouseenter="enter('-5268377561975928582');" onmouseout="out('-5268377561975928582');" style=""> 505             return CLOUDY; // squalls mapped to cloudy                                                   </span>
<span class="-6475883863999659582" onmouseenter="enter('-6475883863999659582');" onmouseout="out('-6475883863999659582');" style=""> 506         } else if (conditionCode == 781) {                                                               </span>
<span class="-2651444700159349229" onmouseenter="enter('-2651444700159349229');" onmouseout="out('-2651444700159349229');" style=""> 507             return WINDY; // tornato mapped to windy                                                     </span>
<span class="-3846351950108028451" onmouseenter="enter('-3846351950108028451');" onmouseout="out('-3846351950108028451');" style=""> 508         } else if (conditionCode &gt;= 200 &amp;&amp; conditionCode &lt; 300) {                                        </span>
<span class="-7893213180272113492" onmouseenter="enter('-7893213180272113492');" onmouseout="out('-7893213180272113492');" style=""> 509             return THUNDERSTORM;                                                                         </span>
<span class="-160375692992858182" onmouseenter="enter('-160375692992858182');" onmouseout="out('-160375692992858182');" style=""> 510         } else if (conditionCode &gt;= 600 &amp;&amp; conditionCode &lt;= 602) {                                       </span>
<span class="4577577423549625750" onmouseenter="enter('4577577423549625750');" onmouseout="out('4577577423549625750');" style=""> 511             return SNOW;                                                                                 </span>
<span class="73124631780569399" onmouseenter="enter('73124631780569399');" onmouseout="out('73124631780569399');" style=""> 512         } else if (conditionCode &gt;= 611 &amp;&amp; conditionCode &lt;= 622) {                                       </span>
<span class="2508004717339579833" onmouseenter="enter('2508004717339579833');" onmouseout="out('2508004717339579833');" style=""> 513             return RAIN;                                                                                 </span>
<span class="5918520655852856943" onmouseenter="enter('5918520655852856943');" onmouseout="out('5918520655852856943');" style=""> 514         } else if (conditionCode == 906) {                                                               </span>
<span class="-8494627517236710847" onmouseenter="enter('-8494627517236710847');" onmouseout="out('-8494627517236710847');" style=""> 515             return RAIN; // hail mapped to rain                                                          </span>
<span class="-4632432821354911151" onmouseenter="enter('-4632432821354911151');" onmouseout="out('-4632432821354911151');" style=""> 516         } else if (conditionCode &gt;= 907 &amp;&amp; conditionCode &lt; 957) {                                        </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 517             return WINDY;                                                                                </span>
<span class="884594439890815837" onmouseenter="enter('884594439890815837');" onmouseout="out('884594439890815837');" style=""> 518         } else if (conditionCode == 905) {                                                               </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 519             return WINDY;                                                                                </span>
<span class="7058363657246863920" onmouseenter="enter('7058363657246863920');" onmouseout="out('7058363657246863920');" style=""> 520         } else if (conditionCode == 900) {                                                               </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 521             return WINDY;                                                                                </span>
<span class="-7755582696699634395" onmouseenter="enter('-7755582696699634395');" onmouseout="out('-7755582696699634395');" style=""> 522         } else if (conditionCode == 901 || conditionCode == 902 || conditionCode == 962) {               </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 523             return WINDY;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 524         }                                                                                                </span>
<span class="-7722401087902140861" onmouseenter="enter('-7722401087902140861');" onmouseout="out('-7722401087902140861');" style=""> 525         return isNight ? CLEAR_NIGHT : CLEAR_DAY;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 526     }                                                                                                    </span>
<span  style=""> 527                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 528     @Override                                                                                            </span>
<span class="-6167041048283935417" onmouseenter="enter('-6167041048283935417');" onmouseout="out('-6167041048283935417');" style=""> 529     public void onSendWeather(WeatherSpec weatherSpec) {                                                 </span>
<span class="-580696616137890311" onmouseenter="enter('-580696616137890311');" onmouseout="out('-580696616137890311');" style=""> 530         long ts = System.currentTimeMillis();                                                            </span>
<span class="-8981233749074677785" onmouseenter="enter('-8981233749074677785');" onmouseout="out('-8981233749074677785');" style=""> 531         ts /= 1000;                                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 532         try {                                                                                            </span>
<span class="-4452014417400702333" onmouseenter="enter('-4452014417400702333');" onmouseout="out('-4452014417400702333');" style=""> 533             JSONObject responseObject = new JSONObject()                                                 </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 534                     .put(&quot;res&quot;, new JSONObject()                                                         </span>
<span class="-311134376594128902" onmouseenter="enter('-311134376594128902');" onmouseout="out('-311134376594128902');" style=""> 535                             .put(&quot;id&quot;, 0) // seems the id does not matter?                               </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 536                             .put(&quot;set&quot;, new JSONObject()                                                 </span>
<span class="-7491386685560898919" onmouseenter="enter('-7491386685560898919');" onmouseout="out('-7491386685560898919');" style=""> 537                                     .put(&quot;weatherInfo&quot;, new JSONObject()                                 </span>
<span class="3913809787685967455" onmouseenter="enter('3913809787685967455');" onmouseout="out('3913809787685967455');" style=""> 538                                             .put(&quot;alive&quot;, ts + 60 * 60)                                  </span>
<span class="4823146304358131104" onmouseenter="enter('4823146304358131104');" onmouseout="out('4823146304358131104');" style=""> 539                                             .put(&quot;unit&quot;, &quot;c&quot;) // FIXME: do not hardcode                  </span>
<span class="3465794128886265400" onmouseenter="enter('3465794128886265400');" onmouseout="out('3465794128886265400');" style=""> 540                                             .put(&quot;temp&quot;, weatherSpec.currentTemp - 273)                  </span>
<span class="-2978941176103258929" onmouseenter="enter('-2978941176103258929');" onmouseout="out('-2978941176103258929');" style=""><abbr title=" 541                                             .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.currentConditionCode, false)) // FIXME do not assume daylight"> 541                                             .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.currentCoðŸ”µ</abbr></span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 542                                     )                                                                    </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 543                             )                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 544                     );                                                                                   </span>
<span  style=""> 545                                                                                                          </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 546             queueWrite(new JsonPutRequest(responseObject, this));                                        </span>
<span  style=""> 547                                                                                                          </span>
<span class="5317082335628225584" onmouseenter="enter('5317082335628225584');" onmouseout="out('5317082335628225584');" style=""> 548             JSONArray forecastWeekArray = new JSONArray();                                               </span>
<span class="-2368043815888700658" onmouseenter="enter('-2368043815888700658');" onmouseout="out('-2368043815888700658');" style=""> 549             final String[] weekdays = {&quot;&quot;, &quot;Sun&quot;, &quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;};             </span>
<span class="-364158713171851732" onmouseenter="enter('-364158713171851732');" onmouseout="out('-364158713171851732');" style=""> 550             Calendar cal = Calendar.getInstance();                                                       </span>
<span class="-4637281821247246720" onmouseenter="enter('-4637281821247246720');" onmouseout="out('-4637281821247246720');" style=""> 551             cal.setTimeInMillis(weatherSpec.timestamp * 1000L);                                          </span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style=""> 552             int i = 0;                                                                                   </span>
<span class="4625687820668156386" onmouseenter="enter('4625687820668156386');" onmouseout="out('4625687820668156386');" style=""> 553             for (WeatherSpec.Forecast forecast : weatherSpec.forecasts) {                                </span>
<span class="3497173000510224029" onmouseenter="enter('3497173000510224029');" onmouseout="out('3497173000510224029');" style=""> 554                 cal.add(Calendar.DATE, 1);                                                               </span>
<span class="-2706943182093550956" onmouseenter="enter('-2706943182093550956');" onmouseout="out('-2706943182093550956');" style=""> 555                 int dayOfWeek = cal.get(Calendar.DAY_OF_WEEK);                                           </span>
<span class="8445249603810894149" onmouseenter="enter('8445249603810894149');" onmouseout="out('8445249603810894149');" style=""> 556                 forecastWeekArray.put(new JSONObject()                                                   </span>
<span class="3406552519892389037" onmouseenter="enter('3406552519892389037');" onmouseout="out('3406552519892389037');" style=""> 557                         .put(&quot;day&quot;, weekdays[dayOfWeek])                                                 </span>
<span class="-3341352462469645269" onmouseenter="enter('-3341352462469645269');" onmouseout="out('-3341352462469645269');" style=""><abbr title=" 558                         .put(&quot;cond_id&quot;, getIconForConditionCode(forecast.conditionCode, false)) // FIXME do not assume daylight"> 558                         .put(&quot;cond_id&quot;, getIconForConditionCode(forecast.conditionCode, false)) // FIXME ðŸ”µ</abbr></span>
<span class="2713736984512170635" onmouseenter="enter('2713736984512170635');" onmouseout="out('2713736984512170635');" style=""> 559                         .put(&quot;high&quot;, forecast.maxTemp - 273)                                             </span>
<span class="8922707616504433133" onmouseenter="enter('8922707616504433133');" onmouseout="out('8922707616504433133');" style=""> 560                         .put(&quot;low&quot;, forecast.minTemp - 273)                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 561                 );                                                                                       </span>
<span class="-1631419655189706967" onmouseenter="enter('-1631419655189706967');" onmouseout="out('-1631419655189706967');" style=""> 562                 if (++i == 3) break; // max 3                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 563             }                                                                                            </span>
<span  style=""> 564                                                                                                          </span>
<span class="1945247200353653685" onmouseenter="enter('1945247200353653685');" onmouseout="out('1945247200353653685');" style=""> 565             JSONArray forecastDayArray = new JSONArray();                                                </span>
<span class="-3162654741636225130" onmouseenter="enter('-3162654741636225130');" onmouseout="out('-3162654741636225130');" style=""> 566             final int[] hours = {0, 0, 0};                                                               </span>
<span  style=""> 567                                                                                                          </span>
<span class="6125525781312818118" onmouseenter="enter('6125525781312818118');" onmouseout="out('6125525781312818118');" style=""> 568             for (int hour : hours) {                                                                     </span>
<span class="1068601706398434110" onmouseenter="enter('1068601706398434110');" onmouseout="out('1068601706398434110');" style=""> 569                 forecastDayArray.put(new JSONObject()                                                    </span>
<span class="-3870856117199987769" onmouseenter="enter('-3870856117199987769');" onmouseout="out('-3870856117199987769');" style=""> 570                         .put(&quot;hour&quot;, hour)                                                               </span>
<span class="-6006964472079792051" onmouseenter="enter('-6006964472079792051');" onmouseout="out('-6006964472079792051');" style=""> 571                         .put(&quot;cond_id&quot;, 0)                                                               </span>
<span class="-6609285657661916066" onmouseenter="enter('-6609285657661916066');" onmouseout="out('-6609285657661916066');" style=""> 572                         .put(&quot;temp&quot;, 0)                                                                  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 573                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574             }                                                                                            </span>
<span  style=""> 575                                                                                                          </span>
<span  style=""> 576                                                                                                          </span>
<span class="3790951608586851062" onmouseenter="enter('3790951608586851062');" onmouseout="out('3790951608586851062');" style=""> 577             JSONObject forecastResponseObject = new JSONObject()                                         </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 578                     .put(&quot;res&quot;, new JSONObject()                                                         </span>
<span class="3332377282695166753" onmouseenter="enter('3332377282695166753');" onmouseout="out('3332377282695166753');" style=""> 579                             .put(&quot;id&quot;, 0)                                                                </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 580                             .put(&quot;set&quot;, new JSONObject()                                                 </span>
<span class="7467737770827774855" onmouseenter="enter('7467737770827774855');" onmouseout="out('7467737770827774855');" style=""> 581                                     .put(&quot;weatherApp._.config.locations&quot;, new JSONArray()                </span>
<span class="-2773638428741427529" onmouseenter="enter('-2773638428741427529');" onmouseout="out('-2773638428741427529');" style=""> 582                                             .put(new JSONObject()                                        </span>
<span class="3913809787685967455" onmouseenter="enter('3913809787685967455');" onmouseout="out('3913809787685967455');" style=""> 583                                                     .put(&quot;alive&quot;, ts + 60 * 60)                          </span>
<span class="886713691773163342" onmouseenter="enter('886713691773163342');" onmouseout="out('886713691773163342');" style=""> 584                                                     .put(&quot;city&quot;, weatherSpec.location)                   </span>
<span class="4823146304358131104" onmouseenter="enter('4823146304358131104');" onmouseout="out('4823146304358131104');" style=""> 585                                                     .put(&quot;unit&quot;, &quot;c&quot;) // FIXME: do not hardcode          </span>
<span class="3465794128886265400" onmouseenter="enter('3465794128886265400');" onmouseout="out('3465794128886265400');" style=""> 586                                                     .put(&quot;temp&quot;, weatherSpec.currentTemp - 273)          </span>
<span class="6957530022753247995" onmouseenter="enter('6957530022753247995');" onmouseout="out('6957530022753247995');" style=""> 587                                                     .put(&quot;high&quot;, weatherSpec.todayMaxTemp - 273)         </span>
<span class="-7717570350252662201" onmouseenter="enter('-7717570350252662201');" onmouseout="out('-7717570350252662201');" style=""> 588                                                     .put(&quot;low&quot;, weatherSpec.todayMinTemp - 273)          </span>
<span class="-5985677233453575860" onmouseenter="enter('-5985677233453575860');" onmouseout="out('-5985677233453575860');" style=""> 589                                                     .put(&quot;rain&quot;, 0)                                      </span>
<span class="-2978941176103258929" onmouseenter="enter('-2978941176103258929');" onmouseout="out('-2978941176103258929');" style=""><abbr title=" 590                                                     .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.currentConditionCode, false)) // FIXME do not assume daylight"> 590                                                     .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.cðŸ”µ</abbr></span>
<span class="-3427053046266686031" onmouseenter="enter('-3427053046266686031');" onmouseout="out('-3427053046266686031');" style=""> 591                                                     .put(&quot;forecast_day&quot;, forecastDayArray)               </span>
<span class="-6314376065462434614" onmouseenter="enter('-6314376065462434614');" onmouseout="out('-6314376065462434614');" style=""> 592                                                     .put(&quot;forecast_week&quot;, forecastWeekArray)             </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 593                                             )                                                            </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 594                                     )                                                                    </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 595                             )                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 596                     );                                                                                   </span>
<span  style=""> 597                                                                                                          </span>
<span class="5488486443475038572" onmouseenter="enter('5488486443475038572');" onmouseout="out('5488486443475038572');" style=""> 598             queueWrite(new JsonPutRequest(forecastResponseObject, this));                                </span>
<span  style=""> 599                                                                                                          </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 600         } catch (JSONException e) {                                                                      </span>
<span class="-3518979045088336375" onmouseenter="enter('-3518979045088336375');" onmouseout="out('-3518979045088336375');" style=""> 601             logger.error(&quot;JSON exception: &quot;, e);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 602         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 603     }                                                                                                    </span>
<span  style=""> 604                                                                                                          </span>
<span class="-8903998240903156866" onmouseenter="enter('-8903998240903156866');" onmouseout="out('-8903998240903156866');" style=""> 605     // this was used to enumerate the weather icons :)                                                   </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 606     /*                                                                                                   </span>
<span class="9097322268338941135" onmouseenter="enter('9097322268338941135');" onmouseout="out('9097322268338941135');" style=""> 607     static int i = 0;                                                                                    </span>
<span  style=""> 608                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 609     @Override                                                                                            </span>
<span class="-1180224994468071186" onmouseenter="enter('-1180224994468071186');" onmouseout="out('-1180224994468071186');" style=""> 610     public void onTestNewFunction() {                                                                    </span>
<span class="-580696616137890311" onmouseenter="enter('-580696616137890311');" onmouseout="out('-580696616137890311');" style=""> 611         long ts = System.currentTimeMillis();                                                            </span>
<span class="-8981233749074677785" onmouseenter="enter('-8981233749074677785');" onmouseout="out('-8981233749074677785');" style=""> 612         ts /= 1000;                                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 613         try {                                                                                            </span>
<span class="-4452014417400702333" onmouseenter="enter('-4452014417400702333');" onmouseout="out('-4452014417400702333');" style=""> 614             JSONObject responseObject = new JSONObject()                                                 </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 615                     .put(&quot;res&quot;, new JSONObject()                                                         </span>
<span class="-311134376594128902" onmouseenter="enter('-311134376594128902');" onmouseout="out('-311134376594128902');" style=""> 616                             .put(&quot;id&quot;, 0) // seems the id does not matter?                               </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 617                             .put(&quot;set&quot;, new JSONObject()                                                 </span>
<span class="-7491386685560898919" onmouseenter="enter('-7491386685560898919');" onmouseout="out('-7491386685560898919');" style=""> 618                                     .put(&quot;weatherInfo&quot;, new JSONObject()                                 </span>
<span class="3913809787685967455" onmouseenter="enter('3913809787685967455');" onmouseout="out('3913809787685967455');" style=""> 619                                             .put(&quot;alive&quot;, ts + 60 * 60)                                  </span>
<span class="8812574869889008786" onmouseenter="enter('8812574869889008786');" onmouseout="out('8812574869889008786');" style=""> 620                                             .put(&quot;unit&quot;, &quot;c&quot;)                                            </span>
<span class="-9027201993479344069" onmouseenter="enter('-9027201993479344069');" onmouseout="out('-9027201993479344069');" style=""> 621                                             .put(&quot;temp&quot;, i)                                              </span>
<span class="-503000518492904339" onmouseenter="enter('-503000518492904339');" onmouseout="out('-503000518492904339');" style=""> 622                                             .put(&quot;cond_id&quot;, i++)                                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 623                                     )                                                                    </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 624                             ));                                                                          </span>
<span  style=""> 625                                                                                                          </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 626             queueWrite(new JsonPutRequest(responseObject, this));                                        </span>
<span  style=""> 627                                                                                                          </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 628         } catch (JSONException e) {                                                                      </span>
<span class="-255862428648050787" onmouseenter="enter('-255862428648050787');" onmouseout="out('-255862428648050787');" style=""> 629             logger.error(&quot; JSON exception: &quot;, e);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 630         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 631     }                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 632     */                                                                                                   </span>
<span class="4061760400153145133" onmouseenter="enter('4061760400153145133');" onmouseout="out('4061760400153145133');" style=""> 633     public byte[] getSecretKey() {                                                                       </span>
<span class="877865931329337758" onmouseenter="enter('877865931329337758');" onmouseout="out('877865931329337758');" style=""> 634         byte[] authKeyBytes = new byte[16];                                                              </span>
<span  style=""> 635                                                                                                          </span>
<span class="6732301069337237036" onmouseenter="enter('6732301069337237036');" onmouseout="out('6732301069337237036');" style=""><abbr title=" 636         SharedPreferences sharedPrefs = GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddress());"> 636         SharedPreferences sharedPrefs = GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getðŸ”µ</abbr></span>
<span  style=""> 637                                                                                                          </span>
<span class="-3395951777279535435" onmouseenter="enter('-3395951777279535435');" onmouseout="out('-3395951777279535435');" style=""> 638         String authKey = sharedPrefs.getString(&quot;authkey&quot;, null);                                         </span>
<span class="-7368286337752989387" onmouseenter="enter('-7368286337752989387');" onmouseout="out('-7368286337752989387');" style=""> 639         if (authKey != null &amp;&amp; !authKey.isEmpty()) {                                                     </span>
<span class="-7318628780836353920" onmouseenter="enter('-7318628780836353920');" onmouseout="out('-7318628780836353920');" style=""> 640             byte[] srcBytes = authKey.trim().getBytes();                                                 </span>
<span class="-7029558868717651202" onmouseenter="enter('-7029558868717651202');" onmouseout="out('-7029558868717651202');" style=""> 641             if (authKey.length() == 34 &amp;&amp; authKey.startsWith(&quot;0x&quot;)) {                                    </span>
<span class="3552614168594468794" onmouseenter="enter('3552614168594468794');" onmouseout="out('3552614168594468794');" style=""> 642                 srcBytes = GB.hexStringToByteArray(authKey.substring(2));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 643             }                                                                                            </span>
<span class="6598760317559003341" onmouseenter="enter('6598760317559003341');" onmouseout="out('6598760317559003341');" style=""> 644             System.arraycopy(srcBytes, 0, authKeyBytes, 0, Math.min(srcBytes.length, 16));               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645         }                                                                                                </span>
<span  style=""> 646                                                                                                          </span>
<span class="340030267486824060" onmouseenter="enter('340030267486824060');" onmouseout="out('340030267486824060');" style=""> 647         return authKeyBytes;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 648     }                                                                                                    </span>
<span  style=""> 649                                                                                                          </span>
<span class="1797454318126944117" onmouseenter="enter('1797454318126944117');" onmouseout="out('1797454318126944117');" style=""> 650     public void setPhoneRandomNumber(byte[] phoneRandomNumber) {                                         </span>
<span class="-1045014803983093080" onmouseenter="enter('-1045014803983093080');" onmouseout="out('-1045014803983093080');" style=""> 651         this.phoneRandomNumber = phoneRandomNumber;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652     }                                                                                                    </span>
<span  style=""> 653                                                                                                          </span>
<span class="6353599412516657012" onmouseenter="enter('6353599412516657012');" onmouseout="out('6353599412516657012');" style=""> 654     public byte[] getPhoneRandomNumber() {                                                               </span>
<span class="-8473936821502081479" onmouseenter="enter('-8473936821502081479');" onmouseout="out('-8473936821502081479');" style=""> 655         return phoneRandomNumber;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 656     }                                                                                                    </span>
<span  style=""> 657                                                                                                          </span>
<span class="8524954629356124134" onmouseenter="enter('8524954629356124134');" onmouseout="out('8524954629356124134');" style=""> 658     public void setWatchRandomNumber(byte[] watchRandomNumber) {                                         </span>
<span class="-8554456578054756330" onmouseenter="enter('-8554456578054756330');" onmouseout="out('-8554456578054756330');" style=""> 659         this.watchRandomNumber = watchRandomNumber;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660     }                                                                                                    </span>
<span  style=""> 661                                                                                                          </span>
<span class="-817141622160847580" onmouseenter="enter('-817141622160847580');" onmouseout="out('-817141622160847580');" style=""> 662     public byte[] getWatchRandomNumber() {                                                               </span>
<span class="4512956887887166379" onmouseenter="enter('4512956887887166379');" onmouseout="out('4512956887887166379');" style=""> 663         return watchRandomNumber;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 664     }                                                                                                    </span>
<span  style=""> 665                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 666     @Override                                                                                            </span>
<span class="-8332902696773003591" onmouseenter="enter('-8332902696773003591');" onmouseout="out('-8332902696773003591');" style=""> 667     public void overwriteButtons(String jsonConfigString) {                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 668         try {                                                                                            </span>
<span class="-5757883755283420088" onmouseenter="enter('-5757883755283420088');" onmouseout="out('-5757883755283420088');" style=""> 669             JSONArray jsonArray = new JSONArray(                                                         </span>
<span class="-5162550843991564685" onmouseenter="enter('-5162550843991564685');" onmouseout="out('-5162550843991564685');" style=""> 670                     GBApplication.getPrefs().getString(HRConfigActivity.CONFIG_KEY_Q_ACTIONS, &quot;[]&quot;)      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 671             );                                                                                           </span>
<span class="-3670193080643996757" onmouseenter="enter('-3670193080643996757');" onmouseout="out('-3670193080643996757');" style=""> 672             String[] menuItems = new String[jsonArray.length()];                                         </span>
<span class="3800396328797868230" onmouseenter="enter('3800396328797868230');" onmouseout="out('3800396328797868230');" style=""> 673             for (int i = 0; i &lt; jsonArray.length(); i++) menuItems[i] = jsonArray.getString(i);          </span>
<span  style=""> 674                                                                                                          </span>
<span class="-8974533950525390112" onmouseenter="enter('-8974533950525390112');" onmouseout="out('-8974533950525390112');" style=""> 675             SharedPreferences prefs = getDeviceSpecificPreferences();                                    </span>
<span class="3731441667100257289" onmouseenter="enter('3731441667100257289');" onmouseout="out('3731441667100257289');" style=""><abbr title=" 676             String upperButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_1_FUNCTION, &quot;weatherApp&quot;);"> 676             String upperButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_1_FUNCTION,ðŸ”µ</abbr></span>
<span class="8778701870293152792" onmouseenter="enter('8778701870293152792');" onmouseout="out('8778701870293152792');" style=""><abbr title=" 677             String middleButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_2_FUNCTION, &quot;commuteApp&quot;);"> 677             String middleButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_2_FUNCTIONðŸ”µ</abbr></span>
<span class="-9179810663962091339" onmouseenter="enter('-9179810663962091339');" onmouseout="out('-9179810663962091339');" style=""><abbr title=" 678             String lowerButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_3_FUNCTION, &quot;musicApp&quot;);"> 678             String lowerButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_3_FUNCTION,ðŸ”µ</abbr></span>
<span  style=""> 679                                                                                                          </span>
<span class="-2546877682423996320" onmouseenter="enter('-2546877682423996320');" onmouseout="out('-2546877682423996320');" style=""> 680             queueWrite(new ButtonConfigurationPutRequest(                                                </span>
<span class="959305012337743007" onmouseenter="enter('959305012337743007');" onmouseout="out('959305012337743007');" style=""> 681                     menuItems,                                                                           </span>
<span class="-2429855445172031576" onmouseenter="enter('-2429855445172031576');" onmouseout="out('-2429855445172031576');" style=""> 682                     upperButtonApp,                                                                      </span>
<span class="7250962454256273524" onmouseenter="enter('7250962454256273524');" onmouseout="out('7250962454256273524');" style=""> 683                     middleButtonApp,                                                                     </span>
<span class="3869959890859912879" onmouseenter="enter('3869959890859912879');" onmouseout="out('3869959890859912879');" style=""> 684                     lowerButtonApp,                                                                      </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 685                     this                                                                                 </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 686             ));                                                                                          </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 687         } catch (JSONException e) {                                                                      </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 688             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 690     }                                                                                                    </span>
<span  style=""> 691                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 692     @Override                                                                                            </span>
<span class="349159621018699769" onmouseenter="enter('349159621018699769');" onmouseout="out('349159621018699769');" style=""> 693     public void onSendConfiguration(String config) {                                                     </span>
<span class="-5681424438451116078" onmouseenter="enter('-5681424438451116078');" onmouseout="out('-5681424438451116078');" style=""> 694         switch (config) {                                                                                </span>
<span class="-3013237703294184776" onmouseenter="enter('-3013237703294184776');" onmouseout="out('-3013237703294184776');" style=""> 695             case DeviceSettingsPreferenceConst.PREF_BUTTON_1_FUNCTION:                                   </span>
<span class="4315270877947230307" onmouseenter="enter('4315270877947230307');" onmouseout="out('4315270877947230307');" style=""> 696             case DeviceSettingsPreferenceConst.PREF_BUTTON_2_FUNCTION:                                   </span>
<span class="-6016648312979442964" onmouseenter="enter('-6016648312979442964');" onmouseout="out('-6016648312979442964');" style=""> 697             case DeviceSettingsPreferenceConst.PREF_BUTTON_3_FUNCTION:                                   </span>
<span class="-7476048809216327685" onmouseenter="enter('-7476048809216327685');" onmouseout="out('-7476048809216327685');" style=""> 698                 overwriteButtons(null);                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 699                 break;                                                                                   </span>
<span class="4621265622900955004" onmouseenter="enter('4621265622900955004');" onmouseout="out('4621265622900955004');" style=""> 700             case DeviceSettingsPreferenceConst.PREF_VIBRATION_STRENGH_PERCENTAGE:                        </span>
<span class="-4331994456315640395" onmouseenter="enter('-4331994456315640395');" onmouseout="out('-4331994456315640395');" style=""> 701                 setVibrationStrength();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 702         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 703     }                                                                                                    </span>
<span  style=""> 704                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 705     @Override                                                                                            </span>
<span class="-1745999502816791714" onmouseenter="enter('-1745999502816791714');" onmouseout="out('-1745999502816791714');" style=""> 706     public void handleHeartRateCharacteristic(BluetoothGattCharacteristic characteristic) {              </span>
<span class="644393070755783970" onmouseenter="enter('644393070755783970');" onmouseout="out('644393070755783970');" style=""> 707         super.handleHeartRateCharacteristic(characteristic);                                             </span>
<span  style=""> 708                                                                                                          </span>
<span class="-4350509998999229188" onmouseenter="enter('-4350509998999229188');" onmouseout="out('-4350509998999229188');" style=""> 709         byte[] value = characteristic.getValue();                                                        </span>
<span  style=""> 710                                                                                                          </span>
<span class="3002516447616481759" onmouseenter="enter('3002516447616481759');" onmouseout="out('3002516447616481759');" style=""> 711         int heartRate = value[1];                                                                        </span>
<span  style=""> 712                                                                                                          </span>
<span class="-3503506213363643375" onmouseenter="enter('-3503506213363643375');" onmouseout="out('-3503506213363643375');" style=""> 713         logger.debug(&quot;heart rate: &quot; + heartRate);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714     }                                                                                                    </span>
<span  style=""> 715                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 716     @Override                                                                                            </span>
<span class="6377473851875601996" onmouseenter="enter('6377473851875601996');" onmouseout="out('6377473851875601996');" style=""> 717     protected void handleBackgroundCharacteristic(BluetoothGattCharacteristic characteristic) {          </span>
<span class="-2825981250293151244" onmouseenter="enter('-2825981250293151244');" onmouseout="out('-2825981250293151244');" style=""> 718         super.handleBackgroundCharacteristic(characteristic);                                            </span>
<span  style=""> 719                                                                                                          </span>
<span class="-4350509998999229188" onmouseenter="enter('-4350509998999229188');" onmouseout="out('-4350509998999229188');" style=""> 720         byte[] value = characteristic.getValue();                                                        </span>
<span  style=""> 721                                                                                                          </span>
<span class="-8910138668401756259" onmouseenter="enter('-8910138668401756259');" onmouseout="out('-8910138668401756259');" style=""> 722         byte requestType = value[1];                                                                     </span>
<span  style=""> 723                                                                                                          </span>
<span class="-188939088446447101" onmouseenter="enter('-188939088446447101');" onmouseout="out('-188939088446447101');" style=""> 724         if(requestType == (byte) 0x04){                                                                  </span>
<span class="-7559460541575142851" onmouseenter="enter('-7559460541575142851');" onmouseout="out('-7559460541575142851');" style=""> 725             handleCallRequest(value);                                                                    </span>
<span class="8941437976865019066" onmouseenter="enter('8941437976865019066');" onmouseout="out('8941437976865019066');" style=""> 726         }else if (requestType == (byte) 0x05) {                                                          </span>
<span class="-6049325109739304315" onmouseenter="enter('-6049325109739304315');" onmouseout="out('-6049325109739304315');" style=""> 727             handleMusicRequest(value);                                                                   </span>
<span class="-1129186254434475226" onmouseenter="enter('-1129186254434475226');" onmouseout="out('-1129186254434475226');" style=""> 728         } else if (requestType == (byte) 0x01) {                                                         </span>
<span class="5556569467739549651" onmouseenter="enter('5556569467739549651');" onmouseout="out('5556569467739549651');" style=""> 729             int eventId = value[2];                                                                      </span>
<span class="4584038208845194803" onmouseenter="enter('4584038208845194803');" onmouseout="out('4584038208845194803');" style=""> 730             logger.info(&quot;got event id &quot; + eventId);                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 731             try {                                                                                        </span>
<span class="2511008795236813092" onmouseenter="enter('2511008795236813092');" onmouseout="out('2511008795236813092');" style=""> 732                 String jsonString = new String(value, 3, value.length - 3);                              </span>
<span class="-5055085421008485579" onmouseenter="enter('-5055085421008485579');" onmouseout="out('-5055085421008485579');" style=""> 733                 logger.info(jsonString);                                                                 </span>
<span class="7978684515011278150" onmouseenter="enter('7978684515011278150');" onmouseout="out('7978684515011278150');" style=""> 734                 JSONObject requestJson = new JSONObject(jsonString);                                     </span>
<span  style=""> 735                                                                                                          </span>
<span class="-2320957157152693274" onmouseenter="enter('-2320957157152693274');" onmouseout="out('-2320957157152693274');" style=""> 736                 JSONObject request = requestJson.getJSONObject(&quot;req&quot;);                                   </span>
<span class="-4724867393653322739" onmouseenter="enter('-4724867393653322739');" onmouseout="out('-4724867393653322739');" style=""> 737                 int requestId = request.getInt(&quot;id&quot;);                                                    </span>
<span  style=""> 738                                                                                                          </span>
<span class="-9049634342561224124" onmouseenter="enter('-9049634342561224124');" onmouseout="out('-9049634342561224124');" style=""> 739                 if (request.has(&quot;ringMyPhone&quot;)) {                                                        </span>
<span class="-8947281113981412895" onmouseenter="enter('-8947281113981412895');" onmouseout="out('-8947281113981412895');" style=""> 740                     String action = request.getJSONObject(&quot;ringMyPhone&quot;).getString(&quot;action&quot;);            </span>
<span class="2672973027305420404" onmouseenter="enter('2672973027305420404');" onmouseout="out('2672973027305420404');" style=""> 741                     logger.info(&quot;got ringMyPhone request; &quot; + action);                                   </span>
<span class="-5388490694046828121" onmouseenter="enter('-5388490694046828121');" onmouseout="out('-5388490694046828121');" style=""> 742                     GBDeviceEventFindPhone findPhoneEvent = new GBDeviceEventFindPhone();                </span>
<span  style=""> 743                                                                                                          </span>
<span class="-4452014417400702333" onmouseenter="enter('-4452014417400702333');" onmouseout="out('-4452014417400702333');" style=""> 744                     JSONObject responseObject = new JSONObject()                                         </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 745                             .put(&quot;res&quot;, new JSONObject()                                                 </span>
<span class="1179326437824087972" onmouseenter="enter('1179326437824087972');" onmouseout="out('1179326437824087972');" style=""> 746                                     .put(&quot;id&quot;, requestId)                                                </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 747                                     .put(&quot;set&quot;, new JSONObject()                                         </span>
<span class="-1885979276882630426" onmouseenter="enter('-1885979276882630426');" onmouseout="out('-1885979276882630426');" style=""> 748                                             .put(&quot;ringMyPhone&quot;, new JSONObject()                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 749                                             )                                                            </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 750                                     )                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 751                             );                                                                           </span>
<span  style=""> 752                                                                                                          </span>
<span class="8447204792056966026" onmouseenter="enter('8447204792056966026');" onmouseout="out('8447204792056966026');" style=""> 753                     if (&quot;on&quot;.equals(action)) {                                                           </span>
<span class="-2212046129077350542" onmouseenter="enter('-2212046129077350542');" onmouseout="out('-2212046129077350542');" style=""> 754                         findPhoneEvent.event = GBDeviceEventFindPhone.Event.START;                       </span>
<span class="1008493374584433440" onmouseenter="enter('1008493374584433440');" onmouseout="out('1008493374584433440');" style=""> 755                         getDeviceSupport().evaluateGBDeviceEvent(findPhoneEvent);                        </span>
<span class="7519888082405137596" onmouseenter="enter('7519888082405137596');" onmouseout="out('7519888082405137596');" style=""> 756                         responseObject                                                                   </span>
<span class="9073084076350179656" onmouseenter="enter('9073084076350179656');" onmouseout="out('9073084076350179656');" style=""> 757                                 .getJSONObject(&quot;res&quot;)                                                    </span>
<span class="8250331190708228233" onmouseenter="enter('8250331190708228233');" onmouseout="out('8250331190708228233');" style=""> 758                                 .getJSONObject(&quot;set&quot;)                                                    </span>
<span class="-5085635855523546299" onmouseenter="enter('-5085635855523546299');" onmouseout="out('-5085635855523546299');" style=""> 759                                 .getJSONObject(&quot;ringMyPhone&quot;)                                            </span>
<span class="1178745681736221021" onmouseenter="enter('1178745681736221021');" onmouseout="out('1178745681736221021');" style=""> 760                                 .put(&quot;result&quot;, &quot;on&quot;);                                                    </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 761                         queueWrite(new JsonPutRequest(responseObject, this));                            </span>
<span class="1879749671025083715" onmouseenter="enter('1879749671025083715');" onmouseout="out('1879749671025083715');" style=""> 762                     } else if (&quot;off&quot;.equals(action)) {                                                   </span>
<span class="-7600947716940752063" onmouseenter="enter('-7600947716940752063');" onmouseout="out('-7600947716940752063');" style=""> 763                         findPhoneEvent.event = GBDeviceEventFindPhone.Event.STOP;                        </span>
<span class="1008493374584433440" onmouseenter="enter('1008493374584433440');" onmouseout="out('1008493374584433440');" style=""> 764                         getDeviceSupport().evaluateGBDeviceEvent(findPhoneEvent);                        </span>
<span class="7519888082405137596" onmouseenter="enter('7519888082405137596');" onmouseout="out('7519888082405137596');" style=""> 765                         responseObject                                                                   </span>
<span class="9073084076350179656" onmouseenter="enter('9073084076350179656');" onmouseout="out('9073084076350179656');" style=""> 766                                 .getJSONObject(&quot;res&quot;)                                                    </span>
<span class="8250331190708228233" onmouseenter="enter('8250331190708228233');" onmouseout="out('8250331190708228233');" style=""> 767                                 .getJSONObject(&quot;set&quot;)                                                    </span>
<span class="-5085635855523546299" onmouseenter="enter('-5085635855523546299');" onmouseout="out('-5085635855523546299');" style=""> 768                                 .getJSONObject(&quot;ringMyPhone&quot;)                                            </span>
<span class="211329696159530084" onmouseenter="enter('211329696159530084');" onmouseout="out('211329696159530084');" style=""> 769                                 .put(&quot;result&quot;, &quot;off&quot;);                                                   </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 770                         queueWrite(new JsonPutRequest(responseObject, this));                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 771                     }                                                                                    </span>
<span class="-7323615196530492579" onmouseenter="enter('-7323615196530492579');" onmouseout="out('-7323615196530492579');" style=""> 772                 } else if (request.has(&quot;weatherInfo&quot;) || request.has(&quot;weatherApp._.config.locations&quot;)) { </span>
<span class="85506892621979159" onmouseenter="enter('85506892621979159');" onmouseout="out('85506892621979159');" style=""> 773                     logger.info(&quot;Got weatherInfo request&quot;);                                              </span>
<span class="6306353349066792310" onmouseenter="enter('6306353349066792310');" onmouseout="out('6306353349066792310');" style=""> 774                     WeatherSpec weatherSpec = Weather.getInstance().getWeatherSpec();                    </span>
<span class="-6517897774017589507" onmouseenter="enter('-6517897774017589507');" onmouseout="out('-6517897774017589507');" style=""> 775                     if (weatherSpec != null) {                                                           </span>
<span class="850959570716159748" onmouseenter="enter('850959570716159748');" onmouseout="out('850959570716159748');" style=""> 776                         onSendWeather(weatherSpec);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 777                     } else {                                                                             </span>
<span class="-4814341531313102419" onmouseenter="enter('-4814341531313102419');" onmouseout="out('-4814341531313102419');" style=""> 778                         logger.info(&quot;no weather data available  - ignoring request&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 779                     }                                                                                    </span>
<span class="-3372250782701972691" onmouseenter="enter('-3372250782701972691');" onmouseout="out('-3372250782701972691');" style=""> 780                 } else if (request.has(&quot;commuteApp._.config.commute_info&quot;)) {                            </span>
<span class="-7484039887953392259" onmouseenter="enter('-7484039887953392259');" onmouseout="out('-7484039887953392259');" style=""> 781                     String action = request.getJSONObject(&quot;commuteApp._.config.commute_info&quot;)            </span>
<span class="-2601365183494494605" onmouseenter="enter('-2601365183494494605');" onmouseout="out('-2601365183494494605');" style=""> 782                             .getString(&quot;dest&quot;);                                                          </span>
<span  style=""> 783                                                                                                          </span>
<span class="8677829822000511176" onmouseenter="enter('8677829822000511176');" onmouseout="out('8677829822000511176');" style=""> 784                     String startStop = request.getJSONObject(&quot;commuteApp._.config.commute_info&quot;)         </span>
<span class="4504014461373376475" onmouseenter="enter('4504014461373376475');" onmouseout="out('4504014461373376475');" style=""> 785                             .getString(&quot;action&quot;);                                                        </span>
<span  style=""> 786                                                                                                          </span>
<span class="-187304836507611230" onmouseenter="enter('-187304836507611230');" onmouseout="out('-187304836507611230');" style=""> 787                     if (startStop.equals(&quot;stop&quot;)) {                                                      </span>
<span class="3122353555208900571" onmouseenter="enter('3122353555208900571');" onmouseout="out('3122353555208900571');" style=""> 788                         // overwriteButtons(null);                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 789                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790                     }                                                                                    </span>
<span  style=""> 791                                                                                                          </span>
<span class="1150832081372187083" onmouseenter="enter('1150832081372187083');" onmouseout="out('1150832081372187083');" style=""> 792                     queueWrite(new SetCommuteMenuMessage(&quot;Anfrage wird weitergeleitet...&quot;, false, this));</span>
<span  style=""> 793                                                                                                          </span>
<span class="5917993708031460775" onmouseenter="enter('5917993708031460775');" onmouseout="out('5917993708031460775');" style=""> 794                     Intent menuIntent = new Intent(QHybridSupport.QHYBRID_EVENT_COMMUTE_MENU);           </span>
<span class="-7593836382272947716" onmouseenter="enter('-7593836382272947716');" onmouseout="out('-7593836382272947716');" style=""> 795                     menuIntent.putExtra(&quot;EXTRA_ACTION&quot;, action);                                         </span>
<span class="-3894772479235782461" onmouseenter="enter('-3894772479235782461');" onmouseout="out('-3894772479235782461');" style=""> 796                     getContext().sendBroadcast(menuIntent);                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 797                 } else {                                                                                 </span>
<span class="5137598666970820784" onmouseenter="enter('5137598666970820784');" onmouseout="out('5137598666970820784');" style=""> 798                     logger.warn(&quot;Unhandled request from watch: &quot; + requestJson.toString());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 799                 }                                                                                        </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 800             } catch (JSONException e) {                                                                  </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 801                 e.printStackTrace();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 802             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 803         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 804     }                                                                                                    </span>
<span  style=""> 805                                                                                                          </span>
<span class="-6400233286061743273" onmouseenter="enter('-6400233286061743273');" onmouseout="out('-6400233286061743273');" style=""> 806     private void handleCallRequest(byte[] value) {                                                       </span>
<span class="-3590644139230548939" onmouseenter="enter('-3590644139230548939');" onmouseout="out('-3590644139230548939');" style=""> 807         boolean acceptCall = value[7] == (byte) 0x00;                                                    </span>
<span class="4049879043820680121" onmouseenter="enter('4049879043820680121');" onmouseout="out('4049879043820680121');" style=""> 808         queueWrite(new PlayCallNotificationRequest(&quot;&quot;, false, this));                                    </span>
<span  style=""> 809                                                                                                          </span>
<span class="6665458041909146094" onmouseenter="enter('6665458041909146094');" onmouseout="out('6665458041909146094');" style=""> 810         GBDeviceEventCallControl callControlEvent = new GBDeviceEventCallControl();                      </span>
<span class="3689026460844638555" onmouseenter="enter('3689026460844638555');" onmouseout="out('3689026460844638555');" style=""><abbr title=" 811         callControlEvent.event = acceptCall ? GBDeviceEventCallControl.Event.START : GBDeviceEventCallControl.Event.REJECT;"> 811         callControlEvent.event = acceptCall ? GBDeviceEventCallControl.Event.START : GBDeviceEventCallConðŸ”µ</abbr></span>
<span  style=""> 812                                                                                                          </span>
<span class="4738702385903726677" onmouseenter="enter('4738702385903726677');" onmouseout="out('4738702385903726677');" style=""> 813         getDeviceSupport().evaluateGBDeviceEvent(callControlEvent);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814     }                                                                                                    </span>
<span  style=""> 815                                                                                                          </span>
<span class="8416553974703547913" onmouseenter="enter('8416553974703547913');" onmouseout="out('8416553974703547913');" style=""> 816     private void handleMusicRequest(byte[] value) {                                                      </span>
<span class="-7264442020313207444" onmouseenter="enter('-7264442020313207444');" onmouseout="out('-7264442020313207444');" style=""> 817         byte command = value[3];                                                                         </span>
<span class="439297978283151496" onmouseenter="enter('439297978283151496');" onmouseout="out('439297978283151496');" style=""> 818         logger.info(&quot;got music command: &quot; + command);                                                    </span>
<span class="-1813511864680047347" onmouseenter="enter('-1813511864680047347');" onmouseout="out('-1813511864680047347');" style=""> 819         MUSIC_WATCH_REQUEST request = MUSIC_WATCH_REQUEST.fromCommandByte(command);                      </span>
<span  style=""> 820                                                                                                          </span>
<span class="-5683743334008418698" onmouseenter="enter('-5683743334008418698');" onmouseout="out('-5683743334008418698');" style=""> 821         GBDeviceEventMusicControl deviceEventMusicControl = new GBDeviceEventMusicControl();             </span>
<span class="-3093471053493654809" onmouseenter="enter('-3093471053493654809');" onmouseout="out('-3093471053493654809');" style=""> 822         deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.PLAY;                            </span>
<span  style=""> 823                                                                                                          </span>
<span class="-5367969794814104253" onmouseenter="enter('-5367969794814104253');" onmouseout="out('-5367969794814104253');" style=""> 824         // TODO add skipping/seeking                                                                     </span>
<span  style=""> 825                                                                                                          </span>
<span class="-1476594108120808605" onmouseenter="enter('-1476594108120808605');" onmouseout="out('-1476594108120808605');" style=""> 826         switch (request) {                                                                               </span>
<span class="-7604808754482491529" onmouseenter="enter('-7604808754482491529');" onmouseout="out('-7604808754482491529');" style=""> 827             case MUSIC_REQUEST_PLAY_PAUSE: {                                                             </span>
<span class="6628176114625634916" onmouseenter="enter('6628176114625634916');" onmouseout="out('6628176114625634916');" style=""> 828                 queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_PLAY_PAUSE));       </span>
<span class="-7292571951332838856" onmouseenter="enter('-7292571951332838856');" onmouseout="out('-7292571951332838856');" style=""> 829                 deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.PLAYPAUSE;               </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 830                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 831             }                                                                                            </span>
<span class="-3513943256990950658" onmouseenter="enter('-3513943256990950658');" onmouseout="out('-3513943256990950658');" style=""> 832             case MUSIC_REQUEST_NEXT: {                                                                   </span>
<span class="-2914236159900871664" onmouseenter="enter('-2914236159900871664');" onmouseout="out('-2914236159900871664');" style=""> 833                 queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_NEXT));             </span>
<span class="7432071170862747108" onmouseenter="enter('7432071170862747108');" onmouseout="out('7432071170862747108');" style=""> 834                 deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.NEXT;                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 835                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 836             }                                                                                            </span>
<span class="-320503160388671458" onmouseenter="enter('-320503160388671458');" onmouseout="out('-320503160388671458');" style=""> 837             case MUSIC_REQUEST_PREVIOUS: {                                                               </span>
<span class="6742500320012674264" onmouseenter="enter('6742500320012674264');" onmouseout="out('6742500320012674264');" style=""> 838                 queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_PREVIOUS));         </span>
<span class="-101590717290727599" onmouseenter="enter('-101590717290727599');" onmouseout="out('-101590717290727599');" style=""> 839                 deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.PREVIOUS;                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 840                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 841             }                                                                                            </span>
<span class="5859425638057110790" onmouseenter="enter('5859425638057110790');" onmouseout="out('5859425638057110790');" style=""> 842             case MUSIC_REQUEST_LOUDER: {                                                                 </span>
<span class="-3857602001706076214" onmouseenter="enter('-3857602001706076214');" onmouseout="out('-3857602001706076214');" style=""> 843                 queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_LOUDER));           </span>
<span class="-6752597915337654134" onmouseenter="enter('-6752597915337654134');" onmouseout="out('-6752597915337654134');" style=""> 844                 deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.VOLUMEUP;                </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 845                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846             }                                                                                            </span>
<span class="3750638360823897863" onmouseenter="enter('3750638360823897863');" onmouseout="out('3750638360823897863');" style=""> 847             case MUSIC_REQUEST_QUITER: {                                                                 </span>
<span class="2129420423363786169" onmouseenter="enter('2129420423363786169');" onmouseout="out('2129420423363786169');" style=""> 848                 queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_QUITER));           </span>
<span class="-9110787157641698322" onmouseenter="enter('-9110787157641698322');" onmouseout="out('-9110787157641698322');" style=""> 849                 deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.VOLUMEDOWN;              </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 850                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 852         }                                                                                                </span>
<span  style=""> 853                                                                                                          </span>
<span class="-3574719939637901034" onmouseenter="enter('-3574719939637901034');" onmouseout="out('-3574719939637901034');" style=""> 854         getDeviceSupport().evaluateGBDeviceEvent(deviceEventMusicControl);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 855     }                                                                                                    </span>
<span  style=""> 856                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 857     @Override                                                                                            </span>
<span class="-3634467212876653578" onmouseenter="enter('-3634467212876653578');" onmouseout="out('-3634467212876653578');" style=""> 858     public void setCommuteMenuMessage(String message, boolean finished) {                                </span>
<span class="-2545716908437572756" onmouseenter="enter('-2545716908437572756');" onmouseout="out('-2545716908437572756');" style=""> 859         queueWrite(new SetCommuteMenuMessage(message, finished, this));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 860     }                                                                                                    </span>
<span  style=""> 861                                                                                                          </span>
<span class="-8749192936898481998" onmouseenter="enter('-8749192936898481998');" onmouseout="out('-8749192936898481998');" style=""> 862     public byte getJsonIndex() {                                                                         </span>
<span class="-7259315456684755672" onmouseenter="enter('-7259315456684755672');" onmouseout="out('-7259315456684755672');" style=""> 863         return jsonIndex++;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 864     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 865 }                                                                                                        </span>



























































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="-2997913422227863975" onmouseenter="enter('-2997913422227863975');" onmouseout="out('-2997913422227863975');" style="">   1  package nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.adapter.fossil_hr;                           </span>
<span  style="">   2                                                                                                                    </span>
<span class="4736969144974683041" onmouseenter="enter('4736969144974683041');" onmouseout="out('4736969144974683041');" style="">   3  import android.bluetooth.BluetoothGattCharacteristic;                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   4 +import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   5  import android.content.Intent;                                                                                    </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   6  import android.content.SharedPreferences;                                                                         </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">   7  import android.graphics.Bitmap;                                                                                   </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">   8  import android.graphics.BitmapFactory;                                                                            </span>
<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">   9  import android.graphics.Canvas;                                                                                   </span>
<span class="-5868658801447575011" onmouseenter="enter('-5868658801447575011');" onmouseout="out('-5868658801447575011');" style="">  10  import android.graphics.Color;                                                                                    </span>
<span class="-1586527322890291073" onmouseenter="enter('-1586527322890291073');" onmouseout="out('-1586527322890291073');" style="">  11  import android.graphics.Paint;                                                                                    </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  12  import android.os.Build;                                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  13 +import android.widget.Toast;                                                                                      </span>
<span  style="">  14                                                                                                                    </span>
<span class="-9193129351684262878" onmouseenter="enter('-9193129351684262878');" onmouseout="out('-9193129351684262878');" style="">  15  import org.json.JSONArray;                                                                                        </span>
<span class="-8573375701834280359" onmouseenter="enter('-8573375701834280359');" onmouseout="out('-8573375701834280359');" style="">  16  import org.json.JSONException;                                                                                    </span>
<span class="7232075261178918144" onmouseenter="enter('7232075261178918144');" onmouseout="out('7232075261178918144');" style="">  17  import org.json.JSONObject;                                                                                       </span>
<span  style="">  18                                                                                                                    </span>
<span class="-3926401431737521278" onmouseenter="enter('-3926401431737521278');" onmouseout="out('-3926401431737521278');" style="">  19  import java.io.File;                                                                                              </span>
<span class="-535075201057145249" onmouseenter="enter('-535075201057145249');" onmouseout="out('-535075201057145249');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  20 +import java.io.FileInputStream;                                                                                   </span>
<span class="-75475733228177869" onmouseenter="enter('-75475733228177869');" onmouseout="out('-75475733228177869');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  21 +import java.io.FileNotFoundException;                                                                             </span>
<span class="4915709264156936957" onmouseenter="enter('4915709264156936957');" onmouseout="out('4915709264156936957');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  22 +import java.io.FileOutputStream;                                                                                  </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  23  import java.io.IOException;                                                                                       </span>
<span class="-351121020327003485" onmouseenter="enter('-351121020327003485');" onmouseout="out('-351121020327003485');" style="">  24  import java.nio.BufferOverflowException;                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  25  import java.util.ArrayList;                                                                                       </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  26  import java.util.Calendar;                                                                                        </span>
<span class="-4685965902094386510" onmouseenter="enter('-4685965902094386510');" onmouseout="out('-4685965902094386510');" style="">  27  import java.util.GregorianCalendar;                                                                               </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  28  import java.util.HashMap;                                                                                         </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  29  import java.util.Iterator;                                                                                        </span>
<span class="-3682115440535733483" onmouseenter="enter('-3682115440535733483');" onmouseout="out('-3682115440535733483');" style="">  30  import java.util.TimeZone;                                                                                        </span>
<span class="2390503830490498598" onmouseenter="enter('2390503830490498598');" onmouseout="out('2390503830490498598');" style="">  31  import java.util.UUID;                                                                                            </span>
<span  style="">  32                                                                                                                    </span>
<span class="-8113221927992302576" onmouseenter="enter('-8113221927992302576');" onmouseout="out('-8113221927992302576');" style="">  33  import nodomain.freeyourgadget.gadgetbridge.GBApplication;                                                        </span>
<span class="-7265768043057292499" onmouseenter="enter('-7265768043057292499');" onmouseout="out('-7265768043057292499');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  34 +import nodomain.freeyourgadget.gadgetbridge.activities.GBActivity;                                                </span>
<span class="-141107564105590930" onmouseenter="enter('-141107564105590930');" onmouseout="out('-141107564105590930');" style="">  35  import nodomain.freeyourgadget.gadgetbridge.activities.devicesettings.DeviceSettingsPreferenceConst;              </span>
<span class="7017557905176594961" onmouseenter="enter('7017557905176594961');" onmouseout="out('7017557905176594961');" style="">  36  import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventCallControl;                                </span>
<span class="6368471362458763033" onmouseenter="enter('6368471362458763033');" onmouseout="out('6368471362458763033');" style="">  37  import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventFindPhone;                                  </span>
<span class="4012861689788039008" onmouseenter="enter('4012861689788039008');" onmouseout="out('4012861689788039008');" style="">  38  import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventMusicControl;                               </span>
<span class="3654131406467691963" onmouseenter="enter('3654131406467691963');" onmouseout="out('3654131406467691963');" style="">  39  import nodomain.freeyourgadget.gadgetbridge.devices.qhybrid.HRConfigActivity;                                     </span>
<span class="-7487037549552160195" onmouseenter="enter('-7487037549552160195');" onmouseout="out('-7487037549552160195');" style="">  40  import nodomain.freeyourgadget.gadgetbridge.devices.qhybrid.NotificationHRConfiguration;                          </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  41  import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                                        </span>
<span class="-9074570965792323186" onmouseenter="enter('-9074570965792323186');" onmouseout="out('-9074570965792323186');" style="">  42  import nodomain.freeyourgadget.gadgetbridge.model.CallSpec;                                                       </span>
<span class="-4068239021838445503" onmouseenter="enter('-4068239021838445503');" onmouseout="out('-4068239021838445503');" style="">  43  import nodomain.freeyourgadget.gadgetbridge.model.MusicSpec;                                                      </span>
<span class="7536481506851862405" onmouseenter="enter('7536481506851862405');" onmouseout="out('7536481506851862405');" style="">  44  import nodomain.freeyourgadget.gadgetbridge.model.MusicStateSpec;                                                 </span>
<span class="8239808916005009388" onmouseenter="enter('8239808916005009388');" onmouseout="out('8239808916005009388');" style="">  45  import nodomain.freeyourgadget.gadgetbridge.model.NotificationSpec;                                               </span>
<span class="-1384004108526222390" onmouseenter="enter('-1384004108526222390');" onmouseout="out('-1384004108526222390');" style="">  46  import nodomain.freeyourgadget.gadgetbridge.model.Weather;                                                        </span>
<span class="-40839721936664146" onmouseenter="enter('-40839721936664146');" onmouseout="out('-40839721936664146');" style="">  47  import nodomain.freeyourgadget.gadgetbridge.model.WeatherSpec;                                                    </span>
<span class="3410519392510510669" onmouseenter="enter('3410519392510510669');" onmouseout="out('3410519392510510669');" style="">  48  import nodomain.freeyourgadget.gadgetbridge.service.btle.TransactionBuilder;                                      </span>
<span class="4332661620965164672" onmouseenter="enter('4332661620965164672');" onmouseout="out('4332661620965164672');" style="">  49  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.QHybridSupport;                               </span>
<span class="4386715749828831010" onmouseenter="enter('4386715749828831010');" onmouseout="out('4386715749828831010');" style="">  50  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.adapter.fossil.FossilWatchAdapter;            </span>
<span class="6910520238976776146" onmouseenter="enter('6910520238976776146');" onmouseout="out('6910520238976776146');" style="">  51  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.RequestMtuRequest;            </span>
<span class="5089968700906553867" onmouseenter="enter('5089968700906553867');" onmouseout="out('5089968700906553867');" style="">  52  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.SetDeviceStateRequest;        </span>
<span class="6112441966638764283" onmouseenter="enter('6112441966638764283');" onmouseout="out('6112441966638764283');" style=""><abbr title="  53  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.configuration.ConfigurationPutRequest.TimeConfigItem;">  53  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.configuration.ConfigurationPutðŸ”µ</abbr></span>
<span class="7471646323585627177" onmouseenter="enter('7471646323585627177');" onmouseout="out('7471646323585627177');" style=""><abbr title="  54  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayCallNotificationRequest;">  54  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayCallNotificatðŸ”µ</abbr></span>
<span class="-6858926904400925756" onmouseenter="enter('-6858926904400925756');" onmouseout="out('-6858926904400925756');" style=""><abbr title="  55  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayTextNotificationRequest;">  55  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayTextNotificatðŸ”µ</abbr></span>
<span class="-7335239105811257712" onmouseenter="enter('-7335239105811257712');" onmouseout="out('-7335239105811257712');" style=""><abbr title="  56  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.authentication.VerifyPrivateKeyRequest;">  56  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.authentication.VerifyPrivatðŸ”µ</abbr></span>
<span class="-8586181035863106404" onmouseenter="enter('-8586181035863106404');" onmouseout="out('-8586181035863106404');" style=""><abbr title="  57  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.buttons.ButtonConfigurationPutRequest;">  57  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.buttons.ButtonConfigurationðŸ”µ</abbr></span>
<span class="-7616394483813386160" onmouseenter="enter('-7616394483813386160');" onmouseout="out('-7616394483813386160');" style=""><abbr title="  58  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfigurationGetRequest;">  58  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfigurationðŸ”µ</abbr></span>
<span class="1784930373847085070" onmouseenter="enter('1784930373847085070');" onmouseout="out('1784930373847085070');" style=""><abbr title="  59  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfigurationPutRequest;">  59  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfigurationðŸ”µ</abbr></span>
<span class="-7479827832081411210" onmouseenter="enter('-7479827832081411210');" onmouseout="out('-7479827832081411210');" style="">  60  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.file.AssetFilePutRequest;  </span>
<span class="6886533222315535550" onmouseenter="enter('6886533222315535550');" onmouseout="out('6886533222315535550');" style="">  61  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.AssetImage;          </span>
<span class="4714390797546975821" onmouseenter="enter('4714390797546975821');" onmouseout="out('4714390797546975821');" style="">  62  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.AssetImageFactory;   </span>
<span class="-6584136629945154367" onmouseenter="enter('-6584136629945154367');" onmouseout="out('-6584136629945154367');" style="">  63  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.ImagesSetRequest;    </span>
<span class="4407251461002993468" onmouseenter="enter('4407251461002993468');" onmouseout="out('4407251461002993468');" style="">  64  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.json.JsonPutRequest;       </span>
<span class="-3572348114301784964" onmouseenter="enter('-3572348114301784964');" onmouseout="out('-3572348114301784964');" style="">  65  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.menu.SetCommuteMenuMessage;</span>
<span class="7919188738795660329" onmouseenter="enter('7919188738795660329');" onmouseout="out('7919188738795660329');" style="">  66  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlRequest; </span>
<span class="1138328726217316685" onmouseenter="enter('1138328726217316685');" onmouseout="out('1138328726217316685');" style="">  67  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicInfoSetRequest; </span>
<span class="-6007419784157735296" onmouseenter="enter('-6007419784157735296');" onmouseout="out('-6007419784157735296');" style=""><abbr title="  68  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.notification.NotificationFilterPutHRRequest;">  68  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.notification.NotificationFiðŸ”µ</abbr></span>
<span class="2272282218964023705" onmouseenter="enter('2272282218964023705');" onmouseout="out('2272282218964023705');" style=""><abbr title="  69  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomBackgroundWidgetElement;">  69  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomBackgroundWidgðŸ”µ</abbr></span>
<span class="-6693404726045535805" onmouseenter="enter('-6693404726045535805');" onmouseout="out('-6693404726045535805');" style=""><abbr title="  70  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomTextWidgetElement;">  70  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomTextWidgetElemðŸ”µ</abbr></span>
<span class="6618883795787964297" onmouseenter="enter('6618883795787964297');" onmouseout="out('6618883795787964297');" style="">  71  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomWidget;       </span>
<span class="2778086687948821087" onmouseenter="enter('2778086687948821087');" onmouseout="out('2778086687948821087');" style="">  72  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomWidgetElement;</span>
<span class="-5838235376860565233" onmouseenter="enter('-5838235376860565233');" onmouseout="out('-5838235376860565233');" style="">  73  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.Widget;             </span>
<span class="-8988880482945476231" onmouseenter="enter('-8988880482945476231');" onmouseout="out('-8988880482945476231');" style="">  74  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.WidgetsPutRequest;  </span>
<span class="-3798970344596478499" onmouseenter="enter('-3798970344596478499');" onmouseout="out('-3798970344596478499');" style="">  75  import nodomain.freeyourgadget.gadgetbridge.util.GB;                                                              </span>
<span class="-600862318521663319" onmouseenter="enter('-600862318521663319');" onmouseout="out('-600862318521663319');" style="">  76  import nodomain.freeyourgadget.gadgetbridge.util.Prefs;                                                           </span>
<span class="1710555602396666834" onmouseenter="enter('1710555602396666834');" onmouseout="out('1710555602396666834');" style="">  77  import nodomain.freeyourgadget.gadgetbridge.util.StringUtils;                                                     </span>
<span  style="">  78                                                                                                                    </span>
<span class="-6920508692158968227" onmouseenter="enter('-6920508692158968227');" onmouseout="out('-6920508692158968227');" style=""><abbr title="  79  import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlRequest.MUSIC_PHONE_REQUEST;">  79  import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlReðŸ”µ</abbr></span>
<span class="1244615468169562272" onmouseenter="enter('1244615468169562272');" onmouseout="out('1244615468169562272');" style=""><abbr title="  80  import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlRequest.MUSIC_WATCH_REQUEST;">  80  import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlReðŸ”µ</abbr></span>
<span  style="">  81                                                                                                                    </span>
<span class="3592572912775199945" onmouseenter="enter('3592572912775199945');" onmouseout="out('3592572912775199945');" style="">  82  public class FossilHRWatchAdapter extends FossilWatchAdapter {                                                    </span>
<span class="5088344414276172788" onmouseenter="enter('5088344414276172788');" onmouseout="out('5088344414276172788');" style="">  83      private byte[] phoneRandomNumber;                                                                             </span>
<span class="-506162566914247320" onmouseenter="enter('-506162566914247320');" onmouseout="out('-506162566914247320');" style="">  84      private byte[] watchRandomNumber;                                                                             </span>
<span  style="">  85                                                                                                                    </span>
<span class="7640912025063028053" onmouseenter="enter('7640912025063028053');" onmouseout="out('7640912025063028053');" style="">  86      private ArrayList&lt;Widget&gt; widgets = new ArrayList&lt;&gt;();                                                        </span>
<span  style="">  87                                                                                                                    </span>
<span class="-2578264008762844907" onmouseenter="enter('-2578264008762844907');" onmouseout="out('-2578264008762844907');" style="">  88      private NotificationHRConfiguration[] notificationConfigurations;                                             </span>
<span  style="">  89                                                                                                                    </span>
<span class="2535750949384339971" onmouseenter="enter('2535750949384339971');" onmouseout="out('2535750949384339971');" style="">  90      private MusicSpec currentSpec = null;                                                                         </span>
<span  style="">  91                                                                                                                    </span>
<span class="-6092139116600387375" onmouseenter="enter('-6092139116600387375');" onmouseout="out('-6092139116600387375');" style="">  92      int imageNameIndex = 0;                                                                                       </span>
<span class="-1794288330955340230" onmouseenter="enter('-1794288330955340230');" onmouseout="out('-1794288330955340230');" style="">  93      private byte jsonIndex = 0;                                                                                   </span>
<span  style="">  94                                                                                                                    </span>
<span class="-4156328390524362965" onmouseenter="enter('-4156328390524362965');" onmouseout="out('-4156328390524362965');" style="">  95      private AssetImage backGroundImage = null;                                                                    </span>
<span  style="">  96                                                                                                                    </span>
<span class="-5170367685934262595" onmouseenter="enter('-5170367685934262595');" onmouseout="out('-5170367685934262595');" style="">  97      public FossilHRWatchAdapter(QHybridSupport deviceSupport) {                                                   </span>
<span class="7895217862057392900" onmouseenter="enter('7895217862057392900');" onmouseout="out('7895217862057392900');" style="">  98          super(deviceSupport);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99      }                                                                                                             </span>
<span  style=""> 100                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 101      @Override                                                                                                     </span>
<span class="6973867701261680867" onmouseenter="enter('6973867701261680867');" onmouseout="out('6973867701261680867');" style=""> 102      public void initialize() {                                                                                    </span>
<span class="-6207208930684914824" onmouseenter="enter('-6207208930684914824');" onmouseout="out('-6207208930684914824');" style=""> 103          if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {                                              </span>
<span class="-3436726469441820604" onmouseenter="enter('-3436726469441820604');" onmouseout="out('-3436726469441820604');" style=""> 104              queueWrite(new RequestMtuRequest(512));                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105          }                                                                                                         </span>
<span  style=""> 106                                                                                                                    </span>
<span class="2214751643672186972" onmouseenter="enter('2214751643672186972');" onmouseout="out('2214751643672186972');" style=""> 107          queueWrite(new SetDeviceStateRequest(GBDevice.State.AUTHENTICATING));                                     </span>
<span  style=""> 108                                                                                                                    </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 109          negotiateSymmetricKey();                                                                                  </span>
<span  style=""> 110                                                                                                                    </span>
<span class="7150849353095805702" onmouseenter="enter('7150849353095805702');" onmouseout="out('7150849353095805702');" style=""> 111          queueWrite(new SetDeviceStateRequest(GBDevice.State.INITIALIZING));                                       </span>
<span  style=""> 112                                                                                                                    </span>
<span class="-4417803371223487901" onmouseenter="enter('-4417803371223487901');" onmouseout="out('-4417803371223487901');" style=""> 113          loadNotificationConfigurations();                                                                         </span>
<span class="-45277995236735037" onmouseenter="enter('-45277995236735037');" onmouseout="out('-45277995236735037');" style=""> 114          queueWrite(new NotificationFilterPutHRRequest(this.notificationConfigurations, this));                    </span>
<span class="-4331994456315640395" onmouseenter="enter('-4331994456315640395');" onmouseout="out('-4331994456315640395');" style=""> 115          setVibrationStrength();                                                                                   </span>
<span  style=""> 116                                                                                                                    </span>
<span class="-9031387911705611686" onmouseenter="enter('-9031387911705611686');" onmouseout="out('-9031387911705611686');" style=""> 117          syncSettings();                                                                                           </span>
<span  style=""> 118                                                                                                                    </span>
<span class="7548848230134815961" onmouseenter="enter('7548848230134815961');" onmouseout="out('7548848230134815961');" style=""> 119          setTime();                                                                                                </span>
<span  style=""> 120                                                                                                                    </span>
<span class="-7476048809216327685" onmouseenter="enter('-7476048809216327685');" onmouseout="out('-7476048809216327685');" style=""> 121          overwriteButtons(null);                                                                                   </span>
<span  style=""> 122                                                                                                                    </span>
<span  style=""> 123                                                                                                                    </span>
<span class="1285717461947698949" onmouseenter="enter('1285717461947698949');" onmouseout="out('1285717461947698949');" style=""> 124          loadBackground();                                                                                         </span>
<span class="-8671838943786981246" onmouseenter="enter('-8671838943786981246');" onmouseout="out('-8671838943786981246');" style=""> 125          loadWidgets();                                                                                            </span>
<span class="8810184639176192527" onmouseenter="enter('8810184639176192527');" onmouseout="out('8810184639176192527');" style=""> 126          // renderWidgets();                                                                                       </span>
<span class="7961004691166238388" onmouseenter="enter('7961004691166238388');" onmouseout="out('7961004691166238388');" style=""><abbr title=" 127          // dunno if there is any point in doing this at start since when no watch is connected the QHybridSupport will not receive any intents anyway"> 127          // dunno if there is any point in doing this at start since when no watch is connected the QHybridSupport ðŸ”µ</abbr></span>
<span  style=""> 128                                                                                                                    </span>
<span class="-673558019044966288" onmouseenter="enter('-673558019044966288');" onmouseout="out('-673558019044966288');" style=""> 129          queueWrite(new SetDeviceStateRequest(GBDevice.State.INITIALIZED));                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130      }                                                                                                             </span>
<span  style=""> 131                                                                                                                    </span>
<span class="2678698660370291293" onmouseenter="enter('2678698660370291293');" onmouseout="out('2678698660370291293');" style=""> 132      private void setVibrationStrength() {                                                                         </span>
<span class="583153348914013546" onmouseenter="enter('583153348914013546');" onmouseout="out('583153348914013546');" style=""> 133          Prefs prefs = new Prefs(getDeviceSpecificPreferences());                                                  </span>
<span class="3731955474946957698" onmouseenter="enter('3731955474946957698');" onmouseout="out('3731955474946957698');" style=""> 134          int vibrationStrengh = prefs.getInt(DeviceSettingsPreferenceConst.PREF_VIBRATION_STRENGH_PERCENTAGE, 2);  </span>
<span class="-1867169202627257001" onmouseenter="enter('-1867169202627257001');" onmouseout="out('-1867169202627257001');" style=""> 135          if (vibrationStrengh &gt; 0) {                                                                               </span>
<span class="2644384104178590300" onmouseenter="enter('2644384104178590300');" onmouseout="out('2644384104178590300');" style=""> 136              vibrationStrengh = (vibrationStrengh + 1) * 25; // Seems 0,50,75,100 are working...                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137          }                                                                                                         </span>
<span class="6672289413916591004" onmouseenter="enter('6672289413916591004');" onmouseout="out('6672289413916591004');" style=""> 138          setVibrationStrength((short) (vibrationStrengh));                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139      }                                                                                                             </span>
<span  style=""> 140                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 141      @Override                                                                                                     </span>
<span class="1506969207519742362" onmouseenter="enter('1506969207519742362');" onmouseout="out('1506969207519742362');" style=""> 142      public void setVibrationStrength(short strength) {                                                            </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 143          negotiateSymmetricKey();                                                                                  </span>
<span class="-4629474970994412283" onmouseenter="enter('-4629474970994412283');" onmouseout="out('-4629474970994412283');" style=""><abbr title=" 144          queueWrite(new ConfigurationPutRequest(new nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.configuration.ConfigurationPutRequest.VibrationStrengthConfigItem((byte) strength), this));"> 144          queueWrite(new ConfigurationPutRequest(new nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.reðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145      }                                                                                                             </span>
<span  style=""> 146                                                                                                                    </span>
<span class="1303454475379501012" onmouseenter="enter('1303454475379501012');" onmouseout="out('1303454475379501012');" style=""> 147      private void loadNotificationConfigurations(){                                                                </span>
<span class="-6235602809275246814" onmouseenter="enter('-6235602809275246814');" onmouseout="out('-6235602809275246814');" style=""> 148          this.notificationConfigurations = new NotificationHRConfiguration[]{                                      </span>
<span class="7544968341376302636" onmouseenter="enter('7544968341376302636');" onmouseout="out('7544968341376302636');" style=""> 149                  new NotificationHRConfiguration(&quot;generic&quot;, 0),                                                    </span>
<span class="-4749339465775723964" onmouseenter="enter('-4749339465775723964');" onmouseout="out('-4749339465775723964');" style=""><abbr title=" 150                  new NotificationHRConfiguration(&quot;call&quot;, new byte[]{(byte)0x80, (byte) 0x00, (byte) 0x59, (byte) 0xB7}, 0)"> 150                  new NotificationHRConfiguration(&quot;call&quot;, new byte[]{(byte)0x80, (byte) 0x00, (byte) 0x59, (byte) 0xðŸ”µ</abbr></span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 151          };                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 152      }                                                                                                             </span>
<span  style=""> 153                                                                                                                    </span>
<span class="-5868467879198664223" onmouseenter="enter('-5868467879198664223');" onmouseout="out('-5868467879198664223');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 154 +    private File getBackgroundFile(){                                                                             </span>
<span class="5017199467844905364" onmouseenter="enter('5017199467844905364');" onmouseout="out('5017199467844905364');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 155 +        return new File(getContext().getExternalFilesDir(null), &quot;hr_background.bin&quot;);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 156 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 157 +                                                                                                                  </span>
<span class="2056476783265891076" onmouseenter="enter('2056476783265891076');" onmouseout="out('2056476783265891076');" style=""> 158      private void loadBackground(){                                                                                </span>
<span class="-5253497129600185491" onmouseenter="enter('-5253497129600185491');" onmouseout="out('-5253497129600185491');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 159 -        Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddress()));"> 159 -        Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddreðŸ”µ</abbr></span>
<span class="7432400165234073302" onmouseenter="enter('7432400165234073302');" onmouseout="out('7432400165234073302');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 160 -        boolean forceWhiteBackground = prefs.getBoolean(&quot;force_white_color_scheme&quot;, false);                       </span>
<span class="594461735151653259" onmouseenter="enter('594461735151653259');" onmouseout="out('594461735151653259');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 161 -        if (forceWhiteBackground) {                                                                               </span>
<span class="-3418877583116429834" onmouseenter="enter('-3418877583116429834');" onmouseout="out('-3418877583116429834');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 162 -            Bitmap whiteBitmap = Bitmap.createBitmap(239, 239, Bitmap.Config.ARGB_8888);                          </span>
<span class="2380885980553220395" onmouseenter="enter('2380885980553220395');" onmouseout="out('2380885980553220395');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 163 -            new Canvas(whiteBitmap).drawColor(Color.WHITE);                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 164 -                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 165 +        try {                                                                                                     </span>
<span class="3309811734082012592" onmouseenter="enter('3309811734082012592');" onmouseout="out('3309811734082012592');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 166 +            FileInputStream fis = new FileInputStream(getBackgroundFile());                                       </span>
<span class="-8713501432928954369" onmouseenter="enter('-8713501432928954369');" onmouseout="out('-8713501432928954369');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 167 +            int count = fis.available();                                                                          </span>
<span class="2364866196500043323" onmouseenter="enter('2364866196500043323');" onmouseout="out('2364866196500043323');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 168 +            if(count != 14400){                                                                                   </span>
<span class="6959480734525400649" onmouseenter="enter('6959480734525400649');" onmouseout="out('6959480734525400649');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 169 +                throw new RuntimeException(&quot;wrong background file length&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 170 +            }                                                                                                     </span>
<span class="6140245791534089823" onmouseenter="enter('6140245791534089823');" onmouseout="out('6140245791534089823');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 171 +            byte[] file = new byte[14400];                                                                        </span>
<span class="-5391697857306213357" onmouseenter="enter('-5391697857306213357');" onmouseout="out('-5391697857306213357');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 172 +            fis.read(file);                                                                                       </span>
<span class="847792512951278267" onmouseenter="enter('847792512951278267');" onmouseout="out('847792512951278267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 173 +            fis.close();                                                                                          </span>
<span class="3514823294174383549" onmouseenter="enter('3514823294174383549');" onmouseout="out('3514823294174383549');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 174 +            this.backGroundImage = AssetImageFactory.createAssetImage(file, 0, 0, 0);                             </span>
<span class="400908373044587289" onmouseenter="enter('400908373044587289');" onmouseout="out('400908373044587289');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 175 +        } catch (FileNotFoundException e) {                                                                       </span>
<span class="-5301954684616781966" onmouseenter="enter('-5301954684616781966');" onmouseout="out('-5301954684616781966');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 176 +            SharedPreferences preferences = getDeviceSpecificPreferences();                                       </span>
<span class="-3378614681722876648" onmouseenter="enter('-3378614681722876648');" onmouseout="out('-3378614681722876648');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 177 +            if (preferences.getBoolean(&quot;force_white_color_scheme&quot;, false)) {                                      </span>
<span class="-3418877583116429834" onmouseenter="enter('-3418877583116429834');" onmouseout="out('-3418877583116429834');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 178 +                Bitmap whiteBitmap = Bitmap.createBitmap(239, 239, Bitmap.Config.ARGB_8888);                      </span>
<span class="2380885980553220395" onmouseenter="enter('2380885980553220395');" onmouseout="out('2380885980553220395');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 179 +                new Canvas(whiteBitmap).drawColor(Color.WHITE);                                                   </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 180 +                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 181 +                try {                                                                                             </span>
<span class="1512735353479138147" onmouseenter="enter('1512735353479138147');" onmouseout="out('1512735353479138147');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 182 +                    this.backGroundImage = AssetImageFactory.createAssetImage(whiteBitmap, true, 0, 1, 0);        </span>
<span class="8494295836730416248" onmouseenter="enter('8494295836730416248');" onmouseout="out('8494295836730416248');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 183 +                    queueWrite(new AssetFilePutRequest(this.backGroundImage, (byte) 0x00, this));                 </span>
<span class="8708702391695364841" onmouseenter="enter('8708702391695364841');" onmouseout="out('8708702391695364841');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 184 +                } catch (IOException e2) {                                                                        </span>
<span class="7907507332013532218" onmouseenter="enter('7907507332013532218');" onmouseout="out('7907507332013532218');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 185 +                    logger.error(&quot;Backgroundimage error&quot;, e2);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 186 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 187 +            }                                                                                                     </span>
<span class="-7675632770970923843" onmouseenter="enter('-7675632770970923843');" onmouseout="out('-7675632770970923843');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 188 +        } catch (IOException | RuntimeException e) {                                                              </span>
<span class="995952486198027790" onmouseenter="enter('995952486198027790');" onmouseout="out('995952486198027790');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 189 +            GB.log(&quot;error opening background file&quot;, GB.ERROR, e);                                                 </span>
<span class="4357598448521854023" onmouseenter="enter('4357598448521854023');" onmouseout="out('4357598448521854023');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 190 +            GB.toast(&quot;error opening background file&quot;, Toast.LENGTH_LONG, GB.ERROR);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 191 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 192 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 193 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 194 +    @Override                                                                                                     </span>
<span class="-2142032910036758703" onmouseenter="enter('-2142032910036758703');" onmouseout="out('-2142032910036758703');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 195 +    public void setBackgroundImage(byte[] pixels) {                                                               </span>
<span class="5866108376506033812" onmouseenter="enter('5866108376506033812');" onmouseout="out('5866108376506033812');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 196 +        if(pixels == null){                                                                                       </span>
<span class="-1287700881772654168" onmouseenter="enter('-1287700881772654168');" onmouseout="out('-1287700881772654168');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 197 +            getBackgroundFile().delete();                                                                         </span>
<span class="-5827926495289856375" onmouseenter="enter('-5827926495289856375');" onmouseout="out('-5827926495289856375');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 198 +            this.backGroundImage = null;                                                                          </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 199 +        }else{                                                                                                    </span>
<span class="-3590785795915305813" onmouseenter="enter('-3590785795915305813');" onmouseout="out('-3590785795915305813');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 200 +            this.backGroundImage = AssetImageFactory.createAssetImage(pixels, 0, 0, 0);                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 201              try {                                                                                                 </span>
<span class="1512735353479138147" onmouseenter="enter('1512735353479138147');" onmouseout="out('1512735353479138147');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 202 -                this.backGroundImage = AssetImageFactory.createAssetImage(whiteBitmap, true, 0, 1, 0);            </span>
<span class="-1705375458919026059" onmouseenter="enter('-1705375458919026059');" onmouseout="out('-1705375458919026059');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 203 +                FileOutputStream fos = new FileOutputStream(getBackgroundFile(), false);                          </span>
<span class="-358410701198294033" onmouseenter="enter('-358410701198294033');" onmouseout="out('-358410701198294033');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 204 +                fos.write(pixels);                                                                                </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 205              } catch (IOException e) {                                                                             </span>
<span class="-7095933143104031833" onmouseenter="enter('-7095933143104031833');" onmouseout="out('-7095933143104031833');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 206 -                logger.error(&quot;Backgroundimage error&quot;, e);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 207 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 208 -        }                                                                                                         </span>
<span class="615895175007642974" onmouseenter="enter('615895175007642974');" onmouseout="out('615895175007642974');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 209 +                GB.log(&quot;error saving background&quot;, GB.ERROR, e);                                                   </span>
<span class="-5639824001846510052" onmouseenter="enter('-5639824001846510052');" onmouseout="out('-5639824001846510052');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 210 +                GB.toast(&quot;error persistent saving background&quot;, Toast.LENGTH_LONG, GB.ERROR);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 211 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 212 +        }                                                                                                         </span>
<span class="-686042699702875094" onmouseenter="enter('-686042699702875094');" onmouseout="out('-686042699702875094');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 213 +        renderWidgets();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214      }                                                                                                             </span>
<span  style=""> 215                                                                                                                    </span>
<span class="-3367927790602792525" onmouseenter="enter('-3367927790602792525');" onmouseout="out('-3367927790602792525');" style=""> 216      private void loadWidgets() {                                                                                  </span>
<span class="-5253497129600185491" onmouseenter="enter('-5253497129600185491');" onmouseout="out('-5253497129600185491');" style=""><abbr title=" 217          Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddress()));"> 217          Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddreðŸ”µ</abbr></span>
<span class="7432400165234073302" onmouseenter="enter('7432400165234073302');" onmouseout="out('7432400165234073302');" style=""> 218          boolean forceWhiteBackground = prefs.getBoolean(&quot;force_white_color_scheme&quot;, false);                       </span>
<span class="-6285451443425028752" onmouseenter="enter('-6285451443425028752');" onmouseout="out('-6285451443425028752');" style=""> 219          String fontColor = forceWhiteBackground ? &quot;black&quot; : &quot;default&quot;;                                            </span>
<span  style=""> 220                                                                                                                    </span>
<span class="-4620331257752093891" onmouseenter="enter('-4620331257752093891');" onmouseout="out('-4620331257752093891');" style=""> 221          this.widgets.clear();                                                                                     </span>
<span class="-3336910807232744925" onmouseenter="enter('-3336910807232744925');" onmouseout="out('-3336910807232744925');" style=""> 222          String widgetJson = GBApplication.getPrefs().getPreferences().getString(&quot;FOSSIL_HR_WIDGETS&quot;, &quot;{}&quot;);       </span>
<span class="4155798482965333136" onmouseenter="enter('4155798482965333136');" onmouseout="out('4155798482965333136');" style=""> 223          String customWidgetJson = GBApplication.getPrefs().getString(&quot;QHYBRID_CUSTOM_WIDGETS&quot;, &quot;[]&quot;);             </span>
<span  style=""> 224                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 225          try {                                                                                                     </span>
<span class="-1451023518703013419" onmouseenter="enter('-1451023518703013419');" onmouseout="out('-1451023518703013419');" style=""> 226              JSONObject widgetConfig = new JSONObject(widgetJson);                                                 </span>
<span class="-1475171196435240579" onmouseenter="enter('-1475171196435240579');" onmouseout="out('-1475171196435240579');" style=""> 227              JSONArray customWidgets = new JSONArray(customWidgetJson);                                            </span>
<span  style=""> 228                                                                                                                    </span>
<span class="-2247029910180567010" onmouseenter="enter('-2247029910180567010');" onmouseout="out('-2247029910180567010');" style=""> 229              Iterator&lt;String&gt; keyIterator = widgetConfig.keys();                                                   </span>
<span class="3005942427600422729" onmouseenter="enter('3005942427600422729');" onmouseout="out('3005942427600422729');" style=""> 230              HashMap&lt;String, Integer&gt; positionMap = new HashMap&lt;&gt;(4);                                              </span>
<span class="-4809379780136917034" onmouseenter="enter('-4809379780136917034');" onmouseout="out('-4809379780136917034');" style=""> 231              positionMap.put(&quot;top&quot;, 0);                                                                            </span>
<span class="3242470301011869998" onmouseenter="enter('3242470301011869998');" onmouseout="out('3242470301011869998');" style=""> 232              positionMap.put(&quot;right&quot;, 90);                                                                         </span>
<span class="47603222909284588" onmouseenter="enter('47603222909284588');" onmouseout="out('47603222909284588');" style=""> 233              positionMap.put(&quot;bottom&quot;, 180);                                                                       </span>
<span class="-7872157185013762906" onmouseenter="enter('-7872157185013762906');" onmouseout="out('-7872157185013762906');" style=""> 234              positionMap.put(&quot;left&quot;, 270);                                                                         </span>
<span  style=""> 235                                                                                                                    </span>
<span class="8605964287118037960" onmouseenter="enter('8605964287118037960');" onmouseout="out('8605964287118037960');" style=""> 236              while(keyIterator.hasNext()){                                                                         </span>
<span class="2952369380408185535" onmouseenter="enter('2952369380408185535');" onmouseout="out('2952369380408185535');" style=""> 237                  String position = keyIterator.next();                                                             </span>
<span class="-4761670352334006129" onmouseenter="enter('-4761670352334006129');" onmouseout="out('-4761670352334006129');" style=""> 238                  String identifier = widgetConfig.getString(position);                                             </span>
<span class="-3371646214022229496" onmouseenter="enter('-3371646214022229496');" onmouseout="out('-3371646214022229496');" style=""> 239                  Widget.WidgetType type = Widget.WidgetType.fromJsonIdentifier(identifier);                        </span>
<span  style=""> 240                                                                                                                    </span>
<span class="4389075284580548581" onmouseenter="enter('4389075284580548581');" onmouseout="out('4389075284580548581');" style=""> 241                  Widget widget = null;                                                                             </span>
<span class="2866536352941526980" onmouseenter="enter('2866536352941526980');" onmouseout="out('2866536352941526980');" style=""> 242                  if(type != null) {                                                                                </span>
<span class="-7841183104811053833" onmouseenter="enter('-7841183104811053833');" onmouseout="out('-7841183104811053833');" style=""> 243                      widget = new Widget(type, positionMap.get(position), 63, fontColor);                          </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style=""> 244                  }else{                                                                                            </span>
<span class="-175697937656295673" onmouseenter="enter('-175697937656295673');" onmouseout="out('-175697937656295673');" style=""> 245                      identifier = identifier.substring(7);                                                         </span>
<span class="-5386134246414871772" onmouseenter="enter('-5386134246414871772');" onmouseout="out('-5386134246414871772');" style=""> 246                      for(int i = 0; i &lt; customWidgets.length(); i++){                                              </span>
<span class="-4459010997644705661" onmouseenter="enter('-4459010997644705661');" onmouseout="out('-4459010997644705661');" style=""> 247                          JSONObject customWidget = customWidgets.getJSONObject(i);                                 </span>
<span class="-3508428963545043924" onmouseenter="enter('-3508428963545043924');" onmouseout="out('-3508428963545043924');" style=""> 248                          if(customWidget.getString(&quot;name&quot;).equals(identifier)){                                    </span>
<span class="-7054423990219086531" onmouseenter="enter('-7054423990219086531');" onmouseout="out('-7054423990219086531');" style=""> 249                              boolean drawCircle = false;                                                           </span>
<span class="4470534368972356610" onmouseenter="enter('4470534368972356610');" onmouseout="out('4470534368972356610');" style=""> 250                              if(customWidget.has(&quot;drawCircle&quot;)) drawCircle = customWidget.getBoolean(&quot;drawCircle&quot;);</span>
<span class="-8778192717851062623" onmouseenter="enter('-8778192717851062623');" onmouseout="out('-8778192717851062623');" style=""> 251                              CustomWidget newWidget = new CustomWidget(                                            </span>
<span class="3512413394145535740" onmouseenter="enter('3512413394145535740');" onmouseout="out('3512413394145535740');" style=""> 252                                      customWidget.getString(&quot;name&quot;),                                               </span>
<span class="-4996195677187410364" onmouseenter="enter('-4996195677187410364');" onmouseout="out('-4996195677187410364');" style=""> 253                                      positionMap.get(position),                                                    </span>
<span class="3193660705107837549" onmouseenter="enter('3193660705107837549');" onmouseout="out('3193660705107837549');" style=""> 254                                      63,                                                                           </span>
<span class="-6293129944882525283" onmouseenter="enter('-6293129944882525283');" onmouseout="out('-6293129944882525283');" style=""> 255                                      fontColor,                                                                    </span>
<span class="-1644456201739786746" onmouseenter="enter('-1644456201739786746');" onmouseout="out('-1644456201739786746');" style=""> 256                                      drawCircle                                                                    </span>

<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 257                              );                                                                                    </span>
<span class="2785037360953974218" onmouseenter="enter('2785037360953974218');" onmouseout="out('2785037360953974218');" style=""> 258                              JSONArray elements = customWidget.getJSONArray(&quot;elements&quot;);                           </span>
<span  style=""> 259                                                                                                                    </span>
<span class="3871742226603844038" onmouseenter="enter('3871742226603844038');" onmouseout="out('3871742226603844038');" style=""> 260                              for (int i2 = 0; i2 &lt; elements.length(); i2++) {                                      </span>
<span class="-7151905776418266127" onmouseenter="enter('-7151905776418266127');" onmouseout="out('-7151905776418266127');" style=""> 261                                  JSONObject element = elements.getJSONObject(i2);                                  </span>
<span class="6397770772172009485" onmouseenter="enter('6397770772172009485');" onmouseout="out('6397770772172009485');" style=""> 262                                  if (element.getString(&quot;type&quot;).equals(&quot;text&quot;)) {                                   </span>
<span class="2334141174646848010" onmouseenter="enter('2334141174646848010');" onmouseout="out('2334141174646848010');" style=""> 263                                      newWidget.addElement(new CustomTextWidgetElement(                             </span>
<span class="822830221051301303" onmouseenter="enter('822830221051301303');" onmouseout="out('822830221051301303');" style=""> 264                                              element.getString(&quot;id&quot;),                                              </span>
<span class="4980700817635867661" onmouseenter="enter('4980700817635867661');" onmouseout="out('4980700817635867661');" style=""> 265                                              element.getString(&quot;value&quot;),                                           </span>
<span class="9063642109599004190" onmouseenter="enter('9063642109599004190');" onmouseout="out('9063642109599004190');" style=""> 266                                              element.getInt(&quot;x&quot;),                                                  </span>
<span class="-4454797006849514808" onmouseenter="enter('-4454797006849514808');" onmouseout="out('-4454797006849514808');" style=""> 267                                              element.getInt(&quot;y&quot;)                                                   </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 268                                      ));                                                                           </span>
<span class="-8940325902652201532" onmouseenter="enter('-8940325902652201532');" onmouseout="out('-8940325902652201532');" style=""> 269                                  } else if (element.getString(&quot;type&quot;).equals(&quot;background&quot;)) {                      </span>
<span class="-4431923028910732143" onmouseenter="enter('-4431923028910732143');" onmouseout="out('-4431923028910732143');" style=""> 270                                      newWidget.addElement(new CustomBackgroundWidgetElement(                       </span>
<span class="822830221051301303" onmouseenter="enter('822830221051301303');" onmouseout="out('822830221051301303');" style=""> 271                                              element.getString(&quot;id&quot;),                                              </span>
<span class="-7580773937564088589" onmouseenter="enter('-7580773937564088589');" onmouseout="out('-7580773937564088589');" style=""> 272                                              element.getString(&quot;value&quot;)                                            </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 273                                      ));                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275                              }                                                                                     </span>
<span class="2257436902070421227" onmouseenter="enter('2257436902070421227');" onmouseout="out('2257436902070421227');" style=""> 276                              widget = newWidget;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279                  }                                                                                                 </span>
<span  style=""> 280                                                                                                                    </span>
<span class="-8350136702671077859" onmouseenter="enter('-8350136702671077859');" onmouseout="out('-8350136702671077859');" style=""> 281                  if(widget == null) continue;                                                                      </span>
<span class="-6171680299070194420" onmouseenter="enter('-6171680299070194420');" onmouseout="out('-6171680299070194420');" style=""> 282                  this.widgets.add(widget);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283              }                                                                                                     </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 284          } catch (JSONException e) {                                                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 285              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286          }                                                                                                         </span>
<span  style=""> 287                                                                                                                    </span>
<span class="-8358671306989560601" onmouseenter="enter('-8358671306989560601');" onmouseout="out('-8358671306989560601');" style=""> 288          uploadWidgets();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289      }                                                                                                             </span>
<span  style=""> 290                                                                                                                    </span>
<span class="5530468676950845344" onmouseenter="enter('5530468676950845344');" onmouseout="out('5530468676950845344');" style=""> 291      private void uploadWidgets(){                                                                                 </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 292          negotiateSymmetricKey();                                                                                  </span>
<span class="5140546967358631022" onmouseenter="enter('5140546967358631022');" onmouseout="out('5140546967358631022');" style=""> 293          ArrayList&lt;Widget&gt; systemWidgets = new ArrayList&lt;&gt;(widgets.size());                                        </span>
<span class="-3447555470280778363" onmouseenter="enter('-3447555470280778363');" onmouseout="out('-3447555470280778363');" style=""> 294          for(Widget widget : this.widgets){                                                                        </span>
<span class="1576906399201786111" onmouseenter="enter('1576906399201786111');" onmouseout="out('1576906399201786111');" style=""> 295              if(!(widget instanceof CustomWidget)) systemWidgets.add(widget);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296          }                                                                                                         </span>
<span class="-2475473149296747573" onmouseenter="enter('-2475473149296747573');" onmouseout="out('-2475473149296747573');" style=""> 297          queueWrite(new WidgetsPutRequest(systemWidgets.toArray(new Widget[0]), this));                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298      }                                                                                                             </span>
<span  style=""> 299                                                                                                                    </span>
<span class="903870811454511101" onmouseenter="enter('903870811454511101');" onmouseout="out('903870811454511101');" style=""> 300      private void renderWidgets() {                                                                                </span>
<span class="-5253497129600185491" onmouseenter="enter('-5253497129600185491');" onmouseout="out('-5253497129600185491');" style=""><abbr title=" 301          Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddress()));"> 301          Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddreðŸ”µ</abbr></span>
<span class="7432400165234073302" onmouseenter="enter('7432400165234073302');" onmouseout="out('7432400165234073302');" style=""> 302          boolean forceWhiteBackground = prefs.getBoolean(&quot;force_white_color_scheme&quot;, false);                       </span>


















<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 303          try {                                                                                                     </span>
<span class="-373590907859483538" onmouseenter="enter('-373590907859483538');" onmouseout="out('-373590907859483538');" style=""> 304              ArrayList&lt;AssetImage&gt; widgetImages = new ArrayList&lt;&gt;();                                               </span>
<span  style=""> 305                                                                                                                    </span>
<span class="-7135747421857686049" onmouseenter="enter('-7135747421857686049');" onmouseout="out('-7135747421857686049');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 306 -            if(this.backGroundImage != null){                                                                     </span>
<span class="-1341990675909940474" onmouseenter="enter('-1341990675909940474');" onmouseout="out('-1341990675909940474');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 307 -                widgetImages.add(this.backGroundImage);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 308 -            }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 309 -                                                                                                                  </span>
<span  style=""> 310                                                                                                                    </span>
<span class="-8143608132748507128" onmouseenter="enter('-8143608132748507128');" onmouseout="out('-8143608132748507128');" style=""> 311              for (int i = 0; i &lt; this.widgets.size(); i++) {                                                       </span>
<span class="-3360344478910316540" onmouseenter="enter('-3360344478910316540');" onmouseout="out('-3360344478910316540');" style=""> 312                  Widget w = widgets.get(i);                                                                        </span>
<span class="7755552181933604323" onmouseenter="enter('7755552181933604323');" onmouseout="out('7755552181933604323');" style=""> 313                  if(!(w instanceof CustomWidget)) continue;                                                        </span>












<span class="-119827139856937313" onmouseenter="enter('-119827139856937313');" onmouseout="out('-119827139856937313');" style=""> 314                  CustomWidget widget = (CustomWidget) w;                                                           </span>
<span  style=""> 315                                                                                                                    </span>
<span class="7010238729887612961" onmouseenter="enter('7010238729887612961');" onmouseout="out('7010238729887612961');" style=""> 316                  Bitmap widgetBitmap = Bitmap.createBitmap(76, 76, Bitmap.Config.ARGB_8888);                       </span>
<span  style=""> 317                                                                                                                    </span>
<span class="-3285187784434415926" onmouseenter="enter('-3285187784434415926');" onmouseout="out('-3285187784434415926');" style=""> 318                  Canvas widgetCanvas = new Canvas(widgetBitmap);                                                   </span>
<span  style=""> 319                                                                                                                    </span>
<span class="4574864979763228349" onmouseenter="enter('4574864979763228349');" onmouseout="out('4574864979763228349');" style=""> 320                  boolean backgroundDrawn = false;                                                                  </span>
<span  style=""> 321                                                                                                                    </span>
<span class="-7321857461549810249" onmouseenter="enter('-7321857461549810249');" onmouseout="out('-7321857461549810249');" style=""> 322                  if(widget.getDrawCircle() &amp;&amp; !backgroundDrawn){                                                   </span>
<span class="2814962491382878487" onmouseenter="enter('2814962491382878487');" onmouseout="out('2814962491382878487');" style=""> 323                      Paint circlePaint = new Paint();                                                              </span>
<span class="-6694382119531121333" onmouseenter="enter('-6694382119531121333');" onmouseout="out('-6694382119531121333');" style=""> 324                      circlePaint.setColor(forceWhiteBackground ? Color.WHITE : Color.BLACK);                       </span>
<span class="7023202196844894280" onmouseenter="enter('7023202196844894280');" onmouseout="out('7023202196844894280');" style=""> 325                      circlePaint.setStyle(Paint.Style.FILL);                                                       </span>
<span class="3207244326755712140" onmouseenter="enter('3207244326755712140');" onmouseout="out('3207244326755712140');" style=""> 326                      circlePaint.setStrokeWidth(3);                                                                </span>
<span class="-9125685889860219804" onmouseenter="enter('-9125685889860219804');" onmouseout="out('-9125685889860219804');" style=""> 327                      widgetCanvas.drawCircle(38, 38, 37, circlePaint);                                             </span>
<span  style=""> 328                                                                                                                    </span>
<span class="2381447846028007273" onmouseenter="enter('2381447846028007273');" onmouseout="out('2381447846028007273');" style=""> 329                      circlePaint.setColor(forceWhiteBackground ? Color.BLACK : Color.WHITE);                       </span>
<span class="-2529291397399672174" onmouseenter="enter('-2529291397399672174');" onmouseout="out('-2529291397399672174');" style=""> 330                      circlePaint.setStyle(Paint.Style.STROKE);                                                     </span>
<span class="3207244326755712140" onmouseenter="enter('3207244326755712140');" onmouseout="out('3207244326755712140');" style=""> 331                      circlePaint.setStrokeWidth(3);                                                                </span>
<span class="-9125685889860219804" onmouseenter="enter('-9125685889860219804');" onmouseout="out('-9125685889860219804');" style=""> 332                      widgetCanvas.drawCircle(38, 38, 37, circlePaint);                                             </span>


<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333                  }                                                                                                 </span>
<span  style=""> 334                                                                                                                    </span>
<span class="757605497541712230" onmouseenter="enter('757605497541712230');" onmouseout="out('757605497541712230');" style=""> 335                  for (CustomWidgetElement element : widget.getElements()) {                                        </span>
<span class="7400170023887894754" onmouseenter="enter('7400170023887894754');" onmouseout="out('7400170023887894754');" style=""> 336                      if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_BACKGROUND) {</span>
<span class="-676638329273944558" onmouseenter="enter('-676638329273944558');" onmouseout="out('-676638329273944558');" style=""> 337                          File imageFile = new File(element.getValue());                                            </span>
<span  style=""> 338                                                                                                                    </span>
<span class="7384441147080120976" onmouseenter="enter('7384441147080120976');" onmouseout="out('7384441147080120976');" style=""> 339                          if(!imageFile.exists() || !imageFile.isFile()){                                           </span>
<span class="8572942832707006367" onmouseenter="enter('8572942832707006367');" onmouseout="out('8572942832707006367');" style=""> 340                              logger.debug(&quot;Image file &quot; + element.getValue() + &quot; not found&quot;);                      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 341                              continue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 342                          }                                                                                         </span>
<span class="-1261560715133039949" onmouseenter="enter('-1261560715133039949');" onmouseout="out('-1261560715133039949');" style=""> 343                          Bitmap imageBitmap = BitmapFactory.decodeFile(element.getValue());                        </span>
<span class="6232182932301203372" onmouseenter="enter('6232182932301203372');" onmouseout="out('6232182932301203372');" style=""> 344                          if(imageBitmap == null){                                                                  </span>
<span class="-7905366545073842666" onmouseenter="enter('-7905366545073842666');" onmouseout="out('-7905366545073842666');" style=""> 345                              logger.debug(&quot;image file &quot; + element.getValue() + &quot; could not be decoded&quot;);           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 346                              continue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347                          }                                                                                         </span>
<span class="4351764494403839190" onmouseenter="enter('4351764494403839190');" onmouseout="out('4351764494403839190');" style=""> 348                          Bitmap scaledBitmap = Bitmap.createScaledBitmap(imageBitmap, 76, 76, false);              </span>
<span  style=""> 349                                                                                                                    </span>
<span class="3660116155044120822" onmouseenter="enter('3660116155044120822');" onmouseout="out('3660116155044120822');" style=""> 350                          widgetCanvas.drawBitmap(                                                                  </span>
<span class="5191324505806482314" onmouseenter="enter('5191324505806482314');" onmouseout="out('5191324505806482314');" style=""> 351                                  scaledBitmap,                                                                     </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 352                                  0,                                                                                </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 353                                  0,                                                                                </span>
<span class="-5950258146809433717" onmouseenter="enter('-5950258146809433717');" onmouseout="out('-5950258146809433717');" style=""> 354                                  null);                                                                            </span>
<span class="9045543232366036795" onmouseenter="enter('9045543232366036795');" onmouseout="out('9045543232366036795');" style=""> 355                          backgroundDrawn = true;                                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 356                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358                  }                                                                                                 </span>
<span  style=""> 359                                                                                                                    </span>
<span class="757605497541712230" onmouseenter="enter('757605497541712230');" onmouseout="out('757605497541712230');" style=""> 360                  for (CustomWidgetElement element : widget.getElements()) {                                        </span>
<span class="-8374841026396869451" onmouseenter="enter('-8374841026396869451');" onmouseout="out('-8374841026396869451');" style=""> 361                      if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_TEXT) {      </span>
<span class="8404149927879958117" onmouseenter="enter('8404149927879958117');" onmouseout="out('8404149927879958117');" style=""> 362                          Paint textPaint = new Paint();                                                            </span>
<span class="424156949088872290" onmouseenter="enter('424156949088872290');" onmouseout="out('424156949088872290');" style=""> 363                          textPaint.setStrokeWidth(4);                                                              </span>
<span class="-7858016953995282215" onmouseenter="enter('-7858016953995282215');" onmouseout="out('-7858016953995282215');" style=""> 364                          textPaint.setTextSize(17f);                                                               </span>
<span class="7085320690650566449" onmouseenter="enter('7085320690650566449');" onmouseout="out('7085320690650566449');" style=""> 365                          textPaint.setStyle(Paint.Style.FILL);                                                     </span>
<span class="4582184244946630782" onmouseenter="enter('4582184244946630782');" onmouseout="out('4582184244946630782');" style=""> 366                          textPaint.setColor(forceWhiteBackground ? Color.BLACK : Color.WHITE);                     </span>
<span class="8080777884851070420" onmouseenter="enter('8080777884851070420');" onmouseout="out('8080777884851070420');" style=""> 367                          textPaint.setTextAlign(Paint.Align.CENTER);                                               </span>
<span  style=""> 368                                                                                                                    </span>
<span class="-3687982044961117698" onmouseenter="enter('-3687982044961117698');" onmouseout="out('-3687982044961117698');" style=""><abbr title=" 369                          widgetCanvas.drawText(element.getValue(), element.getX(), element.getY() - (textPaint.descent() + textPaint.ascent()) / 2f, textPaint);"> 369                          widgetCanvas.drawText(element.getValue(), element.getX(), element.getY() - (textPaint.descðŸ”µ</abbr></span>
<span class="-2221545646012742491" onmouseenter="enter('-2221545646012742491');" onmouseout="out('-2221545646012742491');" style=""> 370                      }else if(element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_IMAGE) {</span>
<span class="-1261560715133039949" onmouseenter="enter('-1261560715133039949');" onmouseout="out('-1261560715133039949');" style=""> 371                          Bitmap imageBitmap = BitmapFactory.decodeFile(element.getValue());                        </span>
<span  style=""> 372                                                                                                                    </span>
<span class="850565005306985750" onmouseenter="enter('850565005306985750');" onmouseout="out('850565005306985750');" style=""><abbr title=" 373                          widgetCanvas.drawBitmap(imageBitmap, element.getX() - imageBitmap.getWidth() / 2f, element.getY() - imageBitmap.getHeight() / 2f, null);"> 373                          widgetCanvas.drawBitmap(imageBitmap, element.getX() - imageBitmap.getWidth() / 2f, elementðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 375                  }                                                                                                 </span>
<span class="-5480032434325078611" onmouseenter="enter('-5480032434325078611');" onmouseout="out('-5480032434325078611');" style=""> 376                  widgetImages.add(AssetImageFactory.createAssetImage(                                              </span>
<span class="6927266072716207452" onmouseenter="enter('6927266072716207452');" onmouseout="out('6927266072716207452');" style=""> 377                          widgetBitmap,                                                                             </span>
<span class="1283834832483333129" onmouseenter="enter('1283834832483333129');" onmouseout="out('1283834832483333129');" style=""> 378                          true,                                                                                     </span>
<span class="-5673825003729303026" onmouseenter="enter('-5673825003729303026');" onmouseout="out('-5673825003729303026');" style=""> 379                          widget.getAngle(),                                                                        </span>
<span class="-686125949143974898" onmouseenter="enter('-686125949143974898');" onmouseout="out('-686125949143974898');" style=""> 380                          widget.getDistance(),                                                                     </span>
<span class="-6707054910432036291" onmouseenter="enter('-6707054910432036291');" onmouseout="out('-6707054910432036291');" style=""> 381                          1                                                                                         </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 382                  ));                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383              }                                                                                                     </span>
<span  style=""> 384                                                                                                                    </span>
<span class="5531684472745833198" onmouseenter="enter('5531684472745833198');" onmouseout="out('5531684472745833198');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 385 -            AssetImage[] images = widgetImages.toArray(new AssetImage[0]);                                        </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 386 -                                                                                                                  </span>
<span class="-7053575697528717461" onmouseenter="enter('-7053575697528717461');" onmouseout="out('-7053575697528717461');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 387 -            // queueWrite(new FileDeleteRequest((short) 0x0700));                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 388 +                                                                                                                  </span>
<span class="-7135747421857686049" onmouseenter="enter('-7135747421857686049');" onmouseout="out('-7135747421857686049');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 389 +            if(this.backGroundImage != null){                                                                     </span>
<span class="-1341990675909940474" onmouseenter="enter('-1341990675909940474');" onmouseout="out('-1341990675909940474');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 390 +                widgetImages.add(this.backGroundImage);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 391 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 392 +                                                                                                                  </span>
<span class="4734673173370309989" onmouseenter="enter('4734673173370309989');" onmouseout="out('4734673173370309989');" style=""> 393              queueWrite(new AssetFilePutRequest(                                                                   </span>
<span class="-9668838946899241" onmouseenter="enter('-9668838946899241');" onmouseout="out('-9668838946899241');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 394 -                    images,                                                                                       </span>
<span class="-4286172266088300066" onmouseenter="enter('-4286172266088300066');" onmouseout="out('-4286172266088300066');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 395 +                    widgetImages.toArray(new AssetImage[0]),                                                      </span>
<span class="-3953921874774397702" onmouseenter="enter('-3953921874774397702');" onmouseout="out('-3953921874774397702');" style=""> 396                      (byte) 0x00,                                                                                  </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 397                      this                                                                                          </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 398              ));                                                                                                   </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 399 -                                                                                                                  </span>
<span class="-1216850278071707444" onmouseenter="enter('-1216850278071707444');" onmouseout="out('-1216850278071707444');" style=""> 400              // queueWrite(new FileDeleteRequest((short) 0x0503));                                                 </span>
<span class="-6828394027622892361" onmouseenter="enter('-6828394027622892361');" onmouseout="out('-6828394027622892361');" style=""> 401              queueWrite(new ImagesSetRequest(                                                                      </span>
<span class="-9668838946899241" onmouseenter="enter('-9668838946899241');" onmouseout="out('-9668838946899241');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 402 -                    images,                                                                                       </span>
<span class="-4286172266088300066" onmouseenter="enter('-4286172266088300066');" onmouseout="out('-4286172266088300066');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 403 +                    widgetImages.toArray(new AssetImage[0]),                                                      </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 404                      this                                                                                          </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 405              ));                                                                                                   </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 406          } catch (IOException e) {                                                                                 </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 407              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 408          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 409      }                                                                                                             </span>
<span  style=""> 410                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 411      @Override                                                                                                     </span>
<span class="768796884755462959" onmouseenter="enter('768796884755462959');" onmouseout="out('768796884755462959');" style=""> 412      public void setWidgetContent(String widgetID, String content, boolean renderOnWatch) {                        </span>
<span class="-1104872319984701354" onmouseenter="enter('-1104872319984701354');" onmouseout="out('-1104872319984701354');" style=""> 413          boolean update = false;                                                                                   </span>
<span class="4250664064039944058" onmouseenter="enter('4250664064039944058');" onmouseout="out('4250664064039944058');" style=""> 414          for (Widget widget : this.widgets) {                                                                      </span>
<span class="6599617715616763984" onmouseenter="enter('6599617715616763984');" onmouseout="out('6599617715616763984');" style=""> 415              if(!(widget instanceof CustomWidget)) continue;                                                       </span>
<span class="-7367617630703350990" onmouseenter="enter('-7367617630703350990');" onmouseout="out('-7367617630703350990');" style=""> 416              if(((CustomWidget) widget).updateElementValue(widgetID, content)) update = true;                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417          }                                                                                                         </span>
<span  style=""> 418                                                                                                                    </span>
<span class="-2887538322855201281" onmouseenter="enter('-2887538322855201281');" onmouseout="out('-2887538322855201281');" style=""> 419          if (renderOnWatch &amp;&amp; update) renderWidgets();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420      }                                                                                                             </span>
<span  style=""> 421                                                                                                                    </span>
<span class="6173588091729977369" onmouseenter="enter('6173588091729977369');" onmouseout="out('6173588091729977369');" style=""> 422      private void negotiateSymmetricKey() {                                                                        </span>
<span class="-7168973652814870469" onmouseenter="enter('-7168973652814870469');" onmouseout="out('-7168973652814870469');" style=""> 423          queueWrite(new VerifyPrivateKeyRequest(                                                                   </span>
<span class="2474409468109046352" onmouseenter="enter('2474409468109046352');" onmouseout="out('2474409468109046352');" style=""> 424                  this.getSecretKey(),                                                                              </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 425                  this                                                                                              </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 426          ));                                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 427      }                                                                                                             </span>
<span  style=""> 428                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 429      @Override                                                                                                     </span>
<span class="8564159631865081592" onmouseenter="enter('8564159631865081592');" onmouseout="out('8564159631865081592');" style=""> 430      public void setTime() {                                                                                       </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 431          negotiateSymmetricKey();                                                                                  </span>
<span  style=""> 432                                                                                                                    </span>
<span class="-4700399361923900561" onmouseenter="enter('-4700399361923900561');" onmouseout="out('-4700399361923900561');" style=""> 433          long millis = System.currentTimeMillis();                                                                 </span>
<span class="8010236317671933907" onmouseenter="enter('8010236317671933907');" onmouseout="out('8010236317671933907');" style=""> 434          TimeZone zone = new GregorianCalendar().getTimeZone();                                                    </span>
<span  style=""> 435                                                                                                                    </span>
<span class="5277346296728804081" onmouseenter="enter('5277346296728804081');" onmouseout="out('5277346296728804081');" style=""> 436          queueWrite(                                                                                               </span>
<span class="9082684383999307863" onmouseenter="enter('9082684383999307863');" onmouseout="out('9082684383999307863');" style=""> 437                  new ConfigurationPutRequest(                                                                      </span>
<span class="6747723926021094395" onmouseenter="enter('6747723926021094395');" onmouseout="out('6747723926021094395');" style=""> 438                          new TimeConfigItem(                                                                       </span>
<span class="-4594139798000988877" onmouseenter="enter('-4594139798000988877');" onmouseout="out('-4594139798000988877');" style=""> 439                                  (int) (millis / 1000 + getDeviceSupport().getTimeOffset() * 60),                  </span>
<span class="6701954853301529159" onmouseenter="enter('6701954853301529159');" onmouseout="out('6701954853301529159');" style=""> 440                                  (short) (millis % 1000),                                                          </span>
<span class="2740305831490303835" onmouseenter="enter('2740305831490303835');" onmouseout="out('2740305831490303835');" style=""> 441                                  (short) (zone.getOffset(millis) / 60000)                                          </span>
<span class="5925056120740059197" onmouseenter="enter('5925056120740059197');" onmouseout="out('5925056120740059197');" style=""> 442                          ),                                                                                        </span>
<span class="-573149562926997335" onmouseenter="enter('-573149562926997335');" onmouseout="out('-573149562926997335');" style=""> 443                          this), false                                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 444          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445      }                                                                                                             </span>
<span  style=""> 446                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 447      @Override                                                                                                     </span>
<span class="5743699626454161990" onmouseenter="enter('5743699626454161990');" onmouseout="out('5743699626454161990');" style=""> 448      public void setMusicInfo(MusicSpec musicSpec) {                                                               </span>
<span class="7717622633225589961" onmouseenter="enter('7717622633225589961');" onmouseout="out('7717622633225589961');" style=""> 449          if (                                                                                                      </span>
<span class="-2721767562250030479" onmouseenter="enter('-2721767562250030479');" onmouseout="out('-2721767562250030479');" style=""> 450                  currentSpec != null                                                                               </span>
<span class="6347316233900210670" onmouseenter="enter('6347316233900210670');" onmouseout="out('6347316233900210670');" style=""> 451                          &amp;&amp; currentSpec.album.equals(musicSpec.album)                                              </span>
<span class="-7026697945522803285" onmouseenter="enter('-7026697945522803285');" onmouseout="out('-7026697945522803285');" style=""> 452                          &amp;&amp; currentSpec.artist.equals(musicSpec.artist)                                            </span>
<span class="234002389956897367" onmouseenter="enter('234002389956897367');" onmouseout="out('234002389956897367');" style=""> 453                          &amp;&amp; currentSpec.track.equals(musicSpec.track)                                              </span>
<span class="129544933216380196" onmouseenter="enter('129544933216380196');" onmouseout="out('129544933216380196');" style=""> 454          ) return;                                                                                                 </span>
<span class="5122037976784129938" onmouseenter="enter('5122037976784129938');" onmouseout="out('5122037976784129938');" style=""> 455          currentSpec = musicSpec;                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 456          try {                                                                                                     </span>
<span class="2807680215991082156" onmouseenter="enter('2807680215991082156');" onmouseout="out('2807680215991082156');" style=""> 457              queueWrite(new MusicInfoSetRequest(                                                                   </span>
<span class="-4995357750126688628" onmouseenter="enter('-4995357750126688628');" onmouseout="out('-4995357750126688628');" style=""> 458                      musicSpec.artist,                                                                             </span>
<span class="-2625665048867935009" onmouseenter="enter('-2625665048867935009');" onmouseout="out('-2625665048867935009');" style=""> 459                      musicSpec.album,                                                                              </span>
<span class="4393990709676517095" onmouseenter="enter('4393990709676517095');" onmouseout="out('4393990709676517095');" style=""> 460                      musicSpec.track,                                                                              </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 461                      this                                                                                          </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 462              ));                                                                                                   </span>
<span class="-6150396604962993275" onmouseenter="enter('-6150396604962993275');" onmouseout="out('-6150396604962993275');" style=""> 463          }catch (BufferOverflowException e){                                                                       </span>
<span class="-5802249110858364829" onmouseenter="enter('-5802249110858364829');" onmouseout="out('-5802249110858364829');" style=""> 464              GB.log(&quot;musicInfo: &quot; + musicSpec, GB.ERROR, e);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466      }                                                                                                             </span>
<span  style=""> 467                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 468      @Override                                                                                                     </span>
<span class="6484409227794913685" onmouseenter="enter('6484409227794913685');" onmouseout="out('6484409227794913685');" style=""> 469      public void setMusicState(MusicStateSpec stateSpec) {                                                         </span>
<span class="-8825084358361918368" onmouseenter="enter('-8825084358361918368');" onmouseout="out('-8825084358361918368');" style=""> 470          super.setMusicState(stateSpec);                                                                           </span>
<span  style=""> 471                                                                                                                    </span>
<span class="-5832778985397101291" onmouseenter="enter('-5832778985397101291');" onmouseout="out('-5832778985397101291');" style=""> 472          queueWrite(new MusicControlRequest(                                                                       </span>
<span class="6749687689436260015" onmouseenter="enter('6749687689436260015');" onmouseout="out('6749687689436260015');" style=""><abbr title=" 473                  stateSpec.state == MusicStateSpec.STATE_PLAYING ? MUSIC_PHONE_REQUEST.MUSIC_REQUEST_SET_PLAYING : MUSIC_PHONE_REQUEST.MUSIC_REQUEST_SET_PAUSED"> 473                  stateSpec.state == MusicStateSpec.STATE_PLAYING ? MUSIC_PHONE_REQUEST.MUSIC_REQUEST_SET_PLAYING : ðŸ”µ</abbr></span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 474          ));                                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475      }                                                                                                             </span>
<span  style=""> 476                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 477      @Override                                                                                                     </span>
<span class="-4328830144100754457" onmouseenter="enter('-4328830144100754457');" onmouseout="out('-4328830144100754457');" style=""> 478      public void updateWidgets() {                                                                                 </span>
<span class="-8671838943786981246" onmouseenter="enter('-8671838943786981246');" onmouseout="out('-8671838943786981246');" style=""> 479          loadWidgets();                                                                                            </span>
<span class="-686042699702875094" onmouseenter="enter('-686042699702875094');" onmouseout="out('-686042699702875094');" style=""> 480          renderWidgets();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481      }                                                                                                             </span>
<span  style=""> 482                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 483      @Override                                                                                                     </span>
<span class="-3215171005460530491" onmouseenter="enter('-3215171005460530491');" onmouseout="out('-3215171005460530491');" style=""> 484      public void onFetchActivityData() {                                                                           </span>
<span class="-9031387911705611686" onmouseenter="enter('-9031387911705611686');" onmouseout="out('-9031387911705611686');" style=""> 485          syncSettings();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 486      }                                                                                                             </span>
<span  style=""> 487                                                                                                                    </span>
<span class="4739601400713241401" onmouseenter="enter('4739601400713241401');" onmouseout="out('4739601400713241401');" style=""> 488      private void syncSettings() {                                                                                 </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 489          negotiateSymmetricKey();                                                                                  </span>
<span  style=""> 490                                                                                                                    </span>
<span class="1672016935910782047" onmouseenter="enter('1672016935910782047');" onmouseout="out('1672016935910782047');" style=""> 491          queueWrite(new ConfigurationGetRequest(this));                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 492      }                                                                                                             </span>
<span  style=""> 493                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 494      @Override                                                                                                     </span>
<span class="3426069938226863461" onmouseenter="enter('3426069938226863461');" onmouseout="out('3426069938226863461');" style=""> 495      public void setActivityHand(double progress) {                                                                </span>
<span class="-1967647950949041220" onmouseenter="enter('-1967647950949041220');" onmouseout="out('-1967647950949041220');" style=""> 496          // super.setActivityHand(progress);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 497      }                                                                                                             </span>
<span  style=""> 498                                                                                                                    </span>
<span class="4432705569944803605" onmouseenter="enter('4432705569944803605');" onmouseout="out('4432705569944803605');" style=""> 499      public boolean playRawNotification(NotificationSpec notificationSpec) {                                       </span>
<span class="-6989280013139049302" onmouseenter="enter('-6989280013139049302');" onmouseout="out('-6989280013139049302');" style=""> 500          String senderOrTitle = StringUtils.getFirstOf(notificationSpec.sender, notificationSpec.title);           </span>
<span  style=""> 501                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 502          try {                                                                                                     </span>
<span class="-2594216627053610262" onmouseenter="enter('-2594216627053610262');" onmouseout="out('-2594216627053610262');" style=""> 503              for (NotificationHRConfiguration configuration : this.notificationConfigurations){                    </span>
<span class="-6012792330028782499" onmouseenter="enter('-6012792330028782499');" onmouseout="out('-6012792330028782499');" style=""> 504                  if(configuration.getPackageName().equals(notificationSpec.sourceAppId)){                          </span>
<span class="-8304200794962410012" onmouseenter="enter('-8304200794962410012');" onmouseout="out('-8304200794962410012');" style=""><abbr title=" 505                      queueWrite(new PlayTextNotificationRequest(notificationSpec.sourceAppId, senderOrTitle, notificationSpec.body, this));"> 505                      queueWrite(new PlayTextNotificationRequest(notificationSpec.sourceAppId, senderOrTitle, notifiðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 506                      return true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 507                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 508              }                                                                                                     </span>
<span class="6520985087381761239" onmouseenter="enter('6520985087381761239');" onmouseout="out('6520985087381761239');" style=""> 509              queueWrite(new PlayTextNotificationRequest(&quot;generic&quot;, senderOrTitle, notificationSpec.body, this));   </span>
<span class="-1580407524319062305" onmouseenter="enter('-1580407524319062305');" onmouseout="out('-1580407524319062305');" style=""> 510          }catch (Exception e){                                                                                     </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 511              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 512          }                                                                                                         </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 513          return true;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 514      }                                                                                                             </span>
<span  style=""> 515                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 516      @Override                                                                                                     </span>
<span class="-3287587973518064190" onmouseenter="enter('-3287587973518064190');" onmouseout="out('-3287587973518064190');" style=""> 517      public void onFindDevice(boolean start) {                                                                     </span>
<span class="5693720137067729069" onmouseenter="enter('5693720137067729069');" onmouseout="out('5693720137067729069');" style=""> 518          if(start){                                                                                                </span>
<span class="1659990903962259675" onmouseenter="enter('1659990903962259675');" onmouseout="out('1659990903962259675');" style=""> 519              new TransactionBuilder(&quot;vibrate find&quot;)                                                                </span>
<span class="-2922806062965776165" onmouseenter="enter('-2922806062965776165');" onmouseout="out('-2922806062965776165');" style=""> 520                      .write(                                                                                       </span>
<span class="4897579106813855607" onmouseenter="enter('4897579106813855607');" onmouseout="out('4897579106813855607');" style=""><abbr title=" 521                              getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6-74696673696d&quot;)),"> 521                              getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6-74696673ðŸ”µ</abbr></span>
<span class="-4709444814666373888" onmouseenter="enter('-4709444814666373888');" onmouseout="out('-4709444814666373888');" style=""><abbr title=" 522                              new byte[]{(byte) 0x01, (byte) 0x04, (byte) 0x30, (byte) 0x75, (byte) 0x00, (byte) 0x00}"> 522                              new byte[]{(byte) 0x01, (byte) 0x04, (byte) 0x30, (byte) 0x75, (byte) 0x00, (byte) 0x0ðŸ”µ</abbr></span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 523                              )                                                                                     </span>
<span class="7475982186340408444" onmouseenter="enter('7475982186340408444');" onmouseout="out('7475982186340408444');" style=""> 524                      .queue(getDeviceSupport().getQueue());                                                        </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style=""> 525          }else{                                                                                                    </span>
<span class="1659990903962259675" onmouseenter="enter('1659990903962259675');" onmouseout="out('1659990903962259675');" style=""> 526              new TransactionBuilder(&quot;vibrate find&quot;)                                                                </span>
<span class="-2922806062965776165" onmouseenter="enter('-2922806062965776165');" onmouseout="out('-2922806062965776165');" style=""> 527                      .write(                                                                                       </span>
<span class="4897579106813855607" onmouseenter="enter('4897579106813855607');" onmouseout="out('4897579106813855607');" style=""><abbr title=" 528                              getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6-74696673696d&quot;)),"> 528                              getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6-74696673ðŸ”µ</abbr></span>
<span class="-5350492152909335002" onmouseenter="enter('-5350492152909335002');" onmouseout="out('-5350492152909335002');" style=""> 529                              new byte[]{(byte) 0x02, (byte) 0x05, (byte) 0x04}                                     </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 530                      )                                                                                             </span>
<span class="7475982186340408444" onmouseenter="enter('7475982186340408444');" onmouseout="out('7475982186340408444');" style=""> 531                      .queue(getDeviceSupport().getQueue());                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 533      }                                                                                                             </span>
<span  style=""> 534                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 535      @Override                                                                                                     </span>
<span class="8502851833159229707" onmouseenter="enter('8502851833159229707');" onmouseout="out('8502851833159229707');" style=""> 536      public void onSetCallState(CallSpec callSpec) {                                                               </span>
<span class="2570082300251631790" onmouseenter="enter('2570082300251631790');" onmouseout="out('2570082300251631790');" style=""> 537          super.onSetCallState(callSpec);                                                                           </span>
<span class="-5845444396137068141" onmouseenter="enter('-5845444396137068141');" onmouseout="out('-5845444396137068141');" style=""><abbr title=" 538          queueWrite(new PlayCallNotificationRequest(StringUtils.getFirstOf(callSpec.name, callSpec.number), callSpec.command == CallSpec.CALL_INCOMING, this));"> 538          queueWrite(new PlayCallNotificationRequest(StringUtils.getFirstOf(callSpec.name, callSpec.number), callSpeðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 539      }                                                                                                             </span>
<span  style=""> 540                                                                                                                    </span>
<span class="-9163390227004502495" onmouseenter="enter('-9163390227004502495');" onmouseout="out('-9163390227004502495');" style=""> 541      // this method is based on the one from AppMessageHandlerYWeather.java                                        </span>
<span class="-7257237953502575841" onmouseenter="enter('-7257237953502575841');" onmouseout="out('-7257237953502575841');" style=""> 542      private int getIconForConditionCode(int conditionCode, boolean isNight) {                                     </span>
<span class="-7242773537695047282" onmouseenter="enter('-7242773537695047282');" onmouseout="out('-7242773537695047282');" style=""> 543          final int CLEAR_DAY = 0;                                                                                  </span>
<span class="4533171043840830733" onmouseenter="enter('4533171043840830733');" onmouseout="out('4533171043840830733');" style=""> 544          final int CLEAR_NIGHT = 1;                                                                                </span>
<span class="-1044203258765846265" onmouseenter="enter('-1044203258765846265');" onmouseout="out('-1044203258765846265');" style=""> 545          final int CLOUDY = 2;                                                                                     </span>
<span class="6767089093966645579" onmouseenter="enter('6767089093966645579');" onmouseout="out('6767089093966645579');" style=""> 546          final int PARTLY_CLOUDY_DAY = 3;                                                                          </span>
<span class="4494290528913924840" onmouseenter="enter('4494290528913924840');" onmouseout="out('4494290528913924840');" style=""> 547          final int PARTLY_CLOUDY_NIGHT = 4;                                                                        </span>
<span class="-948427530318648638" onmouseenter="enter('-948427530318648638');" onmouseout="out('-948427530318648638');" style=""> 548          final int RAIN = 5;                                                                                       </span>
<span class="-7891962438645220671" onmouseenter="enter('-7891962438645220671');" onmouseout="out('-7891962438645220671');" style=""> 549          final int SNOW = 6;                                                                                       </span>
<span class="7487235255100620000" onmouseenter="enter('7487235255100620000');" onmouseout="out('7487235255100620000');" style=""> 550          final int SNOW_2 = 7; // same as 6?                                                                       </span>
<span class="6109174568599434520" onmouseenter="enter('6109174568599434520');" onmouseout="out('6109174568599434520');" style=""> 551          final int THUNDERSTORM = 8;                                                                               </span>
<span class="-1407557299840080809" onmouseenter="enter('-1407557299840080809');" onmouseout="out('-1407557299840080809');" style=""> 552          final int CLOUDY_2 = 9; // same as 2?                                                                     </span>
<span class="-235578585516231192" onmouseenter="enter('-235578585516231192');" onmouseout="out('-235578585516231192');" style=""> 553          final int WINDY = 10;                                                                                     </span>
<span  style=""> 554                                                                                                                    </span>
<span class="-6750306522095776186" onmouseenter="enter('-6750306522095776186');" onmouseout="out('-6750306522095776186');" style=""> 555          if (conditionCode == 800 || conditionCode == 951) {                                                       </span>
<span class="-7722401087902140861" onmouseenter="enter('-7722401087902140861');" onmouseout="out('-7722401087902140861');" style=""> 556              return isNight ? CLEAR_NIGHT : CLEAR_DAY;                                                             </span>
<span class="3088760508183910638" onmouseenter="enter('3088760508183910638');" onmouseout="out('3088760508183910638');" style=""> 557          } else if (conditionCode &gt; 800 &amp;&amp; conditionCode &lt; 900) {                                                  </span>
<span class="6220617342345108517" onmouseenter="enter('6220617342345108517');" onmouseout="out('6220617342345108517');" style=""> 558              return isNight ? PARTLY_CLOUDY_NIGHT : PARTLY_CLOUDY_DAY;                                             </span>
<span class="3057497190260727363" onmouseenter="enter('3057497190260727363');" onmouseout="out('3057497190260727363');" style=""> 559          } else if (conditionCode &gt;= 300 &amp;&amp; conditionCode &lt; 400) {                                                 </span>
<span class="7963689777117946550" onmouseenter="enter('7963689777117946550');" onmouseout="out('7963689777117946550');" style=""> 560              return RAIN; // drizzle mapped to rain                                                                </span>
<span class="-3733606442935144190" onmouseenter="enter('-3733606442935144190');" onmouseout="out('-3733606442935144190');" style=""> 561          } else if (conditionCode &gt;= 500 &amp;&amp; conditionCode &lt; 600) {                                                 </span>
<span class="2508004717339579833" onmouseenter="enter('2508004717339579833');" onmouseout="out('2508004717339579833');" style=""> 562              return RAIN;                                                                                          </span>
<span class="4918040359999714885" onmouseenter="enter('4918040359999714885');" onmouseout="out('4918040359999714885');" style=""> 563          } else if (conditionCode &gt;= 700 &amp;&amp; conditionCode &lt; 732) {                                                 </span>
<span class="6233122099491282445" onmouseenter="enter('6233122099491282445');" onmouseout="out('6233122099491282445');" style=""> 564              return CLOUDY;                                                                                        </span>
<span class="6405170419319947758" onmouseenter="enter('6405170419319947758');" onmouseout="out('6405170419319947758');" style=""> 565          } else if (conditionCode == 741 || conditionCode == 751 || conditionCode == 761 || conditionCode == 762) {</span>
<span class="2536039853244368761" onmouseenter="enter('2536039853244368761');" onmouseout="out('2536039853244368761');" style=""> 566              return CLOUDY; // fog mapped to cloudy                                                                </span>
<span class="6580216626725103203" onmouseenter="enter('6580216626725103203');" onmouseout="out('6580216626725103203');" style=""> 567          } else if (conditionCode == 771) {                                                                        </span>
<span class="-5268377561975928582" onmouseenter="enter('-5268377561975928582');" onmouseout="out('-5268377561975928582');" style=""> 568              return CLOUDY; // squalls mapped to cloudy                                                            </span>
<span class="-6475883863999659582" onmouseenter="enter('-6475883863999659582');" onmouseout="out('-6475883863999659582');" style=""> 569          } else if (conditionCode == 781) {                                                                        </span>
<span class="-2651444700159349229" onmouseenter="enter('-2651444700159349229');" onmouseout="out('-2651444700159349229');" style=""> 570              return WINDY; // tornato mapped to windy                                                              </span>
<span class="-3846351950108028451" onmouseenter="enter('-3846351950108028451');" onmouseout="out('-3846351950108028451');" style=""> 571          } else if (conditionCode &gt;= 200 &amp;&amp; conditionCode &lt; 300) {                                                 </span>
<span class="-7893213180272113492" onmouseenter="enter('-7893213180272113492');" onmouseout="out('-7893213180272113492');" style=""> 572              return THUNDERSTORM;                                                                                  </span>
<span class="-160375692992858182" onmouseenter="enter('-160375692992858182');" onmouseout="out('-160375692992858182');" style=""> 573          } else if (conditionCode &gt;= 600 &amp;&amp; conditionCode &lt;= 602) {                                                </span>
<span class="4577577423549625750" onmouseenter="enter('4577577423549625750');" onmouseout="out('4577577423549625750');" style=""> 574              return SNOW;                                                                                          </span>
<span class="73124631780569399" onmouseenter="enter('73124631780569399');" onmouseout="out('73124631780569399');" style=""> 575          } else if (conditionCode &gt;= 611 &amp;&amp; conditionCode &lt;= 622) {                                                </span>
<span class="2508004717339579833" onmouseenter="enter('2508004717339579833');" onmouseout="out('2508004717339579833');" style=""> 576              return RAIN;                                                                                          </span>
<span class="5918520655852856943" onmouseenter="enter('5918520655852856943');" onmouseout="out('5918520655852856943');" style=""> 577          } else if (conditionCode == 906) {                                                                        </span>
<span class="-8494627517236710847" onmouseenter="enter('-8494627517236710847');" onmouseout="out('-8494627517236710847');" style=""> 578              return RAIN; // hail mapped to rain                                                                   </span>
<span class="-4632432821354911151" onmouseenter="enter('-4632432821354911151');" onmouseout="out('-4632432821354911151');" style=""> 579          } else if (conditionCode &gt;= 907 &amp;&amp; conditionCode &lt; 957) {                                                 </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 580              return WINDY;                                                                                         </span>
<span class="884594439890815837" onmouseenter="enter('884594439890815837');" onmouseout="out('884594439890815837');" style=""> 581          } else if (conditionCode == 905) {                                                                        </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 582              return WINDY;                                                                                         </span>
<span class="7058363657246863920" onmouseenter="enter('7058363657246863920');" onmouseout="out('7058363657246863920');" style=""> 583          } else if (conditionCode == 900) {                                                                        </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 584              return WINDY;                                                                                         </span>
<span class="-7755582696699634395" onmouseenter="enter('-7755582696699634395');" onmouseout="out('-7755582696699634395');" style=""> 585          } else if (conditionCode == 901 || conditionCode == 902 || conditionCode == 962) {                        </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 586              return WINDY;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 587          }                                                                                                         </span>
<span class="-7722401087902140861" onmouseenter="enter('-7722401087902140861');" onmouseout="out('-7722401087902140861');" style=""> 588          return isNight ? CLEAR_NIGHT : CLEAR_DAY;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 589      }                                                                                                             </span>
<span  style=""> 590                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 591      @Override                                                                                                     </span>
<span class="-6167041048283935417" onmouseenter="enter('-6167041048283935417');" onmouseout="out('-6167041048283935417');" style=""> 592      public void onSendWeather(WeatherSpec weatherSpec) {                                                          </span>
<span class="-580696616137890311" onmouseenter="enter('-580696616137890311');" onmouseout="out('-580696616137890311');" style=""> 593          long ts = System.currentTimeMillis();                                                                     </span>
<span class="-8981233749074677785" onmouseenter="enter('-8981233749074677785');" onmouseout="out('-8981233749074677785');" style=""> 594          ts /= 1000;                                                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 595          try {                                                                                                     </span>
<span class="-4452014417400702333" onmouseenter="enter('-4452014417400702333');" onmouseout="out('-4452014417400702333');" style=""> 596              JSONObject responseObject = new JSONObject()                                                          </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 597                      .put(&quot;res&quot;, new JSONObject()                                                                  </span>
<span class="-311134376594128902" onmouseenter="enter('-311134376594128902');" onmouseout="out('-311134376594128902');" style=""> 598                              .put(&quot;id&quot;, 0) // seems the id does not matter?                                        </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 599                              .put(&quot;set&quot;, new JSONObject()                                                          </span>
<span class="-7491386685560898919" onmouseenter="enter('-7491386685560898919');" onmouseout="out('-7491386685560898919');" style=""> 600                                      .put(&quot;weatherInfo&quot;, new JSONObject()                                          </span>
<span class="3913809787685967455" onmouseenter="enter('3913809787685967455');" onmouseout="out('3913809787685967455');" style=""> 601                                              .put(&quot;alive&quot;, ts + 60 * 60)                                           </span>
<span class="4823146304358131104" onmouseenter="enter('4823146304358131104');" onmouseout="out('4823146304358131104');" style=""> 602                                              .put(&quot;unit&quot;, &quot;c&quot;) // FIXME: do not hardcode                           </span>
<span class="3465794128886265400" onmouseenter="enter('3465794128886265400');" onmouseout="out('3465794128886265400');" style=""> 603                                              .put(&quot;temp&quot;, weatherSpec.currentTemp - 273)                           </span>
<span class="-2978941176103258929" onmouseenter="enter('-2978941176103258929');" onmouseout="out('-2978941176103258929');" style=""><abbr title=" 604                                              .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.currentConditionCode, false)) // FIXME do not assume daylight"> 604                                              .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.currentConditionCoðŸ”µ</abbr></span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 605                                      )                                                                             </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 606                              )                                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 607                      );                                                                                            </span>
<span  style=""> 608                                                                                                                    </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 609              queueWrite(new JsonPutRequest(responseObject, this));                                                 </span>
<span  style=""> 610                                                                                                                    </span>
<span class="5317082335628225584" onmouseenter="enter('5317082335628225584');" onmouseout="out('5317082335628225584');" style=""> 611              JSONArray forecastWeekArray = new JSONArray();                                                        </span>
<span class="-2368043815888700658" onmouseenter="enter('-2368043815888700658');" onmouseout="out('-2368043815888700658');" style=""> 612              final String[] weekdays = {&quot;&quot;, &quot;Sun&quot;, &quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;};                      </span>
<span class="-364158713171851732" onmouseenter="enter('-364158713171851732');" onmouseout="out('-364158713171851732');" style=""> 613              Calendar cal = Calendar.getInstance();                                                                </span>
<span class="-4637281821247246720" onmouseenter="enter('-4637281821247246720');" onmouseout="out('-4637281821247246720');" style=""> 614              cal.setTimeInMillis(weatherSpec.timestamp * 1000L);                                                   </span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style=""> 615              int i = 0;                                                                                            </span>
<span class="4625687820668156386" onmouseenter="enter('4625687820668156386');" onmouseout="out('4625687820668156386');" style=""> 616              for (WeatherSpec.Forecast forecast : weatherSpec.forecasts) {                                         </span>
<span class="3497173000510224029" onmouseenter="enter('3497173000510224029');" onmouseout="out('3497173000510224029');" style=""> 617                  cal.add(Calendar.DATE, 1);                                                                        </span>
<span class="-2706943182093550956" onmouseenter="enter('-2706943182093550956');" onmouseout="out('-2706943182093550956');" style=""> 618                  int dayOfWeek = cal.get(Calendar.DAY_OF_WEEK);                                                    </span>
<span class="8445249603810894149" onmouseenter="enter('8445249603810894149');" onmouseout="out('8445249603810894149');" style=""> 619                  forecastWeekArray.put(new JSONObject()                                                            </span>
<span class="3406552519892389037" onmouseenter="enter('3406552519892389037');" onmouseout="out('3406552519892389037');" style=""> 620                          .put(&quot;day&quot;, weekdays[dayOfWeek])                                                          </span>
<span class="-3341352462469645269" onmouseenter="enter('-3341352462469645269');" onmouseout="out('-3341352462469645269');" style=""><abbr title=" 621                          .put(&quot;cond_id&quot;, getIconForConditionCode(forecast.conditionCode, false)) // FIXME do not assume daylight"> 621                          .put(&quot;cond_id&quot;, getIconForConditionCode(forecast.conditionCode, false)) // FIXME do not asðŸ”µ</abbr></span>
<span class="2713736984512170635" onmouseenter="enter('2713736984512170635');" onmouseout="out('2713736984512170635');" style=""> 622                          .put(&quot;high&quot;, forecast.maxTemp - 273)                                                      </span>
<span class="8922707616504433133" onmouseenter="enter('8922707616504433133');" onmouseout="out('8922707616504433133');" style=""> 623                          .put(&quot;low&quot;, forecast.minTemp - 273)                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 624                  );                                                                                                </span>
<span class="-1631419655189706967" onmouseenter="enter('-1631419655189706967');" onmouseout="out('-1631419655189706967');" style=""> 625                  if (++i == 3) break; // max 3                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 626              }                                                                                                     </span>
<span  style=""> 627                                                                                                                    </span>
<span class="1945247200353653685" onmouseenter="enter('1945247200353653685');" onmouseout="out('1945247200353653685');" style=""> 628              JSONArray forecastDayArray = new JSONArray();                                                         </span>
<span class="-3162654741636225130" onmouseenter="enter('-3162654741636225130');" onmouseout="out('-3162654741636225130');" style=""> 629              final int[] hours = {0, 0, 0};                                                                        </span>
<span  style=""> 630                                                                                                                    </span>
<span class="6125525781312818118" onmouseenter="enter('6125525781312818118');" onmouseout="out('6125525781312818118');" style=""> 631              for (int hour : hours) {                                                                              </span>
<span class="1068601706398434110" onmouseenter="enter('1068601706398434110');" onmouseout="out('1068601706398434110');" style=""> 632                  forecastDayArray.put(new JSONObject()                                                             </span>
<span class="-3870856117199987769" onmouseenter="enter('-3870856117199987769');" onmouseout="out('-3870856117199987769');" style=""> 633                          .put(&quot;hour&quot;, hour)                                                                        </span>
<span class="-6006964472079792051" onmouseenter="enter('-6006964472079792051');" onmouseout="out('-6006964472079792051');" style=""> 634                          .put(&quot;cond_id&quot;, 0)                                                                        </span>
<span class="-6609285657661916066" onmouseenter="enter('-6609285657661916066');" onmouseout="out('-6609285657661916066');" style=""> 635                          .put(&quot;temp&quot;, 0)                                                                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 636                  );                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 637              }                                                                                                     </span>
<span  style=""> 638                                                                                                                    </span>
<span  style=""> 639                                                                                                                    </span>
<span class="3790951608586851062" onmouseenter="enter('3790951608586851062');" onmouseout="out('3790951608586851062');" style=""> 640              JSONObject forecastResponseObject = new JSONObject()                                                  </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 641                      .put(&quot;res&quot;, new JSONObject()                                                                  </span>
<span class="3332377282695166753" onmouseenter="enter('3332377282695166753');" onmouseout="out('3332377282695166753');" style=""> 642                              .put(&quot;id&quot;, 0)                                                                         </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 643                              .put(&quot;set&quot;, new JSONObject()                                                          </span>
<span class="7467737770827774855" onmouseenter="enter('7467737770827774855');" onmouseout="out('7467737770827774855');" style=""> 644                                      .put(&quot;weatherApp._.config.locations&quot;, new JSONArray()                         </span>
<span class="-2773638428741427529" onmouseenter="enter('-2773638428741427529');" onmouseout="out('-2773638428741427529');" style=""> 645                                              .put(new JSONObject()                                                 </span>
<span class="3913809787685967455" onmouseenter="enter('3913809787685967455');" onmouseout="out('3913809787685967455');" style=""> 646                                                      .put(&quot;alive&quot;, ts + 60 * 60)                                   </span>
<span class="886713691773163342" onmouseenter="enter('886713691773163342');" onmouseout="out('886713691773163342');" style=""> 647                                                      .put(&quot;city&quot;, weatherSpec.location)                            </span>
<span class="4823146304358131104" onmouseenter="enter('4823146304358131104');" onmouseout="out('4823146304358131104');" style=""> 648                                                      .put(&quot;unit&quot;, &quot;c&quot;) // FIXME: do not hardcode                   </span>
<span class="3465794128886265400" onmouseenter="enter('3465794128886265400');" onmouseout="out('3465794128886265400');" style=""> 649                                                      .put(&quot;temp&quot;, weatherSpec.currentTemp - 273)                   </span>
<span class="6957530022753247995" onmouseenter="enter('6957530022753247995');" onmouseout="out('6957530022753247995');" style=""> 650                                                      .put(&quot;high&quot;, weatherSpec.todayMaxTemp - 273)                  </span>
<span class="-7717570350252662201" onmouseenter="enter('-7717570350252662201');" onmouseout="out('-7717570350252662201');" style=""> 651                                                      .put(&quot;low&quot;, weatherSpec.todayMinTemp - 273)                   </span>
<span class="-5985677233453575860" onmouseenter="enter('-5985677233453575860');" onmouseout="out('-5985677233453575860');" style=""> 652                                                      .put(&quot;rain&quot;, 0)                                               </span>
<span class="-2978941176103258929" onmouseenter="enter('-2978941176103258929');" onmouseout="out('-2978941176103258929');" style=""><abbr title=" 653                                                      .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.currentConditionCode, false)) // FIXME do not assume daylight"> 653                                                      .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.currentConðŸ”µ</abbr></span>
<span class="-3427053046266686031" onmouseenter="enter('-3427053046266686031');" onmouseout="out('-3427053046266686031');" style=""> 654                                                      .put(&quot;forecast_day&quot;, forecastDayArray)                        </span>
<span class="-6314376065462434614" onmouseenter="enter('-6314376065462434614');" onmouseout="out('-6314376065462434614');" style=""> 655                                                      .put(&quot;forecast_week&quot;, forecastWeekArray)                      </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 656                                              )                                                                     </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 657                                      )                                                                             </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 658                              )                                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 659                      );                                                                                            </span>
<span  style=""> 660                                                                                                                    </span>
<span class="5488486443475038572" onmouseenter="enter('5488486443475038572');" onmouseout="out('5488486443475038572');" style=""> 661              queueWrite(new JsonPutRequest(forecastResponseObject, this));                                         </span>
<span  style=""> 662                                                                                                                    </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 663          } catch (JSONException e) {                                                                               </span>
<span class="-3518979045088336375" onmouseenter="enter('-3518979045088336375');" onmouseout="out('-3518979045088336375');" style=""> 664              logger.error(&quot;JSON exception: &quot;, e);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 665          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666      }                                                                                                             </span>
<span  style=""> 667                                                                                                                    </span>
<span  style=""> 668                                                                                                                    </span>
<span class="-8903998240903156866" onmouseenter="enter('-8903998240903156866');" onmouseout="out('-8903998240903156866');" style=""> 669      // this was used to enumerate the weather icons :)                                                            </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 670      /*                                                                                                            </span>
<span class="9097322268338941135" onmouseenter="enter('9097322268338941135');" onmouseout="out('9097322268338941135');" style=""> 671      static int i = 0;                                                                                             </span>
<span  style=""> 672                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 673      @Override                                                                                                     </span>
<span class="-1180224994468071186" onmouseenter="enter('-1180224994468071186');" onmouseout="out('-1180224994468071186');" style=""> 674      public void onTestNewFunction() {                                                                             </span>
<span class="-580696616137890311" onmouseenter="enter('-580696616137890311');" onmouseout="out('-580696616137890311');" style=""> 675          long ts = System.currentTimeMillis();                                                                     </span>
<span class="-8981233749074677785" onmouseenter="enter('-8981233749074677785');" onmouseout="out('-8981233749074677785');" style=""> 676          ts /= 1000;                                                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 677          try {                                                                                                     </span>
<span class="-4452014417400702333" onmouseenter="enter('-4452014417400702333');" onmouseout="out('-4452014417400702333');" style=""> 678              JSONObject responseObject = new JSONObject()                                                          </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 679                      .put(&quot;res&quot;, new JSONObject()                                                                  </span>
<span class="-311134376594128902" onmouseenter="enter('-311134376594128902');" onmouseout="out('-311134376594128902');" style=""> 680                              .put(&quot;id&quot;, 0) // seems the id does not matter?                                        </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 681                              .put(&quot;set&quot;, new JSONObject()                                                          </span>
<span class="-7491386685560898919" onmouseenter="enter('-7491386685560898919');" onmouseout="out('-7491386685560898919');" style=""> 682                                      .put(&quot;weatherInfo&quot;, new JSONObject()                                          </span>
<span class="3913809787685967455" onmouseenter="enter('3913809787685967455');" onmouseout="out('3913809787685967455');" style=""> 683                                              .put(&quot;alive&quot;, ts + 60 * 60)                                           </span>
<span class="8812574869889008786" onmouseenter="enter('8812574869889008786');" onmouseout="out('8812574869889008786');" style=""> 684                                              .put(&quot;unit&quot;, &quot;c&quot;)                                                     </span>
<span class="-9027201993479344069" onmouseenter="enter('-9027201993479344069');" onmouseout="out('-9027201993479344069');" style=""> 685                                              .put(&quot;temp&quot;, i)                                                       </span>
<span class="-503000518492904339" onmouseenter="enter('-503000518492904339');" onmouseout="out('-503000518492904339');" style=""> 686                                              .put(&quot;cond_id&quot;, i++)                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 687                                      )                                                                             </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 688                              ));                                                                                   </span>
<span  style=""> 689                                                                                                                    </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 690              queueWrite(new JsonPutRequest(responseObject, this));                                                 </span>
<span  style=""> 691                                                                                                                    </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 692          } catch (JSONException e) {                                                                               </span>
<span class="-255862428648050787" onmouseenter="enter('-255862428648050787');" onmouseout="out('-255862428648050787');" style=""> 693              logger.error(&quot; JSON exception: &quot;, e);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 695      }                                                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 696  */                                                                                                                </span>
<span class="4061760400153145133" onmouseenter="enter('4061760400153145133');" onmouseout="out('4061760400153145133');" style=""> 697      public byte[] getSecretKey() {                                                                                </span>
<span class="877865931329337758" onmouseenter="enter('877865931329337758');" onmouseout="out('877865931329337758');" style=""> 698          byte[] authKeyBytes = new byte[16];                                                                       </span>
<span  style=""> 699                                                                                                                    </span>
<span class="6732301069337237036" onmouseenter="enter('6732301069337237036');" onmouseout="out('6732301069337237036');" style=""><abbr title=" 700          SharedPreferences sharedPrefs = GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddress());"> 700          SharedPreferences sharedPrefs = GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().ðŸ”µ</abbr></span>
<span  style=""> 701                                                                                                                    </span>
<span class="-3395951777279535435" onmouseenter="enter('-3395951777279535435');" onmouseout="out('-3395951777279535435');" style=""> 702          String authKey = sharedPrefs.getString(&quot;authkey&quot;, null);                                                  </span>
<span class="-7368286337752989387" onmouseenter="enter('-7368286337752989387');" onmouseout="out('-7368286337752989387');" style=""> 703          if (authKey != null &amp;&amp; !authKey.isEmpty()) {                                                              </span>
<span class="-7318628780836353920" onmouseenter="enter('-7318628780836353920');" onmouseout="out('-7318628780836353920');" style=""> 704              byte[] srcBytes = authKey.trim().getBytes();                                                          </span>
<span class="-7029558868717651202" onmouseenter="enter('-7029558868717651202');" onmouseout="out('-7029558868717651202');" style=""> 705              if (authKey.length() == 34 &amp;&amp; authKey.startsWith(&quot;0x&quot;)) {                                             </span>
<span class="3552614168594468794" onmouseenter="enter('3552614168594468794');" onmouseout="out('3552614168594468794');" style=""> 706                  srcBytes = GB.hexStringToByteArray(authKey.substring(2));                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 707              }                                                                                                     </span>
<span class="6598760317559003341" onmouseenter="enter('6598760317559003341');" onmouseout="out('6598760317559003341');" style=""> 708              System.arraycopy(srcBytes, 0, authKeyBytes, 0, Math.min(srcBytes.length, 16));                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 709          }                                                                                                         </span>
<span  style=""> 710                                                                                                                    </span>
<span class="340030267486824060" onmouseenter="enter('340030267486824060');" onmouseout="out('340030267486824060');" style=""> 711          return authKeyBytes;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 712      }                                                                                                             </span>
<span  style=""> 713                                                                                                                    </span>
<span class="1797454318126944117" onmouseenter="enter('1797454318126944117');" onmouseout="out('1797454318126944117');" style=""> 714      public void setPhoneRandomNumber(byte[] phoneRandomNumber) {                                                  </span>
<span class="-1045014803983093080" onmouseenter="enter('-1045014803983093080');" onmouseout="out('-1045014803983093080');" style=""> 715          this.phoneRandomNumber = phoneRandomNumber;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 716      }                                                                                                             </span>
<span  style=""> 717                                                                                                                    </span>
<span class="6353599412516657012" onmouseenter="enter('6353599412516657012');" onmouseout="out('6353599412516657012');" style=""> 718      public byte[] getPhoneRandomNumber() {                                                                        </span>
<span class="-8473936821502081479" onmouseenter="enter('-8473936821502081479');" onmouseout="out('-8473936821502081479');" style=""> 719          return phoneRandomNumber;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 720      }                                                                                                             </span>
<span  style=""> 721                                                                                                                    </span>
<span class="8524954629356124134" onmouseenter="enter('8524954629356124134');" onmouseout="out('8524954629356124134');" style=""> 722      public void setWatchRandomNumber(byte[] watchRandomNumber) {                                                  </span>
<span class="-8554456578054756330" onmouseenter="enter('-8554456578054756330');" onmouseout="out('-8554456578054756330');" style=""> 723          this.watchRandomNumber = watchRandomNumber;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724      }                                                                                                             </span>
<span  style=""> 725                                                                                                                    </span>
<span class="-817141622160847580" onmouseenter="enter('-817141622160847580');" onmouseout="out('-817141622160847580');" style=""> 726      public byte[] getWatchRandomNumber() {                                                                        </span>
<span class="4512956887887166379" onmouseenter="enter('4512956887887166379');" onmouseout="out('4512956887887166379');" style=""> 727          return watchRandomNumber;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 728      }                                                                                                             </span>
<span  style=""> 729                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 730      @Override                                                                                                     </span>
<span class="-8332902696773003591" onmouseenter="enter('-8332902696773003591');" onmouseout="out('-8332902696773003591');" style=""> 731      public void overwriteButtons(String jsonConfigString) {                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 732          try {                                                                                                     </span>
<span class="-5757883755283420088" onmouseenter="enter('-5757883755283420088');" onmouseout="out('-5757883755283420088');" style=""> 733              JSONArray jsonArray = new JSONArray(                                                                  </span>
<span class="-5162550843991564685" onmouseenter="enter('-5162550843991564685');" onmouseout="out('-5162550843991564685');" style=""> 734                      GBApplication.getPrefs().getString(HRConfigActivity.CONFIG_KEY_Q_ACTIONS, &quot;[]&quot;)               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 735              );                                                                                                    </span>
<span class="-3670193080643996757" onmouseenter="enter('-3670193080643996757');" onmouseout="out('-3670193080643996757');" style=""> 736              String[] menuItems = new String[jsonArray.length()];                                                  </span>
<span class="3800396328797868230" onmouseenter="enter('3800396328797868230');" onmouseout="out('3800396328797868230');" style=""> 737              for (int i = 0; i &lt; jsonArray.length(); i++) menuItems[i] = jsonArray.getString(i);                   </span>
<span  style=""> 738                                                                                                                    </span>
<span class="-8974533950525390112" onmouseenter="enter('-8974533950525390112');" onmouseout="out('-8974533950525390112');" style=""> 739              SharedPreferences prefs = getDeviceSpecificPreferences();                                             </span>
<span class="3731441667100257289" onmouseenter="enter('3731441667100257289');" onmouseout="out('3731441667100257289');" style=""><abbr title=" 740              String upperButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_1_FUNCTION, &quot;weatherApp&quot;);"> 740              String upperButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_1_FUNCTION, &quot;weatherðŸ”µ</abbr></span>
<span class="8778701870293152792" onmouseenter="enter('8778701870293152792');" onmouseout="out('8778701870293152792');" style=""><abbr title=" 741              String middleButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_2_FUNCTION, &quot;commuteApp&quot;);"> 741              String middleButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_2_FUNCTION, &quot;commutðŸ”µ</abbr></span>
<span class="-9179810663962091339" onmouseenter="enter('-9179810663962091339');" onmouseout="out('-9179810663962091339');" style=""><abbr title=" 742              String lowerButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_3_FUNCTION, &quot;musicApp&quot;);"> 742              String lowerButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_3_FUNCTION, &quot;musicApðŸ”µ</abbr></span>
<span  style=""> 743                                                                                                                    </span>
<span class="-2546877682423996320" onmouseenter="enter('-2546877682423996320');" onmouseout="out('-2546877682423996320');" style=""> 744              queueWrite(new ButtonConfigurationPutRequest(                                                         </span>
<span class="959305012337743007" onmouseenter="enter('959305012337743007');" onmouseout="out('959305012337743007');" style=""> 745                      menuItems,                                                                                    </span>
<span class="-2429855445172031576" onmouseenter="enter('-2429855445172031576');" onmouseout="out('-2429855445172031576');" style=""> 746                      upperButtonApp,                                                                               </span>
<span class="7250962454256273524" onmouseenter="enter('7250962454256273524');" onmouseout="out('7250962454256273524');" style=""> 747                      middleButtonApp,                                                                              </span>
<span class="3869959890859912879" onmouseenter="enter('3869959890859912879');" onmouseout="out('3869959890859912879');" style=""> 748                      lowerButtonApp,                                                                               </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 749                      this                                                                                          </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 750              ));                                                                                                   </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 751          } catch (JSONException e) {                                                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 752              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 753          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 754      }                                                                                                             </span>
<span  style=""> 755                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 756      @Override                                                                                                     </span>
<span class="349159621018699769" onmouseenter="enter('349159621018699769');" onmouseout="out('349159621018699769');" style=""> 757      public void onSendConfiguration(String config) {                                                              </span>
<span class="-5681424438451116078" onmouseenter="enter('-5681424438451116078');" onmouseout="out('-5681424438451116078');" style=""> 758          switch (config) {                                                                                         </span>
<span class="-3013237703294184776" onmouseenter="enter('-3013237703294184776');" onmouseout="out('-3013237703294184776');" style=""> 759              case DeviceSettingsPreferenceConst.PREF_BUTTON_1_FUNCTION:                                            </span>
<span class="4315270877947230307" onmouseenter="enter('4315270877947230307');" onmouseout="out('4315270877947230307');" style=""> 760              case DeviceSettingsPreferenceConst.PREF_BUTTON_2_FUNCTION:                                            </span>
<span class="-6016648312979442964" onmouseenter="enter('-6016648312979442964');" onmouseout="out('-6016648312979442964');" style=""> 761              case DeviceSettingsPreferenceConst.PREF_BUTTON_3_FUNCTION:                                            </span>
<span class="-7476048809216327685" onmouseenter="enter('-7476048809216327685');" onmouseout="out('-7476048809216327685');" style=""> 762                  overwriteButtons(null);                                                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 763                  break;                                                                                            </span>
<span class="4621265622900955004" onmouseenter="enter('4621265622900955004');" onmouseout="out('4621265622900955004');" style=""> 764              case DeviceSettingsPreferenceConst.PREF_VIBRATION_STRENGH_PERCENTAGE:                                 </span>
<span class="-4331994456315640395" onmouseenter="enter('-4331994456315640395');" onmouseout="out('-4331994456315640395');" style=""> 765                  setVibrationStrength();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 766          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 767      }                                                                                                             </span>
<span  style=""> 768                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 769      @Override                                                                                                     </span>
<span class="-1745999502816791714" onmouseenter="enter('-1745999502816791714');" onmouseout="out('-1745999502816791714');" style=""> 770      public void handleHeartRateCharacteristic(BluetoothGattCharacteristic characteristic) {                       </span>
<span class="644393070755783970" onmouseenter="enter('644393070755783970');" onmouseout="out('644393070755783970');" style=""> 771          super.handleHeartRateCharacteristic(characteristic);                                                      </span>
<span  style=""> 772                                                                                                                    </span>
<span class="-4350509998999229188" onmouseenter="enter('-4350509998999229188');" onmouseout="out('-4350509998999229188');" style=""> 773          byte[] value = characteristic.getValue();                                                                 </span>
<span  style=""> 774                                                                                                                    </span>
<span class="3002516447616481759" onmouseenter="enter('3002516447616481759');" onmouseout="out('3002516447616481759');" style=""> 775          int heartRate = value[1];                                                                                 </span>
<span  style=""> 776                                                                                                                    </span>
<span class="-3503506213363643375" onmouseenter="enter('-3503506213363643375');" onmouseout="out('-3503506213363643375');" style=""> 777          logger.debug(&quot;heart rate: &quot; + heartRate);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778      }                                                                                                             </span>
<span  style=""> 779                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 780      @Override                                                                                                     </span>
<span class="6377473851875601996" onmouseenter="enter('6377473851875601996');" onmouseout="out('6377473851875601996');" style=""> 781      protected void handleBackgroundCharacteristic(BluetoothGattCharacteristic characteristic) {                   </span>
<span class="-2825981250293151244" onmouseenter="enter('-2825981250293151244');" onmouseout="out('-2825981250293151244');" style=""> 782          super.handleBackgroundCharacteristic(characteristic);                                                     </span>
<span  style=""> 783                                                                                                                    </span>
<span class="-4350509998999229188" onmouseenter="enter('-4350509998999229188');" onmouseout="out('-4350509998999229188');" style=""> 784          byte[] value = characteristic.getValue();                                                                 </span>
<span  style=""> 785                                                                                                                    </span>
<span class="-8910138668401756259" onmouseenter="enter('-8910138668401756259');" onmouseout="out('-8910138668401756259');" style=""> 786          byte requestType = value[1];                                                                              </span>
<span  style=""> 787                                                                                                                    </span>
<span class="-188939088446447101" onmouseenter="enter('-188939088446447101');" onmouseout="out('-188939088446447101');" style=""> 788          if(requestType == (byte) 0x04){                                                                           </span>
<span class="-7559460541575142851" onmouseenter="enter('-7559460541575142851');" onmouseout="out('-7559460541575142851');" style=""> 789              handleCallRequest(value);                                                                             </span>
<span class="8941437976865019066" onmouseenter="enter('8941437976865019066');" onmouseout="out('8941437976865019066');" style=""> 790          }else if (requestType == (byte) 0x05) {                                                                   </span>
<span class="-6049325109739304315" onmouseenter="enter('-6049325109739304315');" onmouseout="out('-6049325109739304315');" style=""> 791              handleMusicRequest(value);                                                                            </span>
<span class="-1129186254434475226" onmouseenter="enter('-1129186254434475226');" onmouseout="out('-1129186254434475226');" style=""> 792          } else if (requestType == (byte) 0x01) {                                                                  </span>
<span class="5556569467739549651" onmouseenter="enter('5556569467739549651');" onmouseout="out('5556569467739549651');" style=""> 793              int eventId = value[2];                                                                               </span>
<span class="4584038208845194803" onmouseenter="enter('4584038208845194803');" onmouseout="out('4584038208845194803');" style=""> 794              logger.info(&quot;got event id &quot; + eventId);                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 795              try {                                                                                                 </span>
<span class="2511008795236813092" onmouseenter="enter('2511008795236813092');" onmouseout="out('2511008795236813092');" style=""> 796                  String jsonString = new String(value, 3, value.length - 3);                                       </span>
<span class="-5055085421008485579" onmouseenter="enter('-5055085421008485579');" onmouseout="out('-5055085421008485579');" style=""> 797                  logger.info(jsonString);                                                                          </span>
<span class="7978684515011278150" onmouseenter="enter('7978684515011278150');" onmouseout="out('7978684515011278150');" style=""> 798                  JSONObject requestJson = new JSONObject(jsonString);                                              </span>
<span  style=""> 799                                                                                                                    </span>
<span class="-2320957157152693274" onmouseenter="enter('-2320957157152693274');" onmouseout="out('-2320957157152693274');" style=""> 800                  JSONObject request = requestJson.getJSONObject(&quot;req&quot;);                                            </span>
<span class="-4724867393653322739" onmouseenter="enter('-4724867393653322739');" onmouseout="out('-4724867393653322739');" style=""> 801                  int requestId = request.getInt(&quot;id&quot;);                                                             </span>
<span  style=""> 802                                                                                                                    </span>
<span class="-9049634342561224124" onmouseenter="enter('-9049634342561224124');" onmouseout="out('-9049634342561224124');" style=""> 803                  if (request.has(&quot;ringMyPhone&quot;)) {                                                                 </span>
<span class="-8947281113981412895" onmouseenter="enter('-8947281113981412895');" onmouseout="out('-8947281113981412895');" style=""> 804                      String action = request.getJSONObject(&quot;ringMyPhone&quot;).getString(&quot;action&quot;);                     </span>
<span class="2672973027305420404" onmouseenter="enter('2672973027305420404');" onmouseout="out('2672973027305420404');" style=""> 805                      logger.info(&quot;got ringMyPhone request; &quot; + action);                                            </span>
<span class="-5388490694046828121" onmouseenter="enter('-5388490694046828121');" onmouseout="out('-5388490694046828121');" style=""> 806                      GBDeviceEventFindPhone findPhoneEvent = new GBDeviceEventFindPhone();                         </span>
<span  style=""> 807                                                                                                                    </span>
<span class="-4452014417400702333" onmouseenter="enter('-4452014417400702333');" onmouseout="out('-4452014417400702333');" style=""> 808                      JSONObject responseObject = new JSONObject()                                                  </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 809                              .put(&quot;res&quot;, new JSONObject()                                                          </span>
<span class="1179326437824087972" onmouseenter="enter('1179326437824087972');" onmouseout="out('1179326437824087972');" style=""> 810                                      .put(&quot;id&quot;, requestId)                                                         </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 811                                      .put(&quot;set&quot;, new JSONObject()                                                  </span>
<span class="-1885979276882630426" onmouseenter="enter('-1885979276882630426');" onmouseout="out('-1885979276882630426');" style=""> 812                                              .put(&quot;ringMyPhone&quot;, new JSONObject()                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 813                                              )                                                                     </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 814                                      )                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 815                              );                                                                                    </span>
<span  style=""> 816                                                                                                                    </span>
<span class="8447204792056966026" onmouseenter="enter('8447204792056966026');" onmouseout="out('8447204792056966026');" style=""> 817                      if (&quot;on&quot;.equals(action)) {                                                                    </span>
<span class="-2212046129077350542" onmouseenter="enter('-2212046129077350542');" onmouseout="out('-2212046129077350542');" style=""> 818                          findPhoneEvent.event = GBDeviceEventFindPhone.Event.START;                                </span>
<span class="1008493374584433440" onmouseenter="enter('1008493374584433440');" onmouseout="out('1008493374584433440');" style=""> 819                          getDeviceSupport().evaluateGBDeviceEvent(findPhoneEvent);                                 </span>
<span class="7519888082405137596" onmouseenter="enter('7519888082405137596');" onmouseout="out('7519888082405137596');" style=""> 820                          responseObject                                                                            </span>
<span class="9073084076350179656" onmouseenter="enter('9073084076350179656');" onmouseout="out('9073084076350179656');" style=""> 821                                  .getJSONObject(&quot;res&quot;)                                                             </span>
<span class="8250331190708228233" onmouseenter="enter('8250331190708228233');" onmouseout="out('8250331190708228233');" style=""> 822                                  .getJSONObject(&quot;set&quot;)                                                             </span>
<span class="-5085635855523546299" onmouseenter="enter('-5085635855523546299');" onmouseout="out('-5085635855523546299');" style=""> 823                                  .getJSONObject(&quot;ringMyPhone&quot;)                                                     </span>
<span class="1178745681736221021" onmouseenter="enter('1178745681736221021');" onmouseout="out('1178745681736221021');" style=""> 824                                  .put(&quot;result&quot;, &quot;on&quot;);                                                             </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 825                          queueWrite(new JsonPutRequest(responseObject, this));                                     </span>
<span class="1879749671025083715" onmouseenter="enter('1879749671025083715');" onmouseout="out('1879749671025083715');" style=""> 826                      } else if (&quot;off&quot;.equals(action)) {                                                            </span>
<span class="-7600947716940752063" onmouseenter="enter('-7600947716940752063');" onmouseout="out('-7600947716940752063');" style=""> 827                          findPhoneEvent.event = GBDeviceEventFindPhone.Event.STOP;                                 </span>
<span class="1008493374584433440" onmouseenter="enter('1008493374584433440');" onmouseout="out('1008493374584433440');" style=""> 828                          getDeviceSupport().evaluateGBDeviceEvent(findPhoneEvent);                                 </span>
<span class="7519888082405137596" onmouseenter="enter('7519888082405137596');" onmouseout="out('7519888082405137596');" style=""> 829                          responseObject                                                                            </span>
<span class="9073084076350179656" onmouseenter="enter('9073084076350179656');" onmouseout="out('9073084076350179656');" style=""> 830                                  .getJSONObject(&quot;res&quot;)                                                             </span>
<span class="8250331190708228233" onmouseenter="enter('8250331190708228233');" onmouseout="out('8250331190708228233');" style=""> 831                                  .getJSONObject(&quot;set&quot;)                                                             </span>
<span class="-5085635855523546299" onmouseenter="enter('-5085635855523546299');" onmouseout="out('-5085635855523546299');" style=""> 832                                  .getJSONObject(&quot;ringMyPhone&quot;)                                                     </span>
<span class="211329696159530084" onmouseenter="enter('211329696159530084');" onmouseout="out('211329696159530084');" style=""> 833                                  .put(&quot;result&quot;, &quot;off&quot;);                                                            </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 834                          queueWrite(new JsonPutRequest(responseObject, this));                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 835                      }                                                                                             </span>
<span class="-7323615196530492579" onmouseenter="enter('-7323615196530492579');" onmouseout="out('-7323615196530492579');" style=""> 836                  } else if (request.has(&quot;weatherInfo&quot;) || request.has(&quot;weatherApp._.config.locations&quot;)) {          </span>
<span class="85506892621979159" onmouseenter="enter('85506892621979159');" onmouseout="out('85506892621979159');" style=""> 837                      logger.info(&quot;Got weatherInfo request&quot;);                                                       </span>
<span class="6306353349066792310" onmouseenter="enter('6306353349066792310');" onmouseout="out('6306353349066792310');" style=""> 838                      WeatherSpec weatherSpec = Weather.getInstance().getWeatherSpec();                             </span>
<span class="-6517897774017589507" onmouseenter="enter('-6517897774017589507');" onmouseout="out('-6517897774017589507');" style=""> 839                      if (weatherSpec != null) {                                                                    </span>
<span class="850959570716159748" onmouseenter="enter('850959570716159748');" onmouseout="out('850959570716159748');" style=""> 840                          onSendWeather(weatherSpec);                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 841                      } else {                                                                                      </span>
<span class="-4814341531313102419" onmouseenter="enter('-4814341531313102419');" onmouseout="out('-4814341531313102419');" style=""> 842                          logger.info(&quot;no weather data available  - ignoring request&quot;);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 843                      }                                                                                             </span>
<span class="-3372250782701972691" onmouseenter="enter('-3372250782701972691');" onmouseout="out('-3372250782701972691');" style=""> 844                  } else if (request.has(&quot;commuteApp._.config.commute_info&quot;)) {                                     </span>
<span class="-7484039887953392259" onmouseenter="enter('-7484039887953392259');" onmouseout="out('-7484039887953392259');" style=""> 845                      String action = request.getJSONObject(&quot;commuteApp._.config.commute_info&quot;)                     </span>
<span class="-2601365183494494605" onmouseenter="enter('-2601365183494494605');" onmouseout="out('-2601365183494494605');" style=""> 846                              .getString(&quot;dest&quot;);                                                                   </span>
<span  style=""> 847                                                                                                                    </span>
<span class="8677829822000511176" onmouseenter="enter('8677829822000511176');" onmouseout="out('8677829822000511176');" style=""> 848                      String startStop = request.getJSONObject(&quot;commuteApp._.config.commute_info&quot;)                  </span>
<span class="4504014461373376475" onmouseenter="enter('4504014461373376475');" onmouseout="out('4504014461373376475');" style=""> 849                              .getString(&quot;action&quot;);                                                                 </span>
<span  style=""> 850                                                                                                                    </span>
<span class="-187304836507611230" onmouseenter="enter('-187304836507611230');" onmouseout="out('-187304836507611230');" style=""> 851                      if (startStop.equals(&quot;stop&quot;)) {                                                               </span>
<span class="3122353555208900571" onmouseenter="enter('3122353555208900571');" onmouseout="out('3122353555208900571');" style=""> 852                          // overwriteButtons(null);                                                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 853                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 854                      }                                                                                             </span>
<span  style=""> 855                                                                                                                    </span>
<span class="1150832081372187083" onmouseenter="enter('1150832081372187083');" onmouseout="out('1150832081372187083');" style=""> 856                      queueWrite(new SetCommuteMenuMessage(&quot;Anfrage wird weitergeleitet...&quot;, false, this));         </span>
<span  style=""> 857                                                                                                                    </span>
<span class="5917993708031460775" onmouseenter="enter('5917993708031460775');" onmouseout="out('5917993708031460775');" style=""> 858                      Intent menuIntent = new Intent(QHybridSupport.QHYBRID_EVENT_COMMUTE_MENU);                    </span>
<span class="-7593836382272947716" onmouseenter="enter('-7593836382272947716');" onmouseout="out('-7593836382272947716');" style=""> 859                      menuIntent.putExtra(&quot;EXTRA_ACTION&quot;, action);                                                  </span>
<span class="-3894772479235782461" onmouseenter="enter('-3894772479235782461');" onmouseout="out('-3894772479235782461');" style=""> 860                      getContext().sendBroadcast(menuIntent);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 861                  } else {                                                                                          </span>
<span class="5137598666970820784" onmouseenter="enter('5137598666970820784');" onmouseout="out('5137598666970820784');" style=""> 862                      logger.warn(&quot;Unhandled request from watch: &quot; + requestJson.toString());                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 863                  }                                                                                                 </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 864              } catch (JSONException e) {                                                                           </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 865                  e.printStackTrace();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 866              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 867          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 868      }                                                                                                             </span>
<span  style=""> 869                                                                                                                    </span>
<span class="-6400233286061743273" onmouseenter="enter('-6400233286061743273');" onmouseout="out('-6400233286061743273');" style=""> 870      private void handleCallRequest(byte[] value) {                                                                </span>
<span class="-3590644139230548939" onmouseenter="enter('-3590644139230548939');" onmouseout="out('-3590644139230548939');" style=""> 871          boolean acceptCall = value[7] == (byte) 0x00;                                                             </span>
<span class="4049879043820680121" onmouseenter="enter('4049879043820680121');" onmouseout="out('4049879043820680121');" style=""> 872          queueWrite(new PlayCallNotificationRequest(&quot;&quot;, false, this));                                             </span>
<span  style=""> 873                                                                                                                    </span>
<span class="6665458041909146094" onmouseenter="enter('6665458041909146094');" onmouseout="out('6665458041909146094');" style=""> 874          GBDeviceEventCallControl callControlEvent = new GBDeviceEventCallControl();                               </span>
<span class="3689026460844638555" onmouseenter="enter('3689026460844638555');" onmouseout="out('3689026460844638555');" style=""><abbr title=" 875          callControlEvent.event = acceptCall ? GBDeviceEventCallControl.Event.START : GBDeviceEventCallControl.Event.REJECT;"> 875          callControlEvent.event = acceptCall ? GBDeviceEventCallControl.Event.START : GBDeviceEventCallControl.EvenðŸ”µ</abbr></span>
<span  style=""> 876                                                                                                                    </span>
<span class="4738702385903726677" onmouseenter="enter('4738702385903726677');" onmouseout="out('4738702385903726677');" style=""> 877          getDeviceSupport().evaluateGBDeviceEvent(callControlEvent);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 878      }                                                                                                             </span>
<span  style=""> 879                                                                                                                    </span>
<span class="8416553974703547913" onmouseenter="enter('8416553974703547913');" onmouseout="out('8416553974703547913');" style=""> 880      private void handleMusicRequest(byte[] value) {                                                               </span>
<span class="-7264442020313207444" onmouseenter="enter('-7264442020313207444');" onmouseout="out('-7264442020313207444');" style=""> 881          byte command = value[3];                                                                                  </span>
<span class="439297978283151496" onmouseenter="enter('439297978283151496');" onmouseout="out('439297978283151496');" style=""> 882          logger.info(&quot;got music command: &quot; + command);                                                             </span>
<span class="-1813511864680047347" onmouseenter="enter('-1813511864680047347');" onmouseout="out('-1813511864680047347');" style=""> 883          MUSIC_WATCH_REQUEST request = MUSIC_WATCH_REQUEST.fromCommandByte(command);                               </span>
<span  style=""> 884                                                                                                                    </span>
<span class="-5683743334008418698" onmouseenter="enter('-5683743334008418698');" onmouseout="out('-5683743334008418698');" style=""> 885          GBDeviceEventMusicControl deviceEventMusicControl = new GBDeviceEventMusicControl();                      </span>
<span class="-3093471053493654809" onmouseenter="enter('-3093471053493654809');" onmouseout="out('-3093471053493654809');" style=""> 886          deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.PLAY;                                     </span>
<span  style=""> 887                                                                                                                    </span>
<span class="-5367969794814104253" onmouseenter="enter('-5367969794814104253');" onmouseout="out('-5367969794814104253');" style=""> 888          // TODO add skipping/seeking                                                                              </span>
<span  style=""> 889                                                                                                                    </span>
<span class="-1476594108120808605" onmouseenter="enter('-1476594108120808605');" onmouseout="out('-1476594108120808605');" style=""> 890          switch (request) {                                                                                        </span>
<span class="-7604808754482491529" onmouseenter="enter('-7604808754482491529');" onmouseout="out('-7604808754482491529');" style=""> 891              case MUSIC_REQUEST_PLAY_PAUSE: {                                                                      </span>
<span class="6628176114625634916" onmouseenter="enter('6628176114625634916');" onmouseout="out('6628176114625634916');" style=""> 892                  queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_PLAY_PAUSE));                </span>
<span class="-7292571951332838856" onmouseenter="enter('-7292571951332838856');" onmouseout="out('-7292571951332838856');" style=""> 893                  deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.PLAYPAUSE;                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 894                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 895              }                                                                                                     </span>
<span class="-3513943256990950658" onmouseenter="enter('-3513943256990950658');" onmouseout="out('-3513943256990950658');" style=""> 896              case MUSIC_REQUEST_NEXT: {                                                                            </span>
<span class="-2914236159900871664" onmouseenter="enter('-2914236159900871664');" onmouseout="out('-2914236159900871664');" style=""> 897                  queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_NEXT));                      </span>
<span class="7432071170862747108" onmouseenter="enter('7432071170862747108');" onmouseout="out('7432071170862747108');" style=""> 898                  deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.NEXT;                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 899                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 900              }                                                                                                     </span>
<span class="-320503160388671458" onmouseenter="enter('-320503160388671458');" onmouseout="out('-320503160388671458');" style=""> 901              case MUSIC_REQUEST_PREVIOUS: {                                                                        </span>
<span class="6742500320012674264" onmouseenter="enter('6742500320012674264');" onmouseout="out('6742500320012674264');" style=""> 902                  queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_PREVIOUS));                  </span>
<span class="-101590717290727599" onmouseenter="enter('-101590717290727599');" onmouseout="out('-101590717290727599');" style=""> 903                  deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.PREVIOUS;                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 904                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 905              }                                                                                                     </span>
<span class="5859425638057110790" onmouseenter="enter('5859425638057110790');" onmouseout="out('5859425638057110790');" style=""> 906              case MUSIC_REQUEST_LOUDER: {                                                                          </span>
<span class="-3857602001706076214" onmouseenter="enter('-3857602001706076214');" onmouseout="out('-3857602001706076214');" style=""> 907                  queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_LOUDER));                    </span>
<span class="-6752597915337654134" onmouseenter="enter('-6752597915337654134');" onmouseout="out('-6752597915337654134');" style=""> 908                  deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.VOLUMEUP;                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 909                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 910              }                                                                                                     </span>
<span class="3750638360823897863" onmouseenter="enter('3750638360823897863');" onmouseout="out('3750638360823897863');" style=""> 911              case MUSIC_REQUEST_QUITER: {                                                                          </span>
<span class="2129420423363786169" onmouseenter="enter('2129420423363786169');" onmouseout="out('2129420423363786169');" style=""> 912                  queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_QUITER));                    </span>
<span class="-9110787157641698322" onmouseenter="enter('-9110787157641698322');" onmouseout="out('-9110787157641698322');" style=""> 913                  deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.VOLUMEDOWN;                       </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 914                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 915              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 916          }                                                                                                         </span>
<span  style=""> 917                                                                                                                    </span>
<span class="-3574719939637901034" onmouseenter="enter('-3574719939637901034');" onmouseout="out('-3574719939637901034');" style=""> 918          getDeviceSupport().evaluateGBDeviceEvent(deviceEventMusicControl);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 919      }                                                                                                             </span>
<span  style=""> 920                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 921      @Override                                                                                                     </span>
<span class="-3634467212876653578" onmouseenter="enter('-3634467212876653578');" onmouseout="out('-3634467212876653578');" style=""> 922      public void setCommuteMenuMessage(String message, boolean finished) {                                         </span>
<span class="-2545716908437572756" onmouseenter="enter('-2545716908437572756');" onmouseout="out('-2545716908437572756');" style=""> 923          queueWrite(new SetCommuteMenuMessage(message, finished, this));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 924      }                                                                                                             </span>
<span  style=""> 925                                                                                                                    </span>
<span class="-8749192936898481998" onmouseenter="enter('-8749192936898481998');" onmouseout="out('-8749192936898481998');" style=""> 926      public byte getJsonIndex() {                                                                                  </span>
<span class="-7259315456684755672" onmouseenter="enter('-7259315456684755672');" onmouseout="out('-7259315456684755672');" style=""> 927          return jsonIndex++;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 928      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 929  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="-2997913422227863975" onmouseenter="enter('-2997913422227863975');" onmouseout="out('-2997913422227863975');" style="">   1  package nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.adapter.fossil_hr;                           </span>
<span  style="">   2                                                                                                                    </span>
<span class="4736969144974683041" onmouseenter="enter('4736969144974683041');" onmouseout="out('4736969144974683041');" style="">   3  import android.bluetooth.BluetoothGattCharacteristic;                                                             </span>

<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   4  import android.content.Intent;                                                                                    </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   5  import android.content.SharedPreferences;                                                                         </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">   6  import android.graphics.Bitmap;                                                                                   </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">   7  import android.graphics.BitmapFactory;                                                                            </span>
<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">   8  import android.graphics.Canvas;                                                                                   </span>
<span class="-5868658801447575011" onmouseenter="enter('-5868658801447575011');" onmouseout="out('-5868658801447575011');" style="">   9  import android.graphics.Color;                                                                                    </span>
<span class="-1586527322890291073" onmouseenter="enter('-1586527322890291073');" onmouseout="out('-1586527322890291073');" style="">  10  import android.graphics.Paint;                                                                                    </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  11  import android.os.Build;                                                                                          </span>

<span  style="">  12                                                                                                                    </span>
<span class="-9193129351684262878" onmouseenter="enter('-9193129351684262878');" onmouseout="out('-9193129351684262878');" style="">  13  import org.json.JSONArray;                                                                                        </span>
<span class="-8573375701834280359" onmouseenter="enter('-8573375701834280359');" onmouseout="out('-8573375701834280359');" style="">  14  import org.json.JSONException;                                                                                    </span>
<span class="7232075261178918144" onmouseenter="enter('7232075261178918144');" onmouseout="out('7232075261178918144');" style="">  15  import org.json.JSONObject;                                                                                       </span>
<span  style="">  16                                                                                                                    </span>
<span class="-3926401431737521278" onmouseenter="enter('-3926401431737521278');" onmouseout="out('-3926401431737521278');" style="">  17  import java.io.File;                                                                                              </span>



<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  18  import java.io.IOException;                                                                                       </span>
<span class="-351121020327003485" onmouseenter="enter('-351121020327003485');" onmouseout="out('-351121020327003485');" style="">  19  import java.nio.BufferOverflowException;                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  20  import java.util.ArrayList;                                                                                       </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  21  import java.util.Calendar;                                                                                        </span>
<span class="-4685965902094386510" onmouseenter="enter('-4685965902094386510');" onmouseout="out('-4685965902094386510');" style="">  22  import java.util.GregorianCalendar;                                                                               </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  23  import java.util.HashMap;                                                                                         </span>
<span class="7112180775387943933" onmouseenter="enter('7112180775387943933');" onmouseout="out('7112180775387943933');" style="">  24  import java.util.Iterator;                                                                                        </span>
<span class="-3682115440535733483" onmouseenter="enter('-3682115440535733483');" onmouseout="out('-3682115440535733483');" style="">  25  import java.util.TimeZone;                                                                                        </span>
<span class="2390503830490498598" onmouseenter="enter('2390503830490498598');" onmouseout="out('2390503830490498598');" style="">  26  import java.util.UUID;                                                                                            </span>
<span  style="">  27                                                                                                                    </span>
<span class="-8113221927992302576" onmouseenter="enter('-8113221927992302576');" onmouseout="out('-8113221927992302576');" style="">  28  import nodomain.freeyourgadget.gadgetbridge.GBApplication;                                                        </span>

<span class="-141107564105590930" onmouseenter="enter('-141107564105590930');" onmouseout="out('-141107564105590930');" style="">  29  import nodomain.freeyourgadget.gadgetbridge.activities.devicesettings.DeviceSettingsPreferenceConst;              </span>
<span class="7017557905176594961" onmouseenter="enter('7017557905176594961');" onmouseout="out('7017557905176594961');" style="">  30  import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventCallControl;                                </span>
<span class="6368471362458763033" onmouseenter="enter('6368471362458763033');" onmouseout="out('6368471362458763033');" style="">  31  import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventFindPhone;                                  </span>
<span class="4012861689788039008" onmouseenter="enter('4012861689788039008');" onmouseout="out('4012861689788039008');" style="">  32  import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventMusicControl;                               </span>
<span class="3654131406467691963" onmouseenter="enter('3654131406467691963');" onmouseout="out('3654131406467691963');" style="">  33  import nodomain.freeyourgadget.gadgetbridge.devices.qhybrid.HRConfigActivity;                                     </span>
<span class="-7487037549552160195" onmouseenter="enter('-7487037549552160195');" onmouseout="out('-7487037549552160195');" style="">  34  import nodomain.freeyourgadget.gadgetbridge.devices.qhybrid.NotificationHRConfiguration;                          </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  35  import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                                        </span>
<span class="-9074570965792323186" onmouseenter="enter('-9074570965792323186');" onmouseout="out('-9074570965792323186');" style="">  36  import nodomain.freeyourgadget.gadgetbridge.model.CallSpec;                                                       </span>
<span class="-4068239021838445503" onmouseenter="enter('-4068239021838445503');" onmouseout="out('-4068239021838445503');" style="">  37  import nodomain.freeyourgadget.gadgetbridge.model.MusicSpec;                                                      </span>
<span class="7536481506851862405" onmouseenter="enter('7536481506851862405');" onmouseout="out('7536481506851862405');" style="">  38  import nodomain.freeyourgadget.gadgetbridge.model.MusicStateSpec;                                                 </span>
<span class="8239808916005009388" onmouseenter="enter('8239808916005009388');" onmouseout="out('8239808916005009388');" style="">  39  import nodomain.freeyourgadget.gadgetbridge.model.NotificationSpec;                                               </span>
<span class="-1384004108526222390" onmouseenter="enter('-1384004108526222390');" onmouseout="out('-1384004108526222390');" style="">  40  import nodomain.freeyourgadget.gadgetbridge.model.Weather;                                                        </span>
<span class="-40839721936664146" onmouseenter="enter('-40839721936664146');" onmouseout="out('-40839721936664146');" style="">  41  import nodomain.freeyourgadget.gadgetbridge.model.WeatherSpec;                                                    </span>
<span class="3410519392510510669" onmouseenter="enter('3410519392510510669');" onmouseout="out('3410519392510510669');" style="">  42  import nodomain.freeyourgadget.gadgetbridge.service.btle.TransactionBuilder;                                      </span>
<span class="4332661620965164672" onmouseenter="enter('4332661620965164672');" onmouseout="out('4332661620965164672');" style="">  43  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.QHybridSupport;                               </span>
<span class="4386715749828831010" onmouseenter="enter('4386715749828831010');" onmouseout="out('4386715749828831010');" style="">  44  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.adapter.fossil.FossilWatchAdapter;            </span>
<span class="6910520238976776146" onmouseenter="enter('6910520238976776146');" onmouseout="out('6910520238976776146');" style="">  45  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.RequestMtuRequest;            </span>
<span class="5089968700906553867" onmouseenter="enter('5089968700906553867');" onmouseout="out('5089968700906553867');" style="">  46  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.SetDeviceStateRequest;        </span>
<span class="6112441966638764283" onmouseenter="enter('6112441966638764283');" onmouseout="out('6112441966638764283');" style=""><abbr title="  47  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.configuration.ConfigurationPutRequest.TimeConfigItem;">  47  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.configuration.ConfigurationPutðŸ”µ</abbr></span>
<span class="7471646323585627177" onmouseenter="enter('7471646323585627177');" onmouseout="out('7471646323585627177');" style=""><abbr title="  48  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayCallNotificationRequest;">  48  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayCallNotificatðŸ”µ</abbr></span>
<span class="-6858926904400925756" onmouseenter="enter('-6858926904400925756');" onmouseout="out('-6858926904400925756');" style=""><abbr title="  49  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayTextNotificationRequest;">  49  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.notification.PlayTextNotificatðŸ”µ</abbr></span>
<span class="-7335239105811257712" onmouseenter="enter('-7335239105811257712');" onmouseout="out('-7335239105811257712');" style=""><abbr title="  50  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.authentication.VerifyPrivateKeyRequest;">  50  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.authentication.VerifyPrivatðŸ”µ</abbr></span>
<span class="-8586181035863106404" onmouseenter="enter('-8586181035863106404');" onmouseout="out('-8586181035863106404');" style=""><abbr title="  51  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.buttons.ButtonConfigurationPutRequest;">  51  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.buttons.ButtonConfigurationðŸ”µ</abbr></span>
<span class="-7616394483813386160" onmouseenter="enter('-7616394483813386160');" onmouseout="out('-7616394483813386160');" style=""><abbr title="  52  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfigurationGetRequest;">  52  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfigurationðŸ”µ</abbr></span>
<span class="1784930373847085070" onmouseenter="enter('1784930373847085070');" onmouseout="out('1784930373847085070');" style=""><abbr title="  53  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfigurationPutRequest;">  53  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.configuration.ConfigurationðŸ”µ</abbr></span>
<span class="-7479827832081411210" onmouseenter="enter('-7479827832081411210');" onmouseout="out('-7479827832081411210');" style="">  54  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.file.AssetFilePutRequest;  </span>
<span class="6886533222315535550" onmouseenter="enter('6886533222315535550');" onmouseout="out('6886533222315535550');" style="">  55  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.AssetImage;          </span>
<span class="4714390797546975821" onmouseenter="enter('4714390797546975821');" onmouseout="out('4714390797546975821');" style="">  56  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.AssetImageFactory;   </span>
<span class="-6584136629945154367" onmouseenter="enter('-6584136629945154367');" onmouseout="out('-6584136629945154367');" style="">  57  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.image.ImagesSetRequest;    </span>
<span class="4407251461002993468" onmouseenter="enter('4407251461002993468');" onmouseout="out('4407251461002993468');" style="">  58  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.json.JsonPutRequest;       </span>
<span class="-3572348114301784964" onmouseenter="enter('-3572348114301784964');" onmouseout="out('-3572348114301784964');" style="">  59  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.menu.SetCommuteMenuMessage;</span>
<span class="7919188738795660329" onmouseenter="enter('7919188738795660329');" onmouseout="out('7919188738795660329');" style="">  60  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlRequest; </span>
<span class="1138328726217316685" onmouseenter="enter('1138328726217316685');" onmouseout="out('1138328726217316685');" style="">  61  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicInfoSetRequest; </span>
<span class="-6007419784157735296" onmouseenter="enter('-6007419784157735296');" onmouseout="out('-6007419784157735296');" style=""><abbr title="  62  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.notification.NotificationFilterPutHRRequest;">  62  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.notification.NotificationFiðŸ”µ</abbr></span>
<span class="2272282218964023705" onmouseenter="enter('2272282218964023705');" onmouseout="out('2272282218964023705');" style=""><abbr title="  63  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomBackgroundWidgetElement;">  63  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomBackgroundWidgðŸ”µ</abbr></span>
<span class="-6693404726045535805" onmouseenter="enter('-6693404726045535805');" onmouseout="out('-6693404726045535805');" style=""><abbr title="  64  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomTextWidgetElement;">  64  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomTextWidgetElemðŸ”µ</abbr></span>
<span class="6618883795787964297" onmouseenter="enter('6618883795787964297');" onmouseout="out('6618883795787964297');" style="">  65  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomWidget;       </span>
<span class="2778086687948821087" onmouseenter="enter('2778086687948821087');" onmouseout="out('2778086687948821087');" style="">  66  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.CustomWidgetElement;</span>
<span class="-5838235376860565233" onmouseenter="enter('-5838235376860565233');" onmouseout="out('-5838235376860565233');" style="">  67  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.Widget;             </span>
<span class="-8988880482945476231" onmouseenter="enter('-8988880482945476231');" onmouseout="out('-8988880482945476231');" style="">  68  import nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.widget.WidgetsPutRequest;  </span>
<span class="-3798970344596478499" onmouseenter="enter('-3798970344596478499');" onmouseout="out('-3798970344596478499');" style="">  69  import nodomain.freeyourgadget.gadgetbridge.util.GB;                                                              </span>
<span class="-600862318521663319" onmouseenter="enter('-600862318521663319');" onmouseout="out('-600862318521663319');" style="">  70  import nodomain.freeyourgadget.gadgetbridge.util.Prefs;                                                           </span>
<span class="1710555602396666834" onmouseenter="enter('1710555602396666834');" onmouseout="out('1710555602396666834');" style="">  71  import nodomain.freeyourgadget.gadgetbridge.util.StringUtils;                                                     </span>
<span  style="">  72                                                                                                                    </span>
<span class="-6920508692158968227" onmouseenter="enter('-6920508692158968227');" onmouseout="out('-6920508692158968227');" style=""><abbr title="  73  import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlRequest.MUSIC_PHONE_REQUEST;">  73  import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlReðŸ”µ</abbr></span>
<span class="1244615468169562272" onmouseenter="enter('1244615468169562272');" onmouseout="out('1244615468169562272');" style=""><abbr title="  74  import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlRequest.MUSIC_WATCH_REQUEST;">  74  import static nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil_hr.music.MusicControlReðŸ”µ</abbr></span>
<span  style="">  75                                                                                                                    </span>
<span class="3592572912775199945" onmouseenter="enter('3592572912775199945');" onmouseout="out('3592572912775199945');" style="">  76  public class FossilHRWatchAdapter extends FossilWatchAdapter {                                                    </span>
<span class="5088344414276172788" onmouseenter="enter('5088344414276172788');" onmouseout="out('5088344414276172788');" style="">  77      private byte[] phoneRandomNumber;                                                                             </span>
<span class="-506162566914247320" onmouseenter="enter('-506162566914247320');" onmouseout="out('-506162566914247320');" style="">  78      private byte[] watchRandomNumber;                                                                             </span>
<span  style="">  79                                                                                                                    </span>
<span class="7640912025063028053" onmouseenter="enter('7640912025063028053');" onmouseout="out('7640912025063028053');" style="">  80      private ArrayList&lt;Widget&gt; widgets = new ArrayList&lt;&gt;();                                                        </span>
<span  style="">  81                                                                                                                    </span>
<span class="-2578264008762844907" onmouseenter="enter('-2578264008762844907');" onmouseout="out('-2578264008762844907');" style="">  82      private NotificationHRConfiguration[] notificationConfigurations;                                             </span>
<span  style="">  83                                                                                                                    </span>
<span class="2535750949384339971" onmouseenter="enter('2535750949384339971');" onmouseout="out('2535750949384339971');" style="">  84      private MusicSpec currentSpec = null;                                                                         </span>
<span  style="">  85                                                                                                                    </span>
<span class="-6092139116600387375" onmouseenter="enter('-6092139116600387375');" onmouseout="out('-6092139116600387375');" style="">  86      int imageNameIndex = 0;                                                                                       </span>
<span class="-1794288330955340230" onmouseenter="enter('-1794288330955340230');" onmouseout="out('-1794288330955340230');" style="">  87      private byte jsonIndex = 0;                                                                                   </span>
<span  style="">  88                                                                                                                    </span>
<span class="-4156328390524362965" onmouseenter="enter('-4156328390524362965');" onmouseout="out('-4156328390524362965');" style="">  89      private AssetImage backGroundImage = null;                                                                    </span>
<span  style="">  90                                                                                                                    </span>
<span class="-5170367685934262595" onmouseenter="enter('-5170367685934262595');" onmouseout="out('-5170367685934262595');" style="">  91      public FossilHRWatchAdapter(QHybridSupport deviceSupport) {                                                   </span>
<span class="7895217862057392900" onmouseenter="enter('7895217862057392900');" onmouseout="out('7895217862057392900');" style="">  92          super(deviceSupport);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  93      }                                                                                                             </span>
<span  style="">  94                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  95      @Override                                                                                                     </span>
<span class="6973867701261680867" onmouseenter="enter('6973867701261680867');" onmouseout="out('6973867701261680867');" style="">  96      public void initialize() {                                                                                    </span>
<span class="-6207208930684914824" onmouseenter="enter('-6207208930684914824');" onmouseout="out('-6207208930684914824');" style="">  97          if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {                                              </span>
<span class="-3436726469441820604" onmouseenter="enter('-3436726469441820604');" onmouseout="out('-3436726469441820604');" style="">  98              queueWrite(new RequestMtuRequest(512));                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99          }                                                                                                         </span>
<span  style=""> 100                                                                                                                    </span>
<span class="2214751643672186972" onmouseenter="enter('2214751643672186972');" onmouseout="out('2214751643672186972');" style=""> 101          queueWrite(new SetDeviceStateRequest(GBDevice.State.AUTHENTICATING));                                     </span>
<span  style=""> 102                                                                                                                    </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 103          negotiateSymmetricKey();                                                                                  </span>
<span  style=""> 104                                                                                                                    </span>
<span class="7150849353095805702" onmouseenter="enter('7150849353095805702');" onmouseout="out('7150849353095805702');" style=""> 105          queueWrite(new SetDeviceStateRequest(GBDevice.State.INITIALIZING));                                       </span>
<span  style=""> 106                                                                                                                    </span>
<span class="-4417803371223487901" onmouseenter="enter('-4417803371223487901');" onmouseout="out('-4417803371223487901');" style=""> 107          loadNotificationConfigurations();                                                                         </span>
<span class="-45277995236735037" onmouseenter="enter('-45277995236735037');" onmouseout="out('-45277995236735037');" style=""> 108          queueWrite(new NotificationFilterPutHRRequest(this.notificationConfigurations, this));                    </span>
<span class="-4331994456315640395" onmouseenter="enter('-4331994456315640395');" onmouseout="out('-4331994456315640395');" style=""> 109          setVibrationStrength();                                                                                   </span>
<span  style=""> 110                                                                                                                    </span>
<span class="-9031387911705611686" onmouseenter="enter('-9031387911705611686');" onmouseout="out('-9031387911705611686');" style=""> 111          syncSettings();                                                                                           </span>
<span  style=""> 112                                                                                                                    </span>
<span class="7548848230134815961" onmouseenter="enter('7548848230134815961');" onmouseout="out('7548848230134815961');" style=""> 113          setTime();                                                                                                </span>
<span  style=""> 114                                                                                                                    </span>
<span class="-7476048809216327685" onmouseenter="enter('-7476048809216327685');" onmouseout="out('-7476048809216327685');" style=""> 115          overwriteButtons(null);                                                                                   </span>
<span  style=""> 116                                                                                                                    </span>
<span  style=""> 117                                                                                                                    </span>
<span class="1285717461947698949" onmouseenter="enter('1285717461947698949');" onmouseout="out('1285717461947698949');" style=""> 118          loadBackground();                                                                                         </span>
<span class="-8671838943786981246" onmouseenter="enter('-8671838943786981246');" onmouseout="out('-8671838943786981246');" style=""> 119          loadWidgets();                                                                                            </span>
<span class="8810184639176192527" onmouseenter="enter('8810184639176192527');" onmouseout="out('8810184639176192527');" style=""> 120          // renderWidgets();                                                                                       </span>
<span class="7961004691166238388" onmouseenter="enter('7961004691166238388');" onmouseout="out('7961004691166238388');" style=""><abbr title=" 121          // dunno if there is any point in doing this at start since when no watch is connected the QHybridSupport will not receive any intents anyway"> 121          // dunno if there is any point in doing this at start since when no watch is connected the QHybridSupport ðŸ”µ</abbr></span>
<span  style=""> 122                                                                                                                    </span>
<span class="-673558019044966288" onmouseenter="enter('-673558019044966288');" onmouseout="out('-673558019044966288');" style=""> 123          queueWrite(new SetDeviceStateRequest(GBDevice.State.INITIALIZED));                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124      }                                                                                                             </span>
<span  style=""> 125                                                                                                                    </span>
<span class="2678698660370291293" onmouseenter="enter('2678698660370291293');" onmouseout="out('2678698660370291293');" style=""> 126      private void setVibrationStrength() {                                                                         </span>
<span class="583153348914013546" onmouseenter="enter('583153348914013546');" onmouseout="out('583153348914013546');" style=""> 127          Prefs prefs = new Prefs(getDeviceSpecificPreferences());                                                  </span>
<span class="3731955474946957698" onmouseenter="enter('3731955474946957698');" onmouseout="out('3731955474946957698');" style=""> 128          int vibrationStrengh = prefs.getInt(DeviceSettingsPreferenceConst.PREF_VIBRATION_STRENGH_PERCENTAGE, 2);  </span>
<span class="-1867169202627257001" onmouseenter="enter('-1867169202627257001');" onmouseout="out('-1867169202627257001');" style=""> 129          if (vibrationStrengh &gt; 0) {                                                                               </span>
<span class="2644384104178590300" onmouseenter="enter('2644384104178590300');" onmouseout="out('2644384104178590300');" style=""> 130              vibrationStrengh = (vibrationStrengh + 1) * 25; // Seems 0,50,75,100 are working...                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 131          }                                                                                                         </span>
<span class="6672289413916591004" onmouseenter="enter('6672289413916591004');" onmouseout="out('6672289413916591004');" style=""> 132          setVibrationStrength((short) (vibrationStrengh));                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 133      }                                                                                                             </span>
<span  style=""> 134                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 135      @Override                                                                                                     </span>
<span class="1506969207519742362" onmouseenter="enter('1506969207519742362');" onmouseout="out('1506969207519742362');" style=""> 136      public void setVibrationStrength(short strength) {                                                            </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 137          negotiateSymmetricKey();                                                                                  </span>
<span class="-4629474970994412283" onmouseenter="enter('-4629474970994412283');" onmouseout="out('-4629474970994412283');" style=""><abbr title=" 138          queueWrite(new ConfigurationPutRequest(new nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.requests.fossil.configuration.ConfigurationPutRequest.VibrationStrengthConfigItem((byte) strength), this));"> 138          queueWrite(new ConfigurationPutRequest(new nodomain.freeyourgadget.gadgetbridge.service.devices.qhybrid.reðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139      }                                                                                                             </span>
<span  style=""> 140                                                                                                                    </span>
<span class="1303454475379501012" onmouseenter="enter('1303454475379501012');" onmouseout="out('1303454475379501012');" style=""> 141      private void loadNotificationConfigurations(){                                                                </span>
<span class="-6235602809275246814" onmouseenter="enter('-6235602809275246814');" onmouseout="out('-6235602809275246814');" style=""> 142          this.notificationConfigurations = new NotificationHRConfiguration[]{                                      </span>
<span class="7544968341376302636" onmouseenter="enter('7544968341376302636');" onmouseout="out('7544968341376302636');" style=""> 143                  new NotificationHRConfiguration(&quot;generic&quot;, 0),                                                    </span>
<span class="-4749339465775723964" onmouseenter="enter('-4749339465775723964');" onmouseout="out('-4749339465775723964');" style=""><abbr title=" 144                  new NotificationHRConfiguration(&quot;call&quot;, new byte[]{(byte)0x80, (byte) 0x00, (byte) 0x59, (byte) 0xB7}, 0)"> 144                  new NotificationHRConfiguration(&quot;call&quot;, new byte[]{(byte)0x80, (byte) 0x00, (byte) 0x59, (byte) 0xðŸ”µ</abbr></span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 145          };                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146      }                                                                                                             </span>
<span  style=""> 147                                                                                                                    </span>




<span class="2056476783265891076" onmouseenter="enter('2056476783265891076');" onmouseout="out('2056476783265891076');" style=""> 148      private void loadBackground(){                                                                                </span>
<span class="-5253497129600185491" onmouseenter="enter('-5253497129600185491');" onmouseout="out('-5253497129600185491');" style=""><abbr title=" 149          Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddress()));"> 149          Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddreðŸ”µ</abbr></span>
<span class="7432400165234073302" onmouseenter="enter('7432400165234073302');" onmouseout="out('7432400165234073302');" style=""> 150          boolean forceWhiteBackground = prefs.getBoolean(&quot;force_white_color_scheme&quot;, false);                       </span>
<span class="594461735151653259" onmouseenter="enter('594461735151653259');" onmouseout="out('594461735151653259');" style=""> 151          if (forceWhiteBackground) {                                                                               </span>
<span class="-3418877583116429834" onmouseenter="enter('-3418877583116429834');" onmouseout="out('-3418877583116429834');" style=""> 152              Bitmap whiteBitmap = Bitmap.createBitmap(239, 239, Bitmap.Config.ARGB_8888);                          </span>
<span class="2380885980553220395" onmouseenter="enter('2380885980553220395');" onmouseout="out('2380885980553220395');" style=""> 153              new Canvas(whiteBitmap).drawColor(Color.WHITE);                                                       </span>
<span  style=""> 154                                                                                                                    </span>




































<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 155              try {                                                                                                 </span>
<span class="1512735353479138147" onmouseenter="enter('1512735353479138147');" onmouseout="out('1512735353479138147');" style=""> 156                  this.backGroundImage = AssetImageFactory.createAssetImage(whiteBitmap, true, 0, 1, 0);            </span>


<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 157              } catch (IOException e) {                                                                             </span>
<span class="-7095933143104031833" onmouseenter="enter('-7095933143104031833');" onmouseout="out('-7095933143104031833');" style=""> 158                  logger.error(&quot;Backgroundimage error&quot;, e);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160          }                                                                                                         </span>





<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161      }                                                                                                             </span>
<span  style=""> 162                                                                                                                    </span>
<span class="-3367927790602792525" onmouseenter="enter('-3367927790602792525');" onmouseout="out('-3367927790602792525');" style=""> 163      private void loadWidgets() {                                                                                  </span>
<span class="-5253497129600185491" onmouseenter="enter('-5253497129600185491');" onmouseout="out('-5253497129600185491');" style=""><abbr title=" 164          Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddress()));"> 164          Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddreðŸ”µ</abbr></span>
<span class="7432400165234073302" onmouseenter="enter('7432400165234073302');" onmouseout="out('7432400165234073302');" style=""> 165          boolean forceWhiteBackground = prefs.getBoolean(&quot;force_white_color_scheme&quot;, false);                       </span>
<span class="-6285451443425028752" onmouseenter="enter('-6285451443425028752');" onmouseout="out('-6285451443425028752');" style=""> 166          String fontColor = forceWhiteBackground ? &quot;black&quot; : &quot;default&quot;;                                            </span>
<span  style=""> 167                                                                                                                    </span>
<span class="-4620331257752093891" onmouseenter="enter('-4620331257752093891');" onmouseout="out('-4620331257752093891');" style=""> 168          this.widgets.clear();                                                                                     </span>
<span class="-3336910807232744925" onmouseenter="enter('-3336910807232744925');" onmouseout="out('-3336910807232744925');" style=""> 169          String widgetJson = GBApplication.getPrefs().getPreferences().getString(&quot;FOSSIL_HR_WIDGETS&quot;, &quot;{}&quot;);       </span>
<span class="4155798482965333136" onmouseenter="enter('4155798482965333136');" onmouseout="out('4155798482965333136');" style=""> 170          String customWidgetJson = GBApplication.getPrefs().getString(&quot;QHYBRID_CUSTOM_WIDGETS&quot;, &quot;[]&quot;);             </span>
<span  style=""> 171                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 172          try {                                                                                                     </span>
<span class="-1451023518703013419" onmouseenter="enter('-1451023518703013419');" onmouseout="out('-1451023518703013419');" style=""> 173              JSONObject widgetConfig = new JSONObject(widgetJson);                                                 </span>
<span class="-1475171196435240579" onmouseenter="enter('-1475171196435240579');" onmouseout="out('-1475171196435240579');" style=""> 174              JSONArray customWidgets = new JSONArray(customWidgetJson);                                            </span>
<span  style=""> 175                                                                                                                    </span>
<span class="-2247029910180567010" onmouseenter="enter('-2247029910180567010');" onmouseout="out('-2247029910180567010');" style=""> 176              Iterator&lt;String&gt; keyIterator = widgetConfig.keys();                                                   </span>
<span class="3005942427600422729" onmouseenter="enter('3005942427600422729');" onmouseout="out('3005942427600422729');" style=""> 177              HashMap&lt;String, Integer&gt; positionMap = new HashMap&lt;&gt;(4);                                              </span>
<span class="-4809379780136917034" onmouseenter="enter('-4809379780136917034');" onmouseout="out('-4809379780136917034');" style=""> 178              positionMap.put(&quot;top&quot;, 0);                                                                            </span>
<span class="3242470301011869998" onmouseenter="enter('3242470301011869998');" onmouseout="out('3242470301011869998');" style=""> 179              positionMap.put(&quot;right&quot;, 90);                                                                         </span>
<span class="47603222909284588" onmouseenter="enter('47603222909284588');" onmouseout="out('47603222909284588');" style=""> 180              positionMap.put(&quot;bottom&quot;, 180);                                                                       </span>
<span class="-7872157185013762906" onmouseenter="enter('-7872157185013762906');" onmouseout="out('-7872157185013762906');" style=""> 181              positionMap.put(&quot;left&quot;, 270);                                                                         </span>
<span  style=""> 182                                                                                                                    </span>
<span class="8605964287118037960" onmouseenter="enter('8605964287118037960');" onmouseout="out('8605964287118037960');" style=""> 183              while(keyIterator.hasNext()){                                                                         </span>
<span class="2952369380408185535" onmouseenter="enter('2952369380408185535');" onmouseout="out('2952369380408185535');" style=""> 184                  String position = keyIterator.next();                                                             </span>
<span class="-4761670352334006129" onmouseenter="enter('-4761670352334006129');" onmouseout="out('-4761670352334006129');" style=""> 185                  String identifier = widgetConfig.getString(position);                                             </span>
<span class="-3371646214022229496" onmouseenter="enter('-3371646214022229496');" onmouseout="out('-3371646214022229496');" style=""> 186                  Widget.WidgetType type = Widget.WidgetType.fromJsonIdentifier(identifier);                        </span>
<span  style=""> 187                                                                                                                    </span>
<span class="4389075284580548581" onmouseenter="enter('4389075284580548581');" onmouseout="out('4389075284580548581');" style=""> 188                  Widget widget = null;                                                                             </span>
<span class="2866536352941526980" onmouseenter="enter('2866536352941526980');" onmouseout="out('2866536352941526980');" style=""> 189                  if(type != null) {                                                                                </span>
<span class="-7841183104811053833" onmouseenter="enter('-7841183104811053833');" onmouseout="out('-7841183104811053833');" style=""> 190                      widget = new Widget(type, positionMap.get(position), 63, fontColor);                          </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style=""> 191                  }else{                                                                                            </span>
<span class="-175697937656295673" onmouseenter="enter('-175697937656295673');" onmouseout="out('-175697937656295673');" style=""> 192                      identifier = identifier.substring(7);                                                         </span>
<span class="-5386134246414871772" onmouseenter="enter('-5386134246414871772');" onmouseout="out('-5386134246414871772');" style=""> 193                      for(int i = 0; i &lt; customWidgets.length(); i++){                                              </span>
<span class="-4459010997644705661" onmouseenter="enter('-4459010997644705661');" onmouseout="out('-4459010997644705661');" style=""> 194                          JSONObject customWidget = customWidgets.getJSONObject(i);                                 </span>
<span class="-3508428963545043924" onmouseenter="enter('-3508428963545043924');" onmouseout="out('-3508428963545043924');" style=""> 195                          if(customWidget.getString(&quot;name&quot;).equals(identifier)){                                    </span>
<span class="-7054423990219086531" onmouseenter="enter('-7054423990219086531');" onmouseout="out('-7054423990219086531');" style=""> 196                              boolean drawCircle = false;                                                           </span>
<span class="4470534368972356610" onmouseenter="enter('4470534368972356610');" onmouseout="out('4470534368972356610');" style=""> 197                              if(customWidget.has(&quot;drawCircle&quot;)) drawCircle = customWidget.getBoolean(&quot;drawCircle&quot;);</span>
<span class="-8778192717851062623" onmouseenter="enter('-8778192717851062623');" onmouseout="out('-8778192717851062623');" style=""> 198                              CustomWidget newWidget = new CustomWidget(                                            </span>
<span class="3512413394145535740" onmouseenter="enter('3512413394145535740');" onmouseout="out('3512413394145535740');" style=""> 199                                      customWidget.getString(&quot;name&quot;),                                               </span>
<span class="-4996195677187410364" onmouseenter="enter('-4996195677187410364');" onmouseout="out('-4996195677187410364');" style=""> 200                                      positionMap.get(position),                                                    </span>
<span class="3193660705107837549" onmouseenter="enter('3193660705107837549');" onmouseout="out('3193660705107837549');" style=""> 201                                      63,                                                                           </span>
<span class="-6293129944882525283" onmouseenter="enter('-6293129944882525283');" onmouseout="out('-6293129944882525283');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 202 -                                    fontColor,                                                                    </span>
<span class="-1644456201739786746" onmouseenter="enter('-1644456201739786746');" onmouseout="out('-1644456201739786746');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 203 -                                    drawCircle                                                                    </span>
<span class="3561617863275761236" onmouseenter="enter('3561617863275761236');" onmouseout="out('3561617863275761236');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 204 +                                    fontColor                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 205                              );                                                                                    </span>
<span class="2785037360953974218" onmouseenter="enter('2785037360953974218');" onmouseout="out('2785037360953974218');" style=""> 206                              JSONArray elements = customWidget.getJSONArray(&quot;elements&quot;);                           </span>
<span  style=""> 207                                                                                                                    </span>
<span class="3871742226603844038" onmouseenter="enter('3871742226603844038');" onmouseout="out('3871742226603844038');" style=""> 208                              for (int i2 = 0; i2 &lt; elements.length(); i2++) {                                      </span>
<span class="-7151905776418266127" onmouseenter="enter('-7151905776418266127');" onmouseout="out('-7151905776418266127');" style=""> 209                                  JSONObject element = elements.getJSONObject(i2);                                  </span>
<span class="6397770772172009485" onmouseenter="enter('6397770772172009485');" onmouseout="out('6397770772172009485');" style=""> 210                                  if (element.getString(&quot;type&quot;).equals(&quot;text&quot;)) {                                   </span>
<span class="2334141174646848010" onmouseenter="enter('2334141174646848010');" onmouseout="out('2334141174646848010');" style=""> 211                                      newWidget.addElement(new CustomTextWidgetElement(                             </span>
<span class="822830221051301303" onmouseenter="enter('822830221051301303');" onmouseout="out('822830221051301303');" style=""> 212                                              element.getString(&quot;id&quot;),                                              </span>
<span class="4980700817635867661" onmouseenter="enter('4980700817635867661');" onmouseout="out('4980700817635867661');" style=""> 213                                              element.getString(&quot;value&quot;),                                           </span>
<span class="9063642109599004190" onmouseenter="enter('9063642109599004190');" onmouseout="out('9063642109599004190');" style=""> 214                                              element.getInt(&quot;x&quot;),                                                  </span>
<span class="-4454797006849514808" onmouseenter="enter('-4454797006849514808');" onmouseout="out('-4454797006849514808');" style=""> 215                                              element.getInt(&quot;y&quot;)                                                   </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 216                                      ));                                                                           </span>
<span class="-8940325902652201532" onmouseenter="enter('-8940325902652201532');" onmouseout="out('-8940325902652201532');" style=""> 217                                  } else if (element.getString(&quot;type&quot;).equals(&quot;background&quot;)) {                      </span>
<span class="-4431923028910732143" onmouseenter="enter('-4431923028910732143');" onmouseout="out('-4431923028910732143');" style=""> 218                                      newWidget.addElement(new CustomBackgroundWidgetElement(                       </span>
<span class="822830221051301303" onmouseenter="enter('822830221051301303');" onmouseout="out('822830221051301303');" style=""> 219                                              element.getString(&quot;id&quot;),                                              </span>
<span class="-7580773937564088589" onmouseenter="enter('-7580773937564088589');" onmouseout="out('-7580773937564088589');" style=""> 220                                              element.getString(&quot;value&quot;)                                            </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 221                                      ));                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 222                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 223                              }                                                                                     </span>
<span class="2257436902070421227" onmouseenter="enter('2257436902070421227');" onmouseout="out('2257436902070421227');" style=""> 224                              widget = newWidget;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227                  }                                                                                                 </span>
<span  style=""> 228                                                                                                                    </span>
<span class="-8350136702671077859" onmouseenter="enter('-8350136702671077859');" onmouseout="out('-8350136702671077859');" style=""> 229                  if(widget == null) continue;                                                                      </span>
<span class="-6171680299070194420" onmouseenter="enter('-6171680299070194420');" onmouseout="out('-6171680299070194420');" style=""> 230                  this.widgets.add(widget);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231              }                                                                                                     </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 232          } catch (JSONException e) {                                                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 233              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234          }                                                                                                         </span>
<span  style=""> 235                                                                                                                    </span>
<span class="-8358671306989560601" onmouseenter="enter('-8358671306989560601');" onmouseout="out('-8358671306989560601');" style=""> 236          uploadWidgets();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237      }                                                                                                             </span>
<span  style=""> 238                                                                                                                    </span>
<span class="5530468676950845344" onmouseenter="enter('5530468676950845344');" onmouseout="out('5530468676950845344');" style=""> 239      private void uploadWidgets(){                                                                                 </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 240          negotiateSymmetricKey();                                                                                  </span>
<span class="5140546967358631022" onmouseenter="enter('5140546967358631022');" onmouseout="out('5140546967358631022');" style=""> 241          ArrayList&lt;Widget&gt; systemWidgets = new ArrayList&lt;&gt;(widgets.size());                                        </span>
<span class="-3447555470280778363" onmouseenter="enter('-3447555470280778363');" onmouseout="out('-3447555470280778363');" style=""> 242          for(Widget widget : this.widgets){                                                                        </span>
<span class="1576906399201786111" onmouseenter="enter('1576906399201786111');" onmouseout="out('1576906399201786111');" style=""> 243              if(!(widget instanceof CustomWidget)) systemWidgets.add(widget);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244          }                                                                                                         </span>
<span class="-2475473149296747573" onmouseenter="enter('-2475473149296747573');" onmouseout="out('-2475473149296747573');" style=""> 245          queueWrite(new WidgetsPutRequest(systemWidgets.toArray(new Widget[0]), this));                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246      }                                                                                                             </span>
<span  style=""> 247                                                                                                                    </span>
<span class="903870811454511101" onmouseenter="enter('903870811454511101');" onmouseout="out('903870811454511101');" style=""> 248      private void renderWidgets() {                                                                                </span>
<span class="-5253497129600185491" onmouseenter="enter('-5253497129600185491');" onmouseout="out('-5253497129600185491');" style=""><abbr title=" 249          Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddress()));"> 249          Prefs prefs = new Prefs(GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddreðŸ”µ</abbr></span>
<span class="7432400165234073302" onmouseenter="enter('7432400165234073302');" onmouseout="out('7432400165234073302');" style=""> 250          boolean forceWhiteBackground = prefs.getBoolean(&quot;force_white_color_scheme&quot;, false);                       </span>
<span class="-4957838723144238098" onmouseenter="enter('-4957838723144238098');" onmouseout="out('-4957838723144238098');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 251 +        boolean drawCircles = prefs.getBoolean(&quot;widget_draw_circles&quot;, false);                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 252 +                                                                                                                  </span>
<span class="-4150936410867644378" onmouseenter="enter('-4150936410867644378');" onmouseout="out('-4150936410867644378');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 253 +        Bitmap circleBitmap = null;                                                                               </span>
<span class="4297491638185878541" onmouseenter="enter('4297491638185878541');" onmouseout="out('4297491638185878541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 254 +        if(drawCircles) {                                                                                         </span>
<span class="-5595442960800349101" onmouseenter="enter('-5595442960800349101');" onmouseout="out('-5595442960800349101');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 255 +            circleBitmap = Bitmap.createBitmap(76, 76, Bitmap.Config.ARGB_8888);                                  </span>
<span class="-928516426453882846" onmouseenter="enter('-928516426453882846');" onmouseout="out('-928516426453882846');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 256 +            Canvas circleCanvas = new Canvas(circleBitmap);                                                       </span>
<span class="2814962491382878487" onmouseenter="enter('2814962491382878487');" onmouseout="out('2814962491382878487');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 257 +            Paint circlePaint = new Paint();                                                                      </span>
<span class="-6694382119531121333" onmouseenter="enter('-6694382119531121333');" onmouseout="out('-6694382119531121333');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 258 +            circlePaint.setColor(forceWhiteBackground ? Color.WHITE : Color.BLACK);                               </span>
<span class="7023202196844894280" onmouseenter="enter('7023202196844894280');" onmouseout="out('7023202196844894280');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 259 +            circlePaint.setStyle(Paint.Style.FILL);                                                               </span>
<span class="3207244326755712140" onmouseenter="enter('3207244326755712140');" onmouseout="out('3207244326755712140');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 260 +            circlePaint.setStrokeWidth(3);                                                                        </span>
<span class="4026559028524057875" onmouseenter="enter('4026559028524057875');" onmouseout="out('4026559028524057875');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 261 +            circleCanvas.drawCircle(38, 38, 37, circlePaint);                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 262 +                                                                                                                  </span>
<span class="2381447846028007273" onmouseenter="enter('2381447846028007273');" onmouseout="out('2381447846028007273');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 263 +            circlePaint.setColor(forceWhiteBackground ? Color.BLACK : Color.WHITE);                               </span>
<span class="-2529291397399672174" onmouseenter="enter('-2529291397399672174');" onmouseout="out('-2529291397399672174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 264 +            circlePaint.setStyle(Paint.Style.STROKE);                                                             </span>
<span class="3207244326755712140" onmouseenter="enter('3207244326755712140');" onmouseout="out('3207244326755712140');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 265 +            circlePaint.setStrokeWidth(3);                                                                        </span>
<span class="4026559028524057875" onmouseenter="enter('4026559028524057875');" onmouseout="out('4026559028524057875');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 266 +            circleCanvas.drawCircle(38, 38, 37, circlePaint);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 267 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 268 +                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 269          try {                                                                                                     </span>
<span class="-373590907859483538" onmouseenter="enter('-373590907859483538');" onmouseout="out('-373590907859483538');" style=""> 270              ArrayList&lt;AssetImage&gt; widgetImages = new ArrayList&lt;&gt;();                                               </span>
<span  style=""> 271                                                                                                                    </span>
<span class="-7135747421857686049" onmouseenter="enter('-7135747421857686049');" onmouseout="out('-7135747421857686049');" style=""> 272              if(this.backGroundImage != null){                                                                     </span>
<span class="-1341990675909940474" onmouseenter="enter('-1341990675909940474');" onmouseout="out('-1341990675909940474');" style=""> 273                  widgetImages.add(this.backGroundImage);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274              }                                                                                                     </span>
<span  style=""> 275                                                                                                                    </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 276 -                                                                                                                  </span>
<span class="-8143608132748507128" onmouseenter="enter('-8143608132748507128');" onmouseout="out('-8143608132748507128');" style=""> 277              for (int i = 0; i &lt; this.widgets.size(); i++) {                                                       </span>
<span class="-3360344478910316540" onmouseenter="enter('-3360344478910316540');" onmouseout="out('-3360344478910316540');" style=""> 278                  Widget w = widgets.get(i);                                                                        </span>
<span class="7755552181933604323" onmouseenter="enter('7755552181933604323');" onmouseout="out('7755552181933604323');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 279 -                if(!(w instanceof CustomWidget)) continue;                                                        </span>
<span class="-2112273356566079696" onmouseenter="enter('-2112273356566079696');" onmouseout="out('-2112273356566079696');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 280 +                if(!(w instanceof CustomWidget)){                                                                 </span>
<span class="4297491638185878541" onmouseenter="enter('4297491638185878541');" onmouseout="out('4297491638185878541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 281 +                    if(drawCircles) {                                                                             </span>
<span class="-5480032434325078611" onmouseenter="enter('-5480032434325078611');" onmouseout="out('-5480032434325078611');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 282 +                        widgetImages.add(AssetImageFactory.createAssetImage(                                      </span>
<span class="1059813510113582459" onmouseenter="enter('1059813510113582459');" onmouseout="out('1059813510113582459');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 283 +                                circleBitmap,                                                                     </span>
<span class="1283834832483333129" onmouseenter="enter('1283834832483333129');" onmouseout="out('1283834832483333129');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 284 +                                true,                                                                             </span>
<span class="427599116612284959" onmouseenter="enter('427599116612284959');" onmouseout="out('427599116612284959');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 285 +                                w.getAngle(),                                                                     </span>
<span class="879666240058458328" onmouseenter="enter('879666240058458328');" onmouseout="out('879666240058458328');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 286 +                                w.getDistance(),                                                                  </span>
<span class="-6707054910432036291" onmouseenter="enter('-6707054910432036291');" onmouseout="out('-6707054910432036291');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 287 +                                1                                                                                 </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 288 +                        ));                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 289 +                    }                                                                                             </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 290 +                    continue;                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 291 +                };                                                                                                </span>
<span class="-119827139856937313" onmouseenter="enter('-119827139856937313');" onmouseout="out('-119827139856937313');" style=""> 292                  CustomWidget widget = (CustomWidget) w;                                                           </span>
<span  style=""> 293                                                                                                                    </span>
<span class="7010238729887612961" onmouseenter="enter('7010238729887612961');" onmouseout="out('7010238729887612961');" style=""> 294                  Bitmap widgetBitmap = Bitmap.createBitmap(76, 76, Bitmap.Config.ARGB_8888);                       </span>
<span  style=""> 295                                                                                                                    </span>
<span class="-3285187784434415926" onmouseenter="enter('-3285187784434415926');" onmouseout="out('-3285187784434415926');" style=""> 296                  Canvas widgetCanvas = new Canvas(widgetBitmap);                                                   </span>
<span  style=""> 297                                                                                                                    </span>
<span class="4574864979763228349" onmouseenter="enter('4574864979763228349');" onmouseout="out('4574864979763228349');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 298 -                boolean backgroundDrawn = false;                                                                  </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 299 -                                                                                                                  </span>
<span class="-7321857461549810249" onmouseenter="enter('-7321857461549810249');" onmouseout="out('-7321857461549810249');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 300 -                if(widget.getDrawCircle() &amp;&amp; !backgroundDrawn){                                                   </span>
<span class="2814962491382878487" onmouseenter="enter('2814962491382878487');" onmouseout="out('2814962491382878487');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 301 -                    Paint circlePaint = new Paint();                                                              </span>
<span class="-6694382119531121333" onmouseenter="enter('-6694382119531121333');" onmouseout="out('-6694382119531121333');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 302 -                    circlePaint.setColor(forceWhiteBackground ? Color.WHITE : Color.BLACK);                       </span>
<span class="7023202196844894280" onmouseenter="enter('7023202196844894280');" onmouseout="out('7023202196844894280');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 303 -                    circlePaint.setStyle(Paint.Style.FILL);                                                       </span>
<span class="3207244326755712140" onmouseenter="enter('3207244326755712140');" onmouseout="out('3207244326755712140');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 304 -                    circlePaint.setStrokeWidth(3);                                                                </span>
<span class="-9125685889860219804" onmouseenter="enter('-9125685889860219804');" onmouseout="out('-9125685889860219804');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 305 -                    widgetCanvas.drawCircle(38, 38, 37, circlePaint);                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 306 -                                                                                                                  </span>
<span class="2381447846028007273" onmouseenter="enter('2381447846028007273');" onmouseout="out('2381447846028007273');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 307 -                    circlePaint.setColor(forceWhiteBackground ? Color.BLACK : Color.WHITE);                       </span>
<span class="-2529291397399672174" onmouseenter="enter('-2529291397399672174');" onmouseout="out('-2529291397399672174');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 308 -                    circlePaint.setStyle(Paint.Style.STROKE);                                                     </span>
<span class="3207244326755712140" onmouseenter="enter('3207244326755712140');" onmouseout="out('3207244326755712140');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 309 -                    circlePaint.setStrokeWidth(3);                                                                </span>
<span class="-9125685889860219804" onmouseenter="enter('-9125685889860219804');" onmouseout="out('-9125685889860219804');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 310 -                    widgetCanvas.drawCircle(38, 38, 37, circlePaint);                                             </span>
<span class="1399126767030654892" onmouseenter="enter('1399126767030654892');" onmouseout="out('1399126767030654892');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 311 +                if(drawCircles){                                                                                  </span>
<span class="2052312058071761513" onmouseenter="enter('2052312058071761513');" onmouseout="out('2052312058071761513');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 312 +                    widgetCanvas.drawBitmap(circleBitmap, 0, 0, null);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313                  }                                                                                                 </span>
<span  style=""> 314                                                                                                                    </span>
<span class="757605497541712230" onmouseenter="enter('757605497541712230');" onmouseout="out('757605497541712230');" style=""> 315                  for (CustomWidgetElement element : widget.getElements()) {                                        </span>
<span class="7400170023887894754" onmouseenter="enter('7400170023887894754');" onmouseout="out('7400170023887894754');" style=""> 316                      if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_BACKGROUND) {</span>
<span class="-676638329273944558" onmouseenter="enter('-676638329273944558');" onmouseout="out('-676638329273944558');" style=""> 317                          File imageFile = new File(element.getValue());                                            </span>
<span  style=""> 318                                                                                                                    </span>
<span class="7384441147080120976" onmouseenter="enter('7384441147080120976');" onmouseout="out('7384441147080120976');" style=""> 319                          if(!imageFile.exists() || !imageFile.isFile()){                                           </span>
<span class="8572942832707006367" onmouseenter="enter('8572942832707006367');" onmouseout="out('8572942832707006367');" style=""> 320                              logger.debug(&quot;Image file &quot; + element.getValue() + &quot; not found&quot;);                      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 321                              continue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 322                          }                                                                                         </span>
<span class="-1261560715133039949" onmouseenter="enter('-1261560715133039949');" onmouseout="out('-1261560715133039949');" style=""> 323                          Bitmap imageBitmap = BitmapFactory.decodeFile(element.getValue());                        </span>
<span class="6232182932301203372" onmouseenter="enter('6232182932301203372');" onmouseout="out('6232182932301203372');" style=""> 324                          if(imageBitmap == null){                                                                  </span>
<span class="-7905366545073842666" onmouseenter="enter('-7905366545073842666');" onmouseout="out('-7905366545073842666');" style=""> 325                              logger.debug(&quot;image file &quot; + element.getValue() + &quot; could not be decoded&quot;);           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 326                              continue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 327                          }                                                                                         </span>
<span class="4351764494403839190" onmouseenter="enter('4351764494403839190');" onmouseout="out('4351764494403839190');" style=""> 328                          Bitmap scaledBitmap = Bitmap.createScaledBitmap(imageBitmap, 76, 76, false);              </span>
<span  style=""> 329                                                                                                                    </span>
<span class="3660116155044120822" onmouseenter="enter('3660116155044120822');" onmouseout="out('3660116155044120822');" style=""> 330                          widgetCanvas.drawBitmap(                                                                  </span>
<span class="5191324505806482314" onmouseenter="enter('5191324505806482314');" onmouseout="out('5191324505806482314');" style=""> 331                                  scaledBitmap,                                                                     </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 332                                  0,                                                                                </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 333                                  0,                                                                                </span>
<span class="-5950258146809433717" onmouseenter="enter('-5950258146809433717');" onmouseout="out('-5950258146809433717');" style=""> 334                                  null);                                                                            </span>
<span class="9045543232366036795" onmouseenter="enter('9045543232366036795');" onmouseout="out('9045543232366036795');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 335 -                        backgroundDrawn = true;                                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 336                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 337                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338                  }                                                                                                 </span>
<span  style=""> 339                                                                                                                    </span>
<span class="757605497541712230" onmouseenter="enter('757605497541712230');" onmouseout="out('757605497541712230');" style=""> 340                  for (CustomWidgetElement element : widget.getElements()) {                                        </span>
<span class="-8374841026396869451" onmouseenter="enter('-8374841026396869451');" onmouseout="out('-8374841026396869451');" style=""> 341                      if (element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_TEXT) {      </span>
<span class="8404149927879958117" onmouseenter="enter('8404149927879958117');" onmouseout="out('8404149927879958117');" style=""> 342                          Paint textPaint = new Paint();                                                            </span>
<span class="424156949088872290" onmouseenter="enter('424156949088872290');" onmouseout="out('424156949088872290');" style=""> 343                          textPaint.setStrokeWidth(4);                                                              </span>
<span class="-7858016953995282215" onmouseenter="enter('-7858016953995282215');" onmouseout="out('-7858016953995282215');" style=""> 344                          textPaint.setTextSize(17f);                                                               </span>
<span class="7085320690650566449" onmouseenter="enter('7085320690650566449');" onmouseout="out('7085320690650566449');" style=""> 345                          textPaint.setStyle(Paint.Style.FILL);                                                     </span>
<span class="4582184244946630782" onmouseenter="enter('4582184244946630782');" onmouseout="out('4582184244946630782');" style=""> 346                          textPaint.setColor(forceWhiteBackground ? Color.BLACK : Color.WHITE);                     </span>
<span class="8080777884851070420" onmouseenter="enter('8080777884851070420');" onmouseout="out('8080777884851070420');" style=""> 347                          textPaint.setTextAlign(Paint.Align.CENTER);                                               </span>
<span  style=""> 348                                                                                                                    </span>
<span class="-3687982044961117698" onmouseenter="enter('-3687982044961117698');" onmouseout="out('-3687982044961117698');" style=""><abbr title=" 349                          widgetCanvas.drawText(element.getValue(), element.getX(), element.getY() - (textPaint.descent() + textPaint.ascent()) / 2f, textPaint);"> 349                          widgetCanvas.drawText(element.getValue(), element.getX(), element.getY() - (textPaint.descðŸ”µ</abbr></span>
<span class="-2221545646012742491" onmouseenter="enter('-2221545646012742491');" onmouseout="out('-2221545646012742491');" style=""> 350                      }else if(element.getWidgetElementType() == CustomWidgetElement.WidgetElementType.TYPE_IMAGE) {</span>
<span class="-1261560715133039949" onmouseenter="enter('-1261560715133039949');" onmouseout="out('-1261560715133039949');" style=""> 351                          Bitmap imageBitmap = BitmapFactory.decodeFile(element.getValue());                        </span>
<span  style=""> 352                                                                                                                    </span>
<span class="850565005306985750" onmouseenter="enter('850565005306985750');" onmouseout="out('850565005306985750');" style=""><abbr title=" 353                          widgetCanvas.drawBitmap(imageBitmap, element.getX() - imageBitmap.getWidth() / 2f, element.getY() - imageBitmap.getHeight() / 2f, null);"> 353                          widgetCanvas.drawBitmap(imageBitmap, element.getX() - imageBitmap.getWidth() / 2f, elementðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 355                  }                                                                                                 </span>
<span class="-5480032434325078611" onmouseenter="enter('-5480032434325078611');" onmouseout="out('-5480032434325078611');" style=""> 356                  widgetImages.add(AssetImageFactory.createAssetImage(                                              </span>
<span class="6927266072716207452" onmouseenter="enter('6927266072716207452');" onmouseout="out('6927266072716207452');" style=""> 357                          widgetBitmap,                                                                             </span>
<span class="1283834832483333129" onmouseenter="enter('1283834832483333129');" onmouseout="out('1283834832483333129');" style=""> 358                          true,                                                                                     </span>
<span class="-5673825003729303026" onmouseenter="enter('-5673825003729303026');" onmouseout="out('-5673825003729303026');" style=""> 359                          widget.getAngle(),                                                                        </span>
<span class="-686125949143974898" onmouseenter="enter('-686125949143974898');" onmouseout="out('-686125949143974898');" style=""> 360                          widget.getDistance(),                                                                     </span>
<span class="-6707054910432036291" onmouseenter="enter('-6707054910432036291');" onmouseout="out('-6707054910432036291');" style=""> 361                          1                                                                                         </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 362                  ));                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 363              }                                                                                                     </span>
<span  style=""> 364                                                                                                                    </span>
<span class="5531684472745833198" onmouseenter="enter('5531684472745833198');" onmouseout="out('5531684472745833198');" style=""> 365              AssetImage[] images = widgetImages.toArray(new AssetImage[0]);                                        </span>
<span  style=""> 366                                                                                                                    </span>
<span class="-7053575697528717461" onmouseenter="enter('-7053575697528717461');" onmouseout="out('-7053575697528717461');" style=""> 367              // queueWrite(new FileDeleteRequest((short) 0x0700));                                                 </span>





<span class="4734673173370309989" onmouseenter="enter('4734673173370309989');" onmouseout="out('4734673173370309989');" style=""> 368              queueWrite(new AssetFilePutRequest(                                                                   </span>
<span class="-9668838946899241" onmouseenter="enter('-9668838946899241');" onmouseout="out('-9668838946899241');" style=""> 369                      images,                                                                                       </span>

<span class="-3953921874774397702" onmouseenter="enter('-3953921874774397702');" onmouseout="out('-3953921874774397702');" style=""> 370                      (byte) 0x00,                                                                                  </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 371                      this                                                                                          </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 372              ));                                                                                                   </span>
<span  style=""> 373                                                                                                                    </span>
<span class="-1216850278071707444" onmouseenter="enter('-1216850278071707444');" onmouseout="out('-1216850278071707444');" style=""> 374              // queueWrite(new FileDeleteRequest((short) 0x0503));                                                 </span>
<span class="-6828394027622892361" onmouseenter="enter('-6828394027622892361');" onmouseout="out('-6828394027622892361');" style=""> 375              queueWrite(new ImagesSetRequest(                                                                      </span>
<span class="-9668838946899241" onmouseenter="enter('-9668838946899241');" onmouseout="out('-9668838946899241');" style=""> 376                      images,                                                                                       </span>

<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 377                      this                                                                                          </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 378              ));                                                                                                   </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 379          } catch (IOException e) {                                                                                 </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 380              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382      }                                                                                                             </span>
<span  style=""> 383                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 384      @Override                                                                                                     </span>
<span class="768796884755462959" onmouseenter="enter('768796884755462959');" onmouseout="out('768796884755462959');" style=""> 385      public void setWidgetContent(String widgetID, String content, boolean renderOnWatch) {                        </span>
<span class="-1104872319984701354" onmouseenter="enter('-1104872319984701354');" onmouseout="out('-1104872319984701354');" style=""> 386          boolean update = false;                                                                                   </span>
<span class="4250664064039944058" onmouseenter="enter('4250664064039944058');" onmouseout="out('4250664064039944058');" style=""> 387          for (Widget widget : this.widgets) {                                                                      </span>
<span class="6599617715616763984" onmouseenter="enter('6599617715616763984');" onmouseout="out('6599617715616763984');" style=""> 388              if(!(widget instanceof CustomWidget)) continue;                                                       </span>
<span class="-7367617630703350990" onmouseenter="enter('-7367617630703350990');" onmouseout="out('-7367617630703350990');" style=""> 389              if(((CustomWidget) widget).updateElementValue(widgetID, content)) update = true;                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390          }                                                                                                         </span>
<span  style=""> 391                                                                                                                    </span>
<span class="-2887538322855201281" onmouseenter="enter('-2887538322855201281');" onmouseout="out('-2887538322855201281');" style=""> 392          if (renderOnWatch &amp;&amp; update) renderWidgets();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 393      }                                                                                                             </span>
<span  style=""> 394                                                                                                                    </span>
<span class="6173588091729977369" onmouseenter="enter('6173588091729977369');" onmouseout="out('6173588091729977369');" style=""> 395      private void negotiateSymmetricKey() {                                                                        </span>
<span class="-7168973652814870469" onmouseenter="enter('-7168973652814870469');" onmouseout="out('-7168973652814870469');" style=""> 396          queueWrite(new VerifyPrivateKeyRequest(                                                                   </span>
<span class="2474409468109046352" onmouseenter="enter('2474409468109046352');" onmouseout="out('2474409468109046352');" style=""> 397                  this.getSecretKey(),                                                                              </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 398                  this                                                                                              </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 399          ));                                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400      }                                                                                                             </span>
<span  style=""> 401                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 402      @Override                                                                                                     </span>
<span class="8564159631865081592" onmouseenter="enter('8564159631865081592');" onmouseout="out('8564159631865081592');" style=""> 403      public void setTime() {                                                                                       </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 404          negotiateSymmetricKey();                                                                                  </span>
<span  style=""> 405                                                                                                                    </span>
<span class="-4700399361923900561" onmouseenter="enter('-4700399361923900561');" onmouseout="out('-4700399361923900561');" style=""> 406          long millis = System.currentTimeMillis();                                                                 </span>
<span class="8010236317671933907" onmouseenter="enter('8010236317671933907');" onmouseout="out('8010236317671933907');" style=""> 407          TimeZone zone = new GregorianCalendar().getTimeZone();                                                    </span>
<span  style=""> 408                                                                                                                    </span>
<span class="5277346296728804081" onmouseenter="enter('5277346296728804081');" onmouseout="out('5277346296728804081');" style=""> 409          queueWrite(                                                                                               </span>
<span class="9082684383999307863" onmouseenter="enter('9082684383999307863');" onmouseout="out('9082684383999307863');" style=""> 410                  new ConfigurationPutRequest(                                                                      </span>
<span class="6747723926021094395" onmouseenter="enter('6747723926021094395');" onmouseout="out('6747723926021094395');" style=""> 411                          new TimeConfigItem(                                                                       </span>
<span class="-4594139798000988877" onmouseenter="enter('-4594139798000988877');" onmouseout="out('-4594139798000988877');" style=""> 412                                  (int) (millis / 1000 + getDeviceSupport().getTimeOffset() * 60),                  </span>
<span class="6701954853301529159" onmouseenter="enter('6701954853301529159');" onmouseout="out('6701954853301529159');" style=""> 413                                  (short) (millis % 1000),                                                          </span>
<span class="2740305831490303835" onmouseenter="enter('2740305831490303835');" onmouseout="out('2740305831490303835');" style=""> 414                                  (short) (zone.getOffset(millis) / 60000)                                          </span>
<span class="5925056120740059197" onmouseenter="enter('5925056120740059197');" onmouseout="out('5925056120740059197');" style=""> 415                          ),                                                                                        </span>
<span class="-573149562926997335" onmouseenter="enter('-573149562926997335');" onmouseout="out('-573149562926997335');" style=""> 416                          this), false                                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 417          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418      }                                                                                                             </span>
<span  style=""> 419                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 420      @Override                                                                                                     </span>
<span class="5743699626454161990" onmouseenter="enter('5743699626454161990');" onmouseout="out('5743699626454161990');" style=""> 421      public void setMusicInfo(MusicSpec musicSpec) {                                                               </span>
<span class="7717622633225589961" onmouseenter="enter('7717622633225589961');" onmouseout="out('7717622633225589961');" style=""> 422          if (                                                                                                      </span>
<span class="-2721767562250030479" onmouseenter="enter('-2721767562250030479');" onmouseout="out('-2721767562250030479');" style=""> 423                  currentSpec != null                                                                               </span>
<span class="6347316233900210670" onmouseenter="enter('6347316233900210670');" onmouseout="out('6347316233900210670');" style=""> 424                          &amp;&amp; currentSpec.album.equals(musicSpec.album)                                              </span>
<span class="-7026697945522803285" onmouseenter="enter('-7026697945522803285');" onmouseout="out('-7026697945522803285');" style=""> 425                          &amp;&amp; currentSpec.artist.equals(musicSpec.artist)                                            </span>
<span class="234002389956897367" onmouseenter="enter('234002389956897367');" onmouseout="out('234002389956897367');" style=""> 426                          &amp;&amp; currentSpec.track.equals(musicSpec.track)                                              </span>
<span class="129544933216380196" onmouseenter="enter('129544933216380196');" onmouseout="out('129544933216380196');" style=""> 427          ) return;                                                                                                 </span>
<span class="5122037976784129938" onmouseenter="enter('5122037976784129938');" onmouseout="out('5122037976784129938');" style=""> 428          currentSpec = musicSpec;                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 429          try {                                                                                                     </span>
<span class="2807680215991082156" onmouseenter="enter('2807680215991082156');" onmouseout="out('2807680215991082156');" style=""> 430              queueWrite(new MusicInfoSetRequest(                                                                   </span>
<span class="-4995357750126688628" onmouseenter="enter('-4995357750126688628');" onmouseout="out('-4995357750126688628');" style=""> 431                      musicSpec.artist,                                                                             </span>
<span class="-2625665048867935009" onmouseenter="enter('-2625665048867935009');" onmouseout="out('-2625665048867935009');" style=""> 432                      musicSpec.album,                                                                              </span>
<span class="4393990709676517095" onmouseenter="enter('4393990709676517095');" onmouseout="out('4393990709676517095');" style=""> 433                      musicSpec.track,                                                                              </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 434                      this                                                                                          </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 435              ));                                                                                                   </span>
<span class="-6150396604962993275" onmouseenter="enter('-6150396604962993275');" onmouseout="out('-6150396604962993275');" style=""> 436          }catch (BufferOverflowException e){                                                                       </span>
<span class="-5802249110858364829" onmouseenter="enter('-5802249110858364829');" onmouseout="out('-5802249110858364829');" style=""> 437              GB.log(&quot;musicInfo: &quot; + musicSpec, GB.ERROR, e);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 438          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 439      }                                                                                                             </span>
<span  style=""> 440                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 441      @Override                                                                                                     </span>
<span class="6484409227794913685" onmouseenter="enter('6484409227794913685');" onmouseout="out('6484409227794913685');" style=""> 442      public void setMusicState(MusicStateSpec stateSpec) {                                                         </span>
<span class="-8825084358361918368" onmouseenter="enter('-8825084358361918368');" onmouseout="out('-8825084358361918368');" style=""> 443          super.setMusicState(stateSpec);                                                                           </span>
<span  style=""> 444                                                                                                                    </span>
<span class="-5832778985397101291" onmouseenter="enter('-5832778985397101291');" onmouseout="out('-5832778985397101291');" style=""> 445          queueWrite(new MusicControlRequest(                                                                       </span>
<span class="6749687689436260015" onmouseenter="enter('6749687689436260015');" onmouseout="out('6749687689436260015');" style=""><abbr title=" 446                  stateSpec.state == MusicStateSpec.STATE_PLAYING ? MUSIC_PHONE_REQUEST.MUSIC_REQUEST_SET_PLAYING : MUSIC_PHONE_REQUEST.MUSIC_REQUEST_SET_PAUSED"> 446                  stateSpec.state == MusicStateSpec.STATE_PLAYING ? MUSIC_PHONE_REQUEST.MUSIC_REQUEST_SET_PLAYING : ðŸ”µ</abbr></span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 447          ));                                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 448      }                                                                                                             </span>
<span  style=""> 449                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 450      @Override                                                                                                     </span>
<span class="-4328830144100754457" onmouseenter="enter('-4328830144100754457');" onmouseout="out('-4328830144100754457');" style=""> 451      public void updateWidgets() {                                                                                 </span>
<span class="-8671838943786981246" onmouseenter="enter('-8671838943786981246');" onmouseout="out('-8671838943786981246');" style=""> 452          loadWidgets();                                                                                            </span>
<span class="-686042699702875094" onmouseenter="enter('-686042699702875094');" onmouseout="out('-686042699702875094');" style=""> 453          renderWidgets();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454      }                                                                                                             </span>
<span  style=""> 455                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 456      @Override                                                                                                     </span>
<span class="-3215171005460530491" onmouseenter="enter('-3215171005460530491');" onmouseout="out('-3215171005460530491');" style=""> 457      public void onFetchActivityData() {                                                                           </span>
<span class="-9031387911705611686" onmouseenter="enter('-9031387911705611686');" onmouseout="out('-9031387911705611686');" style=""> 458          syncSettings();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459      }                                                                                                             </span>
<span  style=""> 460                                                                                                                    </span>
<span class="4739601400713241401" onmouseenter="enter('4739601400713241401');" onmouseout="out('4739601400713241401');" style=""> 461      private void syncSettings() {                                                                                 </span>
<span class="5019982808562077006" onmouseenter="enter('5019982808562077006');" onmouseout="out('5019982808562077006');" style=""> 462          negotiateSymmetricKey();                                                                                  </span>
<span  style=""> 463                                                                                                                    </span>
<span class="1672016935910782047" onmouseenter="enter('1672016935910782047');" onmouseout="out('1672016935910782047');" style=""> 464          queueWrite(new ConfigurationGetRequest(this));                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465      }                                                                                                             </span>
<span  style=""> 466                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 467      @Override                                                                                                     </span>
<span class="3426069938226863461" onmouseenter="enter('3426069938226863461');" onmouseout="out('3426069938226863461');" style=""> 468      public void setActivityHand(double progress) {                                                                </span>
<span class="-1967647950949041220" onmouseenter="enter('-1967647950949041220');" onmouseout="out('-1967647950949041220');" style=""> 469          // super.setActivityHand(progress);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 470      }                                                                                                             </span>
<span  style=""> 471                                                                                                                    </span>
<span class="4432705569944803605" onmouseenter="enter('4432705569944803605');" onmouseout="out('4432705569944803605');" style=""> 472      public boolean playRawNotification(NotificationSpec notificationSpec) {                                       </span>
<span class="-6989280013139049302" onmouseenter="enter('-6989280013139049302');" onmouseout="out('-6989280013139049302');" style=""> 473          String senderOrTitle = StringUtils.getFirstOf(notificationSpec.sender, notificationSpec.title);           </span>
<span  style=""> 474                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 475          try {                                                                                                     </span>
<span class="-2594216627053610262" onmouseenter="enter('-2594216627053610262');" onmouseout="out('-2594216627053610262');" style=""> 476              for (NotificationHRConfiguration configuration : this.notificationConfigurations){                    </span>
<span class="-6012792330028782499" onmouseenter="enter('-6012792330028782499');" onmouseout="out('-6012792330028782499');" style=""> 477                  if(configuration.getPackageName().equals(notificationSpec.sourceAppId)){                          </span>
<span class="-8304200794962410012" onmouseenter="enter('-8304200794962410012');" onmouseout="out('-8304200794962410012');" style=""><abbr title=" 478                      queueWrite(new PlayTextNotificationRequest(notificationSpec.sourceAppId, senderOrTitle, notificationSpec.body, this));"> 478                      queueWrite(new PlayTextNotificationRequest(notificationSpec.sourceAppId, senderOrTitle, notifiðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 479                      return true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481              }                                                                                                     </span>
<span class="6520985087381761239" onmouseenter="enter('6520985087381761239');" onmouseout="out('6520985087381761239');" style=""> 482              queueWrite(new PlayTextNotificationRequest(&quot;generic&quot;, senderOrTitle, notificationSpec.body, this));   </span>
<span class="-1580407524319062305" onmouseenter="enter('-1580407524319062305');" onmouseout="out('-1580407524319062305');" style=""> 483          }catch (Exception e){                                                                                     </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 484              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485          }                                                                                                         </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 486          return true;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487      }                                                                                                             </span>
<span  style=""> 488                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 489      @Override                                                                                                     </span>
<span class="-3287587973518064190" onmouseenter="enter('-3287587973518064190');" onmouseout="out('-3287587973518064190');" style=""> 490      public void onFindDevice(boolean start) {                                                                     </span>
<span class="5693720137067729069" onmouseenter="enter('5693720137067729069');" onmouseout="out('5693720137067729069');" style=""> 491          if(start){                                                                                                </span>
<span class="1659990903962259675" onmouseenter="enter('1659990903962259675');" onmouseout="out('1659990903962259675');" style=""> 492              new TransactionBuilder(&quot;vibrate find&quot;)                                                                </span>
<span class="-2922806062965776165" onmouseenter="enter('-2922806062965776165');" onmouseout="out('-2922806062965776165');" style=""> 493                      .write(                                                                                       </span>
<span class="4897579106813855607" onmouseenter="enter('4897579106813855607');" onmouseout="out('4897579106813855607');" style=""><abbr title=" 494                              getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6-74696673696d&quot;)),"> 494                              getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6-74696673ðŸ”µ</abbr></span>
<span class="-4709444814666373888" onmouseenter="enter('-4709444814666373888');" onmouseout="out('-4709444814666373888');" style=""><abbr title=" 495                              new byte[]{(byte) 0x01, (byte) 0x04, (byte) 0x30, (byte) 0x75, (byte) 0x00, (byte) 0x00}"> 495                              new byte[]{(byte) 0x01, (byte) 0x04, (byte) 0x30, (byte) 0x75, (byte) 0x00, (byte) 0x0ðŸ”µ</abbr></span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 496                              )                                                                                     </span>
<span class="7475982186340408444" onmouseenter="enter('7475982186340408444');" onmouseout="out('7475982186340408444');" style=""> 497                      .queue(getDeviceSupport().getQueue());                                                        </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style=""> 498          }else{                                                                                                    </span>
<span class="1659990903962259675" onmouseenter="enter('1659990903962259675');" onmouseout="out('1659990903962259675');" style=""> 499              new TransactionBuilder(&quot;vibrate find&quot;)                                                                </span>
<span class="-2922806062965776165" onmouseenter="enter('-2922806062965776165');" onmouseout="out('-2922806062965776165');" style=""> 500                      .write(                                                                                       </span>
<span class="4897579106813855607" onmouseenter="enter('4897579106813855607');" onmouseout="out('4897579106813855607');" style=""><abbr title=" 501                              getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6-74696673696d&quot;)),"> 501                              getDeviceSupport().getCharacteristic(UUID.fromString(&quot;3dda0005-957f-7d4a-34a6-74696673ðŸ”µ</abbr></span>
<span class="-5350492152909335002" onmouseenter="enter('-5350492152909335002');" onmouseout="out('-5350492152909335002');" style=""> 502                              new byte[]{(byte) 0x02, (byte) 0x05, (byte) 0x04}                                     </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 503                      )                                                                                             </span>
<span class="7475982186340408444" onmouseenter="enter('7475982186340408444');" onmouseout="out('7475982186340408444');" style=""> 504                      .queue(getDeviceSupport().getQueue());                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506      }                                                                                                             </span>
<span  style=""> 507                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 508      @Override                                                                                                     </span>
<span class="8502851833159229707" onmouseenter="enter('8502851833159229707');" onmouseout="out('8502851833159229707');" style=""> 509      public void onSetCallState(CallSpec callSpec) {                                                               </span>
<span class="2570082300251631790" onmouseenter="enter('2570082300251631790');" onmouseout="out('2570082300251631790');" style=""> 510          super.onSetCallState(callSpec);                                                                           </span>
<span class="-5845444396137068141" onmouseenter="enter('-5845444396137068141');" onmouseout="out('-5845444396137068141');" style=""><abbr title=" 511          queueWrite(new PlayCallNotificationRequest(StringUtils.getFirstOf(callSpec.name, callSpec.number), callSpec.command == CallSpec.CALL_INCOMING, this));"> 511          queueWrite(new PlayCallNotificationRequest(StringUtils.getFirstOf(callSpec.name, callSpec.number), callSpeðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 512      }                                                                                                             </span>
<span  style=""> 513                                                                                                                    </span>
<span class="-9163390227004502495" onmouseenter="enter('-9163390227004502495');" onmouseout="out('-9163390227004502495');" style=""> 514      // this method is based on the one from AppMessageHandlerYWeather.java                                        </span>
<span class="-7257237953502575841" onmouseenter="enter('-7257237953502575841');" onmouseout="out('-7257237953502575841');" style=""> 515      private int getIconForConditionCode(int conditionCode, boolean isNight) {                                     </span>
<span class="-7242773537695047282" onmouseenter="enter('-7242773537695047282');" onmouseout="out('-7242773537695047282');" style=""> 516          final int CLEAR_DAY = 0;                                                                                  </span>
<span class="4533171043840830733" onmouseenter="enter('4533171043840830733');" onmouseout="out('4533171043840830733');" style=""> 517          final int CLEAR_NIGHT = 1;                                                                                </span>
<span class="-1044203258765846265" onmouseenter="enter('-1044203258765846265');" onmouseout="out('-1044203258765846265');" style=""> 518          final int CLOUDY = 2;                                                                                     </span>
<span class="6767089093966645579" onmouseenter="enter('6767089093966645579');" onmouseout="out('6767089093966645579');" style=""> 519          final int PARTLY_CLOUDY_DAY = 3;                                                                          </span>
<span class="4494290528913924840" onmouseenter="enter('4494290528913924840');" onmouseout="out('4494290528913924840');" style=""> 520          final int PARTLY_CLOUDY_NIGHT = 4;                                                                        </span>
<span class="-948427530318648638" onmouseenter="enter('-948427530318648638');" onmouseout="out('-948427530318648638');" style=""> 521          final int RAIN = 5;                                                                                       </span>
<span class="-7891962438645220671" onmouseenter="enter('-7891962438645220671');" onmouseout="out('-7891962438645220671');" style=""> 522          final int SNOW = 6;                                                                                       </span>
<span class="7487235255100620000" onmouseenter="enter('7487235255100620000');" onmouseout="out('7487235255100620000');" style=""> 523          final int SNOW_2 = 7; // same as 6?                                                                       </span>
<span class="6109174568599434520" onmouseenter="enter('6109174568599434520');" onmouseout="out('6109174568599434520');" style=""> 524          final int THUNDERSTORM = 8;                                                                               </span>
<span class="-1407557299840080809" onmouseenter="enter('-1407557299840080809');" onmouseout="out('-1407557299840080809');" style=""> 525          final int CLOUDY_2 = 9; // same as 2?                                                                     </span>
<span class="-235578585516231192" onmouseenter="enter('-235578585516231192');" onmouseout="out('-235578585516231192');" style=""> 526          final int WINDY = 10;                                                                                     </span>
<span  style=""> 527                                                                                                                    </span>
<span class="-6750306522095776186" onmouseenter="enter('-6750306522095776186');" onmouseout="out('-6750306522095776186');" style=""> 528          if (conditionCode == 800 || conditionCode == 951) {                                                       </span>
<span class="-7722401087902140861" onmouseenter="enter('-7722401087902140861');" onmouseout="out('-7722401087902140861');" style=""> 529              return isNight ? CLEAR_NIGHT : CLEAR_DAY;                                                             </span>
<span class="3088760508183910638" onmouseenter="enter('3088760508183910638');" onmouseout="out('3088760508183910638');" style=""> 530          } else if (conditionCode &gt; 800 &amp;&amp; conditionCode &lt; 900) {                                                  </span>
<span class="6220617342345108517" onmouseenter="enter('6220617342345108517');" onmouseout="out('6220617342345108517');" style=""> 531              return isNight ? PARTLY_CLOUDY_NIGHT : PARTLY_CLOUDY_DAY;                                             </span>
<span class="3057497190260727363" onmouseenter="enter('3057497190260727363');" onmouseout="out('3057497190260727363');" style=""> 532          } else if (conditionCode &gt;= 300 &amp;&amp; conditionCode &lt; 400) {                                                 </span>
<span class="7963689777117946550" onmouseenter="enter('7963689777117946550');" onmouseout="out('7963689777117946550');" style=""> 533              return RAIN; // drizzle mapped to rain                                                                </span>
<span class="-3733606442935144190" onmouseenter="enter('-3733606442935144190');" onmouseout="out('-3733606442935144190');" style=""> 534          } else if (conditionCode &gt;= 500 &amp;&amp; conditionCode &lt; 600) {                                                 </span>
<span class="2508004717339579833" onmouseenter="enter('2508004717339579833');" onmouseout="out('2508004717339579833');" style=""> 535              return RAIN;                                                                                          </span>
<span class="4918040359999714885" onmouseenter="enter('4918040359999714885');" onmouseout="out('4918040359999714885');" style=""> 536          } else if (conditionCode &gt;= 700 &amp;&amp; conditionCode &lt; 732) {                                                 </span>
<span class="6233122099491282445" onmouseenter="enter('6233122099491282445');" onmouseout="out('6233122099491282445');" style=""> 537              return CLOUDY;                                                                                        </span>
<span class="6405170419319947758" onmouseenter="enter('6405170419319947758');" onmouseout="out('6405170419319947758');" style=""> 538          } else if (conditionCode == 741 || conditionCode == 751 || conditionCode == 761 || conditionCode == 762) {</span>
<span class="2536039853244368761" onmouseenter="enter('2536039853244368761');" onmouseout="out('2536039853244368761');" style=""> 539              return CLOUDY; // fog mapped to cloudy                                                                </span>
<span class="6580216626725103203" onmouseenter="enter('6580216626725103203');" onmouseout="out('6580216626725103203');" style=""> 540          } else if (conditionCode == 771) {                                                                        </span>
<span class="-5268377561975928582" onmouseenter="enter('-5268377561975928582');" onmouseout="out('-5268377561975928582');" style=""> 541              return CLOUDY; // squalls mapped to cloudy                                                            </span>
<span class="-6475883863999659582" onmouseenter="enter('-6475883863999659582');" onmouseout="out('-6475883863999659582');" style=""> 542          } else if (conditionCode == 781) {                                                                        </span>
<span class="-2651444700159349229" onmouseenter="enter('-2651444700159349229');" onmouseout="out('-2651444700159349229');" style=""> 543              return WINDY; // tornato mapped to windy                                                              </span>
<span class="-3846351950108028451" onmouseenter="enter('-3846351950108028451');" onmouseout="out('-3846351950108028451');" style=""> 544          } else if (conditionCode &gt;= 200 &amp;&amp; conditionCode &lt; 300) {                                                 </span>
<span class="-7893213180272113492" onmouseenter="enter('-7893213180272113492');" onmouseout="out('-7893213180272113492');" style=""> 545              return THUNDERSTORM;                                                                                  </span>
<span class="-160375692992858182" onmouseenter="enter('-160375692992858182');" onmouseout="out('-160375692992858182');" style=""> 546          } else if (conditionCode &gt;= 600 &amp;&amp; conditionCode &lt;= 602) {                                                </span>
<span class="4577577423549625750" onmouseenter="enter('4577577423549625750');" onmouseout="out('4577577423549625750');" style=""> 547              return SNOW;                                                                                          </span>
<span class="73124631780569399" onmouseenter="enter('73124631780569399');" onmouseout="out('73124631780569399');" style=""> 548          } else if (conditionCode &gt;= 611 &amp;&amp; conditionCode &lt;= 622) {                                                </span>
<span class="2508004717339579833" onmouseenter="enter('2508004717339579833');" onmouseout="out('2508004717339579833');" style=""> 549              return RAIN;                                                                                          </span>
<span class="5918520655852856943" onmouseenter="enter('5918520655852856943');" onmouseout="out('5918520655852856943');" style=""> 550          } else if (conditionCode == 906) {                                                                        </span>
<span class="-8494627517236710847" onmouseenter="enter('-8494627517236710847');" onmouseout="out('-8494627517236710847');" style=""> 551              return RAIN; // hail mapped to rain                                                                   </span>
<span class="-4632432821354911151" onmouseenter="enter('-4632432821354911151');" onmouseout="out('-4632432821354911151');" style=""> 552          } else if (conditionCode &gt;= 907 &amp;&amp; conditionCode &lt; 957) {                                                 </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 553              return WINDY;                                                                                         </span>
<span class="884594439890815837" onmouseenter="enter('884594439890815837');" onmouseout="out('884594439890815837');" style=""> 554          } else if (conditionCode == 905) {                                                                        </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 555              return WINDY;                                                                                         </span>
<span class="7058363657246863920" onmouseenter="enter('7058363657246863920');" onmouseout="out('7058363657246863920');" style=""> 556          } else if (conditionCode == 900) {                                                                        </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 557              return WINDY;                                                                                         </span>
<span class="-7755582696699634395" onmouseenter="enter('-7755582696699634395');" onmouseout="out('-7755582696699634395');" style=""> 558          } else if (conditionCode == 901 || conditionCode == 902 || conditionCode == 962) {                        </span>
<span class="-4223504377321629067" onmouseenter="enter('-4223504377321629067');" onmouseout="out('-4223504377321629067');" style=""> 559              return WINDY;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 560          }                                                                                                         </span>
<span class="-7722401087902140861" onmouseenter="enter('-7722401087902140861');" onmouseout="out('-7722401087902140861');" style=""> 561          return isNight ? CLEAR_NIGHT : CLEAR_DAY;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562      }                                                                                                             </span>
<span  style=""> 563                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 564      @Override                                                                                                     </span>
<span class="-6167041048283935417" onmouseenter="enter('-6167041048283935417');" onmouseout="out('-6167041048283935417');" style=""> 565      public void onSendWeather(WeatherSpec weatherSpec) {                                                          </span>
<span class="-580696616137890311" onmouseenter="enter('-580696616137890311');" onmouseout="out('-580696616137890311');" style=""> 566          long ts = System.currentTimeMillis();                                                                     </span>
<span class="-8981233749074677785" onmouseenter="enter('-8981233749074677785');" onmouseout="out('-8981233749074677785');" style=""> 567          ts /= 1000;                                                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 568          try {                                                                                                     </span>
<span class="-4452014417400702333" onmouseenter="enter('-4452014417400702333');" onmouseout="out('-4452014417400702333');" style=""> 569              JSONObject responseObject = new JSONObject()                                                          </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 570                      .put(&quot;res&quot;, new JSONObject()                                                                  </span>
<span class="-311134376594128902" onmouseenter="enter('-311134376594128902');" onmouseout="out('-311134376594128902');" style=""> 571                              .put(&quot;id&quot;, 0) // seems the id does not matter?                                        </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 572                              .put(&quot;set&quot;, new JSONObject()                                                          </span>
<span class="-7491386685560898919" onmouseenter="enter('-7491386685560898919');" onmouseout="out('-7491386685560898919');" style=""> 573                                      .put(&quot;weatherInfo&quot;, new JSONObject()                                          </span>
<span class="3913809787685967455" onmouseenter="enter('3913809787685967455');" onmouseout="out('3913809787685967455');" style=""> 574                                              .put(&quot;alive&quot;, ts + 60 * 60)                                           </span>
<span class="4823146304358131104" onmouseenter="enter('4823146304358131104');" onmouseout="out('4823146304358131104');" style=""> 575                                              .put(&quot;unit&quot;, &quot;c&quot;) // FIXME: do not hardcode                           </span>
<span class="3465794128886265400" onmouseenter="enter('3465794128886265400');" onmouseout="out('3465794128886265400');" style=""> 576                                              .put(&quot;temp&quot;, weatherSpec.currentTemp - 273)                           </span>
<span class="-2978941176103258929" onmouseenter="enter('-2978941176103258929');" onmouseout="out('-2978941176103258929');" style=""><abbr title=" 577                                              .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.currentConditionCode, false)) // FIXME do not assume daylight"> 577                                              .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.currentConditionCoðŸ”µ</abbr></span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 578                                      )                                                                             </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 579                              )                                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 580                      );                                                                                            </span>
<span  style=""> 581                                                                                                                    </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 582              queueWrite(new JsonPutRequest(responseObject, this));                                                 </span>
<span  style=""> 583                                                                                                                    </span>
<span class="5317082335628225584" onmouseenter="enter('5317082335628225584');" onmouseout="out('5317082335628225584');" style=""> 584              JSONArray forecastWeekArray = new JSONArray();                                                        </span>
<span class="-2368043815888700658" onmouseenter="enter('-2368043815888700658');" onmouseout="out('-2368043815888700658');" style=""> 585              final String[] weekdays = {&quot;&quot;, &quot;Sun&quot;, &quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;};                      </span>
<span class="-364158713171851732" onmouseenter="enter('-364158713171851732');" onmouseout="out('-364158713171851732');" style=""> 586              Calendar cal = Calendar.getInstance();                                                                </span>
<span class="-4637281821247246720" onmouseenter="enter('-4637281821247246720');" onmouseout="out('-4637281821247246720');" style=""> 587              cal.setTimeInMillis(weatherSpec.timestamp * 1000L);                                                   </span>
<span class="-8629982182851448523" onmouseenter="enter('-8629982182851448523');" onmouseout="out('-8629982182851448523');" style=""> 588              int i = 0;                                                                                            </span>
<span class="4625687820668156386" onmouseenter="enter('4625687820668156386');" onmouseout="out('4625687820668156386');" style=""> 589              for (WeatherSpec.Forecast forecast : weatherSpec.forecasts) {                                         </span>
<span class="3497173000510224029" onmouseenter="enter('3497173000510224029');" onmouseout="out('3497173000510224029');" style=""> 590                  cal.add(Calendar.DATE, 1);                                                                        </span>
<span class="-2706943182093550956" onmouseenter="enter('-2706943182093550956');" onmouseout="out('-2706943182093550956');" style=""> 591                  int dayOfWeek = cal.get(Calendar.DAY_OF_WEEK);                                                    </span>
<span class="8445249603810894149" onmouseenter="enter('8445249603810894149');" onmouseout="out('8445249603810894149');" style=""> 592                  forecastWeekArray.put(new JSONObject()                                                            </span>
<span class="3406552519892389037" onmouseenter="enter('3406552519892389037');" onmouseout="out('3406552519892389037');" style=""> 593                          .put(&quot;day&quot;, weekdays[dayOfWeek])                                                          </span>
<span class="-3341352462469645269" onmouseenter="enter('-3341352462469645269');" onmouseout="out('-3341352462469645269');" style=""><abbr title=" 594                          .put(&quot;cond_id&quot;, getIconForConditionCode(forecast.conditionCode, false)) // FIXME do not assume daylight"> 594                          .put(&quot;cond_id&quot;, getIconForConditionCode(forecast.conditionCode, false)) // FIXME do not asðŸ”µ</abbr></span>
<span class="2713736984512170635" onmouseenter="enter('2713736984512170635');" onmouseout="out('2713736984512170635');" style=""> 595                          .put(&quot;high&quot;, forecast.maxTemp - 273)                                                      </span>
<span class="8922707616504433133" onmouseenter="enter('8922707616504433133');" onmouseout="out('8922707616504433133');" style=""> 596                          .put(&quot;low&quot;, forecast.minTemp - 273)                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 597                  );                                                                                                </span>
<span class="-1631419655189706967" onmouseenter="enter('-1631419655189706967');" onmouseout="out('-1631419655189706967');" style=""> 598                  if (++i == 3) break; // max 3                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599              }                                                                                                     </span>
<span  style=""> 600                                                                                                                    </span>
<span class="1945247200353653685" onmouseenter="enter('1945247200353653685');" onmouseout="out('1945247200353653685');" style=""> 601              JSONArray forecastDayArray = new JSONArray();                                                         </span>
<span class="-3162654741636225130" onmouseenter="enter('-3162654741636225130');" onmouseout="out('-3162654741636225130');" style=""> 602              final int[] hours = {0, 0, 0};                                                                        </span>
<span  style=""> 603                                                                                                                    </span>
<span class="6125525781312818118" onmouseenter="enter('6125525781312818118');" onmouseout="out('6125525781312818118');" style=""> 604              for (int hour : hours) {                                                                              </span>
<span class="1068601706398434110" onmouseenter="enter('1068601706398434110');" onmouseout="out('1068601706398434110');" style=""> 605                  forecastDayArray.put(new JSONObject()                                                             </span>
<span class="-3870856117199987769" onmouseenter="enter('-3870856117199987769');" onmouseout="out('-3870856117199987769');" style=""> 606                          .put(&quot;hour&quot;, hour)                                                                        </span>
<span class="-6006964472079792051" onmouseenter="enter('-6006964472079792051');" onmouseout="out('-6006964472079792051');" style=""> 607                          .put(&quot;cond_id&quot;, 0)                                                                        </span>
<span class="-6609285657661916066" onmouseenter="enter('-6609285657661916066');" onmouseout="out('-6609285657661916066');" style=""> 608                          .put(&quot;temp&quot;, 0)                                                                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 609                  );                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 610              }                                                                                                     </span>
<span  style=""> 611                                                                                                                    </span>
<span  style=""> 612                                                                                                                    </span>
<span class="3790951608586851062" onmouseenter="enter('3790951608586851062');" onmouseout="out('3790951608586851062');" style=""> 613              JSONObject forecastResponseObject = new JSONObject()                                                  </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 614                      .put(&quot;res&quot;, new JSONObject()                                                                  </span>
<span class="3332377282695166753" onmouseenter="enter('3332377282695166753');" onmouseout="out('3332377282695166753');" style=""> 615                              .put(&quot;id&quot;, 0)                                                                         </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 616                              .put(&quot;set&quot;, new JSONObject()                                                          </span>
<span class="7467737770827774855" onmouseenter="enter('7467737770827774855');" onmouseout="out('7467737770827774855');" style=""> 617                                      .put(&quot;weatherApp._.config.locations&quot;, new JSONArray()                         </span>
<span class="-2773638428741427529" onmouseenter="enter('-2773638428741427529');" onmouseout="out('-2773638428741427529');" style=""> 618                                              .put(new JSONObject()                                                 </span>
<span class="3913809787685967455" onmouseenter="enter('3913809787685967455');" onmouseout="out('3913809787685967455');" style=""> 619                                                      .put(&quot;alive&quot;, ts + 60 * 60)                                   </span>
<span class="886713691773163342" onmouseenter="enter('886713691773163342');" onmouseout="out('886713691773163342');" style=""> 620                                                      .put(&quot;city&quot;, weatherSpec.location)                            </span>
<span class="4823146304358131104" onmouseenter="enter('4823146304358131104');" onmouseout="out('4823146304358131104');" style=""> 621                                                      .put(&quot;unit&quot;, &quot;c&quot;) // FIXME: do not hardcode                   </span>
<span class="3465794128886265400" onmouseenter="enter('3465794128886265400');" onmouseout="out('3465794128886265400');" style=""> 622                                                      .put(&quot;temp&quot;, weatherSpec.currentTemp - 273)                   </span>
<span class="6957530022753247995" onmouseenter="enter('6957530022753247995');" onmouseout="out('6957530022753247995');" style=""> 623                                                      .put(&quot;high&quot;, weatherSpec.todayMaxTemp - 273)                  </span>
<span class="-7717570350252662201" onmouseenter="enter('-7717570350252662201');" onmouseout="out('-7717570350252662201');" style=""> 624                                                      .put(&quot;low&quot;, weatherSpec.todayMinTemp - 273)                   </span>
<span class="-5985677233453575860" onmouseenter="enter('-5985677233453575860');" onmouseout="out('-5985677233453575860');" style=""> 625                                                      .put(&quot;rain&quot;, 0)                                               </span>
<span class="-2978941176103258929" onmouseenter="enter('-2978941176103258929');" onmouseout="out('-2978941176103258929');" style=""><abbr title=" 626                                                      .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.currentConditionCode, false)) // FIXME do not assume daylight"> 626                                                      .put(&quot;cond_id&quot;, getIconForConditionCode(weatherSpec.currentConðŸ”µ</abbr></span>
<span class="-3427053046266686031" onmouseenter="enter('-3427053046266686031');" onmouseout="out('-3427053046266686031');" style=""> 627                                                      .put(&quot;forecast_day&quot;, forecastDayArray)                        </span>
<span class="-6314376065462434614" onmouseenter="enter('-6314376065462434614');" onmouseout="out('-6314376065462434614');" style=""> 628                                                      .put(&quot;forecast_week&quot;, forecastWeekArray)                      </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 629                                              )                                                                     </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 630                                      )                                                                             </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 631                              )                                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 632                      );                                                                                            </span>
<span  style=""> 633                                                                                                                    </span>
<span class="5488486443475038572" onmouseenter="enter('5488486443475038572');" onmouseout="out('5488486443475038572');" style=""> 634              queueWrite(new JsonPutRequest(forecastResponseObject, this));                                         </span>
<span  style=""> 635                                                                                                                    </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 636          } catch (JSONException e) {                                                                               </span>
<span class="-3518979045088336375" onmouseenter="enter('-3518979045088336375');" onmouseout="out('-3518979045088336375');" style=""> 637              logger.error(&quot;JSON exception: &quot;, e);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 638          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 639      }                                                                                                             </span>
<span  style=""> 640                                                                                                                    </span>
<span  style=""> 641                                                                                                                    </span>
<span class="-8903998240903156866" onmouseenter="enter('-8903998240903156866');" onmouseout="out('-8903998240903156866');" style=""> 642      // this was used to enumerate the weather icons :)                                                            </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 643      /*                                                                                                            </span>
<span class="9097322268338941135" onmouseenter="enter('9097322268338941135');" onmouseout="out('9097322268338941135');" style=""> 644      static int i = 0;                                                                                             </span>
<span  style=""> 645                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 646      @Override                                                                                                     </span>
<span class="-1180224994468071186" onmouseenter="enter('-1180224994468071186');" onmouseout="out('-1180224994468071186');" style=""> 647      public void onTestNewFunction() {                                                                             </span>
<span class="-580696616137890311" onmouseenter="enter('-580696616137890311');" onmouseout="out('-580696616137890311');" style=""> 648          long ts = System.currentTimeMillis();                                                                     </span>
<span class="-8981233749074677785" onmouseenter="enter('-8981233749074677785');" onmouseout="out('-8981233749074677785');" style=""> 649          ts /= 1000;                                                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 650          try {                                                                                                     </span>
<span class="-4452014417400702333" onmouseenter="enter('-4452014417400702333');" onmouseout="out('-4452014417400702333');" style=""> 651              JSONObject responseObject = new JSONObject()                                                          </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 652                      .put(&quot;res&quot;, new JSONObject()                                                                  </span>
<span class="-311134376594128902" onmouseenter="enter('-311134376594128902');" onmouseout="out('-311134376594128902');" style=""> 653                              .put(&quot;id&quot;, 0) // seems the id does not matter?                                        </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 654                              .put(&quot;set&quot;, new JSONObject()                                                          </span>
<span class="-7491386685560898919" onmouseenter="enter('-7491386685560898919');" onmouseout="out('-7491386685560898919');" style=""> 655                                      .put(&quot;weatherInfo&quot;, new JSONObject()                                          </span>
<span class="3913809787685967455" onmouseenter="enter('3913809787685967455');" onmouseout="out('3913809787685967455');" style=""> 656                                              .put(&quot;alive&quot;, ts + 60 * 60)                                           </span>
<span class="8812574869889008786" onmouseenter="enter('8812574869889008786');" onmouseout="out('8812574869889008786');" style=""> 657                                              .put(&quot;unit&quot;, &quot;c&quot;)                                                     </span>
<span class="-9027201993479344069" onmouseenter="enter('-9027201993479344069');" onmouseout="out('-9027201993479344069');" style=""> 658                                              .put(&quot;temp&quot;, i)                                                       </span>
<span class="-503000518492904339" onmouseenter="enter('-503000518492904339');" onmouseout="out('-503000518492904339');" style=""> 659                                              .put(&quot;cond_id&quot;, i++)                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 660                                      )                                                                             </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 661                              ));                                                                                   </span>
<span  style=""> 662                                                                                                                    </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 663              queueWrite(new JsonPutRequest(responseObject, this));                                                 </span>
<span  style=""> 664                                                                                                                    </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 665          } catch (JSONException e) {                                                                               </span>
<span class="-255862428648050787" onmouseenter="enter('-255862428648050787');" onmouseout="out('-255862428648050787');" style=""> 666              logger.error(&quot; JSON exception: &quot;, e);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 668      }                                                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 669  */                                                                                                                </span>
<span class="4061760400153145133" onmouseenter="enter('4061760400153145133');" onmouseout="out('4061760400153145133');" style=""> 670      public byte[] getSecretKey() {                                                                                </span>
<span class="877865931329337758" onmouseenter="enter('877865931329337758');" onmouseout="out('877865931329337758');" style=""> 671          byte[] authKeyBytes = new byte[16];                                                                       </span>
<span  style=""> 672                                                                                                                    </span>
<span class="6732301069337237036" onmouseenter="enter('6732301069337237036');" onmouseout="out('6732301069337237036');" style=""><abbr title=" 673          SharedPreferences sharedPrefs = GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().getAddress());"> 673          SharedPreferences sharedPrefs = GBApplication.getDeviceSpecificSharedPrefs(getDeviceSupport().getDevice().ðŸ”µ</abbr></span>
<span  style=""> 674                                                                                                                    </span>
<span class="-3395951777279535435" onmouseenter="enter('-3395951777279535435');" onmouseout="out('-3395951777279535435');" style=""> 675          String authKey = sharedPrefs.getString(&quot;authkey&quot;, null);                                                  </span>
<span class="-7368286337752989387" onmouseenter="enter('-7368286337752989387');" onmouseout="out('-7368286337752989387');" style=""> 676          if (authKey != null &amp;&amp; !authKey.isEmpty()) {                                                              </span>
<span class="-7318628780836353920" onmouseenter="enter('-7318628780836353920');" onmouseout="out('-7318628780836353920');" style=""> 677              byte[] srcBytes = authKey.trim().getBytes();                                                          </span>
<span class="-7029558868717651202" onmouseenter="enter('-7029558868717651202');" onmouseout="out('-7029558868717651202');" style=""> 678              if (authKey.length() == 34 &amp;&amp; authKey.startsWith(&quot;0x&quot;)) {                                             </span>
<span class="3552614168594468794" onmouseenter="enter('3552614168594468794');" onmouseout="out('3552614168594468794');" style=""> 679                  srcBytes = GB.hexStringToByteArray(authKey.substring(2));                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680              }                                                                                                     </span>
<span class="6598760317559003341" onmouseenter="enter('6598760317559003341');" onmouseout="out('6598760317559003341');" style=""> 681              System.arraycopy(srcBytes, 0, authKeyBytes, 0, Math.min(srcBytes.length, 16));                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 682          }                                                                                                         </span>
<span  style=""> 683                                                                                                                    </span>
<span class="340030267486824060" onmouseenter="enter('340030267486824060');" onmouseout="out('340030267486824060');" style=""> 684          return authKeyBytes;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 685      }                                                                                                             </span>
<span  style=""> 686                                                                                                                    </span>
<span class="1797454318126944117" onmouseenter="enter('1797454318126944117');" onmouseout="out('1797454318126944117');" style=""> 687      public void setPhoneRandomNumber(byte[] phoneRandomNumber) {                                                  </span>
<span class="-1045014803983093080" onmouseenter="enter('-1045014803983093080');" onmouseout="out('-1045014803983093080');" style=""> 688          this.phoneRandomNumber = phoneRandomNumber;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689      }                                                                                                             </span>
<span  style=""> 690                                                                                                                    </span>
<span class="6353599412516657012" onmouseenter="enter('6353599412516657012');" onmouseout="out('6353599412516657012');" style=""> 691      public byte[] getPhoneRandomNumber() {                                                                        </span>
<span class="-8473936821502081479" onmouseenter="enter('-8473936821502081479');" onmouseout="out('-8473936821502081479');" style=""> 692          return phoneRandomNumber;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 693      }                                                                                                             </span>
<span  style=""> 694                                                                                                                    </span>
<span class="8524954629356124134" onmouseenter="enter('8524954629356124134');" onmouseout="out('8524954629356124134');" style=""> 695      public void setWatchRandomNumber(byte[] watchRandomNumber) {                                                  </span>
<span class="-8554456578054756330" onmouseenter="enter('-8554456578054756330');" onmouseout="out('-8554456578054756330');" style=""> 696          this.watchRandomNumber = watchRandomNumber;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 697      }                                                                                                             </span>
<span  style=""> 698                                                                                                                    </span>
<span class="-817141622160847580" onmouseenter="enter('-817141622160847580');" onmouseout="out('-817141622160847580');" style=""> 699      public byte[] getWatchRandomNumber() {                                                                        </span>
<span class="4512956887887166379" onmouseenter="enter('4512956887887166379');" onmouseout="out('4512956887887166379');" style=""> 700          return watchRandomNumber;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 701      }                                                                                                             </span>
<span  style=""> 702                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 703      @Override                                                                                                     </span>
<span class="-8332902696773003591" onmouseenter="enter('-8332902696773003591');" onmouseout="out('-8332902696773003591');" style=""> 704      public void overwriteButtons(String jsonConfigString) {                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 705          try {                                                                                                     </span>
<span class="-5757883755283420088" onmouseenter="enter('-5757883755283420088');" onmouseout="out('-5757883755283420088');" style=""> 706              JSONArray jsonArray = new JSONArray(                                                                  </span>
<span class="-5162550843991564685" onmouseenter="enter('-5162550843991564685');" onmouseout="out('-5162550843991564685');" style=""> 707                      GBApplication.getPrefs().getString(HRConfigActivity.CONFIG_KEY_Q_ACTIONS, &quot;[]&quot;)               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 708              );                                                                                                    </span>
<span class="-3670193080643996757" onmouseenter="enter('-3670193080643996757');" onmouseout="out('-3670193080643996757');" style=""> 709              String[] menuItems = new String[jsonArray.length()];                                                  </span>
<span class="3800396328797868230" onmouseenter="enter('3800396328797868230');" onmouseout="out('3800396328797868230');" style=""> 710              for (int i = 0; i &lt; jsonArray.length(); i++) menuItems[i] = jsonArray.getString(i);                   </span>
<span  style=""> 711                                                                                                                    </span>
<span class="-8974533950525390112" onmouseenter="enter('-8974533950525390112');" onmouseout="out('-8974533950525390112');" style=""> 712              SharedPreferences prefs = getDeviceSpecificPreferences();                                             </span>
<span class="3731441667100257289" onmouseenter="enter('3731441667100257289');" onmouseout="out('3731441667100257289');" style=""><abbr title=" 713              String upperButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_1_FUNCTION, &quot;weatherApp&quot;);"> 713              String upperButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_1_FUNCTION, &quot;weatherðŸ”µ</abbr></span>
<span class="8778701870293152792" onmouseenter="enter('8778701870293152792');" onmouseout="out('8778701870293152792');" style=""><abbr title=" 714              String middleButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_2_FUNCTION, &quot;commuteApp&quot;);"> 714              String middleButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_2_FUNCTION, &quot;commutðŸ”µ</abbr></span>
<span class="-9179810663962091339" onmouseenter="enter('-9179810663962091339');" onmouseout="out('-9179810663962091339');" style=""><abbr title=" 715              String lowerButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_3_FUNCTION, &quot;musicApp&quot;);"> 715              String lowerButtonApp = prefs.getString(DeviceSettingsPreferenceConst.PREF_BUTTON_3_FUNCTION, &quot;musicApðŸ”µ</abbr></span>
<span  style=""> 716                                                                                                                    </span>
<span class="-2546877682423996320" onmouseenter="enter('-2546877682423996320');" onmouseout="out('-2546877682423996320');" style=""> 717              queueWrite(new ButtonConfigurationPutRequest(                                                         </span>
<span class="959305012337743007" onmouseenter="enter('959305012337743007');" onmouseout="out('959305012337743007');" style=""> 718                      menuItems,                                                                                    </span>
<span class="-2429855445172031576" onmouseenter="enter('-2429855445172031576');" onmouseout="out('-2429855445172031576');" style=""> 719                      upperButtonApp,                                                                               </span>
<span class="7250962454256273524" onmouseenter="enter('7250962454256273524');" onmouseout="out('7250962454256273524');" style=""> 720                      middleButtonApp,                                                                              </span>
<span class="3869959890859912879" onmouseenter="enter('3869959890859912879');" onmouseout="out('3869959890859912879');" style=""> 721                      lowerButtonApp,                                                                               </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 722                      this                                                                                          </span>
<span class="3699784701886273761" onmouseenter="enter('3699784701886273761');" onmouseout="out('3699784701886273761');" style=""> 723              ));                                                                                                   </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 724          } catch (JSONException e) {                                                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 725              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 726          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 727      }                                                                                                             </span>
<span  style=""> 728                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 729      @Override                                                                                                     </span>
<span class="349159621018699769" onmouseenter="enter('349159621018699769');" onmouseout="out('349159621018699769');" style=""> 730      public void onSendConfiguration(String config) {                                                              </span>
<span class="-5681424438451116078" onmouseenter="enter('-5681424438451116078');" onmouseout="out('-5681424438451116078');" style=""> 731          switch (config) {                                                                                         </span>
<span class="-3013237703294184776" onmouseenter="enter('-3013237703294184776');" onmouseout="out('-3013237703294184776');" style=""> 732              case DeviceSettingsPreferenceConst.PREF_BUTTON_1_FUNCTION:                                            </span>
<span class="4315270877947230307" onmouseenter="enter('4315270877947230307');" onmouseout="out('4315270877947230307');" style=""> 733              case DeviceSettingsPreferenceConst.PREF_BUTTON_2_FUNCTION:                                            </span>
<span class="-6016648312979442964" onmouseenter="enter('-6016648312979442964');" onmouseout="out('-6016648312979442964');" style=""> 734              case DeviceSettingsPreferenceConst.PREF_BUTTON_3_FUNCTION:                                            </span>
<span class="-7476048809216327685" onmouseenter="enter('-7476048809216327685');" onmouseout="out('-7476048809216327685');" style=""> 735                  overwriteButtons(null);                                                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 736                  break;                                                                                            </span>
<span class="4621265622900955004" onmouseenter="enter('4621265622900955004');" onmouseout="out('4621265622900955004');" style=""> 737              case DeviceSettingsPreferenceConst.PREF_VIBRATION_STRENGH_PERCENTAGE:                                 </span>
<span class="-4331994456315640395" onmouseenter="enter('-4331994456315640395');" onmouseout="out('-4331994456315640395');" style=""> 738                  setVibrationStrength();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 739          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740      }                                                                                                             </span>
<span  style=""> 741                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 742      @Override                                                                                                     </span>
<span class="-1745999502816791714" onmouseenter="enter('-1745999502816791714');" onmouseout="out('-1745999502816791714');" style=""> 743      public void handleHeartRateCharacteristic(BluetoothGattCharacteristic characteristic) {                       </span>
<span class="644393070755783970" onmouseenter="enter('644393070755783970');" onmouseout="out('644393070755783970');" style=""> 744          super.handleHeartRateCharacteristic(characteristic);                                                      </span>
<span  style=""> 745                                                                                                                    </span>
<span class="-4350509998999229188" onmouseenter="enter('-4350509998999229188');" onmouseout="out('-4350509998999229188');" style=""> 746          byte[] value = characteristic.getValue();                                                                 </span>
<span  style=""> 747                                                                                                                    </span>
<span class="3002516447616481759" onmouseenter="enter('3002516447616481759');" onmouseout="out('3002516447616481759');" style=""> 748          int heartRate = value[1];                                                                                 </span>
<span  style=""> 749                                                                                                                    </span>
<span class="-3503506213363643375" onmouseenter="enter('-3503506213363643375');" onmouseout="out('-3503506213363643375');" style=""> 750          logger.debug(&quot;heart rate: &quot; + heartRate);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 751      }                                                                                                             </span>
<span  style=""> 752                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 753      @Override                                                                                                     </span>
<span class="6377473851875601996" onmouseenter="enter('6377473851875601996');" onmouseout="out('6377473851875601996');" style=""> 754      protected void handleBackgroundCharacteristic(BluetoothGattCharacteristic characteristic) {                   </span>
<span class="-2825981250293151244" onmouseenter="enter('-2825981250293151244');" onmouseout="out('-2825981250293151244');" style=""> 755          super.handleBackgroundCharacteristic(characteristic);                                                     </span>
<span  style=""> 756                                                                                                                    </span>
<span class="-4350509998999229188" onmouseenter="enter('-4350509998999229188');" onmouseout="out('-4350509998999229188');" style=""> 757          byte[] value = characteristic.getValue();                                                                 </span>
<span  style=""> 758                                                                                                                    </span>
<span class="-8910138668401756259" onmouseenter="enter('-8910138668401756259');" onmouseout="out('-8910138668401756259');" style=""> 759          byte requestType = value[1];                                                                              </span>
<span  style=""> 760                                                                                                                    </span>
<span class="-188939088446447101" onmouseenter="enter('-188939088446447101');" onmouseout="out('-188939088446447101');" style=""> 761          if(requestType == (byte) 0x04){                                                                           </span>
<span class="-7559460541575142851" onmouseenter="enter('-7559460541575142851');" onmouseout="out('-7559460541575142851');" style=""> 762              handleCallRequest(value);                                                                             </span>
<span class="8941437976865019066" onmouseenter="enter('8941437976865019066');" onmouseout="out('8941437976865019066');" style=""> 763          }else if (requestType == (byte) 0x05) {                                                                   </span>
<span class="-6049325109739304315" onmouseenter="enter('-6049325109739304315');" onmouseout="out('-6049325109739304315');" style=""> 764              handleMusicRequest(value);                                                                            </span>
<span class="-1129186254434475226" onmouseenter="enter('-1129186254434475226');" onmouseout="out('-1129186254434475226');" style=""> 765          } else if (requestType == (byte) 0x01) {                                                                  </span>
<span class="5556569467739549651" onmouseenter="enter('5556569467739549651');" onmouseout="out('5556569467739549651');" style=""> 766              int eventId = value[2];                                                                               </span>
<span class="4584038208845194803" onmouseenter="enter('4584038208845194803');" onmouseout="out('4584038208845194803');" style=""> 767              logger.info(&quot;got event id &quot; + eventId);                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 768              try {                                                                                                 </span>
<span class="2511008795236813092" onmouseenter="enter('2511008795236813092');" onmouseout="out('2511008795236813092');" style=""> 769                  String jsonString = new String(value, 3, value.length - 3);                                       </span>
<span class="-5055085421008485579" onmouseenter="enter('-5055085421008485579');" onmouseout="out('-5055085421008485579');" style=""> 770                  logger.info(jsonString);                                                                          </span>
<span class="7978684515011278150" onmouseenter="enter('7978684515011278150');" onmouseout="out('7978684515011278150');" style=""> 771                  JSONObject requestJson = new JSONObject(jsonString);                                              </span>
<span  style=""> 772                                                                                                                    </span>
<span class="-2320957157152693274" onmouseenter="enter('-2320957157152693274');" onmouseout="out('-2320957157152693274');" style=""> 773                  JSONObject request = requestJson.getJSONObject(&quot;req&quot;);                                            </span>
<span class="-4724867393653322739" onmouseenter="enter('-4724867393653322739');" onmouseout="out('-4724867393653322739');" style=""> 774                  int requestId = request.getInt(&quot;id&quot;);                                                             </span>
<span  style=""> 775                                                                                                                    </span>
<span class="-9049634342561224124" onmouseenter="enter('-9049634342561224124');" onmouseout="out('-9049634342561224124');" style=""> 776                  if (request.has(&quot;ringMyPhone&quot;)) {                                                                 </span>
<span class="-8947281113981412895" onmouseenter="enter('-8947281113981412895');" onmouseout="out('-8947281113981412895');" style=""> 777                      String action = request.getJSONObject(&quot;ringMyPhone&quot;).getString(&quot;action&quot;);                     </span>
<span class="2672973027305420404" onmouseenter="enter('2672973027305420404');" onmouseout="out('2672973027305420404');" style=""> 778                      logger.info(&quot;got ringMyPhone request; &quot; + action);                                            </span>
<span class="-5388490694046828121" onmouseenter="enter('-5388490694046828121');" onmouseout="out('-5388490694046828121');" style=""> 779                      GBDeviceEventFindPhone findPhoneEvent = new GBDeviceEventFindPhone();                         </span>
<span  style=""> 780                                                                                                                    </span>
<span class="-4452014417400702333" onmouseenter="enter('-4452014417400702333');" onmouseout="out('-4452014417400702333');" style=""> 781                      JSONObject responseObject = new JSONObject()                                                  </span>
<span class="965820144861388483" onmouseenter="enter('965820144861388483');" onmouseout="out('965820144861388483');" style=""> 782                              .put(&quot;res&quot;, new JSONObject()                                                          </span>
<span class="1179326437824087972" onmouseenter="enter('1179326437824087972');" onmouseout="out('1179326437824087972');" style=""> 783                                      .put(&quot;id&quot;, requestId)                                                         </span>
<span class="-2304793708214820828" onmouseenter="enter('-2304793708214820828');" onmouseout="out('-2304793708214820828');" style=""> 784                                      .put(&quot;set&quot;, new JSONObject()                                                  </span>
<span class="-1885979276882630426" onmouseenter="enter('-1885979276882630426');" onmouseout="out('-1885979276882630426');" style=""> 785                                              .put(&quot;ringMyPhone&quot;, new JSONObject()                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 786                                              )                                                                     </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 787                                      )                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 788                              );                                                                                    </span>
<span  style=""> 789                                                                                                                    </span>
<span class="8447204792056966026" onmouseenter="enter('8447204792056966026');" onmouseout="out('8447204792056966026');" style=""> 790                      if (&quot;on&quot;.equals(action)) {                                                                    </span>
<span class="-2212046129077350542" onmouseenter="enter('-2212046129077350542');" onmouseout="out('-2212046129077350542');" style=""> 791                          findPhoneEvent.event = GBDeviceEventFindPhone.Event.START;                                </span>
<span class="1008493374584433440" onmouseenter="enter('1008493374584433440');" onmouseout="out('1008493374584433440');" style=""> 792                          getDeviceSupport().evaluateGBDeviceEvent(findPhoneEvent);                                 </span>
<span class="7519888082405137596" onmouseenter="enter('7519888082405137596');" onmouseout="out('7519888082405137596');" style=""> 793                          responseObject                                                                            </span>
<span class="9073084076350179656" onmouseenter="enter('9073084076350179656');" onmouseout="out('9073084076350179656');" style=""> 794                                  .getJSONObject(&quot;res&quot;)                                                             </span>
<span class="8250331190708228233" onmouseenter="enter('8250331190708228233');" onmouseout="out('8250331190708228233');" style=""> 795                                  .getJSONObject(&quot;set&quot;)                                                             </span>
<span class="-5085635855523546299" onmouseenter="enter('-5085635855523546299');" onmouseout="out('-5085635855523546299');" style=""> 796                                  .getJSONObject(&quot;ringMyPhone&quot;)                                                     </span>
<span class="1178745681736221021" onmouseenter="enter('1178745681736221021');" onmouseout="out('1178745681736221021');" style=""> 797                                  .put(&quot;result&quot;, &quot;on&quot;);                                                             </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 798                          queueWrite(new JsonPutRequest(responseObject, this));                                     </span>
<span class="1879749671025083715" onmouseenter="enter('1879749671025083715');" onmouseout="out('1879749671025083715');" style=""> 799                      } else if (&quot;off&quot;.equals(action)) {                                                            </span>
<span class="-7600947716940752063" onmouseenter="enter('-7600947716940752063');" onmouseout="out('-7600947716940752063');" style=""> 800                          findPhoneEvent.event = GBDeviceEventFindPhone.Event.STOP;                                 </span>
<span class="1008493374584433440" onmouseenter="enter('1008493374584433440');" onmouseout="out('1008493374584433440');" style=""> 801                          getDeviceSupport().evaluateGBDeviceEvent(findPhoneEvent);                                 </span>
<span class="7519888082405137596" onmouseenter="enter('7519888082405137596');" onmouseout="out('7519888082405137596');" style=""> 802                          responseObject                                                                            </span>
<span class="9073084076350179656" onmouseenter="enter('9073084076350179656');" onmouseout="out('9073084076350179656');" style=""> 803                                  .getJSONObject(&quot;res&quot;)                                                             </span>
<span class="8250331190708228233" onmouseenter="enter('8250331190708228233');" onmouseout="out('8250331190708228233');" style=""> 804                                  .getJSONObject(&quot;set&quot;)                                                             </span>
<span class="-5085635855523546299" onmouseenter="enter('-5085635855523546299');" onmouseout="out('-5085635855523546299');" style=""> 805                                  .getJSONObject(&quot;ringMyPhone&quot;)                                                     </span>
<span class="211329696159530084" onmouseenter="enter('211329696159530084');" onmouseout="out('211329696159530084');" style=""> 806                                  .put(&quot;result&quot;, &quot;off&quot;);                                                            </span>
<span class="-544155115278140743" onmouseenter="enter('-544155115278140743');" onmouseout="out('-544155115278140743');" style=""> 807                          queueWrite(new JsonPutRequest(responseObject, this));                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 808                      }                                                                                             </span>
<span class="-7323615196530492579" onmouseenter="enter('-7323615196530492579');" onmouseout="out('-7323615196530492579');" style=""> 809                  } else if (request.has(&quot;weatherInfo&quot;) || request.has(&quot;weatherApp._.config.locations&quot;)) {          </span>
<span class="85506892621979159" onmouseenter="enter('85506892621979159');" onmouseout="out('85506892621979159');" style=""> 810                      logger.info(&quot;Got weatherInfo request&quot;);                                                       </span>
<span class="6306353349066792310" onmouseenter="enter('6306353349066792310');" onmouseout="out('6306353349066792310');" style=""> 811                      WeatherSpec weatherSpec = Weather.getInstance().getWeatherSpec();                             </span>
<span class="-6517897774017589507" onmouseenter="enter('-6517897774017589507');" onmouseout="out('-6517897774017589507');" style=""> 812                      if (weatherSpec != null) {                                                                    </span>
<span class="850959570716159748" onmouseenter="enter('850959570716159748');" onmouseout="out('850959570716159748');" style=""> 813                          onSendWeather(weatherSpec);                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 814                      } else {                                                                                      </span>
<span class="-4814341531313102419" onmouseenter="enter('-4814341531313102419');" onmouseout="out('-4814341531313102419');" style=""> 815                          logger.info(&quot;no weather data available  - ignoring request&quot;);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 816                      }                                                                                             </span>
<span class="-3372250782701972691" onmouseenter="enter('-3372250782701972691');" onmouseout="out('-3372250782701972691');" style=""> 817                  } else if (request.has(&quot;commuteApp._.config.commute_info&quot;)) {                                     </span>
<span class="-7484039887953392259" onmouseenter="enter('-7484039887953392259');" onmouseout="out('-7484039887953392259');" style=""> 818                      String action = request.getJSONObject(&quot;commuteApp._.config.commute_info&quot;)                     </span>
<span class="-2601365183494494605" onmouseenter="enter('-2601365183494494605');" onmouseout="out('-2601365183494494605');" style=""> 819                              .getString(&quot;dest&quot;);                                                                   </span>
<span  style=""> 820                                                                                                                    </span>
<span class="8677829822000511176" onmouseenter="enter('8677829822000511176');" onmouseout="out('8677829822000511176');" style=""> 821                      String startStop = request.getJSONObject(&quot;commuteApp._.config.commute_info&quot;)                  </span>
<span class="4504014461373376475" onmouseenter="enter('4504014461373376475');" onmouseout="out('4504014461373376475');" style=""> 822                              .getString(&quot;action&quot;);                                                                 </span>
<span  style=""> 823                                                                                                                    </span>
<span class="-187304836507611230" onmouseenter="enter('-187304836507611230');" onmouseout="out('-187304836507611230');" style=""> 824                      if (startStop.equals(&quot;stop&quot;)) {                                                               </span>
<span class="3122353555208900571" onmouseenter="enter('3122353555208900571');" onmouseout="out('3122353555208900571');" style=""> 825                          // overwriteButtons(null);                                                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 826                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 827                      }                                                                                             </span>
<span  style=""> 828                                                                                                                    </span>
<span class="1150832081372187083" onmouseenter="enter('1150832081372187083');" onmouseout="out('1150832081372187083');" style=""> 829                      queueWrite(new SetCommuteMenuMessage(&quot;Anfrage wird weitergeleitet...&quot;, false, this));         </span>
<span  style=""> 830                                                                                                                    </span>
<span class="5917993708031460775" onmouseenter="enter('5917993708031460775');" onmouseout="out('5917993708031460775');" style=""> 831                      Intent menuIntent = new Intent(QHybridSupport.QHYBRID_EVENT_COMMUTE_MENU);                    </span>
<span class="-7593836382272947716" onmouseenter="enter('-7593836382272947716');" onmouseout="out('-7593836382272947716');" style=""> 832                      menuIntent.putExtra(&quot;EXTRA_ACTION&quot;, action);                                                  </span>
<span class="-3894772479235782461" onmouseenter="enter('-3894772479235782461');" onmouseout="out('-3894772479235782461');" style=""> 833                      getContext().sendBroadcast(menuIntent);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 834                  } else {                                                                                          </span>
<span class="5137598666970820784" onmouseenter="enter('5137598666970820784');" onmouseout="out('5137598666970820784');" style=""> 835                      logger.warn(&quot;Unhandled request from watch: &quot; + requestJson.toString());                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 836                  }                                                                                                 </span>
<span class="2021063483207698984" onmouseenter="enter('2021063483207698984');" onmouseout="out('2021063483207698984');" style=""> 837              } catch (JSONException e) {                                                                           </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 838                  e.printStackTrace();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 839              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 840          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 841      }                                                                                                             </span>
<span  style=""> 842                                                                                                                    </span>
<span class="-6400233286061743273" onmouseenter="enter('-6400233286061743273');" onmouseout="out('-6400233286061743273');" style=""> 843      private void handleCallRequest(byte[] value) {                                                                </span>
<span class="-3590644139230548939" onmouseenter="enter('-3590644139230548939');" onmouseout="out('-3590644139230548939');" style=""> 844          boolean acceptCall = value[7] == (byte) 0x00;                                                             </span>
<span class="4049879043820680121" onmouseenter="enter('4049879043820680121');" onmouseout="out('4049879043820680121');" style=""> 845          queueWrite(new PlayCallNotificationRequest(&quot;&quot;, false, this));                                             </span>
<span  style=""> 846                                                                                                                    </span>
<span class="6665458041909146094" onmouseenter="enter('6665458041909146094');" onmouseout="out('6665458041909146094');" style=""> 847          GBDeviceEventCallControl callControlEvent = new GBDeviceEventCallControl();                               </span>
<span class="3689026460844638555" onmouseenter="enter('3689026460844638555');" onmouseout="out('3689026460844638555');" style=""><abbr title=" 848          callControlEvent.event = acceptCall ? GBDeviceEventCallControl.Event.START : GBDeviceEventCallControl.Event.REJECT;"> 848          callControlEvent.event = acceptCall ? GBDeviceEventCallControl.Event.START : GBDeviceEventCallControl.EvenðŸ”µ</abbr></span>
<span  style=""> 849                                                                                                                    </span>
<span class="4738702385903726677" onmouseenter="enter('4738702385903726677');" onmouseout="out('4738702385903726677');" style=""> 850          getDeviceSupport().evaluateGBDeviceEvent(callControlEvent);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851      }                                                                                                             </span>
<span  style=""> 852                                                                                                                    </span>
<span class="8416553974703547913" onmouseenter="enter('8416553974703547913');" onmouseout="out('8416553974703547913');" style=""> 853      private void handleMusicRequest(byte[] value) {                                                               </span>
<span class="-7264442020313207444" onmouseenter="enter('-7264442020313207444');" onmouseout="out('-7264442020313207444');" style=""> 854          byte command = value[3];                                                                                  </span>
<span class="439297978283151496" onmouseenter="enter('439297978283151496');" onmouseout="out('439297978283151496');" style=""> 855          logger.info(&quot;got music command: &quot; + command);                                                             </span>
<span class="-1813511864680047347" onmouseenter="enter('-1813511864680047347');" onmouseout="out('-1813511864680047347');" style=""> 856          MUSIC_WATCH_REQUEST request = MUSIC_WATCH_REQUEST.fromCommandByte(command);                               </span>
<span  style=""> 857                                                                                                                    </span>
<span class="-5683743334008418698" onmouseenter="enter('-5683743334008418698');" onmouseout="out('-5683743334008418698');" style=""> 858          GBDeviceEventMusicControl deviceEventMusicControl = new GBDeviceEventMusicControl();                      </span>
<span class="-3093471053493654809" onmouseenter="enter('-3093471053493654809');" onmouseout="out('-3093471053493654809');" style=""> 859          deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.PLAY;                                     </span>
<span  style=""> 860                                                                                                                    </span>
<span class="-5367969794814104253" onmouseenter="enter('-5367969794814104253');" onmouseout="out('-5367969794814104253');" style=""> 861          // TODO add skipping/seeking                                                                              </span>
<span  style=""> 862                                                                                                                    </span>
<span class="-1476594108120808605" onmouseenter="enter('-1476594108120808605');" onmouseout="out('-1476594108120808605');" style=""> 863          switch (request) {                                                                                        </span>
<span class="-7604808754482491529" onmouseenter="enter('-7604808754482491529');" onmouseout="out('-7604808754482491529');" style=""> 864              case MUSIC_REQUEST_PLAY_PAUSE: {                                                                      </span>
<span class="6628176114625634916" onmouseenter="enter('6628176114625634916');" onmouseout="out('6628176114625634916');" style=""> 865                  queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_PLAY_PAUSE));                </span>
<span class="-7292571951332838856" onmouseenter="enter('-7292571951332838856');" onmouseout="out('-7292571951332838856');" style=""> 866                  deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.PLAYPAUSE;                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 867                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 868              }                                                                                                     </span>
<span class="-3513943256990950658" onmouseenter="enter('-3513943256990950658');" onmouseout="out('-3513943256990950658');" style=""> 869              case MUSIC_REQUEST_NEXT: {                                                                            </span>
<span class="-2914236159900871664" onmouseenter="enter('-2914236159900871664');" onmouseout="out('-2914236159900871664');" style=""> 870                  queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_NEXT));                      </span>
<span class="7432071170862747108" onmouseenter="enter('7432071170862747108');" onmouseout="out('7432071170862747108');" style=""> 871                  deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.NEXT;                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 872                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 873              }                                                                                                     </span>
<span class="-320503160388671458" onmouseenter="enter('-320503160388671458');" onmouseout="out('-320503160388671458');" style=""> 874              case MUSIC_REQUEST_PREVIOUS: {                                                                        </span>
<span class="6742500320012674264" onmouseenter="enter('6742500320012674264');" onmouseout="out('6742500320012674264');" style=""> 875                  queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_PREVIOUS));                  </span>
<span class="-101590717290727599" onmouseenter="enter('-101590717290727599');" onmouseout="out('-101590717290727599');" style=""> 876                  deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.PREVIOUS;                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 877                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 878              }                                                                                                     </span>
<span class="5859425638057110790" onmouseenter="enter('5859425638057110790');" onmouseout="out('5859425638057110790');" style=""> 879              case MUSIC_REQUEST_LOUDER: {                                                                          </span>
<span class="-3857602001706076214" onmouseenter="enter('-3857602001706076214');" onmouseout="out('-3857602001706076214');" style=""> 880                  queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_LOUDER));                    </span>
<span class="-6752597915337654134" onmouseenter="enter('-6752597915337654134');" onmouseout="out('-6752597915337654134');" style=""> 881                  deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.VOLUMEUP;                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 882                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 883              }                                                                                                     </span>
<span class="3750638360823897863" onmouseenter="enter('3750638360823897863');" onmouseout="out('3750638360823897863');" style=""> 884              case MUSIC_REQUEST_QUITER: {                                                                          </span>
<span class="2129420423363786169" onmouseenter="enter('2129420423363786169');" onmouseout="out('2129420423363786169');" style=""> 885                  queueWrite(new MusicControlRequest(MUSIC_PHONE_REQUEST.MUSIC_REQUEST_QUITER));                    </span>
<span class="-9110787157641698322" onmouseenter="enter('-9110787157641698322');" onmouseout="out('-9110787157641698322');" style=""> 886                  deviceEventMusicControl.event = GBDeviceEventMusicControl.Event.VOLUMEDOWN;                       </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 887                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 888              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 889          }                                                                                                         </span>
<span  style=""> 890                                                                                                                    </span>
<span class="-3574719939637901034" onmouseenter="enter('-3574719939637901034');" onmouseout="out('-3574719939637901034');" style=""> 891          getDeviceSupport().evaluateGBDeviceEvent(deviceEventMusicControl);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 892      }                                                                                                             </span>
<span  style=""> 893                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 894      @Override                                                                                                     </span>
<span class="-3634467212876653578" onmouseenter="enter('-3634467212876653578');" onmouseout="out('-3634467212876653578');" style=""> 895      public void setCommuteMenuMessage(String message, boolean finished) {                                         </span>
<span class="-2545716908437572756" onmouseenter="enter('-2545716908437572756');" onmouseout="out('-2545716908437572756');" style=""> 896          queueWrite(new SetCommuteMenuMessage(message, finished, this));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 897      }                                                                                                             </span>
<span  style=""> 898                                                                                                                    </span>
<span class="-8749192936898481998" onmouseenter="enter('-8749192936898481998');" onmouseout="out('-8749192936898481998');" style=""> 899      public byte getJsonIndex() {                                                                                  </span>
<span class="-7259315456684755672" onmouseenter="enter('-7259315456684755672');" onmouseout="out('-7259315456684755672');" style=""> 900          return jsonIndex++;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 901      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 902  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            