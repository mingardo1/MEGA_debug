<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>183</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    183
                    <a href="182.html">prev</a>
                    <a href="184.html">next</a>
                    <a href="183_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    BroadleafCommerce/BroadleafCommerce_310203c9852593bd4f07481ea4d693d3096b6994_admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/controller/entity/AdminBasicEntityController.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;310203c9852593bd4f07481ea4d693d3096b6994:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/controller/entity/AdminBasicEntityController.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;310203c9852593bd4f07481ea4d693d3096b6994^1:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/controller/entity/AdminBasicEntityController.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;310203c9852593bd4f07481ea4d693d3096b6994^2:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/controller/entity/AdminBasicEntityController.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;c2b9b7cebcb68adf6459f3932383315f3716ab81:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/controller/entity/AdminBasicEntityController.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [b], [b], [b], [b], [b], [b], [b], [s]], subset: [[bs]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="913821711322743166" onmouseenter="enter('913821711322743166');" onmouseout="out('913821711322743166');" style="">  18 package org.broadleafcommerce.openadmin.web.controller.entity;                                           </span>
<span  style="">  19                                                                                                          </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  20 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="4020017653195254006" onmouseenter="enter('4020017653195254006');" onmouseout="out('4020017653195254006');" style="">  21 import org.apache.commons.collections.MapUtils;                                                          </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  22 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  23 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  24 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  25 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  26 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  27 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  28 import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                 </span>
<span class="-3349026188166660873" onmouseenter="enter('-3349026188166660873');" onmouseout="out('-3349026188166660873');" style="">  29 import org.broadleafcommerce.common.persistence.EntityDuplicator;                                        </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  30 import org.broadleafcommerce.common.presentation.client.AddMethodType;                                   </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  31 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  32 import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                               </span>
<span class="-1492144387614747576" onmouseenter="enter('-1492144387614747576');" onmouseout="out('-1492144387614747576');" style="">  33 import org.broadleafcommerce.common.service.GenericEntityService;                                        </span>
<span class="2429458746821399950" onmouseenter="enter('2429458746821399950');" onmouseout="out('2429458746821399950');" style="">  34 import org.broadleafcommerce.common.util.BLCArrayUtils;                                                  </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  35 import org.broadleafcommerce.common.util.BLCMessageUtils;                                                </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  36 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-1418036767363331062" onmouseenter="enter('-1418036767363331062');" onmouseout="out('-1418036767363331062');" style="">  37 import org.broadleafcommerce.common.web.JsonResponse;                                                    </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  38 import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                              </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  39 import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                            </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  40 import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                      </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  41 import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                           </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  42 import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  43 import org.broadleafcommerce.openadmin.dto.ClassTree;                                                    </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  44 import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                           </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  45 import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                             </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  46 import org.broadleafcommerce.openadmin.dto.Entity;                                                       </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  47 import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                </span>
<span class="6369021917986026789" onmouseenter="enter('6369021917986026789');" onmouseout="out('6369021917986026789');" style="">  48 import org.broadleafcommerce.openadmin.dto.FilterAndSortCriteria;                                        </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  49 import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                  </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  50 import org.broadleafcommerce.openadmin.dto.Property;                                                     </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  51 import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                 </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  52 import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                  </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="">  53 import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                      </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  54 import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                          </span>
<span class="2120683388748052627" onmouseenter="enter('2120683388748052627');" onmouseout="out('2120683388748052627');" style="">  55 import org.broadleafcommerce.openadmin.server.security.dao.AdminUserDao;                                 </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  56 import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                              </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  57 import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                 </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  58 import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                       </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  59 import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                  </span>
<span class="-8603256547657551769" onmouseenter="enter('-8603256547657551769');" onmouseout="out('-8603256547657551769');" style="">  60 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceResponse;                   </span>
<span class="5585583973934060515" onmouseenter="enter('5585583973934060515');" onmouseout="out('5585583973934060515');" style=""><abbr title="  61 import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExtensionManager;">  61 import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExteðŸ”µ</abbr></span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  62 import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;         </span>
<span class="9131075895472939574" onmouseenter="enter('9131075895472939574');" onmouseout="out('9131075895472939574');" style="">  63 import org.broadleafcommerce.openadmin.web.controller.AdminAbstractController;                           </span>
<span class="7254479112554025637" onmouseenter="enter('7254479112554025637');" onmouseout="out('7254479112554025637');" style="">  64 import org.broadleafcommerce.openadmin.web.controller.modal.ModalHeaderType;                             </span>
<span class="6361429912012715647" onmouseenter="enter('6361429912012715647');" onmouseout="out('6361429912012715647');" style="">  65 import org.broadleafcommerce.openadmin.web.dao.MultipleCatalogExtensionManager;                          </span>
<span class="4507704609742395614" onmouseenter="enter('4507704609742395614');" onmouseout="out('4507704609742395614');" style="">  66 import org.broadleafcommerce.openadmin.web.editor.NonNullBooleanEditor;                                  </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  67 import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                        </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  68 import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                      </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  69 import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                  </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  70 import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                         </span>
<span class="-3560862041655103076" onmouseenter="enter('-3560862041655103076');" onmouseout="out('-3560862041655103076');" style="">  71 import org.broadleafcommerce.openadmin.web.form.entity.DefaultMainActions;                               </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  72 import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                       </span>
<span class="-3164920911156953697" onmouseenter="enter('-3164920911156953697');" onmouseout="out('-3164920911156953697');" style="">  73 import org.broadleafcommerce.openadmin.web.form.entity.EntityFormAction;                                 </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  74 import org.broadleafcommerce.openadmin.web.form.entity.Field;                                            </span>
<span class="-5634654756625156689" onmouseenter="enter('-5634654756625156689');" onmouseout="out('-5634654756625156689');" style="">  75 import org.broadleafcommerce.openadmin.web.form.entity.FieldGroup;                                       </span>
<span class="8763280003660953520" onmouseenter="enter('8763280003660953520');" onmouseout="out('8763280003660953520');" style="">  76 import org.springframework.beans.propertyeditors.StringTrimmerEditor;                                    </span>
<span class="4128309806836178094" onmouseenter="enter('4128309806836178094');" onmouseout="out('4128309806836178094');" style="">  77 import org.springframework.stereotype.Controller;                                                        </span>
<span class="2230089600625206822" onmouseenter="enter('2230089600625206822');" onmouseout="out('2230089600625206822');" style="">  78 import org.springframework.ui.Model;                                                                     </span>
<span class="-8661390401087732702" onmouseenter="enter('-8661390401087732702');" onmouseout="out('-8661390401087732702');" style="">  79 import org.springframework.util.MultiValueMap;                                                           </span>
<span class="-5446610002806720528" onmouseenter="enter('-5446610002806720528');" onmouseout="out('-5446610002806720528');" style="">  80 import org.springframework.validation.BindingResult;                                                     </span>
<span class="-5956639343389312225" onmouseenter="enter('-5956639343389312225');" onmouseout="out('-5956639343389312225');" style="">  81 import org.springframework.web.bind.WebDataBinder;                                                       </span>
<span class="6486986322776186621" onmouseenter="enter('6486986322776186621');" onmouseout="out('6486986322776186621');" style="">  82 import org.springframework.web.bind.annotation.InitBinder;                                               </span>
<span class="2718246165073723950" onmouseenter="enter('2718246165073723950');" onmouseout="out('2718246165073723950');" style="">  83 import org.springframework.web.bind.annotation.ModelAttribute;                                           </span>
<span class="3963501418927616634" onmouseenter="enter('3963501418927616634');" onmouseout="out('3963501418927616634');" style="">  84 import org.springframework.web.bind.annotation.PathVariable;                                             </span>
<span class="-7989471178862524182" onmouseenter="enter('-7989471178862524182');" onmouseout="out('-7989471178862524182');" style="">  85 import org.springframework.web.bind.annotation.RequestMapping;                                           </span>
<span class="4584846860636268493" onmouseenter="enter('4584846860636268493');" onmouseout="out('4584846860636268493');" style="">  86 import org.springframework.web.bind.annotation.RequestMethod;                                            </span>
<span class="-8913037601281016619" onmouseenter="enter('-8913037601281016619');" onmouseout="out('-8913037601281016619');" style="">  87 import org.springframework.web.bind.annotation.RequestParam;                                             </span>
<span class="-7662224364501075428" onmouseenter="enter('-7662224364501075428');" onmouseout="out('-7662224364501075428');" style="">  88 import org.springframework.web.bind.annotation.ResponseBody;                                             </span>
<span class="82864906475118767" onmouseenter="enter('82864906475118767');" onmouseout="out('82864906475118767');" style="">  89 import org.springframework.web.servlet.DispatcherServlet;                                                </span>
<span class="4665273347041581179" onmouseenter="enter('4665273347041581179');" onmouseout="out('4665273347041581179');" style="">  90 import org.springframework.web.servlet.FlashMap;                                                         </span>
<span class="4289605998216587359" onmouseenter="enter('4289605998216587359');" onmouseout="out('4289605998216587359');" style="">  91 import org.springframework.web.servlet.mvc.support.RedirectAttributes;                                   </span>
<span class="2383374134797300138" onmouseenter="enter('2383374134797300138');" onmouseout="out('2383374134797300138');" style="">  92 import org.springframework.web.util.UrlPathHelper;                                                       </span>
<span  style="">  93                                                                                                          </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style="">  94 import com.fasterxml.jackson.databind.ObjectMapper;                                                      </span>
<span  style="">  95                                                                                                          </span>
<span class="5998602906817463685" onmouseenter="enter('5998602906817463685');" onmouseout="out('5998602906817463685');" style="">  96 import java.io.Serializable;                                                                             </span>
<span class="8256805395213692609" onmouseenter="enter('8256805395213692609');" onmouseout="out('8256805395213692609');" style="">  97 import java.io.UnsupportedEncodingException;                                                             </span>
<span class="600097467176667378" onmouseenter="enter('600097467176667378');" onmouseout="out('600097467176667378');" style="">  98 import java.net.URLDecoder;                                                                              </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  99 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style=""> 100 import java.util.Arrays;                                                                                 </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style=""> 101 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style=""> 102 import java.util.List;                                                                                   </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style=""> 103 import java.util.Map;                                                                                    </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style=""> 104 import java.util.Map.Entry;                                                                              </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style=""> 105 import java.util.Set;                                                                                    </span>
<span class="5924803009700709999" onmouseenter="enter('5924803009700709999');" onmouseout="out('5924803009700709999');" style=""> 106 import java.util.stream.Stream;                                                                          </span>
<span  style=""> 107                                                                                                          </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 108 import javax.annotation.Resource;                                                                        </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style=""> 109 import javax.servlet.http.HttpServletRequest;                                                            </span>
<span class="-2247759832438184775" onmouseenter="enter('-2247759832438184775');" onmouseout="out('-2247759832438184775');" style=""> 110 import javax.servlet.http.HttpServletResponse;                                                           </span>
<span  style=""> 111                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 112 /**                                                                                                      </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 113 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="5624503434864804252" onmouseenter="enter('5624503434864804252');" onmouseout="out('5624503434864804252');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 114  * The default implementation of the {@link AdminAbstractController}. This delegates every call to       </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 115 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-7311139588847938491" onmouseenter="enter('-7311139588847938491');" onmouseout="out('-7311139588847938491');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 116  * @author Jeff Fischer                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 117  */                                                                                                      </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 118 =======                                                                                                  </span>
<span class="5624503434864804252" onmouseenter="enter('5624503434864804252');" onmouseout="out('5624503434864804252');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 119  * The default implementation of the {@link AdminAbstractController}. This delegates every call to       </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 120 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-497882971048272294" onmouseenter="enter('-497882971048272294');" onmouseout="out('-497882971048272294');" style=""> 121  * super and does not provide any custom-tailored functionality. It is responsible for rendering the     </span>
<span class="-4790859535261881332" onmouseenter="enter('-4790859535261881332');" onmouseout="out('-4790859535261881332');" style=""> 122  * admin for every entity that is not explicitly customized by its own controller.                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 123  *                                                                                                       </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 124  * @author Andre Azzolini (apazzolini)                                                                   </span>
<span class="-7311139588847938491" onmouseenter="enter('-7311139588847938491');" onmouseout="out('-7311139588847938491');" style=""> 125  * @author Jeff Fischer                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 126  */                                                                                                      </span>
<span class="4155455059275642147" onmouseenter="enter('4155455059275642147');" onmouseout="out('4155455059275642147');" style=""> 127 @Controller(&quot;blAdminBasicEntityController&quot;)                                                              </span>
<span class="1298802560762502343" onmouseenter="enter('1298802560762502343');" onmouseout="out('1298802560762502343');" style=""> 128 @RequestMapping(&quot;/{sectionKey:.+}&quot;)                                                                      </span>
<span class="8857493697785984988" onmouseenter="enter('8857493697785984988');" onmouseout="out('8857493697785984988');" style=""> 129 public class AdminBasicEntityController extends AdminAbstractController {                                </span>
<span  style=""> 130                                                                                                          </span>
<span class="6387945601766467724" onmouseenter="enter('6387945601766467724');" onmouseout="out('6387945601766467724');" style=""> 131     protected static final Log LOG = LogFactory.getLog(AdminBasicEntityController.class);                </span>
<span  style=""> 132                                                                                                          </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 133     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span class="4075481265342786632" onmouseenter="enter('4075481265342786632');" onmouseout="out('4075481265342786632');" style=""> 134     public static final String CUSTOM_CRITERIA = &quot;criteria&quot;;                                             </span>
<span class="-5370879055704196240" onmouseenter="enter('-5370879055704196240');" onmouseout="out('-5370879055704196240');" style=""> 135     public static final String IS_SELECTIZE_REQUEST = &quot;isSelectizeRequest&quot;;                              </span>
<span class="1005517399019449970" onmouseenter="enter('1005517399019449970');" onmouseout="out('1005517399019449970');" style=""> 136     protected static final String CURRENT_FOLDER_ID = &quot;currentFolderId&quot;;                                 </span>
<span  style=""> 137                                                                                                          </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style=""> 138     @Resource(name=&quot;blSandBoxHelper&quot;)                                                                    </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style=""> 139     protected SandBoxHelper sandBoxHelper;                                                               </span>
<span  style=""> 140                                                                                                          </span>
<span class="-5193304577016957246" onmouseenter="enter('-5193304577016957246');" onmouseout="out('-5193304577016957246');" style=""> 141     @Resource(name = &quot;blAdminUserDao&quot;)                                                                   </span>
<span class="-2542536430165066610" onmouseenter="enter('-2542536430165066610');" onmouseout="out('-2542536430165066610');" style=""> 142     protected AdminUserDao adminUserDao;                                                                 </span>
<span  style=""> 143                                                                                                          </span>
<span class="1039661802170570045" onmouseenter="enter('1039661802170570045');" onmouseout="out('1039661802170570045');" style=""> 144     @Resource(name=&quot;blDynamicEntityDao&quot;)                                                                 </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style=""> 145     protected DynamicEntityDao dynamicEntityDao;                                                         </span>
<span  style=""> 146                                                                                                          </span>
<span class="3323977399618509653" onmouseenter="enter('3323977399618509653');" onmouseout="out('3323977399618509653');" style=""> 147     @Resource(name = &quot;blAdornedTargetAutoPopulateExtensionManager&quot;)                                      </span>
<span class="-4810148452666974339" onmouseenter="enter('-4810148452666974339');" onmouseout="out('-4810148452666974339');" style=""> 148     protected AdornedTargetAutoPopulateExtensionManager adornedTargetAutoPopulateExtensionManager;       </span>
<span  style=""> 149                                                                                                          </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 150     @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                        </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 151     protected RowLevelSecurityService rowLevelSecurityService;                                           </span>
<span  style=""> 152                                                                                                          </span>
<span class="4471392044492296285" onmouseenter="enter('4471392044492296285');" onmouseout="out('4471392044492296285');" style=""> 153     @Resource(name = &quot;blEntityDuplicator&quot;)                                                               </span>
<span class="-9194612273021432316" onmouseenter="enter('-9194612273021432316');" onmouseout="out('-9194612273021432316');" style=""> 154     protected EntityDuplicator duplicator;                                                               </span>
<span  style=""> 155                                                                                                          </span>
<span class="2258512980686044159" onmouseenter="enter('2258512980686044159');" onmouseout="out('2258512980686044159');" style=""> 156     @Resource(name = &quot;blGenericEntityService&quot;)                                                           </span>
<span class="7024198528514174971" onmouseenter="enter('7024198528514174971');" onmouseout="out('7024198528514174971');" style=""> 157     protected GenericEntityService genericEntityService;                                                 </span>
<span  style=""> 158                                                                                                          </span>
<span class="1447930800600022993" onmouseenter="enter('1447930800600022993');" onmouseout="out('1447930800600022993');" style=""> 159     @Resource(name = &quot;blMultipleCatalogExtensionManager&quot;)                                                </span>
<span class="4452235211304762832" onmouseenter="enter('4452235211304762832');" onmouseout="out('4452235211304762832');" style=""> 160     protected MultipleCatalogExtensionManager multipleCatalogExtensionManager;                           </span>
<span  style=""> 161                                                                                                          </span>
<span class="4471392044492296285" onmouseenter="enter('4471392044492296285');" onmouseout="out('4471392044492296285');" style=""> 162     @Resource(name = &quot;blEntityDuplicator&quot;)                                                               </span>
<span class="-9194612273021432316" onmouseenter="enter('-9194612273021432316');" onmouseout="out('-9194612273021432316');" style=""> 163     protected EntityDuplicator duplicator;                                                               </span>
<span  style=""> 164                                                                                                          </span>
<span class="2258512980686044159" onmouseenter="enter('2258512980686044159');" onmouseout="out('2258512980686044159');" style=""> 165     @Resource(name = &quot;blGenericEntityService&quot;)                                                           </span>
<span class="7024198528514174971" onmouseenter="enter('7024198528514174971');" onmouseout="out('7024198528514174971');" style=""> 166     protected GenericEntityService genericEntityService;                                                 </span>
<span  style=""> 167                                                                                                          </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 168     // ******************************************                                                        </span>
<span class="8145904524131922989" onmouseenter="enter('8145904524131922989');" onmouseout="out('8145904524131922989');" style=""> 169     // REQUEST-MAPPING BOUND CONTROLLER METHODS *                                                        </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 170     // ******************************************                                                        </span>
<span  style=""> 171                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 172     /**                                                                                                  </span>
<span class="5980196098348408716" onmouseenter="enter('5980196098348408716');" onmouseout="out('5980196098348408716');" style=""><abbr title=" 173      * Renders the main entity listing for the specified class, which is based on the current sectionKey with some optional"> 173      * Renders the main entity listing for the specified class, which is based on the current sectionKey ðŸ”µ</abbr></span>
<span class="1756838433111210325" onmouseenter="enter('1756838433111210325');" onmouseout="out('1756838433111210325');" style=""> 174      * criteria.                                                                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 175      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 176      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 177      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 178      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 179      * @param pathVars                                                                                   </span>
<span class="-7836494531350161829" onmouseenter="enter('-7836494531350161829');" onmouseout="out('-7836494531350161829');" style=""> 180      * @param requestParams a Map of property name -&gt; list critiera values                               </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 181      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 182      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 183      */                                                                                                  </span>
<span class="854227037044969777" onmouseenter="enter('854227037044969777');" onmouseout="out('854227037044969777');" style=""> 184     @RequestMapping(value = &quot;&quot;, method = RequestMethod.GET)                                              </span>
<span class="5203424842505603172" onmouseenter="enter('5203424842505603172');" onmouseout="out('5203424842505603172');" style=""> 185     public String viewEntityList(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 186             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 187             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 188         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 189         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 190         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                               </span>
<span class="1452589137399878084" onmouseenter="enter('1452589137399878084');" onmouseout="out('1452589137399878084');" style=""><abbr title=" 191         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars);"> 191         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 192         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 193         DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                           </span>
<span  style=""> 194                                                                                                          </span>
<span class="-9123024135554384147" onmouseenter="enter('-9123024135554384147');" onmouseout="out('-9123024135554384147');" style=""> 195         ListGrid listGrid = formService.buildMainListGrid(drs, cmd, sectionKey, crumbs);                 </span>
<span class="-7197013270379460942" onmouseenter="enter('-7197013270379460942');" onmouseout="out('-7197013270379460942');" style=""> 196         listGrid.setSelectType(ListGrid.SelectType.NONE);                                                </span>
<span  style=""> 197                                                                                                          </span>
<span class="6707774114103003478" onmouseenter="enter('6707774114103003478');" onmouseout="out('6707774114103003478');" style=""> 198         Set&lt;Field&gt; headerFields = listGrid.getHeaderFields();                                            </span>
<span class="6157449347608657417" onmouseenter="enter('6157449347608657417');" onmouseout="out('6157449347608657417');" style=""> 199         if (CollectionUtils.isNotEmpty(headerFields)) {                                                  </span>
<span class="7359980094802675712" onmouseenter="enter('7359980094802675712');" onmouseout="out('7359980094802675712');" style=""> 200             Field firstField = headerFields.iterator().next();                                           </span>
<span class="-7992921859474727563" onmouseenter="enter('-7992921859474727563');" onmouseout="out('-7992921859474727563');" style=""> 201             if (requestParams.containsKey(firstField.getName())) {                                       </span>
<span class="-4847870846432586371" onmouseenter="enter('-4847870846432586371');" onmouseout="out('-4847870846432586371');" style=""> 202                 model.addAttribute(&quot;mainSearchTerm&quot;, requestParams.get(firstField.getName()).get(0));    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204         }                                                                                                </span>
<span  style=""> 205                                                                                                          </span>
<span class="3294377821001327596" onmouseenter="enter('3294377821001327596');" onmouseout="out('3294377821001327596');" style=""> 206         model.addAttribute(&quot;viewType&quot;, &quot;entityList&quot;);                                                    </span>
<span  style=""> 207                                                                                                          </span>
<span class="5223794068523842694" onmouseenter="enter('5223794068523842694');" onmouseout="out('5223794068523842694');" style=""> 208         setupViewEntityListBasicModel(request, cmd, sectionKey, sectionClassName, model, requestParams); </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style=""> 209         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style=""> 210                                                                                                          </span>
<span class="-4487883013655706388" onmouseenter="enter('-4487883013655706388');" onmouseout="out('-4487883013655706388');" style=""> 211         return DEFAULT_CONTAINER_VIEW;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212     }                                                                                                    </span>
<span  style=""> 213                                                                                                          </span>
<span class="5512240627727429054" onmouseenter="enter('5512240627727429054');" onmouseout="out('5512240627727429054');" style=""><abbr title=" 214     protected void setupViewEntityListBasicModel(HttpServletRequest request, ClassMetadata cmd, String sectionKey,"> 214     protected void setupViewEntityListBasicModel(HttpServletRequest request, ClassMetadata cmd, String seðŸ”µ</abbr></span>
<span class="522743254766371502" onmouseenter="enter('522743254766371502');" onmouseout="out('522743254766371502');" style=""> 215             String sectionClassName, Model model, MultiValueMap&lt;String, String&gt; requestParams) {         </span>
<span class="5787313217223527782" onmouseenter="enter('5787313217223527782');" onmouseout="out('5787313217223527782');" style=""> 216         List&lt;EntityFormAction&gt; mainActions = new ArrayList&lt;&gt;();                                          </span>
<span class="-6495333239259317464" onmouseenter="enter('-6495333239259317464');" onmouseout="out('-6495333239259317464');" style=""> 217         addAddActionIfAllowed(sectionClassName, cmd, mainActions);                                       </span>
<span class="-5948121019403308590" onmouseenter="enter('-5948121019403308590');" onmouseout="out('-5948121019403308590');" style=""> 218         extensionManager.getProxy().addAdditionalMainActions(sectionClassName, mainActions);             </span>
<span class="-381816252130957573" onmouseenter="enter('-381816252130957573');" onmouseout="out('-381816252130957573');" style=""> 219         extensionManager.getProxy().modifyMainActions(cmd, mainActions);                                 </span>
<span  style=""> 220                                                                                                          </span>
<span class="-5498329164774951339" onmouseenter="enter('-5498329164774951339');" onmouseout="out('-5498329164774951339');" style=""> 221         // If this came from a delete save, we&#x27;ll have a headerFlash request parameter to take care of   </span>
<span class="6915846846822456322" onmouseenter="enter('6915846846822456322');" onmouseout="out('6915846846822456322');" style=""> 222         if (requestParams.containsKey(&quot;headerFlash&quot;)) {                                                  </span>
<span class="-7374079465520861767" onmouseenter="enter('-7374079465520861767');" onmouseout="out('-7374079465520861767');" style=""> 223             model.addAttribute(&quot;headerFlash&quot;, requestParams.get(&quot;headerFlash&quot;).get(0));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224         }                                                                                                </span>
<span  style=""> 225                                                                                                          </span>
<span class="-5632901614715850082" onmouseenter="enter('-5632901614715850082');" onmouseout="out('-5632901614715850082');" style=""> 226         List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());                   </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style=""> 227         String requestUri = request.getRequestURI();                                                     </span>
<span class="2670437920401576748" onmouseenter="enter('2670437920401576748');" onmouseout="out('2670437920401576748');" style=""> 228         if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) {  </span>
<span class="-901741071381030126" onmouseenter="enter('-901741071381030126');" onmouseout="out('-901741071381030126');" style=""><abbr title=" 229             requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length());"> 229             requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length())ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230         }                                                                                                </span>
<span  style=""> 231                                                                                                          </span>
<span class="-3335875933652663591" onmouseenter="enter('-3335875933652663591');" onmouseout="out('-3335875933652663591');" style=""> 232         model.addAttribute(&quot;isFilter&quot;, (requestParams.size() &gt; 0));                                      </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style=""> 233         model.addAttribute(&quot;currentUri&quot;, requestUri);                                                    </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style=""> 234         model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                                  </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 235         model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 236         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="-4219022137146036385" onmouseenter="enter('-4219022137146036385');" onmouseout="out('-4219022137146036385');" style=""> 237         model.addAttribute(&quot;mainActions&quot;, mainActions);                                                  </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 238         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-7167932239083034641" onmouseenter="enter('-7167932239083034641');" onmouseout="out('-7167932239083034641');" style=""> 239         setTypedEntityModelAttributes(request, model);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240     }                                                                                                    </span>
<span  style=""> 241                                                                                                          </span>
<span class="-3612928683982517341" onmouseenter="enter('-3612928683982517341');" onmouseout="out('-3612928683982517341');" style=""> 242     @RequestMapping(value = &quot;/selectize&quot;, method = RequestMethod.GET)                                    </span>
<span class="-2536734120775641057" onmouseenter="enter('-2536734120775641057');" onmouseout="out('-2536734120775641057');" style=""> 243     public @ResponseBody Map&lt;String, Object&gt; viewEntityListSelectize(HttpServletRequest request,         </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style=""> 244              HttpServletResponse response, Model model,                                                  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 245              @PathVariable Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 246              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 247         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 248         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 249         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                               </span>
<span class="3971039348455381302" onmouseenter="enter('3971039348455381302');" onmouseout="out('3971039348455381302');" style=""><abbr title=" 250         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars)"> 250         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="-5204717557696417186" onmouseenter="enter('-5204717557696417186');" onmouseout="out('-5204717557696417186');" style=""> 251                 .withCustomCriteria(getCustomCriteria(requestParams));                                   </span>
<span  style=""> 252                                                                                                          </span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style=""> 253         ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                           </span>
<span  style=""> 254                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 255         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 256         DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                           </span>
<span  style=""> 257                                                                                                          </span>
<span class="-6840686923261380416" onmouseenter="enter('-6840686923261380416');" onmouseout="out('-6840686923261380416');" style=""> 258         return formService.constructSelectizeOptionMap(drs, cmd);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259     }                                                                                                    </span>
<span  style=""> 260                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 261     /**                                                                                                  </span>
<span class="6015587852497052057" onmouseenter="enter('6015587852497052057');" onmouseout="out('6015587852497052057');" style=""> 262      * Obtains the requested criteria parameter                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 263      *                                                                                                   </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 264      * @param requestParams                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 265      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 266      */                                                                                                  </span>
<span class="-5224065764328446223" onmouseenter="enter('-5224065764328446223');" onmouseout="out('-5224065764328446223');" style=""> 267     protected String[] getCustomCriteria(Map&lt;String, List&lt;String&gt;&gt; requestParams) {                      </span>
<span class="8308653628584061101" onmouseenter="enter('8308653628584061101');" onmouseout="out('8308653628584061101');" style=""> 268         if (requestParams == null || requestParams.isEmpty()) {                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 269             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270         }                                                                                                </span>
<span  style=""> 271                                                                                                          </span>
<span class="-6200156504676301578" onmouseenter="enter('-6200156504676301578');" onmouseout="out('-6200156504676301578');" style=""> 272         List&lt;String&gt; criteria = requestParams.get(CUSTOM_CRITERIA);                                      </span>
<span class="3479198517250864619" onmouseenter="enter('3479198517250864619');" onmouseout="out('3479198517250864619');" style=""> 273         String response = CollectionUtils.isEmpty(criteria) ? null : criteria.get(0);                    </span>
<span class="3591199473111095603" onmouseenter="enter('3591199473111095603');" onmouseout="out('3591199473111095603');" style=""> 274         return new String[] {response};                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275     }                                                                                                    </span>
<span  style=""> 276                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 277     /**                                                                                                  </span>
<span class="53051913897087216" onmouseenter="enter('53051913897087216');" onmouseout="out('53051913897087216');" style=""><abbr title=" 278      * Adds the &quot;Add&quot; button to the main entity form if the current user has permissions to create new instances"> 278      * Adds the &quot;Add&quot; button to the main entity form if the current user has permissions to create new inðŸ”µ</abbr></span>
<span class="-2041834868205006384" onmouseenter="enter('-2041834868205006384');" onmouseout="out('-2041834868205006384');" style=""> 279      * of the entity and all of the fields in the entity aren&#x27;t marked as read only.                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 280      *                                                                                                   </span>
<span class="2579837316240354786" onmouseenter="enter('2579837316240354786');" onmouseout="out('2579837316240354786');" style=""> 281      * @param sectionClassName                                                                           </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style=""> 282      * @param cmd                                                                                        </span>
<span class="-70241175981651056" onmouseenter="enter('-70241175981651056');" onmouseout="out('-70241175981651056');" style=""> 283      * @param mainActions                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 284      */                                                                                                  </span>
<span class="-3535265632615590771" onmouseenter="enter('-3535265632615590771');" onmouseout="out('-3535265632615590771');" style=""><abbr title=" 285     protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormAction&gt; mainActions) {"> 285     protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormActioðŸ”µ</abbr></span>
<span class="-1675673801723949520" onmouseenter="enter('-1675673801723949520');" onmouseout="out('-1675673801723949520');" style=""> 286         if (isAddActionAllowed(sectionClassName, cmd)) {                                                 </span>
<span class="-161553798203722975" onmouseenter="enter('-161553798203722975');" onmouseout="out('-161553798203722975');" style=""> 287             mainActions.add(DefaultMainActions.ADD);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289     }                                                                                                    </span>
<span  style=""> 290                                                                                                          </span>
<span class="4125299149074369729" onmouseenter="enter('4125299149074369729');" onmouseout="out('4125299149074369729');" style=""> 291     protected boolean isAddActionAllowed(final String sectionClassName, final ClassMetadata cmd) {       </span>
<span class="2379281051849826609" onmouseenter="enter('2379281051849826609');" onmouseout="out('2379281051849826609');" style=""> 292         // If the user does not have create permissions, we will not add the &quot;Add New&quot; button            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 293         try {                                                                                            </span>
<span class="-2050050318794737036" onmouseenter="enter('-2050050318794737036');" onmouseout="out('-2050050318794737036');" style=""> 294             adminRemoteSecurityService.securityCheck(sectionClassName, EntityOperationType.ADD);         </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style=""> 295         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style=""> 296             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 297                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299         }                                                                                                </span>
<span  style=""> 300                                                                                                          </span>
<span class="-3272601440754635767" onmouseenter="enter('-3272601440754635767');" onmouseout="out('-3272601440754635767');" style=""> 301         final boolean canAdd = rowLevelSecurityService                                                   </span>
<span class="-1653290766274377775" onmouseenter="enter('-1653290766274377775');" onmouseout="out('-1653290766274377775');" style=""> 302                 .canAdd(adminRemoteSecurityService.getPersistentAdminUser(), sectionClassName, cmd);     </span>
<span class="5125272502277129387" onmouseenter="enter('5125272502277129387');" onmouseout="out('5125272502277129387');" style=""> 303         return isNotReadOnly(cmd) &amp;&amp; canAdd;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304     }                                                                                                    </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 305 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 306                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 307 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 308                                                                                                          </span>
<span class="-3452128956938556370" onmouseenter="enter('-3452128956938556370');" onmouseout="out('-3452128956938556370');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 309         if (canCreate) {                                                                                 </span>
<span class="-5729139490324794214" onmouseenter="enter('-5729139490324794214');" onmouseout="out('-5729139490324794214');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 310             canCreate = rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(), sectionClassName, cmd);"> 310             canCreate = rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 311         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 312                                                                                                          </span>
<span class="2674140840454218035" onmouseenter="enter('2674140840454218035');" onmouseout="out('2674140840454218035');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 313         return canCreate;                                                                                </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 314 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 315                                                                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 316 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-7397004815762425407" onmouseenter="enter('-7397004815762425407');" onmouseout="out('-7397004815762425407');" style=""> 317     protected boolean isNotReadOnly(final ClassMetadata cmd) {                                           </span>
<span class="-5650645308789885306" onmouseenter="enter('-5650645308789885306');" onmouseout="out('-5650645308789885306');" style=""> 318         //check if all the metadata is read only                                                         </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 319         for (Property property : cmd.getProperties()) {                                                  </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style=""> 320             if (property.getMetadata() instanceof BasicFieldMetadata) {                                  </span>
<span class="-4740706861929444273" onmouseenter="enter('-4740706861929444273');" onmouseout="out('-4740706861929444273');" style=""> 321                 if (((BasicFieldMetadata) property.getMetadata()).getReadOnly() == null ||               </span>
<span class="7731016670197656615" onmouseenter="enter('7731016670197656615');" onmouseout="out('7731016670197656615');" style=""> 322                         !((BasicFieldMetadata) property.getMetadata()).getReadOnly()) {                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 323                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 324                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 325             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326         }                                                                                                </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 327 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 328                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 329 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-2496660529180512497" onmouseenter="enter('-2496660529180512497');" onmouseout="out('-2496660529180512497');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 330      * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity screen where"> 330      * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity ðŸ”µ</abbr></span>
<span class="-5672334976076130102" onmouseenter="enter('-5672334976076130102');" onmouseout="out('-5672334976076130102');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 331      * they can then perform operations on sub collections.                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 332      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 333      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 334      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 335      * @param model                                                                                      </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 336 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 337                                                                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 338 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 339         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340     }                                                                                                    </span>
<span  style=""> 341                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 342     /**                                                                                                  </span>
<span class="-403478592182410175" onmouseenter="enter('-403478592182410175');" onmouseout="out('-403478592182410175');" style=""><abbr title=" 343      * Renders the modal form that is used to add a new parent level entity. Note that this form cannot render any"> 343      * Renders the modal form that is used to add a new parent level entity. Note that this form cannot rðŸ”µ</abbr></span>
<span class="-2684076904077363908" onmouseenter="enter('-2684076904077363908');" onmouseout="out('-2684076904077363908');" style=""><abbr title=" 344      * subcollections as operations on those collections require the parent level entity to first be saved and have"> 344      * subcollections as operations on those collections require the parent level entity to first be saveðŸ”µ</abbr></span>
<span class="-2496660529180512497" onmouseenter="enter('-2496660529180512497');" onmouseout="out('-2496660529180512497');" style=""><abbr title=" 345      * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity screen where"> 345      * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity ðŸ”µ</abbr></span>
<span class="-5672334976076130102" onmouseenter="enter('-5672334976076130102');" onmouseout="out('-5672334976076130102');" style=""> 346      * they can then perform operations on sub collections.                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 347      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 348      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 349      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 350      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 351      * @param pathVars                                                                                   </span>
<span class="-7339043177630483847" onmouseenter="enter('-7339043177630483847');" onmouseout="out('-7339043177630483847');" style=""> 352      * @param entityType                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 353      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 354      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 355      */                                                                                                  </span>
<span class="-6494270766546423105" onmouseenter="enter('-6494270766546423105');" onmouseout="out('-6494270766546423105');" style=""> 356     @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.GET)                                          </span>
<span class="8522113168804045570" onmouseenter="enter('8522113168804045570');" onmouseout="out('8522113168804045570');" style=""><abbr title=" 357     public String viewAddEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,"> 357     public String viewAddEntityForm(HttpServletRequest request, HttpServletResponse response, Model modelðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 358             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-1715631339976075770" onmouseenter="enter('-1715631339976075770');" onmouseout="out('-1715631339976075770');" style=""> 359             @RequestParam(defaultValue = &quot;&quot;) String entityType) throws Exception {                       </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 360         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 361         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 362         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 363         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 363         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style=""> 364         ppr.setAddOperationInspect(true);                                                                </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 365         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 366 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 367                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 368 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 369             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 370         } else {                                                                                         </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 371             entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 372         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 373                                                                                                          </span>
<span class="4098005746663533241" onmouseenter="enter('4098005746663533241');" onmouseout="out('4098005746663533241');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 374         EntityForm entityForm = formService.createEntityForm(cmd, sectionCrumbs);                        </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 375 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 376                                                                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 377 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="2600422776092116832" onmouseenter="enter('2600422776092116832');" onmouseout="out('2600422776092116832');" style=""> 378         entityType = determineEntityType(entityType, cmd);                                               </span>
<span  style=""> 379                                                                                                          </span>
<span class="4098005746663533241" onmouseenter="enter('4098005746663533241');" onmouseout="out('4098005746663533241');" style=""> 380         EntityForm entityForm = formService.createEntityForm(cmd, sectionCrumbs);                        </span>
<span  style=""> 381                                                                                                          </span>
<span class="5826594571687596812" onmouseenter="enter('5826594571687596812');" onmouseout="out('5826594571687596812');" style=""><abbr title=" 382         // We need to make sure that the ceiling entity is set to the interface and the specific entity type"> 382         // We need to make sure that the ceiling entity is set to the interface and the specific entity tðŸ”µ</abbr></span>
<span class="37161952125740808" onmouseenter="enter('37161952125740808');" onmouseout="out('37161952125740808');" style=""> 383         // is set to the type we&#x27;re going to be creating.                                                </span>
<span class="5062735442039535924" onmouseenter="enter('5062735442039535924');" onmouseout="out('5062735442039535924');" style=""> 384         entityForm.setCeilingEntityClassname(cmd.getCeilingType());                                      </span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style=""> 385         entityForm.setEntityType(entityType);                                                            </span>
<span  style=""> 386                                                                                                          </span>
<span class="-5227856854691424770" onmouseenter="enter('-5227856854691424770');" onmouseout="out('-5227856854691424770');" style=""><abbr title=" 387         // When we initially build the class metadata (and thus, the entity form), we had all of the possible"> 387         // When we initially build the class metadata (and thus, the entity form), we had all of the possðŸ”µ</abbr></span>
<span class="5105619661852614163" onmouseenter="enter('5105619661852614163');" onmouseout="out('5105619661852614163');" style=""><abbr title=" 388         // polymorphic fields built out. Now that we have a concrete entity type to render, we can remove the"> 388         // polymorphic fields built out. Now that we have a concrete entity type to render, we can removeðŸ”µ</abbr></span>
<span class="-3843175043245177501" onmouseenter="enter('-3843175043245177501');" onmouseout="out('-3843175043245177501');" style=""> 389         // fields that are not applicable for this given entity type.                                    </span>
<span class="-2935519954456371455" onmouseenter="enter('-2935519954456371455');" onmouseout="out('-2935519954456371455');" style=""> 390         formService.removeNonApplicableFields(cmd, entityForm, entityType);                              </span>
<span  style=""> 391                                                                                                          </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 392         modifyAddEntityForm(entityForm, pathVars);                                                       </span>
<span  style=""> 393                                                                                                          </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 394         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 395         model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                               </span>
<span  style=""> 396                                                                                                          </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 397         model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 398         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 399         model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 400         setModelAttributes(model, sectionKey);                                                           </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style=""> 401         return MODAL_CONTAINER_VIEW;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 402     }                                                                                                    </span>
<span  style=""> 403                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 404 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6822582914767657426" onmouseenter="enter('6822582914767657426');" onmouseout="out('6822582914767657426');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 405     // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic         </span>
<span class="6925903770450869702" onmouseenter="enter('6925903770450869702');" onmouseout="out('6925903770450869702');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 406     // types for this entity.                                                                            </span>
<span class="3096473113628081949" onmouseenter="enter('3096473113628081949');" onmouseout="out('3096473113628081949');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 407     protected String determineEntityType(String entityType, final ClassMetadata cmd)                     </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 408 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 409     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 410                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 411     /**                                                                                                  </span>
<span class="-2292124409166412817" onmouseenter="enter('-2292124409166412817');" onmouseout="out('-2292124409166412817');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 412      * Processes the request to add a new entity. If successful, returns a redirect to the newly created entity."> 412      * Processes the request to add a new entity. If successful, returns a redirect to the newly created ðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 413      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 414      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 415      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 416      * @param model                                                                                      </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 417 =======                                                                                                  </span>
<span class="6822582914767657426" onmouseenter="enter('6822582914767657426');" onmouseout="out('6822582914767657426');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 418     // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic         </span>
<span class="6925903770450869702" onmouseenter="enter('6925903770450869702');" onmouseout="out('6925903770450869702');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 419     // types for this entity.                                                                            </span>
<span class="3096473113628081949" onmouseenter="enter('3096473113628081949');" onmouseout="out('3096473113628081949');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 420     protected String determineEntityType(String entityType, final ClassMetadata cmd)                     </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 421 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="363372168864539985" onmouseenter="enter('363372168864539985');" onmouseout="out('363372168864539985');" style=""> 422             throws UnsupportedEncodingException {                                                        </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 423         if (StringUtils.isBlank(entityType)) {                                                           </span>
<span class="2333848870190395940" onmouseenter="enter('2333848870190395940');" onmouseout="out('2333848870190395940');" style=""> 424             if (cmd.getPolymorphicEntities().getChildren().length == 0) {                                </span>
<span class="2097783908693957449" onmouseenter="enter('2097783908693957449');" onmouseout="out('2097783908693957449');" style=""> 425                 entityType = cmd.getPolymorphicEntities().getFullyQualifiedClassname();                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 426             } else {                                                                                     </span>
<span class="-6902702564943152777" onmouseenter="enter('-6902702564943152777');" onmouseout="out('-6902702564943152777');" style=""> 427                 entityType = getDefaultEntityType();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 429         } else {                                                                                         </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style=""> 430             entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 431         }                                                                                                </span>
<span class="2597693607778452486" onmouseenter="enter('2597693607778452486');" onmouseout="out('2597693607778452486');" style=""> 432         return entityType;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433     }                                                                                                    </span>
<span  style=""> 434                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 435     /**                                                                                                  </span>
<span class="-2292124409166412817" onmouseenter="enter('-2292124409166412817');" onmouseout="out('-2292124409166412817');" style=""><abbr title=" 436      * Processes the request to add a new entity. If successful, returns a redirect to the newly created entity."> 436      * Processes the request to add a new entity. If successful, returns a redirect to the newly created ðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 437      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 438      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 439      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 440      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 441      * @param pathVars                                                                                   </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 442      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 443      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 444      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 445      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 446      */                                                                                                  </span>
<span class="-1840738840686664300" onmouseenter="enter('-1840738840686664300');" onmouseout="out('-1840738840686664300');" style=""> 447     @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.POST)                                         </span>
<span class="8551380442207718095" onmouseenter="enter('8551380442207718095');" onmouseout="out('8551380442207718095');" style=""> 448     public String addEntity(HttpServletRequest request, HttpServletResponse response, Model model,       </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 449             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title=" 450             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {"> 450             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 451         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 452         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 453         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="2596618104185041854" onmouseenter="enter('2596618104185041854');" onmouseout="out('2596618104185041854');" style=""><abbr title=" 454         ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 454         ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassNameðŸ”µ</abbr></span>
<span  style=""> 455                                                                                                          </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 456         extractDynamicFormFields(cmd, entityForm);                                                       </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 457         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 457         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="-4281879219750019053" onmouseenter="enter('-4281879219750019053');" onmouseout="out('-4281879219750019053');" style=""> 458         Entity entity = service.addEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();       </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 459         entityFormValidator.validate(entityForm, entity, result);                                        </span>
<span  style=""> 460                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 461         if (result.hasErrors()) {                                                                        </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 462             entityForm.clearFieldsMap();                                                                 </span>
<span class="-312181662169537666" onmouseenter="enter('-312181662169537666');" onmouseout="out('-312181662169537666');" style=""> 463             formService.populateEntityForm(cmd, entity, entityForm, sectionCrumbs);                      </span>
<span  style=""> 464                                                                                                          </span>
<span class="254171966199148419" onmouseenter="enter('254171966199148419');" onmouseout="out('254171966199148419');" style=""> 465             formService.removeNonApplicableFields(cmd, entityForm, entityForm.getEntityType());          </span>
<span  style=""> 466                                                                                                          </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 467             modifyAddEntityForm(entityForm, pathVars);                                                   </span>
<span  style=""> 468                                                                                                          </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 469             model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                           </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 470             model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                        </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 471             model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                 </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 472             model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 473             setModelAttributes(model, sectionKey);                                                       </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style=""> 474             return MODAL_CONTAINER_VIEW;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475         }                                                                                                </span>
<span  style=""> 476                                                                                                          </span>
<span class="7931002159447649906" onmouseenter="enter('7931002159447649906');" onmouseout="out('7931002159447649906');" style=""> 477         // Note that AJAX Redirects need the context path prepended to them                              </span>
<span class="-9104189425594863479" onmouseenter="enter('-9104189425594863479');" onmouseout="out('-9104189425594863479');" style=""><abbr title=" 478         return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).getValue();"> 478         return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 479     }                                                                                                    </span>
<span  style=""> 480                                                                                                          </span>
<span class="1290933159858539781" onmouseenter="enter('1290933159858539781');" onmouseout="out('1290933159858539781');" style=""> 481     @RequestMapping(value = &quot;/{id}/duplicate&quot;, method = RequestMethod.POST)                              </span>
<span class="-7829728733805273999" onmouseenter="enter('-7829728733805273999');" onmouseout="out('-7829728733805273999');" style=""> 482     public String duplicateEntity(final HttpServletRequest request,                                      </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 483 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="277417182565607361" onmouseenter="enter('277417182565607361');" onmouseout="out('277417182565607361');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 484             final HttpServletResponse response,                                                          </span>
<span class="7665770463560391322" onmouseenter="enter('7665770463560391322');" onmouseout="out('7665770463560391322');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 485             final Model model,                                                                           </span>
<span class="5144416334471976319" onmouseenter="enter('5144416334471976319');" onmouseout="out('5144416334471976319');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 486             @PathVariable final Map&lt;String, String&gt; pathVars,                                            </span>
<span class="5884230296910152604" onmouseenter="enter('5884230296910152604');" onmouseout="out('5884230296910152604');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 487             @PathVariable(value = &quot;id&quot;) final String id,                                                 </span>
<span class="5134952934925976911" onmouseenter="enter('5134952934925976911');" onmouseout="out('5134952934925976911');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 488             @ModelAttribute(value = &quot;entityForm&quot;) final EntityForm entityForm,                           </span>
<span class="3593210188792847894" onmouseenter="enter('3593210188792847894');" onmouseout="out('3593210188792847894');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 489             final BindingResult result) throws Exception {                                               </span>
<span class="5473402149144087547" onmouseenter="enter('5473402149144087547');" onmouseout="out('5473402149144087547');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 490         final String sectionKey = getSectionKey(pathVars);                                               </span>
<span class="5437662011929987553" onmouseenter="enter('5437662011929987553');" onmouseout="out('5437662011929987553');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 491         final String sectionClassName = getClassNameForSection(sectionKey);                              </span>
<span class="8553976943183535096" onmouseenter="enter('8553976943183535096');" onmouseout="out('8553976943183535096');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 492         final Class&lt;?&gt; entityClass = dynamicEntityDao.getImplClass(sectionClassName);                    </span>
<span class="3365797270076600425" onmouseenter="enter('3365797270076600425');" onmouseout="out('3365797270076600425');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 493         final long identifier = Long.parseLong(id);                                                      </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 494                                                                                                          </span>
<span class="-138107922525045121" onmouseenter="enter('-138107922525045121');" onmouseout="out('-138107922525045121');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 495         if (duplicator.validate(entityClass, identifier)) {                                              </span>
<span class="5493542447860389431" onmouseenter="enter('5493542447860389431');" onmouseout="out('5493542447860389431');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 496             final Object duplicate;                                                                      </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 497                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 498             try {                                                                                        </span>
<span class="-2283233085854885260" onmouseenter="enter('-2283233085854885260');" onmouseout="out('-2283233085854885260');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 499                 duplicate = duplicator.copy(entityClass, identifier);                                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 500             } catch (Exception e) {                                                                      </span>
<span class="-8850460393574909327" onmouseenter="enter('-8850460393574909327');" onmouseout="out('-8850460393574909327');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 501                 LOG.error(&quot;Could not duplicate entity&quot;, e);                                              </span>
<span class="-7503880796159563304" onmouseenter="enter('-7503880796159563304');" onmouseout="out('-7503880796159563304');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 502                 return getErrorDuplicatingResponse(response, &quot;Duplication_Failure&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 503             }                                                                                            </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 504                                                                                                          </span>
<span class="9202899875978069713" onmouseenter="enter('9202899875978069713');" onmouseout="out('9202899875978069713');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 505             final Serializable dupId = genericEntityService.getIdentifier(duplicate);                    </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 506                                                                                                          </span>
<span class="7931002159447649906" onmouseenter="enter('7931002159447649906');" onmouseout="out('7931002159447649906');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 507             // Note that AJAX Redirects need the context path prepended to them                          </span>
<span class="6804960621276438337" onmouseenter="enter('6804960621276438337');" onmouseout="out('6804960621276438337');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 508             return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + dupId;                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 509         } else {                                                                                         </span>
<span class="-110948502599545681" onmouseenter="enter('-110948502599545681');" onmouseout="out('-110948502599545681');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 510             return getErrorDuplicatingResponse(response, &quot;Validation_Failure&quot;);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 511         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 512     }                                                                                                    </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 513                                                                                                          </span>
<span class="-106656131545478097" onmouseenter="enter('-106656131545478097');" onmouseout="out('-106656131545478097');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 514     protected String getErrorDuplicatingResponse(HttpServletResponse response, String code) {            </span>
<span class="7659712838923572459" onmouseenter="enter('7659712838923572459');" onmouseout="out('7659712838923572459');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 515         List&lt;Map&lt;String, Object&gt;&gt; errors = new ArrayList&lt;&gt;();                                            </span>
<span class="-6240695079450735253" onmouseenter="enter('-6240695079450735253');" onmouseout="out('-6240695079450735253');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 516         String message;                                                                                  </span>
<span class="-7826420477706002406" onmouseenter="enter('-7826420477706002406');" onmouseout="out('-7826420477706002406');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 517         BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();          </span>
<span class="-2727648393614728" onmouseenter="enter('-2727648393614728');" onmouseout="out('-2727648393614728');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 518         if (context != null &amp;&amp; context.getMessageSource() != null) {                                     </span>
<span class="-5978418614812499702" onmouseenter="enter('-5978418614812499702');" onmouseout="out('-5978418614812499702');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 519             message = context.getMessageSource()                                                         </span>
<span class="1624598595284946587" onmouseenter="enter('1624598595284946587');" onmouseout="out('1624598595284946587');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 520                     .getMessage(code, null, code, context.getJavaLocale());                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 521         } else {                                                                                         </span>
<span class="-9004243737964586892" onmouseenter="enter('-9004243737964586892');" onmouseout="out('-9004243737964586892');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 522             LOG.warn(                                                                                    </span>
<span class="6269614064328325287" onmouseenter="enter('6269614064328325287');" onmouseout="out('6269614064328325287');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 523                     &quot;Could not find the MessageSource on the current request, &quot;                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 524 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 525         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 526         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                           </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 527         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);"> 527         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, patðŸ”µ</abbr></span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 528                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 529         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-8780243800866475465" onmouseenter="enter('-8780243800866475465');" onmouseout="out('-8780243800866475465');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 530         Entity entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 531                                                                                                          </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 532         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);"> 532         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, cðŸ”µ</abbr></span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 533                                                                                                          </span>
<span class="872584542219399793" onmouseenter="enter('872584542219399793');" onmouseout="out('872584542219399793');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 534         EntityForm entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 535                                                                                                          </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 536         if (isAddRequest(entity)) {                                                                      </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 537             modifyAddEntityForm(entityForm, pathVars);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 538         } else {                                                                                         </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 539             modifyEntityForm(entityForm, pathVars);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 540         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 541                                                                                                          </span>
<span class="1981952247030149381" onmouseenter="enter('1981952247030149381');" onmouseout="out('1981952247030149381');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 542         if (request.getParameter(&quot;headerFlash&quot;) != null) {                                               </span>
<span class="-2367607735703612103" onmouseenter="enter('-2367607735703612103');" onmouseout="out('-2367607735703612103');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 543             model.addAttribute(&quot;headerFlash&quot;, request.getParameter(&quot;headerFlash&quot;));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 544         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 545                                                                                                          </span>
<span class="-6569554975283424126" onmouseenter="enter('-6569554975283424126');" onmouseout="out('-6569554975283424126');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 546         // Set the sectionKey again incase this is a typed entity                                        </span>
<span class="4201932972037321722" onmouseenter="enter('4201932972037321722');" onmouseout="out('4201932972037321722');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 547         entityForm.setSectionKey(sectionKey);                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 548                                                                                                          </span>
<span class="5387752430767952558" onmouseenter="enter('5387752430767952558');" onmouseout="out('5387752430767952558');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 549         // Build the current url in the cast that this is a typed entity                                 </span>
<span class="3856485652570637824" onmouseenter="enter('3856485652570637824');" onmouseout="out('3856485652570637824');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 550         String originatingUri = new UrlPathHelper().getOriginatingRequestUri(request);                   </span>
<span class="-1728408616530607173" onmouseenter="enter('-1728408616530607173');" onmouseout="out('-1728408616530607173');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 551         int startIndex = request.getContextPath().length();                                              </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 552                                                                                                          </span>
<span class="654052499558570629" onmouseenter="enter('654052499558570629');" onmouseout="out('654052499558570629');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 553         // Remove the context path from servlet path                                                     </span>
<span class="526107488063217153" onmouseenter="enter('526107488063217153');" onmouseout="out('526107488063217153');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 554         String currentUrl = originatingUri.substring(startIndex);                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 555                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 556         model.addAttribute(&quot;entity&quot;, entity);                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 557         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-4977411250845897884" onmouseenter="enter('-4977411250845897884');" onmouseout="out('-4977411250845897884');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 558         model.addAttribute(&quot;currentUrl&quot;, currentUrl);                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 559                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 560         setModelAttributes(model, sectionKey);                                                           </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 561                                                                                                          </span>
<span class="8236570979651257825" onmouseenter="enter('8236570979651257825');" onmouseout="out('8236570979651257825');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 562         // We want to replace author ids with their names                                                </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 563         addAuditableDisplayFields(entityForm);                                                           </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 564                                                                                                          </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 565         if (isAjaxRequest(request)) {                                                                    </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 566             entityForm.setReadOnly();                                                                    </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 567             model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                          </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 568             model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 569             return &quot;modules/modalContainer&quot;;                                                             </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 570 =======                                                                                                  </span>
<span class="277417182565607361" onmouseenter="enter('277417182565607361');" onmouseout="out('277417182565607361');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 571             final HttpServletResponse response,                                                          </span>
<span class="7665770463560391322" onmouseenter="enter('7665770463560391322');" onmouseout="out('7665770463560391322');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 572             final Model model,                                                                           </span>
<span class="5144416334471976319" onmouseenter="enter('5144416334471976319');" onmouseout="out('5144416334471976319');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 573             @PathVariable final Map&lt;String, String&gt; pathVars,                                            </span>
<span class="5884230296910152604" onmouseenter="enter('5884230296910152604');" onmouseout="out('5884230296910152604');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 574             @PathVariable(value = &quot;id&quot;) final String id,                                                 </span>
<span class="5134952934925976911" onmouseenter="enter('5134952934925976911');" onmouseout="out('5134952934925976911');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 575             @ModelAttribute(value = &quot;entityForm&quot;) final EntityForm entityForm,                           </span>
<span class="3593210188792847894" onmouseenter="enter('3593210188792847894');" onmouseout="out('3593210188792847894');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 576             final BindingResult result) throws Exception {                                               </span>
<span class="5473402149144087547" onmouseenter="enter('5473402149144087547');" onmouseout="out('5473402149144087547');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 577         final String sectionKey = getSectionKey(pathVars);                                               </span>
<span class="5437662011929987553" onmouseenter="enter('5437662011929987553');" onmouseout="out('5437662011929987553');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 578         final String sectionClassName = getClassNameForSection(sectionKey);                              </span>
<span class="8553976943183535096" onmouseenter="enter('8553976943183535096');" onmouseout="out('8553976943183535096');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 579         final Class&lt;?&gt; entityClass = dynamicEntityDao.getImplClass(sectionClassName);                    </span>
<span class="3365797270076600425" onmouseenter="enter('3365797270076600425');" onmouseout="out('3365797270076600425');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 580         final long identifier = Long.parseLong(id);                                                      </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 581                                                                                                          </span>
<span class="-138107922525045121" onmouseenter="enter('-138107922525045121');" onmouseout="out('-138107922525045121');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 582         if (duplicator.validate(entityClass, identifier)) {                                              </span>
<span class="5493542447860389431" onmouseenter="enter('5493542447860389431');" onmouseout="out('5493542447860389431');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 583             final Object duplicate;                                                                      </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 584                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 585             try {                                                                                        </span>
<span class="-2283233085854885260" onmouseenter="enter('-2283233085854885260');" onmouseout="out('-2283233085854885260');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 586                 duplicate = duplicator.copy(entityClass, identifier);                                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 587             } catch (Exception e) {                                                                      </span>
<span class="-8850460393574909327" onmouseenter="enter('-8850460393574909327');" onmouseout="out('-8850460393574909327');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 588                 LOG.error(&quot;Could not duplicate entity&quot;, e);                                              </span>
<span class="-7503880796159563304" onmouseenter="enter('-7503880796159563304');" onmouseout="out('-7503880796159563304');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 589                 return getErrorDuplicatingResponse(response, &quot;Duplication_Failure&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 590             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 591                                                                                                          </span>
<span class="9202899875978069713" onmouseenter="enter('9202899875978069713');" onmouseout="out('9202899875978069713');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 592             final Serializable dupId = genericEntityService.getIdentifier(duplicate);                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 593                                                                                                          </span>
<span class="7931002159447649906" onmouseenter="enter('7931002159447649906');" onmouseout="out('7931002159447649906');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 594             // Note that AJAX Redirects need the context path prepended to them                          </span>
<span class="6804960621276438337" onmouseenter="enter('6804960621276438337');" onmouseout="out('6804960621276438337');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 595             return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + dupId;                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 596         } else {                                                                                         </span>
<span class="-110948502599545681" onmouseenter="enter('-110948502599545681');" onmouseout="out('-110948502599545681');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 597             return getErrorDuplicatingResponse(response, &quot;Validation_Failure&quot;);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 598         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 599     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 600                                                                                                          </span>
<span class="-106656131545478097" onmouseenter="enter('-106656131545478097');" onmouseout="out('-106656131545478097');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 601     protected String getErrorDuplicatingResponse(HttpServletResponse response, String code) {            </span>
<span class="7659712838923572459" onmouseenter="enter('7659712838923572459');" onmouseout="out('7659712838923572459');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 602         List&lt;Map&lt;String, Object&gt;&gt; errors = new ArrayList&lt;&gt;();                                            </span>
<span class="-6240695079450735253" onmouseenter="enter('-6240695079450735253');" onmouseout="out('-6240695079450735253');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 603         String message;                                                                                  </span>
<span class="-7826420477706002406" onmouseenter="enter('-7826420477706002406');" onmouseout="out('-7826420477706002406');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 604         BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();          </span>
<span class="-2727648393614728" onmouseenter="enter('-2727648393614728');" onmouseout="out('-2727648393614728');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 605         if (context != null &amp;&amp; context.getMessageSource() != null) {                                     </span>
<span class="-5978418614812499702" onmouseenter="enter('-5978418614812499702');" onmouseout="out('-5978418614812499702');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 606             message = context.getMessageSource()                                                         </span>
<span class="1624598595284946587" onmouseenter="enter('1624598595284946587');" onmouseout="out('1624598595284946587');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 607                     .getMessage(code, null, code, context.getJavaLocale());                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 608         } else {                                                                                         </span>
<span class="-9004243737964586892" onmouseenter="enter('-9004243737964586892');" onmouseout="out('-9004243737964586892');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 609             LOG.warn(                                                                                    </span>
<span class="6269614064328325287" onmouseenter="enter('6269614064328325287');" onmouseout="out('6269614064328325287');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 610                     &quot;Could not find the MessageSource on the current request, &quot;                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 611 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-8208830135626721740" onmouseenter="enter('-8208830135626721740');" onmouseout="out('-8208830135626721740');" style=""> 612                             + &quot;not translating the message key&quot;);                                        </span>
<span class="599114272120646428" onmouseenter="enter('599114272120646428');" onmouseout="out('599114272120646428');" style=""> 613             message = &quot;Duplication_Failure&quot;;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614         }                                                                                                </span>
<span  style=""> 615                                                                                                          </span>
<span class="-4703377271641004207" onmouseenter="enter('-4703377271641004207');" onmouseout="out('-4703377271641004207');" style=""> 616         Map&lt;String, Object&gt; errorMap = new HashMap&lt;&gt;();                                                  </span>
<span class="2851590661979449603" onmouseenter="enter('2851590661979449603');" onmouseout="out('2851590661979449603');" style=""> 617         errorMap.put(&quot;errorType&quot;, &quot;global&quot;);                                                             </span>
<span class="4738760182182965590" onmouseenter="enter('4738760182182965590');" onmouseout="out('4738760182182965590');" style=""> 618         errorMap.put(&quot;code&quot;, code);                                                                      </span>
<span class="7426718838785534996" onmouseenter="enter('7426718838785534996');" onmouseout="out('7426718838785534996');" style=""> 619         errorMap.put(&quot;message&quot;, message);                                                                </span>
<span class="-4906289066975989946" onmouseenter="enter('-4906289066975989946');" onmouseout="out('-4906289066975989946');" style=""> 620         errors.add(errorMap);                                                                            </span>
<span class="-8734340547513070222" onmouseenter="enter('-8734340547513070222');" onmouseout="out('-8734340547513070222');" style=""> 621         return new JsonResponse(response).with(&quot;errors&quot;, errors).done();                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 622     }                                                                                                    </span>
<span  style=""> 623                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 624     /**                                                                                                  </span>
<span class="9102199281013466170" onmouseenter="enter('9102199281013466170');" onmouseout="out('9102199281013466170');" style=""> 625      * Renders the main entity form for the specified entity                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 626      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 627      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 628      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 629      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 630      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 631      * @param id                                                                                         </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 632      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 633      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 634      */                                                                                                  </span>
<span class="7083955269921705584" onmouseenter="enter('7083955269921705584');" onmouseout="out('7083955269921705584');" style=""> 635     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)                                         </span>
<span class="-4309552397998806559" onmouseenter="enter('-4309552397998806559');" onmouseout="out('-4309552397998806559');" style=""> 636     public String viewEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 637             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-2194094146044801021" onmouseenter="enter('-2194094146044801021');" onmouseout="out('-2194094146044801021');" style=""> 638             @PathVariable(&quot;id&quot;) String id) throws Exception {                                            </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 639         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 640         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 641         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                           </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""><abbr title=" 642         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);"> 642         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, patðŸ”µ</abbr></span>
<span  style=""> 643                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 644         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-8780243800866475465" onmouseenter="enter('-8780243800866475465');" onmouseout="out('-8780243800866475465');" style=""> 645         Entity entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];    </span>
<span  style=""> 646                                                                                                          </span>
<span class="-8745713672993611458" onmouseenter="enter('-8745713672993611458');" onmouseout="out('-8745713672993611458');" style=""> 647         multipleCatalogExtensionManager.getProxy().setCurrentCatalog(entity, model);                     </span>
<span  style=""> 648                                                                                                          </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""><abbr title=" 649         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);"> 649         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, cðŸ”µ</abbr></span>
<span  style=""> 650                                                                                                          </span>
<span class="872584542219399793" onmouseenter="enter('872584542219399793');" onmouseout="out('872584542219399793');" style=""> 651         EntityForm entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);        </span>
<span  style=""> 652                                                                                                          </span>
<span class="1451551715319124344" onmouseenter="enter('1451551715319124344');" onmouseout="out('1451551715319124344');" style=""> 653         modifyEntityForm(entity, entityForm, pathVars);                                                  </span>
<span  style=""> 654                                                                                                          </span>
<span class="1981952247030149381" onmouseenter="enter('1981952247030149381');" onmouseout="out('1981952247030149381');" style=""> 655         if (request.getParameter(&quot;headerFlash&quot;) != null) {                                               </span>
<span class="-2367607735703612103" onmouseenter="enter('-2367607735703612103');" onmouseout="out('-2367607735703612103');" style=""> 656             model.addAttribute(&quot;headerFlash&quot;, request.getParameter(&quot;headerFlash&quot;));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 657         }                                                                                                </span>
<span  style=""> 658                                                                                                          </span>
<span class="-6569554975283424126" onmouseenter="enter('-6569554975283424126');" onmouseout="out('-6569554975283424126');" style=""> 659         // Set the sectionKey again incase this is a typed entity                                        </span>
<span class="4201932972037321722" onmouseenter="enter('4201932972037321722');" onmouseout="out('4201932972037321722');" style=""> 660         entityForm.setSectionKey(sectionKey);                                                            </span>
<span  style=""> 661                                                                                                          </span>
<span class="5387752430767952558" onmouseenter="enter('5387752430767952558');" onmouseout="out('5387752430767952558');" style=""> 662         // Build the current url in the cast that this is a typed entity                                 </span>
<span class="3856485652570637824" onmouseenter="enter('3856485652570637824');" onmouseout="out('3856485652570637824');" style=""> 663         String originatingUri = new UrlPathHelper().getOriginatingRequestUri(request);                   </span>
<span class="-1728408616530607173" onmouseenter="enter('-1728408616530607173');" onmouseout="out('-1728408616530607173');" style=""> 664         int startIndex = request.getContextPath().length();                                              </span>
<span  style=""> 665                                                                                                          </span>
<span class="654052499558570629" onmouseenter="enter('654052499558570629');" onmouseout="out('654052499558570629');" style=""> 666         // Remove the context path from servlet path                                                     </span>
<span class="526107488063217153" onmouseenter="enter('526107488063217153');" onmouseout="out('526107488063217153');" style=""> 667         String currentUrl = originatingUri.substring(startIndex);                                        </span>
<span  style=""> 668                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 669         model.addAttribute(&quot;entity&quot;, entity);                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 670         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-4977411250845897884" onmouseenter="enter('-4977411250845897884');" onmouseout="out('-4977411250845897884');" style=""> 671         model.addAttribute(&quot;currentUrl&quot;, currentUrl);                                                    </span>
<span class="5337717893660099657" onmouseenter="enter('5337717893660099657');" onmouseout="out('5337717893660099657');" style=""> 672         model.addAttribute(CURRENT_FOLDER_ID, getCurrentFolderId(request));                              </span>
<span  style=""> 673                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 674         setModelAttributes(model, sectionKey);                                                           </span>
<span  style=""> 675                                                                                                          </span>
<span class="8236570979651257825" onmouseenter="enter('8236570979651257825');" onmouseout="out('8236570979651257825');" style=""> 676         // We want to replace author ids with their names                                                </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style=""> 677         addAuditableDisplayFields(entityForm);                                                           </span>
<span  style=""> 678                                                                                                          </span>
<span class="858139107025117803" onmouseenter="enter('858139107025117803');" onmouseout="out('858139107025117803');" style=""> 679         return resolveAppropriateEntityView(request, model, entityForm);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680     }                                                                                                    </span>
<span  style=""> 681                                                                                                          </span>
<span class="9182660926479189949" onmouseenter="enter('9182660926479189949');" onmouseout="out('9182660926479189949');" style=""><abbr title=" 682     protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, String&gt; pathVars,"> 682     protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, StrðŸ”µ</abbr></span>
<span class="4477928710658117231" onmouseenter="enter('4477928710658117231');" onmouseout="out('4477928710658117231');" style=""> 683                                                               ClassMetadata cmd, Entity entity,          </span>
<span class="5660295431162582196" onmouseenter="enter('5660295431162582196');" onmouseout="out('5660295431162582196');" style=""><abbr title=" 684                                                               List&lt;SectionCrumb&gt; crumbs) throws Exception {"> 684                                                               List&lt;SectionCrumb&gt; crumbs) throws ExceptionðŸ”µ</abbr></span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style=""> 685         String tabName = pathVars.get(&quot;tabName&quot;);                                                        </span>
<span class="5384642555226517985" onmouseenter="enter('5384642555226517985');" onmouseout="out('5384642555226517985');" style=""> 686         if (StringUtils.isEmpty(tabName)) {                                                              </span>
<span class="-3672533750283461484" onmouseenter="enter('-3672533750283461484');" onmouseout="out('-3672533750283461484');" style=""> 687             tabName = cmd.getFirstTab() == null ? &quot;General&quot; : cmd.getFirstTab().getTabName();            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 688         }                                                                                                </span>
<span class="-5882478663361935855" onmouseenter="enter('-5882478663361935855');" onmouseout="out('-5882478663361935855');" style=""> 689         return service.getRecordsForSelectedTab(cmd, entity, crumbs, tabName);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 690     }                                                                                                    </span>
<span  style=""> 691                                                                                                          </span>
<span class="1953795048205106952" onmouseenter="enter('1953795048205106952');" onmouseout="out('1953795048205106952');" style=""> 692     private boolean isAddRequest(Entity entity) {                                                        </span>
<span class="-2989581670667655563" onmouseenter="enter('-2989581670667655563');" onmouseout="out('-2989581670667655563');" style=""> 693         ExtensionResultHolder&lt;Boolean&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                     </span>
<span class="2773544387861748911" onmouseenter="enter('2773544387861748911');" onmouseout="out('2773544387861748911');" style=""><abbr title=" 694         ExtensionResultStatusType result = extensionManager.getProxy().isAddRequest(entity, resultHolder);"> 694         ExtensionResultStatusType result = extensionManager.getProxy().isAddRequest(entity, resultHolder)ðŸ”µ</abbr></span>
<span class="8622638495597819717" onmouseenter="enter('8622638495597819717');" onmouseout="out('8622638495597819717');" style=""> 695         if (result.equals(ExtensionResultStatusType.NOT_HANDLED)) {                                      </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 696             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 697         }                                                                                                </span>
<span  style=""> 698                                                                                                          </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 699         return resultHolder.getResult();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 700     }                                                                                                    </span>
<span  style=""> 701                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 702     /**                                                                                                  </span>
<span class="-4864218972040039628" onmouseenter="enter('-4864218972040039628');" onmouseout="out('-4864218972040039628');" style=""> 703      * Attempts to get the List Grid for the selected tab.                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 704      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 705      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 706      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 707      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 708      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 709      * @param id                                                                                         </span>
<span class="4841027518362301903" onmouseenter="enter('4841027518362301903');" onmouseout="out('4841027518362301903');" style=""> 710      * @param tabName                                                                                    </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 711      * @param entityForm                                                                                 </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 712      * @param entity                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 713      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 714      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 715      */                                                                                                  </span>
<span class="-7675092144868804288" onmouseenter="enter('-7675092144868804288');" onmouseout="out('-7675092144868804288');" style=""> 716     @RequestMapping(value = &quot;/{id}/{tab:[0-9]+}/{tabName}&quot;, method = RequestMethod.POST)                 </span>
<span class="-2248541185927650044" onmouseenter="enter('-2248541185927650044');" onmouseout="out('-2248541185927650044');" style=""> 717     public String viewEntityTab(HttpServletRequest request, HttpServletResponse response, Model model,   </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 718             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 719             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="2259450910520289810" onmouseenter="enter('2259450910520289810');" onmouseout="out('2259450910520289810');" style=""> 720             @PathVariable(value = &quot;tabName&quot;) String tabName,                                             </span>
<span class="2754607649135651414" onmouseenter="enter('2754607649135651414');" onmouseout="out('2754607649135651414');" style=""> 721             @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm,                                 </span>
<span class="-2950467864443381399" onmouseenter="enter('-2950467864443381399');" onmouseout="out('-2950467864443381399');" style=""> 722             @ModelAttribute(value = &quot;entity&quot;) Entity entity) throws Exception {                          </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 723         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 724         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 725         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                           </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""><abbr title=" 726         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);"> 726         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, patðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 727         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 728         entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];           </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""><abbr title=" 729         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);"> 729         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, cðŸ”µ</abbr></span>
<span class="-3846048132763499568" onmouseenter="enter('-3846048132763499568');" onmouseout="out('-3846048132763499568');" style=""> 730         entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);                   </span>
<span  style=""> 731                                                                                                          </span>
<span class="1451551715319124344" onmouseenter="enter('1451551715319124344');" onmouseout="out('1451551715319124344');" style=""> 732         modifyEntityForm(entity, entityForm, pathVars);                                                  </span>
<span  style=""> 733                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 734         model.addAttribute(&quot;entity&quot;, entity);                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 735         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 736         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span  style=""> 737                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 738         setModelAttributes(model, sectionKey);                                                           </span>
<span  style=""> 739                                                                                                          </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 740         model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                       </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 741         model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                    </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 742 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 743                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 744 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 745         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 746         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 747         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 748         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 748         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="-6293964121119142853" onmouseenter="enter('-6293964121119142853');" onmouseout="out('-6293964121119142853');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 749         ClassMetadata cmd = null;                                                                        </span>
<span class="-6100049554794336383" onmouseenter="enter('-6100049554794336383');" onmouseout="out('-6100049554794336383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 750         Entity entity = null;                                                                            </span>
<span class="-7221558264805358950" onmouseenter="enter('-7221558264805358950');" onmouseout="out('-7221558264805358950');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 751         cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();                    </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 752         entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];           </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 753                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 754 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 755                                                                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 756 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-4487883013655706388" onmouseenter="enter('-4487883013655706388');" onmouseout="out('-4487883013655706388');" style=""> 757         return DEFAULT_CONTAINER_VIEW;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 758     }                                                                                                    </span>
<span  style=""> 759                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 760     /**                                                                                                  </span>
<span class="26428616724277901" onmouseenter="enter('26428616724277901');" onmouseout="out('26428616724277901');" style=""> 761      * Builds JSON that looks like this:                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 762      *                                                                                                   </span>
<span class="-619170819873097874" onmouseenter="enter('-619170819873097874');" onmouseout="out('-619170819873097874');" style=""> 763      * {&quot;errors&quot;:                                                                                        </span>
<span class="-7867797149207986089" onmouseenter="enter('-7867797149207986089');" onmouseout="out('-7867797149207986089');" style=""> 764      *      [{&quot;message&quot;:&quot;This field is Required&quot;,                                                        </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 765      *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                        </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 766      *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 767      *        &quot;errorType&quot;, &quot;field&quot;,                                                                      </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 768      *        &quot;tab&quot;: &quot;General&quot;                                                                           </span>
<span class="762081609125064039" onmouseenter="enter('762081609125064039');" onmouseout="out('762081609125064039');" style=""> 769      *        },                                                                                         </span>
<span class="2065208195238134241" onmouseenter="enter('2065208195238134241');" onmouseout="out('2065208195238134241');" style=""> 770      *        {&quot;message&quot;:&quot;This field is Required&quot;,                                                       </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 771      *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                        </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 772      *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 773      *        &quot;errorType&quot;, &quot;field&quot;,                                                                      </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 774      *        &quot;tab&quot;: &quot;General&quot;                                                                           </span>
<span class="-832778532632947969" onmouseenter="enter('-832778532632947969');" onmouseout="out('-832778532632947969');" style=""> 775      *        }]                                                                                         </span>
<span class="8941010846014250828" onmouseenter="enter('8941010846014250828');" onmouseout="out('8941010846014250828');" style=""> 776      * }                                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 777      *                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 778      */                                                                                                  </span>
<span class="726178843151373675" onmouseenter="enter('726178843151373675');" onmouseout="out('726178843151373675');" style=""> 779     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST, produces = &quot;application/json&quot;)         </span>
<span class="-4245682307765667372" onmouseenter="enter('-4245682307765667372');" onmouseout="out('-4245682307765667372');" style=""> 780     public String saveEntityJson(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 781             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 782             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="-5165411007609652701" onmouseenter="enter('-5165411007609652701');" onmouseout="out('-5165411007609652701');" style=""> 783             @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm, BindingResult result,           </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 784             RedirectAttributes ra) throws Exception {                                                    </span>
<span  style=""> 785                                                                                                          </span>
<span class="-7049584637685461961" onmouseenter="enter('-7049584637685461961');" onmouseout="out('-7049584637685461961');" style=""> 786         saveEntity(request, response, model, pathVars, id, entityForm, result, ra);                      </span>
<span  style=""> 787                                                                                                          </span>
<span class="2770382331963423086" onmouseenter="enter('2770382331963423086');" onmouseout="out('2770382331963423086');" style=""> 788         JsonResponse json = new JsonResponse(response);                                                  </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 789         if (result.hasErrors()) {                                                                        </span>
<span class="6668101882629849049" onmouseenter="enter('6668101882629849049');" onmouseout="out('6668101882629849049');" style=""> 790             populateJsonValidationErrors(entityForm, result, json);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 791         }                                                                                                </span>
<span class="-8719030961107019295" onmouseenter="enter('-8719030961107019295');" onmouseout="out('-8719030961107019295');" style=""> 792         List&lt;String&gt; dirtyList = buildDirtyList(pathVars, request, id);                                  </span>
<span class="-2397478597494600131" onmouseenter="enter('-2397478597494600131');" onmouseout="out('-2397478597494600131');" style=""> 793         if (CollectionUtils.isNotEmpty(dirtyList)) {                                                     </span>
<span class="-6863151800017638945" onmouseenter="enter('-6863151800017638945');" onmouseout="out('-6863151800017638945');" style=""> 794             json.with(&quot;dirty&quot;, dirtyList);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 795         }                                                                                                </span>
<span  style=""> 796                                                                                                          </span>
<span class="1148846903613025505" onmouseenter="enter('1148846903613025505');" onmouseout="out('1148846903613025505');" style=""> 797         ExtensionResultHolder&lt;String&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                      </span>
<span class="772761850497532920" onmouseenter="enter('772761850497532920');" onmouseout="out('772761850497532920');" style=""><abbr title=" 798         ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonResponse(response, result.hasErrors(), getSectionKey(pathVars), id, resultHolder);"> 798         ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonReðŸ”µ</abbr></span>
<span class="-7225919658162387284" onmouseenter="enter('-7225919658162387284');" onmouseout="out('-7225919658162387284');" style=""> 799         if (resultStatusType.equals(ExtensionResultStatusType.HANDLED)) {                                </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 800             return resultHolder.getResult();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 801         }                                                                                                </span>
<span  style=""> 802                                                                                                          </span>
<span class="-3901811907821215875" onmouseenter="enter('-3901811907821215875');" onmouseout="out('-3901811907821215875');" style=""> 803         return json.done();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 804     }                                                                                                    </span>
<span  style=""> 805                                                                                                          </span>
<span class="-2624067384280123527" onmouseenter="enter('-2624067384280123527');" onmouseout="out('-2624067384280123527');" style=""><abbr title=" 806     public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String id) throws ServiceException {"> 806     public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String iðŸ”µ</abbr></span>
<span class="-6199220983064020273" onmouseenter="enter('-6199220983064020273');" onmouseout="out('-6199220983064020273');" style=""> 807         List&lt;String&gt; dirtyList = new ArrayList&lt;&gt;();                                                      </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 808         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 809         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 810         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 811         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 811         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="-6293964121119142853" onmouseenter="enter('-6293964121119142853');" onmouseout="out('-6293964121119142853');" style=""> 812         ClassMetadata cmd = null;                                                                        </span>
<span class="-6100049554794336383" onmouseenter="enter('-6100049554794336383');" onmouseout="out('-6100049554794336383');" style=""> 813         Entity entity = null;                                                                            </span>
<span class="-7221558264805358950" onmouseenter="enter('-7221558264805358950');" onmouseout="out('-7221558264805358950');" style=""> 814         cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();                    </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 815         entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];           </span>
<span  style=""> 816                                                                                                          </span>
<span class="-538034338216639378" onmouseenter="enter('-538034338216639378');" onmouseout="out('-538034338216639378');" style=""> 817         for (Property p: entity.getProperties()) {                                                       </span>
<span class="-5586383415891827802" onmouseenter="enter('-5586383415891827802');" onmouseout="out('-5586383415891827802');" style=""> 818             if (p.getIsDirty()) {                                                                        </span>
<span class="-1571805809811752662" onmouseenter="enter('-1571805809811752662');" onmouseout="out('-1571805809811752662');" style=""> 819                 dirtyList.add(p.getName());                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 820             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 821         }                                                                                                </span>
<span class="7211627429904225799" onmouseenter="enter('7211627429904225799');" onmouseout="out('7211627429904225799');" style=""> 822         return dirtyList;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 823     }                                                                                                    </span>
<span  style=""> 824                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 825     /**                                                                                                  </span>
<span class="-1912365624495655250" onmouseenter="enter('-1912365624495655250');" onmouseout="out('-1912365624495655250');" style=""><abbr title=" 826      * Attempts to save the given entity. If validation is unsuccessful, it will re-render the entity form with"> 826      * Attempts to save the given entity. If validation is unsuccessful, it will re-render the entity forðŸ”µ</abbr></span>
<span class="3378821078357952120" onmouseenter="enter('3378821078357952120');" onmouseout="out('3378821078357952120');" style=""> 827      * error fields highlighted. On a successful save, it will refresh the entity page.                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 828      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 829      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 830      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 831      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 832      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 833      * @param id                                                                                         </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 834      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 835      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 836      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 837      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 838      */                                                                                                  </span>
<span class="681227659796054179" onmouseenter="enter('681227659796054179');" onmouseout="out('681227659796054179');" style=""> 839     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST)                                        </span>
<span class="2696827203115285075" onmouseenter="enter('2696827203115285075');" onmouseout="out('2696827203115285075');" style=""> 840     public String saveEntity(HttpServletRequest request, HttpServletResponse response, Model model,      </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 841             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 842             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 843             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,             </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 844             RedirectAttributes ra) throws Exception {                                                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 845         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 846         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 847         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 848         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 848         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 849         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span  style=""> 850                                                                                                          </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 851         extractDynamicFormFields(cmd, entityForm);                                                       </span>
<span  style=""> 852                                                                                                          </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 853         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 853         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="-4517703585527939334" onmouseenter="enter('-4517703585527939334');" onmouseout="out('-4517703585527939334');" style=""> 854         Entity entity = service.updateEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();    </span>
<span  style=""> 855                                                                                                          </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 856         entityFormValidator.validate(entityForm, entity, result);                                        </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 857 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 858                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 859 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 860             RedirectAttributes ra) throws Exception {                                                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 861         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 862         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 863         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 864                                                                                                          </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 865         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 865         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="6624819200143935214" onmouseenter="enter('6624819200143935214');" onmouseout="out('6624819200143935214');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 866         Entity entity = service.removeEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();    </span>
<span class="-6561774320633688873" onmouseenter="enter('-6561774320633688873');" onmouseout="out('-6561774320633688873');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 867         // Removal does not normally return an Entity unless there is some validation error              </span>
<span class="-2807113977407494827" onmouseenter="enter('-2807113977407494827');" onmouseout="out('-2807113977407494827');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 868         if (entity != null) {                                                                            </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 869 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 870                                                                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 871 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 872         if (result.hasErrors()) {                                                                        </span>
<span class="-9083492279253959347" onmouseenter="enter('-9083492279253959347');" onmouseout="out('-9083492279253959347');" style=""> 873             model.addAttribute(&quot;headerFlash&quot;, &quot;save.unsuccessful&quot;);                                      </span>
<span class="-3255113992478543295" onmouseenter="enter('-3255113992478543295');" onmouseout="out('-3255113992478543295');" style=""> 874             model.addAttribute(&quot;headerFlashAlert&quot;, true);                                                </span>
<span  style=""> 875                                                                                                          </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 876             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 876             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 877             entityForm.clearFieldsMap();                                                                 </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 878             formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);       </span>
<span  style=""> 879                                                                                                          </span>
<span class="1451551715319124344" onmouseenter="enter('1451551715319124344');" onmouseout="out('1451551715319124344');" style=""> 880             modifyEntityForm(entity, entityForm, pathVars);                                              </span>
<span  style=""> 881                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 882             model.addAttribute(&quot;entity&quot;, entity);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 883             model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                        </span>
<span  style=""> 884                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 885             setModelAttributes(model, sectionKey);                                                       </span>
<span  style=""> 886                                                                                                          </span>
<span class="858139107025117803" onmouseenter="enter('858139107025117803');" onmouseout="out('858139107025117803');" style=""> 887             return resolveAppropriateEntityView(request, model, entityForm);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 888         }                                                                                                </span>
<span  style=""> 889                                                                                                          </span>
<span class="-8977665602521560288" onmouseenter="enter('-8977665602521560288');" onmouseout="out('-8977665602521560288');" style=""> 890         ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;save.successful&quot;);                                          </span>
<span  style=""> 891                                                                                                          </span>
<span class="5326436654777975784" onmouseenter="enter('5326436654777975784');" onmouseout="out('5326436654777975784');" style=""> 892         return &quot;redirect:/&quot; + sectionKey + &quot;/&quot; + id;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 893     }                                                                                                    </span>
<span  style=""> 894                                                                                                          </span>
<span class="-1036069149620696687" onmouseenter="enter('-1036069149620696687');" onmouseout="out('-1036069149620696687');" style=""> 895     protected void modifyEntityForm(final Entity entity, final EntityForm entityForm,                    </span>
<span class="-2182671422299427893" onmouseenter="enter('-2182671422299427893');" onmouseout="out('-2182671422299427893');" style=""> 896             final Map&lt;String, String&gt; pathVars) throws Exception {                                       </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 897         if (isAddRequest(entity)) {                                                                      </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 898             modifyAddEntityForm(entityForm, pathVars);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 899         } else {                                                                                         </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 900             modifyEntityForm(entityForm, pathVars);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 901         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 902     }                                                                                                    </span>
<span  style=""> 903                                                                                                          </span>
<span class="7327611436230860688" onmouseenter="enter('7327611436230860688');" onmouseout="out('7327611436230860688');" style=""> 904     protected String resolveAppropriateEntityView(final HttpServletRequest request,                      </span>
<span class="7665770463560391322" onmouseenter="enter('7665770463560391322');" onmouseout="out('7665770463560391322');" style=""> 905             final Model model,                                                                           </span>
<span class="6537819747648345888" onmouseenter="enter('6537819747648345888');" onmouseout="out('6537819747648345888');" style=""> 906             final @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) {                         </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 907         if (isAjaxRequest(request)) {                                                                    </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style=""> 908             entityForm.setReadOnly();                                                                    </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style=""> 909             model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                          </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style=""> 910             model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style=""> 911             return MODAL_CONTAINER_VIEW;                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 912         } else {                                                                                         </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 913             model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                   </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 914             model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                </span>
<span class="-4487883013655706388" onmouseenter="enter('-4487883013655706388');" onmouseout="out('-4487883013655706388');" style=""> 915             return DEFAULT_CONTAINER_VIEW;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 916         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 917     }                                                                                                    </span>
<span  style=""> 918                                                                                                          </span>
<span class="-1036069149620696687" onmouseenter="enter('-1036069149620696687');" onmouseout="out('-1036069149620696687');" style=""> 919     protected void modifyEntityForm(final Entity entity, final EntityForm entityForm,                    </span>
<span class="-2182671422299427893" onmouseenter="enter('-2182671422299427893');" onmouseout="out('-2182671422299427893');" style=""> 920             final Map&lt;String, String&gt; pathVars) throws Exception {                                       </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 921         if (isAddRequest(entity)) {                                                                      </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 922             modifyAddEntityForm(entityForm, pathVars);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 923         } else {                                                                                         </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 924             modifyEntityForm(entityForm, pathVars);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 925         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 926     }                                                                                                    </span>
<span  style=""> 927                                                                                                          </span>
<span class="7327611436230860688" onmouseenter="enter('7327611436230860688');" onmouseout="out('7327611436230860688');" style=""> 928     protected String resolveAppropriateEntityView(final HttpServletRequest request,                      </span>
<span class="7665770463560391322" onmouseenter="enter('7665770463560391322');" onmouseout="out('7665770463560391322');" style=""> 929             final Model model,                                                                           </span>
<span class="6537819747648345888" onmouseenter="enter('6537819747648345888');" onmouseout="out('6537819747648345888');" style=""> 930             final @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) {                         </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 931         if (isAjaxRequest(request)) {                                                                    </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style=""> 932             entityForm.setReadOnly();                                                                    </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style=""> 933             model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                          </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style=""> 934             model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style=""> 935             return MODAL_CONTAINER_VIEW;                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 936         } else {                                                                                         </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 937             model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                   </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 938             model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                </span>
<span class="-4487883013655706388" onmouseenter="enter('-4487883013655706388');" onmouseout="out('-4487883013655706388');" style=""> 939             return DEFAULT_CONTAINER_VIEW;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 940         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 941     }                                                                                                    </span>
<span  style=""> 942                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 943     /**                                                                                                  </span>
<span class="4876253458579857532" onmouseenter="enter('4876253458579857532');" onmouseout="out('4876253458579857532');" style=""> 944      * Attempts to remove the given entity.                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 945      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 946      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 947      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 948      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 949      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 950      * @param id                                                                                         </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 951      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 952      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 953      */                                                                                                  </span>
<span class="8293921381301703428" onmouseenter="enter('8293921381301703428');" onmouseout="out('8293921381301703428');" style=""> 954     @RequestMapping(value = &quot;/{id}/delete&quot;, method = RequestMethod.POST)                                 </span>
<span class="2313354717081876463" onmouseenter="enter('2313354717081876463');" onmouseout="out('2313354717081876463');" style=""> 955     public String removeEntity(HttpServletRequest request, HttpServletResponse response, Model model,    </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 956             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 957             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 958             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,             </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 959             RedirectAttributes ra) throws Exception {                                                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 960         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 961         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 962         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span  style=""> 963                                                                                                          </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 964         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 964         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="6624819200143935214" onmouseenter="enter('6624819200143935214');" onmouseout="out('6624819200143935214');" style=""> 965         Entity entity = service.removeEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();    </span>
<span class="-6561774320633688873" onmouseenter="enter('-6561774320633688873');" onmouseout="out('-6561774320633688873');" style=""> 966         // Removal does not normally return an Entity unless there is some validation error              </span>
<span class="-2807113977407494827" onmouseenter="enter('-2807113977407494827');" onmouseout="out('-2807113977407494827');" style=""> 967         if (entity != null) {                                                                            </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 968             entityFormValidator.validate(entityForm, entity, result);                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 969             if (result.hasErrors()) {                                                                    </span>
<span class="354313568014337940" onmouseenter="enter('354313568014337940');" onmouseout="out('354313568014337940');" style=""> 970                 // Create a flash attribute for the unsuccessful delete                                  </span>
<span class="-3408473788799892596" onmouseenter="enter('-3408473788799892596');" onmouseout="out('-3408473788799892596');" style=""> 971                 FlashMap fm = new FlashMap();                                                            </span>
<span class="-3785724779356953427" onmouseenter="enter('-3785724779356953427');" onmouseout="out('-3785724779356953427');" style=""> 972                 fm.put(&quot;headerFlash&quot;, &quot;delete.unsuccessful&quot;);                                            </span>
<span class="2000410372434500283" onmouseenter="enter('2000410372434500283');" onmouseout="out('2000410372434500283');" style=""> 973                 fm.put(&quot;headerFlashAlert&quot;, true);                                                        </span>
<span class="-216272657842661141" onmouseenter="enter('-216272657842661141');" onmouseout="out('-216272657842661141');" style=""> 974                 request.setAttribute(DispatcherServlet.OUTPUT_FLASH_MAP_ATTRIBUTE, fm);                  </span>
<span  style=""> 975                                                                                                          </span>
<span class="-9154666565283892619" onmouseenter="enter('-9154666565283892619');" onmouseout="out('-9154666565283892619');" style=""> 976                 // Re-look back up the entity so that we can return something populated                  </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 977                 PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 977                 PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, secðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""><abbr title=" 978                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 978                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData(ðŸ”µ</abbr></span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 979                 entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];   </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 980                 Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 980                 Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr,ðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 981                 entityForm.clearFieldsMap();                                                             </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 982                 formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);   </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 983                 modifyEntityForm(entityForm, pathVars);                                                  </span>
<span  style=""> 984                                                                                                          </span>
<span class="-1358530666837283115" onmouseenter="enter('-1358530666837283115');" onmouseout="out('-1358530666837283115');" style=""> 985                 return populateJsonValidationErrors(entityForm, result, new JsonResponse(response))      </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style=""> 986                         .done();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 987             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 988         }                                                                                                </span>
<span  style=""> 989                                                                                                          </span>
<span class="3611526951082120901" onmouseenter="enter('3611526951082120901');" onmouseout="out('3611526951082120901');" style=""> 990         ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;delete.successful&quot;);                                        </span>
<span class="2579818068351246488" onmouseenter="enter('2579818068351246488');" onmouseout="out('2579818068351246488');" style=""> 991         ra.addFlashAttribute(&quot;headerFlashAlert&quot;, true);                                                  </span>
<span  style=""> 992                                                                                                          </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 993         if (isAjaxRequest(request)) {                                                                    </span>
<span class="-5684384949344822714" onmouseenter="enter('-5684384949344822714');" onmouseout="out('-5684384949344822714');" style=""> 994             // redirect attributes won&#x27;t work here since ajaxredirect actually makes a new request       </span>
<span class="-9107475529968351628" onmouseenter="enter('-9107475529968351628');" onmouseout="out('-9107475529968351628');" style=""><abbr title=" 995             return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;?headerFlash=delete.successful&quot;;"> 995             return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;?headerFlash=delete.successfðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 996         } else {                                                                                         </span>
<span class="4357427724598824699" onmouseenter="enter('4357427724598824699');" onmouseout="out('4357427724598824699');" style=""> 997             return &quot;redirect:/&quot; + sectionKey;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 998         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 999     }                                                                                                    </span>
<span  style="">1000                                                                                                          </span>
<span class="-2983794507366563158" onmouseenter="enter('-2983794507366563158');" onmouseout="out('-2983794507366563158');" style="">1001     @RequestMapping(value = &quot;/{collectionField:.*}/details&quot;, method = RequestMethod.GET)                 </span>
<span class="-527911248282232950" onmouseenter="enter('-527911248282232950');" onmouseout="out('-527911248282232950');" style=""><abbr title="1002     public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpServletResponse response, Model model,">1002     public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpSeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1003             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1004             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-5250072335910309101" onmouseenter="enter('-5250072335910309101');" onmouseout="out('-5250072335910309101');" style="">1005             @RequestParam String ids,                                                                    </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style="">1006             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1007         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style="">1008         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style="">1009         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="-5225610456611199616" onmouseenter="enter('-5225610456611199616');" onmouseout="out('-5225610456611199616');" style=""><abbr title="1010         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, sectionCrumbs, pathVars);">1010         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""><abbr title="1011         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1011         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDataðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1012         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1013         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style="">1014                                                                                                          </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1015         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span class="-2120492003233088270" onmouseenter="enter('-2120492003233088270');" onmouseout="out('-2120492003233088270');" style="">1016         ppr.setStartIndex(getStartIndex(requestParams));                                                 </span>
<span class="2736790979641523309" onmouseenter="enter('2736790979641523309');" onmouseout="out('2736790979641523309');" style="">1017         ppr.setMaxIndex(getMaxIndex(requestParams));                                                     </span>
<span  style="">1018                                                                                                          </span>
<span class="-8000769512056204294" onmouseenter="enter('-8000769512056204294');" onmouseout="out('-8000769512056204294');" style="">1019         if (md instanceof BasicFieldMetadata) {                                                          </span>
<span class="-1954892043355765019" onmouseenter="enter('-1954892043355765019');" onmouseout="out('-1954892043355765019');" style="">1020             String idProp = ((BasicFieldMetadata) md).getForeignKeyProperty();                           </span>
<span class="6288096257758990604" onmouseenter="enter('6288096257758990604');" onmouseout="out('6288096257758990604');" style="">1021             String displayProp = ((BasicFieldMetadata) md).getForeignKeyDisplayValueProperty();          </span>
<span  style="">1022                                                                                                          </span>
<span class="-6477100624593005266" onmouseenter="enter('-6477100624593005266');" onmouseout="out('-6477100624593005266');" style="">1023             List&lt;String&gt; filterValues = BLCArrayUtils.asList(ids.split(FILTER_VALUE_SEPARATOR_REGEX));   </span>
<span class="3640259021720155935" onmouseenter="enter('3640259021720155935');" onmouseout="out('3640259021720155935');" style="">1024             ppr.addFilterAndSortCriteria(new FilterAndSortCriteria(idProp, filterValues));               </span>
<span  style="">1025                                                                                                          </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1026             DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                        </span>
<span class="-2768740094948248396" onmouseenter="enter('-2768740094948248396');" onmouseout="out('-2768740094948248396');" style="">1027             Map&lt;String, String&gt; returnMap = new HashMap&lt;&gt;();                                             </span>
<span  style="">1028                                                                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style="">1029             for (Entity e : drs.getRecords()) {                                                          </span>
<span class="4979367110517822568" onmouseenter="enter('4979367110517822568');" onmouseout="out('4979367110517822568');" style="">1030                 String id = e.getPMap().get(idProp).getValue();                                          </span>
<span class="-4946347213336092877" onmouseenter="enter('-4946347213336092877');" onmouseout="out('-4946347213336092877');" style="">1031                 String disp = e.getPMap().get(displayProp).getDisplayValue();                            </span>
<span  style="">1032                                                                                                          </span>
<span class="3483982845402449596" onmouseenter="enter('3483982845402449596');" onmouseout="out('3483982845402449596');" style="">1033                 if (StringUtils.isBlank(disp)) {                                                         </span>
<span class="-2027181132953179584" onmouseenter="enter('-2027181132953179584');" onmouseout="out('-2027181132953179584');" style="">1034                     disp = e.getPMap().get(displayProp).getValue();                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1035                 }                                                                                        </span>
<span  style="">1036                                                                                                          </span>
<span class="-1075893121428940879" onmouseenter="enter('-1075893121428940879');" onmouseout="out('-1075893121428940879');" style="">1037                 returnMap.put(id,  disp);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1038             }                                                                                            </span>
<span  style="">1039                                                                                                          </span>
<span class="9157811424862351106" onmouseenter="enter('9157811424862351106');" onmouseout="out('9157811424862351106');" style="">1040             return returnMap;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1041         }                                                                                                </span>
<span  style="">1042                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1043         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1044     }                                                                                                    </span>
<span  style="">1045                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1046     /**                                                                                                  </span>
<span class="7896529828316523089" onmouseenter="enter('7896529828316523089');" onmouseout="out('7896529828316523089');" style=""><abbr title="1047      * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a list of products">1047      * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a ðŸ”µ</abbr></span>
<span class="8702245574166025616" onmouseenter="enter('8702245574166025616');" onmouseout="out('8702245574166025616');" style="">1048      * then this method is invoked when a user clicks on the name of the default category field.         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1049      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1050      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1051      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1052      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1053      * @param pathVars                                                                                   </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1054      * @param collectionField                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1055      * @param id                                                                                         </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1056      * @return                                                                                           </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1057      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1058      */                                                                                                  </span>
<span class="1405910210670150204" onmouseenter="enter('1405910210670150204');" onmouseout="out('1405910210670150204');" style="">1059     @RequestMapping(value = &quot;/{collectionField:.*}/{id}/view&quot;, method = RequestMethod.GET)               </span>
<span class="-5496524556428427140" onmouseenter="enter('-5496524556428427140');" onmouseout="out('-5496524556428427140');" style=""><abbr title="1060     public String viewCollectionItemDetails(HttpServletRequest request, HttpServletResponse response, Model model,">1060     public String viewCollectionItemDetails(HttpServletRequest request, HttpServletResponse response, ModðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1061             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1062             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-1857511616350008386" onmouseenter="enter('-1857511616350008386');" onmouseout="out('-1857511616350008386');" style="">1063             @PathVariable(value=&quot;id&quot;) String id) throws Exception {                                      </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1064         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1065         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1066         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1067         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1067         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1068         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="2157347470680130722" onmouseenter="enter('2157347470680130722');" onmouseout="out('2157347470680130722');" style="">1069         BasicFieldMetadata md = (BasicFieldMetadata) collectionProperty.getMetadata();                   </span>
<span  style="">1070                                                                                                          </span>
<span class="-1856968160831305726" onmouseenter="enter('-1856968160831305726');" onmouseout="out('-1856968160831305726');" style=""><abbr title="1071         AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeyClass(), sectionKey);">1071         AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeðŸ”µ</abbr></span>
<span class="-151095669048618305" onmouseenter="enter('-151095669048618305');" onmouseout="out('-151095669048618305');" style=""><abbr title="1072         String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : section.getUrl();">1072         String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : sectiðŸ”µ</abbr></span>
<span class="4949862081138664893" onmouseenter="enter('4949862081138664893');" onmouseout="out('4949862081138664893');" style="">1073         Map&lt;String, String&gt; varsForField = new HashMap&lt;&gt;();                                              </span>
<span class="-4429965231898090358" onmouseenter="enter('-4429965231898090358');" onmouseout="out('-4429965231898090358');" style="">1074         varsForField.put(&quot;sectionKey&quot;, sectionUrlKey);                                                   </span>
<span class="4805235980730638518" onmouseenter="enter('4805235980730638518');" onmouseout="out('4805235980730638518');" style="">1075         return viewEntityForm(request, response, model, varsForField, id);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1076     }                                                                                                    </span>
<span  style="">1077                                                                                                          </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style="">1078     @RequestMapping(                                                                                     </span>
<span class="4528666449367390600" onmouseenter="enter('4528666449367390600');" onmouseout="out('4528666449367390600');" style="">1079             value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{tab:[0-9]+}/{tabName}&quot;,              </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style="">1080             method = RequestMethod.POST                                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1081     )                                                                                                    </span>
<span class="1786222500639285262" onmouseenter="enter('1786222500639285262');" onmouseout="out('1786222500639285262');" style=""><abbr title="1082     public String viewCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,">1082     public String viewCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model mðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1083                                         @PathVariable  Map&lt;String, String&gt; pathVars,                     </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1084                                         @PathVariable(value=&quot;id&quot;) String id,                             </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1085                                         @PathVariable(value=&quot;collectionField&quot;) String collectionField,   </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1086                                         @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId, </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style="">1087                                         @PathVariable(value=&quot;tabName&quot;) String tabName,                   </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title="1088                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {">1088                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throðŸ”µ</abbr></span>
<span  style="">1089                                                                                                          </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title="1090         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);">1090         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1091     }                                                                                                    </span>
<span  style="">1092                                                                                                          </span>
<span  style="">1093                                                                                                          </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style="">1094     @RequestMapping(                                                                                     </span>
<span class="-3329921938797888660" onmouseenter="enter('-3329921938797888660');" onmouseout="out('-3329921938797888660');" style="">1095             value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view/{tab:[0-9]+}/{tabName}&quot;,         </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style="">1096             method = RequestMethod.POST                                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1097     )                                                                                                    </span>
<span class="546530564983480962" onmouseenter="enter('546530564983480962');" onmouseout="out('546530564983480962');" style=""><abbr title="1098     public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,">1098     public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response,ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1099                                         @PathVariable  Map&lt;String, String&gt; pathVars,                     </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1100                                         @PathVariable(value=&quot;id&quot;) String id,                             </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1101                                         @PathVariable(value=&quot;collectionField&quot;) String collectionField,   </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1102                                         @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId, </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style="">1103                                         @PathVariable(value=&quot;tabName&quot;) String tabName,                   </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title="1104                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {">1104                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throðŸ”µ</abbr></span>
<span  style="">1105                                                                                                          </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title="1106         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);">1106         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1107     }                                                                                                    </span>
<span  style="">1108                                                                                                          </span>
<span  style="">1109                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1110     /**                                                                                                  </span>
<span class="1274042523848442367" onmouseenter="enter('1274042523848442367');" onmouseout="out('1274042523848442367');" style="">1111      * Returns the records for a given collectionField filtered by a particular criteria                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1112      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1113      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1114      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1115      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1116      * @param pathVars                                                                                   </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1117      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style="">1118      * @param requestParams                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1119      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1120      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1121      */                                                                                                  </span>
<span class="-4095443548484775059" onmouseenter="enter('-4095443548484775059');" onmouseout="out('-4095443548484775059');" style="">1122     @RequestMapping(value = &quot;/{id}/{collectionField:.*}&quot;, method = RequestMethod.GET)                    </span>
<span class="-5889287394210369546" onmouseenter="enter('-5889287394210369546');" onmouseout="out('-5889287394210369546');" style=""><abbr title="1123     public String getCollectionFieldRecords(HttpServletRequest request, HttpServletResponse response, Model model,">1123     public String getCollectionFieldRecords(HttpServletRequest request, HttpServletResponse response, ModðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1124             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1125             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1126             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="3465670919255037355" onmouseenter="enter('3465670919255037355');" onmouseout="out('3465670919255037355');" style="">1127             @RequestParam  MultiValueMap&lt;String, String&gt; requestParams) throws Exception {               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1128         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1129         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1130         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-6545915569490985196" onmouseenter="enter('-6545915569490985196');" onmouseout="out('-6545915569490985196');" style=""><abbr title="1131         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams, sectionCrumbs, pathVars);">1131         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams,ðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""><abbr title="1132         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1132         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDataðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1133         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1134                                                                                                          </span>
<span class="-3734134243620930531" onmouseenter="enter('-3734134243620930531');" onmouseout="out('-3734134243620930531');" style="">1135         ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);               </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1136         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1136         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span  style="">1137                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1138         // Next, we must get the new list grid that represents this collection                           </span>
<span class="-8440278474384944243" onmouseenter="enter('-8440278474384944243');" onmouseout="out('-8440278474384944243');" style=""><abbr title="1139         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParams, sectionKey, sectionCrumbs);">1139         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParamsðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1140         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style="">1141                                                                                                          </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style="">1142         model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));       </span>
<span  style="">1143                                                                                                          </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1144         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1145         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1146         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1147     }                                                                                                    </span>
<span  style="">1148                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1149     /**                                                                                                  </span>
<span class="-2279175998905644242" onmouseenter="enter('-2279175998905644242');" onmouseout="out('-2279175998905644242');" style=""><abbr title="1150      * Shows the modal dialog that is used to add an item to a given collection. There are several possible outcomes">1150      * Shows the modal dialog that is used to add an item to a given collection. There are several possibðŸ”µ</abbr></span>
<span class="-3490572548815062734" onmouseenter="enter('-3490572548815062734');" onmouseout="out('-3490572548815062734');" style="">1151      * of this call depending on the type of the specified collection field.                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1152      *                                                                                                   </span>
<span class="2717555647352622731" onmouseenter="enter('2717555647352622731');" onmouseout="out('2717555647352622731');" style="">1153      * &lt;ul&gt;                                                                                              </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style="">1154      *  &lt;li&gt;                                                                                             </span>
<span class="4930235181592711719" onmouseenter="enter('4930235181592711719');" onmouseout="out('4930235181592711719');" style=""><abbr title="1155      *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so that the user may">1155      *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so thaðŸ”µ</abbr></span>
<span class="-3142080293607523336" onmouseenter="enter('-3142080293607523336');" onmouseout="out('-3142080293607523336');" style=""><abbr title="1156      *    enter information and associate the record with this collection. Used by fields such as ProductAttribute.">1156      *    enter information and associate the record with this collection. Used by fields such as ProductðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style="">1157      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style="">1158      *  &lt;li&gt;                                                                                             </span>
<span class="6319691685860667757" onmouseenter="enter('6319691685860667757');" onmouseout="out('6319691685860667757');" style=""><abbr title="1159      *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and select it.">1159      *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entiðŸ”µ</abbr></span>
<span class="-8731186021492741581" onmouseenter="enter('-8731186021492741581');" onmouseout="out('-8731186021492741581');" style="">1160      *    Used by fields such as &quot;allParentCategories&quot;.                                                  </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style="">1161      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style="">1162      *  &lt;li&gt;                                                                                             </span>
<span class="-6847404578833725914" onmouseenter="enter('-6847404578833725914');" onmouseout="out('-6847404578833725914');" style=""><abbr title="1163      *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and">1163      *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click onðŸ”µ</abbr></span>
<span class="568361472595397074" onmouseenter="enter('568361472595397074');" onmouseout="out('568361472595397074');" style=""><abbr title="1164      *    select it. The view rendered by this is identical to basic collection (lookup), but will perform the operation">1164      *    select it. The view rendered by this is identical to basic collection (lookup), but will perforðŸ”µ</abbr></span>
<span class="-4048066359856567222" onmouseenter="enter('-4048066359856567222');" onmouseout="out('-4048066359856567222');" style=""><abbr title="1165      *    on an adorned field, which may carry extra meta-information about the created relationship, such as order.">1165      *    on an adorned field, which may carry extra meta-information about the created relationship, sucðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style="">1166      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style="">1167      *  &lt;li&gt;                                                                                             </span>
<span class="7355096557601214207" onmouseenter="enter('7355096557601214207');" onmouseout="out('7355096557601214207');" style=""><abbr title="1168      *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and">1168      *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on anðŸ”µ</abbr></span>
<span class="-146713903552295440" onmouseenter="enter('-146713903552295440');" onmouseout="out('-146713903552295440');" style=""><abbr title="1169      *    select it. Once the user selects the entity, he will be presented with an empty form based on the specified">1169      *    select it. Once the user selects the entity, he will be presented with an empty form based on tðŸ”µ</abbr></span>
<span class="7585671366133275820" onmouseenter="enter('7585671366133275820');" onmouseout="out('7585671366133275820');" style=""><abbr title="1170      *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, which in addition">1170      *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, whiðŸ”µ</abbr></span>
<span class="7350312284882119043" onmouseenter="enter('7350312284882119043');" onmouseout="out('7350312284882119043');" style="">1171      *    to linking an entity, provide extra fields, such as a promotional message.                     </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style="">1172      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style="">1173      *  &lt;li&gt;                                                                                             </span>
<span class="8829232354049589291" onmouseenter="enter('8829232354049589291');" onmouseout="out('8829232354049589291');" style=""><abbr title="1174      *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. This field is">1174      *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. ðŸ”µ</abbr></span>
<span class="-8508051731153769866" onmouseenter="enter('-8508051731153769866');" onmouseout="out('-8508051731153769866');" style=""><abbr title="1175      *    populated either from the configured map keys, or as a result of a lookup in the case of a key based on another">1175      *    populated either from the configured map keys, or as a result of a lookup in the case of a key ðŸ”µ</abbr></span>
<span class="-6056737616128420156" onmouseenter="enter('-6056737616128420156');" onmouseout="out('-6056737616128420156');" style="">1176      *    entity. Used by fields such as the mediaMap on a Sku.                                          </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style="">1177      *  &lt;/li&gt;                                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1178      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1179      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1180      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1181      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1182      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1183      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1184      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style="">1185      * @param requestParams                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1186      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1187      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1188      */                                                                                                  </span>
<span class="835275592837580694" onmouseenter="enter('835275592837580694');" onmouseout="out('835275592837580694');" style="">1189     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.GET)                </span>
<span class="2460266594736272943" onmouseenter="enter('2460266594736272943');" onmouseout="out('2460266594736272943');" style=""><abbr title="1190     public String showAddCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1190     public String showAddCollectionItem(HttpServletRequest request, HttpServletResponse response, Model mðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1191             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style="">1192             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style="">1193             @PathVariable(value = &quot;collectionField&quot;) String collectionField,                             </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style="">1194             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1195         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1196         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1197         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style=""><abbr title="1198         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,">1198         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style="">1199                 sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1200         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1201         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style="">1202                                                                                                          </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style="">1203         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)        </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style="">1204                 .withFilterAndSortCriteria(getCriteria(requestParams))                                   </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style="">1205                 .withStartIndex(getStartIndex(requestParams))                                            </span>
<span class="4786121744461484155" onmouseenter="enter('4786121744461484155');" onmouseout="out('4786121744461484155');" style="">1206                 .withMaxIndex(getMaxIndex(requestParams))                                                </span>
<span class="2941692162045974129" onmouseenter="enter('2941692162045974129');" onmouseout="out('2941692162045974129');" style="">1207                 .withLastId(getLastId(requestParams))                                                    </span>
<span class="-9137331061893195290" onmouseenter="enter('-9137331061893195290');" onmouseout="out('-9137331061893195290');" style="">1208                 .withFirstId(getFirstId(requestParams))                                                  </span>
<span class="-6497878492174321892" onmouseenter="enter('-6497878492174321892');" onmouseout="out('-6497878492174321892');" style="">1209                 .withUpperCount(getUpperCount(requestParams))                                            </span>
<span class="-8373154769706308503" onmouseenter="enter('-8373154769706308503');" onmouseout="out('-8373154769706308503');" style="">1210                 .withLowerCount(getLowerCount(requestParams))                                            </span>
<span class="-1051723743320189375" onmouseenter="enter('-1051723743320189375');" onmouseout="out('-1051723743320189375');" style="">1211                 .withPageSize(getPageSize(requestParams))                                                </span>
<span class="-6582704259903712752" onmouseenter="enter('-6582704259903712752');" onmouseout="out('-6582704259903712752');" style="">1212                 .withPresentationFetch(true);                                                            </span>
<span  style="">1213                                                                                                          </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1214         if (md instanceof BasicCollectionMetadata) {                                                     </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1215             BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                  </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style="">1216             if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                  </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""><abbr title="1217                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1217                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData(ðŸ”µ</abbr></span>
<span class="-2914433993330253670" onmouseenter="enter('-2914433993330253670');" onmouseout="out('-2914433993330253670');" style=""><abbr title="1218                 // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types">1218                 // If the entity type isn&#x27;t specified, we need to determine if there are various polymorpðŸ”µ</abbr></span>
<span class="-7795450821592681641" onmouseenter="enter('-7795450821592681641');" onmouseout="out('-7795450821592681641');" style="">1219                 // for this entity.                                                                      </span>
<span class="6186895968667433501" onmouseenter="enter('6186895968667433501');" onmouseout="out('6186895968667433501');" style="">1220                 String entityType = null;                                                                </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">1221 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1222                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">1223 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1224         }                                                                                                </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1225         return responseMap;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1226     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1227                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1228     /**                                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1229      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1230      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1231      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1232      * @param model                                                                                      </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">1233 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1234                                                                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">1235 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="3580632700461537732" onmouseenter="enter('3580632700461537732');" onmouseout="out('3580632700461537732');" style="">1236                 if (requestParams.containsKey(&quot;entityType&quot;)) {                                           </span>
<span class="-1630371572733568969" onmouseenter="enter('-1630371572733568969');" onmouseout="out('-1630371572733568969');" style="">1237                     entityType = requestParams.get(&quot;entityType&quot;).get(0);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1238                 }                                                                                        </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">1239 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1240                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">1241 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1242     /**                                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1243      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1244      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1245      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1246      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1247      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1248      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1249      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1250      * @param requestParams                                                                              </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">1251 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1252                                                                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">1253 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="2600422776092116832" onmouseenter="enter('2600422776092116832');" onmouseout="out('2600422776092116832');" style="">1254                 entityType = determineEntityType(entityType, cmd);                                       </span>
<span  style="">1255                                                                                                          </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style="">1256                 if (StringUtils.isBlank(entityType)) {                                                   </span>
<span class="679217737668422196" onmouseenter="enter('679217737668422196');" onmouseout="out('679217737668422196');" style="">1257                     return getModalForBlankEntityType(request, model, sectionKey, cmd);                  </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">1258 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1259                 }                                                                                        </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1260                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">1261 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1262      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1263      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1264      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1265      * @param requestParams                                                                              </span>
<span class="-4008047975326689228" onmouseenter="enter('-4008047975326689228');" onmouseout="out('-4008047975326689228');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1266      * @return Json collection data                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1267      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1268      */                                                                                                  </span>
<span class="1491507797785399205" onmouseenter="enter('1491507797785399205');" onmouseout="out('1491507797785399205');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1269     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize&quot;, method = RequestMethod.GET)          </span>
<span class="3394871197523978831" onmouseenter="enter('3394871197523978831');" onmouseout="out('3394871197523978831');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1270     public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HttpServletResponse response, Model model,">1270     public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HtðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1271             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">1272 =======                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1273                 }                                                                                        </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1274                                                                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">1275 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-58316621888079189" onmouseenter="enter('-58316621888079189');" onmouseout="out('-58316621888079189');" style="">1276                 ppr = ppr.withCeilingEntityClassname(entityType);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1277             }                                                                                            </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1278         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="-8815560953057448419" onmouseenter="enter('-8815560953057448419');" onmouseout="out('-8815560953057448419');" style=""><abbr title="1279             ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionType(request,response,model,sectionKey,id,requestParams,(MapMetadata) md);">1279             ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionTypðŸ”µ</abbr></span>
<span class="6674469997589527714" onmouseenter="enter('6674469997589527714');" onmouseout="out('6674469997589527714');" style="">1280             if (result.equals(ExtensionResultStatusType.HANDLED)) {                                      </span>
<span class="1057476267973220454" onmouseenter="enter('1057476267973220454');" onmouseout="out('1057476267973220454');" style="">1281                 model.addAttribute(&quot;entityId&quot;, id);                                                      </span>
<span class="6720161805434028669" onmouseenter="enter('6720161805434028669');" onmouseout="out('6720161805434028669');" style="">1282                 model.addAttribute(&quot;sectionKey&quot;, sectionKey);                                            </span>
<span class="-2435595331613687341" onmouseenter="enter('-2435595331613687341');" onmouseout="out('-2435595331613687341');" style="">1283                 model.addAttribute(&quot;collectionField&quot;, collectionField);                                  </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="">1284                 return MODAL_CONTAINER_VIEW;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1285             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1286         }                                                                                                </span>
<span  style="">1287                                                                                                          </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style="">1288         model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));       </span>
<span  style="">1289                                                                                                          </span>
<span class="6180232744784249160" onmouseenter="enter('6180232744784249160');" onmouseout="out('6180232744784249160');" style=""><abbr title="1290         return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty, md, ppr, null, null);">1290         return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, colðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1291     }                                                                                                    </span>
<span  style="">1292                                                                                                          </span>
<span class="-2220429573703069666" onmouseenter="enter('-2220429573703069666');" onmouseout="out('-2220429573703069666');" style="">1293     protected String getModalForBlankEntityType(final HttpServletRequest request,                        </span>
<span class="-5263780204247815298" onmouseenter="enter('-5263780204247815298');" onmouseout="out('-5263780204247815298');" style="">1294             final Model model, final String sectionKey, final ClassMetadata cmd) {                       </span>
<span class="-2316979209506989336" onmouseenter="enter('-2316979209506989336');" onmouseout="out('-2316979209506989336');" style="">1295         final List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());             </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style="">1296         model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                                  </span>
<span class="-7344898891916261334" onmouseenter="enter('-7344898891916261334');" onmouseout="out('-7344898891916261334');" style="">1297         model.addAttribute(&quot;viewType&quot;, &quot;modal/entityTypeSelection&quot;);                                     </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style="">1298         model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());        </span>
<span  style="">1299                                                                                                          </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style="">1300         String requestUri = request.getRequestURI();                                                     </span>
<span class="3126054482386392887" onmouseenter="enter('3126054482386392887');" onmouseout="out('3126054482386392887');" style="">1301         final String contextPath = request.getContextPath();                                             </span>
<span  style="">1302                                                                                                          </span>
<span class="1413502326105343009" onmouseenter="enter('1413502326105343009');" onmouseout="out('1413502326105343009');" style="">1303         if (!contextPath.equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(contextPath)) {                            </span>
<span class="-5812874762785975576" onmouseenter="enter('-5812874762785975576');" onmouseout="out('-5812874762785975576');" style="">1304             requestUri = requestUri.substring(contextPath.length() + 1, requestUri.length());            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1305         }                                                                                                </span>
<span  style="">1306                                                                                                          </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style="">1307         model.addAttribute(&quot;currentUri&quot;, requestUri);                                                    </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style="">1308         model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1309         setModelAttributes(model, sectionKey);                                                           </span>
<span  style="">1310                                                                                                          </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="">1311         return MODAL_CONTAINER_VIEW;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1312     }                                                                                                    </span>
<span  style="">1313                                                                                                          </span>
<span class="373770933822047642" onmouseenter="enter('373770933822047642');" onmouseout="out('373770933822047642');" style=""><abbr title="1314     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMethod.POST)">1314     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMðŸ”µ</abbr></span>
<span class="-870509305261572147" onmouseenter="enter('-870509305261572147');" onmouseout="out('-870509305261572147');" style=""><abbr title="1315     public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1315     public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1316             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1317             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1318             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1319             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1320         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1321         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1322         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1323         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1323         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1324         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1325         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1326         Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                               </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1327         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1328             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1328             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, maðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1329                     collectionField,                                                                     </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1330                     collectionItemId, responseMap);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1331         }                                                                                                </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1332         return responseMap;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1333     }                                                                                                    </span>
<span  style="">1334                                                                                                          </span>
<span class="-2220429573703069666" onmouseenter="enter('-2220429573703069666');" onmouseout="out('-2220429573703069666');" style="">1335     protected String getModalForBlankEntityType(final HttpServletRequest request,                        </span>
<span class="-5263780204247815298" onmouseenter="enter('-5263780204247815298');" onmouseout="out('-5263780204247815298');" style=""><abbr title="1336                                                 final Model model, final String sectionKey, final ClassMetadata cmd) {">1336                                                 final Model model, final String sectionKey, final ClassMeðŸ”µ</abbr></span>
<span class="-2316979209506989336" onmouseenter="enter('-2316979209506989336');" onmouseout="out('-2316979209506989336');" style="">1337         final List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());             </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style="">1338         model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                                  </span>
<span class="-7344898891916261334" onmouseenter="enter('-7344898891916261334');" onmouseout="out('-7344898891916261334');" style="">1339         model.addAttribute(&quot;viewType&quot;, &quot;modal/entityTypeSelection&quot;);                                     </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style="">1340         model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());        </span>
<span  style="">1341                                                                                                          </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style="">1342         String requestUri = request.getRequestURI();                                                     </span>
<span class="3126054482386392887" onmouseenter="enter('3126054482386392887');" onmouseout="out('3126054482386392887');" style="">1343         final String contextPath = request.getContextPath();                                             </span>
<span  style="">1344                                                                                                          </span>
<span class="1413502326105343009" onmouseenter="enter('1413502326105343009');" onmouseout="out('1413502326105343009');" style="">1345         if (!contextPath.equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(contextPath)) {                            </span>
<span class="-5812874762785975576" onmouseenter="enter('-5812874762785975576');" onmouseout="out('-5812874762785975576');" style="">1346             requestUri = requestUri.substring(contextPath.length() + 1, requestUri.length());            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1347         }                                                                                                </span>
<span  style="">1348                                                                                                          </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style="">1349         model.addAttribute(&quot;currentUri&quot;, requestUri);                                                    </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style="">1350         model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1351         setModelAttributes(model, sectionKey);                                                           </span>
<span  style="">1352                                                                                                          </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="">1353         return MODAL_CONTAINER_VIEW;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1354     }                                                                                                    </span>
<span  style="">1355                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1356     /**                                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1357      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1358      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1359      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1360      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1361      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1362      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1363      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style="">1364      * @param requestParams                                                                              </span>
<span class="-4008047975326689228" onmouseenter="enter('-4008047975326689228');" onmouseout="out('-4008047975326689228');" style="">1365      * @return Json collection data                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1366      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1367      */                                                                                                  </span>
<span class="1491507797785399205" onmouseenter="enter('1491507797785399205');" onmouseout="out('1491507797785399205');" style="">1368     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize&quot;, method = RequestMethod.GET)          </span>
<span class="3394871197523978831" onmouseenter="enter('3394871197523978831');" onmouseout="out('3394871197523978831');" style=""><abbr title="1369     public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HttpServletResponse response, Model model,">1369     public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HtðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1370             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style="">1371             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style="">1372             @PathVariable(value = &quot;collectionField&quot;) String collectionField,                             </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style="">1373             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1374         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1375         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1376         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style=""><abbr title="1377         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,">1377         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style="">1378                 sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1379         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1380         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style="">1381                                                                                                          </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style="">1382         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)        </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style="">1383                 .withFilterAndSortCriteria(getCriteria(requestParams))                                   </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style="">1384                 .withStartIndex(getStartIndex(requestParams))                                            </span>
<span class="-115113180096268460" onmouseenter="enter('-115113180096268460');" onmouseout="out('-115113180096268460');" style="">1385                 .withMaxIndex(getMaxIndex(requestParams));                                               </span>
<span class="1857239787668878379" onmouseenter="enter('1857239787668878379');" onmouseout="out('1857239787668878379');" style=""><abbr title="1386         String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizeCustomCriteria()))">1386         String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizðŸ”µ</abbr></span>
<span class="8925682901439482297" onmouseenter="enter('8925682901439482297');" onmouseout="out('8925682901439482297');" style="">1387                 .toArray(String[]::new);                                                                 </span>
<span class="-226841645969872938" onmouseenter="enter('-226841645969872938');" onmouseout="out('-226841645969872938');" style="">1388         ppr = ppr.withCustomCriteria( both);                                                             </span>
<span  style="">1389                                                                                                          </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1390         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1391             ppr.setOperationTypesOverride(null);                                                         </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1392             ppr.setType(PersistencePackageRequest.Type.STANDARD);                                        </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1393             ppr.setSectionEntityField(collectionField);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1394         }                                                                                                </span>
<span  style="">1395                                                                                                          </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1396         DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                            </span>
<span  style="">1397                                                                                                          </span>
<span class="9153362413933125536" onmouseenter="enter('9153362413933125536');" onmouseout="out('9153362413933125536');" style=""><abbr title="1398         return formService.buildSelectizeCollectionInfo(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1398         return formService.buildSelectizeCollectionInfo(id, drs, collectionProperty, sectionKey, sectionCðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1399     }                                                                                                    </span>
<span  style="">1400                                                                                                          </span>
<span class="-7439222430983038453" onmouseenter="enter('-7439222430983038453');" onmouseout="out('-7439222430983038453');" style="">1401     protected String[] buildSelectizeCustomCriteria() {                                                  </span>
<span class="-4161579644301235736" onmouseenter="enter('-4161579644301235736');" onmouseout="out('-4161579644301235736');" style="">1402         return new String[]{ IS_SELECTIZE_REQUEST };                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1403     }                                                                                                    </span>
<span  style="">1404                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1405     /**                                                                                                  </span>
<span class="-7141111024633203374" onmouseenter="enter('-7141111024633203374');" onmouseout="out('-7141111024633203374');" style="">1406      * Adds the requested collection item via Selectize                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1407      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1408      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1409      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1410      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1411      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1412      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1413      * @param collectionField                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1414      * @param entityForm                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1415      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1416      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1417      */                                                                                                  </span>
<span class="4942792763487402415" onmouseenter="enter('4942792763487402415');" onmouseout="out('4942792763487402415');" style="">1418     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize-add&quot;, method = RequestMethod.POST)     </span>
<span class="8163998475300370418" onmouseenter="enter('8163998475300370418');" onmouseout="out('8163998475300370418');" style=""><abbr title="1419     public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1419     public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpSðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1420             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1421             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1422             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1423             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1423             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-3120252458037341618" onmouseenter="enter('-3120252458037341618');" onmouseout="out('-3120252458037341618');" style="">1424         Map&lt;String, Object&gt; returnVal = new HashMap&lt;&gt;();                                                 </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1425         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1426         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1427         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1428         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1428         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1429         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1430                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1431         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1432             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1433             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1434                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1435             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1436         }                                                                                                </span>
<span  style="">1437                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1438         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1438         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style="">1439         ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                           </span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1440         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1441         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1441         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span  style="">1442                                                                                                          </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1443         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1444         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1444         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1445         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1446         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">1447                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1448         if (result.hasErrors()) {                                                                        </span>
<span class="842224369260603633" onmouseenter="enter('842224369260603633');" onmouseout="out('842224369260603633');" style="">1449             returnVal.put(&quot;error&quot;, result.getFieldError());                                              </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1450             return returnVal;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1451         }                                                                                                </span>
<span  style="">1452                                                                                                          </span>
<span class="2610632867002015507" onmouseenter="enter('2610632867002015507');" onmouseout="out('2610632867002015507');" style="">1453         if (savedEntity.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                   </span>
<span class="-5383740165855607078" onmouseenter="enter('-5383740165855607078');" onmouseout="out('-5383740165855607078');" style="">1454             returnVal.put(&quot;alternateId&quot;, savedEntity.findProperty(ALTERNATE_ID_PROPERTY).getValue());    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1455         }                                                                                                </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1456         return returnVal;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1457     }                                                                                                    </span>
<span  style="">1458                                                                                                          </span>
<span class="5412920841771640365" onmouseenter="enter('5412920841771640365');" onmouseout="out('5412920841771640365');" style="">1459     protected void declareShouldIgnoreAdditionStatusFilter() {                                           </span>
<span class="-4270951653865217168" onmouseenter="enter('-4270951653865217168');" onmouseout="out('-4270951653865217168');" style=""><abbr title="1460         Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().getAdditionalProperties();">1460         Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().gðŸ”µ</abbr></span>
<span class="-3723341051420574210" onmouseenter="enter('-3723341051420574210');" onmouseout="out('-3723341051420574210');" style="">1461         additionalProperties.put(&quot;shouldIgnoreAdditionStatusFilter&quot;, true);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1462     }                                                                                                    </span>
<span  style="">1463                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1464     /**                                                                                                  </span>
<span class="1325408264830379158" onmouseenter="enter('1325408264830379158');" onmouseout="out('1325408264830379158');" style="">1465      * Adds the requested collection item                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1466      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1467      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1468      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1469      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1470      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1471      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1472      * @param collectionField                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1473      * @param entityForm                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1474      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1475      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1476      */                                                                                                  </span>
<span class="-2068929988984533631" onmouseenter="enter('-2068929988984533631');" onmouseout="out('-2068929988984533631');" style="">1477     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.POST)               </span>
<span class="-6457137423768539998" onmouseenter="enter('-6457137423768539998');" onmouseout="out('-6457137423768539998');" style=""><abbr title="1478     public String addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1478     public String addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model modelðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1479             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1480             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1481             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1482             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1482             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1483         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1484         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1485         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1486         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1486         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1487         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1488                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1489         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1490             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1491             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1492                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1493             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1494         }                                                                                                </span>
<span  style="">1495                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1496         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1496         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1497         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1498         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1498         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1499         service.clearEntityManager();                                                                    </span>
<span  style="">1500                                                                                                          </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1501         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1502         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1502         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1503         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1504         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">1505                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1506         if (result.hasErrors()) {                                                                        </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1507             FieldMetadata md = collectionProperty.getMetadata();                                         </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1508             ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                             </span>
<span class="4503162777083318611" onmouseenter="enter('4503162777083318611');" onmouseout="out('4503162777083318611');" style=""><abbr title="1509             return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty,">1509             return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey,ðŸ”µ</abbr></span>
<span class="5267635088951466475" onmouseenter="enter('5267635088951466475');" onmouseout="out('5267635088951466475');" style="">1510                     md, ppr, entityForm, savedEntity);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1511         }                                                                                                </span>
<span  style="">1512                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1513         // Next, we must get the new list grid that represents this collection                           </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1514         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1514         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1515         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style="">1516                                                                                                          </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1517         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="7250522969210652718" onmouseenter="enter('7250522969210652718');" onmouseout="out('7250522969210652718');" style="">1518         model.addAttribute(&quot;actualEntityId&quot;, id);                                                        </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1519         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1520         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1521     }                                                                                                    </span>
<span  style="">1522                                                                                                          </span>
<span class="-8003545521832011894" onmouseenter="enter('-8003545521832011894');" onmouseout="out('-8003545521832011894');" style="">1523     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/addEmpty&quot;, method = RequestMethod.POST)          </span>
<span class="162700220048203938" onmouseenter="enter('162700220048203938');" onmouseout="out('162700220048203938');" style=""><abbr title="1524     public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1524     public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse reðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1525             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1526             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1527             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1528             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1528             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1529         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1530         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1531         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1532         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1532         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1533         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1534                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1535         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1536             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1537             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1538                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1539             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1540         }                                                                                                </span>
<span  style="">1541                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1542         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1542         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1543         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1543         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-5337934248855825573" onmouseenter="enter('-5337934248855825573');" onmouseout="out('-5337934248855825573');" style="">1544         entity.setIsPreAdd(true);                                                                        </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1545         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1546         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1546         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1547         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span  style="">1548                                                                                                          </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">1549         return new JsonResponse(response)                                                                </span>
<span class="-645443211281069037" onmouseenter="enter('-645443211281069037');" onmouseout="out('-645443211281069037');" style="">1550                 .with(&quot;status&quot;, &quot;complete&quot;)                                                              </span>
<span class="-7858493257692229655" onmouseenter="enter('-7858493257692229655');" onmouseout="out('-7858493257692229655');" style="">1551                 .with(&quot;id&quot;, savedEntity.findProperty(entityForm.getIdProperty()).getValue())             </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">1552                 .done();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1553     }                                                                                                    </span>
<span  style="">1554                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1555     /**                                                                                                  </span>
<span class="-6140462241686685910" onmouseenter="enter('-6140462241686685910');" onmouseout="out('-6140462241686685910');" style=""><abbr title="1556      * Builds out all of the model information needed for showing the add modal for collection items on both the initial GET">1556      * Builds out all of the model information needed for showing the add modal for collection items on bðŸ”µ</abbr></span>
<span class="9052968863197617086" onmouseenter="enter('9052968863197617086');" onmouseout="out('9052968863197617086');" style="">1557      * as well as after a POST with validation errors                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1558      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1559      * @param request                                                                                    </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1560      * @param model                                                                                      </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1561      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1562      * @param collectionField                                                                            </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style="">1563      * @param sectionKey                                                                                 </span>
<span class="-7927619294366963435" onmouseenter="enter('-7927619294366963435');" onmouseout="out('-7927619294366963435');" style="">1564      * @param collectionProperty                                                                         </span>
<span class="-5426566728726502924" onmouseenter="enter('-5426566728726502924');" onmouseout="out('-5426566728726502924');" style="">1565      * @param md                                                                                         </span>
<span class="4349163197755218506" onmouseenter="enter('4349163197755218506');" onmouseout="out('4349163197755218506');" style="">1566      * @param ppr                                                                                        </span>
<span class="2094225145376343101" onmouseenter="enter('2094225145376343101');" onmouseout="out('2094225145376343101');" style="">1567      * @return the appropriate view to display for the modal                                             </span>
<span class="450948407444547835" onmouseenter="enter('450948407444547835');" onmouseout="out('450948407444547835');" style=""><abbr title="1568      * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, EntityForm, BindingResult)}">1568      * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, StringðŸ”µ</abbr></span>
<span class="3423849059172457982" onmouseenter="enter('3423849059172457982');" onmouseout="out('3423849059172457982');" style=""><abbr title="1569      * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, MultiValueMap)}">1569      * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, StðŸ”µ</abbr></span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1570      * @throws ServiceException                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1571      */                                                                                                  </span>
<span class="-4127331421111161450" onmouseenter="enter('-4127331421111161450');" onmouseout="out('-4127331421111161450');" style=""><abbr title="1572     protected String buildAddCollectionItemModel(HttpServletRequest request, HttpServletResponse response,">1572     protected String buildAddCollectionItemModel(HttpServletRequest request, HttpServletResponse responseðŸ”µ</abbr></span>
<span class="1808182660955839449" onmouseenter="enter('1808182660955839449');" onmouseout="out('1808182660955839449');" style=""><abbr title="1573             Model model, String id, String collectionField, String sectionKey, Property collectionProperty,">1573             Model model, String id, String collectionField, String sectionKey, Property collectionPropertðŸ”µ</abbr></span>
<span class="-5972908184992702659" onmouseenter="enter('-5972908184992702659');" onmouseout="out('-5972908184992702659');" style=""><abbr title="1574             FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throws ServiceException {">1574             FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throwsðŸ”µ</abbr></span>
<span  style="">1575                                                                                                          </span>
<span class="-2054675889041043286" onmouseenter="enter('-2054675889041043286');" onmouseout="out('-2054675889041043286');" style=""><abbr title="1576         // For requests to add a new collection item include the main class that the subsequent request comes from.">1576         // For requests to add a new collection item include the main class that the subsequent request cðŸ”µ</abbr></span>
<span class="7422952884503198827" onmouseenter="enter('7422952884503198827');" onmouseout="out('7422952884503198827');" style=""><abbr title="1577         // For instance, with basic collections we know the main associated class for a fetch through the ForeignKey">1577         // For instance, with basic collections we know the main associated class for a fetch through theðŸ”µ</abbr></span>
<span class="5831142982738818001" onmouseenter="enter('5831142982738818001');" onmouseout="out('5831142982738818001');" style=""><abbr title="1578         // persistence item but map and adorned target lookups make a standard persistence request. This solution">1578         // persistence item but map and adorned target lookups make a standard persistence request. This ðŸ”µ</abbr></span>
<span class="-3910081436214830376" onmouseenter="enter('-3910081436214830376');" onmouseout="out('-3910081436214830376');" style="">1579         // fixes all cases.                                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1580         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-8007514226035577536" onmouseenter="enter('-8007514226035577536');" onmouseout="out('-8007514226035577536');" style="">1581         ppr.addCustomCriteria(&quot;owningClass=&quot; + mainClassName);                                           </span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style="">1582         ppr.setAddOperationInspect(true);                                                                </span>
<span  style="">1583                                                                                                          </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1584         if (entityForm != null) {                                                                        </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1585             entityForm.clearFieldsMap();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1586         }                                                                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1587         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1588         if (md instanceof BasicCollectionMetadata) {                                                     </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1589             BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                  </span>
<span  style="">1590                                                                                                          </span>
<span class="5473401195179812518" onmouseenter="enter('5473401195179812518');" onmouseout="out('5473401195179812518');" style=""><abbr title="1591             // When adding items to basic collections, we will sometimes show a form to persist a new record">1591             // When adding items to basic collections, we will sometimes show a form to persist a new recðŸ”µ</abbr></span>
<span class="3817220166052180028" onmouseenter="enter('3817220166052180028');" onmouseout="out('3817220166052180028');" style="">1592             // and sometimes show a list grid to allow the user to associate an existing record.         </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style="">1593             if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                  </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1594                 ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1594                 ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().geðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1595                 if (entityForm == null) {                                                                </span>
<span class="509426350308747164" onmouseenter="enter('509426350308747164');" onmouseout="out('509426350308747164');" style="">1596                     entityForm = formService.createEntityForm(collectionMetadata,sectionCrumbs);         </span>
<span class="2737056182573571703" onmouseenter="enter('2737056182573571703');" onmouseout="out('2737056182573571703');" style="">1597                     entityForm.setCeilingEntityClassname(ppr.getCeilingEntityClassname());               </span>
<span class="2710161406345740991" onmouseenter="enter('2710161406345740991');" onmouseout="out('2710161406345740991');" style="">1598                     entityForm.setEntityType(ppr.getCeilingEntityClassname());                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1599                 } else {                                                                                 </span>
<span class="-5799643084244932085" onmouseenter="enter('-5799643084244932085');" onmouseout="out('-5799643084244932085');" style="">1600                     formService.populateEntityForm(collectionMetadata, entityForm, sectionCrumbs);       </span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1601                     formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1602                 }                                                                                        </span>
<span class="-7315185064917392199" onmouseenter="enter('-7315185064917392199');" onmouseout="out('-7315185064917392199');" style=""><abbr title="1603                 formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntityClassname());">1603                 formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntitðŸ”µ</abbr></span>
<span class="1687533348183327340" onmouseenter="enter('1687533348183327340');" onmouseout="out('1687533348183327340');" style="">1604                 entityForm.getTabs().iterator().next().getIsVisible();                                   </span>
<span  style="">1605                                                                                                          </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1606                 model.addAttribute(&quot;entityForm&quot;, entityForm);                                            </span>
<span class="-2634442257361103125" onmouseenter="enter('-2634442257361103125');" onmouseout="out('-2634442257361103125');" style="">1607                 model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleAddEntity&quot;);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1608             } else {                                                                                     </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1609                 DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                    </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1610                 ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1610                 ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectðŸ”µ</abbr></span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1611                 listGrid.setPathOverride(request.getRequestURL().toString());                            </span>
<span  style="">1612                                                                                                          </span>
<span class="6493773829436488040" onmouseenter="enter('6493773829436488040');" onmouseout="out('6493773829436488040');" style=""><abbr title="1613                 if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUP.equals(fmd.getAddMethodType())) {">1613                 if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUPðŸ”µ</abbr></span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1614                     listGrid.removeAllRowActions();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1615                 }                                                                                        </span>
<span  style="">1616                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1617                 model.addAttribute(&quot;listGrid&quot;, listGrid);                                                </span>
<span class="-4615041483574305082" onmouseenter="enter('-4615041483574305082');" onmouseout="out('-4615041483574305082');" style="">1618                 model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleSelectEntity&quot;);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1619             }                                                                                            </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1620         } else if (md instanceof AdornedTargetCollectionMetadata) {                                      </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1621             AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                  </span>
<span  style="">1622                                                                                                          </span>
<span class="-4994014003685781795" onmouseenter="enter('-4994014003685781795');" onmouseout="out('-4994014003685781795');" style=""><abbr title="1623             // Even though this field represents an adorned target collection, the list we want to show in the modal">1623             // Even though this field represents an adorned target collection, the list we want to show iðŸ”µ</abbr></span>
<span class="3396745077097675731" onmouseenter="enter('3396745077097675731');" onmouseout="out('3396745077097675731');" style="">1624             // is the standard list grid for the target entity of this field                             </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1625             ppr.setOperationTypesOverride(null);                                                         </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1626             ppr.setType(PersistencePackageRequest.Type.STANDARD);                                        </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1627             ppr.setSectionEntityField(collectionField);                                                  </span>
<span  style="">1628                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1629             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1629             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span  style="">1630                                                                                                          </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1631             DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                        </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1632             ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1632             ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKðŸ”µ</abbr></span>
<span class="1884537605734649521" onmouseenter="enter('1884537605734649521');" onmouseout="out('1884537605734649521');" style="">1633             listGrid.setSubCollectionFieldName(collectionField);                                         </span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1634             listGrid.setPathOverride(request.getRequestURL().toString());                                </span>
<span class="2370419943178688476" onmouseenter="enter('2370419943178688476');" onmouseout="out('2370419943178688476');" style="">1635             listGrid.setFriendlyName(collectionMetadata.getPolymorphicEntities().getFriendlyName());     </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1636             if (entityForm == null) {                                                                    </span>
<span class="-1229292684052118628" onmouseenter="enter('-1229292684052118628');" onmouseout="out('-1229292684052118628');" style=""><abbr title="1637                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, true);">1637                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectiðŸ”µ</abbr></span>
<span class="-7486141420721649683" onmouseenter="enter('-7486141420721649683');" onmouseout="out('-7486141420721649683');" style=""><abbr title="1638                 entityForm.setCeilingEntityClassname(ppr.getAdornedList().getAdornedTargetEntityClassname());">1638                 entityForm.setCeilingEntityClassname(ppr.getAdornedList().getAdornedTargetEntityClassnameðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1639             } else {                                                                                     </span>
<span class="7685228187033982459" onmouseenter="enter('7685228187033982459');" onmouseout="out('7685228187033982459');" style=""><abbr title="1640                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectionCrumbs, true);">1640                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectioðŸ”µ</abbr></span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1641                 formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1642             }                                                                                            </span>
<span  style="">1643                                                                                                          </span>
<span class="5169338689637413329" onmouseenter="enter('5169338689637413329');" onmouseout="out('5169338689637413329');" style="">1644             listGrid.setListGridType(ListGrid.Type.ADORNED);                                             </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1645             for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                       </span>
<span class="8450559638200016101" onmouseenter="enter('8450559638200016101');" onmouseout="out('8450559638200016101');" style="">1646                 if (entry.getValue().getIsVisible()) {                                                   </span>
<span class="1657391013588898454" onmouseenter="enter('1657391013588898454');" onmouseout="out('1657391013588898454');" style="">1647                     listGrid.setListGridType(ListGrid.Type.ADORNED_WITH_FORM);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1648                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1649                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1650             }                                                                                            </span>
<span  style="">1651                                                                                                          </span>
<span class="-757286675881477752" onmouseenter="enter('-757286675881477752');" onmouseout="out('-757286675881477752');" style="">1652             // This is part of an add, so we want to be able to filter/sort the listgrid                 </span>
<span class="3421525283764936758" onmouseenter="enter('3421525283764936758');" onmouseout="out('3421525283764936758');" style="">1653             listGrid.setIsSortable(false);                                                               </span>
<span class="-2714096270635703274" onmouseenter="enter('-2714096270635703274');" onmouseout="out('-2714096270635703274');" style="">1654             listGrid.setCanFilterAndSort(true);                                                          </span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1655             listGrid.removeAllRowActions();                                                              </span>
<span  style="">1656                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1657             model.addAttribute(&quot;listGrid&quot;, listGrid);                                                    </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1658             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="-1071174233767081578" onmouseenter="enter('-1071174233767081578');" onmouseout="out('-1071174233767081578');" style="">1659             model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedSelectEntity&quot;);                                 </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1660         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1661             MapMetadata fmd = (MapMetadata) md;                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1662             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1662             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span  style="">1663                                                                                                          </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1664             if (entityForm == null) {                                                                    </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style=""><abbr title="1665                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);">1665                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id)ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1666             } else {                                                                                     </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1667                 formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);</span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1668                 formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1669             }                                                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1670             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="-892500240032703395" onmouseenter="enter('-892500240032703395');" onmouseout="out('-892500240032703395');" style="">1671             model.addAttribute(&quot;viewType&quot;, &quot;modal/mapAddEntity&quot;);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1672         }                                                                                                </span>
<span  style="">1673                                                                                                          </span>
<span class="6074380392351813368" onmouseenter="enter('6074380392351813368');" onmouseout="out('6074380392351813368');" style="">1674         // Set the parent id on the entity form                                                          </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1675         if (entityForm != null) {                                                                        </span>
<span class="-3154229542834445725" onmouseenter="enter('-3154229542834445725');" onmouseout="out('-3154229542834445725');" style="">1676             entityForm.setParentId(id);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1677         }                                                                                                </span>
<span  style="">1678                                                                                                          </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1679         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="7819166863376485578" onmouseenter="enter('7819166863376485578');" onmouseout="out('7819166863376485578');" style="">1680         model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_COLLECTION_ITEM.getType());            </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1681         model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1682         setModelAttributes(model, sectionKey);                                                           </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="">1683         return MODAL_CONTAINER_VIEW;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1684     }                                                                                                    </span>
<span  style="">1685                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1686     /**                                                                                                  </span>
<span class="3915085583429756257" onmouseenter="enter('3915085583429756257');" onmouseout="out('3915085583429756257');" style="">1687      * Shows the appropriate modal dialog to edit the selected collection item                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1688      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1689      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1690      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1691      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1692      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1693      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1694      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1695      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1696      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1697      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1698      */                                                                                                  </span>
<span class="5941881897199209931" onmouseenter="enter('5941881897199209931');" onmouseout="out('5941881897199209931');" style=""><abbr title="1699     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.GET)">1699     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequeðŸ”µ</abbr></span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style=""><abbr title="1700     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1700     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, ModeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1701             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1702             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1703             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1704             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1705             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1706         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1706         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1707                 ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1708     }                                                                                                    </span>
<span  style="">1709                                                                                                          </span>
<span class="-3777402830265989862" onmouseenter="enter('-3777402830265989862');" onmouseout="out('-3777402830265989862');" style="">1710     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.GET) </span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style=""><abbr title="1711     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1711     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, ModeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1712             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1713             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1714             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1715             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="7585768018133278114" onmouseenter="enter('7585768018133278114');" onmouseout="out('7585768018133278114');" style=""><abbr title="1716         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,">1716         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1717                 ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1718     }                                                                                                    </span>
<span  style="">1719                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1720     /**                                                                                                  </span>
<span class="6761933478321573145" onmouseenter="enter('6761933478321573145');" onmouseout="out('6761933478321573145');" style=""><abbr title="1721      * Shows the appropriate modal dialog to view the selected collection item. This will display the modal as readonly">1721      * Shows the appropriate modal dialog to view the selected collection item. This will display the modðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1722      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1723      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1724      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1725      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1726      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1727      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1728      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1729      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1730      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1731      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1732      */                                                                                                  </span>
<span class="5228464490364608791" onmouseenter="enter('5228464490364608791');" onmouseout="out('5228464490364608791');" style=""><abbr title="1733     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = RequestMethod.GET)">1733     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = ðŸ”µ</abbr></span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style=""><abbr title="1734     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1734     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1735             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1736             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1737             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1738             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1739             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="7887850161668822106" onmouseenter="enter('7887850161668822106');" onmouseout="out('7887850161668822106');" style=""><abbr title="1740         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1740         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, colleðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1741                 ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                         </span>
<span  style="">1742                                                                                                          </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1743         // Since this is a read-only view, actions don&#x27;t make sense in this context                      </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1744         EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                    </span>
<span class="7289613241506142720" onmouseenter="enter('7289613241506142720');" onmouseout="out('7289613241506142720');" style="">1745         addAuditableDisplayFields(ef);                                                                   </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1746         ef.removeAllActions();                                                                           </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1747         ef.setReadOnly();                                                                                </span>
<span  style="">1748                                                                                                          </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1749         return returnPath;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1750     }                                                                                                    </span>
<span  style="">1751                                                                                                          </span>
<span class="6858008221927215769" onmouseenter="enter('6858008221927215769');" onmouseout="out('6858008221927215769');" style=""><abbr title="1752     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view&quot;, method = RequestMethod.GET)">1752     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view&quot;, method = RequestMethod.ðŸ”µ</abbr></span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style=""><abbr title="1753     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1753     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1754             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1755             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1756             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1757             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="2521791674908842244" onmouseenter="enter('2521791674908842244');" onmouseout="out('2521791674908842244');" style=""><abbr title="1758         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,">1758         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, colleðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1759                 ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                         </span>
<span  style="">1760                                                                                                          </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1761         // Since this is a read-only view, actions don&#x27;t make sense in this context                      </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1762         EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                    </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1763         ef.removeAllActions();                                                                           </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1764         ef.setReadOnly();                                                                                </span>
<span  style="">1765                                                                                                          </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1766         return returnPath;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1767     }                                                                                                    </span>
<span  style="">1768                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1769     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1769     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="6852009337058352330" onmouseenter="enter('6852009337058352330');" onmouseout="out('6852009337058352330');" style=""><abbr title="1770             String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderType) throws ServiceException {">1770             String id, String collectionField, String collectionItemId, String alternateId, String modalHðŸ”µ</abbr></span>
<span class="-2699953653458232908" onmouseenter="enter('-2699953653458232908');" onmouseout="out('-2699953653458232908');" style=""><abbr title="1771         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId, modalHeaderType, null, null);">1771         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1772     }                                                                                                    </span>
<span  style="">1773                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1774     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1774     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="-3706011950121400951" onmouseenter="enter('-3706011950121400951');" onmouseout="out('-3706011950121400951');" style=""><abbr title="1775             String id, String collectionField, String collectionItemId, String modalHeaderType) throws ServiceException {">1775             String id, String collectionField, String collectionItemId, String modalHeaderType) throws SeðŸ”µ</abbr></span>
<span class="-6899013896128397577" onmouseenter="enter('-6899013896128397577');" onmouseout="out('-6899013896128397577');" style=""><abbr title="1776         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, null, null);">1776         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1777     }                                                                                                    </span>
<span  style="">1778                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1779     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1779     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="4852573692087282601" onmouseenter="enter('4852573692087282601');" onmouseout="out('4852573692087282601');" style=""><abbr title="1780                 String id, String collectionField, String collectionItemId, String modalHeaderType, EntityForm entityForm, Entity entity) throws ServiceException {">1780                 String id, String collectionField, String collectionItemId, String modalHeaderType, EntitðŸ”µ</abbr></span>
<span class="6580107021722154279" onmouseenter="enter('6580107021722154279');" onmouseout="out('6580107021722154279');" style=""><abbr title="1781         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, entityForm, entity);">1781         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1782     }                                                                                                    </span>
<span  style="">1783                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1784     /**                                                                                                  </span>
<span class="837861132196545598" onmouseenter="enter('837861132196545598');" onmouseout="out('837861132196545598');" style=""><abbr title="1785      * Shows the view and populates the model for updating a collection item. You can also pass in an entityform and entity">1785      * Shows the view and populates the model for updating a collection item. You can also pass in an entðŸ”µ</abbr></span>
<span class="5643306329084644224" onmouseenter="enter('5643306329084644224');" onmouseout="out('5643306329084644224');" style="">1786      * which are optional. If they are not passed in then they are automatically looked up               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1787      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1788      * @param request                                                                                    </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1789      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1790      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1791      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1792      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1793      * @param collectionItemId                                                                           </span>
<span class="-5929844173285242940" onmouseenter="enter('-5929844173285242940');" onmouseout="out('-5929844173285242940');" style="">1794      * @param modalHeaderType                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1795      * @param entityForm                                                                                 </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style="">1796      * @param entity                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1797      * @return                                                                                           </span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1798      * @throws ServiceException                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1799      */                                                                                                  </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">1800 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-7113907340183053787" onmouseenter="enter('-7113907340183053787');" onmouseout="out('-7113907340183053787');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1801     protected String showViewUpdateCollection(HttpServletRequest request,                                </span>
<span class="-8519940996091909282" onmouseenter="enter('-8519940996091909282');" onmouseout="out('-8519940996091909282');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1802             Model model,                                                                                 </span>
<span class="233550986134862533" onmouseenter="enter('233550986134862533');" onmouseout="out('233550986134862533');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1803             Map&lt;String, String&gt; pathVars,                                                                </span>
<span class="462404651577214798" onmouseenter="enter('462404651577214798');" onmouseout="out('462404651577214798');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1804             String id,                                                                                   </span>
<span class="-5551105944774799057" onmouseenter="enter('-5551105944774799057');" onmouseout="out('-5551105944774799057');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1805             String collectionField,                                                                      </span>
<span class="-7138244874257810737" onmouseenter="enter('-7138244874257810737');" onmouseout="out('-7138244874257810737');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1806             String collectionItemId,                                                                     </span>
<span class="7426253478403504017" onmouseenter="enter('7426253478403504017');" onmouseout="out('7426253478403504017');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1807             String alternateId,                                                                          </span>
<span class="2900696252953040190" onmouseenter="enter('2900696252953040190');" onmouseout="out('2900696252953040190');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1808             String modalHeaderType,                                                                      </span>
<span class="5597094285729719755" onmouseenter="enter('5597094285729719755');" onmouseout="out('5597094285729719755');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1809             EntityForm entityForm,                                                                       </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">1810 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1811                 entityForm.setEntityType(entityType);                                                    </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1812                 populateTypeAndId = false;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1813             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1814                                                                                                          </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1815             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1816             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1816             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, maðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1817                     collectionField,                                                                     </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1818                     collectionItemId, responseMap);                                                      </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1819                                                                                                          </span>
<span class="-3972135447881278836" onmouseenter="enter('-3972135447881278836');" onmouseout="out('-3972135447881278836');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1820             //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and Id is used.">1820             //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and ðŸ”µ</abbr></span>
<span class="-8007896595560301001" onmouseenter="enter('-8007896595560301001');" onmouseout="out('-8007896595560301001');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1821             //It should be the entity and referenced Id of the adorned entity (not the target entity and Id).">1821             //It should be the entity and referenced Id of the adorned entity (not the target entity and ðŸ”µ</abbr></span>
<span class="316997016312344867" onmouseenter="enter('316997016312344867');" onmouseout="out('316997016312344867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1822             entityForm.setTranslationCeilingEntity(entityForm.getEntityType());                          </span>
<span class="-4512360180775881719" onmouseenter="enter('-4512360180775881719');" onmouseout="out('-4512360180775881719');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1823             entityForm.setTranslationId(alternateId);                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1824                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1825             ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();  </span>
<span class="-1465905251928147670" onmouseenter="enter('-1465905251928147670');" onmouseout="out('-1465905251928147670');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1826             for (String field : fmd.getMaintainedAdornedTargetFields()) {                                </span>
<span class="-2821179418575098708" onmouseenter="enter('-2821179418575098708');" onmouseout="out('-2821179418575098708');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1827                 if (responseMap.containsKey(field) &amp;&amp; responseMap.containsKey(&quot;autoSubmit&quot;)) {           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1828                     continue;                                                                            </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">1829 =======                                                                                                  </span>
<span class="-7113907340183053787" onmouseenter="enter('-7113907340183053787');" onmouseout="out('-7113907340183053787');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1830     protected String showViewUpdateCollection(HttpServletRequest request,                                </span>
<span class="-8519940996091909282" onmouseenter="enter('-8519940996091909282');" onmouseout="out('-8519940996091909282');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1831             Model model,                                                                                 </span>
<span class="233550986134862533" onmouseenter="enter('233550986134862533');" onmouseout="out('233550986134862533');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1832             Map&lt;String, String&gt; pathVars,                                                                </span>
<span class="462404651577214798" onmouseenter="enter('462404651577214798');" onmouseout="out('462404651577214798');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1833             String id,                                                                                   </span>
<span class="-5551105944774799057" onmouseenter="enter('-5551105944774799057');" onmouseout="out('-5551105944774799057');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1834             String collectionField,                                                                      </span>
<span class="-7138244874257810737" onmouseenter="enter('-7138244874257810737');" onmouseout="out('-7138244874257810737');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1835             String collectionItemId,                                                                     </span>
<span class="7426253478403504017" onmouseenter="enter('7426253478403504017');" onmouseout="out('7426253478403504017');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1836             String alternateId,                                                                          </span>
<span class="2900696252953040190" onmouseenter="enter('2900696252953040190');" onmouseout="out('2900696252953040190');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1837             String modalHeaderType,                                                                      </span>
<span class="5597094285729719755" onmouseenter="enter('5597094285729719755');" onmouseout="out('5597094285729719755');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1838             EntityForm entityForm,                                                                       </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">1839 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="3632664887850253049" onmouseenter="enter('3632664887850253049');" onmouseout="out('3632664887850253049');" style="">1840             Entity entity) throws ServiceException {                                                     </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1841         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1842         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1843         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1844         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1844         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1845         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1846         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span class="-2889762407992276786" onmouseenter="enter('-2889762407992276786');" onmouseout="out('-2889762407992276786');" style="">1847         SectionCrumb nextCrumb = new SectionCrumb();                                                     </span>
<span class="4180533444018328805" onmouseenter="enter('4180533444018328805');" onmouseout="out('4180533444018328805');" style="">1848         if (md instanceof MapMetadata) {                                                                 </span>
<span class="-382349485821163458" onmouseenter="enter('-382349485821163458');" onmouseout="out('-382349485821163458');" style="">1849             nextCrumb.setSectionIdentifier(((MapMetadata) md).getValueClassName());                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1850         } else {                                                                                         </span>
<span class="1919475910220989527" onmouseenter="enter('1919475910220989527');" onmouseout="out('1919475910220989527');" style="">1851             nextCrumb.setSectionIdentifier(((CollectionMetadata) md).getCollectionCeilingEntity());      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1852         }                                                                                                </span>
<span class="3745082800889494172" onmouseenter="enter('3745082800889494172');" onmouseout="out('3745082800889494172');" style="">1853         nextCrumb.setSectionId(collectionItemId);                                                        </span>
<span class="7047611651117816234" onmouseenter="enter('7047611651117816234');" onmouseout="out('7047611651117816234');" style="">1854         if (!sectionCrumbs.contains(nextCrumb)) {                                                        </span>
<span class="-6316688126111539901" onmouseenter="enter('-6316688126111539901');" onmouseout="out('-6316688126111539901');" style="">1855             sectionCrumbs.add(nextCrumb);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1856         }                                                                                                </span>
<span  style="">1857                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1858         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1858         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1859         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1859         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getReðŸ”µ</abbr></span>
<span  style="">1860                                                                                                          </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1861         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span  style="">1862                                                                                                          </span>
<span class="4300500518149699432" onmouseenter="enter('4300500518149699432');" onmouseout="out('4300500518149699432');" style="">1863         if (md instanceof BasicCollectionMetadata &amp;&amp;                                                     </span>
<span class="3179311364823579995" onmouseenter="enter('3179311364823579995');" onmouseout="out('3179311364823579995');" style="">1864                 (((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST) ||      </span>
<span class="-5057368181444983975" onmouseenter="enter('-5057368181444983975');" onmouseout="out('-5057368181444983975');" style=""><abbr title="1865                         ((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST_EMPTY))) {">1865                         ((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST_EMðŸ”µ</abbr></span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1866             BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                  </span>
<span  style="">1867                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1868             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1868             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1869             if (entity == null) {                                                                        </span>
<span class="4597721164047448054" onmouseenter="enter('4597721164047448054');" onmouseout="out('4597721164047448054');" style=""><abbr title="1870                 entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResultSet().getRecords()[0];">1870                 entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1871             }                                                                                            </span>
<span  style="">1872                                                                                                          </span>
<span class="-7942197356638317765" onmouseenter="enter('-7942197356638317765');" onmouseout="out('-7942197356638317765');" style="">1873             String currentTabName = getCurrentTabName(pathVars, collectionMetadata);                     </span>
<span class="9017537031938626444" onmouseenter="enter('9017537031938626444');" onmouseout="out('9017537031938626444');" style=""><abbr title="1874             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetadata, entity, sectionCrumbs, currentTabName);">1874             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetaðŸ”µ</abbr></span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">1875 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1876                                                                                                          </span>
<span class="348957922752701667" onmouseenter="enter('348957922752701667');" onmouseout="out('348957922752701667');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1877             entityForm = reinitializeEntityForm(entityForm, collectionMetadata, entity,                  </span>
<span class="-6666340752275266103" onmouseenter="enter('-6666340752275266103');" onmouseout="out('-6666340752275266103');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1878                     subRecordsMap, sectionCrumbs);                                                       </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1879                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">1880 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1881                                                                                                          </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1882                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1882                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(ðŸ”µ</abbr></span>
<span class="-6515044965274807025" onmouseenter="enter('-6515044965274807025');" onmouseout="out('-6515044965274807025');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1883                             mmd.getTargetClass(), sectionCrumbs);                                        </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1884                     listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1885                                                                                                          </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1886                     if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {       </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1887                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1887                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1888                     } else {                                                                             </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1889                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1889                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1890                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1891                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1892             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1893                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">1894 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1895                                                                                                          </span>
<span class="348957922752701667" onmouseenter="enter('348957922752701667');" onmouseout="out('348957922752701667');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1896             entityForm = reinitializeEntityForm(entityForm, collectionMetadata, entity,                  </span>
<span class="-6666340752275266103" onmouseenter="enter('-6666340752275266103');" onmouseout="out('-6666340752275266103');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1897                     subRecordsMap, sectionCrumbs);                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1898                                                                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">1899 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-3892497188964586657" onmouseenter="enter('-3892497188964586657');" onmouseout="out('-3892497188964586657');" style="">1900             entityForm.removeAction(DefaultEntityFormActions.DELETE);                                    </span>
<span class="6748640999540281749" onmouseenter="enter('6748640999540281749');" onmouseout="out('6748640999540281749');" style="">1901             entityForm.removeAction(DefaultEntityFormActions.DUPLICATE);                                 </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">1902 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1903                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">1904 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1905                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1905                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1906                     } else {                                                                             </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1907                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1907                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1908                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1909                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1910             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1911                                                                                                          </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1912             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);">1912             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndIdðŸ”µ</abbr></span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1913             formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1914                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">1915 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1916                                                                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">1917 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1918             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1919             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="2070483683171714322" onmouseenter="enter('2070483683171714322');" onmouseout="out('2070483683171714322');" style="">1920             model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleEditEntity&quot;);                                    </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1921         } else if (md instanceof AdornedTargetCollectionMetadata) {                                      </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1922             AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                  </span>
<span  style="">1923                                                                                                          </span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1924             if (entity == null) {                                                                        </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style=""><abbr title="1925                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,">1925                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperðŸ”µ</abbr></span>
<span class="-2961516840614790290" onmouseenter="enter('-2961516840614790290');" onmouseout="out('-2961516840614790290');" style="">1926                     collectionItemId, sectionCrumbs, alternateId).getDynamicResultSet().getRecords()[0]; </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1927             }                                                                                            </span>
<span  style="">1928                                                                                                          </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1929             boolean populateTypeAndId = true;                                                            </span>
<span class="921756716374353809" onmouseenter="enter('921756716374353809');" onmouseout="out('921756716374353809');" style=""><abbr title="1930             boolean isViewCollectionItem = ModalHeaderType.VIEW_COLLECTION_ITEM.getType().equals(modalHeaderType);">1930             boolean isViewCollectionItem = ModalHeaderType.VIEW_COLLECTION_ITEM.getType().equals(modalHeaðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1931             if (entityForm == null) {                                                                    </span>
<span class="-8902040329002931298" onmouseenter="enter('-8902040329002931298');" onmouseout="out('-8902040329002931298');" style=""><abbr title="1932                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, sectionCrumbs, false);">1932                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollecðŸ”µ</abbr></span>
<span class="-4655192855930300298" onmouseenter="enter('-4655192855930300298');" onmouseout="out('-4655192855930300298');" style="">1933                 entityForm.removeAction(DefaultAdornedEntityFormActions.Add);                            </span>
<span class="1109271490036416226" onmouseenter="enter('1109271490036416226');" onmouseout="out('1109271490036416226');" style="">1934                 entityForm.addAction(DefaultAdornedEntityFormActions.Save);                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1935             } else {                                                                                     </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1936                 entityForm.clearFieldsMap();                                                             </span>
<span class="2583214667713512490" onmouseenter="enter('2583214667713512490');" onmouseout="out('2583214667713512490');" style="">1937                 String entityType = entityForm.getEntityType();                                          </span>
<span class="-6584758178229470245" onmouseenter="enter('-6584758178229470245');" onmouseout="out('-6584758178229470245');" style=""><abbr title="1938                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entityForm, sectionCrumbs, false);">1938                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entðŸ”µ</abbr></span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style="">1939                 entityForm.setEntityType(entityType);                                                    </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1940                 populateTypeAndId = false;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1941             }                                                                                            </span>
<span  style="">1942                                                                                                          </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1943             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1944             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1944             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, maðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1945                     collectionField,                                                                     </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1946                     collectionItemId, responseMap);                                                      </span>
<span  style="">1947                                                                                                          </span>
<span class="-3972135447881278836" onmouseenter="enter('-3972135447881278836');" onmouseout="out('-3972135447881278836');" style=""><abbr title="1948             //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and Id is used.">1948             //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and ðŸ”µ</abbr></span>
<span class="-8007896595560301001" onmouseenter="enter('-8007896595560301001');" onmouseout="out('-8007896595560301001');" style=""><abbr title="1949             //It should be the entity and referenced Id of the adorned entity (not the target entity and Id).">1949             //It should be the entity and referenced Id of the adorned entity (not the target entity and ðŸ”µ</abbr></span>
<span class="316997016312344867" onmouseenter="enter('316997016312344867');" onmouseout="out('316997016312344867');" style="">1950             entityForm.setTranslationCeilingEntity(entityForm.getEntityType());                          </span>
<span class="-4512360180775881719" onmouseenter="enter('-4512360180775881719');" onmouseout="out('-4512360180775881719');" style="">1951             entityForm.setTranslationId(alternateId);                                                    </span>
<span  style="">1952                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style="">1953             ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();  </span>
<span class="-1465905251928147670" onmouseenter="enter('-1465905251928147670');" onmouseout="out('-1465905251928147670');" style="">1954             for (String field : fmd.getMaintainedAdornedTargetFields()) {                                </span>
<span class="-2821179418575098708" onmouseenter="enter('-2821179418575098708');" onmouseout="out('-2821179418575098708');" style="">1955                 if (responseMap.containsKey(field) &amp;&amp; responseMap.containsKey(&quot;autoSubmit&quot;)) {           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1956                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1957                 }                                                                                        </span>
<span class="-3390991397790942785" onmouseenter="enter('-3390991397790942785');" onmouseout="out('-3390991397790942785');" style="">1958                 Property p = cmd.getPMap().get(field);                                                   </span>
<span class="3110636146594998978" onmouseenter="enter('3110636146594998978');" onmouseout="out('3110636146594998978');" style="">1959                 if (p != null &amp;&amp; p.getMetadata() instanceof AdornedTargetCollectionMetadata) {           </span>
<span class="-1526293730221303684" onmouseenter="enter('-1526293730221303684');" onmouseout="out('-1526293730221303684');" style=""><abbr title="1960                     // Because we&#x27;re dealing with a nested adorned target collection, this particular request must act">1960                     // Because we&#x27;re dealing with a nested adorned target collection, this particular reqðŸ”µ</abbr></span>
<span class="5008429970050276114" onmouseenter="enter('5008429970050276114');" onmouseout="out('5008429970050276114');" style=""><abbr title="1961                     // directly on the first adorned target collection. Because of this, we need the actual id property">1961                     // directly on the first adorned target collection. Because of this, we need the actuðŸ”µ</abbr></span>
<span class="-7713892716328274330" onmouseenter="enter('-7713892716328274330');" onmouseout="out('-7713892716328274330');" style=""><abbr title="1962                     // from the entity that models the adorned target relationship, and not the id of the target object.">1962                     // from the entity that models the adorned target relationship, and not the id of theðŸ”µ</abbr></span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1963                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1963                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style=""><abbr title="1964                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,">1964                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, nuðŸ”µ</abbr></span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1965                             alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();        </span>
<span  style="">1966                                                                                                          </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1967                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1967                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(ðŸ”µ</abbr></span>
<span class="-6504403122086949696" onmouseenter="enter('-6504403122086949696');" onmouseout="out('-6504403122086949696');" style="">1968                             ppr.getAdornedList().getAdornedTargetEntityClassname(), sectionCrumbs);      </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1969                     listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                        </span>
<span  style="">1970                                                                                                          </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1971                     if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {       </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1972                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1972                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1973                     } else {                                                                             </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1974                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1974                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1975                     }                                                                                    </span>
<span class="2712626054905490038" onmouseenter="enter('2712626054905490038');" onmouseout="out('2712626054905490038');" style="">1976                 } else if (p != null &amp;&amp; p.getMetadata() instanceof MapMetadata) {                        </span>
<span class="-388196981394792667" onmouseenter="enter('-388196981394792667');" onmouseout="out('-388196981394792667');" style="">1977                     // See above comment for AdornedTargetCollectionMetadata                             </span>
<span class="-9194902891343883685" onmouseenter="enter('-9194902891343883685');" onmouseout="out('-9194902891343883685');" style="">1978                     MapMetadata mmd = (MapMetadata) p.getMetadata();                                     </span>
<span  style="">1979                                                                                                          </span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1980                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1980                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style=""><abbr title="1981                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,">1981                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, nuðŸ”µ</abbr></span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1982                             alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();        </span>
<span  style="">1983                                                                                                          </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1984                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1984                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(ðŸ”µ</abbr></span>
<span class="-6515044965274807025" onmouseenter="enter('-6515044965274807025');" onmouseout="out('-6515044965274807025');" style="">1985                             mmd.getTargetClass(), sectionCrumbs);                                        </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1986                     listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                        </span>
<span  style="">1987                                                                                                          </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1988                     if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {       </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1989                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1989                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1990                     } else {                                                                             </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1991                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1991                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1992                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1993                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1994             }                                                                                            </span>
<span  style="">1995                                                                                                          </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style=""><abbr title="1996             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);">1996             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndIdðŸ”µ</abbr></span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">1997             formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());       </span>
<span  style="">1998                                                                                                          </span>
<span class="7046829326366784672" onmouseenter="enter('7046829326366784672');" onmouseout="out('7046829326366784672');" style="">1999             boolean atLeastOneBasicField = false;                                                        </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">2000             for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                       </span>
<span class="-3942382004211496115" onmouseenter="enter('-3942382004211496115');" onmouseout="out('-3942382004211496115');" style=""><abbr title="2001                 if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName()) &amp;&amp; !responseMap.containsKey(&quot;autoSubmit&quot;)) {">2001                 if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName(ðŸ”µ</abbr></span>
<span class="3115307772764059490" onmouseenter="enter('3115307772764059490');" onmouseout="out('3115307772764059490');" style="">2002                     atLeastOneBasicField = true;                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">2003                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2004                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2005             }                                                                                            </span>
<span class="4813170790944841786" onmouseenter="enter('4813170790944841786');" onmouseout="out('4813170790944841786');" style="">2006             if (!atLeastOneBasicField) {                                                                 </span>
<span class="3364274495995556597" onmouseenter="enter('3364274495995556597');" onmouseout="out('3364274495995556597');" style="">2007                 entityForm.removeAction(DefaultEntityFormActions.SAVE);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2008             }                                                                                            </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">2009             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">2010             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="3009851293217081678" onmouseenter="enter('3009851293217081678');" onmouseout="out('3009851293217081678');" style="">2011             model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedEditEntity&quot;);                                   </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">2012         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">2013             MapMetadata fmd = (MapMetadata) md;                                                          </span>
<span  style="">2014                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="2015             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">2015             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">2016             if (entity == null) {                                                                        </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style=""><abbr title="2017                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,">2017                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperðŸ”µ</abbr></span>
<span class="-2813813427236819301" onmouseenter="enter('-2813813427236819301');" onmouseout="out('-2813813427236819301');" style="">2018                     collectionItemId, sectionCrumbs, null).getEntity();                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2019             }                                                                                            </span>
<span  style="">2020                                                                                                          </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">2021             boolean populateTypeAndId = true;                                                            </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">2022             if (entityForm == null) {                                                                    </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style=""><abbr title="2023                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);">2023                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id)ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2024             } else {                                                                                     </span>
<span class="-2965751497501930249" onmouseenter="enter('-2965751497501930249');" onmouseout="out('-2965751497501930249');" style="">2025                 //save off the prior key before clearing out the fields map as it will not appear        </span>
<span class="-4459883460939835415" onmouseenter="enter('-4459883460939835415');" onmouseout="out('-4459883460939835415');" style="">2026                 //back on the saved entity                                                               </span>
<span class="-8617997777962995342" onmouseenter="enter('-8617997777962995342');" onmouseout="out('-8617997777962995342');" style="">2027                 String priorKey = entityForm.findField(&quot;priorKey&quot;).getValue();                           </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">2028                 entityForm.clearFieldsMap();                                                             </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">2029                 formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);</span>
<span class="-5674534809018144237" onmouseenter="enter('-5674534809018144237');" onmouseout="out('-5674534809018144237');" style="">2030                 entityForm.findField(&quot;priorKey&quot;).setValue(priorKey);                                     </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">2031                 populateTypeAndId = false;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2032             }                                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2033             try {                                                                                        </span>
<span class="1682170733642187652" onmouseenter="enter('1682170733642187652');" onmouseout="out('1682170733642187652');" style="">2034                 if (StringUtils.isNotEmpty(fmd.getToOneTargetProperty())) {                              </span>
<span class="-5619455120098479761" onmouseenter="enter('-5619455120098479761');" onmouseout="out('-5619455120098479761');" style=""><abbr title="2035                     entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredField(fmd.getToOneTargetProperty()).getType().getName());">2035                     entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2036                 }                                                                                        </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">2037             } catch (Exception e) {                                                                      </span>
<span class="4149062910666573697" onmouseenter="enter('4149062910666573697');" onmouseout="out('4149062910666573697');" style="">2038                 LOG.error(e);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2039             }                                                                                            </span>
<span class="-1018820723400133408" onmouseenter="enter('-1018820723400133408');" onmouseout="out('-1018820723400133408');" style=""><abbr title="2040             String entityId = (fmd.getToOneTargetProperty().equals(&quot;&quot;) ? &quot;id&quot; : fmd.getToOneTargetProperty() + &quot;.id&quot;);">2040             String entityId = (fmd.getToOneTargetProperty().equals(&quot;&quot;) ? &quot;id&quot; : fmd.getToOneTargetPropertðŸ”µ</abbr></span>
<span class="423419420192712450" onmouseenter="enter('423419420192712450');" onmouseout="out('423419420192712450');" style="">2041             entityForm.setTranslationId(entity.getPMap().get(entityId).getValue());                      </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style=""><abbr title="2042             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);">2042             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndIdðŸ”µ</abbr></span>
<span class="-7934209705949108459" onmouseenter="enter('-7934209705949108459');" onmouseout="out('-7934209705949108459');" style="">2043             formService.populateMapEntityFormFields(entityForm, entity);                                 </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style=""><abbr title="2044             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);">2044             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndIdðŸ”µ</abbr></span>
<span class="-7934209705949108459" onmouseenter="enter('-7934209705949108459');" onmouseout="out('-7934209705949108459');" style="">2045             formService.populateMapEntityFormFields(entityForm, entity);                                 </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">2046             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">2047             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="5184741693677662709" onmouseenter="enter('5184741693677662709');" onmouseout="out('5184741693677662709');" style="">2048             model.addAttribute(&quot;viewType&quot;, &quot;modal/mapEditEntity&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2049         }                                                                                                </span>
<span  style="">2050                                                                                                          </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">2051         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="5715532112666019496" onmouseenter="enter('5715532112666019496');" onmouseout="out('5715532112666019496');" style="">2052         model.addAttribute(&quot;modalHeaderType&quot;, modalHeaderType);                                          </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">2053         model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">2054         setModelAttributes(model, sectionKey);                                                           </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="">2055         return MODAL_CONTAINER_VIEW;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2056     }                                                                                                    </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">2057 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">2058                                                                                                          </span>
<span class="-6629135688250429856" onmouseenter="enter('-6629135688250429856');" onmouseout="out('-6629135688250429856');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">2059     protected EntityForm reinitializeEntityForm(final EntityForm entityForm,                             </span>
<span class="2488527282562212871" onmouseenter="enter('2488527282562212871');" onmouseout="out('2488527282562212871');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">2060             final ClassMetadata collectionMetadata,                                                      </span>
<span class="6244041270191906475" onmouseenter="enter('6244041270191906475');" onmouseout="out('6244041270191906475');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">2061             final Entity entity,                                                                         </span>
<span class="4210642227221008869" onmouseenter="enter('4210642227221008869');" onmouseout="out('4210642227221008869');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">2062             final Map&lt;String, DynamicResultSet&gt; subRecordsMap,                                           </span>
<span class="7695373887778905827" onmouseenter="enter('7695373887778905827');" onmouseout="out('7695373887778905827');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">2063             final List&lt;SectionCrumb&gt; sectionCrumbs) throws ServiceException {                            </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">2064         if (entityForm == null) {                                                                        </span>
<span class="5007761642077021691" onmouseenter="enter('5007761642077021691');" onmouseout="out('5007761642077021691');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">2065             return formService                                                                           </span>
<span class="2427987523723463928" onmouseenter="enter('2427987523723463928');" onmouseout="out('2427987523723463928');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">2066                     .createEntityForm(collectionMetadata, entity, subRecordsMap, sectionCrumbs);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">2067         }                                                                                                </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">2068                                                                                                          </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">2069         entityForm.clearFieldsMap();                                                                     </span>
<span class="524385531586817703" onmouseenter="enter('524385531586817703');" onmouseout="out('524385531586817703');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">2070         formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm,            </span>
<span class="2971672777452209099" onmouseenter="enter('2971672777452209099');" onmouseout="out('2971672777452209099');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">2071                 sectionCrumbs);                                                                          </span>
<span class="5496760487980360743" onmouseenter="enter('5496760487980360743');" onmouseout="out('5496760487980360743');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">2072         //remove all the actions since we&#x27;re not trying to redisplay them on the form                    </span>
<span class="-6469844840195102556" onmouseenter="enter('-6469844840195102556');" onmouseout="out('-6469844840195102556');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">2073         entityForm.removeAllActions();                                                                   </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">2074                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">2075 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2076         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="2077         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">2077         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2078                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2079         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2080         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2081         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2082         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2083     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2084                                                                                                          </span>
<span class="-2715204734461845190" onmouseenter="enter('-2715204734461845190');" onmouseout="out('-2715204734461845190');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="2085     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMethod.POST)">2085     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMetðŸ”µ</abbr></span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2086     public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,    </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2087             HttpServletResponse response, Model model,                                                   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2088             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2089             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2090             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2091             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="6458961487045284345" onmouseenter="enter('6458961487045284345');" onmouseout="out('6458961487045284345');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2092             @RequestParam(value=&quot;newSequence&quot;) String newSequence) throws Exception {                    </span>
<span class="-6477101312884008952" onmouseenter="enter('-6477101312884008952');" onmouseout="out('-6477101312884008952');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="2093         return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collectionItemId, newSequence, null);">2093         return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2094     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2095                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2096     /**                                                                                                  </span>
<span class="-7447609122613552365" onmouseenter="enter('-7447609122613552365');" onmouseout="out('-7447609122613552365');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="2097      * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target collections">2097      * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target colðŸ”µ</abbr></span>
<span class="5163972519999742424" onmouseenter="enter('5163972519999742424');" onmouseout="out('5163972519999742424');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="2098      * where a sort field is specified -- any other invocation is incorrect and will result in an exception.">2098      * where a sort field is specified -- any other invocation is incorrect and will result in an exceptiðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2099      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2100      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2101      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2102      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">2103      * @param pathVars                                                                                   </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">2104 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">2105                                                                                                          </span>
<span class="-6629135688250429856" onmouseenter="enter('-6629135688250429856');" onmouseout="out('-6629135688250429856');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">2106     protected EntityForm reinitializeEntityForm(final EntityForm entityForm,                             </span>
<span class="2488527282562212871" onmouseenter="enter('2488527282562212871');" onmouseout="out('2488527282562212871');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">2107             final ClassMetadata collectionMetadata,                                                      </span>
<span class="6244041270191906475" onmouseenter="enter('6244041270191906475');" onmouseout="out('6244041270191906475');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">2108             final Entity entity,                                                                         </span>
<span class="4210642227221008869" onmouseenter="enter('4210642227221008869');" onmouseout="out('4210642227221008869');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">2109             final Map&lt;String, DynamicResultSet&gt; subRecordsMap,                                           </span>
<span class="7695373887778905827" onmouseenter="enter('7695373887778905827');" onmouseout="out('7695373887778905827');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">2110             final List&lt;SectionCrumb&gt; sectionCrumbs) throws ServiceException {                            </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">2111         if (entityForm == null) {                                                                        </span>
<span class="5007761642077021691" onmouseenter="enter('5007761642077021691');" onmouseout="out('5007761642077021691');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">2112             return formService                                                                           </span>
<span class="2427987523723463928" onmouseenter="enter('2427987523723463928');" onmouseout="out('2427987523723463928');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">2113                     .createEntityForm(collectionMetadata, entity, subRecordsMap, sectionCrumbs);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">2114         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">2115                                                                                                          </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">2116         entityForm.clearFieldsMap();                                                                     </span>
<span class="524385531586817703" onmouseenter="enter('524385531586817703');" onmouseout="out('524385531586817703');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">2117         formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm,            </span>
<span class="2971672777452209099" onmouseenter="enter('2971672777452209099');" onmouseout="out('2971672777452209099');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">2118                 sectionCrumbs);                                                                          </span>
<span class="5496760487980360743" onmouseenter="enter('5496760487980360743');" onmouseout="out('5496760487980360743');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">2119         //remove all the actions since we&#x27;re not trying to redisplay them on the form                    </span>
<span class="-6469844840195102556" onmouseenter="enter('-6469844840195102556');" onmouseout="out('-6469844840195102556');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">2120         entityForm.removeAllActions();                                                                   </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">2121                                                                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">2122 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="6548609876597156982" onmouseenter="enter('6548609876597156982');" onmouseout="out('6548609876597156982');" style="">2123         return entityForm;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2124     }                                                                                                    </span>
<span  style="">2125                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2126     /**                                                                                                  </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">2127      * Updates the specified collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2128      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">2129      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">2130      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">2131      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">2132      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">2133      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">2134      * @param collectionField                                                                            </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="2135      * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">2135      * @param collectionItemId the collection primary key value (in the case of adorned target collectionðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">2136      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">2137      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">2138      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">2139      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2140      */                                                                                                  </span>
<span class="1690395709289479208" onmouseenter="enter('1690395709289479208');" onmouseout="out('1690395709289479208');" style="">2141     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.POST)</span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style=""><abbr title="2142     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">2142     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">2143             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">2144             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">2145             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">2146             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">2147             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                   </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">2148             BindingResult result) throws Exception {                                                     </span>
<span class="454845068344591329" onmouseenter="enter('454845068344591329');" onmouseout="out('454845068344591329');" style=""><abbr title="2149         return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, entityForm, null, result);">2149         return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2150     }                                                                                                    </span>
<span  style="">2151                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2152     /**                                                                                                  </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">2153      * Updates the specified collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2154      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">2155      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">2156      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">2157      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">2158      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">2159      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">2160      * @param collectionField                                                                            </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="2161      * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">2161      * @param collectionItemId the collection primary key value (in the case of adorned target collectionðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">2162      * @param entityForm                                                                                 </span>
<span class="4031667150854181086" onmouseenter="enter('4031667150854181086');" onmouseout="out('4031667150854181086');" style=""><abbr title="2163      * @param alternateId in the case of adorned target collections, this is the primary key value of the collection member">2163      * @param alternateId in the case of adorned target collections, this is the primary key value of theðŸ”µ</abbr></span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">2164      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">2165      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">2166      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2167      */                                                                                                  </span>
<span class="6716233350399381715" onmouseenter="enter('6716233350399381715');" onmouseout="out('6716233350399381715');" style=""><abbr title="2168     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.POST)">2168     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequeðŸ”µ</abbr></span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style=""><abbr title="2169     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">2169     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">2170             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">2171             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">2172             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">2173             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">2174             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                   </span>
<span class="-5366992345424767315" onmouseenter="enter('-5366992345424767315');" onmouseout="out('-5366992345424767315');" style="">2175             @PathVariable(value=&quot;alternateId&quot;) String alternateId,                                       </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">2176             BindingResult result) throws Exception {                                                     </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">2177         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">2178         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">2179         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="2180         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">2180         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">2181         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">2182                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="2183         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">2183         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="2184         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">2184         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">2185         service.clearEntityManager();                                                                    </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">2186         // First, we must save the collection entity                                                     </span>
<span class="3262117580653454816" onmouseenter="enter('3262117580653454816');" onmouseout="out('3262117580653454816');" style=""><abbr title="2187         PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, collectionItemId, alternateId, sectionCrumbs);">2187         PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">2188         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">2189         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">2190                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">2191         if (result.hasErrors()) {                                                                        </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="2192             return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">2192             return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemðŸ”µ</abbr></span>
<span class="-1009973048758571460" onmouseenter="enter('-1009973048758571460');" onmouseout="out('-1009973048758571460');" style="">2193                     ModalHeaderType.UPDATE_COLLECTION_ITEM.getType(), entityForm, savedEntity);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2194         }                                                                                                </span>
<span  style="">2195                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">2196         // Next, we must get the new list grid that represents this collection                           </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">2197         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="2198         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">2198         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span  style="">2199                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">2200         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">2201         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">2202         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">2203         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2204     }                                                                                                    </span>
<span  style="">2205                                                                                                          </span>
<span class="-2715204734461845190" onmouseenter="enter('-2715204734461845190');" onmouseout="out('-2715204734461845190');" style=""><abbr title="2206     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMethod.POST)">2206     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMetðŸ”µ</abbr></span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">2207     public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,    </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">2208             HttpServletResponse response, Model model,                                                   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">2209             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">2210             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">2211             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">2212             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="6458961487045284345" onmouseenter="enter('6458961487045284345');" onmouseout="out('6458961487045284345');" style="">2213             @RequestParam(value=&quot;newSequence&quot;) String newSequence) throws Exception {                    </span>
<span class="-6477101312884008952" onmouseenter="enter('-6477101312884008952');" onmouseout="out('-6477101312884008952');" style=""><abbr title="2214         return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collectionItemId, newSequence, null);">2214         return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2215     }                                                                                                    </span>
<span  style="">2216                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2217     /**                                                                                                  </span>
<span class="-7447609122613552365" onmouseenter="enter('-7447609122613552365');" onmouseout="out('-7447609122613552365');" style=""><abbr title="2218      * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target collections">2218      * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target colðŸ”µ</abbr></span>
<span class="5163972519999742424" onmouseenter="enter('5163972519999742424');" onmouseout="out('5163972519999742424');" style=""><abbr title="2219      * where a sort field is specified -- any other invocation is incorrect and will result in an exception.">2219      * where a sort field is specified -- any other invocation is incorrect and will result in an exceptiðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2220      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">2221      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">2222      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">2223      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">2224      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">2225      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">2226      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">2227      * @param collectionItemId                                                                           </span>
<span class="8542418631474543845" onmouseenter="enter('8542418631474543845');" onmouseout="out('8542418631474543845');" style="">2228      * @return an object explaining the state of the operation                                           </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">2229      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2230      */                                                                                                  </span>
<span class="1279723180837283801" onmouseenter="enter('1279723180837283801');" onmouseout="out('1279723180837283801');" style=""><abbr title="2231     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, method = RequestMethod.POST)">2231     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, methoðŸ”µ</abbr></span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">2232     public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,    </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">2233             HttpServletResponse response, Model model,                                                   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">2234             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">2235             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">2236             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">2237             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="6744719432735700494" onmouseenter="enter('6744719432735700494');" onmouseout="out('6744719432735700494');" style="">2238             @RequestParam(value=&quot;newSequence&quot;) String newSequence,                                       </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">2239             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">2240         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">2241         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">2242         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="2243         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">2243         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">2244         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">2245         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style="">2246                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="2247         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">2247         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="6971869165316675737" onmouseenter="enter('6971869165316675737');" onmouseout="out('6971869165316675737');" style="">2248         ppr.addCustomCriteria(&quot;reorderParentEntityFetch&quot;);                                               </span>
<span  style="">2249                                                                                                          </span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="2250         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">2250         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getReðŸ”µ</abbr></span>
<span  style="">2251                                                                                                          </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">2252         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span  style="">2253                                                                                                          </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">2254         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">2255             AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                  </span>
<span class="-895931586936599512" onmouseenter="enter('-895931586936599512');" onmouseout="out('-895931586936599512');" style="">2256             AdornedTargetList atl = ppr.getAdornedList();                                                </span>
<span  style="">2257                                                                                                          </span>
<span class="4013888246220668443" onmouseenter="enter('4013888246220668443');" onmouseout="out('4013888246220668443');" style="">2258             // Get an entity form for the entity                                                         </span>
<span class="4144133685169635892" onmouseenter="enter('4144133685169635892');" onmouseout="out('4144133685169635892');" style=""><abbr title="2259             EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, false);">2259             EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, falseðŸ”µ</abbr></span>
<span class="985151044669117950" onmouseenter="enter('985151044669117950');" onmouseout="out('985151044669117950');" style=""><abbr title="2260             Entity entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,">2260             Entity entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProðŸ”µ</abbr></span>
<span class="-4422231398086337832" onmouseenter="enter('-4422231398086337832');" onmouseout="out('-4422231398086337832');" style=""><abbr title="2261                     collectionItemId, sectionCrumbs, alternateId, new String[]{&quot;reorderChildEntityFetch&quot;})">2261                     collectionItemId, sectionCrumbs, alternateId, new String[]{&quot;reorderChildEntityFetch&quot;}ðŸ”µ</abbr></span>
<span class="-7850695853310911802" onmouseenter="enter('-7850695853310911802');" onmouseout="out('-7850695853310911802');" style="">2262                     .getDynamicResultSet().getRecords()[0];                                              </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">2263             formService.populateEntityFormFields(entityForm, entity);                                    </span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">2264             formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());       </span>
<span  style="">2265                                                                                                          </span>
<span class="-3124065187694573478" onmouseenter="enter('-3124065187694573478');" onmouseout="out('-3124065187694573478');" style=""><abbr title="2266             // Set the new sequence (note that it will come in 0-indexed but the persistence module expects 1-indexed)">2266             // Set the new sequence (note that it will come in 0-indexed but the persistence module expecðŸ”µ</abbr></span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">2267             int sequenceValue = Integer.parseInt(newSequence) + 1;                                       </span>
<span class="2556919505341751863" onmouseenter="enter('2556919505341751863');" onmouseout="out('2556919505341751863');" style="">2268             Field field = entityForm.findField(atl.getSortField());                                      </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">2269             field.setValue(String.valueOf(sequenceValue));                                               </span>
<span  style="">2270                                                                                                          </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">2271             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="-5669538829732150992" onmouseenter="enter('-5669538829732150992');" onmouseout="out('-5669538829732150992');" style=""><abbr title="2272             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, alternateId, sectionCrumbs);">2272             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMðŸ”µ</abbr></span>
<span class="-6209319883391535282" onmouseenter="enter('-6209319883391535282');" onmouseout="out('-6209319883391535282');" style="">2273             Property displayOrder = persistenceResponse.getEntity().findProperty(atl.getSortField());    </span>
<span  style="">2274                                                                                                          </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">2275             responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                             </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">2276             responseMap.put(&quot;field&quot;, collectionField);                                                   </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">2277             responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());   </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">2278             return responseMap;                                                                          </span>
<span class="-3117865694677500361" onmouseenter="enter('-3117865694677500361');" onmouseout="out('-3117865694677500361');" style="">2279         } else if (md instanceof BasicCollectionMetadata) {                                              </span>
<span class="-8492572584837651214" onmouseenter="enter('-8492572584837651214');" onmouseout="out('-8492572584837651214');" style="">2280             BasicCollectionMetadata cd = (BasicCollectionMetadata) md;                                   </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">2281             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="-2546552603594507996" onmouseenter="enter('-2546552603594507996');" onmouseout="out('-2546552603594507996');" style=""><abbr title="2282             Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResultSet().getRecords()[0];">2282             Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResulðŸ”µ</abbr></span>
<span  style="">2283                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="2284             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">2284             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="-2818097934143266938" onmouseenter="enter('-2818097934143266938');" onmouseout="out('-2818097934143266938');" style="">2285             EntityForm entityForm = formService.createEntityForm(collectionMetadata, sectionCrumbs);     </span>
<span class="2758594966987635918" onmouseenter="enter('2758594966987635918');" onmouseout="out('2758594966987635918');" style=""><abbr title="2286             boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">2286             boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPðŸ”µ</abbr></span>
<span class="8701882977725374051" onmouseenter="enter('8701882977725374051');" onmouseout="out('8701882977725374051');" style="">2287             if(listGridReadOnly){                                                                        </span>
<span class="2312726484157116526" onmouseenter="enter('2312726484157116526');" onmouseout="out('2312726484157116526');" style="">2288                         throw new SecurityServiceException();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2289             }                                                                                            </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">2290             if (!StringUtils.isEmpty(cd.getSortProperty())) {                                            </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">2291                 Field f = new Field()                                                                    </span>
<span class="-2538063021289876061" onmouseenter="enter('-2538063021289876061');" onmouseout="out('-2538063021289876061');" style="">2292                         .withName(cd.getSortProperty())                                                  </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">2293                         .withFieldType(SupportedFieldType.HIDDEN.toString());                            </span>
<span class="5054103958554301667" onmouseenter="enter('5054103958554301667');" onmouseout="out('5054103958554301667');" style="">2294                 entityForm.addHiddenField(mainMetadata, f);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2295             }                                                                                            </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">2296             formService.populateEntityFormFields(entityForm, entity);                                    </span>
<span  style="">2297                                                                                                          </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">2298             if (!StringUtils.isEmpty(cd.getSortProperty())) {                                            </span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">2299                 int sequenceValue = Integer.parseInt(newSequence) + 1;                                   </span>
<span class="-3733495482183042291" onmouseenter="enter('-3733495482183042291');" onmouseout="out('-3733495482183042291');" style="">2300                 Field field = entityForm.findField(cd.getSortProperty());                                </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">2301                 field.setValue(String.valueOf(sequenceValue));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2302             }                                                                                            </span>
<span  style="">2303                                                                                                          </span>
<span class="3923458830762383909" onmouseenter="enter('3923458830762383909');" onmouseout="out('3923458830762383909');" style=""><abbr title="2304             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, sectionCrumbs);">2304             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMðŸ”µ</abbr></span>
<span class="-792608105002716351" onmouseenter="enter('-792608105002716351');" onmouseout="out('-792608105002716351');" style="">2305             Property displayOrder = persistenceResponse.getEntity().findProperty(cd.getSortProperty());  </span>
<span  style="">2306                                                                                                          </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">2307             responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                             </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">2308             responseMap.put(&quot;field&quot;, collectionField);                                                   </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">2309             responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());   </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">2310             return responseMap;                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2311         } else {                                                                                         </span>
<span class="7542199431919878786" onmouseenter="enter('7542199431919878786');" onmouseout="out('7542199431919878786');" style=""><abbr title="2312             throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collection fields.&quot;);">2312             throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2313         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2314     }                                                                                                    </span>
<span  style="">2315                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2316     /**                                                                                                  </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">2317      * Removes the requested collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2318      *                                                                                                   </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="2319      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">2319      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collectionðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">2320      * map collection.                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2321      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">2322      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">2323      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">2324      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">2325      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">2326      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">2327      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">2328      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">2329      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">2330      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2331      */                                                                                                  </span>
<span class="6340503715634976611" onmouseenter="enter('6340503715634976611');" onmouseout="out('6340503715634976611');" style=""><abbr title="2332     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/delete&quot;, method = RequestMethod.POST)">2332     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/delete&quot;, method = RequestMethoðŸ”µ</abbr></span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style=""><abbr title="2333     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">2333     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">2334             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">2335             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">2336             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">2337             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="6845453766150325497" onmouseenter="enter('6845453766150325497');" onmouseout="out('6845453766150325497');" style=""><abbr title="2338         return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, null);">2338         return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2339     }                                                                                                    </span>
<span  style="">2340                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2341     /**                                                                                                  </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">2342      * Removes the requested collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2343      *                                                                                                   </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="2344      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">2344      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collectionðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">2345      * map collection.                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2346      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">2347      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">2348      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">2349      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">2350      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">2351      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">2352      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">2353      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">2354      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">2355      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2356      */                                                                                                  </span>
<span class="-4053134536146029119" onmouseenter="enter('-4053134536146029119');" onmouseout="out('-4053134536146029119');" style=""><abbr title="2357     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method = RequestMethod.POST)">2357     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method ðŸ”µ</abbr></span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style=""><abbr title="2358     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">2358     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">2359             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">2360             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">2361             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">2362             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">2363             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">2364         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">2365         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">2366         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="2367         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">2367         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">2368         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">2369                                                                                                          </span>
<span class="-6408221600487262974" onmouseenter="enter('-6408221600487262974');" onmouseout="out('-6408221600487262974');" style="">2370         String priorKey = request.getParameter(&quot;key&quot;);                                                   </span>
<span  style="">2371                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="2372         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">2372         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">2373         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="2374         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">2374         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">2375         service.clearEntityManager();                                                                    </span>
<span class="8107528363762278945" onmouseenter="enter('8107528363762278945');" onmouseout="out('8107528363762278945');" style="">2376         // First, we must remove the collection entity                                                   </span>
<span class="-8185015406879465962" onmouseenter="enter('-8185015406879465962');" onmouseout="out('-8185015406879465962');" style=""><abbr title="2377         PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectionProperty, entity, collectionItemId, alternateId, priorKey, sectionCrumbs);">2377         PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectðŸ”µ</abbr></span>
<span class="4740780245520344929" onmouseenter="enter('4740780245520344929');" onmouseout="out('4740780245520344929');" style=""><abbr title="2378         if (persistenceResponse.getEntity() != null &amp;&amp; persistenceResponse.getEntity().isValidationFailure()) {">2378         if (persistenceResponse.getEntity() != null &amp;&amp; persistenceResponse.getEntity().isValidationFailurðŸ”µ</abbr></span>
<span class="-1907173364280213129" onmouseenter="enter('-1907173364280213129');" onmouseout="out('-1907173364280213129');" style="">2379             String error = &quot;There was an error removing the whatever&quot;;                                   </span>
<span class="6694909055776458558" onmouseenter="enter('6694909055776458558');" onmouseout="out('6694909055776458558');" style="">2380             if (MapUtils.isNotEmpty(persistenceResponse.getEntity().getPropertyValidationErrors())) {    </span>
<span class="2653002805011151778" onmouseenter="enter('2653002805011151778');" onmouseout="out('2653002805011151778');" style="">2381                 // If we failed, we&#x27;ll return some JSON with the first error                             </span>
<span class="6101527636004026445" onmouseenter="enter('6101527636004026445');" onmouseout="out('6101527636004026445');" style=""><abbr title="2382                 error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator().next().get(0);">2382                 error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator()ðŸ”µ</abbr></span>
<span class="3589903040125146199" onmouseenter="enter('3589903040125146199');" onmouseout="out('3589903040125146199');" style=""><abbr title="2383             } else if (CollectionUtils.isNotEmpty(persistenceResponse.getEntity().getGlobalValidationErrors())) {">2383             } else if (CollectionUtils.isNotEmpty(persistenceResponse.getEntity().getGlobalValidationErroðŸ”µ</abbr></span>
<span class="-8002349788440125315" onmouseenter="enter('-8002349788440125315');" onmouseout="out('-8002349788440125315');" style="">2384                 error = persistenceResponse.getEntity().getGlobalValidationErrors().get(0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2385             }                                                                                            </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">2386             return new JsonResponse(response)                                                            </span>
<span class="4764127484129551096" onmouseenter="enter('4764127484129551096');" onmouseout="out('4764127484129551096');" style="">2387                 .with(&quot;status&quot;, &quot;error&quot;)                                                                 </span>
<span class="-4778619806303294332" onmouseenter="enter('-4778619806303294332');" onmouseout="out('-4778619806303294332');" style="">2388                 .with(&quot;message&quot;, BLCMessageUtils.getMessage(error))                                      </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">2389                 .done();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2390         }                                                                                                </span>
<span  style="">2391                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">2392         // Next, we must get the new list grid that represents this collection                           </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">2393         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="2394         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">2394         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span  style="">2395                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">2396         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">2397         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">2398         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">2399         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2400     }                                                                                                    </span>
<span  style="">2401                                                                                                          </span>
<span class="-1722269672251008380" onmouseenter="enter('-1722269672251008380');" onmouseout="out('-1722269672251008380');" style="">2402     public void addAuditableDisplayFields(EntityForm entityForm) {                                       </span>
<span class="2220665039639111541" onmouseenter="enter('2220665039639111541');" onmouseout="out('2220665039639111541');" style="">2403         Field createdBy = entityForm.findField(&quot;auditable.createdBy&quot;);                                   </span>
<span class="-1310269621989930827" onmouseenter="enter('-1310269621989930827');" onmouseout="out('-1310269621989930827');" style="">2404         if (createdBy != null &amp;&amp; createdBy.getValue() != null) {                                         </span>
<span class="3065344382927201496" onmouseenter="enter('3065344382927201496');" onmouseout="out('3065344382927201496');" style="">2405             addAuditableDisplayField(entityForm, createdBy);                                             </span>
<span  style="">2406                                                                                                          </span>
<span class="-8232178899610643805" onmouseenter="enter('-8232178899610643805');" onmouseout="out('-8232178899610643805');" style="">2407             createdBy.setIsVisible(false);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2408         }                                                                                                </span>
<span class="1393544913931451876" onmouseenter="enter('1393544913931451876');" onmouseout="out('1393544913931451876');" style="">2409         Field updatedBy = entityForm.findField(&quot;auditable.updatedBy&quot;);                                   </span>
<span class="362865388069983596" onmouseenter="enter('362865388069983596');" onmouseout="out('362865388069983596');" style="">2410         if (updatedBy != null &amp;&amp; updatedBy.getValue() != null) {                                         </span>
<span class="-892302887107162271" onmouseenter="enter('-892302887107162271');" onmouseout="out('-892302887107162271');" style="">2411             addAuditableDisplayField(entityForm, updatedBy);                                             </span>
<span  style="">2412                                                                                                          </span>
<span class="6398063041947851488" onmouseenter="enter('6398063041947851488');" onmouseout="out('6398063041947851488');" style="">2413             updatedBy.setIsVisible(false);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2414         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2415     }                                                                                                    </span>
<span  style="">2416                                                                                                          </span>
<span class="4984267825623541739" onmouseenter="enter('4984267825623541739');" onmouseout="out('4984267825623541739');" style="">2417     private void addAuditableDisplayField(EntityForm entityForm, Field userField) {                      </span>
<span class="-4635466229336929139" onmouseenter="enter('-4635466229336929139');" onmouseout="out('-4635466229336929139');" style="">2418         Field displayField = buildAuditableDisplayField(userField);                                      </span>
<span  style="">2419                                                                                                          </span>
<span class="-3510960703864117903" onmouseenter="enter('-3510960703864117903');" onmouseout="out('-3510960703864117903');" style="">2420         AdminUser user = adminUserDao.readAdminUserById(Long.parseLong(userField.getValue()));           </span>
<span class="-2749914300638269457" onmouseenter="enter('-2749914300638269457');" onmouseout="out('-2749914300638269457');" style="">2421         String userName = user == null ? null : user.getName();                                          </span>
<span class="-519467923242361473" onmouseenter="enter('-519467923242361473');" onmouseout="out('-519467923242361473');" style="">2422         displayField.setValue(userName);                                                                 </span>
<span  style="">2423                                                                                                          </span>
<span class="2796866146572271884" onmouseenter="enter('2796866146572271884');" onmouseout="out('2796866146572271884');" style="">2424         FieldGroup auditGroup = entityForm.findGroup(&quot;AdminAuditable_Audit&quot;);                            </span>
<span class="442119087406556402" onmouseenter="enter('442119087406556402');" onmouseout="out('442119087406556402');" style="">2425         if (auditGroup != null) {                                                                        </span>
<span class="2790071812155889083" onmouseenter="enter('2790071812155889083');" onmouseout="out('2790071812155889083');" style="">2426             auditGroup.addField(displayField);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2427         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2428     }                                                                                                    </span>
<span  style="">2429                                                                                                          </span>
<span class="-898012728924165157" onmouseenter="enter('-898012728924165157');" onmouseout="out('-898012728924165157');" style="">2430     private Field buildAuditableDisplayField(Field auditableField) {                                     </span>
<span class="7586031541837577475" onmouseenter="enter('7586031541837577475');" onmouseout="out('7586031541837577475');" style="">2431         return new Field().withFieldType(SupportedFieldType.STRING.toString())                           </span>
<span class="-5983163062967947616" onmouseenter="enter('-5983163062967947616');" onmouseout="out('-5983163062967947616');" style="">2432                 .withName(auditableField.getName() + &quot;Display&quot;)                                          </span>
<span class="-3810520855500417343" onmouseenter="enter('-3810520855500417343');" onmouseout="out('-3810520855500417343');" style="">2433                 .withFriendlyName(auditableField.getFriendlyName())                                      </span>
<span class="-2087540063707551713" onmouseenter="enter('-2087540063707551713');" onmouseout="out('-2087540063707551713');" style="">2434                 .withOrder(auditableField.getOrder())                                                    </span>
<span class="3252055162848788175" onmouseenter="enter('3252055162848788175');" onmouseout="out('3252055162848788175');" style="">2435                 .withOwningEntityClass(auditableField.getOwningEntityClass())                            </span>
<span class="8052491048417023702" onmouseenter="enter('8052491048417023702');" onmouseout="out('8052491048417023702');" style="">2436                 .withReadOnly(true);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2437     }                                                                                                    </span>
<span  style="">2438                                                                                                          </span>
<span class="2512746595428590302" onmouseenter="enter('2512746595428590302');" onmouseout="out('2512746595428590302');" style="">2439     protected String getCurrentTabName(Map&lt;String, String&gt; pathVars, ClassMetadata cmd) {                </span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style="">2440         String tabName = pathVars.get(&quot;tabName&quot;);                                                        </span>
<span class="620358619967646231" onmouseenter="enter('620358619967646231');" onmouseout="out('620358619967646231');" style="">2441         if (StringUtils.isBlank(tabName)) {                                                              </span>
<span class="-8386812650765964886" onmouseenter="enter('-8386812650765964886');" onmouseout="out('-8386812650765964886');" style="">2442             TabMetadata firstTab = cmd.getFirstTab();                                                    </span>
<span class="5997097813726693180" onmouseenter="enter('5997097813726693180');" onmouseout="out('5997097813726693180');" style="">2443             return firstTab != null ? firstTab.getTabName() : &quot;General&quot;;                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2444         }                                                                                                </span>
<span class="-6789109484485831180" onmouseenter="enter('-6789109484485831180');" onmouseout="out('-6789109484485831180');" style="">2445         return tabName;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2446     }                                                                                                    </span>
<span  style="">2447                                                                                                          </span>
<span class="3143437458878702073" onmouseenter="enter('3143437458878702073');" onmouseout="out('3143437458878702073');" style="">2448     protected String getCurrentFolderId(HttpServletRequest request) {                                    </span>
<span class="1754053964111348985" onmouseenter="enter('1754053964111348985');" onmouseout="out('1754053964111348985');" style="">2449         if (request.getParameterMap().containsKey(CURRENT_FOLDER_ID)) {                                  </span>
<span class="6180766430585782289" onmouseenter="enter('6180766430585782289');" onmouseout="out('6180766430585782289');" style="">2450             return request.getParameter(CURRENT_FOLDER_ID);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2451         }                                                                                                </span>
<span class="-7128073668423816870" onmouseenter="enter('-7128073668423816870');" onmouseout="out('-7128073668423816870');" style="">2452         return &quot;unassigned&quot;;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2453     }                                                                                                    </span>
<span  style="">2454                                                                                                          </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">2455     // *****************************************                                                         </span>
<span class="2492884656402841956" onmouseenter="enter('2492884656402841956');" onmouseout="out('2492884656402841956');" style="">2456     // Typed Entity Helper Methods                                                                       </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">2457     // *****************************************                                                         </span>
<span  style="">2458                                                                                                          </span>
<span class="709722161552159597" onmouseenter="enter('709722161552159597');" onmouseout="out('709722161552159597');" style="">2459     protected void setTypedEntityModelAttributes(HttpServletRequest request, Model model) {              </span>
<span class="2572860224956804545" onmouseenter="enter('2572860224956804545');" onmouseout="out('2572860224956804545');" style="">2460         // Check if this is a typed entity                                                               </span>
<span class="-601784761218487618" onmouseenter="enter('-601784761218487618');" onmouseout="out('-601784761218487618');" style="">2461         AdminSection typedEntitySection = (AdminSection) request.getAttribute(&quot;typedEntitySection&quot;);     </span>
<span class="2356861889771822774" onmouseenter="enter('2356861889771822774');" onmouseout="out('2356861889771822774');" style="">2462         if (typedEntitySection != null) {                                                                </span>
<span class="-7054855399164801351" onmouseenter="enter('-7054855399164801351');" onmouseout="out('-7054855399164801351');" style="">2463             // Update the friendly name for this Entity Type                                             </span>
<span class="-8436584596314077038" onmouseenter="enter('-8436584596314077038');" onmouseout="out('-8436584596314077038');" style="">2464             model.addAttribute(&quot;entityFriendlyName&quot;, typedEntitySection.getName());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2465         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2466     }                                                                                                    </span>
<span  style="">2467                                                                                                          </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">2468     // *********************************                                                                 </span>
<span class="5570644305110686760" onmouseenter="enter('5570644305110686760');" onmouseout="out('5570644305110686760');" style="">2469     // ADDITIONAL SPRING-BOUND METHODS *                                                                 </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">2470     // *********************************                                                                 </span>
<span  style="">2471                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2472     /**                                                                                                  </span>
<span class="-6771709729688841784" onmouseenter="enter('-6771709729688841784');" onmouseout="out('-6771709729688841784');" style=""><abbr title="2473      * Invoked on every request to provide the ability to register specific binders for Spring&#x27;s binding process.">2473      * Invoked on every request to provide the ability to register specific binders for Spring&#x27;s binding ðŸ”µ</abbr></span>
<span class="2498077318751920180" onmouseenter="enter('2498077318751920180');" onmouseout="out('2498077318751920180');" style=""><abbr title="2474      * By default, we register a binder that treats empty Strings as null and a Boolean editor that supports either true">2474      * By default, we register a binder that treats empty Strings as null and a Boolean editor that suppoðŸ”µ</abbr></span>
<span class="4465303089468973962" onmouseenter="enter('4465303089468973962');" onmouseout="out('4465303089468973962');" style="">2475      * or false. If the value is passed in as null, it will treat it as false.                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2476      *                                                                                                   </span>
<span class="-3898462538136412996" onmouseenter="enter('-3898462538136412996');" onmouseout="out('-3898462538136412996');" style="">2477      * @param binder                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2478      */                                                                                                  </span>
<span class="2978104519843175555" onmouseenter="enter('2978104519843175555');" onmouseout="out('2978104519843175555');" style="">2479     @InitBinder                                                                                          </span>
<span class="4179572271848089300" onmouseenter="enter('4179572271848089300');" onmouseout="out('4179572271848089300');" style="">2480     public void initBinder(WebDataBinder binder) {                                                       </span>
<span class="3888201586857511470" onmouseenter="enter('3888201586857511470');" onmouseout="out('3888201586857511470');" style="">2481         binder.registerCustomEditor(String.class, new StringTrimmerEditor(true));                        </span>
<span class="-4458929942740752488" onmouseenter="enter('-4458929942740752488');" onmouseout="out('-4458929942740752488');" style="">2482         binder.registerCustomEditor(Boolean.class, new NonNullBooleanEditor());                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2483     }                                                                                                    </span>
<span  style="">2484                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2485 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="913821711322743166" onmouseenter="enter('913821711322743166');" onmouseout="out('913821711322743166');" style="">  18 package org.broadleafcommerce.openadmin.web.controller.entity;                                           </span>
<span  style="">  19                                                                                                          </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  20 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="4020017653195254006" onmouseenter="enter('4020017653195254006');" onmouseout="out('4020017653195254006');" style="">  21 import org.apache.commons.collections.MapUtils;                                                          </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  22 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  23 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  24 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  25 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  26 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  27 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  28 import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                 </span>
<span class="-3349026188166660873" onmouseenter="enter('-3349026188166660873');" onmouseout="out('-3349026188166660873');" style="">  29 import org.broadleafcommerce.common.persistence.EntityDuplicator;                                        </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  30 import org.broadleafcommerce.common.presentation.client.AddMethodType;                                   </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  31 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  32 import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                               </span>
<span class="-1492144387614747576" onmouseenter="enter('-1492144387614747576');" onmouseout="out('-1492144387614747576');" style="">  33 import org.broadleafcommerce.common.service.GenericEntityService;                                        </span>
<span class="2429458746821399950" onmouseenter="enter('2429458746821399950');" onmouseout="out('2429458746821399950');" style="">  34 import org.broadleafcommerce.common.util.BLCArrayUtils;                                                  </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  35 import org.broadleafcommerce.common.util.BLCMessageUtils;                                                </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  36 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-1418036767363331062" onmouseenter="enter('-1418036767363331062');" onmouseout="out('-1418036767363331062');" style="">  37 import org.broadleafcommerce.common.web.JsonResponse;                                                    </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  38 import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                              </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  39 import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                            </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  40 import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                      </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  41 import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                           </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  42 import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  43 import org.broadleafcommerce.openadmin.dto.ClassTree;                                                    </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  44 import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                           </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  45 import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                             </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  46 import org.broadleafcommerce.openadmin.dto.Entity;                                                       </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  47 import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                </span>
<span class="6369021917986026789" onmouseenter="enter('6369021917986026789');" onmouseout="out('6369021917986026789');" style="">  48 import org.broadleafcommerce.openadmin.dto.FilterAndSortCriteria;                                        </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  49 import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                  </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  50 import org.broadleafcommerce.openadmin.dto.Property;                                                     </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  51 import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                 </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  52 import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                  </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="">  53 import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                      </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  54 import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                          </span>
<span class="2120683388748052627" onmouseenter="enter('2120683388748052627');" onmouseout="out('2120683388748052627');" style="">  55 import org.broadleafcommerce.openadmin.server.security.dao.AdminUserDao;                                 </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  56 import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                              </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  57 import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                 </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  58 import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                       </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  59 import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                  </span>
<span class="-8603256547657551769" onmouseenter="enter('-8603256547657551769');" onmouseout="out('-8603256547657551769');" style="">  60 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceResponse;                   </span>
<span class="5585583973934060515" onmouseenter="enter('5585583973934060515');" onmouseout="out('5585583973934060515');" style=""><abbr title="  61 import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExtensionManager;">  61 import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExteðŸ”µ</abbr></span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  62 import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;         </span>
<span class="9131075895472939574" onmouseenter="enter('9131075895472939574');" onmouseout="out('9131075895472939574');" style="">  63 import org.broadleafcommerce.openadmin.web.controller.AdminAbstractController;                           </span>
<span class="7254479112554025637" onmouseenter="enter('7254479112554025637');" onmouseout="out('7254479112554025637');" style="">  64 import org.broadleafcommerce.openadmin.web.controller.modal.ModalHeaderType;                             </span>
<span class="6361429912012715647" onmouseenter="enter('6361429912012715647');" onmouseout="out('6361429912012715647');" style="">  65 import org.broadleafcommerce.openadmin.web.dao.MultipleCatalogExtensionManager;                          </span>
<span class="4507704609742395614" onmouseenter="enter('4507704609742395614');" onmouseout="out('4507704609742395614');" style="">  66 import org.broadleafcommerce.openadmin.web.editor.NonNullBooleanEditor;                                  </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  67 import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                        </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  68 import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                      </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  69 import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                  </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  70 import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                         </span>
<span class="-3560862041655103076" onmouseenter="enter('-3560862041655103076');" onmouseout="out('-3560862041655103076');" style="">  71 import org.broadleafcommerce.openadmin.web.form.entity.DefaultMainActions;                               </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  72 import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                       </span>
<span class="-3164920911156953697" onmouseenter="enter('-3164920911156953697');" onmouseout="out('-3164920911156953697');" style="">  73 import org.broadleafcommerce.openadmin.web.form.entity.EntityFormAction;                                 </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  74 import org.broadleafcommerce.openadmin.web.form.entity.Field;                                            </span>
<span class="-5634654756625156689" onmouseenter="enter('-5634654756625156689');" onmouseout="out('-5634654756625156689');" style="">  75 import org.broadleafcommerce.openadmin.web.form.entity.FieldGroup;                                       </span>
<span class="8763280003660953520" onmouseenter="enter('8763280003660953520');" onmouseout="out('8763280003660953520');" style="">  76 import org.springframework.beans.propertyeditors.StringTrimmerEditor;                                    </span>
<span class="4128309806836178094" onmouseenter="enter('4128309806836178094');" onmouseout="out('4128309806836178094');" style="">  77 import org.springframework.stereotype.Controller;                                                        </span>
<span class="2230089600625206822" onmouseenter="enter('2230089600625206822');" onmouseout="out('2230089600625206822');" style="">  78 import org.springframework.ui.Model;                                                                     </span>
<span class="-8661390401087732702" onmouseenter="enter('-8661390401087732702');" onmouseout="out('-8661390401087732702');" style="">  79 import org.springframework.util.MultiValueMap;                                                           </span>
<span class="-5446610002806720528" onmouseenter="enter('-5446610002806720528');" onmouseout="out('-5446610002806720528');" style="">  80 import org.springframework.validation.BindingResult;                                                     </span>
<span class="-5956639343389312225" onmouseenter="enter('-5956639343389312225');" onmouseout="out('-5956639343389312225');" style="">  81 import org.springframework.web.bind.WebDataBinder;                                                       </span>
<span class="6486986322776186621" onmouseenter="enter('6486986322776186621');" onmouseout="out('6486986322776186621');" style="">  82 import org.springframework.web.bind.annotation.InitBinder;                                               </span>
<span class="2718246165073723950" onmouseenter="enter('2718246165073723950');" onmouseout="out('2718246165073723950');" style="">  83 import org.springframework.web.bind.annotation.ModelAttribute;                                           </span>
<span class="3963501418927616634" onmouseenter="enter('3963501418927616634');" onmouseout="out('3963501418927616634');" style="">  84 import org.springframework.web.bind.annotation.PathVariable;                                             </span>
<span class="-7989471178862524182" onmouseenter="enter('-7989471178862524182');" onmouseout="out('-7989471178862524182');" style="">  85 import org.springframework.web.bind.annotation.RequestMapping;                                           </span>
<span class="4584846860636268493" onmouseenter="enter('4584846860636268493');" onmouseout="out('4584846860636268493');" style="">  86 import org.springframework.web.bind.annotation.RequestMethod;                                            </span>
<span class="-8913037601281016619" onmouseenter="enter('-8913037601281016619');" onmouseout="out('-8913037601281016619');" style="">  87 import org.springframework.web.bind.annotation.RequestParam;                                             </span>
<span class="-7662224364501075428" onmouseenter="enter('-7662224364501075428');" onmouseout="out('-7662224364501075428');" style="">  88 import org.springframework.web.bind.annotation.ResponseBody;                                             </span>
<span class="82864906475118767" onmouseenter="enter('82864906475118767');" onmouseout="out('82864906475118767');" style="">  89 import org.springframework.web.servlet.DispatcherServlet;                                                </span>
<span class="4665273347041581179" onmouseenter="enter('4665273347041581179');" onmouseout="out('4665273347041581179');" style="">  90 import org.springframework.web.servlet.FlashMap;                                                         </span>
<span class="4289605998216587359" onmouseenter="enter('4289605998216587359');" onmouseout="out('4289605998216587359');" style="">  91 import org.springframework.web.servlet.mvc.support.RedirectAttributes;                                   </span>
<span class="2383374134797300138" onmouseenter="enter('2383374134797300138');" onmouseout="out('2383374134797300138');" style="">  92 import org.springframework.web.util.UrlPathHelper;                                                       </span>
<span  style="">  93                                                                                                          </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style="">  94 import com.fasterxml.jackson.databind.ObjectMapper;                                                      </span>
<span  style="">  95                                                                                                          </span>
<span class="5998602906817463685" onmouseenter="enter('5998602906817463685');" onmouseout="out('5998602906817463685');" style="">  96 import java.io.Serializable;                                                                             </span>
<span class="8256805395213692609" onmouseenter="enter('8256805395213692609');" onmouseout="out('8256805395213692609');" style="">  97 import java.io.UnsupportedEncodingException;                                                             </span>
<span class="600097467176667378" onmouseenter="enter('600097467176667378');" onmouseout="out('600097467176667378');" style="">  98 import java.net.URLDecoder;                                                                              </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  99 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style=""> 100 import java.util.Arrays;                                                                                 </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style=""> 101 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style=""> 102 import java.util.List;                                                                                   </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style=""> 103 import java.util.Map;                                                                                    </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style=""> 104 import java.util.Map.Entry;                                                                              </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style=""> 105 import java.util.Set;                                                                                    </span>
<span class="5924803009700709999" onmouseenter="enter('5924803009700709999');" onmouseout="out('5924803009700709999');" style=""> 106 import java.util.stream.Stream;                                                                          </span>
<span  style=""> 107                                                                                                          </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 108 import javax.annotation.Resource;                                                                        </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style=""> 109 import javax.servlet.http.HttpServletRequest;                                                            </span>
<span class="-2247759832438184775" onmouseenter="enter('-2247759832438184775');" onmouseout="out('-2247759832438184775');" style=""> 110 import javax.servlet.http.HttpServletResponse;                                                           </span>
<span  style=""> 111                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 112 /**                                                                                                      </span>
<span class="5624503434864804252" onmouseenter="enter('5624503434864804252');" onmouseout="out('5624503434864804252');" style=""> 113  * The default implementation of the {@link AdminAbstractController}. This delegates every call to       </span>
<span class="-497882971048272294" onmouseenter="enter('-497882971048272294');" onmouseout="out('-497882971048272294');" style=""> 114  * super and does not provide any custom-tailored functionality. It is responsible for rendering the     </span>
<span class="-4790859535261881332" onmouseenter="enter('-4790859535261881332');" onmouseout="out('-4790859535261881332');" style=""> 115  * admin for every entity that is not explicitly customized by its own controller.                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 116  *                                                                                                       </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 117  * @author Andre Azzolini (apazzolini)                                                                   </span>
<span class="-7311139588847938491" onmouseenter="enter('-7311139588847938491');" onmouseout="out('-7311139588847938491');" style=""> 118  * @author Jeff Fischer                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 119  */                                                                                                      </span>
<span class="4155455059275642147" onmouseenter="enter('4155455059275642147');" onmouseout="out('4155455059275642147');" style=""> 120 @Controller(&quot;blAdminBasicEntityController&quot;)                                                              </span>
<span class="1298802560762502343" onmouseenter="enter('1298802560762502343');" onmouseout="out('1298802560762502343');" style=""> 121 @RequestMapping(&quot;/{sectionKey:.+}&quot;)                                                                      </span>
<span class="8857493697785984988" onmouseenter="enter('8857493697785984988');" onmouseout="out('8857493697785984988');" style=""> 122 public class AdminBasicEntityController extends AdminAbstractController {                                </span>
<span  style=""> 123                                                                                                          </span>
<span class="6387945601766467724" onmouseenter="enter('6387945601766467724');" onmouseout="out('6387945601766467724');" style=""> 124     protected static final Log LOG = LogFactory.getLog(AdminBasicEntityController.class);                </span>
<span  style=""> 125                                                                                                          </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 126     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span class="4075481265342786632" onmouseenter="enter('4075481265342786632');" onmouseout="out('4075481265342786632');" style=""> 127     public static final String CUSTOM_CRITERIA = &quot;criteria&quot;;                                             </span>
<span class="-5370879055704196240" onmouseenter="enter('-5370879055704196240');" onmouseout="out('-5370879055704196240');" style=""> 128     public static final String IS_SELECTIZE_REQUEST = &quot;isSelectizeRequest&quot;;                              </span>
<span class="1005517399019449970" onmouseenter="enter('1005517399019449970');" onmouseout="out('1005517399019449970');" style=""> 129     protected static final String CURRENT_FOLDER_ID = &quot;currentFolderId&quot;;                                 </span>
<span  style=""> 130                                                                                                          </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style=""> 131     @Resource(name=&quot;blSandBoxHelper&quot;)                                                                    </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style=""> 132     protected SandBoxHelper sandBoxHelper;                                                               </span>
<span  style=""> 133                                                                                                          </span>
<span class="-5193304577016957246" onmouseenter="enter('-5193304577016957246');" onmouseout="out('-5193304577016957246');" style=""> 134     @Resource(name = &quot;blAdminUserDao&quot;)                                                                   </span>
<span class="-2542536430165066610" onmouseenter="enter('-2542536430165066610');" onmouseout="out('-2542536430165066610');" style=""> 135     protected AdminUserDao adminUserDao;                                                                 </span>
<span  style=""> 136                                                                                                          </span>
<span class="1039661802170570045" onmouseenter="enter('1039661802170570045');" onmouseout="out('1039661802170570045');" style=""> 137     @Resource(name=&quot;blDynamicEntityDao&quot;)                                                                 </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style=""> 138     protected DynamicEntityDao dynamicEntityDao;                                                         </span>
<span  style=""> 139                                                                                                          </span>
<span class="3323977399618509653" onmouseenter="enter('3323977399618509653');" onmouseout="out('3323977399618509653');" style=""> 140     @Resource(name = &quot;blAdornedTargetAutoPopulateExtensionManager&quot;)                                      </span>
<span class="-4810148452666974339" onmouseenter="enter('-4810148452666974339');" onmouseout="out('-4810148452666974339');" style=""> 141     protected AdornedTargetAutoPopulateExtensionManager adornedTargetAutoPopulateExtensionManager;       </span>
<span  style=""> 142                                                                                                          </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 143     @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                        </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 144     protected RowLevelSecurityService rowLevelSecurityService;                                           </span>
<span  style=""> 145                                                                                                          </span>
<span class="4471392044492296285" onmouseenter="enter('4471392044492296285');" onmouseout="out('4471392044492296285');" style=""> 146     @Resource(name = &quot;blEntityDuplicator&quot;)                                                               </span>
<span class="-9194612273021432316" onmouseenter="enter('-9194612273021432316');" onmouseout="out('-9194612273021432316');" style=""> 147     protected EntityDuplicator duplicator;                                                               </span>
<span  style=""> 148                                                                                                          </span>
<span class="2258512980686044159" onmouseenter="enter('2258512980686044159');" onmouseout="out('2258512980686044159');" style=""> 149     @Resource(name = &quot;blGenericEntityService&quot;)                                                           </span>
<span class="7024198528514174971" onmouseenter="enter('7024198528514174971');" onmouseout="out('7024198528514174971');" style=""> 150     protected GenericEntityService genericEntityService;                                                 </span>
<span  style=""> 151                                                                                                          </span>
<span class="1447930800600022993" onmouseenter="enter('1447930800600022993');" onmouseout="out('1447930800600022993');" style=""> 152     @Resource(name = &quot;blMultipleCatalogExtensionManager&quot;)                                                </span>
<span class="4452235211304762832" onmouseenter="enter('4452235211304762832');" onmouseout="out('4452235211304762832');" style=""> 153     protected MultipleCatalogExtensionManager multipleCatalogExtensionManager;                           </span>
<span  style=""> 154                                                                                                          </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 155     // ******************************************                                                        </span>
<span class="8145904524131922989" onmouseenter="enter('8145904524131922989');" onmouseout="out('8145904524131922989');" style=""> 156     // REQUEST-MAPPING BOUND CONTROLLER METHODS *                                                        </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 157     // ******************************************                                                        </span>
<span  style=""> 158                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 159     /**                                                                                                  </span>
<span class="5980196098348408716" onmouseenter="enter('5980196098348408716');" onmouseout="out('5980196098348408716');" style=""><abbr title=" 160      * Renders the main entity listing for the specified class, which is based on the current sectionKey with some optional"> 160      * Renders the main entity listing for the specified class, which is based on the current sectionKey ðŸ”µ</abbr></span>
<span class="1756838433111210325" onmouseenter="enter('1756838433111210325');" onmouseout="out('1756838433111210325');" style=""> 161      * criteria.                                                                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 162      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 163      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 164      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 165      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 166      * @param pathVars                                                                                   </span>
<span class="-7836494531350161829" onmouseenter="enter('-7836494531350161829');" onmouseout="out('-7836494531350161829');" style=""> 167      * @param requestParams a Map of property name -&gt; list critiera values                               </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 168      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 169      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 170      */                                                                                                  </span>
<span class="854227037044969777" onmouseenter="enter('854227037044969777');" onmouseout="out('854227037044969777');" style=""> 171     @RequestMapping(value = &quot;&quot;, method = RequestMethod.GET)                                              </span>
<span class="5203424842505603172" onmouseenter="enter('5203424842505603172');" onmouseout="out('5203424842505603172');" style=""> 172     public String viewEntityList(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 173             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 174             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 175         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 176         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 177         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                               </span>
<span class="1452589137399878084" onmouseenter="enter('1452589137399878084');" onmouseout="out('1452589137399878084');" style=""><abbr title=" 178         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars);"> 178         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 179         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 180         DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                           </span>
<span  style=""> 181                                                                                                          </span>
<span class="-9123024135554384147" onmouseenter="enter('-9123024135554384147');" onmouseout="out('-9123024135554384147');" style=""> 182         ListGrid listGrid = formService.buildMainListGrid(drs, cmd, sectionKey, crumbs);                 </span>
<span class="-7197013270379460942" onmouseenter="enter('-7197013270379460942');" onmouseout="out('-7197013270379460942');" style=""> 183         listGrid.setSelectType(ListGrid.SelectType.NONE);                                                </span>
<span  style=""> 184                                                                                                          </span>
<span class="6707774114103003478" onmouseenter="enter('6707774114103003478');" onmouseout="out('6707774114103003478');" style=""> 185         Set&lt;Field&gt; headerFields = listGrid.getHeaderFields();                                            </span>
<span class="6157449347608657417" onmouseenter="enter('6157449347608657417');" onmouseout="out('6157449347608657417');" style=""> 186         if (CollectionUtils.isNotEmpty(headerFields)) {                                                  </span>
<span class="7359980094802675712" onmouseenter="enter('7359980094802675712');" onmouseout="out('7359980094802675712');" style=""> 187             Field firstField = headerFields.iterator().next();                                           </span>
<span class="-7992921859474727563" onmouseenter="enter('-7992921859474727563');" onmouseout="out('-7992921859474727563');" style=""> 188             if (requestParams.containsKey(firstField.getName())) {                                       </span>
<span class="-4847870846432586371" onmouseenter="enter('-4847870846432586371');" onmouseout="out('-4847870846432586371');" style=""> 189                 model.addAttribute(&quot;mainSearchTerm&quot;, requestParams.get(firstField.getName()).get(0));    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191         }                                                                                                </span>
<span  style=""> 192                                                                                                          </span>
<span class="3294377821001327596" onmouseenter="enter('3294377821001327596');" onmouseout="out('3294377821001327596');" style=""> 193         model.addAttribute(&quot;viewType&quot;, &quot;entityList&quot;);                                                    </span>
<span  style=""> 194                                                                                                          </span>
<span class="5223794068523842694" onmouseenter="enter('5223794068523842694');" onmouseout="out('5223794068523842694');" style=""> 195         setupViewEntityListBasicModel(request, cmd, sectionKey, sectionClassName, model, requestParams); </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style=""> 196         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style=""> 197                                                                                                          </span>
<span class="-4487883013655706388" onmouseenter="enter('-4487883013655706388');" onmouseout="out('-4487883013655706388');" style=""> 198         return DEFAULT_CONTAINER_VIEW;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199     }                                                                                                    </span>
<span  style=""> 200                                                                                                          </span>
<span class="5512240627727429054" onmouseenter="enter('5512240627727429054');" onmouseout="out('5512240627727429054');" style=""><abbr title=" 201     protected void setupViewEntityListBasicModel(HttpServletRequest request, ClassMetadata cmd, String sectionKey,"> 201     protected void setupViewEntityListBasicModel(HttpServletRequest request, ClassMetadata cmd, String seðŸ”µ</abbr></span>
<span class="522743254766371502" onmouseenter="enter('522743254766371502');" onmouseout="out('522743254766371502');" style=""> 202             String sectionClassName, Model model, MultiValueMap&lt;String, String&gt; requestParams) {         </span>
<span class="5787313217223527782" onmouseenter="enter('5787313217223527782');" onmouseout="out('5787313217223527782');" style=""> 203         List&lt;EntityFormAction&gt; mainActions = new ArrayList&lt;&gt;();                                          </span>
<span class="-6495333239259317464" onmouseenter="enter('-6495333239259317464');" onmouseout="out('-6495333239259317464');" style=""> 204         addAddActionIfAllowed(sectionClassName, cmd, mainActions);                                       </span>
<span class="-5948121019403308590" onmouseenter="enter('-5948121019403308590');" onmouseout="out('-5948121019403308590');" style=""> 205         extensionManager.getProxy().addAdditionalMainActions(sectionClassName, mainActions);             </span>
<span class="-381816252130957573" onmouseenter="enter('-381816252130957573');" onmouseout="out('-381816252130957573');" style=""> 206         extensionManager.getProxy().modifyMainActions(cmd, mainActions);                                 </span>
<span  style=""> 207                                                                                                          </span>
<span class="-5498329164774951339" onmouseenter="enter('-5498329164774951339');" onmouseout="out('-5498329164774951339');" style=""> 208         // If this came from a delete save, we&#x27;ll have a headerFlash request parameter to take care of   </span>
<span class="6915846846822456322" onmouseenter="enter('6915846846822456322');" onmouseout="out('6915846846822456322');" style=""> 209         if (requestParams.containsKey(&quot;headerFlash&quot;)) {                                                  </span>
<span class="-7374079465520861767" onmouseenter="enter('-7374079465520861767');" onmouseout="out('-7374079465520861767');" style=""> 210             model.addAttribute(&quot;headerFlash&quot;, requestParams.get(&quot;headerFlash&quot;).get(0));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211         }                                                                                                </span>
<span  style=""> 212                                                                                                          </span>
<span class="-5632901614715850082" onmouseenter="enter('-5632901614715850082');" onmouseout="out('-5632901614715850082');" style=""> 213         List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());                   </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style=""> 214         String requestUri = request.getRequestURI();                                                     </span>
<span class="2670437920401576748" onmouseenter="enter('2670437920401576748');" onmouseout="out('2670437920401576748');" style=""> 215         if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) {  </span>
<span class="-901741071381030126" onmouseenter="enter('-901741071381030126');" onmouseout="out('-901741071381030126');" style=""><abbr title=" 216             requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length());"> 216             requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length())ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217         }                                                                                                </span>
<span  style=""> 218                                                                                                          </span>
<span class="-3335875933652663591" onmouseenter="enter('-3335875933652663591');" onmouseout="out('-3335875933652663591');" style=""> 219         model.addAttribute(&quot;isFilter&quot;, (requestParams.size() &gt; 0));                                      </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style=""> 220         model.addAttribute(&quot;currentUri&quot;, requestUri);                                                    </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style=""> 221         model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                                  </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 222         model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 223         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="-4219022137146036385" onmouseenter="enter('-4219022137146036385');" onmouseout="out('-4219022137146036385');" style=""> 224         model.addAttribute(&quot;mainActions&quot;, mainActions);                                                  </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 225         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-7167932239083034641" onmouseenter="enter('-7167932239083034641');" onmouseout="out('-7167932239083034641');" style=""> 226         setTypedEntityModelAttributes(request, model);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227     }                                                                                                    </span>
<span  style=""> 228                                                                                                          </span>
<span class="-3612928683982517341" onmouseenter="enter('-3612928683982517341');" onmouseout="out('-3612928683982517341');" style=""> 229     @RequestMapping(value = &quot;/selectize&quot;, method = RequestMethod.GET)                                    </span>
<span class="-2536734120775641057" onmouseenter="enter('-2536734120775641057');" onmouseout="out('-2536734120775641057');" style=""> 230     public @ResponseBody Map&lt;String, Object&gt; viewEntityListSelectize(HttpServletRequest request,         </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style=""> 231              HttpServletResponse response, Model model,                                                  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 232              @PathVariable Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 233              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 234         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 235         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 236         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                               </span>
<span class="3971039348455381302" onmouseenter="enter('3971039348455381302');" onmouseout="out('3971039348455381302');" style=""><abbr title=" 237         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars)"> 237         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="-5204717557696417186" onmouseenter="enter('-5204717557696417186');" onmouseout="out('-5204717557696417186');" style=""> 238                 .withCustomCriteria(getCustomCriteria(requestParams));                                   </span>
<span  style=""> 239                                                                                                          </span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style=""> 240         ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                           </span>
<span  style=""> 241                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 242         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 243         DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                           </span>
<span  style=""> 244                                                                                                          </span>
<span class="-6840686923261380416" onmouseenter="enter('-6840686923261380416');" onmouseout="out('-6840686923261380416');" style=""> 245         return formService.constructSelectizeOptionMap(drs, cmd);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246     }                                                                                                    </span>
<span  style=""> 247                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 248     /**                                                                                                  </span>
<span class="6015587852497052057" onmouseenter="enter('6015587852497052057');" onmouseout="out('6015587852497052057');" style=""> 249      * Obtains the requested criteria parameter                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 250      *                                                                                                   </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 251      * @param requestParams                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 252      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 253      */                                                                                                  </span>
<span class="-5224065764328446223" onmouseenter="enter('-5224065764328446223');" onmouseout="out('-5224065764328446223');" style=""> 254     protected String[] getCustomCriteria(Map&lt;String, List&lt;String&gt;&gt; requestParams) {                      </span>
<span class="8308653628584061101" onmouseenter="enter('8308653628584061101');" onmouseout="out('8308653628584061101');" style=""> 255         if (requestParams == null || requestParams.isEmpty()) {                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 256             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257         }                                                                                                </span>
<span  style=""> 258                                                                                                          </span>
<span class="-6200156504676301578" onmouseenter="enter('-6200156504676301578');" onmouseout="out('-6200156504676301578');" style=""> 259         List&lt;String&gt; criteria = requestParams.get(CUSTOM_CRITERIA);                                      </span>
<span class="3479198517250864619" onmouseenter="enter('3479198517250864619');" onmouseout="out('3479198517250864619');" style=""> 260         String response = CollectionUtils.isEmpty(criteria) ? null : criteria.get(0);                    </span>
<span class="3591199473111095603" onmouseenter="enter('3591199473111095603');" onmouseout="out('3591199473111095603');" style=""> 261         return new String[] {response};                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 262     }                                                                                                    </span>
<span  style=""> 263                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 264     /**                                                                                                  </span>
<span class="53051913897087216" onmouseenter="enter('53051913897087216');" onmouseout="out('53051913897087216');" style=""><abbr title=" 265      * Adds the &quot;Add&quot; button to the main entity form if the current user has permissions to create new instances"> 265      * Adds the &quot;Add&quot; button to the main entity form if the current user has permissions to create new inðŸ”µ</abbr></span>
<span class="-2041834868205006384" onmouseenter="enter('-2041834868205006384');" onmouseout="out('-2041834868205006384');" style=""> 266      * of the entity and all of the fields in the entity aren&#x27;t marked as read only.                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 267      *                                                                                                   </span>
<span class="2579837316240354786" onmouseenter="enter('2579837316240354786');" onmouseout="out('2579837316240354786');" style=""> 268      * @param sectionClassName                                                                           </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style=""> 269      * @param cmd                                                                                        </span>
<span class="-70241175981651056" onmouseenter="enter('-70241175981651056');" onmouseout="out('-70241175981651056');" style=""> 270      * @param mainActions                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 271      */                                                                                                  </span>
<span class="-3535265632615590771" onmouseenter="enter('-3535265632615590771');" onmouseout="out('-3535265632615590771');" style=""><abbr title=" 272     protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormAction&gt; mainActions) {"> 272     protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormActioðŸ”µ</abbr></span>
<span class="-1675673801723949520" onmouseenter="enter('-1675673801723949520');" onmouseout="out('-1675673801723949520');" style=""> 273         if (isAddActionAllowed(sectionClassName, cmd)) {                                                 </span>
<span class="-161553798203722975" onmouseenter="enter('-161553798203722975');" onmouseout="out('-161553798203722975');" style=""> 274             mainActions.add(DefaultMainActions.ADD);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276     }                                                                                                    </span>
<span  style=""> 277                                                                                                          </span>
<span class="4125299149074369729" onmouseenter="enter('4125299149074369729');" onmouseout="out('4125299149074369729');" style=""> 278     protected boolean isAddActionAllowed(final String sectionClassName, final ClassMetadata cmd) {       </span>
<span class="2379281051849826609" onmouseenter="enter('2379281051849826609');" onmouseout="out('2379281051849826609');" style=""> 279         // If the user does not have create permissions, we will not add the &quot;Add New&quot; button            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 280         try {                                                                                            </span>
<span class="-2050050318794737036" onmouseenter="enter('-2050050318794737036');" onmouseout="out('-2050050318794737036');" style=""> 281             adminRemoteSecurityService.securityCheck(sectionClassName, EntityOperationType.ADD);         </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style=""> 282         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style=""> 283             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 284                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286         }                                                                                                </span>
<span  style=""> 287                                                                                                          </span>
<span class="-3272601440754635767" onmouseenter="enter('-3272601440754635767');" onmouseout="out('-3272601440754635767');" style=""> 288         final boolean canAdd = rowLevelSecurityService                                                   </span>
<span class="-1653290766274377775" onmouseenter="enter('-1653290766274377775');" onmouseout="out('-1653290766274377775');" style=""> 289                 .canAdd(adminRemoteSecurityService.getPersistentAdminUser(), sectionClassName, cmd);     </span>
<span class="5125272502277129387" onmouseenter="enter('5125272502277129387');" onmouseout="out('5125272502277129387');" style=""> 290         return isNotReadOnly(cmd) &amp;&amp; canAdd;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291     }                                                                                                    </span>
<span  style=""> 292                                                                                                          </span>
<span class="-7397004815762425407" onmouseenter="enter('-7397004815762425407');" onmouseout="out('-7397004815762425407');" style=""> 293     protected boolean isNotReadOnly(final ClassMetadata cmd) {                                           </span>
<span class="-5650645308789885306" onmouseenter="enter('-5650645308789885306');" onmouseout="out('-5650645308789885306');" style=""> 294         //check if all the metadata is read only                                                         </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 295         for (Property property : cmd.getProperties()) {                                                  </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style=""> 296             if (property.getMetadata() instanceof BasicFieldMetadata) {                                  </span>
<span class="-4740706861929444273" onmouseenter="enter('-4740706861929444273');" onmouseout="out('-4740706861929444273');" style=""> 297                 if (((BasicFieldMetadata) property.getMetadata()).getReadOnly() == null ||               </span>
<span class="7731016670197656615" onmouseenter="enter('7731016670197656615');" onmouseout="out('7731016670197656615');" style=""> 298                         !((BasicFieldMetadata) property.getMetadata()).getReadOnly()) {                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 299                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302         }                                                                                                </span>
<span  style=""> 303                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 304         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305     }                                                                                                    </span>
<span  style=""> 306                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 307     /**                                                                                                  </span>
<span class="-403478592182410175" onmouseenter="enter('-403478592182410175');" onmouseout="out('-403478592182410175');" style=""><abbr title=" 308      * Renders the modal form that is used to add a new parent level entity. Note that this form cannot render any"> 308      * Renders the modal form that is used to add a new parent level entity. Note that this form cannot rðŸ”µ</abbr></span>
<span class="-2684076904077363908" onmouseenter="enter('-2684076904077363908');" onmouseout="out('-2684076904077363908');" style=""><abbr title=" 309      * subcollections as operations on those collections require the parent level entity to first be saved and have"> 309      * subcollections as operations on those collections require the parent level entity to first be saveðŸ”µ</abbr></span>
<span class="-2496660529180512497" onmouseenter="enter('-2496660529180512497');" onmouseout="out('-2496660529180512497');" style=""><abbr title=" 310      * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity screen where"> 310      * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity ðŸ”µ</abbr></span>
<span class="-5672334976076130102" onmouseenter="enter('-5672334976076130102');" onmouseout="out('-5672334976076130102');" style=""> 311      * they can then perform operations on sub collections.                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 312      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 313      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 314      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 315      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 316      * @param pathVars                                                                                   </span>
<span class="-7339043177630483847" onmouseenter="enter('-7339043177630483847');" onmouseout="out('-7339043177630483847');" style=""> 317      * @param entityType                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 318      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 319      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 320      */                                                                                                  </span>
<span class="-6494270766546423105" onmouseenter="enter('-6494270766546423105');" onmouseout="out('-6494270766546423105');" style=""> 321     @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.GET)                                          </span>
<span class="8522113168804045570" onmouseenter="enter('8522113168804045570');" onmouseout="out('8522113168804045570');" style=""><abbr title=" 322     public String viewAddEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,"> 322     public String viewAddEntityForm(HttpServletRequest request, HttpServletResponse response, Model modelðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 323             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-1715631339976075770" onmouseenter="enter('-1715631339976075770');" onmouseout="out('-1715631339976075770');" style=""> 324             @RequestParam(defaultValue = &quot;&quot;) String entityType) throws Exception {                       </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 325         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 326         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 327         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 328         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 328         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style=""> 329         ppr.setAddOperationInspect(true);                                                                </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 330         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span  style=""> 331                                                                                                          </span>
<span class="2600422776092116832" onmouseenter="enter('2600422776092116832');" onmouseout="out('2600422776092116832');" style=""> 332         entityType = determineEntityType(entityType, cmd);                                               </span>
<span  style=""> 333                                                                                                          </span>
<span class="4098005746663533241" onmouseenter="enter('4098005746663533241');" onmouseout="out('4098005746663533241');" style=""> 334         EntityForm entityForm = formService.createEntityForm(cmd, sectionCrumbs);                        </span>
<span  style=""> 335                                                                                                          </span>
<span class="5826594571687596812" onmouseenter="enter('5826594571687596812');" onmouseout="out('5826594571687596812');" style=""><abbr title=" 336         // We need to make sure that the ceiling entity is set to the interface and the specific entity type"> 336         // We need to make sure that the ceiling entity is set to the interface and the specific entity tðŸ”µ</abbr></span>
<span class="37161952125740808" onmouseenter="enter('37161952125740808');" onmouseout="out('37161952125740808');" style=""> 337         // is set to the type we&#x27;re going to be creating.                                                </span>
<span class="5062735442039535924" onmouseenter="enter('5062735442039535924');" onmouseout="out('5062735442039535924');" style=""> 338         entityForm.setCeilingEntityClassname(cmd.getCeilingType());                                      </span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style=""> 339         entityForm.setEntityType(entityType);                                                            </span>
<span  style=""> 340                                                                                                          </span>
<span class="-5227856854691424770" onmouseenter="enter('-5227856854691424770');" onmouseout="out('-5227856854691424770');" style=""><abbr title=" 341         // When we initially build the class metadata (and thus, the entity form), we had all of the possible"> 341         // When we initially build the class metadata (and thus, the entity form), we had all of the possðŸ”µ</abbr></span>
<span class="5105619661852614163" onmouseenter="enter('5105619661852614163');" onmouseout="out('5105619661852614163');" style=""><abbr title=" 342         // polymorphic fields built out. Now that we have a concrete entity type to render, we can remove the"> 342         // polymorphic fields built out. Now that we have a concrete entity type to render, we can removeðŸ”µ</abbr></span>
<span class="-3843175043245177501" onmouseenter="enter('-3843175043245177501');" onmouseout="out('-3843175043245177501');" style=""> 343         // fields that are not applicable for this given entity type.                                    </span>
<span class="-2935519954456371455" onmouseenter="enter('-2935519954456371455');" onmouseout="out('-2935519954456371455');" style=""> 344         formService.removeNonApplicableFields(cmd, entityForm, entityType);                              </span>
<span  style=""> 345                                                                                                          </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 346         modifyAddEntityForm(entityForm, pathVars);                                                       </span>
<span  style=""> 347                                                                                                          </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 348         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 349         model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                               </span>
<span  style=""> 350                                                                                                          </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 351         model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 352         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 353         model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 354         setModelAttributes(model, sectionKey);                                                           </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style=""> 355         return MODAL_CONTAINER_VIEW;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 356     }                                                                                                    </span>
<span  style=""> 357                                                                                                          </span>
<span class="6822582914767657426" onmouseenter="enter('6822582914767657426');" onmouseout="out('6822582914767657426');" style=""> 358     // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic         </span>
<span class="6925903770450869702" onmouseenter="enter('6925903770450869702');" onmouseout="out('6925903770450869702');" style=""> 359     // types for this entity.                                                                            </span>
<span class="3096473113628081949" onmouseenter="enter('3096473113628081949');" onmouseout="out('3096473113628081949');" style=""> 360     protected String determineEntityType(String entityType, final ClassMetadata cmd)                     </span>
<span class="363372168864539985" onmouseenter="enter('363372168864539985');" onmouseout="out('363372168864539985');" style=""> 361             throws UnsupportedEncodingException {                                                        </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 362         if (StringUtils.isBlank(entityType)) {                                                           </span>
<span class="2333848870190395940" onmouseenter="enter('2333848870190395940');" onmouseout="out('2333848870190395940');" style=""> 363             if (cmd.getPolymorphicEntities().getChildren().length == 0) {                                </span>
<span class="2097783908693957449" onmouseenter="enter('2097783908693957449');" onmouseout="out('2097783908693957449');" style=""> 364                 entityType = cmd.getPolymorphicEntities().getFullyQualifiedClassname();                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 365             } else {                                                                                     </span>
<span class="-6902702564943152777" onmouseenter="enter('-6902702564943152777');" onmouseout="out('-6902702564943152777');" style=""> 366                 entityType = getDefaultEntityType();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 368         } else {                                                                                         </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style=""> 369             entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370         }                                                                                                </span>
<span class="2597693607778452486" onmouseenter="enter('2597693607778452486');" onmouseout="out('2597693607778452486');" style=""> 371         return entityType;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 372     }                                                                                                    </span>
<span  style=""> 373                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 374     /**                                                                                                  </span>
<span class="-2292124409166412817" onmouseenter="enter('-2292124409166412817');" onmouseout="out('-2292124409166412817');" style=""><abbr title=" 375      * Processes the request to add a new entity. If successful, returns a redirect to the newly created entity."> 375      * Processes the request to add a new entity. If successful, returns a redirect to the newly created ðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 376      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 377      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 378      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 379      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 380      * @param pathVars                                                                                   </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 381      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 382      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 383      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 384      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 385      */                                                                                                  </span>
<span class="-1840738840686664300" onmouseenter="enter('-1840738840686664300');" onmouseout="out('-1840738840686664300');" style=""> 386     @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.POST)                                         </span>
<span class="8551380442207718095" onmouseenter="enter('8551380442207718095');" onmouseout="out('8551380442207718095');" style=""> 387     public String addEntity(HttpServletRequest request, HttpServletResponse response, Model model,       </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 388             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title=" 389             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {"> 389             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 390         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 391         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 392         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="2596618104185041854" onmouseenter="enter('2596618104185041854');" onmouseout="out('2596618104185041854');" style=""><abbr title=" 393         ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 393         ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassNameðŸ”µ</abbr></span>
<span  style=""> 394                                                                                                          </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 395         extractDynamicFormFields(cmd, entityForm);                                                       </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 396         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 396         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="-4281879219750019053" onmouseenter="enter('-4281879219750019053');" onmouseout="out('-4281879219750019053');" style=""> 397         Entity entity = service.addEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();       </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 398         entityFormValidator.validate(entityForm, entity, result);                                        </span>
<span  style=""> 399                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 400         if (result.hasErrors()) {                                                                        </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 401             entityForm.clearFieldsMap();                                                                 </span>
<span class="-312181662169537666" onmouseenter="enter('-312181662169537666');" onmouseout="out('-312181662169537666');" style=""> 402             formService.populateEntityForm(cmd, entity, entityForm, sectionCrumbs);                      </span>
<span  style=""> 403                                                                                                          </span>
<span class="254171966199148419" onmouseenter="enter('254171966199148419');" onmouseout="out('254171966199148419');" style=""> 404             formService.removeNonApplicableFields(cmd, entityForm, entityForm.getEntityType());          </span>
<span  style=""> 405                                                                                                          </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 406             modifyAddEntityForm(entityForm, pathVars);                                                   </span>
<span  style=""> 407                                                                                                          </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 408             model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                           </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 409             model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                        </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 410             model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                 </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 411             model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 412             setModelAttributes(model, sectionKey);                                                       </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style=""> 413             return MODAL_CONTAINER_VIEW;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 414         }                                                                                                </span>
<span  style=""> 415                                                                                                          </span>
<span class="7931002159447649906" onmouseenter="enter('7931002159447649906');" onmouseout="out('7931002159447649906');" style=""> 416         // Note that AJAX Redirects need the context path prepended to them                              </span>
<span class="-9104189425594863479" onmouseenter="enter('-9104189425594863479');" onmouseout="out('-9104189425594863479');" style=""><abbr title=" 417         return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).getValue();"> 417         return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418     }                                                                                                    </span>
<span  style=""> 419                                                                                                          </span>
<span class="1290933159858539781" onmouseenter="enter('1290933159858539781');" onmouseout="out('1290933159858539781');" style=""> 420     @RequestMapping(value = &quot;/{id}/duplicate&quot;, method = RequestMethod.POST)                              </span>
<span class="-7829728733805273999" onmouseenter="enter('-7829728733805273999');" onmouseout="out('-7829728733805273999');" style=""> 421     public String duplicateEntity(final HttpServletRequest request,                                      </span>
<span class="277417182565607361" onmouseenter="enter('277417182565607361');" onmouseout="out('277417182565607361');" style=""> 422             final HttpServletResponse response,                                                          </span>
<span class="7665770463560391322" onmouseenter="enter('7665770463560391322');" onmouseout="out('7665770463560391322');" style=""> 423             final Model model,                                                                           </span>
<span class="5144416334471976319" onmouseenter="enter('5144416334471976319');" onmouseout="out('5144416334471976319');" style=""> 424             @PathVariable final Map&lt;String, String&gt; pathVars,                                            </span>
<span class="5884230296910152604" onmouseenter="enter('5884230296910152604');" onmouseout="out('5884230296910152604');" style=""> 425             @PathVariable(value = &quot;id&quot;) final String id,                                                 </span>
<span class="5134952934925976911" onmouseenter="enter('5134952934925976911');" onmouseout="out('5134952934925976911');" style=""> 426             @ModelAttribute(value = &quot;entityForm&quot;) final EntityForm entityForm,                           </span>
<span class="3593210188792847894" onmouseenter="enter('3593210188792847894');" onmouseout="out('3593210188792847894');" style=""> 427             final BindingResult result) throws Exception {                                               </span>
<span class="5473402149144087547" onmouseenter="enter('5473402149144087547');" onmouseout="out('5473402149144087547');" style=""> 428         final String sectionKey = getSectionKey(pathVars);                                               </span>
<span class="5437662011929987553" onmouseenter="enter('5437662011929987553');" onmouseout="out('5437662011929987553');" style=""> 429         final String sectionClassName = getClassNameForSection(sectionKey);                              </span>
<span class="8553976943183535096" onmouseenter="enter('8553976943183535096');" onmouseout="out('8553976943183535096');" style=""> 430         final Class&lt;?&gt; entityClass = dynamicEntityDao.getImplClass(sectionClassName);                    </span>
<span class="3365797270076600425" onmouseenter="enter('3365797270076600425');" onmouseout="out('3365797270076600425');" style=""> 431         final long identifier = Long.parseLong(id);                                                      </span>
<span  style=""> 432                                                                                                          </span>
<span class="-138107922525045121" onmouseenter="enter('-138107922525045121');" onmouseout="out('-138107922525045121');" style=""> 433         if (duplicator.validate(entityClass, identifier)) {                                              </span>
<span class="5493542447860389431" onmouseenter="enter('5493542447860389431');" onmouseout="out('5493542447860389431');" style=""> 434             final Object duplicate;                                                                      </span>
<span  style=""> 435                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 436             try {                                                                                        </span>
<span class="-2283233085854885260" onmouseenter="enter('-2283233085854885260');" onmouseout="out('-2283233085854885260');" style=""> 437                 duplicate = duplicator.copy(entityClass, identifier);                                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 438             } catch (Exception e) {                                                                      </span>
<span class="-8850460393574909327" onmouseenter="enter('-8850460393574909327');" onmouseout="out('-8850460393574909327');" style=""> 439                 LOG.error(&quot;Could not duplicate entity&quot;, e);                                              </span>
<span class="-7503880796159563304" onmouseenter="enter('-7503880796159563304');" onmouseout="out('-7503880796159563304');" style=""> 440                 return getErrorDuplicatingResponse(response, &quot;Duplication_Failure&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441             }                                                                                            </span>
<span  style=""> 442                                                                                                          </span>
<span class="9202899875978069713" onmouseenter="enter('9202899875978069713');" onmouseout="out('9202899875978069713');" style=""> 443             final Serializable dupId = genericEntityService.getIdentifier(duplicate);                    </span>
<span  style=""> 444                                                                                                          </span>
<span class="7931002159447649906" onmouseenter="enter('7931002159447649906');" onmouseout="out('7931002159447649906');" style=""> 445             // Note that AJAX Redirects need the context path prepended to them                          </span>
<span class="6804960621276438337" onmouseenter="enter('6804960621276438337');" onmouseout="out('6804960621276438337');" style=""> 446             return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + dupId;                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 447         } else {                                                                                         </span>
<span class="-110948502599545681" onmouseenter="enter('-110948502599545681');" onmouseout="out('-110948502599545681');" style=""> 448             return getErrorDuplicatingResponse(response, &quot;Validation_Failure&quot;);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 450     }                                                                                                    </span>
<span  style=""> 451                                                                                                          </span>
<span class="-106656131545478097" onmouseenter="enter('-106656131545478097');" onmouseout="out('-106656131545478097');" style=""> 452     protected String getErrorDuplicatingResponse(HttpServletResponse response, String code) {            </span>
<span class="7659712838923572459" onmouseenter="enter('7659712838923572459');" onmouseout="out('7659712838923572459');" style=""> 453         List&lt;Map&lt;String, Object&gt;&gt; errors = new ArrayList&lt;&gt;();                                            </span>
<span class="-6240695079450735253" onmouseenter="enter('-6240695079450735253');" onmouseout="out('-6240695079450735253');" style=""> 454         String message;                                                                                  </span>
<span class="-7826420477706002406" onmouseenter="enter('-7826420477706002406');" onmouseout="out('-7826420477706002406');" style=""> 455         BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();          </span>
<span class="-2727648393614728" onmouseenter="enter('-2727648393614728');" onmouseout="out('-2727648393614728');" style=""> 456         if (context != null &amp;&amp; context.getMessageSource() != null) {                                     </span>
<span class="-5978418614812499702" onmouseenter="enter('-5978418614812499702');" onmouseout="out('-5978418614812499702');" style=""> 457             message = context.getMessageSource()                                                         </span>
<span class="1624598595284946587" onmouseenter="enter('1624598595284946587');" onmouseout="out('1624598595284946587');" style=""> 458                     .getMessage(code, null, code, context.getJavaLocale());                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 459         } else {                                                                                         </span>
<span class="-9004243737964586892" onmouseenter="enter('-9004243737964586892');" onmouseout="out('-9004243737964586892');" style=""> 460             LOG.warn(                                                                                    </span>
<span class="6269614064328325287" onmouseenter="enter('6269614064328325287');" onmouseout="out('6269614064328325287');" style=""> 461                     &quot;Could not find the MessageSource on the current request, &quot;                          </span>
<span class="-8208830135626721740" onmouseenter="enter('-8208830135626721740');" onmouseout="out('-8208830135626721740');" style=""> 462                             + &quot;not translating the message key&quot;);                                        </span>
<span class="599114272120646428" onmouseenter="enter('599114272120646428');" onmouseout="out('599114272120646428');" style=""> 463             message = &quot;Duplication_Failure&quot;;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 464         }                                                                                                </span>
<span  style=""> 465                                                                                                          </span>
<span class="-4703377271641004207" onmouseenter="enter('-4703377271641004207');" onmouseout="out('-4703377271641004207');" style=""> 466         Map&lt;String, Object&gt; errorMap = new HashMap&lt;&gt;();                                                  </span>
<span class="2851590661979449603" onmouseenter="enter('2851590661979449603');" onmouseout="out('2851590661979449603');" style=""> 467         errorMap.put(&quot;errorType&quot;, &quot;global&quot;);                                                             </span>
<span class="4738760182182965590" onmouseenter="enter('4738760182182965590');" onmouseout="out('4738760182182965590');" style=""> 468         errorMap.put(&quot;code&quot;, code);                                                                      </span>
<span class="7426718838785534996" onmouseenter="enter('7426718838785534996');" onmouseout="out('7426718838785534996');" style=""> 469         errorMap.put(&quot;message&quot;, message);                                                                </span>
<span class="-4906289066975989946" onmouseenter="enter('-4906289066975989946');" onmouseout="out('-4906289066975989946');" style=""> 470         errors.add(errorMap);                                                                            </span>
<span class="-8734340547513070222" onmouseenter="enter('-8734340547513070222');" onmouseout="out('-8734340547513070222');" style=""> 471         return new JsonResponse(response).with(&quot;errors&quot;, errors).done();                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 472     }                                                                                                    </span>
<span  style=""> 473                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 474     /**                                                                                                  </span>
<span class="9102199281013466170" onmouseenter="enter('9102199281013466170');" onmouseout="out('9102199281013466170');" style=""> 475      * Renders the main entity form for the specified entity                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 476      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 477      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 478      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 479      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 480      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 481      * @param id                                                                                         </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 482      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 483      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 484      */                                                                                                  </span>
<span class="7083955269921705584" onmouseenter="enter('7083955269921705584');" onmouseout="out('7083955269921705584');" style=""> 485     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)                                         </span>
<span class="-4309552397998806559" onmouseenter="enter('-4309552397998806559');" onmouseout="out('-4309552397998806559');" style=""> 486     public String viewEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 487             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-2194094146044801021" onmouseenter="enter('-2194094146044801021');" onmouseout="out('-2194094146044801021');" style=""> 488             @PathVariable(&quot;id&quot;) String id) throws Exception {                                            </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 489         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 490         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 491         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                           </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""><abbr title=" 492         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);"> 492         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, patðŸ”µ</abbr></span>
<span  style=""> 493                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 494         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-8780243800866475465" onmouseenter="enter('-8780243800866475465');" onmouseout="out('-8780243800866475465');" style=""> 495         Entity entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];    </span>
<span  style=""> 496                                                                                                          </span>
<span class="-8745713672993611458" onmouseenter="enter('-8745713672993611458');" onmouseout="out('-8745713672993611458');" style=""> 497         multipleCatalogExtensionManager.getProxy().setCurrentCatalog(entity, model);                     </span>
<span  style=""> 498                                                                                                          </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""><abbr title=" 499         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);"> 499         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, cðŸ”µ</abbr></span>
<span  style=""> 500                                                                                                          </span>
<span class="872584542219399793" onmouseenter="enter('872584542219399793');" onmouseout="out('872584542219399793');" style=""> 501         EntityForm entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);        </span>
<span  style=""> 502                                                                                                          </span>
<span class="1451551715319124344" onmouseenter="enter('1451551715319124344');" onmouseout="out('1451551715319124344');" style=""> 503         modifyEntityForm(entity, entityForm, pathVars);                                                  </span>
<span  style=""> 504                                                                                                          </span>
<span class="1981952247030149381" onmouseenter="enter('1981952247030149381');" onmouseout="out('1981952247030149381');" style=""> 505         if (request.getParameter(&quot;headerFlash&quot;) != null) {                                               </span>
<span class="-2367607735703612103" onmouseenter="enter('-2367607735703612103');" onmouseout="out('-2367607735703612103');" style=""> 506             model.addAttribute(&quot;headerFlash&quot;, request.getParameter(&quot;headerFlash&quot;));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 507         }                                                                                                </span>
<span  style=""> 508                                                                                                          </span>
<span class="-6569554975283424126" onmouseenter="enter('-6569554975283424126');" onmouseout="out('-6569554975283424126');" style=""> 509         // Set the sectionKey again incase this is a typed entity                                        </span>
<span class="4201932972037321722" onmouseenter="enter('4201932972037321722');" onmouseout="out('4201932972037321722');" style=""> 510         entityForm.setSectionKey(sectionKey);                                                            </span>
<span  style=""> 511                                                                                                          </span>
<span class="5387752430767952558" onmouseenter="enter('5387752430767952558');" onmouseout="out('5387752430767952558');" style=""> 512         // Build the current url in the cast that this is a typed entity                                 </span>
<span class="3856485652570637824" onmouseenter="enter('3856485652570637824');" onmouseout="out('3856485652570637824');" style=""> 513         String originatingUri = new UrlPathHelper().getOriginatingRequestUri(request);                   </span>
<span class="-1728408616530607173" onmouseenter="enter('-1728408616530607173');" onmouseout="out('-1728408616530607173');" style=""> 514         int startIndex = request.getContextPath().length();                                              </span>
<span  style=""> 515                                                                                                          </span>
<span class="654052499558570629" onmouseenter="enter('654052499558570629');" onmouseout="out('654052499558570629');" style=""> 516         // Remove the context path from servlet path                                                     </span>
<span class="526107488063217153" onmouseenter="enter('526107488063217153');" onmouseout="out('526107488063217153');" style=""> 517         String currentUrl = originatingUri.substring(startIndex);                                        </span>
<span  style=""> 518                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 519         model.addAttribute(&quot;entity&quot;, entity);                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 520         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-4977411250845897884" onmouseenter="enter('-4977411250845897884');" onmouseout="out('-4977411250845897884');" style=""> 521         model.addAttribute(&quot;currentUrl&quot;, currentUrl);                                                    </span>
<span class="5337717893660099657" onmouseenter="enter('5337717893660099657');" onmouseout="out('5337717893660099657');" style=""> 522         model.addAttribute(CURRENT_FOLDER_ID, getCurrentFolderId(request));                              </span>
<span  style=""> 523                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 524         setModelAttributes(model, sectionKey);                                                           </span>
<span  style=""> 525                                                                                                          </span>
<span class="8236570979651257825" onmouseenter="enter('8236570979651257825');" onmouseout="out('8236570979651257825');" style=""> 526         // We want to replace author ids with their names                                                </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style=""> 527         addAuditableDisplayFields(entityForm);                                                           </span>
<span  style=""> 528                                                                                                          </span>
<span class="858139107025117803" onmouseenter="enter('858139107025117803');" onmouseout="out('858139107025117803');" style=""> 529         return resolveAppropriateEntityView(request, model, entityForm);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530     }                                                                                                    </span>
<span  style=""> 531                                                                                                          </span>
<span class="9182660926479189949" onmouseenter="enter('9182660926479189949');" onmouseout="out('9182660926479189949');" style=""><abbr title=" 532     protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, String&gt; pathVars,"> 532     protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, StrðŸ”µ</abbr></span>
<span class="4477928710658117231" onmouseenter="enter('4477928710658117231');" onmouseout="out('4477928710658117231');" style=""> 533                                                               ClassMetadata cmd, Entity entity,          </span>
<span class="5660295431162582196" onmouseenter="enter('5660295431162582196');" onmouseout="out('5660295431162582196');" style=""><abbr title=" 534                                                               List&lt;SectionCrumb&gt; crumbs) throws Exception {"> 534                                                               List&lt;SectionCrumb&gt; crumbs) throws ExceptionðŸ”µ</abbr></span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style=""> 535         String tabName = pathVars.get(&quot;tabName&quot;);                                                        </span>
<span class="5384642555226517985" onmouseenter="enter('5384642555226517985');" onmouseout="out('5384642555226517985');" style=""> 536         if (StringUtils.isEmpty(tabName)) {                                                              </span>
<span class="-3672533750283461484" onmouseenter="enter('-3672533750283461484');" onmouseout="out('-3672533750283461484');" style=""> 537             tabName = cmd.getFirstTab() == null ? &quot;General&quot; : cmd.getFirstTab().getTabName();            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 538         }                                                                                                </span>
<span class="-5882478663361935855" onmouseenter="enter('-5882478663361935855');" onmouseout="out('-5882478663361935855');" style=""> 539         return service.getRecordsForSelectedTab(cmd, entity, crumbs, tabName);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 540     }                                                                                                    </span>
<span  style=""> 541                                                                                                          </span>
<span class="1953795048205106952" onmouseenter="enter('1953795048205106952');" onmouseout="out('1953795048205106952');" style=""> 542     private boolean isAddRequest(Entity entity) {                                                        </span>
<span class="-2989581670667655563" onmouseenter="enter('-2989581670667655563');" onmouseout="out('-2989581670667655563');" style=""> 543         ExtensionResultHolder&lt;Boolean&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                     </span>
<span class="2773544387861748911" onmouseenter="enter('2773544387861748911');" onmouseout="out('2773544387861748911');" style=""><abbr title=" 544         ExtensionResultStatusType result = extensionManager.getProxy().isAddRequest(entity, resultHolder);"> 544         ExtensionResultStatusType result = extensionManager.getProxy().isAddRequest(entity, resultHolder)ðŸ”µ</abbr></span>
<span class="8622638495597819717" onmouseenter="enter('8622638495597819717');" onmouseout="out('8622638495597819717');" style=""> 545         if (result.equals(ExtensionResultStatusType.NOT_HANDLED)) {                                      </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 546             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 547         }                                                                                                </span>
<span  style=""> 548                                                                                                          </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 549         return resultHolder.getResult();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 550     }                                                                                                    </span>
<span  style=""> 551                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 552     /**                                                                                                  </span>
<span class="-4864218972040039628" onmouseenter="enter('-4864218972040039628');" onmouseout="out('-4864218972040039628');" style=""> 553      * Attempts to get the List Grid for the selected tab.                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 554      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 555      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 556      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 557      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 558      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 559      * @param id                                                                                         </span>
<span class="4841027518362301903" onmouseenter="enter('4841027518362301903');" onmouseout="out('4841027518362301903');" style=""> 560      * @param tabName                                                                                    </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 561      * @param entityForm                                                                                 </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 562      * @param entity                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 563      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 564      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 565      */                                                                                                  </span>
<span class="-7675092144868804288" onmouseenter="enter('-7675092144868804288');" onmouseout="out('-7675092144868804288');" style=""> 566     @RequestMapping(value = &quot;/{id}/{tab:[0-9]+}/{tabName}&quot;, method = RequestMethod.POST)                 </span>
<span class="-2248541185927650044" onmouseenter="enter('-2248541185927650044');" onmouseout="out('-2248541185927650044');" style=""> 567     public String viewEntityTab(HttpServletRequest request, HttpServletResponse response, Model model,   </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 568             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 569             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="2259450910520289810" onmouseenter="enter('2259450910520289810');" onmouseout="out('2259450910520289810');" style=""> 570             @PathVariable(value = &quot;tabName&quot;) String tabName,                                             </span>
<span class="2754607649135651414" onmouseenter="enter('2754607649135651414');" onmouseout="out('2754607649135651414');" style=""> 571             @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm,                                 </span>
<span class="-2950467864443381399" onmouseenter="enter('-2950467864443381399');" onmouseout="out('-2950467864443381399');" style=""> 572             @ModelAttribute(value = &quot;entity&quot;) Entity entity) throws Exception {                          </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 573         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 574         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 575         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                           </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""><abbr title=" 576         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);"> 576         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, patðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 577         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 578         entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];           </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""><abbr title=" 579         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);"> 579         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, cðŸ”µ</abbr></span>
<span class="-3846048132763499568" onmouseenter="enter('-3846048132763499568');" onmouseout="out('-3846048132763499568');" style=""> 580         entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);                   </span>
<span  style=""> 581                                                                                                          </span>
<span class="1451551715319124344" onmouseenter="enter('1451551715319124344');" onmouseout="out('1451551715319124344');" style=""> 582         modifyEntityForm(entity, entityForm, pathVars);                                                  </span>
<span  style=""> 583                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 584         model.addAttribute(&quot;entity&quot;, entity);                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 585         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 586         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span  style=""> 587                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 588         setModelAttributes(model, sectionKey);                                                           </span>
<span  style=""> 589                                                                                                          </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 590         model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                       </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 591         model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                    </span>
<span  style=""> 592                                                                                                          </span>
<span class="-4487883013655706388" onmouseenter="enter('-4487883013655706388');" onmouseout="out('-4487883013655706388');" style=""> 593         return DEFAULT_CONTAINER_VIEW;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 594     }                                                                                                    </span>
<span  style=""> 595                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 596     /**                                                                                                  </span>
<span class="26428616724277901" onmouseenter="enter('26428616724277901');" onmouseout="out('26428616724277901');" style=""> 597      * Builds JSON that looks like this:                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 598      *                                                                                                   </span>
<span class="-619170819873097874" onmouseenter="enter('-619170819873097874');" onmouseout="out('-619170819873097874');" style=""> 599      * {&quot;errors&quot;:                                                                                        </span>
<span class="-7867797149207986089" onmouseenter="enter('-7867797149207986089');" onmouseout="out('-7867797149207986089');" style=""> 600      *      [{&quot;message&quot;:&quot;This field is Required&quot;,                                                        </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 601      *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                        </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 602      *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 603      *        &quot;errorType&quot;, &quot;field&quot;,                                                                      </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 604      *        &quot;tab&quot;: &quot;General&quot;                                                                           </span>
<span class="762081609125064039" onmouseenter="enter('762081609125064039');" onmouseout="out('762081609125064039');" style=""> 605      *        },                                                                                         </span>
<span class="2065208195238134241" onmouseenter="enter('2065208195238134241');" onmouseout="out('2065208195238134241');" style=""> 606      *        {&quot;message&quot;:&quot;This field is Required&quot;,                                                       </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 607      *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                        </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 608      *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 609      *        &quot;errorType&quot;, &quot;field&quot;,                                                                      </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 610      *        &quot;tab&quot;: &quot;General&quot;                                                                           </span>
<span class="-832778532632947969" onmouseenter="enter('-832778532632947969');" onmouseout="out('-832778532632947969');" style=""> 611      *        }]                                                                                         </span>
<span class="8941010846014250828" onmouseenter="enter('8941010846014250828');" onmouseout="out('8941010846014250828');" style=""> 612      * }                                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 613      *                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 614      */                                                                                                  </span>
<span class="726178843151373675" onmouseenter="enter('726178843151373675');" onmouseout="out('726178843151373675');" style=""> 615     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST, produces = &quot;application/json&quot;)         </span>
<span class="-4245682307765667372" onmouseenter="enter('-4245682307765667372');" onmouseout="out('-4245682307765667372');" style=""> 616     public String saveEntityJson(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 617             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 618             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="-5165411007609652701" onmouseenter="enter('-5165411007609652701');" onmouseout="out('-5165411007609652701');" style=""> 619             @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm, BindingResult result,           </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 620             RedirectAttributes ra) throws Exception {                                                    </span>
<span  style=""> 621                                                                                                          </span>
<span class="-7049584637685461961" onmouseenter="enter('-7049584637685461961');" onmouseout="out('-7049584637685461961');" style=""> 622         saveEntity(request, response, model, pathVars, id, entityForm, result, ra);                      </span>
<span  style=""> 623                                                                                                          </span>
<span class="2770382331963423086" onmouseenter="enter('2770382331963423086');" onmouseout="out('2770382331963423086');" style=""> 624         JsonResponse json = new JsonResponse(response);                                                  </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 625         if (result.hasErrors()) {                                                                        </span>
<span class="6668101882629849049" onmouseenter="enter('6668101882629849049');" onmouseout="out('6668101882629849049');" style=""> 626             populateJsonValidationErrors(entityForm, result, json);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 627         }                                                                                                </span>
<span class="-8719030961107019295" onmouseenter="enter('-8719030961107019295');" onmouseout="out('-8719030961107019295');" style=""> 628         List&lt;String&gt; dirtyList = buildDirtyList(pathVars, request, id);                                  </span>
<span class="-2397478597494600131" onmouseenter="enter('-2397478597494600131');" onmouseout="out('-2397478597494600131');" style=""> 629         if (CollectionUtils.isNotEmpty(dirtyList)) {                                                     </span>
<span class="-6863151800017638945" onmouseenter="enter('-6863151800017638945');" onmouseout="out('-6863151800017638945');" style=""> 630             json.with(&quot;dirty&quot;, dirtyList);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 631         }                                                                                                </span>
<span  style=""> 632                                                                                                          </span>
<span class="1148846903613025505" onmouseenter="enter('1148846903613025505');" onmouseout="out('1148846903613025505');" style=""> 633         ExtensionResultHolder&lt;String&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                      </span>
<span class="772761850497532920" onmouseenter="enter('772761850497532920');" onmouseout="out('772761850497532920');" style=""><abbr title=" 634         ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonResponse(response, result.hasErrors(), getSectionKey(pathVars), id, resultHolder);"> 634         ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonReðŸ”µ</abbr></span>
<span class="-7225919658162387284" onmouseenter="enter('-7225919658162387284');" onmouseout="out('-7225919658162387284');" style=""> 635         if (resultStatusType.equals(ExtensionResultStatusType.HANDLED)) {                                </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 636             return resultHolder.getResult();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 637         }                                                                                                </span>
<span  style=""> 638                                                                                                          </span>
<span class="-3901811907821215875" onmouseenter="enter('-3901811907821215875');" onmouseout="out('-3901811907821215875');" style=""> 639         return json.done();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 640     }                                                                                                    </span>
<span  style=""> 641                                                                                                          </span>
<span class="-2624067384280123527" onmouseenter="enter('-2624067384280123527');" onmouseout="out('-2624067384280123527');" style=""><abbr title=" 642     public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String id) throws ServiceException {"> 642     public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String iðŸ”µ</abbr></span>
<span class="-6199220983064020273" onmouseenter="enter('-6199220983064020273');" onmouseout="out('-6199220983064020273');" style=""> 643         List&lt;String&gt; dirtyList = new ArrayList&lt;&gt;();                                                      </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 644         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 645         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 646         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 647         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 647         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="-6293964121119142853" onmouseenter="enter('-6293964121119142853');" onmouseout="out('-6293964121119142853');" style=""> 648         ClassMetadata cmd = null;                                                                        </span>
<span class="-6100049554794336383" onmouseenter="enter('-6100049554794336383');" onmouseout="out('-6100049554794336383');" style=""> 649         Entity entity = null;                                                                            </span>
<span class="-7221558264805358950" onmouseenter="enter('-7221558264805358950');" onmouseout="out('-7221558264805358950');" style=""> 650         cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();                    </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 651         entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];           </span>
<span  style=""> 652                                                                                                          </span>
<span class="-538034338216639378" onmouseenter="enter('-538034338216639378');" onmouseout="out('-538034338216639378');" style=""> 653         for (Property p: entity.getProperties()) {                                                       </span>
<span class="-5586383415891827802" onmouseenter="enter('-5586383415891827802');" onmouseout="out('-5586383415891827802');" style=""> 654             if (p.getIsDirty()) {                                                                        </span>
<span class="-1571805809811752662" onmouseenter="enter('-1571805809811752662');" onmouseout="out('-1571805809811752662');" style=""> 655                 dirtyList.add(p.getName());                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 656             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 657         }                                                                                                </span>
<span class="7211627429904225799" onmouseenter="enter('7211627429904225799');" onmouseout="out('7211627429904225799');" style=""> 658         return dirtyList;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 659     }                                                                                                    </span>
<span  style=""> 660                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 661     /**                                                                                                  </span>
<span class="-1912365624495655250" onmouseenter="enter('-1912365624495655250');" onmouseout="out('-1912365624495655250');" style=""><abbr title=" 662      * Attempts to save the given entity. If validation is unsuccessful, it will re-render the entity form with"> 662      * Attempts to save the given entity. If validation is unsuccessful, it will re-render the entity forðŸ”µ</abbr></span>
<span class="3378821078357952120" onmouseenter="enter('3378821078357952120');" onmouseout="out('3378821078357952120');" style=""> 663      * error fields highlighted. On a successful save, it will refresh the entity page.                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 664      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 665      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 666      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 667      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 668      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 669      * @param id                                                                                         </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 670      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 671      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 672      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 673      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 674      */                                                                                                  </span>
<span class="681227659796054179" onmouseenter="enter('681227659796054179');" onmouseout="out('681227659796054179');" style=""> 675     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST)                                        </span>
<span class="2696827203115285075" onmouseenter="enter('2696827203115285075');" onmouseout="out('2696827203115285075');" style=""> 676     public String saveEntity(HttpServletRequest request, HttpServletResponse response, Model model,      </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 677             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 678             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 679             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,             </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 680             RedirectAttributes ra) throws Exception {                                                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 681         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 682         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 683         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 684         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 684         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 685         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span  style=""> 686                                                                                                          </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 687         extractDynamicFormFields(cmd, entityForm);                                                       </span>
<span  style=""> 688                                                                                                          </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 689         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 689         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="-4517703585527939334" onmouseenter="enter('-4517703585527939334');" onmouseout="out('-4517703585527939334');" style=""> 690         Entity entity = service.updateEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();    </span>
<span  style=""> 691                                                                                                          </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 692         entityFormValidator.validate(entityForm, entity, result);                                        </span>
<span  style=""> 693                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 694         if (result.hasErrors()) {                                                                        </span>
<span class="-9083492279253959347" onmouseenter="enter('-9083492279253959347');" onmouseout="out('-9083492279253959347');" style=""> 695             model.addAttribute(&quot;headerFlash&quot;, &quot;save.unsuccessful&quot;);                                      </span>
<span class="-3255113992478543295" onmouseenter="enter('-3255113992478543295');" onmouseout="out('-3255113992478543295');" style=""> 696             model.addAttribute(&quot;headerFlashAlert&quot;, true);                                                </span>
<span  style=""> 697                                                                                                          </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 698             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 698             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 699             entityForm.clearFieldsMap();                                                                 </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 700             formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);       </span>
<span  style=""> 701                                                                                                          </span>
<span class="1451551715319124344" onmouseenter="enter('1451551715319124344');" onmouseout="out('1451551715319124344');" style=""> 702             modifyEntityForm(entity, entityForm, pathVars);                                              </span>
<span  style=""> 703                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 704             model.addAttribute(&quot;entity&quot;, entity);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 705             model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                        </span>
<span  style=""> 706                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 707             setModelAttributes(model, sectionKey);                                                       </span>
<span  style=""> 708                                                                                                          </span>
<span class="858139107025117803" onmouseenter="enter('858139107025117803');" onmouseout="out('858139107025117803');" style=""> 709             return resolveAppropriateEntityView(request, model, entityForm);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710         }                                                                                                </span>
<span  style=""> 711                                                                                                          </span>
<span class="-8977665602521560288" onmouseenter="enter('-8977665602521560288');" onmouseout="out('-8977665602521560288');" style=""> 712         ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;save.successful&quot;);                                          </span>
<span  style=""> 713                                                                                                          </span>
<span class="5326436654777975784" onmouseenter="enter('5326436654777975784');" onmouseout="out('5326436654777975784');" style=""> 714         return &quot;redirect:/&quot; + sectionKey + &quot;/&quot; + id;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 715     }                                                                                                    </span>
<span  style=""> 716                                                                                                          </span>
<span class="-1036069149620696687" onmouseenter="enter('-1036069149620696687');" onmouseout="out('-1036069149620696687');" style=""> 717     protected void modifyEntityForm(final Entity entity, final EntityForm entityForm,                    </span>
<span class="-2182671422299427893" onmouseenter="enter('-2182671422299427893');" onmouseout="out('-2182671422299427893');" style=""> 718             final Map&lt;String, String&gt; pathVars) throws Exception {                                       </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 719         if (isAddRequest(entity)) {                                                                      </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 720             modifyAddEntityForm(entityForm, pathVars);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 721         } else {                                                                                         </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 722             modifyEntityForm(entityForm, pathVars);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 723         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724     }                                                                                                    </span>
<span  style=""> 725                                                                                                          </span>
<span class="7327611436230860688" onmouseenter="enter('7327611436230860688');" onmouseout="out('7327611436230860688');" style=""> 726     protected String resolveAppropriateEntityView(final HttpServletRequest request,                      </span>
<span class="7665770463560391322" onmouseenter="enter('7665770463560391322');" onmouseout="out('7665770463560391322');" style=""> 727             final Model model,                                                                           </span>
<span class="6537819747648345888" onmouseenter="enter('6537819747648345888');" onmouseout="out('6537819747648345888');" style=""> 728             final @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) {                         </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 729         if (isAjaxRequest(request)) {                                                                    </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style=""> 730             entityForm.setReadOnly();                                                                    </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style=""> 731             model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                          </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style=""> 732             model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style=""> 733             return MODAL_CONTAINER_VIEW;                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 734         } else {                                                                                         </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 735             model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                   </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 736             model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                </span>
<span class="-4487883013655706388" onmouseenter="enter('-4487883013655706388');" onmouseout="out('-4487883013655706388');" style=""> 737             return DEFAULT_CONTAINER_VIEW;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 738         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 739     }                                                                                                    </span>
<span  style=""> 740                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 741     /**                                                                                                  </span>
<span class="4876253458579857532" onmouseenter="enter('4876253458579857532');" onmouseout="out('4876253458579857532');" style=""> 742      * Attempts to remove the given entity.                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 743      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 744      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 745      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 746      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 747      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 748      * @param id                                                                                         </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 749      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 750      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 751      */                                                                                                  </span>
<span class="8293921381301703428" onmouseenter="enter('8293921381301703428');" onmouseout="out('8293921381301703428');" style=""> 752     @RequestMapping(value = &quot;/{id}/delete&quot;, method = RequestMethod.POST)                                 </span>
<span class="2313354717081876463" onmouseenter="enter('2313354717081876463');" onmouseout="out('2313354717081876463');" style=""> 753     public String removeEntity(HttpServletRequest request, HttpServletResponse response, Model model,    </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 754             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 755             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 756             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,             </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 757             RedirectAttributes ra) throws Exception {                                                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 758         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 759         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 760         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span  style=""> 761                                                                                                          </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 762         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 762         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="6624819200143935214" onmouseenter="enter('6624819200143935214');" onmouseout="out('6624819200143935214');" style=""> 763         Entity entity = service.removeEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();    </span>
<span class="-6561774320633688873" onmouseenter="enter('-6561774320633688873');" onmouseout="out('-6561774320633688873');" style=""> 764         // Removal does not normally return an Entity unless there is some validation error              </span>
<span class="-2807113977407494827" onmouseenter="enter('-2807113977407494827');" onmouseout="out('-2807113977407494827');" style=""> 765         if (entity != null) {                                                                            </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 766             entityFormValidator.validate(entityForm, entity, result);                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 767             if (result.hasErrors()) {                                                                    </span>
<span class="354313568014337940" onmouseenter="enter('354313568014337940');" onmouseout="out('354313568014337940');" style=""> 768                 // Create a flash attribute for the unsuccessful delete                                  </span>
<span class="-3408473788799892596" onmouseenter="enter('-3408473788799892596');" onmouseout="out('-3408473788799892596');" style=""> 769                 FlashMap fm = new FlashMap();                                                            </span>
<span class="-3785724779356953427" onmouseenter="enter('-3785724779356953427');" onmouseout="out('-3785724779356953427');" style=""> 770                 fm.put(&quot;headerFlash&quot;, &quot;delete.unsuccessful&quot;);                                            </span>
<span class="2000410372434500283" onmouseenter="enter('2000410372434500283');" onmouseout="out('2000410372434500283');" style=""> 771                 fm.put(&quot;headerFlashAlert&quot;, true);                                                        </span>
<span class="-216272657842661141" onmouseenter="enter('-216272657842661141');" onmouseout="out('-216272657842661141');" style=""> 772                 request.setAttribute(DispatcherServlet.OUTPUT_FLASH_MAP_ATTRIBUTE, fm);                  </span>
<span  style=""> 773                                                                                                          </span>
<span class="-9154666565283892619" onmouseenter="enter('-9154666565283892619');" onmouseout="out('-9154666565283892619');" style=""> 774                 // Re-look back up the entity so that we can return something populated                  </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 775                 PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 775                 PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, secðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""><abbr title=" 776                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 776                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData(ðŸ”µ</abbr></span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 777                 entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];   </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 778                 Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 778                 Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr,ðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 779                 entityForm.clearFieldsMap();                                                             </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 780                 formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);   </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 781                 modifyEntityForm(entityForm, pathVars);                                                  </span>
<span  style=""> 782                                                                                                          </span>
<span class="-1358530666837283115" onmouseenter="enter('-1358530666837283115');" onmouseout="out('-1358530666837283115');" style=""> 783                 return populateJsonValidationErrors(entityForm, result, new JsonResponse(response))      </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style=""> 784                         .done();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 785             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 786         }                                                                                                </span>
<span  style=""> 787                                                                                                          </span>
<span class="3611526951082120901" onmouseenter="enter('3611526951082120901');" onmouseout="out('3611526951082120901');" style=""> 788         ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;delete.successful&quot;);                                        </span>
<span class="2579818068351246488" onmouseenter="enter('2579818068351246488');" onmouseout="out('2579818068351246488');" style=""> 789         ra.addFlashAttribute(&quot;headerFlashAlert&quot;, true);                                                  </span>
<span  style=""> 790                                                                                                          </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 791         if (isAjaxRequest(request)) {                                                                    </span>
<span class="-5684384949344822714" onmouseenter="enter('-5684384949344822714');" onmouseout="out('-5684384949344822714');" style=""> 792             // redirect attributes won&#x27;t work here since ajaxredirect actually makes a new request       </span>
<span class="-9107475529968351628" onmouseenter="enter('-9107475529968351628');" onmouseout="out('-9107475529968351628');" style=""><abbr title=" 793             return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;?headerFlash=delete.successful&quot;;"> 793             return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;?headerFlash=delete.successfðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 794         } else {                                                                                         </span>
<span class="4357427724598824699" onmouseenter="enter('4357427724598824699');" onmouseout="out('4357427724598824699');" style=""> 795             return &quot;redirect:/&quot; + sectionKey;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 796         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 797     }                                                                                                    </span>
<span  style=""> 798                                                                                                          </span>
<span class="-2983794507366563158" onmouseenter="enter('-2983794507366563158');" onmouseout="out('-2983794507366563158');" style=""> 799     @RequestMapping(value = &quot;/{collectionField:.*}/details&quot;, method = RequestMethod.GET)                 </span>
<span class="-527911248282232950" onmouseenter="enter('-527911248282232950');" onmouseout="out('-527911248282232950');" style=""><abbr title=" 800     public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpServletResponse response, Model model,"> 800     public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpSeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 801             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 802             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-5250072335910309101" onmouseenter="enter('-5250072335910309101');" onmouseout="out('-5250072335910309101');" style=""> 803             @RequestParam String ids,                                                                    </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 804             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 805         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 806         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 807         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="-5225610456611199616" onmouseenter="enter('-5225610456611199616');" onmouseout="out('-5225610456611199616');" style=""><abbr title=" 808         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, sectionCrumbs, pathVars);"> 808         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""><abbr title=" 809         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 809         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDataðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 810         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style=""> 811         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style=""> 812                                                                                                          </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style=""> 813         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span class="-2120492003233088270" onmouseenter="enter('-2120492003233088270');" onmouseout="out('-2120492003233088270');" style=""> 814         ppr.setStartIndex(getStartIndex(requestParams));                                                 </span>
<span class="2736790979641523309" onmouseenter="enter('2736790979641523309');" onmouseout="out('2736790979641523309');" style=""> 815         ppr.setMaxIndex(getMaxIndex(requestParams));                                                     </span>
<span  style=""> 816                                                                                                          </span>
<span class="-8000769512056204294" onmouseenter="enter('-8000769512056204294');" onmouseout="out('-8000769512056204294');" style=""> 817         if (md instanceof BasicFieldMetadata) {                                                          </span>
<span class="-1954892043355765019" onmouseenter="enter('-1954892043355765019');" onmouseout="out('-1954892043355765019');" style=""> 818             String idProp = ((BasicFieldMetadata) md).getForeignKeyProperty();                           </span>
<span class="6288096257758990604" onmouseenter="enter('6288096257758990604');" onmouseout="out('6288096257758990604');" style=""> 819             String displayProp = ((BasicFieldMetadata) md).getForeignKeyDisplayValueProperty();          </span>
<span  style=""> 820                                                                                                          </span>
<span class="-6477100624593005266" onmouseenter="enter('-6477100624593005266');" onmouseout="out('-6477100624593005266');" style=""> 821             List&lt;String&gt; filterValues = BLCArrayUtils.asList(ids.split(FILTER_VALUE_SEPARATOR_REGEX));   </span>
<span class="3640259021720155935" onmouseenter="enter('3640259021720155935');" onmouseout="out('3640259021720155935');" style=""> 822             ppr.addFilterAndSortCriteria(new FilterAndSortCriteria(idProp, filterValues));               </span>
<span  style=""> 823                                                                                                          </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style=""> 824             DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                        </span>
<span class="-2768740094948248396" onmouseenter="enter('-2768740094948248396');" onmouseout="out('-2768740094948248396');" style=""> 825             Map&lt;String, String&gt; returnMap = new HashMap&lt;&gt;();                                             </span>
<span  style=""> 826                                                                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 827             for (Entity e : drs.getRecords()) {                                                          </span>
<span class="4979367110517822568" onmouseenter="enter('4979367110517822568');" onmouseout="out('4979367110517822568');" style=""> 828                 String id = e.getPMap().get(idProp).getValue();                                          </span>
<span class="-4946347213336092877" onmouseenter="enter('-4946347213336092877');" onmouseout="out('-4946347213336092877');" style=""> 829                 String disp = e.getPMap().get(displayProp).getDisplayValue();                            </span>
<span  style=""> 830                                                                                                          </span>
<span class="3483982845402449596" onmouseenter="enter('3483982845402449596');" onmouseout="out('3483982845402449596');" style=""> 831                 if (StringUtils.isBlank(disp)) {                                                         </span>
<span class="-2027181132953179584" onmouseenter="enter('-2027181132953179584');" onmouseout="out('-2027181132953179584');" style=""> 832                     disp = e.getPMap().get(displayProp).getValue();                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 833                 }                                                                                        </span>
<span  style=""> 834                                                                                                          </span>
<span class="-1075893121428940879" onmouseenter="enter('-1075893121428940879');" onmouseout="out('-1075893121428940879');" style=""> 835                 returnMap.put(id,  disp);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 836             }                                                                                            </span>
<span  style=""> 837                                                                                                          </span>
<span class="9157811424862351106" onmouseenter="enter('9157811424862351106');" onmouseout="out('9157811424862351106');" style=""> 838             return returnMap;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 839         }                                                                                                </span>
<span  style=""> 840                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 841         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 842     }                                                                                                    </span>
<span  style=""> 843                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 844     /**                                                                                                  </span>
<span class="7896529828316523089" onmouseenter="enter('7896529828316523089');" onmouseout="out('7896529828316523089');" style=""><abbr title=" 845      * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a list of products"> 845      * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a ðŸ”µ</abbr></span>
<span class="8702245574166025616" onmouseenter="enter('8702245574166025616');" onmouseout="out('8702245574166025616');" style=""> 846      * then this method is invoked when a user clicks on the name of the default category field.         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 847      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 848      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 849      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 850      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 851      * @param pathVars                                                                                   </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 852      * @param collectionField                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 853      * @param id                                                                                         </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 854      * @return                                                                                           </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 855      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 856      */                                                                                                  </span>
<span class="1405910210670150204" onmouseenter="enter('1405910210670150204');" onmouseout="out('1405910210670150204');" style=""> 857     @RequestMapping(value = &quot;/{collectionField:.*}/{id}/view&quot;, method = RequestMethod.GET)               </span>
<span class="-5496524556428427140" onmouseenter="enter('-5496524556428427140');" onmouseout="out('-5496524556428427140');" style=""><abbr title=" 858     public String viewCollectionItemDetails(HttpServletRequest request, HttpServletResponse response, Model model,"> 858     public String viewCollectionItemDetails(HttpServletRequest request, HttpServletResponse response, ModðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 859             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 860             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-1857511616350008386" onmouseenter="enter('-1857511616350008386');" onmouseout="out('-1857511616350008386');" style=""> 861             @PathVariable(value=&quot;id&quot;) String id) throws Exception {                                      </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 862         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 863         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 864         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title=" 865         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 865         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 866         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="2157347470680130722" onmouseenter="enter('2157347470680130722');" onmouseout="out('2157347470680130722');" style=""> 867         BasicFieldMetadata md = (BasicFieldMetadata) collectionProperty.getMetadata();                   </span>
<span  style=""> 868                                                                                                          </span>
<span class="-1856968160831305726" onmouseenter="enter('-1856968160831305726');" onmouseout="out('-1856968160831305726');" style=""><abbr title=" 869         AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeyClass(), sectionKey);"> 869         AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeðŸ”µ</abbr></span>
<span class="-151095669048618305" onmouseenter="enter('-151095669048618305');" onmouseout="out('-151095669048618305');" style=""><abbr title=" 870         String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : section.getUrl();"> 870         String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : sectiðŸ”µ</abbr></span>
<span class="4949862081138664893" onmouseenter="enter('4949862081138664893');" onmouseout="out('4949862081138664893');" style=""> 871         Map&lt;String, String&gt; varsForField = new HashMap&lt;&gt;();                                              </span>
<span class="-4429965231898090358" onmouseenter="enter('-4429965231898090358');" onmouseout="out('-4429965231898090358');" style=""> 872         varsForField.put(&quot;sectionKey&quot;, sectionUrlKey);                                                   </span>
<span class="4805235980730638518" onmouseenter="enter('4805235980730638518');" onmouseout="out('4805235980730638518');" style=""> 873         return viewEntityForm(request, response, model, varsForField, id);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 874     }                                                                                                    </span>
<span  style=""> 875                                                                                                          </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style=""> 876     @RequestMapping(                                                                                     </span>
<span class="4528666449367390600" onmouseenter="enter('4528666449367390600');" onmouseout="out('4528666449367390600');" style=""> 877             value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{tab:[0-9]+}/{tabName}&quot;,              </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style=""> 878             method = RequestMethod.POST                                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 879     )                                                                                                    </span>
<span class="1786222500639285262" onmouseenter="enter('1786222500639285262');" onmouseout="out('1786222500639285262');" style=""><abbr title=" 880     public String viewCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,"> 880     public String viewCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model mðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 881                                         @PathVariable  Map&lt;String, String&gt; pathVars,                     </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 882                                         @PathVariable(value=&quot;id&quot;) String id,                             </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 883                                         @PathVariable(value=&quot;collectionField&quot;) String collectionField,   </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style=""> 884                                         @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId, </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style=""> 885                                         @PathVariable(value=&quot;tabName&quot;) String tabName,                   </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title=" 886                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {"> 886                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throðŸ”µ</abbr></span>
<span  style=""> 887                                                                                                          </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title=" 888         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);"> 888         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 889     }                                                                                                    </span>
<span  style=""> 890                                                                                                          </span>
<span  style=""> 891                                                                                                          </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style=""> 892     @RequestMapping(                                                                                     </span>
<span class="-3329921938797888660" onmouseenter="enter('-3329921938797888660');" onmouseout="out('-3329921938797888660');" style=""> 893             value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view/{tab:[0-9]+}/{tabName}&quot;,         </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style=""> 894             method = RequestMethod.POST                                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 895     )                                                                                                    </span>
<span class="546530564983480962" onmouseenter="enter('546530564983480962');" onmouseout="out('546530564983480962');" style=""><abbr title=" 896     public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,"> 896     public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response,ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 897                                         @PathVariable  Map&lt;String, String&gt; pathVars,                     </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 898                                         @PathVariable(value=&quot;id&quot;) String id,                             </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 899                                         @PathVariable(value=&quot;collectionField&quot;) String collectionField,   </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style=""> 900                                         @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId, </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style=""> 901                                         @PathVariable(value=&quot;tabName&quot;) String tabName,                   </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title=" 902                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {"> 902                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throðŸ”µ</abbr></span>
<span  style=""> 903                                                                                                          </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title=" 904         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);"> 904         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 905     }                                                                                                    </span>
<span  style=""> 906                                                                                                          </span>
<span  style=""> 907                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 908     /**                                                                                                  </span>
<span class="1274042523848442367" onmouseenter="enter('1274042523848442367');" onmouseout="out('1274042523848442367');" style=""> 909      * Returns the records for a given collectionField filtered by a particular criteria                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 910      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 911      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 912      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 913      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 914      * @param pathVars                                                                                   </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 915      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 916      * @param requestParams                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 917      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 918      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 919      */                                                                                                  </span>
<span class="-4095443548484775059" onmouseenter="enter('-4095443548484775059');" onmouseout="out('-4095443548484775059');" style=""> 920     @RequestMapping(value = &quot;/{id}/{collectionField:.*}&quot;, method = RequestMethod.GET)                    </span>
<span class="-5889287394210369546" onmouseenter="enter('-5889287394210369546');" onmouseout="out('-5889287394210369546');" style=""><abbr title=" 921     public String getCollectionFieldRecords(HttpServletRequest request, HttpServletResponse response, Model model,"> 921     public String getCollectionFieldRecords(HttpServletRequest request, HttpServletResponse response, ModðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 922             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 923             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 924             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="3465670919255037355" onmouseenter="enter('3465670919255037355');" onmouseout="out('3465670919255037355');" style=""> 925             @RequestParam  MultiValueMap&lt;String, String&gt; requestParams) throws Exception {               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 926         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 927         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 928         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-6545915569490985196" onmouseenter="enter('-6545915569490985196');" onmouseout="out('-6545915569490985196');" style=""><abbr title=" 929         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams, sectionCrumbs, pathVars);"> 929         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams,ðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""><abbr title=" 930         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 930         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDataðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 931         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style=""> 932                                                                                                          </span>
<span class="-3734134243620930531" onmouseenter="enter('-3734134243620930531');" onmouseout="out('-3734134243620930531');" style=""> 933         ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);               </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title=" 934         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];"> 934         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span  style=""> 935                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style=""> 936         // Next, we must get the new list grid that represents this collection                           </span>
<span class="-8440278474384944243" onmouseenter="enter('-8440278474384944243');" onmouseout="out('-8440278474384944243');" style=""><abbr title=" 937         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParams, sectionKey, sectionCrumbs);"> 937         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParamsðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style=""> 938         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style=""> 939                                                                                                          </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style=""> 940         model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));       </span>
<span  style=""> 941                                                                                                          </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style=""> 942         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 943         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style=""> 944         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 945     }                                                                                                    </span>
<span  style=""> 946                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 947     /**                                                                                                  </span>
<span class="-2279175998905644242" onmouseenter="enter('-2279175998905644242');" onmouseout="out('-2279175998905644242');" style=""><abbr title=" 948      * Shows the modal dialog that is used to add an item to a given collection. There are several possible outcomes"> 948      * Shows the modal dialog that is used to add an item to a given collection. There are several possibðŸ”µ</abbr></span>
<span class="-3490572548815062734" onmouseenter="enter('-3490572548815062734');" onmouseout="out('-3490572548815062734');" style=""> 949      * of this call depending on the type of the specified collection field.                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 950      *                                                                                                   </span>
<span class="2717555647352622731" onmouseenter="enter('2717555647352622731');" onmouseout="out('2717555647352622731');" style=""> 951      * &lt;ul&gt;                                                                                              </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 952      *  &lt;li&gt;                                                                                             </span>
<span class="4930235181592711719" onmouseenter="enter('4930235181592711719');" onmouseout="out('4930235181592711719');" style=""><abbr title=" 953      *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so that the user may"> 953      *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so thaðŸ”µ</abbr></span>
<span class="-3142080293607523336" onmouseenter="enter('-3142080293607523336');" onmouseout="out('-3142080293607523336');" style=""><abbr title=" 954      *    enter information and associate the record with this collection. Used by fields such as ProductAttribute."> 954      *    enter information and associate the record with this collection. Used by fields such as ProductðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 955      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 956      *  &lt;li&gt;                                                                                             </span>
<span class="6319691685860667757" onmouseenter="enter('6319691685860667757');" onmouseout="out('6319691685860667757');" style=""><abbr title=" 957      *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and select it."> 957      *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entiðŸ”µ</abbr></span>
<span class="-8731186021492741581" onmouseenter="enter('-8731186021492741581');" onmouseout="out('-8731186021492741581');" style=""> 958      *    Used by fields such as &quot;allParentCategories&quot;.                                                  </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 959      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 960      *  &lt;li&gt;                                                                                             </span>
<span class="-6847404578833725914" onmouseenter="enter('-6847404578833725914');" onmouseout="out('-6847404578833725914');" style=""><abbr title=" 961      *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and"> 961      *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click onðŸ”µ</abbr></span>
<span class="568361472595397074" onmouseenter="enter('568361472595397074');" onmouseout="out('568361472595397074');" style=""><abbr title=" 962      *    select it. The view rendered by this is identical to basic collection (lookup), but will perform the operation"> 962      *    select it. The view rendered by this is identical to basic collection (lookup), but will perforðŸ”µ</abbr></span>
<span class="-4048066359856567222" onmouseenter="enter('-4048066359856567222');" onmouseout="out('-4048066359856567222');" style=""><abbr title=" 963      *    on an adorned field, which may carry extra meta-information about the created relationship, such as order."> 963      *    on an adorned field, which may carry extra meta-information about the created relationship, sucðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 964      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 965      *  &lt;li&gt;                                                                                             </span>
<span class="7355096557601214207" onmouseenter="enter('7355096557601214207');" onmouseout="out('7355096557601214207');" style=""><abbr title=" 966      *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and"> 966      *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on anðŸ”µ</abbr></span>
<span class="-146713903552295440" onmouseenter="enter('-146713903552295440');" onmouseout="out('-146713903552295440');" style=""><abbr title=" 967      *    select it. Once the user selects the entity, he will be presented with an empty form based on the specified"> 967      *    select it. Once the user selects the entity, he will be presented with an empty form based on tðŸ”µ</abbr></span>
<span class="7585671366133275820" onmouseenter="enter('7585671366133275820');" onmouseout="out('7585671366133275820');" style=""><abbr title=" 968      *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, which in addition"> 968      *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, whiðŸ”µ</abbr></span>
<span class="7350312284882119043" onmouseenter="enter('7350312284882119043');" onmouseout="out('7350312284882119043');" style=""> 969      *    to linking an entity, provide extra fields, such as a promotional message.                     </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 970      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 971      *  &lt;li&gt;                                                                                             </span>
<span class="8829232354049589291" onmouseenter="enter('8829232354049589291');" onmouseout="out('8829232354049589291');" style=""><abbr title=" 972      *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. This field is"> 972      *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. ðŸ”µ</abbr></span>
<span class="-8508051731153769866" onmouseenter="enter('-8508051731153769866');" onmouseout="out('-8508051731153769866');" style=""><abbr title=" 973      *    populated either from the configured map keys, or as a result of a lookup in the case of a key based on another"> 973      *    populated either from the configured map keys, or as a result of a lookup in the case of a key ðŸ”µ</abbr></span>
<span class="-6056737616128420156" onmouseenter="enter('-6056737616128420156');" onmouseout="out('-6056737616128420156');" style=""> 974      *    entity. Used by fields such as the mediaMap on a Sku.                                          </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 975      *  &lt;/li&gt;                                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 976      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 977      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 978      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 979      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 980      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 981      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 982      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 983      * @param requestParams                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 984      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 985      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 986      */                                                                                                  </span>
<span class="835275592837580694" onmouseenter="enter('835275592837580694');" onmouseout="out('835275592837580694');" style=""> 987     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.GET)                </span>
<span class="2460266594736272943" onmouseenter="enter('2460266594736272943');" onmouseout="out('2460266594736272943');" style=""><abbr title=" 988     public String showAddCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,"> 988     public String showAddCollectionItem(HttpServletRequest request, HttpServletResponse response, Model mðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 989             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 990             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style=""> 991             @PathVariable(value = &quot;collectionField&quot;) String collectionField,                             </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 992             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 993         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 994         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 995         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style=""><abbr title=" 996         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,"> 996         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style=""> 997                 sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 998         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style=""> 999         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style="">1000                                                                                                          </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style="">1001         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)        </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style="">1002                 .withFilterAndSortCriteria(getCriteria(requestParams))                                   </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style="">1003                 .withStartIndex(getStartIndex(requestParams))                                            </span>
<span class="4786121744461484155" onmouseenter="enter('4786121744461484155');" onmouseout="out('4786121744461484155');" style="">1004                 .withMaxIndex(getMaxIndex(requestParams))                                                </span>
<span class="2941692162045974129" onmouseenter="enter('2941692162045974129');" onmouseout="out('2941692162045974129');" style="">1005                 .withLastId(getLastId(requestParams))                                                    </span>
<span class="-9137331061893195290" onmouseenter="enter('-9137331061893195290');" onmouseout="out('-9137331061893195290');" style="">1006                 .withFirstId(getFirstId(requestParams))                                                  </span>
<span class="-6497878492174321892" onmouseenter="enter('-6497878492174321892');" onmouseout="out('-6497878492174321892');" style="">1007                 .withUpperCount(getUpperCount(requestParams))                                            </span>
<span class="-8373154769706308503" onmouseenter="enter('-8373154769706308503');" onmouseout="out('-8373154769706308503');" style="">1008                 .withLowerCount(getLowerCount(requestParams))                                            </span>
<span class="-1051723743320189375" onmouseenter="enter('-1051723743320189375');" onmouseout="out('-1051723743320189375');" style="">1009                 .withPageSize(getPageSize(requestParams))                                                </span>
<span class="-6582704259903712752" onmouseenter="enter('-6582704259903712752');" onmouseout="out('-6582704259903712752');" style="">1010                 .withPresentationFetch(true);                                                            </span>
<span  style="">1011                                                                                                          </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1012         if (md instanceof BasicCollectionMetadata) {                                                     </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1013             BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                  </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style="">1014             if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                  </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""><abbr title="1015                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1015                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData(ðŸ”µ</abbr></span>
<span class="-2914433993330253670" onmouseenter="enter('-2914433993330253670');" onmouseout="out('-2914433993330253670');" style=""><abbr title="1016                 // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types">1016                 // If the entity type isn&#x27;t specified, we need to determine if there are various polymorpðŸ”µ</abbr></span>
<span class="-7795450821592681641" onmouseenter="enter('-7795450821592681641');" onmouseout="out('-7795450821592681641');" style="">1017                 // for this entity.                                                                      </span>
<span class="6186895968667433501" onmouseenter="enter('6186895968667433501');" onmouseout="out('6186895968667433501');" style="">1018                 String entityType = null;                                                                </span>
<span  style="">1019                                                                                                          </span>
<span class="3580632700461537732" onmouseenter="enter('3580632700461537732');" onmouseout="out('3580632700461537732');" style="">1020                 if (requestParams.containsKey(&quot;entityType&quot;)) {                                           </span>
<span class="-1630371572733568969" onmouseenter="enter('-1630371572733568969');" onmouseout="out('-1630371572733568969');" style="">1021                     entityType = requestParams.get(&quot;entityType&quot;).get(0);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1022                 }                                                                                        </span>
<span  style="">1023                                                                                                          </span>
<span class="2600422776092116832" onmouseenter="enter('2600422776092116832');" onmouseout="out('2600422776092116832');" style="">1024                 entityType = determineEntityType(entityType, cmd);                                       </span>
<span  style="">1025                                                                                                          </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style="">1026                 if (StringUtils.isBlank(entityType)) {                                                   </span>
<span class="679217737668422196" onmouseenter="enter('679217737668422196');" onmouseout="out('679217737668422196');" style="">1027                     return getModalForBlankEntityType(request, model, sectionKey, cmd);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1028                     }                                                                                    </span>
<span  style="">1029                                                                                                          </span>
<span class="-58316621888079189" onmouseenter="enter('-58316621888079189');" onmouseout="out('-58316621888079189');" style="">1030                     ppr = ppr.withCeilingEntityClassname(entityType);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1031                 }                                                                                        </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1032         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="-8815560953057448419" onmouseenter="enter('-8815560953057448419');" onmouseout="out('-8815560953057448419');" style=""><abbr title="1033             ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionType(request,response,model,sectionKey,id,requestParams,(MapMetadata) md);">1033             ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionTypðŸ”µ</abbr></span>
<span class="6674469997589527714" onmouseenter="enter('6674469997589527714');" onmouseout="out('6674469997589527714');" style="">1034             if (result.equals(ExtensionResultStatusType.HANDLED)) {                                      </span>
<span class="1057476267973220454" onmouseenter="enter('1057476267973220454');" onmouseout="out('1057476267973220454');" style="">1035                 model.addAttribute(&quot;entityId&quot;, id);                                                      </span>
<span class="6720161805434028669" onmouseenter="enter('6720161805434028669');" onmouseout="out('6720161805434028669');" style="">1036                 model.addAttribute(&quot;sectionKey&quot;, sectionKey);                                            </span>
<span class="-2435595331613687341" onmouseenter="enter('-2435595331613687341');" onmouseout="out('-2435595331613687341');" style="">1037                 model.addAttribute(&quot;collectionField&quot;, collectionField);                                  </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="">1038                 return MODAL_CONTAINER_VIEW;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1039             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1040         }                                                                                                </span>
<span  style="">1041                                                                                                          </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style="">1042         model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));       </span>
<span  style="">1043                                                                                                          </span>
<span class="6180232744784249160" onmouseenter="enter('6180232744784249160');" onmouseout="out('6180232744784249160');" style=""><abbr title="1044         return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty, md, ppr, null, null);">1044         return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, colðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1045     }                                                                                                    </span>
<span  style="">1046                                                                                                          </span>
<span class="373770933822047642" onmouseenter="enter('373770933822047642');" onmouseout="out('373770933822047642');" style=""><abbr title="1047     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMethod.POST)">1047     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMðŸ”µ</abbr></span>
<span class="-870509305261572147" onmouseenter="enter('-870509305261572147');" onmouseout="out('-870509305261572147');" style=""><abbr title="1048     public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1048     public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1049             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1050             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1051             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1052             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1053         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1054         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1055         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1056         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1056         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1057         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1058         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1059         Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                               </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1060         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1061             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1061             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, maðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1062                     collectionField,                                                                     </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1063                     collectionItemId, responseMap);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1064         }                                                                                                </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1065         return responseMap;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1066     }                                                                                                    </span>
<span  style="">1067                                                                                                          </span>
<span class="-2220429573703069666" onmouseenter="enter('-2220429573703069666');" onmouseout="out('-2220429573703069666');" style="">1068     protected String getModalForBlankEntityType(final HttpServletRequest request,                        </span>
<span class="-5263780204247815298" onmouseenter="enter('-5263780204247815298');" onmouseout="out('-5263780204247815298');" style="">1069             final Model model, final String sectionKey, final ClassMetadata cmd) {                       </span>
<span class="-2316979209506989336" onmouseenter="enter('-2316979209506989336');" onmouseout="out('-2316979209506989336');" style="">1070         final List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());             </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style="">1071         model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                                  </span>
<span class="-7344898891916261334" onmouseenter="enter('-7344898891916261334');" onmouseout="out('-7344898891916261334');" style="">1072         model.addAttribute(&quot;viewType&quot;, &quot;modal/entityTypeSelection&quot;);                                     </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style="">1073         model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());        </span>
<span  style="">1074                                                                                                          </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style="">1075         String requestUri = request.getRequestURI();                                                     </span>
<span class="3126054482386392887" onmouseenter="enter('3126054482386392887');" onmouseout="out('3126054482386392887');" style="">1076         final String contextPath = request.getContextPath();                                             </span>
<span  style="">1077                                                                                                          </span>
<span class="1413502326105343009" onmouseenter="enter('1413502326105343009');" onmouseout="out('1413502326105343009');" style="">1078         if (!contextPath.equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(contextPath)) {                            </span>
<span class="-5812874762785975576" onmouseenter="enter('-5812874762785975576');" onmouseout="out('-5812874762785975576');" style="">1079             requestUri = requestUri.substring(contextPath.length() + 1, requestUri.length());            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1080         }                                                                                                </span>
<span  style="">1081                                                                                                          </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style="">1082         model.addAttribute(&quot;currentUri&quot;, requestUri);                                                    </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style="">1083         model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1084         setModelAttributes(model, sectionKey);                                                           </span>
<span  style="">1085                                                                                                          </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="">1086         return MODAL_CONTAINER_VIEW;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087     }                                                                                                    </span>
<span  style="">1088                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1089     /**                                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1090      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1091      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1092      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1093      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1094      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1095      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1096      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style="">1097      * @param requestParams                                                                              </span>
<span class="-4008047975326689228" onmouseenter="enter('-4008047975326689228');" onmouseout="out('-4008047975326689228');" style="">1098      * @return Json collection data                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1099      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1100      */                                                                                                  </span>
<span class="1491507797785399205" onmouseenter="enter('1491507797785399205');" onmouseout="out('1491507797785399205');" style="">1101     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize&quot;, method = RequestMethod.GET)          </span>
<span class="3394871197523978831" onmouseenter="enter('3394871197523978831');" onmouseout="out('3394871197523978831');" style=""><abbr title="1102     public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HttpServletResponse response, Model model,">1102     public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HtðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1103             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style="">1104             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style="">1105             @PathVariable(value = &quot;collectionField&quot;) String collectionField,                             </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style="">1106             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1107         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1108         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1109         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style=""><abbr title="1110         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,">1110         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style="">1111                 sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1112         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1113         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style="">1114                                                                                                          </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style="">1115         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)        </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style="">1116                 .withFilterAndSortCriteria(getCriteria(requestParams))                                   </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style="">1117                 .withStartIndex(getStartIndex(requestParams))                                            </span>
<span class="-115113180096268460" onmouseenter="enter('-115113180096268460');" onmouseout="out('-115113180096268460');" style="">1118                 .withMaxIndex(getMaxIndex(requestParams));                                               </span>
<span class="1857239787668878379" onmouseenter="enter('1857239787668878379');" onmouseout="out('1857239787668878379');" style=""><abbr title="1119         String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizeCustomCriteria()))">1119         String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizðŸ”µ</abbr></span>
<span class="8925682901439482297" onmouseenter="enter('8925682901439482297');" onmouseout="out('8925682901439482297');" style="">1120                 .toArray(String[]::new);                                                                 </span>
<span class="-226841645969872938" onmouseenter="enter('-226841645969872938');" onmouseout="out('-226841645969872938');" style="">1121         ppr = ppr.withCustomCriteria( both);                                                             </span>
<span  style="">1122                                                                                                          </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1123         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1124             ppr.setOperationTypesOverride(null);                                                         </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1125             ppr.setType(PersistencePackageRequest.Type.STANDARD);                                        </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1126             ppr.setSectionEntityField(collectionField);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1127         }                                                                                                </span>
<span  style="">1128                                                                                                          </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1129         DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                            </span>
<span  style="">1130                                                                                                          </span>
<span class="9153362413933125536" onmouseenter="enter('9153362413933125536');" onmouseout="out('9153362413933125536');" style=""><abbr title="1131         return formService.buildSelectizeCollectionInfo(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1131         return formService.buildSelectizeCollectionInfo(id, drs, collectionProperty, sectionKey, sectionCðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1132     }                                                                                                    </span>
<span  style="">1133                                                                                                          </span>
<span class="-7439222430983038453" onmouseenter="enter('-7439222430983038453');" onmouseout="out('-7439222430983038453');" style="">1134     protected String[] buildSelectizeCustomCriteria() {                                                  </span>
<span class="-4161579644301235736" onmouseenter="enter('-4161579644301235736');" onmouseout="out('-4161579644301235736');" style="">1135         return new String[]{ IS_SELECTIZE_REQUEST };                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1136     }                                                                                                    </span>
<span  style="">1137                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1138     /**                                                                                                  </span>
<span class="-7141111024633203374" onmouseenter="enter('-7141111024633203374');" onmouseout="out('-7141111024633203374');" style="">1139      * Adds the requested collection item via Selectize                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1140      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1141      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1142      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1143      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1144      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1145      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1146      * @param collectionField                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1147      * @param entityForm                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1148      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1149      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1150      */                                                                                                  </span>
<span class="4942792763487402415" onmouseenter="enter('4942792763487402415');" onmouseout="out('4942792763487402415');" style="">1151     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize-add&quot;, method = RequestMethod.POST)     </span>
<span class="8163998475300370418" onmouseenter="enter('8163998475300370418');" onmouseout="out('8163998475300370418');" style=""><abbr title="1152     public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1152     public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpSðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1153             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1154             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1155             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1156             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1156             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-3120252458037341618" onmouseenter="enter('-3120252458037341618');" onmouseout="out('-3120252458037341618');" style="">1157         Map&lt;String, Object&gt; returnVal = new HashMap&lt;&gt;();                                                 </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1158         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1159         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1160         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1161         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1161         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1162         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1163                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1164         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1165             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1166             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1167                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1168             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1169         }                                                                                                </span>
<span  style="">1170                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1171         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1171         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style="">1172         ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                           </span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1173         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1174         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1174         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span  style="">1175                                                                                                          </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1176         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1177         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1177         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1178         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1179         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">1180                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1181         if (result.hasErrors()) {                                                                        </span>
<span class="842224369260603633" onmouseenter="enter('842224369260603633');" onmouseout="out('842224369260603633');" style="">1182             returnVal.put(&quot;error&quot;, result.getFieldError());                                              </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1183             return returnVal;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1184         }                                                                                                </span>
<span  style="">1185                                                                                                          </span>
<span class="2610632867002015507" onmouseenter="enter('2610632867002015507');" onmouseout="out('2610632867002015507');" style="">1186         if (savedEntity.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                   </span>
<span class="-5383740165855607078" onmouseenter="enter('-5383740165855607078');" onmouseout="out('-5383740165855607078');" style="">1187             returnVal.put(&quot;alternateId&quot;, savedEntity.findProperty(ALTERNATE_ID_PROPERTY).getValue());    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1188         }                                                                                                </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1189         return returnVal;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1190     }                                                                                                    </span>
<span  style="">1191                                                                                                          </span>
<span class="5412920841771640365" onmouseenter="enter('5412920841771640365');" onmouseout="out('5412920841771640365');" style="">1192     protected void declareShouldIgnoreAdditionStatusFilter() {                                           </span>
<span class="-4270951653865217168" onmouseenter="enter('-4270951653865217168');" onmouseout="out('-4270951653865217168');" style=""><abbr title="1193         Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().getAdditionalProperties();">1193         Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().gðŸ”µ</abbr></span>
<span class="-3723341051420574210" onmouseenter="enter('-3723341051420574210');" onmouseout="out('-3723341051420574210');" style="">1194         additionalProperties.put(&quot;shouldIgnoreAdditionStatusFilter&quot;, true);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1195     }                                                                                                    </span>
<span  style="">1196                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1197     /**                                                                                                  </span>
<span class="1325408264830379158" onmouseenter="enter('1325408264830379158');" onmouseout="out('1325408264830379158');" style="">1198      * Adds the requested collection item                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1199      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1200      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1201      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1202      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1203      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1204      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1205      * @param collectionField                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1206      * @param entityForm                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1207      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1208      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1209      */                                                                                                  </span>
<span class="-2068929988984533631" onmouseenter="enter('-2068929988984533631');" onmouseout="out('-2068929988984533631');" style="">1210     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.POST)               </span>
<span class="-6457137423768539998" onmouseenter="enter('-6457137423768539998');" onmouseout="out('-6457137423768539998');" style=""><abbr title="1211     public String addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1211     public String addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model modelðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1212             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1213             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1214             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1215             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1215             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1216         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1217         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1218         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1219         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1219         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1220         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1221                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1222         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1223             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1224             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1225                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1226             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1227         }                                                                                                </span>
<span  style="">1228                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1229         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1229         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1230         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1231         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1231         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1232         service.clearEntityManager();                                                                    </span>
<span  style="">1233                                                                                                          </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1234         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1235         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1235         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1236         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1237         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">1238                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1239         if (result.hasErrors()) {                                                                        </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1240             FieldMetadata md = collectionProperty.getMetadata();                                         </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1241             ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                             </span>
<span class="4503162777083318611" onmouseenter="enter('4503162777083318611');" onmouseout="out('4503162777083318611');" style=""><abbr title="1242             return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty,">1242             return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey,ðŸ”µ</abbr></span>
<span class="5267635088951466475" onmouseenter="enter('5267635088951466475');" onmouseout="out('5267635088951466475');" style="">1243                     md, ppr, entityForm, savedEntity);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1244         }                                                                                                </span>
<span  style="">1245                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1246         // Next, we must get the new list grid that represents this collection                           </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1247         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1247         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1248         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style="">1249                                                                                                          </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1250         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="7250522969210652718" onmouseenter="enter('7250522969210652718');" onmouseout="out('7250522969210652718');" style="">1251         model.addAttribute(&quot;actualEntityId&quot;, id);                                                        </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1252         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1253         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254     }                                                                                                    </span>
<span  style="">1255                                                                                                          </span>
<span class="-8003545521832011894" onmouseenter="enter('-8003545521832011894');" onmouseout="out('-8003545521832011894');" style="">1256     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/addEmpty&quot;, method = RequestMethod.POST)          </span>
<span class="162700220048203938" onmouseenter="enter('162700220048203938');" onmouseout="out('162700220048203938');" style=""><abbr title="1257     public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1257     public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse reðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1258             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1259             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1260             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1261             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1261             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1262         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1263         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1264         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1265         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1265         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1266         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1267                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1268         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1269             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1270             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1271                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1272             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1273         }                                                                                                </span>
<span  style="">1274                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1275         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1275         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1276         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1276         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-5337934248855825573" onmouseenter="enter('-5337934248855825573');" onmouseout="out('-5337934248855825573');" style="">1277         entity.setIsPreAdd(true);                                                                        </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1278         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1279         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1279         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1280         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span  style="">1281                                                                                                          </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">1282         return new JsonResponse(response)                                                                </span>
<span class="-645443211281069037" onmouseenter="enter('-645443211281069037');" onmouseout="out('-645443211281069037');" style="">1283                 .with(&quot;status&quot;, &quot;complete&quot;)                                                              </span>
<span class="-7858493257692229655" onmouseenter="enter('-7858493257692229655');" onmouseout="out('-7858493257692229655');" style="">1284                 .with(&quot;id&quot;, savedEntity.findProperty(entityForm.getIdProperty()).getValue())             </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">1285                 .done();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1286     }                                                                                                    </span>
<span  style="">1287                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1288     /**                                                                                                  </span>
<span class="-6140462241686685910" onmouseenter="enter('-6140462241686685910');" onmouseout="out('-6140462241686685910');" style=""><abbr title="1289      * Builds out all of the model information needed for showing the add modal for collection items on both the initial GET">1289      * Builds out all of the model information needed for showing the add modal for collection items on bðŸ”µ</abbr></span>
<span class="9052968863197617086" onmouseenter="enter('9052968863197617086');" onmouseout="out('9052968863197617086');" style="">1290      * as well as after a POST with validation errors                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1291      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1292      * @param request                                                                                    </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1293      * @param model                                                                                      </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1294      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1295      * @param collectionField                                                                            </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style="">1296      * @param sectionKey                                                                                 </span>
<span class="-7927619294366963435" onmouseenter="enter('-7927619294366963435');" onmouseout="out('-7927619294366963435');" style="">1297      * @param collectionProperty                                                                         </span>
<span class="-5426566728726502924" onmouseenter="enter('-5426566728726502924');" onmouseout="out('-5426566728726502924');" style="">1298      * @param md                                                                                         </span>
<span class="4349163197755218506" onmouseenter="enter('4349163197755218506');" onmouseout="out('4349163197755218506');" style="">1299      * @param ppr                                                                                        </span>
<span class="2094225145376343101" onmouseenter="enter('2094225145376343101');" onmouseout="out('2094225145376343101');" style="">1300      * @return the appropriate view to display for the modal                                             </span>
<span class="450948407444547835" onmouseenter="enter('450948407444547835');" onmouseout="out('450948407444547835');" style=""><abbr title="1301      * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, EntityForm, BindingResult)}">1301      * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, StringðŸ”µ</abbr></span>
<span class="3423849059172457982" onmouseenter="enter('3423849059172457982');" onmouseout="out('3423849059172457982');" style=""><abbr title="1302      * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, MultiValueMap)}">1302      * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, StðŸ”µ</abbr></span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1303      * @throws ServiceException                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1304      */                                                                                                  </span>
<span class="-4127331421111161450" onmouseenter="enter('-4127331421111161450');" onmouseout="out('-4127331421111161450');" style=""><abbr title="1305     protected String buildAddCollectionItemModel(HttpServletRequest request, HttpServletResponse response,">1305     protected String buildAddCollectionItemModel(HttpServletRequest request, HttpServletResponse responseðŸ”µ</abbr></span>
<span class="1808182660955839449" onmouseenter="enter('1808182660955839449');" onmouseout="out('1808182660955839449');" style=""><abbr title="1306             Model model, String id, String collectionField, String sectionKey, Property collectionProperty,">1306             Model model, String id, String collectionField, String sectionKey, Property collectionPropertðŸ”µ</abbr></span>
<span class="-5972908184992702659" onmouseenter="enter('-5972908184992702659');" onmouseout="out('-5972908184992702659');" style=""><abbr title="1307             FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throws ServiceException {">1307             FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throwsðŸ”µ</abbr></span>
<span  style="">1308                                                                                                          </span>
<span class="-2054675889041043286" onmouseenter="enter('-2054675889041043286');" onmouseout="out('-2054675889041043286');" style=""><abbr title="1309         // For requests to add a new collection item include the main class that the subsequent request comes from.">1309         // For requests to add a new collection item include the main class that the subsequent request cðŸ”µ</abbr></span>
<span class="7422952884503198827" onmouseenter="enter('7422952884503198827');" onmouseout="out('7422952884503198827');" style=""><abbr title="1310         // For instance, with basic collections we know the main associated class for a fetch through the ForeignKey">1310         // For instance, with basic collections we know the main associated class for a fetch through theðŸ”µ</abbr></span>
<span class="5831142982738818001" onmouseenter="enter('5831142982738818001');" onmouseout="out('5831142982738818001');" style=""><abbr title="1311         // persistence item but map and adorned target lookups make a standard persistence request. This solution">1311         // persistence item but map and adorned target lookups make a standard persistence request. This ðŸ”µ</abbr></span>
<span class="-3910081436214830376" onmouseenter="enter('-3910081436214830376');" onmouseout="out('-3910081436214830376');" style="">1312         // fixes all cases.                                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1313         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-8007514226035577536" onmouseenter="enter('-8007514226035577536');" onmouseout="out('-8007514226035577536');" style="">1314         ppr.addCustomCriteria(&quot;owningClass=&quot; + mainClassName);                                           </span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style="">1315         ppr.setAddOperationInspect(true);                                                                </span>
<span  style="">1316                                                                                                          </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1317         if (entityForm != null) {                                                                        </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1318             entityForm.clearFieldsMap();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1319         }                                                                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1320         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1321         if (md instanceof BasicCollectionMetadata) {                                                     </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1322             BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                  </span>
<span  style="">1323                                                                                                          </span>
<span class="5473401195179812518" onmouseenter="enter('5473401195179812518');" onmouseout="out('5473401195179812518');" style=""><abbr title="1324             // When adding items to basic collections, we will sometimes show a form to persist a new record">1324             // When adding items to basic collections, we will sometimes show a form to persist a new recðŸ”µ</abbr></span>
<span class="3817220166052180028" onmouseenter="enter('3817220166052180028');" onmouseout="out('3817220166052180028');" style="">1325             // and sometimes show a list grid to allow the user to associate an existing record.         </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style="">1326             if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                  </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1327                 ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1327                 ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().geðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1328                 if (entityForm == null) {                                                                </span>
<span class="509426350308747164" onmouseenter="enter('509426350308747164');" onmouseout="out('509426350308747164');" style="">1329                     entityForm = formService.createEntityForm(collectionMetadata,sectionCrumbs);         </span>
<span class="2737056182573571703" onmouseenter="enter('2737056182573571703');" onmouseout="out('2737056182573571703');" style="">1330                     entityForm.setCeilingEntityClassname(ppr.getCeilingEntityClassname());               </span>
<span class="2710161406345740991" onmouseenter="enter('2710161406345740991');" onmouseout="out('2710161406345740991');" style="">1331                     entityForm.setEntityType(ppr.getCeilingEntityClassname());                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1332                 } else {                                                                                 </span>
<span class="-5799643084244932085" onmouseenter="enter('-5799643084244932085');" onmouseout="out('-5799643084244932085');" style="">1333                     formService.populateEntityForm(collectionMetadata, entityForm, sectionCrumbs);       </span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1334                     formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1335                 }                                                                                        </span>
<span class="-7315185064917392199" onmouseenter="enter('-7315185064917392199');" onmouseout="out('-7315185064917392199');" style=""><abbr title="1336                 formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntityClassname());">1336                 formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntitðŸ”µ</abbr></span>
<span class="1687533348183327340" onmouseenter="enter('1687533348183327340');" onmouseout="out('1687533348183327340');" style="">1337                 entityForm.getTabs().iterator().next().getIsVisible();                                   </span>
<span  style="">1338                                                                                                          </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1339                 model.addAttribute(&quot;entityForm&quot;, entityForm);                                            </span>
<span class="-2634442257361103125" onmouseenter="enter('-2634442257361103125');" onmouseout="out('-2634442257361103125');" style="">1340                 model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleAddEntity&quot;);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1341             } else {                                                                                     </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1342                 DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                    </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1343                 ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1343                 ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectðŸ”µ</abbr></span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1344                 listGrid.setPathOverride(request.getRequestURL().toString());                            </span>
<span  style="">1345                                                                                                          </span>
<span class="6493773829436488040" onmouseenter="enter('6493773829436488040');" onmouseout="out('6493773829436488040');" style=""><abbr title="1346                 if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUP.equals(fmd.getAddMethodType())) {">1346                 if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUPðŸ”µ</abbr></span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1347                     listGrid.removeAllRowActions();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1348                 }                                                                                        </span>
<span  style="">1349                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1350                 model.addAttribute(&quot;listGrid&quot;, listGrid);                                                </span>
<span class="-4615041483574305082" onmouseenter="enter('-4615041483574305082');" onmouseout="out('-4615041483574305082');" style="">1351                 model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleSelectEntity&quot;);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1352             }                                                                                            </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1353         } else if (md instanceof AdornedTargetCollectionMetadata) {                                      </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1354             AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                  </span>
<span  style="">1355                                                                                                          </span>
<span class="-4994014003685781795" onmouseenter="enter('-4994014003685781795');" onmouseout="out('-4994014003685781795');" style=""><abbr title="1356             // Even though this field represents an adorned target collection, the list we want to show in the modal">1356             // Even though this field represents an adorned target collection, the list we want to show iðŸ”µ</abbr></span>
<span class="3396745077097675731" onmouseenter="enter('3396745077097675731');" onmouseout="out('3396745077097675731');" style="">1357             // is the standard list grid for the target entity of this field                             </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1358             ppr.setOperationTypesOverride(null);                                                         </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1359             ppr.setType(PersistencePackageRequest.Type.STANDARD);                                        </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1360             ppr.setSectionEntityField(collectionField);                                                  </span>
<span  style="">1361                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1362             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1362             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span  style="">1363                                                                                                          </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1364             DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                        </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1365             ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1365             ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKðŸ”µ</abbr></span>
<span class="1884537605734649521" onmouseenter="enter('1884537605734649521');" onmouseout="out('1884537605734649521');" style="">1366             listGrid.setSubCollectionFieldName(collectionField);                                         </span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1367             listGrid.setPathOverride(request.getRequestURL().toString());                                </span>
<span class="2370419943178688476" onmouseenter="enter('2370419943178688476');" onmouseout="out('2370419943178688476');" style="">1368             listGrid.setFriendlyName(collectionMetadata.getPolymorphicEntities().getFriendlyName());     </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1369             if (entityForm == null) {                                                                    </span>
<span class="-1229292684052118628" onmouseenter="enter('-1229292684052118628');" onmouseout="out('-1229292684052118628');" style=""><abbr title="1370                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, true);">1370                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectiðŸ”µ</abbr></span>
<span class="-7486141420721649683" onmouseenter="enter('-7486141420721649683');" onmouseout="out('-7486141420721649683');" style=""><abbr title="1371                 entityForm.setCeilingEntityClassname(ppr.getAdornedList().getAdornedTargetEntityClassname());">1371                 entityForm.setCeilingEntityClassname(ppr.getAdornedList().getAdornedTargetEntityClassnameðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1372             } else {                                                                                     </span>
<span class="7685228187033982459" onmouseenter="enter('7685228187033982459');" onmouseout="out('7685228187033982459');" style=""><abbr title="1373                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectionCrumbs, true);">1373                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectioðŸ”µ</abbr></span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1374                 formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1375             }                                                                                            </span>
<span  style="">1376                                                                                                          </span>
<span class="5169338689637413329" onmouseenter="enter('5169338689637413329');" onmouseout="out('5169338689637413329');" style="">1377             listGrid.setListGridType(ListGrid.Type.ADORNED);                                             </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1378             for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                       </span>
<span class="8450559638200016101" onmouseenter="enter('8450559638200016101');" onmouseout="out('8450559638200016101');" style="">1379                 if (entry.getValue().getIsVisible()) {                                                   </span>
<span class="1657391013588898454" onmouseenter="enter('1657391013588898454');" onmouseout="out('1657391013588898454');" style="">1380                     listGrid.setListGridType(ListGrid.Type.ADORNED_WITH_FORM);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1381                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1382                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1383             }                                                                                            </span>
<span  style="">1384                                                                                                          </span>
<span class="-757286675881477752" onmouseenter="enter('-757286675881477752');" onmouseout="out('-757286675881477752');" style="">1385             // This is part of an add, so we want to be able to filter/sort the listgrid                 </span>
<span class="3421525283764936758" onmouseenter="enter('3421525283764936758');" onmouseout="out('3421525283764936758');" style="">1386             listGrid.setIsSortable(false);                                                               </span>
<span class="-2714096270635703274" onmouseenter="enter('-2714096270635703274');" onmouseout="out('-2714096270635703274');" style="">1387             listGrid.setCanFilterAndSort(true);                                                          </span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1388             listGrid.removeAllRowActions();                                                              </span>
<span  style="">1389                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1390             model.addAttribute(&quot;listGrid&quot;, listGrid);                                                    </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1391             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="-1071174233767081578" onmouseenter="enter('-1071174233767081578');" onmouseout="out('-1071174233767081578');" style="">1392             model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedSelectEntity&quot;);                                 </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1393         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1394             MapMetadata fmd = (MapMetadata) md;                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1395             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1395             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span  style="">1396                                                                                                          </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1397             if (entityForm == null) {                                                                    </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style=""><abbr title="1398                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);">1398                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id)ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1399             } else {                                                                                     </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1400                 formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);</span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1401                 formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1402             }                                                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1403             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="-892500240032703395" onmouseenter="enter('-892500240032703395');" onmouseout="out('-892500240032703395');" style="">1404             model.addAttribute(&quot;viewType&quot;, &quot;modal/mapAddEntity&quot;);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1405         }                                                                                                </span>
<span  style="">1406                                                                                                          </span>
<span class="6074380392351813368" onmouseenter="enter('6074380392351813368');" onmouseout="out('6074380392351813368');" style="">1407         // Set the parent id on the entity form                                                          </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1408         if (entityForm != null) {                                                                        </span>
<span class="-3154229542834445725" onmouseenter="enter('-3154229542834445725');" onmouseout="out('-3154229542834445725');" style="">1409             entityForm.setParentId(id);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1410         }                                                                                                </span>
<span  style="">1411                                                                                                          </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1412         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="7819166863376485578" onmouseenter="enter('7819166863376485578');" onmouseout="out('7819166863376485578');" style="">1413         model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_COLLECTION_ITEM.getType());            </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1414         model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1415         setModelAttributes(model, sectionKey);                                                           </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="">1416         return MODAL_CONTAINER_VIEW;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1417     }                                                                                                    </span>
<span  style="">1418                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1419     /**                                                                                                  </span>
<span class="3915085583429756257" onmouseenter="enter('3915085583429756257');" onmouseout="out('3915085583429756257');" style="">1420      * Shows the appropriate modal dialog to edit the selected collection item                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1421      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1422      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1423      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1424      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1425      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1426      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1427      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1428      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1429      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1430      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1431      */                                                                                                  </span>
<span class="5941881897199209931" onmouseenter="enter('5941881897199209931');" onmouseout="out('5941881897199209931');" style=""><abbr title="1432     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.GET)">1432     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequeðŸ”µ</abbr></span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style=""><abbr title="1433     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1433     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, ModeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1434             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1435             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1436             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1437             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1438             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1439         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1439         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1440                 ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1441     }                                                                                                    </span>
<span  style="">1442                                                                                                          </span>
<span class="-3777402830265989862" onmouseenter="enter('-3777402830265989862');" onmouseout="out('-3777402830265989862');" style="">1443     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.GET) </span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style=""><abbr title="1444     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1444     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, ModeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1445             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1446             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1447             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1448             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="7585768018133278114" onmouseenter="enter('7585768018133278114');" onmouseout="out('7585768018133278114');" style=""><abbr title="1449         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,">1449         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1450                 ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1451     }                                                                                                    </span>
<span  style="">1452                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1453     /**                                                                                                  </span>
<span class="6761933478321573145" onmouseenter="enter('6761933478321573145');" onmouseout="out('6761933478321573145');" style=""><abbr title="1454      * Shows the appropriate modal dialog to view the selected collection item. This will display the modal as readonly">1454      * Shows the appropriate modal dialog to view the selected collection item. This will display the modðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1455      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1456      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1457      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1458      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1459      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1460      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1461      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1462      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1463      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1464      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1465      */                                                                                                  </span>
<span class="5228464490364608791" onmouseenter="enter('5228464490364608791');" onmouseout="out('5228464490364608791');" style=""><abbr title="1466     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = RequestMethod.GET)">1466     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = ðŸ”µ</abbr></span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style=""><abbr title="1467     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1467     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1468             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1469             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1470             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1471             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1472             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="7887850161668822106" onmouseenter="enter('7887850161668822106');" onmouseout="out('7887850161668822106');" style=""><abbr title="1473         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1473         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, colleðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1474                 ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                         </span>
<span  style="">1475                                                                                                          </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1476         // Since this is a read-only view, actions don&#x27;t make sense in this context                      </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1477         EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                    </span>
<span class="7289613241506142720" onmouseenter="enter('7289613241506142720');" onmouseout="out('7289613241506142720');" style="">1478         addAuditableDisplayFields(ef);                                                                   </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1479         ef.removeAllActions();                                                                           </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1480         ef.setReadOnly();                                                                                </span>
<span  style="">1481                                                                                                          </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1482         return returnPath;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1483     }                                                                                                    </span>
<span  style="">1484                                                                                                          </span>
<span class="6858008221927215769" onmouseenter="enter('6858008221927215769');" onmouseout="out('6858008221927215769');" style=""><abbr title="1485     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view&quot;, method = RequestMethod.GET)">1485     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view&quot;, method = RequestMethod.ðŸ”µ</abbr></span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style=""><abbr title="1486     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1486     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1487             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1488             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1489             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1490             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="2521791674908842244" onmouseenter="enter('2521791674908842244');" onmouseout="out('2521791674908842244');" style=""><abbr title="1491         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,">1491         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, colleðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1492                 ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                         </span>
<span  style="">1493                                                                                                          </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1494         // Since this is a read-only view, actions don&#x27;t make sense in this context                      </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1495         EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                    </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1496         ef.removeAllActions();                                                                           </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1497         ef.setReadOnly();                                                                                </span>
<span  style="">1498                                                                                                          </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1499         return returnPath;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1500     }                                                                                                    </span>
<span  style="">1501                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1502     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1502     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="6852009337058352330" onmouseenter="enter('6852009337058352330');" onmouseout="out('6852009337058352330');" style=""><abbr title="1503             String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderType) throws ServiceException {">1503             String id, String collectionField, String collectionItemId, String alternateId, String modalHðŸ”µ</abbr></span>
<span class="-2699953653458232908" onmouseenter="enter('-2699953653458232908');" onmouseout="out('-2699953653458232908');" style=""><abbr title="1504         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId, modalHeaderType, null, null);">1504         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1505     }                                                                                                    </span>
<span  style="">1506                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1507     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1507     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="-3706011950121400951" onmouseenter="enter('-3706011950121400951');" onmouseout="out('-3706011950121400951');" style=""><abbr title="1508             String id, String collectionField, String collectionItemId, String modalHeaderType) throws ServiceException {">1508             String id, String collectionField, String collectionItemId, String modalHeaderType) throws SeðŸ”µ</abbr></span>
<span class="-6899013896128397577" onmouseenter="enter('-6899013896128397577');" onmouseout="out('-6899013896128397577');" style=""><abbr title="1509         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, null, null);">1509         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1510     }                                                                                                    </span>
<span  style="">1511                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1512     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1512     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="4852573692087282601" onmouseenter="enter('4852573692087282601');" onmouseout="out('4852573692087282601');" style=""><abbr title="1513                 String id, String collectionField, String collectionItemId, String modalHeaderType, EntityForm entityForm, Entity entity) throws ServiceException {">1513                 String id, String collectionField, String collectionItemId, String modalHeaderType, EntitðŸ”µ</abbr></span>
<span class="6580107021722154279" onmouseenter="enter('6580107021722154279');" onmouseout="out('6580107021722154279');" style=""><abbr title="1514         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, entityForm, entity);">1514         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1515     }                                                                                                    </span>
<span  style="">1516                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1517     /**                                                                                                  </span>
<span class="837861132196545598" onmouseenter="enter('837861132196545598');" onmouseout="out('837861132196545598');" style=""><abbr title="1518      * Shows the view and populates the model for updating a collection item. You can also pass in an entityform and entity">1518      * Shows the view and populates the model for updating a collection item. You can also pass in an entðŸ”µ</abbr></span>
<span class="5643306329084644224" onmouseenter="enter('5643306329084644224');" onmouseout="out('5643306329084644224');" style="">1519      * which are optional. If they are not passed in then they are automatically looked up               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1520      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1521      * @param request                                                                                    </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1522      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1523      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1524      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1525      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1526      * @param collectionItemId                                                                           </span>
<span class="-5929844173285242940" onmouseenter="enter('-5929844173285242940');" onmouseout="out('-5929844173285242940');" style="">1527      * @param modalHeaderType                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1528      * @param entityForm                                                                                 </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style="">1529      * @param entity                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1530      * @return                                                                                           </span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1531      * @throws ServiceException                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1532      */                                                                                                  </span>
<span class="-7113907340183053787" onmouseenter="enter('-7113907340183053787');" onmouseout="out('-7113907340183053787');" style="">1533     protected String showViewUpdateCollection(HttpServletRequest request,                                </span>
<span class="-8519940996091909282" onmouseenter="enter('-8519940996091909282');" onmouseout="out('-8519940996091909282');" style="">1534             Model model,                                                                                 </span>
<span class="233550986134862533" onmouseenter="enter('233550986134862533');" onmouseout="out('233550986134862533');" style="">1535             Map&lt;String, String&gt; pathVars,                                                                </span>
<span class="462404651577214798" onmouseenter="enter('462404651577214798');" onmouseout="out('462404651577214798');" style="">1536             String id,                                                                                   </span>
<span class="-5551105944774799057" onmouseenter="enter('-5551105944774799057');" onmouseout="out('-5551105944774799057');" style="">1537             String collectionField,                                                                      </span>
<span class="-7138244874257810737" onmouseenter="enter('-7138244874257810737');" onmouseout="out('-7138244874257810737');" style="">1538             String collectionItemId,                                                                     </span>
<span class="7426253478403504017" onmouseenter="enter('7426253478403504017');" onmouseout="out('7426253478403504017');" style="">1539             String alternateId,                                                                          </span>
<span class="2900696252953040190" onmouseenter="enter('2900696252953040190');" onmouseout="out('2900696252953040190');" style="">1540             String modalHeaderType,                                                                      </span>
<span class="5597094285729719755" onmouseenter="enter('5597094285729719755');" onmouseout="out('5597094285729719755');" style="">1541             EntityForm entityForm,                                                                       </span>
<span class="3632664887850253049" onmouseenter="enter('3632664887850253049');" onmouseout="out('3632664887850253049');" style="">1542             Entity entity) throws ServiceException {                                                     </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1543         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1544         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1545         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1546         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1546         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1547         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1548         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span class="-2889762407992276786" onmouseenter="enter('-2889762407992276786');" onmouseout="out('-2889762407992276786');" style="">1549         SectionCrumb nextCrumb = new SectionCrumb();                                                     </span>
<span class="4180533444018328805" onmouseenter="enter('4180533444018328805');" onmouseout="out('4180533444018328805');" style="">1550         if (md instanceof MapMetadata) {                                                                 </span>
<span class="-382349485821163458" onmouseenter="enter('-382349485821163458');" onmouseout="out('-382349485821163458');" style="">1551             nextCrumb.setSectionIdentifier(((MapMetadata) md).getValueClassName());                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1552         } else {                                                                                         </span>
<span class="1919475910220989527" onmouseenter="enter('1919475910220989527');" onmouseout="out('1919475910220989527');" style="">1553             nextCrumb.setSectionIdentifier(((CollectionMetadata) md).getCollectionCeilingEntity());      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1554         }                                                                                                </span>
<span class="3745082800889494172" onmouseenter="enter('3745082800889494172');" onmouseout="out('3745082800889494172');" style="">1555         nextCrumb.setSectionId(collectionItemId);                                                        </span>
<span class="7047611651117816234" onmouseenter="enter('7047611651117816234');" onmouseout="out('7047611651117816234');" style="">1556         if (!sectionCrumbs.contains(nextCrumb)) {                                                        </span>
<span class="-6316688126111539901" onmouseenter="enter('-6316688126111539901');" onmouseout="out('-6316688126111539901');" style="">1557             sectionCrumbs.add(nextCrumb);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1558         }                                                                                                </span>
<span  style="">1559                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1560         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1560         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1561         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1561         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getReðŸ”µ</abbr></span>
<span  style="">1562                                                                                                          </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1563         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span  style="">1564                                                                                                          </span>
<span class="4300500518149699432" onmouseenter="enter('4300500518149699432');" onmouseout="out('4300500518149699432');" style="">1565         if (md instanceof BasicCollectionMetadata &amp;&amp;                                                     </span>
<span class="3179311364823579995" onmouseenter="enter('3179311364823579995');" onmouseout="out('3179311364823579995');" style="">1566                 (((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST) ||      </span>
<span class="-5057368181444983975" onmouseenter="enter('-5057368181444983975');" onmouseout="out('-5057368181444983975');" style=""><abbr title="1567                         ((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST_EMPTY))) {">1567                         ((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST_EMðŸ”µ</abbr></span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1568             BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                  </span>
<span  style="">1569                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1570             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1570             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1571             if (entity == null) {                                                                        </span>
<span class="4597721164047448054" onmouseenter="enter('4597721164047448054');" onmouseout="out('4597721164047448054');" style=""><abbr title="1572                 entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResultSet().getRecords()[0];">1572                 entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1573             }                                                                                            </span>
<span  style="">1574                                                                                                          </span>
<span class="-7942197356638317765" onmouseenter="enter('-7942197356638317765');" onmouseout="out('-7942197356638317765');" style="">1575             String currentTabName = getCurrentTabName(pathVars, collectionMetadata);                     </span>
<span class="9017537031938626444" onmouseenter="enter('9017537031938626444');" onmouseout="out('9017537031938626444');" style=""><abbr title="1576             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetadata, entity, sectionCrumbs, currentTabName);">1576             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetaðŸ”µ</abbr></span>
<span  style="">1577                                                                                                          </span>
<span class="348957922752701667" onmouseenter="enter('348957922752701667');" onmouseout="out('348957922752701667');" style="">1578             entityForm = reinitializeEntityForm(entityForm, collectionMetadata, entity,                  </span>
<span class="-6666340752275266103" onmouseenter="enter('-6666340752275266103');" onmouseout="out('-6666340752275266103');" style="">1579                     subRecordsMap, sectionCrumbs);                                                       </span>
<span  style="">1580                                                                                                          </span>
<span class="-3892497188964586657" onmouseenter="enter('-3892497188964586657');" onmouseout="out('-3892497188964586657');" style="">1581             entityForm.removeAction(DefaultEntityFormActions.DELETE);                                    </span>
<span class="6748640999540281749" onmouseenter="enter('6748640999540281749');" onmouseout="out('6748640999540281749');" style="">1582             entityForm.removeAction(DefaultEntityFormActions.DUPLICATE);                                 </span>
<span  style="">1583                                                                                                          </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1584             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1585             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="2070483683171714322" onmouseenter="enter('2070483683171714322');" onmouseout="out('2070483683171714322');" style="">1586             model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleEditEntity&quot;);                                    </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1587         } else if (md instanceof AdornedTargetCollectionMetadata) {                                      </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1588             AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                  </span>
<span  style="">1589                                                                                                          </span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1590             if (entity == null) {                                                                        </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style=""><abbr title="1591                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,">1591                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperðŸ”µ</abbr></span>
<span class="-2961516840614790290" onmouseenter="enter('-2961516840614790290');" onmouseout="out('-2961516840614790290');" style="">1592                     collectionItemId, sectionCrumbs, alternateId).getDynamicResultSet().getRecords()[0]; </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1593             }                                                                                            </span>
<span  style="">1594                                                                                                          </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1595             boolean populateTypeAndId = true;                                                            </span>
<span class="921756716374353809" onmouseenter="enter('921756716374353809');" onmouseout="out('921756716374353809');" style=""><abbr title="1596             boolean isViewCollectionItem = ModalHeaderType.VIEW_COLLECTION_ITEM.getType().equals(modalHeaderType);">1596             boolean isViewCollectionItem = ModalHeaderType.VIEW_COLLECTION_ITEM.getType().equals(modalHeaðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1597             if (entityForm == null) {                                                                    </span>
<span class="-8902040329002931298" onmouseenter="enter('-8902040329002931298');" onmouseout="out('-8902040329002931298');" style=""><abbr title="1598                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, sectionCrumbs, false);">1598                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollecðŸ”µ</abbr></span>
<span class="-4655192855930300298" onmouseenter="enter('-4655192855930300298');" onmouseout="out('-4655192855930300298');" style="">1599                 entityForm.removeAction(DefaultAdornedEntityFormActions.Add);                            </span>
<span class="1109271490036416226" onmouseenter="enter('1109271490036416226');" onmouseout="out('1109271490036416226');" style="">1600                 entityForm.addAction(DefaultAdornedEntityFormActions.Save);                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1601             } else {                                                                                     </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1602                 entityForm.clearFieldsMap();                                                             </span>
<span class="2583214667713512490" onmouseenter="enter('2583214667713512490');" onmouseout="out('2583214667713512490');" style="">1603                 String entityType = entityForm.getEntityType();                                          </span>
<span class="-6584758178229470245" onmouseenter="enter('-6584758178229470245');" onmouseout="out('-6584758178229470245');" style=""><abbr title="1604                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entityForm, sectionCrumbs, false);">1604                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entðŸ”µ</abbr></span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style="">1605                 entityForm.setEntityType(entityType);                                                    </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1606                 populateTypeAndId = false;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1607             }                                                                                            </span>
<span  style="">1608                                                                                                          </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1609             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1610             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1610             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, maðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1611                     collectionField,                                                                     </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1612                     collectionItemId, responseMap);                                                      </span>
<span  style="">1613                                                                                                          </span>
<span class="-3972135447881278836" onmouseenter="enter('-3972135447881278836');" onmouseout="out('-3972135447881278836');" style=""><abbr title="1614             //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and Id is used.">1614             //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and ðŸ”µ</abbr></span>
<span class="-8007896595560301001" onmouseenter="enter('-8007896595560301001');" onmouseout="out('-8007896595560301001');" style=""><abbr title="1615             //It should be the entity and referenced Id of the adorned entity (not the target entity and Id).">1615             //It should be the entity and referenced Id of the adorned entity (not the target entity and ðŸ”µ</abbr></span>
<span class="316997016312344867" onmouseenter="enter('316997016312344867');" onmouseout="out('316997016312344867');" style="">1616             entityForm.setTranslationCeilingEntity(entityForm.getEntityType());                          </span>
<span class="-4512360180775881719" onmouseenter="enter('-4512360180775881719');" onmouseout="out('-4512360180775881719');" style="">1617             entityForm.setTranslationId(alternateId);                                                    </span>
<span  style="">1618                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style="">1619             ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();  </span>
<span class="-1465905251928147670" onmouseenter="enter('-1465905251928147670');" onmouseout="out('-1465905251928147670');" style="">1620             for (String field : fmd.getMaintainedAdornedTargetFields()) {                                </span>
<span class="-2821179418575098708" onmouseenter="enter('-2821179418575098708');" onmouseout="out('-2821179418575098708');" style="">1621                 if (responseMap.containsKey(field) &amp;&amp; responseMap.containsKey(&quot;autoSubmit&quot;)) {           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1622                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1623                 }                                                                                        </span>
<span class="-3390991397790942785" onmouseenter="enter('-3390991397790942785');" onmouseout="out('-3390991397790942785');" style="">1624                 Property p = cmd.getPMap().get(field);                                                   </span>
<span class="3110636146594998978" onmouseenter="enter('3110636146594998978');" onmouseout="out('3110636146594998978');" style="">1625                 if (p != null &amp;&amp; p.getMetadata() instanceof AdornedTargetCollectionMetadata) {           </span>
<span class="-1526293730221303684" onmouseenter="enter('-1526293730221303684');" onmouseout="out('-1526293730221303684');" style=""><abbr title="1626                     // Because we&#x27;re dealing with a nested adorned target collection, this particular request must act">1626                     // Because we&#x27;re dealing with a nested adorned target collection, this particular reqðŸ”µ</abbr></span>
<span class="5008429970050276114" onmouseenter="enter('5008429970050276114');" onmouseout="out('5008429970050276114');" style=""><abbr title="1627                     // directly on the first adorned target collection. Because of this, we need the actual id property">1627                     // directly on the first adorned target collection. Because of this, we need the actuðŸ”µ</abbr></span>
<span class="-7713892716328274330" onmouseenter="enter('-7713892716328274330');" onmouseout="out('-7713892716328274330');" style=""><abbr title="1628                     // from the entity that models the adorned target relationship, and not the id of the target object.">1628                     // from the entity that models the adorned target relationship, and not the id of theðŸ”µ</abbr></span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1629                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1629                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style=""><abbr title="1630                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,">1630                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, nuðŸ”µ</abbr></span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1631                             alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();        </span>
<span  style="">1632                                                                                                          </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1633                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1633                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(ðŸ”µ</abbr></span>
<span class="-6504403122086949696" onmouseenter="enter('-6504403122086949696');" onmouseout="out('-6504403122086949696');" style="">1634                             ppr.getAdornedList().getAdornedTargetEntityClassname(), sectionCrumbs);      </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1635                     listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                        </span>
<span  style="">1636                                                                                                          </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1637                     if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {       </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1638                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1638                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1639                     } else {                                                                             </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1640                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1640                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1641                     }                                                                                    </span>
<span class="2712626054905490038" onmouseenter="enter('2712626054905490038');" onmouseout="out('2712626054905490038');" style="">1642                 } else if (p != null &amp;&amp; p.getMetadata() instanceof MapMetadata) {                        </span>
<span class="-388196981394792667" onmouseenter="enter('-388196981394792667');" onmouseout="out('-388196981394792667');" style="">1643                     // See above comment for AdornedTargetCollectionMetadata                             </span>
<span class="-9194902891343883685" onmouseenter="enter('-9194902891343883685');" onmouseout="out('-9194902891343883685');" style="">1644                     MapMetadata mmd = (MapMetadata) p.getMetadata();                                     </span>
<span  style="">1645                                                                                                          </span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1646                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1646                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style=""><abbr title="1647                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,">1647                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, nuðŸ”µ</abbr></span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1648                             alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();        </span>
<span  style="">1649                                                                                                          </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1650                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1650                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(ðŸ”µ</abbr></span>
<span class="-6515044965274807025" onmouseenter="enter('-6515044965274807025');" onmouseout="out('-6515044965274807025');" style="">1651                             mmd.getTargetClass(), sectionCrumbs);                                        </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1652                     listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                        </span>
<span  style="">1653                                                                                                          </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1654                     if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {       </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1655                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1655                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1656                     } else {                                                                             </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1657                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1657                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1658                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1659                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1660             }                                                                                            </span>
<span  style="">1661                                                                                                          </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style=""><abbr title="1662             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);">1662             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndIdðŸ”µ</abbr></span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">1663             formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());       </span>
<span  style="">1664                                                                                                          </span>
<span class="7046829326366784672" onmouseenter="enter('7046829326366784672');" onmouseout="out('7046829326366784672');" style="">1665             boolean atLeastOneBasicField = false;                                                        </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1666             for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                       </span>
<span class="-3942382004211496115" onmouseenter="enter('-3942382004211496115');" onmouseout="out('-3942382004211496115');" style=""><abbr title="1667                 if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName()) &amp;&amp; !responseMap.containsKey(&quot;autoSubmit&quot;)) {">1667                 if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName(ðŸ”µ</abbr></span>
<span class="3115307772764059490" onmouseenter="enter('3115307772764059490');" onmouseout="out('3115307772764059490');" style="">1668                     atLeastOneBasicField = true;                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1669                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1670                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1671             }                                                                                            </span>
<span class="4813170790944841786" onmouseenter="enter('4813170790944841786');" onmouseout="out('4813170790944841786');" style="">1672             if (!atLeastOneBasicField) {                                                                 </span>
<span class="3364274495995556597" onmouseenter="enter('3364274495995556597');" onmouseout="out('3364274495995556597');" style="">1673                 entityForm.removeAction(DefaultEntityFormActions.SAVE);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1674             }                                                                                            </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1675             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1676             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="3009851293217081678" onmouseenter="enter('3009851293217081678');" onmouseout="out('3009851293217081678');" style="">1677             model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedEditEntity&quot;);                                   </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1678         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1679             MapMetadata fmd = (MapMetadata) md;                                                          </span>
<span  style="">1680                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1681             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1681             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1682             if (entity == null) {                                                                        </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style=""><abbr title="1683                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,">1683                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperðŸ”µ</abbr></span>
<span class="-2813813427236819301" onmouseenter="enter('-2813813427236819301');" onmouseout="out('-2813813427236819301');" style="">1684                     collectionItemId, sectionCrumbs, null).getEntity();                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1685             }                                                                                            </span>
<span  style="">1686                                                                                                          </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1687             boolean populateTypeAndId = true;                                                            </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1688             if (entityForm == null) {                                                                    </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style=""><abbr title="1689                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);">1689                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id)ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1690             } else {                                                                                     </span>
<span class="-2965751497501930249" onmouseenter="enter('-2965751497501930249');" onmouseout="out('-2965751497501930249');" style="">1691                 //save off the prior key before clearing out the fields map as it will not appear        </span>
<span class="-4459883460939835415" onmouseenter="enter('-4459883460939835415');" onmouseout="out('-4459883460939835415');" style="">1692                 //back on the saved entity                                                               </span>
<span class="-8617997777962995342" onmouseenter="enter('-8617997777962995342');" onmouseout="out('-8617997777962995342');" style="">1693                 String priorKey = entityForm.findField(&quot;priorKey&quot;).getValue();                           </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1694                 entityForm.clearFieldsMap();                                                             </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1695                 formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);</span>
<span class="-5674534809018144237" onmouseenter="enter('-5674534809018144237');" onmouseout="out('-5674534809018144237');" style="">1696                 entityForm.findField(&quot;priorKey&quot;).setValue(priorKey);                                     </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1697                 populateTypeAndId = false;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1698             }                                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1699             try {                                                                                        </span>
<span class="1682170733642187652" onmouseenter="enter('1682170733642187652');" onmouseout="out('1682170733642187652');" style="">1700                 if (StringUtils.isNotEmpty(fmd.getToOneTargetProperty())) {                              </span>
<span class="-5619455120098479761" onmouseenter="enter('-5619455120098479761');" onmouseout="out('-5619455120098479761');" style=""><abbr title="1701                 entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredField(fmd.getToOneTargetProperty()).getType().getName());">1701                 entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1702                 }                                                                                        </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1703             } catch (Exception e) {                                                                      </span>
<span class="4149062910666573697" onmouseenter="enter('4149062910666573697');" onmouseout="out('4149062910666573697');" style="">1704                 LOG.error(e);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1705             }                                                                                            </span>
<span class="-1018820723400133408" onmouseenter="enter('-1018820723400133408');" onmouseout="out('-1018820723400133408');" style=""><abbr title="1706             String entityId = (fmd.getToOneTargetProperty().equals(&quot;&quot;) ? &quot;id&quot; : fmd.getToOneTargetProperty() + &quot;.id&quot;);">1706             String entityId = (fmd.getToOneTargetProperty().equals(&quot;&quot;) ? &quot;id&quot; : fmd.getToOneTargetPropertðŸ”µ</abbr></span>
<span class="423419420192712450" onmouseenter="enter('423419420192712450');" onmouseout="out('423419420192712450');" style="">1707             entityForm.setTranslationId(entity.getPMap().get(entityId).getValue());                      </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style=""><abbr title="1708             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);">1708             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndIdðŸ”µ</abbr></span>
<span class="-7934209705949108459" onmouseenter="enter('-7934209705949108459');" onmouseout="out('-7934209705949108459');" style="">1709             formService.populateMapEntityFormFields(entityForm, entity);                                 </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style=""><abbr title="1710             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);">1710             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndIdðŸ”µ</abbr></span>
<span class="-7934209705949108459" onmouseenter="enter('-7934209705949108459');" onmouseout="out('-7934209705949108459');" style="">1711             formService.populateMapEntityFormFields(entityForm, entity);                                 </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1712             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1713             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="5184741693677662709" onmouseenter="enter('5184741693677662709');" onmouseout="out('5184741693677662709');" style="">1714             model.addAttribute(&quot;viewType&quot;, &quot;modal/mapEditEntity&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1715         }                                                                                                </span>
<span  style="">1716                                                                                                          </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1717         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="5715532112666019496" onmouseenter="enter('5715532112666019496');" onmouseout="out('5715532112666019496');" style="">1718         model.addAttribute(&quot;modalHeaderType&quot;, modalHeaderType);                                          </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1719         model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1720         setModelAttributes(model, sectionKey);                                                           </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="">1721         return MODAL_CONTAINER_VIEW;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1722     }                                                                                                    </span>
<span  style="">1723                                                                                                          </span>
<span class="-6629135688250429856" onmouseenter="enter('-6629135688250429856');" onmouseout="out('-6629135688250429856');" style="">1724     protected EntityForm reinitializeEntityForm(final EntityForm entityForm,                             </span>
<span class="2488527282562212871" onmouseenter="enter('2488527282562212871');" onmouseout="out('2488527282562212871');" style="">1725             final ClassMetadata collectionMetadata,                                                      </span>
<span class="6244041270191906475" onmouseenter="enter('6244041270191906475');" onmouseout="out('6244041270191906475');" style="">1726             final Entity entity,                                                                         </span>
<span class="4210642227221008869" onmouseenter="enter('4210642227221008869');" onmouseout="out('4210642227221008869');" style="">1727             final Map&lt;String, DynamicResultSet&gt; subRecordsMap,                                           </span>
<span class="7695373887778905827" onmouseenter="enter('7695373887778905827');" onmouseout="out('7695373887778905827');" style="">1728             final List&lt;SectionCrumb&gt; sectionCrumbs) throws ServiceException {                            </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1729         if (entityForm == null) {                                                                        </span>
<span class="5007761642077021691" onmouseenter="enter('5007761642077021691');" onmouseout="out('5007761642077021691');" style="">1730             return formService                                                                           </span>
<span class="2427987523723463928" onmouseenter="enter('2427987523723463928');" onmouseout="out('2427987523723463928');" style="">1731                     .createEntityForm(collectionMetadata, entity, subRecordsMap, sectionCrumbs);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1732         }                                                                                                </span>
<span  style="">1733                                                                                                          </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1734         entityForm.clearFieldsMap();                                                                     </span>
<span class="524385531586817703" onmouseenter="enter('524385531586817703');" onmouseout="out('524385531586817703');" style="">1735         formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm,            </span>
<span class="2971672777452209099" onmouseenter="enter('2971672777452209099');" onmouseout="out('2971672777452209099');" style="">1736                 sectionCrumbs);                                                                          </span>
<span class="5496760487980360743" onmouseenter="enter('5496760487980360743');" onmouseout="out('5496760487980360743');" style="">1737         //remove all the actions since we&#x27;re not trying to redisplay them on the form                    </span>
<span class="-6469844840195102556" onmouseenter="enter('-6469844840195102556');" onmouseout="out('-6469844840195102556');" style="">1738         entityForm.removeAllActions();                                                                   </span>
<span  style="">1739                                                                                                          </span>
<span class="6548609876597156982" onmouseenter="enter('6548609876597156982');" onmouseout="out('6548609876597156982');" style="">1740         return entityForm;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1741     }                                                                                                    </span>
<span  style="">1742                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1743     /**                                                                                                  </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1744      * Updates the specified collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1745      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1746      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1747      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1748      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1749      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1750      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1751      * @param collectionField                                                                            </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1752      * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1752      * @param collectionItemId the collection primary key value (in the case of adorned target collectionðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1753      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1754      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1755      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1756      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1757      */                                                                                                  </span>
<span class="1690395709289479208" onmouseenter="enter('1690395709289479208');" onmouseout="out('1690395709289479208');" style="">1758     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.POST)</span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style=""><abbr title="1759     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1759     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1760             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1761             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1762             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1763             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1764             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                   </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1765             BindingResult result) throws Exception {                                                     </span>
<span class="454845068344591329" onmouseenter="enter('454845068344591329');" onmouseout="out('454845068344591329');" style=""><abbr title="1766         return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, entityForm, null, result);">1766         return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1767     }                                                                                                    </span>
<span  style="">1768                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1769     /**                                                                                                  </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1770      * Updates the specified collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1771      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1772      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1773      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1774      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1775      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1776      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1777      * @param collectionField                                                                            </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1778      * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1778      * @param collectionItemId the collection primary key value (in the case of adorned target collectionðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1779      * @param entityForm                                                                                 </span>
<span class="4031667150854181086" onmouseenter="enter('4031667150854181086');" onmouseout="out('4031667150854181086');" style=""><abbr title="1780      * @param alternateId in the case of adorned target collections, this is the primary key value of the collection member">1780      * @param alternateId in the case of adorned target collections, this is the primary key value of theðŸ”µ</abbr></span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1781      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1782      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1783      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1784      */                                                                                                  </span>
<span class="6716233350399381715" onmouseenter="enter('6716233350399381715');" onmouseout="out('6716233350399381715');" style=""><abbr title="1785     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.POST)">1785     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequeðŸ”µ</abbr></span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style=""><abbr title="1786     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1786     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1787             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1788             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1789             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1790             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1791             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                   </span>
<span class="-5366992345424767315" onmouseenter="enter('-5366992345424767315');" onmouseout="out('-5366992345424767315');" style="">1792             @PathVariable(value=&quot;alternateId&quot;) String alternateId,                                       </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1793             BindingResult result) throws Exception {                                                     </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1794         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1795         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1796         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1797         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1797         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1798         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1799                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1800         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1800         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1801         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1801         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1802         service.clearEntityManager();                                                                    </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1803         // First, we must save the collection entity                                                     </span>
<span class="3262117580653454816" onmouseenter="enter('3262117580653454816');" onmouseout="out('3262117580653454816');" style=""><abbr title="1804         PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, collectionItemId, alternateId, sectionCrumbs);">1804         PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1805         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1806         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">1807                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1808         if (result.hasErrors()) {                                                                        </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1809             return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1809             return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemðŸ”µ</abbr></span>
<span class="-1009973048758571460" onmouseenter="enter('-1009973048758571460');" onmouseout="out('-1009973048758571460');" style="">1810                     ModalHeaderType.UPDATE_COLLECTION_ITEM.getType(), entityForm, savedEntity);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1811         }                                                                                                </span>
<span  style="">1812                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1813         // Next, we must get the new list grid that represents this collection                           </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1814         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1815         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1815         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span  style="">1816                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1817         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1818         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1819         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1820         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1821     }                                                                                                    </span>
<span  style="">1822                                                                                                          </span>
<span class="-2715204734461845190" onmouseenter="enter('-2715204734461845190');" onmouseout="out('-2715204734461845190');" style=""><abbr title="1823     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMethod.POST)">1823     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMetðŸ”µ</abbr></span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">1824     public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,    </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">1825             HttpServletResponse response, Model model,                                                   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1826             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1827             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1828             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1829             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="6458961487045284345" onmouseenter="enter('6458961487045284345');" onmouseout="out('6458961487045284345');" style="">1830             @RequestParam(value=&quot;newSequence&quot;) String newSequence) throws Exception {                    </span>
<span class="-6477101312884008952" onmouseenter="enter('-6477101312884008952');" onmouseout="out('-6477101312884008952');" style=""><abbr title="1831         return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collectionItemId, newSequence, null);">1831         return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1832     }                                                                                                    </span>
<span  style="">1833                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1834     /**                                                                                                  </span>
<span class="-7447609122613552365" onmouseenter="enter('-7447609122613552365');" onmouseout="out('-7447609122613552365');" style=""><abbr title="1835      * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target collections">1835      * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target colðŸ”µ</abbr></span>
<span class="5163972519999742424" onmouseenter="enter('5163972519999742424');" onmouseout="out('5163972519999742424');" style=""><abbr title="1836      * where a sort field is specified -- any other invocation is incorrect and will result in an exception.">1836      * where a sort field is specified -- any other invocation is incorrect and will result in an exceptiðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1837      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1838      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1839      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1840      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1841      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1842      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1843      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1844      * @param collectionItemId                                                                           </span>
<span class="8542418631474543845" onmouseenter="enter('8542418631474543845');" onmouseout="out('8542418631474543845');" style="">1845      * @return an object explaining the state of the operation                                           </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1846      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1847      */                                                                                                  </span>
<span class="1279723180837283801" onmouseenter="enter('1279723180837283801');" onmouseout="out('1279723180837283801');" style=""><abbr title="1848     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, method = RequestMethod.POST)">1848     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, methoðŸ”µ</abbr></span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">1849     public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,    </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">1850             HttpServletResponse response, Model model,                                                   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1851             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1852             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1853             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1854             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="6744719432735700494" onmouseenter="enter('6744719432735700494');" onmouseout="out('6744719432735700494');" style="">1855             @RequestParam(value=&quot;newSequence&quot;) String newSequence,                                       </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1856             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1857         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1858         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1859         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1860         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1860         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1861         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1862         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style="">1863                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1864         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1864         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="6971869165316675737" onmouseenter="enter('6971869165316675737');" onmouseout="out('6971869165316675737');" style="">1865         ppr.addCustomCriteria(&quot;reorderParentEntityFetch&quot;);                                               </span>
<span  style="">1866                                                                                                          </span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1867         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1867         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getReðŸ”µ</abbr></span>
<span  style="">1868                                                                                                          </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1869         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span  style="">1870                                                                                                          </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1871         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1872             AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                  </span>
<span class="-895931586936599512" onmouseenter="enter('-895931586936599512');" onmouseout="out('-895931586936599512');" style="">1873             AdornedTargetList atl = ppr.getAdornedList();                                                </span>
<span  style="">1874                                                                                                          </span>
<span class="4013888246220668443" onmouseenter="enter('4013888246220668443');" onmouseout="out('4013888246220668443');" style="">1875             // Get an entity form for the entity                                                         </span>
<span class="4144133685169635892" onmouseenter="enter('4144133685169635892');" onmouseout="out('4144133685169635892');" style=""><abbr title="1876             EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, false);">1876             EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, falseðŸ”µ</abbr></span>
<span class="985151044669117950" onmouseenter="enter('985151044669117950');" onmouseout="out('985151044669117950');" style=""><abbr title="1877             Entity entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,">1877             Entity entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProðŸ”µ</abbr></span>
<span class="-4422231398086337832" onmouseenter="enter('-4422231398086337832');" onmouseout="out('-4422231398086337832');" style=""><abbr title="1878                     collectionItemId, sectionCrumbs, alternateId, new String[]{&quot;reorderChildEntityFetch&quot;})">1878                     collectionItemId, sectionCrumbs, alternateId, new String[]{&quot;reorderChildEntityFetch&quot;}ðŸ”µ</abbr></span>
<span class="-7850695853310911802" onmouseenter="enter('-7850695853310911802');" onmouseout="out('-7850695853310911802');" style="">1879                     .getDynamicResultSet().getRecords()[0];                                              </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">1880             formService.populateEntityFormFields(entityForm, entity);                                    </span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">1881             formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());       </span>
<span  style="">1882                                                                                                          </span>
<span class="-3124065187694573478" onmouseenter="enter('-3124065187694573478');" onmouseout="out('-3124065187694573478');" style=""><abbr title="1883             // Set the new sequence (note that it will come in 0-indexed but the persistence module expects 1-indexed)">1883             // Set the new sequence (note that it will come in 0-indexed but the persistence module expecðŸ”µ</abbr></span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">1884             int sequenceValue = Integer.parseInt(newSequence) + 1;                                       </span>
<span class="2556919505341751863" onmouseenter="enter('2556919505341751863');" onmouseout="out('2556919505341751863');" style="">1885             Field field = entityForm.findField(atl.getSortField());                                      </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">1886             field.setValue(String.valueOf(sequenceValue));                                               </span>
<span  style="">1887                                                                                                          </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1888             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="-5669538829732150992" onmouseenter="enter('-5669538829732150992');" onmouseout="out('-5669538829732150992');" style=""><abbr title="1889             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, alternateId, sectionCrumbs);">1889             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMðŸ”µ</abbr></span>
<span class="-6209319883391535282" onmouseenter="enter('-6209319883391535282');" onmouseout="out('-6209319883391535282');" style="">1890             Property displayOrder = persistenceResponse.getEntity().findProperty(atl.getSortField());    </span>
<span  style="">1891                                                                                                          </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">1892             responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                             </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">1893             responseMap.put(&quot;field&quot;, collectionField);                                                   </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">1894             responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());   </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1895             return responseMap;                                                                          </span>
<span class="-3117865694677500361" onmouseenter="enter('-3117865694677500361');" onmouseout="out('-3117865694677500361');" style="">1896         } else if (md instanceof BasicCollectionMetadata) {                                              </span>
<span class="-8492572584837651214" onmouseenter="enter('-8492572584837651214');" onmouseout="out('-8492572584837651214');" style="">1897             BasicCollectionMetadata cd = (BasicCollectionMetadata) md;                                   </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1898             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="-2546552603594507996" onmouseenter="enter('-2546552603594507996');" onmouseout="out('-2546552603594507996');" style=""><abbr title="1899             Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1899             Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResulðŸ”µ</abbr></span>
<span  style="">1900                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1901             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1901             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="-2818097934143266938" onmouseenter="enter('-2818097934143266938');" onmouseout="out('-2818097934143266938');" style="">1902             EntityForm entityForm = formService.createEntityForm(collectionMetadata, sectionCrumbs);     </span>
<span class="2758594966987635918" onmouseenter="enter('2758594966987635918');" onmouseout="out('2758594966987635918');" style=""><abbr title="1903             boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1903             boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPðŸ”µ</abbr></span>
<span class="8701882977725374051" onmouseenter="enter('8701882977725374051');" onmouseout="out('8701882977725374051');" style="">1904             if(listGridReadOnly){                                                                        </span>
<span class="2312726484157116526" onmouseenter="enter('2312726484157116526');" onmouseout="out('2312726484157116526');" style="">1905                         throw new SecurityServiceException();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1906             }                                                                                            </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">1907             if (!StringUtils.isEmpty(cd.getSortProperty())) {                                            </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1908                 Field f = new Field()                                                                    </span>
<span class="-2538063021289876061" onmouseenter="enter('-2538063021289876061');" onmouseout="out('-2538063021289876061');" style="">1909                         .withName(cd.getSortProperty())                                                  </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1910                         .withFieldType(SupportedFieldType.HIDDEN.toString());                            </span>
<span class="5054103958554301667" onmouseenter="enter('5054103958554301667');" onmouseout="out('5054103958554301667');" style="">1911                 entityForm.addHiddenField(mainMetadata, f);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1912             }                                                                                            </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">1913             formService.populateEntityFormFields(entityForm, entity);                                    </span>
<span  style="">1914                                                                                                          </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">1915             if (!StringUtils.isEmpty(cd.getSortProperty())) {                                            </span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">1916                 int sequenceValue = Integer.parseInt(newSequence) + 1;                                   </span>
<span class="-3733495482183042291" onmouseenter="enter('-3733495482183042291');" onmouseout="out('-3733495482183042291');" style="">1917                 Field field = entityForm.findField(cd.getSortProperty());                                </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">1918                 field.setValue(String.valueOf(sequenceValue));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1919             }                                                                                            </span>
<span  style="">1920                                                                                                          </span>
<span class="3923458830762383909" onmouseenter="enter('3923458830762383909');" onmouseout="out('3923458830762383909');" style=""><abbr title="1921             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, sectionCrumbs);">1921             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMðŸ”µ</abbr></span>
<span class="-792608105002716351" onmouseenter="enter('-792608105002716351');" onmouseout="out('-792608105002716351');" style="">1922             Property displayOrder = persistenceResponse.getEntity().findProperty(cd.getSortProperty());  </span>
<span  style="">1923                                                                                                          </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">1924             responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                             </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">1925             responseMap.put(&quot;field&quot;, collectionField);                                                   </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">1926             responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());   </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1927             return responseMap;                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1928         } else {                                                                                         </span>
<span class="7542199431919878786" onmouseenter="enter('7542199431919878786');" onmouseout="out('7542199431919878786');" style=""><abbr title="1929             throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collection fields.&quot;);">1929             throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1930         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1931     }                                                                                                    </span>
<span  style="">1932                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1933     /**                                                                                                  </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">1934      * Removes the requested collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1935      *                                                                                                   </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="1936      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">1936      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collectionðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">1937      * map collection.                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1938      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1939      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1940      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1941      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1942      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1943      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1944      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1945      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1946      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1947      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1948      */                                                                                                  </span>
<span class="6340503715634976611" onmouseenter="enter('6340503715634976611');" onmouseout="out('6340503715634976611');" style=""><abbr title="1949     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/delete&quot;, method = RequestMethod.POST)">1949     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/delete&quot;, method = RequestMethoðŸ”µ</abbr></span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style=""><abbr title="1950     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1950     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1951             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1952             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1953             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1954             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="6845453766150325497" onmouseenter="enter('6845453766150325497');" onmouseout="out('6845453766150325497');" style=""><abbr title="1955         return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, null);">1955         return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1956     }                                                                                                    </span>
<span  style="">1957                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1958     /**                                                                                                  </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">1959      * Removes the requested collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1960      *                                                                                                   </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="1961      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">1961      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collectionðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">1962      * map collection.                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1963      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1964      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1965      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1966      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1967      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1968      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1969      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1970      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1971      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1972      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1973      */                                                                                                  </span>
<span class="-4053134536146029119" onmouseenter="enter('-4053134536146029119');" onmouseout="out('-4053134536146029119');" style=""><abbr title="1974     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method = RequestMethod.POST)">1974     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method ðŸ”µ</abbr></span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style=""><abbr title="1975     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1975     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1976             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1977             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1978             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1979             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1980             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1981         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1982         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1983         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1984         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1984         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1985         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1986                                                                                                          </span>
<span class="-6408221600487262974" onmouseenter="enter('-6408221600487262974');" onmouseout="out('-6408221600487262974');" style="">1987         String priorKey = request.getParameter(&quot;key&quot;);                                                   </span>
<span  style="">1988                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1989         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1989         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1990         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1991         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1991         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1992         service.clearEntityManager();                                                                    </span>
<span class="8107528363762278945" onmouseenter="enter('8107528363762278945');" onmouseout="out('8107528363762278945');" style="">1993         // First, we must remove the collection entity                                                   </span>
<span class="-8185015406879465962" onmouseenter="enter('-8185015406879465962');" onmouseout="out('-8185015406879465962');" style=""><abbr title="1994         PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectionProperty, entity, collectionItemId, alternateId, priorKey, sectionCrumbs);">1994         PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectðŸ”µ</abbr></span>
<span class="4740780245520344929" onmouseenter="enter('4740780245520344929');" onmouseout="out('4740780245520344929');" style=""><abbr title="1995         if (persistenceResponse.getEntity() != null &amp;&amp; persistenceResponse.getEntity().isValidationFailure()) {">1995         if (persistenceResponse.getEntity() != null &amp;&amp; persistenceResponse.getEntity().isValidationFailurðŸ”µ</abbr></span>
<span class="-1907173364280213129" onmouseenter="enter('-1907173364280213129');" onmouseout="out('-1907173364280213129');" style="">1996             String error = &quot;There was an error removing the whatever&quot;;                                   </span>
<span class="6694909055776458558" onmouseenter="enter('6694909055776458558');" onmouseout="out('6694909055776458558');" style="">1997             if (MapUtils.isNotEmpty(persistenceResponse.getEntity().getPropertyValidationErrors())) {    </span>
<span class="2653002805011151778" onmouseenter="enter('2653002805011151778');" onmouseout="out('2653002805011151778');" style="">1998                 // If we failed, we&#x27;ll return some JSON with the first error                             </span>
<span class="6101527636004026445" onmouseenter="enter('6101527636004026445');" onmouseout="out('6101527636004026445');" style=""><abbr title="1999                 error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator().next().get(0);">1999                 error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator()ðŸ”µ</abbr></span>
<span class="3589903040125146199" onmouseenter="enter('3589903040125146199');" onmouseout="out('3589903040125146199');" style=""><abbr title="2000             } else if (CollectionUtils.isNotEmpty(persistenceResponse.getEntity().getGlobalValidationErrors())) {">2000             } else if (CollectionUtils.isNotEmpty(persistenceResponse.getEntity().getGlobalValidationErroðŸ”µ</abbr></span>
<span class="-8002349788440125315" onmouseenter="enter('-8002349788440125315');" onmouseout="out('-8002349788440125315');" style="">2001                 error = persistenceResponse.getEntity().getGlobalValidationErrors().get(0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2002             }                                                                                            </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">2003             return new JsonResponse(response)                                                            </span>
<span class="4764127484129551096" onmouseenter="enter('4764127484129551096');" onmouseout="out('4764127484129551096');" style="">2004                 .with(&quot;status&quot;, &quot;error&quot;)                                                                 </span>
<span class="-4778619806303294332" onmouseenter="enter('-4778619806303294332');" onmouseout="out('-4778619806303294332');" style="">2005                 .with(&quot;message&quot;, BLCMessageUtils.getMessage(error))                                      </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">2006                 .done();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2007         }                                                                                                </span>
<span  style="">2008                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">2009         // Next, we must get the new list grid that represents this collection                           </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">2010         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="2011         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">2011         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span  style="">2012                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">2013         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">2014         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">2015         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">2016         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2017     }                                                                                                    </span>
<span  style="">2018                                                                                                          </span>
<span class="-1722269672251008380" onmouseenter="enter('-1722269672251008380');" onmouseout="out('-1722269672251008380');" style="">2019     public void addAuditableDisplayFields(EntityForm entityForm) {                                       </span>
<span class="2220665039639111541" onmouseenter="enter('2220665039639111541');" onmouseout="out('2220665039639111541');" style="">2020         Field createdBy = entityForm.findField(&quot;auditable.createdBy&quot;);                                   </span>
<span class="-1310269621989930827" onmouseenter="enter('-1310269621989930827');" onmouseout="out('-1310269621989930827');" style="">2021         if (createdBy != null &amp;&amp; createdBy.getValue() != null) {                                         </span>
<span class="3065344382927201496" onmouseenter="enter('3065344382927201496');" onmouseout="out('3065344382927201496');" style="">2022             addAuditableDisplayField(entityForm, createdBy);                                             </span>
<span  style="">2023                                                                                                          </span>
<span class="-8232178899610643805" onmouseenter="enter('-8232178899610643805');" onmouseout="out('-8232178899610643805');" style="">2024             createdBy.setIsVisible(false);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2025         }                                                                                                </span>
<span class="1393544913931451876" onmouseenter="enter('1393544913931451876');" onmouseout="out('1393544913931451876');" style="">2026         Field updatedBy = entityForm.findField(&quot;auditable.updatedBy&quot;);                                   </span>
<span class="362865388069983596" onmouseenter="enter('362865388069983596');" onmouseout="out('362865388069983596');" style="">2027         if (updatedBy != null &amp;&amp; updatedBy.getValue() != null) {                                         </span>
<span class="-892302887107162271" onmouseenter="enter('-892302887107162271');" onmouseout="out('-892302887107162271');" style="">2028             addAuditableDisplayField(entityForm, updatedBy);                                             </span>
<span  style="">2029                                                                                                          </span>
<span class="6398063041947851488" onmouseenter="enter('6398063041947851488');" onmouseout="out('6398063041947851488');" style="">2030             updatedBy.setIsVisible(false);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2031         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2032     }                                                                                                    </span>
<span  style="">2033                                                                                                          </span>
<span class="4984267825623541739" onmouseenter="enter('4984267825623541739');" onmouseout="out('4984267825623541739');" style="">2034     private void addAuditableDisplayField(EntityForm entityForm, Field userField) {                      </span>
<span class="-4635466229336929139" onmouseenter="enter('-4635466229336929139');" onmouseout="out('-4635466229336929139');" style="">2035         Field displayField = buildAuditableDisplayField(userField);                                      </span>
<span  style="">2036                                                                                                          </span>
<span class="-3510960703864117903" onmouseenter="enter('-3510960703864117903');" onmouseout="out('-3510960703864117903');" style="">2037         AdminUser user = adminUserDao.readAdminUserById(Long.parseLong(userField.getValue()));           </span>
<span class="-2749914300638269457" onmouseenter="enter('-2749914300638269457');" onmouseout="out('-2749914300638269457');" style="">2038         String userName = user == null ? null : user.getName();                                          </span>
<span class="-519467923242361473" onmouseenter="enter('-519467923242361473');" onmouseout="out('-519467923242361473');" style="">2039         displayField.setValue(userName);                                                                 </span>
<span  style="">2040                                                                                                          </span>
<span class="2796866146572271884" onmouseenter="enter('2796866146572271884');" onmouseout="out('2796866146572271884');" style="">2041         FieldGroup auditGroup = entityForm.findGroup(&quot;AdminAuditable_Audit&quot;);                            </span>
<span class="442119087406556402" onmouseenter="enter('442119087406556402');" onmouseout="out('442119087406556402');" style="">2042         if (auditGroup != null) {                                                                        </span>
<span class="2790071812155889083" onmouseenter="enter('2790071812155889083');" onmouseout="out('2790071812155889083');" style="">2043             auditGroup.addField(displayField);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2044         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2045     }                                                                                                    </span>
<span  style="">2046                                                                                                          </span>
<span class="-898012728924165157" onmouseenter="enter('-898012728924165157');" onmouseout="out('-898012728924165157');" style="">2047     private Field buildAuditableDisplayField(Field auditableField) {                                     </span>
<span class="7586031541837577475" onmouseenter="enter('7586031541837577475');" onmouseout="out('7586031541837577475');" style="">2048         return new Field().withFieldType(SupportedFieldType.STRING.toString())                           </span>
<span class="-5983163062967947616" onmouseenter="enter('-5983163062967947616');" onmouseout="out('-5983163062967947616');" style="">2049                 .withName(auditableField.getName() + &quot;Display&quot;)                                          </span>
<span class="-3810520855500417343" onmouseenter="enter('-3810520855500417343');" onmouseout="out('-3810520855500417343');" style="">2050                 .withFriendlyName(auditableField.getFriendlyName())                                      </span>
<span class="-2087540063707551713" onmouseenter="enter('-2087540063707551713');" onmouseout="out('-2087540063707551713');" style="">2051                 .withOrder(auditableField.getOrder())                                                    </span>
<span class="3252055162848788175" onmouseenter="enter('3252055162848788175');" onmouseout="out('3252055162848788175');" style="">2052                 .withOwningEntityClass(auditableField.getOwningEntityClass())                            </span>
<span class="8052491048417023702" onmouseenter="enter('8052491048417023702');" onmouseout="out('8052491048417023702');" style="">2053                 .withReadOnly(true);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2054     }                                                                                                    </span>
<span  style="">2055                                                                                                          </span>
<span class="2512746595428590302" onmouseenter="enter('2512746595428590302');" onmouseout="out('2512746595428590302');" style="">2056     protected String getCurrentTabName(Map&lt;String, String&gt; pathVars, ClassMetadata cmd) {                </span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style="">2057         String tabName = pathVars.get(&quot;tabName&quot;);                                                        </span>
<span class="620358619967646231" onmouseenter="enter('620358619967646231');" onmouseout="out('620358619967646231');" style="">2058         if (StringUtils.isBlank(tabName)) {                                                              </span>
<span class="-8386812650765964886" onmouseenter="enter('-8386812650765964886');" onmouseout="out('-8386812650765964886');" style="">2059             TabMetadata firstTab = cmd.getFirstTab();                                                    </span>
<span class="5997097813726693180" onmouseenter="enter('5997097813726693180');" onmouseout="out('5997097813726693180');" style="">2060             return firstTab != null ? firstTab.getTabName() : &quot;General&quot;;                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2061         }                                                                                                </span>
<span class="-6789109484485831180" onmouseenter="enter('-6789109484485831180');" onmouseout="out('-6789109484485831180');" style="">2062         return tabName;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2063     }                                                                                                    </span>
<span  style="">2064                                                                                                          </span>
<span class="3143437458878702073" onmouseenter="enter('3143437458878702073');" onmouseout="out('3143437458878702073');" style="">2065     protected String getCurrentFolderId(HttpServletRequest request) {                                    </span>
<span class="1754053964111348985" onmouseenter="enter('1754053964111348985');" onmouseout="out('1754053964111348985');" style="">2066         if (request.getParameterMap().containsKey(CURRENT_FOLDER_ID)) {                                  </span>
<span class="6180766430585782289" onmouseenter="enter('6180766430585782289');" onmouseout="out('6180766430585782289');" style="">2067             return request.getParameter(CURRENT_FOLDER_ID);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2068         }                                                                                                </span>
<span class="-7128073668423816870" onmouseenter="enter('-7128073668423816870');" onmouseout="out('-7128073668423816870');" style="">2069         return &quot;unassigned&quot;;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2070     }                                                                                                    </span>
<span  style="">2071                                                                                                          </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">2072     // *****************************************                                                         </span>
<span class="2492884656402841956" onmouseenter="enter('2492884656402841956');" onmouseout="out('2492884656402841956');" style="">2073     // Typed Entity Helper Methods                                                                       </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">2074     // *****************************************                                                         </span>
<span  style="">2075                                                                                                          </span>
<span class="709722161552159597" onmouseenter="enter('709722161552159597');" onmouseout="out('709722161552159597');" style="">2076     protected void setTypedEntityModelAttributes(HttpServletRequest request, Model model) {              </span>
<span class="2572860224956804545" onmouseenter="enter('2572860224956804545');" onmouseout="out('2572860224956804545');" style="">2077         // Check if this is a typed entity                                                               </span>
<span class="-601784761218487618" onmouseenter="enter('-601784761218487618');" onmouseout="out('-601784761218487618');" style="">2078         AdminSection typedEntitySection = (AdminSection) request.getAttribute(&quot;typedEntitySection&quot;);     </span>
<span class="2356861889771822774" onmouseenter="enter('2356861889771822774');" onmouseout="out('2356861889771822774');" style="">2079         if (typedEntitySection != null) {                                                                </span>
<span class="-7054855399164801351" onmouseenter="enter('-7054855399164801351');" onmouseout="out('-7054855399164801351');" style="">2080             // Update the friendly name for this Entity Type                                             </span>
<span class="-8436584596314077038" onmouseenter="enter('-8436584596314077038');" onmouseout="out('-8436584596314077038');" style="">2081             model.addAttribute(&quot;entityFriendlyName&quot;, typedEntitySection.getName());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2082         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2083     }                                                                                                    </span>
<span  style="">2084                                                                                                          </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">2085     // *********************************                                                                 </span>
<span class="5570644305110686760" onmouseenter="enter('5570644305110686760');" onmouseout="out('5570644305110686760');" style="">2086     // ADDITIONAL SPRING-BOUND METHODS *                                                                 </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">2087     // *********************************                                                                 </span>
<span  style="">2088                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2089     /**                                                                                                  </span>
<span class="-6771709729688841784" onmouseenter="enter('-6771709729688841784');" onmouseout="out('-6771709729688841784');" style=""><abbr title="2090      * Invoked on every request to provide the ability to register specific binders for Spring&#x27;s binding process.">2090      * Invoked on every request to provide the ability to register specific binders for Spring&#x27;s binding ðŸ”µ</abbr></span>
<span class="2498077318751920180" onmouseenter="enter('2498077318751920180');" onmouseout="out('2498077318751920180');" style=""><abbr title="2091      * By default, we register a binder that treats empty Strings as null and a Boolean editor that supports either true">2091      * By default, we register a binder that treats empty Strings as null and a Boolean editor that suppoðŸ”µ</abbr></span>
<span class="4465303089468973962" onmouseenter="enter('4465303089468973962');" onmouseout="out('4465303089468973962');" style="">2092      * or false. If the value is passed in as null, it will treat it as false.                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2093      *                                                                                                   </span>
<span class="-3898462538136412996" onmouseenter="enter('-3898462538136412996');" onmouseout="out('-3898462538136412996');" style="">2094      * @param binder                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2095      */                                                                                                  </span>
<span class="2978104519843175555" onmouseenter="enter('2978104519843175555');" onmouseout="out('2978104519843175555');" style="">2096     @InitBinder                                                                                          </span>
<span class="4179572271848089300" onmouseenter="enter('4179572271848089300');" onmouseout="out('4179572271848089300');" style="">2097     public void initBinder(WebDataBinder binder) {                                                       </span>
<span class="3888201586857511470" onmouseenter="enter('3888201586857511470');" onmouseout="out('3888201586857511470');" style="">2098         binder.registerCustomEditor(String.class, new StringTrimmerEditor(true));                        </span>
<span class="-4458929942740752488" onmouseenter="enter('-4458929942740752488');" onmouseout="out('-4458929942740752488');" style="">2099         binder.registerCustomEditor(Boolean.class, new NonNullBooleanEditor());                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2100     }                                                                                                    </span>
<span  style="">2101                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2102 }                                                                                                        </span>





























































































































































































































































































































































































</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="913821711322743166" onmouseenter="enter('913821711322743166');" onmouseout="out('913821711322743166');" style="">  18 package org.broadleafcommerce.openadmin.web.controller.entity;                                           </span>
<span  style="">  19                                                                                                          </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style="">  20 import com.fasterxml.jackson.databind.ObjectMapper;                                                      </span>
<span class="5998602906817463685" onmouseenter="enter('5998602906817463685');" onmouseout="out('5998602906817463685');" style="">  21 import java.io.Serializable;                                                                             </span>
<span class="8256805395213692609" onmouseenter="enter('8256805395213692609');" onmouseout="out('8256805395213692609');" style="">  22 import java.io.UnsupportedEncodingException;                                                             </span>
<span class="600097467176667378" onmouseenter="enter('600097467176667378');" onmouseout="out('600097467176667378');" style="">  23 import java.net.URLDecoder;                                                                              </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  24 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  25 import java.util.Arrays;                                                                                 </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  26 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  27 import java.util.List;                                                                                   </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  28 import java.util.Map.Entry;                                                                              </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  29 import java.util.Map;                                                                                    </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  30 import java.util.Set;                                                                                    </span>
<span class="5924803009700709999" onmouseenter="enter('5924803009700709999');" onmouseout="out('5924803009700709999');" style="">  31 import java.util.stream.Stream;                                                                          </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  32 import javax.annotation.Resource;                                                                        </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style="">  33 import javax.servlet.http.HttpServletRequest;                                                            </span>
<span class="-2247759832438184775" onmouseenter="enter('-2247759832438184775');" onmouseout="out('-2247759832438184775');" style="">  34 import javax.servlet.http.HttpServletResponse;                                                           </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  35 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="4020017653195254006" onmouseenter="enter('4020017653195254006');" onmouseout="out('4020017653195254006');" style="">  36 import org.apache.commons.collections.MapUtils;                                                          </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  37 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  38 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  39 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  40 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  41 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  42 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  43 import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                 </span>
<span class="-3349026188166660873" onmouseenter="enter('-3349026188166660873');" onmouseout="out('-3349026188166660873');" style="">  44 import org.broadleafcommerce.common.persistence.EntityDuplicator;                                        </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  45 import org.broadleafcommerce.common.presentation.client.AddMethodType;                                   </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  46 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  47 import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                               </span>
<span class="-1492144387614747576" onmouseenter="enter('-1492144387614747576');" onmouseout="out('-1492144387614747576');" style="">  48 import org.broadleafcommerce.common.service.GenericEntityService;                                        </span>
<span class="2429458746821399950" onmouseenter="enter('2429458746821399950');" onmouseout="out('2429458746821399950');" style="">  49 import org.broadleafcommerce.common.util.BLCArrayUtils;                                                  </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  50 import org.broadleafcommerce.common.util.BLCMessageUtils;                                                </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  51 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-1418036767363331062" onmouseenter="enter('-1418036767363331062');" onmouseout="out('-1418036767363331062');" style="">  52 import org.broadleafcommerce.common.web.JsonResponse;                                                    </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  53 import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                              </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  54 import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                            </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  55 import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                      </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  56 import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                           </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  57 import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  58 import org.broadleafcommerce.openadmin.dto.ClassTree;                                                    </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  59 import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                           </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  60 import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                             </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  61 import org.broadleafcommerce.openadmin.dto.Entity;                                                       </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  62 import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                </span>
<span class="6369021917986026789" onmouseenter="enter('6369021917986026789');" onmouseout="out('6369021917986026789');" style="">  63 import org.broadleafcommerce.openadmin.dto.FilterAndSortCriteria;                                        </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  64 import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                  </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  65 import org.broadleafcommerce.openadmin.dto.Property;                                                     </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  66 import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                 </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  67 import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                  </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="">  68 import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                      </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  69 import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                          </span>
<span class="2120683388748052627" onmouseenter="enter('2120683388748052627');" onmouseout="out('2120683388748052627');" style="">  70 import org.broadleafcommerce.openadmin.server.security.dao.AdminUserDao;                                 </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  71 import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                              </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  72 import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                 </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  73 import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                       </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  74 import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                  </span>
<span class="-8603256547657551769" onmouseenter="enter('-8603256547657551769');" onmouseout="out('-8603256547657551769');" style="">  75 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceResponse;                   </span>
<span class="5585583973934060515" onmouseenter="enter('5585583973934060515');" onmouseout="out('5585583973934060515');" style=""><abbr title="  76 import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExtensionManager;">  76 import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExteðŸ”µ</abbr></span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  77 import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;         </span>
<span class="9131075895472939574" onmouseenter="enter('9131075895472939574');" onmouseout="out('9131075895472939574');" style="">  78 import org.broadleafcommerce.openadmin.web.controller.AdminAbstractController;                           </span>
<span class="7254479112554025637" onmouseenter="enter('7254479112554025637');" onmouseout="out('7254479112554025637');" style="">  79 import org.broadleafcommerce.openadmin.web.controller.modal.ModalHeaderType;                             </span>
<span class="6361429912012715647" onmouseenter="enter('6361429912012715647');" onmouseout="out('6361429912012715647');" style="">  80 import org.broadleafcommerce.openadmin.web.dao.MultipleCatalogExtensionManager;                          </span>
<span class="4507704609742395614" onmouseenter="enter('4507704609742395614');" onmouseout="out('4507704609742395614');" style="">  81 import org.broadleafcommerce.openadmin.web.editor.NonNullBooleanEditor;                                  </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  82 import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                        </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  83 import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                      </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  84 import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                  </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  85 import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                         </span>
<span class="-3560862041655103076" onmouseenter="enter('-3560862041655103076');" onmouseout="out('-3560862041655103076');" style="">  86 import org.broadleafcommerce.openadmin.web.form.entity.DefaultMainActions;                               </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  87 import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                       </span>
<span class="-3164920911156953697" onmouseenter="enter('-3164920911156953697');" onmouseout="out('-3164920911156953697');" style="">  88 import org.broadleafcommerce.openadmin.web.form.entity.EntityFormAction;                                 </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  89 import org.broadleafcommerce.openadmin.web.form.entity.Field;                                            </span>
<span class="-5634654756625156689" onmouseenter="enter('-5634654756625156689');" onmouseout="out('-5634654756625156689');" style="">  90 import org.broadleafcommerce.openadmin.web.form.entity.FieldGroup;                                       </span>
<span class="8763280003660953520" onmouseenter="enter('8763280003660953520');" onmouseout="out('8763280003660953520');" style="">  91 import org.springframework.beans.propertyeditors.StringTrimmerEditor;                                    </span>
<span class="4128309806836178094" onmouseenter="enter('4128309806836178094');" onmouseout="out('4128309806836178094');" style="">  92 import org.springframework.stereotype.Controller;                                                        </span>
<span class="2230089600625206822" onmouseenter="enter('2230089600625206822');" onmouseout="out('2230089600625206822');" style="">  93 import org.springframework.ui.Model;                                                                     </span>
<span class="-8661390401087732702" onmouseenter="enter('-8661390401087732702');" onmouseout="out('-8661390401087732702');" style="">  94 import org.springframework.util.MultiValueMap;                                                           </span>
<span class="-5446610002806720528" onmouseenter="enter('-5446610002806720528');" onmouseout="out('-5446610002806720528');" style="">  95 import org.springframework.validation.BindingResult;                                                     </span>
<span class="-5956639343389312225" onmouseenter="enter('-5956639343389312225');" onmouseout="out('-5956639343389312225');" style="">  96 import org.springframework.web.bind.WebDataBinder;                                                       </span>
<span class="6486986322776186621" onmouseenter="enter('6486986322776186621');" onmouseout="out('6486986322776186621');" style="">  97 import org.springframework.web.bind.annotation.InitBinder;                                               </span>
<span class="2718246165073723950" onmouseenter="enter('2718246165073723950');" onmouseout="out('2718246165073723950');" style="">  98 import org.springframework.web.bind.annotation.ModelAttribute;                                           </span>
<span class="3963501418927616634" onmouseenter="enter('3963501418927616634');" onmouseout="out('3963501418927616634');" style="">  99 import org.springframework.web.bind.annotation.PathVariable;                                             </span>
<span class="-7989471178862524182" onmouseenter="enter('-7989471178862524182');" onmouseout="out('-7989471178862524182');" style=""> 100 import org.springframework.web.bind.annotation.RequestMapping;                                           </span>
<span class="4584846860636268493" onmouseenter="enter('4584846860636268493');" onmouseout="out('4584846860636268493');" style=""> 101 import org.springframework.web.bind.annotation.RequestMethod;                                            </span>
<span class="-8913037601281016619" onmouseenter="enter('-8913037601281016619');" onmouseout="out('-8913037601281016619');" style=""> 102 import org.springframework.web.bind.annotation.RequestParam;                                             </span>
<span class="-7662224364501075428" onmouseenter="enter('-7662224364501075428');" onmouseout="out('-7662224364501075428');" style=""> 103 import org.springframework.web.bind.annotation.ResponseBody;                                             </span>
<span class="82864906475118767" onmouseenter="enter('82864906475118767');" onmouseout="out('82864906475118767');" style=""> 104 import org.springframework.web.servlet.DispatcherServlet;                                                </span>
<span class="4665273347041581179" onmouseenter="enter('4665273347041581179');" onmouseout="out('4665273347041581179');" style=""> 105 import org.springframework.web.servlet.FlashMap;                                                         </span>
<span class="4289605998216587359" onmouseenter="enter('4289605998216587359');" onmouseout="out('4289605998216587359');" style=""> 106 import org.springframework.web.servlet.mvc.support.RedirectAttributes;                                   </span>
<span class="2383374134797300138" onmouseenter="enter('2383374134797300138');" onmouseout="out('2383374134797300138');" style=""> 107 import org.springframework.web.util.UrlPathHelper;                                                       </span>
<span  style=""> 108                                                                                                          </span>
<span  style=""> 109                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 110 /**                                                                                                      </span>
<span class="5624503434864804252" onmouseenter="enter('5624503434864804252');" onmouseout="out('5624503434864804252');" style=""> 111  * The default implementation of the {@link AdminAbstractController}. This delegates every call to       </span>
<span class="-497882971048272294" onmouseenter="enter('-497882971048272294');" onmouseout="out('-497882971048272294');" style=""> 112  * super and does not provide any custom-tailored functionality. It is responsible for rendering the     </span>
<span class="-4790859535261881332" onmouseenter="enter('-4790859535261881332');" onmouseout="out('-4790859535261881332');" style=""> 113  * admin for every entity that is not explicitly customized by its own controller.                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 114  *                                                                                                       </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 115  * @author Andre Azzolini (apazzolini)                                                                   </span>
<span class="-7311139588847938491" onmouseenter="enter('-7311139588847938491');" onmouseout="out('-7311139588847938491');" style=""> 116  * @author Jeff Fischer                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 117  */                                                                                                      </span>
<span class="4155455059275642147" onmouseenter="enter('4155455059275642147');" onmouseout="out('4155455059275642147');" style=""> 118 @Controller(&quot;blAdminBasicEntityController&quot;)                                                              </span>
<span class="1298802560762502343" onmouseenter="enter('1298802560762502343');" onmouseout="out('1298802560762502343');" style=""> 119 @RequestMapping(&quot;/{sectionKey:.+}&quot;)                                                                      </span>
<span class="8857493697785984988" onmouseenter="enter('8857493697785984988');" onmouseout="out('8857493697785984988');" style=""> 120 public class AdminBasicEntityController extends AdminAbstractController {                                </span>
<span  style=""> 121                                                                                                          </span>
<span class="6387945601766467724" onmouseenter="enter('6387945601766467724');" onmouseout="out('6387945601766467724');" style=""> 122     protected static final Log LOG = LogFactory.getLog(AdminBasicEntityController.class);                </span>
<span  style=""> 123                                                                                                          </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 124     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span class="4075481265342786632" onmouseenter="enter('4075481265342786632');" onmouseout="out('4075481265342786632');" style=""> 125     public static final String CUSTOM_CRITERIA = &quot;criteria&quot;;                                             </span>
<span class="-5370879055704196240" onmouseenter="enter('-5370879055704196240');" onmouseout="out('-5370879055704196240');" style=""> 126     public static final String IS_SELECTIZE_REQUEST = &quot;isSelectizeRequest&quot;;                              </span>
<span class="1005517399019449970" onmouseenter="enter('1005517399019449970');" onmouseout="out('1005517399019449970');" style=""> 127     protected static final String CURRENT_FOLDER_ID = &quot;currentFolderId&quot;;                                 </span>
<span  style=""> 128                                                                                                          </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style=""> 129     @Resource(name=&quot;blSandBoxHelper&quot;)                                                                    </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style=""> 130     protected SandBoxHelper sandBoxHelper;                                                               </span>
<span  style=""> 131                                                                                                          </span>
<span class="-5193304577016957246" onmouseenter="enter('-5193304577016957246');" onmouseout="out('-5193304577016957246');" style=""> 132     @Resource(name = &quot;blAdminUserDao&quot;)                                                                   </span>
<span class="-2542536430165066610" onmouseenter="enter('-2542536430165066610');" onmouseout="out('-2542536430165066610');" style=""> 133     protected AdminUserDao adminUserDao;                                                                 </span>
<span  style=""> 134                                                                                                          </span>
<span class="1039661802170570045" onmouseenter="enter('1039661802170570045');" onmouseout="out('1039661802170570045');" style=""> 135     @Resource(name=&quot;blDynamicEntityDao&quot;)                                                                 </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style=""> 136     protected DynamicEntityDao dynamicEntityDao;                                                         </span>
<span  style=""> 137                                                                                                          </span>
<span class="3323977399618509653" onmouseenter="enter('3323977399618509653');" onmouseout="out('3323977399618509653');" style=""> 138     @Resource(name = &quot;blAdornedTargetAutoPopulateExtensionManager&quot;)                                      </span>
<span class="-4810148452666974339" onmouseenter="enter('-4810148452666974339');" onmouseout="out('-4810148452666974339');" style=""> 139     protected AdornedTargetAutoPopulateExtensionManager adornedTargetAutoPopulateExtensionManager;       </span>
<span  style=""> 140                                                                                                          </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 141     @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                        </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 142     protected RowLevelSecurityService rowLevelSecurityService;                                           </span>
<span  style=""> 143                                                                                                          </span>
<span class="4471392044492296285" onmouseenter="enter('4471392044492296285');" onmouseout="out('4471392044492296285');" style=""> 144     @Resource(name = &quot;blEntityDuplicator&quot;)                                                               </span>
<span class="-9194612273021432316" onmouseenter="enter('-9194612273021432316');" onmouseout="out('-9194612273021432316');" style=""> 145     protected EntityDuplicator duplicator;                                                               </span>
<span  style=""> 146                                                                                                          </span>
<span class="2258512980686044159" onmouseenter="enter('2258512980686044159');" onmouseout="out('2258512980686044159');" style=""> 147     @Resource(name = &quot;blGenericEntityService&quot;)                                                           </span>
<span class="7024198528514174971" onmouseenter="enter('7024198528514174971');" onmouseout="out('7024198528514174971');" style=""> 148     protected GenericEntityService genericEntityService;                                                 </span>
<span  style=""> 149                                                                                                          </span>
<span  style=""> 150                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style=""> 151 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span class="1447930800600022993" onmouseenter="enter('1447930800600022993');" onmouseout="out('1447930800600022993');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 152     @Resource(name = &quot;blMultipleCatalogExtensionManager&quot;)                                                </span>
<span class="4452235211304762832" onmouseenter="enter('4452235211304762832');" onmouseout="out('4452235211304762832');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 153     protected MultipleCatalogExtensionManager multipleCatalogExtensionManager;                           </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 154                                                                                                          </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 155                                                                                                          </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 156 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 157 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/"> 157 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwðŸ”µ</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 158 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 159                                                                                                          </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 160                                                                                                          </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style=""> 161 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 162     // ******************************************                                                        </span>
<span class="8145904524131922989" onmouseenter="enter('8145904524131922989');" onmouseout="out('8145904524131922989');" style=""> 163     // REQUEST-MAPPING BOUND CONTROLLER METHODS *                                                        </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 164     // ******************************************                                                        </span>
<span  style=""> 165                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 166     /**                                                                                                  </span>
<span class="5980196098348408716" onmouseenter="enter('5980196098348408716');" onmouseout="out('5980196098348408716');" style=""><abbr title=" 167      * Renders the main entity listing for the specified class, which is based on the current sectionKey with some optional"> 167      * Renders the main entity listing for the specified class, which is based on the current sectionKey ðŸ”µ</abbr></span>
<span class="1756838433111210325" onmouseenter="enter('1756838433111210325');" onmouseout="out('1756838433111210325');" style=""> 168      * criteria.                                                                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 169      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 170      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 171      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 172      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 173      * @param pathVars                                                                                   </span>
<span class="-7836494531350161829" onmouseenter="enter('-7836494531350161829');" onmouseout="out('-7836494531350161829');" style=""> 174      * @param requestParams a Map of property name -&gt; list critiera values                               </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 175      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 176      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 177      */                                                                                                  </span>
<span class="854227037044969777" onmouseenter="enter('854227037044969777');" onmouseout="out('854227037044969777');" style=""> 178     @RequestMapping(value = &quot;&quot;, method = RequestMethod.GET)                                              </span>
<span class="5203424842505603172" onmouseenter="enter('5203424842505603172');" onmouseout="out('5203424842505603172');" style=""> 179     public String viewEntityList(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 180             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 181             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 182         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 183         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 184         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                               </span>
<span class="1452589137399878084" onmouseenter="enter('1452589137399878084');" onmouseout="out('1452589137399878084');" style=""><abbr title=" 185         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars);"> 185         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 186         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 187         DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                           </span>
<span  style=""> 188                                                                                                          </span>
<span class="-9123024135554384147" onmouseenter="enter('-9123024135554384147');" onmouseout="out('-9123024135554384147');" style=""> 189         ListGrid listGrid = formService.buildMainListGrid(drs, cmd, sectionKey, crumbs);                 </span>
<span class="-7197013270379460942" onmouseenter="enter('-7197013270379460942');" onmouseout="out('-7197013270379460942');" style=""> 190         listGrid.setSelectType(ListGrid.SelectType.NONE);                                                </span>
<span  style=""> 191                                                                                                          </span>
<span class="6707774114103003478" onmouseenter="enter('6707774114103003478');" onmouseout="out('6707774114103003478');" style=""> 192         Set&lt;Field&gt; headerFields = listGrid.getHeaderFields();                                            </span>
<span class="6157449347608657417" onmouseenter="enter('6157449347608657417');" onmouseout="out('6157449347608657417');" style=""> 193         if (CollectionUtils.isNotEmpty(headerFields)) {                                                  </span>
<span class="7359980094802675712" onmouseenter="enter('7359980094802675712');" onmouseout="out('7359980094802675712');" style=""> 194             Field firstField = headerFields.iterator().next();                                           </span>
<span class="-7992921859474727563" onmouseenter="enter('-7992921859474727563');" onmouseout="out('-7992921859474727563');" style=""> 195             if (requestParams.containsKey(firstField.getName())) {                                       </span>
<span class="-4847870846432586371" onmouseenter="enter('-4847870846432586371');" onmouseout="out('-4847870846432586371');" style=""> 196                 model.addAttribute(&quot;mainSearchTerm&quot;, requestParams.get(firstField.getName()).get(0));    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198         }                                                                                                </span>
<span  style=""> 199                                                                                                          </span>
<span class="3294377821001327596" onmouseenter="enter('3294377821001327596');" onmouseout="out('3294377821001327596');" style=""> 200         model.addAttribute(&quot;viewType&quot;, &quot;entityList&quot;);                                                    </span>
<span  style=""> 201                                                                                                          </span>
<span class="5223794068523842694" onmouseenter="enter('5223794068523842694');" onmouseout="out('5223794068523842694');" style=""> 202         setupViewEntityListBasicModel(request, cmd, sectionKey, sectionClassName, model, requestParams); </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style=""> 203         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style=""> 204                                                                                                          </span>
<span class="-4487883013655706388" onmouseenter="enter('-4487883013655706388');" onmouseout="out('-4487883013655706388');" style=""> 205         return DEFAULT_CONTAINER_VIEW;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206     }                                                                                                    </span>
<span  style=""> 207                                                                                                          </span>
<span class="5512240627727429054" onmouseenter="enter('5512240627727429054');" onmouseout="out('5512240627727429054');" style=""><abbr title=" 208     protected void setupViewEntityListBasicModel(HttpServletRequest request, ClassMetadata cmd, String sectionKey,"> 208     protected void setupViewEntityListBasicModel(HttpServletRequest request, ClassMetadata cmd, String seðŸ”µ</abbr></span>
<span class="522743254766371502" onmouseenter="enter('522743254766371502');" onmouseout="out('522743254766371502');" style=""> 209             String sectionClassName, Model model, MultiValueMap&lt;String, String&gt; requestParams) {         </span>
<span class="5787313217223527782" onmouseenter="enter('5787313217223527782');" onmouseout="out('5787313217223527782');" style=""> 210         List&lt;EntityFormAction&gt; mainActions = new ArrayList&lt;&gt;();                                          </span>
<span class="-6495333239259317464" onmouseenter="enter('-6495333239259317464');" onmouseout="out('-6495333239259317464');" style=""> 211         addAddActionIfAllowed(sectionClassName, cmd, mainActions);                                       </span>
<span class="-5948121019403308590" onmouseenter="enter('-5948121019403308590');" onmouseout="out('-5948121019403308590');" style=""> 212         extensionManager.getProxy().addAdditionalMainActions(sectionClassName, mainActions);             </span>
<span class="-381816252130957573" onmouseenter="enter('-381816252130957573');" onmouseout="out('-381816252130957573');" style=""> 213         extensionManager.getProxy().modifyMainActions(cmd, mainActions);                                 </span>
<span  style=""> 214                                                                                                          </span>
<span class="-5498329164774951339" onmouseenter="enter('-5498329164774951339');" onmouseout="out('-5498329164774951339');" style=""> 215         // If this came from a delete save, we&#x27;ll have a headerFlash request parameter to take care of   </span>
<span class="6915846846822456322" onmouseenter="enter('6915846846822456322');" onmouseout="out('6915846846822456322');" style=""> 216         if (requestParams.containsKey(&quot;headerFlash&quot;)) {                                                  </span>
<span class="-7374079465520861767" onmouseenter="enter('-7374079465520861767');" onmouseout="out('-7374079465520861767');" style=""> 217             model.addAttribute(&quot;headerFlash&quot;, requestParams.get(&quot;headerFlash&quot;).get(0));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218         }                                                                                                </span>
<span  style=""> 219                                                                                                          </span>
<span class="-5632901614715850082" onmouseenter="enter('-5632901614715850082');" onmouseout="out('-5632901614715850082');" style=""> 220         List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());                   </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style=""> 221         String requestUri = request.getRequestURI();                                                     </span>
<span class="2670437920401576748" onmouseenter="enter('2670437920401576748');" onmouseout="out('2670437920401576748');" style=""> 222         if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) {  </span>
<span class="-901741071381030126" onmouseenter="enter('-901741071381030126');" onmouseout="out('-901741071381030126');" style=""><abbr title=" 223             requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length());"> 223             requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length())ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224         }                                                                                                </span>
<span  style=""> 225                                                                                                          </span>
<span class="-3335875933652663591" onmouseenter="enter('-3335875933652663591');" onmouseout="out('-3335875933652663591');" style=""> 226         model.addAttribute(&quot;isFilter&quot;, (requestParams.size() &gt; 0));                                      </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style=""> 227         model.addAttribute(&quot;currentUri&quot;, requestUri);                                                    </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style=""> 228         model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                                  </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 229         model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 230         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="-4219022137146036385" onmouseenter="enter('-4219022137146036385');" onmouseout="out('-4219022137146036385');" style=""> 231         model.addAttribute(&quot;mainActions&quot;, mainActions);                                                  </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 232         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-7167932239083034641" onmouseenter="enter('-7167932239083034641');" onmouseout="out('-7167932239083034641');" style=""> 233         setTypedEntityModelAttributes(request, model);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234     }                                                                                                    </span>
<span  style=""> 235                                                                                                          </span>
<span class="-3612928683982517341" onmouseenter="enter('-3612928683982517341');" onmouseout="out('-3612928683982517341');" style=""> 236     @RequestMapping(value = &quot;/selectize&quot;, method = RequestMethod.GET)                                    </span>
<span class="-2536734120775641057" onmouseenter="enter('-2536734120775641057');" onmouseout="out('-2536734120775641057');" style=""> 237     public @ResponseBody Map&lt;String, Object&gt; viewEntityListSelectize(HttpServletRequest request,         </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style=""> 238              HttpServletResponse response, Model model,                                                  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 239              @PathVariable Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 240              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 241         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 242         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 243         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                               </span>
<span class="3971039348455381302" onmouseenter="enter('3971039348455381302');" onmouseout="out('3971039348455381302');" style=""><abbr title=" 244         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars)"> 244         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="-5204717557696417186" onmouseenter="enter('-5204717557696417186');" onmouseout="out('-5204717557696417186');" style=""> 245                 .withCustomCriteria(getCustomCriteria(requestParams));                                   </span>
<span  style=""> 246                                                                                                          </span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style=""> 247         ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                           </span>
<span  style=""> 248                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 249         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 250         DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                           </span>
<span  style=""> 251                                                                                                          </span>
<span class="-6840686923261380416" onmouseenter="enter('-6840686923261380416');" onmouseout="out('-6840686923261380416');" style=""> 252         return formService.constructSelectizeOptionMap(drs, cmd);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253     }                                                                                                    </span>
<span  style=""> 254                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 255     /**                                                                                                  </span>
<span class="6015587852497052057" onmouseenter="enter('6015587852497052057');" onmouseout="out('6015587852497052057');" style=""> 256      * Obtains the requested criteria parameter                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 257      *                                                                                                   </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 258      * @param requestParams                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 259      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 260      */                                                                                                  </span>
<span class="-5224065764328446223" onmouseenter="enter('-5224065764328446223');" onmouseout="out('-5224065764328446223');" style=""> 261     protected String[] getCustomCriteria(Map&lt;String, List&lt;String&gt;&gt; requestParams) {                      </span>
<span class="8308653628584061101" onmouseenter="enter('8308653628584061101');" onmouseout="out('8308653628584061101');" style=""> 262         if (requestParams == null || requestParams.isEmpty()) {                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 263             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264         }                                                                                                </span>
<span  style=""> 265                                                                                                          </span>
<span class="-6200156504676301578" onmouseenter="enter('-6200156504676301578');" onmouseout="out('-6200156504676301578');" style=""> 266         List&lt;String&gt; criteria = requestParams.get(CUSTOM_CRITERIA);                                      </span>
<span class="3479198517250864619" onmouseenter="enter('3479198517250864619');" onmouseout="out('3479198517250864619');" style=""> 267         String response = CollectionUtils.isEmpty(criteria) ? null : criteria.get(0);                    </span>
<span class="3591199473111095603" onmouseenter="enter('3591199473111095603');" onmouseout="out('3591199473111095603');" style=""> 268         return new String[] {response};                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269     }                                                                                                    </span>
<span  style=""> 270                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 271     /**                                                                                                  </span>
<span class="53051913897087216" onmouseenter="enter('53051913897087216');" onmouseout="out('53051913897087216');" style=""><abbr title=" 272      * Adds the &quot;Add&quot; button to the main entity form if the current user has permissions to create new instances"> 272      * Adds the &quot;Add&quot; button to the main entity form if the current user has permissions to create new inðŸ”µ</abbr></span>
<span class="-2041834868205006384" onmouseenter="enter('-2041834868205006384');" onmouseout="out('-2041834868205006384');" style=""> 273      * of the entity and all of the fields in the entity aren&#x27;t marked as read only.                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 274      *                                                                                                   </span>
<span class="2579837316240354786" onmouseenter="enter('2579837316240354786');" onmouseout="out('2579837316240354786');" style=""> 275      * @param sectionClassName                                                                           </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style=""> 276      * @param cmd                                                                                        </span>
<span class="-70241175981651056" onmouseenter="enter('-70241175981651056');" onmouseout="out('-70241175981651056');" style=""> 277      * @param mainActions                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 278      */                                                                                                  </span>
<span class="-3535265632615590771" onmouseenter="enter('-3535265632615590771');" onmouseout="out('-3535265632615590771');" style=""><abbr title=" 279     protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormAction&gt; mainActions) {"> 279     protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormActioðŸ”µ</abbr></span>
<span class="-1675673801723949520" onmouseenter="enter('-1675673801723949520');" onmouseout="out('-1675673801723949520');" style=""> 280         if (isAddActionAllowed(sectionClassName, cmd)) {                                                 </span>
<span class="-161553798203722975" onmouseenter="enter('-161553798203722975');" onmouseout="out('-161553798203722975');" style=""> 281             mainActions.add(DefaultMainActions.ADD);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283     }                                                                                                    </span>
<span  style=""> 284                                                                                                          </span>
<span class="4125299149074369729" onmouseenter="enter('4125299149074369729');" onmouseout="out('4125299149074369729');" style=""> 285     protected boolean isAddActionAllowed(final String sectionClassName, final ClassMetadata cmd) {       </span>
<span class="2379281051849826609" onmouseenter="enter('2379281051849826609');" onmouseout="out('2379281051849826609');" style=""> 286         // If the user does not have create permissions, we will not add the &quot;Add New&quot; button            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 287         try {                                                                                            </span>
<span class="-2050050318794737036" onmouseenter="enter('-2050050318794737036');" onmouseout="out('-2050050318794737036');" style=""> 288             adminRemoteSecurityService.securityCheck(sectionClassName, EntityOperationType.ADD);         </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style=""> 289         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style=""> 290             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 291                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293         }                                                                                                </span>
<span  style=""> 294                                                                                                          </span>
<span class="-3272601440754635767" onmouseenter="enter('-3272601440754635767');" onmouseout="out('-3272601440754635767');" style=""> 295         final boolean canAdd = rowLevelSecurityService                                                   </span>
<span class="-1653290766274377775" onmouseenter="enter('-1653290766274377775');" onmouseout="out('-1653290766274377775');" style=""> 296                 .canAdd(adminRemoteSecurityService.getPersistentAdminUser(), sectionClassName, cmd);     </span>
<span class="5125272502277129387" onmouseenter="enter('5125272502277129387');" onmouseout="out('5125272502277129387');" style=""> 297         return isNotReadOnly(cmd) &amp;&amp; canAdd;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298     }                                                                                                    </span>
<span  style=""> 299                                                                                                          </span>
<span class="-7397004815762425407" onmouseenter="enter('-7397004815762425407');" onmouseout="out('-7397004815762425407');" style=""> 300     protected boolean isNotReadOnly(final ClassMetadata cmd) {                                           </span>
<span class="-5650645308789885306" onmouseenter="enter('-5650645308789885306');" onmouseout="out('-5650645308789885306');" style=""> 301         //check if all the metadata is read only                                                         </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 302         for (Property property : cmd.getProperties()) {                                                  </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style=""> 303             if (property.getMetadata() instanceof BasicFieldMetadata) {                                  </span>
<span class="-4740706861929444273" onmouseenter="enter('-4740706861929444273');" onmouseout="out('-4740706861929444273');" style=""> 304                 if (((BasicFieldMetadata) property.getMetadata()).getReadOnly() == null ||               </span>
<span class="7731016670197656615" onmouseenter="enter('7731016670197656615');" onmouseout="out('7731016670197656615');" style=""> 305                         !((BasicFieldMetadata) property.getMetadata()).getReadOnly()) {                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 306                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 307                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 308             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 309         }                                                                                                </span>
<span  style=""> 310                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 311         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312     }                                                                                                    </span>
<span  style=""> 313                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 314     /**                                                                                                  </span>
<span class="-403478592182410175" onmouseenter="enter('-403478592182410175');" onmouseout="out('-403478592182410175');" style=""><abbr title=" 315      * Renders the modal form that is used to add a new parent level entity. Note that this form cannot render any"> 315      * Renders the modal form that is used to add a new parent level entity. Note that this form cannot rðŸ”µ</abbr></span>
<span class="-2684076904077363908" onmouseenter="enter('-2684076904077363908');" onmouseout="out('-2684076904077363908');" style=""><abbr title=" 316      * subcollections as operations on those collections require the parent level entity to first be saved and have"> 316      * subcollections as operations on those collections require the parent level entity to first be saveðŸ”µ</abbr></span>
<span class="-2496660529180512497" onmouseenter="enter('-2496660529180512497');" onmouseout="out('-2496660529180512497');" style=""><abbr title=" 317      * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity screen where"> 317      * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity ðŸ”µ</abbr></span>
<span class="-5672334976076130102" onmouseenter="enter('-5672334976076130102');" onmouseout="out('-5672334976076130102');" style=""> 318      * they can then perform operations on sub collections.                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 319      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 320      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 321      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 322      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 323      * @param pathVars                                                                                   </span>
<span class="-7339043177630483847" onmouseenter="enter('-7339043177630483847');" onmouseout="out('-7339043177630483847');" style=""> 324      * @param entityType                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 325      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 326      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 327      */                                                                                                  </span>
<span class="-6494270766546423105" onmouseenter="enter('-6494270766546423105');" onmouseout="out('-6494270766546423105');" style=""> 328     @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.GET)                                          </span>
<span class="8522113168804045570" onmouseenter="enter('8522113168804045570');" onmouseout="out('8522113168804045570');" style=""><abbr title=" 329     public String viewAddEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,"> 329     public String viewAddEntityForm(HttpServletRequest request, HttpServletResponse response, Model modelðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 330             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-1715631339976075770" onmouseenter="enter('-1715631339976075770');" onmouseout="out('-1715631339976075770');" style=""> 331             @RequestParam(defaultValue = &quot;&quot;) String entityType) throws Exception {                       </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 332         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 333         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 334         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 335         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 335         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style=""> 336         ppr.setAddOperationInspect(true);                                                                </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 337         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span  style=""> 338                                                                                                          </span>
<span class="2600422776092116832" onmouseenter="enter('2600422776092116832');" onmouseout="out('2600422776092116832');" style=""> 339         entityType = determineEntityType(entityType, cmd);                                               </span>
<span  style=""> 340                                                                                                          </span>
<span class="4098005746663533241" onmouseenter="enter('4098005746663533241');" onmouseout="out('4098005746663533241');" style=""> 341         EntityForm entityForm = formService.createEntityForm(cmd, sectionCrumbs);                        </span>
<span  style=""> 342                                                                                                          </span>
<span class="5826594571687596812" onmouseenter="enter('5826594571687596812');" onmouseout="out('5826594571687596812');" style=""><abbr title=" 343         // We need to make sure that the ceiling entity is set to the interface and the specific entity type"> 343         // We need to make sure that the ceiling entity is set to the interface and the specific entity tðŸ”µ</abbr></span>
<span class="37161952125740808" onmouseenter="enter('37161952125740808');" onmouseout="out('37161952125740808');" style=""> 344         // is set to the type we&#x27;re going to be creating.                                                </span>
<span class="5062735442039535924" onmouseenter="enter('5062735442039535924');" onmouseout="out('5062735442039535924');" style=""> 345         entityForm.setCeilingEntityClassname(cmd.getCeilingType());                                      </span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style=""> 346         entityForm.setEntityType(entityType);                                                            </span>
<span  style=""> 347                                                                                                          </span>
<span class="-5227856854691424770" onmouseenter="enter('-5227856854691424770');" onmouseout="out('-5227856854691424770');" style=""><abbr title=" 348         // When we initially build the class metadata (and thus, the entity form), we had all of the possible"> 348         // When we initially build the class metadata (and thus, the entity form), we had all of the possðŸ”µ</abbr></span>
<span class="5105619661852614163" onmouseenter="enter('5105619661852614163');" onmouseout="out('5105619661852614163');" style=""><abbr title=" 349         // polymorphic fields built out. Now that we have a concrete entity type to render, we can remove the"> 349         // polymorphic fields built out. Now that we have a concrete entity type to render, we can removeðŸ”µ</abbr></span>
<span class="-3843175043245177501" onmouseenter="enter('-3843175043245177501');" onmouseout="out('-3843175043245177501');" style=""> 350         // fields that are not applicable for this given entity type.                                    </span>
<span class="-2935519954456371455" onmouseenter="enter('-2935519954456371455');" onmouseout="out('-2935519954456371455');" style=""> 351         formService.removeNonApplicableFields(cmd, entityForm, entityType);                              </span>
<span  style=""> 352                                                                                                          </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 353         modifyAddEntityForm(entityForm, pathVars);                                                       </span>
<span  style=""> 354                                                                                                          </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 355         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 356         model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                               </span>
<span  style=""> 357                                                                                                          </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 358         model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 359         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 360         model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 361         setModelAttributes(model, sectionKey);                                                           </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style=""> 362         return MODAL_CONTAINER_VIEW;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 363     }                                                                                                    </span>
<span  style=""> 364                                                                                                          </span>
<span class="6822582914767657426" onmouseenter="enter('6822582914767657426');" onmouseout="out('6822582914767657426');" style=""> 365     // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic         </span>
<span class="6925903770450869702" onmouseenter="enter('6925903770450869702');" onmouseout="out('6925903770450869702');" style=""> 366     // types for this entity.                                                                            </span>
<span class="3096473113628081949" onmouseenter="enter('3096473113628081949');" onmouseout="out('3096473113628081949');" style=""> 367     protected String determineEntityType(String entityType, final ClassMetadata cmd)                     </span>
<span class="363372168864539985" onmouseenter="enter('363372168864539985');" onmouseout="out('363372168864539985');" style=""> 368             throws UnsupportedEncodingException {                                                        </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 369         if (StringUtils.isBlank(entityType)) {                                                           </span>
<span class="2333848870190395940" onmouseenter="enter('2333848870190395940');" onmouseout="out('2333848870190395940');" style=""> 370             if (cmd.getPolymorphicEntities().getChildren().length == 0) {                                </span>
<span class="2097783908693957449" onmouseenter="enter('2097783908693957449');" onmouseout="out('2097783908693957449');" style=""> 371                 entityType = cmd.getPolymorphicEntities().getFullyQualifiedClassname();                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 372             } else {                                                                                     </span>
<span class="-6902702564943152777" onmouseenter="enter('-6902702564943152777');" onmouseout="out('-6902702564943152777');" style=""> 373                 entityType = getDefaultEntityType();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 375         } else {                                                                                         </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style=""> 376             entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 377         }                                                                                                </span>
<span class="2597693607778452486" onmouseenter="enter('2597693607778452486');" onmouseout="out('2597693607778452486');" style=""> 378         return entityType;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379     }                                                                                                    </span>
<span  style=""> 380                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 381     /**                                                                                                  </span>
<span class="-2292124409166412817" onmouseenter="enter('-2292124409166412817');" onmouseout="out('-2292124409166412817');" style=""><abbr title=" 382      * Processes the request to add a new entity. If successful, returns a redirect to the newly created entity."> 382      * Processes the request to add a new entity. If successful, returns a redirect to the newly created ðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 383      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 384      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 385      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 386      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 387      * @param pathVars                                                                                   </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 388      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 389      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 390      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 391      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 392      */                                                                                                  </span>
<span class="-1840738840686664300" onmouseenter="enter('-1840738840686664300');" onmouseout="out('-1840738840686664300');" style=""> 393     @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.POST)                                         </span>
<span class="8551380442207718095" onmouseenter="enter('8551380442207718095');" onmouseout="out('8551380442207718095');" style=""> 394     public String addEntity(HttpServletRequest request, HttpServletResponse response, Model model,       </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 395             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title=" 396             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {"> 396             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 397         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 398         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 399         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="2596618104185041854" onmouseenter="enter('2596618104185041854');" onmouseout="out('2596618104185041854');" style=""><abbr title=" 400         ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 400         ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassNameðŸ”µ</abbr></span>
<span  style=""> 401                                                                                                          </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 402         extractDynamicFormFields(cmd, entityForm);                                                       </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 403         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 403         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="-4281879219750019053" onmouseenter="enter('-4281879219750019053');" onmouseout="out('-4281879219750019053');" style=""> 404         Entity entity = service.addEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();       </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 405         entityFormValidator.validate(entityForm, entity, result);                                        </span>
<span  style=""> 406                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 407         if (result.hasErrors()) {                                                                        </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 408             entityForm.clearFieldsMap();                                                                 </span>
<span class="-312181662169537666" onmouseenter="enter('-312181662169537666');" onmouseout="out('-312181662169537666');" style=""> 409             formService.populateEntityForm(cmd, entity, entityForm, sectionCrumbs);                      </span>
<span  style=""> 410                                                                                                          </span>
<span class="254171966199148419" onmouseenter="enter('254171966199148419');" onmouseout="out('254171966199148419');" style=""> 411             formService.removeNonApplicableFields(cmd, entityForm, entityForm.getEntityType());          </span>
<span  style=""> 412                                                                                                          </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 413             modifyAddEntityForm(entityForm, pathVars);                                                   </span>
<span  style=""> 414                                                                                                          </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 415             model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                           </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 416             model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                        </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 417             model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                 </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 418             model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 419             setModelAttributes(model, sectionKey);                                                       </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style=""> 420             return MODAL_CONTAINER_VIEW;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421         }                                                                                                </span>
<span  style=""> 422                                                                                                          </span>
<span class="7931002159447649906" onmouseenter="enter('7931002159447649906');" onmouseout="out('7931002159447649906');" style=""> 423         // Note that AJAX Redirects need the context path prepended to them                              </span>
<span class="-9104189425594863479" onmouseenter="enter('-9104189425594863479');" onmouseout="out('-9104189425594863479');" style=""><abbr title=" 424         return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).getValue();"> 424         return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425     }                                                                                                    </span>
<span  style=""> 426                                                                                                          </span>
<span class="1290933159858539781" onmouseenter="enter('1290933159858539781');" onmouseout="out('1290933159858539781');" style=""> 427     @RequestMapping(value = &quot;/{id}/duplicate&quot;, method = RequestMethod.POST)                              </span>
<span class="-7829728733805273999" onmouseenter="enter('-7829728733805273999');" onmouseout="out('-7829728733805273999');" style=""> 428     public String duplicateEntity(final HttpServletRequest request,                                      </span>
<span class="277417182565607361" onmouseenter="enter('277417182565607361');" onmouseout="out('277417182565607361');" style=""> 429             final HttpServletResponse response,                                                          </span>
<span class="7665770463560391322" onmouseenter="enter('7665770463560391322');" onmouseout="out('7665770463560391322');" style=""> 430             final Model model,                                                                           </span>
<span class="5144416334471976319" onmouseenter="enter('5144416334471976319');" onmouseout="out('5144416334471976319');" style=""> 431             @PathVariable final Map&lt;String, String&gt; pathVars,                                            </span>
<span class="5884230296910152604" onmouseenter="enter('5884230296910152604');" onmouseout="out('5884230296910152604');" style=""> 432             @PathVariable(value = &quot;id&quot;) final String id,                                                 </span>
<span class="5134952934925976911" onmouseenter="enter('5134952934925976911');" onmouseout="out('5134952934925976911');" style=""> 433             @ModelAttribute(value = &quot;entityForm&quot;) final EntityForm entityForm,                           </span>
<span class="3593210188792847894" onmouseenter="enter('3593210188792847894');" onmouseout="out('3593210188792847894');" style=""> 434             final BindingResult result) throws Exception {                                               </span>
<span class="5473402149144087547" onmouseenter="enter('5473402149144087547');" onmouseout="out('5473402149144087547');" style=""> 435         final String sectionKey = getSectionKey(pathVars);                                               </span>
<span class="5437662011929987553" onmouseenter="enter('5437662011929987553');" onmouseout="out('5437662011929987553');" style=""> 436         final String sectionClassName = getClassNameForSection(sectionKey);                              </span>
<span class="8553976943183535096" onmouseenter="enter('8553976943183535096');" onmouseout="out('8553976943183535096');" style=""> 437         final Class&lt;?&gt; entityClass = dynamicEntityDao.getImplClass(sectionClassName);                    </span>
<span class="3365797270076600425" onmouseenter="enter('3365797270076600425');" onmouseout="out('3365797270076600425');" style=""> 438         final long identifier = Long.parseLong(id);                                                      </span>
<span  style=""> 439                                                                                                          </span>
<span class="-138107922525045121" onmouseenter="enter('-138107922525045121');" onmouseout="out('-138107922525045121');" style=""> 440         if (duplicator.validate(entityClass, identifier)) {                                              </span>
<span class="5493542447860389431" onmouseenter="enter('5493542447860389431');" onmouseout="out('5493542447860389431');" style=""> 441             final Object duplicate;                                                                      </span>
<span  style=""> 442                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 443             try {                                                                                        </span>
<span class="-2283233085854885260" onmouseenter="enter('-2283233085854885260');" onmouseout="out('-2283233085854885260');" style=""> 444                 duplicate = duplicator.copy(entityClass, identifier);                                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 445             } catch (Exception e) {                                                                      </span>
<span class="-8850460393574909327" onmouseenter="enter('-8850460393574909327');" onmouseout="out('-8850460393574909327');" style=""> 446                 LOG.error(&quot;Could not duplicate entity&quot;, e);                                              </span>
<span class="-7503880796159563304" onmouseenter="enter('-7503880796159563304');" onmouseout="out('-7503880796159563304');" style=""> 447                 return getErrorDuplicatingResponse(response, &quot;Duplication_Failure&quot;);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 448             }                                                                                            </span>
<span  style=""> 449                                                                                                          </span>
<span class="9202899875978069713" onmouseenter="enter('9202899875978069713');" onmouseout="out('9202899875978069713');" style=""> 450             final Serializable dupId = genericEntityService.getIdentifier(duplicate);                    </span>
<span  style=""> 451                                                                                                          </span>
<span class="7931002159447649906" onmouseenter="enter('7931002159447649906');" onmouseout="out('7931002159447649906');" style=""> 452             // Note that AJAX Redirects need the context path prepended to them                          </span>
<span class="6804960621276438337" onmouseenter="enter('6804960621276438337');" onmouseout="out('6804960621276438337');" style=""> 453             return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + dupId;                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 454         } else {                                                                                         </span>
<span class="-110948502599545681" onmouseenter="enter('-110948502599545681');" onmouseout="out('-110948502599545681');" style=""> 455             return getErrorDuplicatingResponse(response, &quot;Validation_Failure&quot;);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 457     }                                                                                                    </span>
<span  style=""> 458                                                                                                          </span>
<span class="-106656131545478097" onmouseenter="enter('-106656131545478097');" onmouseout="out('-106656131545478097');" style=""> 459     protected String getErrorDuplicatingResponse(HttpServletResponse response, String code) {            </span>
<span class="7659712838923572459" onmouseenter="enter('7659712838923572459');" onmouseout="out('7659712838923572459');" style=""> 460         List&lt;Map&lt;String, Object&gt;&gt; errors = new ArrayList&lt;&gt;();                                            </span>
<span class="-6240695079450735253" onmouseenter="enter('-6240695079450735253');" onmouseout="out('-6240695079450735253');" style=""> 461         String message;                                                                                  </span>
<span class="-7826420477706002406" onmouseenter="enter('-7826420477706002406');" onmouseout="out('-7826420477706002406');" style=""> 462         BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();          </span>
<span class="-2727648393614728" onmouseenter="enter('-2727648393614728');" onmouseout="out('-2727648393614728');" style=""> 463         if (context != null &amp;&amp; context.getMessageSource() != null) {                                     </span>
<span class="-5978418614812499702" onmouseenter="enter('-5978418614812499702');" onmouseout="out('-5978418614812499702');" style=""> 464             message = context.getMessageSource()                                                         </span>
<span class="1624598595284946587" onmouseenter="enter('1624598595284946587');" onmouseout="out('1624598595284946587');" style=""> 465                     .getMessage(code, null, code, context.getJavaLocale());                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 466         } else {                                                                                         </span>
<span class="-9004243737964586892" onmouseenter="enter('-9004243737964586892');" onmouseout="out('-9004243737964586892');" style=""> 467             LOG.warn(                                                                                    </span>
<span class="6269614064328325287" onmouseenter="enter('6269614064328325287');" onmouseout="out('6269614064328325287');" style=""> 468                     &quot;Could not find the MessageSource on the current request, &quot;                          </span>
<span class="-8208830135626721740" onmouseenter="enter('-8208830135626721740');" onmouseout="out('-8208830135626721740');" style=""> 469                             + &quot;not translating the message key&quot;);                                        </span>
<span class="599114272120646428" onmouseenter="enter('599114272120646428');" onmouseout="out('599114272120646428');" style=""> 470             message = &quot;Duplication_Failure&quot;;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 471         }                                                                                                </span>
<span  style=""> 472                                                                                                          </span>
<span class="-4703377271641004207" onmouseenter="enter('-4703377271641004207');" onmouseout="out('-4703377271641004207');" style=""> 473         Map&lt;String, Object&gt; errorMap = new HashMap&lt;&gt;();                                                  </span>
<span class="2851590661979449603" onmouseenter="enter('2851590661979449603');" onmouseout="out('2851590661979449603');" style=""> 474         errorMap.put(&quot;errorType&quot;, &quot;global&quot;);                                                             </span>
<span class="4738760182182965590" onmouseenter="enter('4738760182182965590');" onmouseout="out('4738760182182965590');" style=""> 475         errorMap.put(&quot;code&quot;, code);                                                                      </span>
<span class="7426718838785534996" onmouseenter="enter('7426718838785534996');" onmouseout="out('7426718838785534996');" style=""> 476         errorMap.put(&quot;message&quot;, message);                                                                </span>
<span class="-4906289066975989946" onmouseenter="enter('-4906289066975989946');" onmouseout="out('-4906289066975989946');" style=""> 477         errors.add(errorMap);                                                                            </span>
<span class="-8734340547513070222" onmouseenter="enter('-8734340547513070222');" onmouseout="out('-8734340547513070222');" style=""> 478         return new JsonResponse(response).with(&quot;errors&quot;, errors).done();                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 479     }                                                                                                    </span>
<span  style=""> 480                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 481     /**                                                                                                  </span>
<span class="9102199281013466170" onmouseenter="enter('9102199281013466170');" onmouseout="out('9102199281013466170');" style=""> 482      * Renders the main entity form for the specified entity                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 483      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 484      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 485      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 486      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 487      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 488      * @param id                                                                                         </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 489      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 490      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 491      */                                                                                                  </span>
<span class="7083955269921705584" onmouseenter="enter('7083955269921705584');" onmouseout="out('7083955269921705584');" style=""> 492     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)                                         </span>
<span class="-4309552397998806559" onmouseenter="enter('-4309552397998806559');" onmouseout="out('-4309552397998806559');" style=""> 493     public String viewEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 494             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-2194094146044801021" onmouseenter="enter('-2194094146044801021');" onmouseout="out('-2194094146044801021');" style=""> 495             @PathVariable(&quot;id&quot;) String id) throws Exception {                                            </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 496         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 497         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 498         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                           </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""><abbr title=" 499         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);"> 499         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, patðŸ”µ</abbr></span>
<span  style=""> 500                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 501         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-8780243800866475465" onmouseenter="enter('-8780243800866475465');" onmouseout="out('-8780243800866475465');" style=""> 502         Entity entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];    </span>
<span  style=""> 503                                                                                                          </span>
<span class="-8745713672993611458" onmouseenter="enter('-8745713672993611458');" onmouseout="out('-8745713672993611458');" style=""> 504         multipleCatalogExtensionManager.getProxy().setCurrentCatalog(entity, model);                     </span>
<span  style=""> 505                                                                                                          </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""><abbr title=" 506         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);"> 506         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, cðŸ”µ</abbr></span>
<span  style=""> 507                                                                                                          </span>
<span class="872584542219399793" onmouseenter="enter('872584542219399793');" onmouseout="out('872584542219399793');" style=""> 508         EntityForm entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);        </span>
<span  style=""> 509                                                                                                          </span>
<span class="1451551715319124344" onmouseenter="enter('1451551715319124344');" onmouseout="out('1451551715319124344');" style=""> 510         modifyEntityForm(entity, entityForm, pathVars);                                                  </span>
<span  style=""> 511                                                                                                          </span>
<span class="1981952247030149381" onmouseenter="enter('1981952247030149381');" onmouseout="out('1981952247030149381');" style=""> 512         if (request.getParameter(&quot;headerFlash&quot;) != null) {                                               </span>
<span class="-2367607735703612103" onmouseenter="enter('-2367607735703612103');" onmouseout="out('-2367607735703612103');" style=""> 513             model.addAttribute(&quot;headerFlash&quot;, request.getParameter(&quot;headerFlash&quot;));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 514         }                                                                                                </span>
<span  style=""> 515                                                                                                          </span>
<span class="-6569554975283424126" onmouseenter="enter('-6569554975283424126');" onmouseout="out('-6569554975283424126');" style=""> 516         // Set the sectionKey again incase this is a typed entity                                        </span>
<span class="4201932972037321722" onmouseenter="enter('4201932972037321722');" onmouseout="out('4201932972037321722');" style=""> 517         entityForm.setSectionKey(sectionKey);                                                            </span>
<span  style=""> 518                                                                                                          </span>
<span class="5387752430767952558" onmouseenter="enter('5387752430767952558');" onmouseout="out('5387752430767952558');" style=""> 519         // Build the current url in the cast that this is a typed entity                                 </span>
<span class="3856485652570637824" onmouseenter="enter('3856485652570637824');" onmouseout="out('3856485652570637824');" style=""> 520         String originatingUri = new UrlPathHelper().getOriginatingRequestUri(request);                   </span>
<span class="-1728408616530607173" onmouseenter="enter('-1728408616530607173');" onmouseout="out('-1728408616530607173');" style=""> 521         int startIndex = request.getContextPath().length();                                              </span>
<span  style=""> 522                                                                                                          </span>
<span class="654052499558570629" onmouseenter="enter('654052499558570629');" onmouseout="out('654052499558570629');" style=""> 523         // Remove the context path from servlet path                                                     </span>
<span class="526107488063217153" onmouseenter="enter('526107488063217153');" onmouseout="out('526107488063217153');" style=""> 524         String currentUrl = originatingUri.substring(startIndex);                                        </span>
<span  style=""> 525                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 526         model.addAttribute(&quot;entity&quot;, entity);                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 527         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-4977411250845897884" onmouseenter="enter('-4977411250845897884');" onmouseout="out('-4977411250845897884');" style=""> 528         model.addAttribute(&quot;currentUrl&quot;, currentUrl);                                                    </span>
<span class="5337717893660099657" onmouseenter="enter('5337717893660099657');" onmouseout="out('5337717893660099657');" style=""> 529         model.addAttribute(CURRENT_FOLDER_ID, getCurrentFolderId(request));                              </span>
<span  style=""> 530                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 531         setModelAttributes(model, sectionKey);                                                           </span>
<span  style=""> 532                                                                                                          </span>
<span class="8236570979651257825" onmouseenter="enter('8236570979651257825');" onmouseout="out('8236570979651257825');" style=""> 533         // We want to replace author ids with their names                                                </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style=""> 534         addAuditableDisplayFields(entityForm);                                                           </span>
<span  style=""> 535                                                                                                          </span>
<span class="858139107025117803" onmouseenter="enter('858139107025117803');" onmouseout="out('858139107025117803');" style=""> 536         return resolveAppropriateEntityView(request, model, entityForm);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 537     }                                                                                                    </span>
<span  style=""> 538                                                                                                          </span>
<span class="9182660926479189949" onmouseenter="enter('9182660926479189949');" onmouseout="out('9182660926479189949');" style=""><abbr title=" 539     protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, String&gt; pathVars,"> 539     protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, StrðŸ”µ</abbr></span>
<span class="4477928710658117231" onmouseenter="enter('4477928710658117231');" onmouseout="out('4477928710658117231');" style=""> 540                                                               ClassMetadata cmd, Entity entity,          </span>
<span class="5660295431162582196" onmouseenter="enter('5660295431162582196');" onmouseout="out('5660295431162582196');" style=""><abbr title=" 541                                                               List&lt;SectionCrumb&gt; crumbs) throws Exception {"> 541                                                               List&lt;SectionCrumb&gt; crumbs) throws ExceptionðŸ”µ</abbr></span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style=""> 542         String tabName = pathVars.get(&quot;tabName&quot;);                                                        </span>
<span class="5384642555226517985" onmouseenter="enter('5384642555226517985');" onmouseout="out('5384642555226517985');" style=""> 543         if (StringUtils.isEmpty(tabName)) {                                                              </span>
<span class="-3672533750283461484" onmouseenter="enter('-3672533750283461484');" onmouseout="out('-3672533750283461484');" style=""> 544             tabName = cmd.getFirstTab() == null ? &quot;General&quot; : cmd.getFirstTab().getTabName();            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545         }                                                                                                </span>
<span class="-5882478663361935855" onmouseenter="enter('-5882478663361935855');" onmouseout="out('-5882478663361935855');" style=""> 546         return service.getRecordsForSelectedTab(cmd, entity, crumbs, tabName);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 547     }                                                                                                    </span>
<span  style=""> 548                                                                                                          </span>
<span class="1953795048205106952" onmouseenter="enter('1953795048205106952');" onmouseout="out('1953795048205106952');" style=""> 549     private boolean isAddRequest(Entity entity) {                                                        </span>
<span class="-2989581670667655563" onmouseenter="enter('-2989581670667655563');" onmouseout="out('-2989581670667655563');" style=""> 550         ExtensionResultHolder&lt;Boolean&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                     </span>
<span class="2773544387861748911" onmouseenter="enter('2773544387861748911');" onmouseout="out('2773544387861748911');" style=""><abbr title=" 551         ExtensionResultStatusType result = extensionManager.getProxy().isAddRequest(entity, resultHolder);"> 551         ExtensionResultStatusType result = extensionManager.getProxy().isAddRequest(entity, resultHolder)ðŸ”µ</abbr></span>
<span class="8622638495597819717" onmouseenter="enter('8622638495597819717');" onmouseout="out('8622638495597819717');" style=""> 552         if (result.equals(ExtensionResultStatusType.NOT_HANDLED)) {                                      </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 553             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 554         }                                                                                                </span>
<span  style=""> 555                                                                                                          </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 556         return resultHolder.getResult();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 557     }                                                                                                    </span>
<span  style=""> 558                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 559     /**                                                                                                  </span>
<span class="-4864218972040039628" onmouseenter="enter('-4864218972040039628');" onmouseout="out('-4864218972040039628');" style=""> 560      * Attempts to get the List Grid for the selected tab.                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 561      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 562      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 563      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 564      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 565      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 566      * @param id                                                                                         </span>
<span class="4841027518362301903" onmouseenter="enter('4841027518362301903');" onmouseout="out('4841027518362301903');" style=""> 567      * @param tabName                                                                                    </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 568      * @param entityForm                                                                                 </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 569      * @param entity                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 570      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 571      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 572      */                                                                                                  </span>
<span class="-7675092144868804288" onmouseenter="enter('-7675092144868804288');" onmouseout="out('-7675092144868804288');" style=""> 573     @RequestMapping(value = &quot;/{id}/{tab:[0-9]+}/{tabName}&quot;, method = RequestMethod.POST)                 </span>
<span class="-2248541185927650044" onmouseenter="enter('-2248541185927650044');" onmouseout="out('-2248541185927650044');" style=""> 574     public String viewEntityTab(HttpServletRequest request, HttpServletResponse response, Model model,   </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 575             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 576             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="2259450910520289810" onmouseenter="enter('2259450910520289810');" onmouseout="out('2259450910520289810');" style=""> 577             @PathVariable(value = &quot;tabName&quot;) String tabName,                                             </span>
<span class="2754607649135651414" onmouseenter="enter('2754607649135651414');" onmouseout="out('2754607649135651414');" style=""> 578             @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm,                                 </span>
<span class="-2950467864443381399" onmouseenter="enter('-2950467864443381399');" onmouseout="out('-2950467864443381399');" style=""> 579             @ModelAttribute(value = &quot;entity&quot;) Entity entity) throws Exception {                          </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 580         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 581         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 582         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                           </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""><abbr title=" 583         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);"> 583         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, patðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 584         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 585         entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];           </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""><abbr title=" 586         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);"> 586         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, cðŸ”µ</abbr></span>
<span class="-3846048132763499568" onmouseenter="enter('-3846048132763499568');" onmouseout="out('-3846048132763499568');" style=""> 587         entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);                   </span>
<span  style=""> 588                                                                                                          </span>
<span class="1451551715319124344" onmouseenter="enter('1451551715319124344');" onmouseout="out('1451551715319124344');" style=""> 589         modifyEntityForm(entity, entityForm, pathVars);                                                  </span>
<span  style=""> 590                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 591         model.addAttribute(&quot;entity&quot;, entity);                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 592         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 593         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span  style=""> 594                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 595         setModelAttributes(model, sectionKey);                                                           </span>
<span  style=""> 596                                                                                                          </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 597         model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                       </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 598         model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                    </span>
<span  style=""> 599                                                                                                          </span>
<span class="-4487883013655706388" onmouseenter="enter('-4487883013655706388');" onmouseout="out('-4487883013655706388');" style=""> 600         return DEFAULT_CONTAINER_VIEW;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601     }                                                                                                    </span>
<span  style=""> 602                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 603     /**                                                                                                  </span>
<span class="26428616724277901" onmouseenter="enter('26428616724277901');" onmouseout="out('26428616724277901');" style=""> 604      * Builds JSON that looks like this:                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 605      *                                                                                                   </span>
<span class="-619170819873097874" onmouseenter="enter('-619170819873097874');" onmouseout="out('-619170819873097874');" style=""> 606      * {&quot;errors&quot;:                                                                                        </span>
<span class="-7867797149207986089" onmouseenter="enter('-7867797149207986089');" onmouseout="out('-7867797149207986089');" style=""> 607      *      [{&quot;message&quot;:&quot;This field is Required&quot;,                                                        </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 608      *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                        </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 609      *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 610      *        &quot;errorType&quot;, &quot;field&quot;,                                                                      </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 611      *        &quot;tab&quot;: &quot;General&quot;                                                                           </span>
<span class="762081609125064039" onmouseenter="enter('762081609125064039');" onmouseout="out('762081609125064039');" style=""> 612      *        },                                                                                         </span>
<span class="2065208195238134241" onmouseenter="enter('2065208195238134241');" onmouseout="out('2065208195238134241');" style=""> 613      *        {&quot;message&quot;:&quot;This field is Required&quot;,                                                       </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 614      *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                        </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 615      *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 616      *        &quot;errorType&quot;, &quot;field&quot;,                                                                      </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 617      *        &quot;tab&quot;: &quot;General&quot;                                                                           </span>
<span class="-832778532632947969" onmouseenter="enter('-832778532632947969');" onmouseout="out('-832778532632947969');" style=""> 618      *        }]                                                                                         </span>
<span class="8941010846014250828" onmouseenter="enter('8941010846014250828');" onmouseout="out('8941010846014250828');" style=""> 619      * }                                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 620      *                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 621      */                                                                                                  </span>
<span class="726178843151373675" onmouseenter="enter('726178843151373675');" onmouseout="out('726178843151373675');" style=""> 622     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST, produces = &quot;application/json&quot;)         </span>
<span class="-4245682307765667372" onmouseenter="enter('-4245682307765667372');" onmouseout="out('-4245682307765667372');" style=""> 623     public String saveEntityJson(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 624             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 625             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="-5165411007609652701" onmouseenter="enter('-5165411007609652701');" onmouseout="out('-5165411007609652701');" style=""> 626             @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm, BindingResult result,           </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 627             RedirectAttributes ra) throws Exception {                                                    </span>
<span  style=""> 628                                                                                                          </span>
<span class="-7049584637685461961" onmouseenter="enter('-7049584637685461961');" onmouseout="out('-7049584637685461961');" style=""> 629         saveEntity(request, response, model, pathVars, id, entityForm, result, ra);                      </span>
<span  style=""> 630                                                                                                          </span>
<span class="2770382331963423086" onmouseenter="enter('2770382331963423086');" onmouseout="out('2770382331963423086');" style=""> 631         JsonResponse json = new JsonResponse(response);                                                  </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 632         if (result.hasErrors()) {                                                                        </span>
<span class="6668101882629849049" onmouseenter="enter('6668101882629849049');" onmouseout="out('6668101882629849049');" style=""> 633             populateJsonValidationErrors(entityForm, result, json);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 634         }                                                                                                </span>
<span class="-8719030961107019295" onmouseenter="enter('-8719030961107019295');" onmouseout="out('-8719030961107019295');" style=""> 635         List&lt;String&gt; dirtyList = buildDirtyList(pathVars, request, id);                                  </span>
<span class="-2397478597494600131" onmouseenter="enter('-2397478597494600131');" onmouseout="out('-2397478597494600131');" style=""> 636         if (CollectionUtils.isNotEmpty(dirtyList)) {                                                     </span>
<span class="-6863151800017638945" onmouseenter="enter('-6863151800017638945');" onmouseout="out('-6863151800017638945');" style=""> 637             json.with(&quot;dirty&quot;, dirtyList);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 638         }                                                                                                </span>
<span  style=""> 639                                                                                                          </span>
<span class="1148846903613025505" onmouseenter="enter('1148846903613025505');" onmouseout="out('1148846903613025505');" style=""> 640         ExtensionResultHolder&lt;String&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                      </span>
<span class="772761850497532920" onmouseenter="enter('772761850497532920');" onmouseout="out('772761850497532920');" style=""><abbr title=" 641         ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonResponse(response, result.hasErrors(), getSectionKey(pathVars), id, resultHolder);"> 641         ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonReðŸ”µ</abbr></span>
<span class="-7225919658162387284" onmouseenter="enter('-7225919658162387284');" onmouseout="out('-7225919658162387284');" style=""> 642         if (resultStatusType.equals(ExtensionResultStatusType.HANDLED)) {                                </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 643             return resultHolder.getResult();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644         }                                                                                                </span>
<span  style=""> 645                                                                                                          </span>
<span class="-3901811907821215875" onmouseenter="enter('-3901811907821215875');" onmouseout="out('-3901811907821215875');" style=""> 646         return json.done();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647     }                                                                                                    </span>
<span  style=""> 648                                                                                                          </span>
<span class="-2624067384280123527" onmouseenter="enter('-2624067384280123527');" onmouseout="out('-2624067384280123527');" style=""><abbr title=" 649     public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String id) throws ServiceException {"> 649     public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String iðŸ”µ</abbr></span>
<span class="-6199220983064020273" onmouseenter="enter('-6199220983064020273');" onmouseout="out('-6199220983064020273');" style=""> 650         List&lt;String&gt; dirtyList = new ArrayList&lt;&gt;();                                                      </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 651         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 652         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 653         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 654         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 654         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="-6293964121119142853" onmouseenter="enter('-6293964121119142853');" onmouseout="out('-6293964121119142853');" style=""> 655         ClassMetadata cmd = null;                                                                        </span>
<span class="-6100049554794336383" onmouseenter="enter('-6100049554794336383');" onmouseout="out('-6100049554794336383');" style=""> 656         Entity entity = null;                                                                            </span>
<span class="-7221558264805358950" onmouseenter="enter('-7221558264805358950');" onmouseout="out('-7221558264805358950');" style=""> 657         cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();                    </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 658         entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];           </span>
<span  style=""> 659                                                                                                          </span>
<span class="-538034338216639378" onmouseenter="enter('-538034338216639378');" onmouseout="out('-538034338216639378');" style=""> 660         for (Property p: entity.getProperties()) {                                                       </span>
<span class="-5586383415891827802" onmouseenter="enter('-5586383415891827802');" onmouseout="out('-5586383415891827802');" style=""> 661             if (p.getIsDirty()) {                                                                        </span>
<span class="-1571805809811752662" onmouseenter="enter('-1571805809811752662');" onmouseout="out('-1571805809811752662');" style=""> 662                 dirtyList.add(p.getName());                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 663             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 664         }                                                                                                </span>
<span class="7211627429904225799" onmouseenter="enter('7211627429904225799');" onmouseout="out('7211627429904225799');" style=""> 665         return dirtyList;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666     }                                                                                                    </span>
<span  style=""> 667                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 668     /**                                                                                                  </span>
<span class="-1912365624495655250" onmouseenter="enter('-1912365624495655250');" onmouseout="out('-1912365624495655250');" style=""><abbr title=" 669      * Attempts to save the given entity. If validation is unsuccessful, it will re-render the entity form with"> 669      * Attempts to save the given entity. If validation is unsuccessful, it will re-render the entity forðŸ”µ</abbr></span>
<span class="3378821078357952120" onmouseenter="enter('3378821078357952120');" onmouseout="out('3378821078357952120');" style=""> 670      * error fields highlighted. On a successful save, it will refresh the entity page.                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 671      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 672      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 673      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 674      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 675      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 676      * @param id                                                                                         </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 677      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 678      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 679      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 680      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 681      */                                                                                                  </span>
<span class="681227659796054179" onmouseenter="enter('681227659796054179');" onmouseout="out('681227659796054179');" style=""> 682     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST)                                        </span>
<span class="2696827203115285075" onmouseenter="enter('2696827203115285075');" onmouseout="out('2696827203115285075');" style=""> 683     public String saveEntity(HttpServletRequest request, HttpServletResponse response, Model model,      </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 684             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 685             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 686             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,             </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 687             RedirectAttributes ra) throws Exception {                                                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 688         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 689         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 690         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 691         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 691         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 692         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span  style=""> 693                                                                                                          </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 694         extractDynamicFormFields(cmd, entityForm);                                                       </span>
<span  style=""> 695                                                                                                          </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 696         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 696         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="-4517703585527939334" onmouseenter="enter('-4517703585527939334');" onmouseout="out('-4517703585527939334');" style=""> 697         Entity entity = service.updateEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();    </span>
<span  style=""> 698                                                                                                          </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 699         entityFormValidator.validate(entityForm, entity, result);                                        </span>
<span  style=""> 700                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 701         if (result.hasErrors()) {                                                                        </span>
<span class="-9083492279253959347" onmouseenter="enter('-9083492279253959347');" onmouseout="out('-9083492279253959347');" style=""> 702             model.addAttribute(&quot;headerFlash&quot;, &quot;save.unsuccessful&quot;);                                      </span>
<span class="-3255113992478543295" onmouseenter="enter('-3255113992478543295');" onmouseout="out('-3255113992478543295');" style=""> 703             model.addAttribute(&quot;headerFlashAlert&quot;, true);                                                </span>
<span  style=""> 704                                                                                                          </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 705             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 705             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 706             entityForm.clearFieldsMap();                                                                 </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 707             formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);       </span>
<span  style=""> 708                                                                                                          </span>
<span class="1451551715319124344" onmouseenter="enter('1451551715319124344');" onmouseout="out('1451551715319124344');" style=""> 709             modifyEntityForm(entity, entityForm, pathVars);                                              </span>
<span  style=""> 710                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 711             model.addAttribute(&quot;entity&quot;, entity);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 712             model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                        </span>
<span  style=""> 713                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 714             setModelAttributes(model, sectionKey);                                                       </span>
<span  style=""> 715                                                                                                          </span>
<span class="858139107025117803" onmouseenter="enter('858139107025117803');" onmouseout="out('858139107025117803');" style=""> 716             return resolveAppropriateEntityView(request, model, entityForm);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 717         }                                                                                                </span>
<span  style=""> 718                                                                                                          </span>
<span class="-8977665602521560288" onmouseenter="enter('-8977665602521560288');" onmouseout="out('-8977665602521560288');" style=""> 719         ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;save.successful&quot;);                                          </span>
<span  style=""> 720                                                                                                          </span>
<span class="5326436654777975784" onmouseenter="enter('5326436654777975784');" onmouseout="out('5326436654777975784');" style=""> 721         return &quot;redirect:/&quot; + sectionKey + &quot;/&quot; + id;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 722     }                                                                                                    </span>
<span  style=""> 723                                                                                                          </span>
<span class="-1036069149620696687" onmouseenter="enter('-1036069149620696687');" onmouseout="out('-1036069149620696687');" style=""> 724     protected void modifyEntityForm(final Entity entity, final EntityForm entityForm,                    </span>
<span class="-2182671422299427893" onmouseenter="enter('-2182671422299427893');" onmouseout="out('-2182671422299427893');" style=""> 725             final Map&lt;String, String&gt; pathVars) throws Exception {                                       </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 726         if (isAddRequest(entity)) {                                                                      </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 727             modifyAddEntityForm(entityForm, pathVars);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 728         } else {                                                                                         </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 729             modifyEntityForm(entityForm, pathVars);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 730         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 731     }                                                                                                    </span>
<span  style=""> 732                                                                                                          </span>
<span class="7327611436230860688" onmouseenter="enter('7327611436230860688');" onmouseout="out('7327611436230860688');" style=""> 733     protected String resolveAppropriateEntityView(final HttpServletRequest request,                      </span>
<span class="7665770463560391322" onmouseenter="enter('7665770463560391322');" onmouseout="out('7665770463560391322');" style=""> 734             final Model model,                                                                           </span>
<span class="6537819747648345888" onmouseenter="enter('6537819747648345888');" onmouseout="out('6537819747648345888');" style=""> 735             final @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) {                         </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 736         if (isAjaxRequest(request)) {                                                                    </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style=""> 737             entityForm.setReadOnly();                                                                    </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style=""> 738             model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                          </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style=""> 739             model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style=""> 740             return MODAL_CONTAINER_VIEW;                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 741         } else {                                                                                         </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 742             model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                   </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 743             model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                </span>
<span class="-4487883013655706388" onmouseenter="enter('-4487883013655706388');" onmouseout="out('-4487883013655706388');" style=""> 744             return DEFAULT_CONTAINER_VIEW;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 745         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 746     }                                                                                                    </span>
<span  style=""> 747                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 748     /**                                                                                                  </span>
<span class="4876253458579857532" onmouseenter="enter('4876253458579857532');" onmouseout="out('4876253458579857532');" style=""> 749      * Attempts to remove the given entity.                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 750      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 751      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 752      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 753      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 754      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 755      * @param id                                                                                         </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 756      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 757      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 758      */                                                                                                  </span>
<span class="8293921381301703428" onmouseenter="enter('8293921381301703428');" onmouseout="out('8293921381301703428');" style=""> 759     @RequestMapping(value = &quot;/{id}/delete&quot;, method = RequestMethod.POST)                                 </span>
<span class="2313354717081876463" onmouseenter="enter('2313354717081876463');" onmouseout="out('2313354717081876463');" style=""> 760     public String removeEntity(HttpServletRequest request, HttpServletResponse response, Model model,    </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 761             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 762             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 763             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,             </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 764             RedirectAttributes ra) throws Exception {                                                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 765         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 766         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 767         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span  style=""> 768                                                                                                          </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 769         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 769         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="6624819200143935214" onmouseenter="enter('6624819200143935214');" onmouseout="out('6624819200143935214');" style=""> 770         Entity entity = service.removeEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();    </span>
<span class="-6561774320633688873" onmouseenter="enter('-6561774320633688873');" onmouseout="out('-6561774320633688873');" style=""> 771         // Removal does not normally return an Entity unless there is some validation error              </span>
<span class="-2807113977407494827" onmouseenter="enter('-2807113977407494827');" onmouseout="out('-2807113977407494827');" style=""> 772         if (entity != null) {                                                                            </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 773             entityFormValidator.validate(entityForm, entity, result);                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 774             if (result.hasErrors()) {                                                                    </span>
<span class="354313568014337940" onmouseenter="enter('354313568014337940');" onmouseout="out('354313568014337940');" style=""> 775                 // Create a flash attribute for the unsuccessful delete                                  </span>
<span class="-3408473788799892596" onmouseenter="enter('-3408473788799892596');" onmouseout="out('-3408473788799892596');" style=""> 776                 FlashMap fm = new FlashMap();                                                            </span>
<span class="-3785724779356953427" onmouseenter="enter('-3785724779356953427');" onmouseout="out('-3785724779356953427');" style=""> 777                 fm.put(&quot;headerFlash&quot;, &quot;delete.unsuccessful&quot;);                                            </span>
<span class="2000410372434500283" onmouseenter="enter('2000410372434500283');" onmouseout="out('2000410372434500283');" style=""> 778                 fm.put(&quot;headerFlashAlert&quot;, true);                                                        </span>
<span class="-216272657842661141" onmouseenter="enter('-216272657842661141');" onmouseout="out('-216272657842661141');" style=""> 779                 request.setAttribute(DispatcherServlet.OUTPUT_FLASH_MAP_ATTRIBUTE, fm);                  </span>
<span  style=""> 780                                                                                                          </span>
<span class="-9154666565283892619" onmouseenter="enter('-9154666565283892619');" onmouseout="out('-9154666565283892619');" style=""> 781                 // Re-look back up the entity so that we can return something populated                  </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 782                 PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 782                 PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, secðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""><abbr title=" 783                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 783                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData(ðŸ”µ</abbr></span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 784                 entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];   </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 785                 Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 785                 Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr,ðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 786                 entityForm.clearFieldsMap();                                                             </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 787                 formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);   </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 788                 modifyEntityForm(entityForm, pathVars);                                                  </span>
<span  style=""> 789                                                                                                          </span>
<span class="-1358530666837283115" onmouseenter="enter('-1358530666837283115');" onmouseout="out('-1358530666837283115');" style=""> 790                 return populateJsonValidationErrors(entityForm, result, new JsonResponse(response))      </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style=""> 791                         .done();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 792             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 793         }                                                                                                </span>
<span  style=""> 794                                                                                                          </span>
<span class="3611526951082120901" onmouseenter="enter('3611526951082120901');" onmouseout="out('3611526951082120901');" style=""> 795         ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;delete.successful&quot;);                                        </span>
<span class="2579818068351246488" onmouseenter="enter('2579818068351246488');" onmouseout="out('2579818068351246488');" style=""> 796         ra.addFlashAttribute(&quot;headerFlashAlert&quot;, true);                                                  </span>
<span  style=""> 797                                                                                                          </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 798         if (isAjaxRequest(request)) {                                                                    </span>
<span class="-5684384949344822714" onmouseenter="enter('-5684384949344822714');" onmouseout="out('-5684384949344822714');" style=""> 799             // redirect attributes won&#x27;t work here since ajaxredirect actually makes a new request       </span>
<span class="-9107475529968351628" onmouseenter="enter('-9107475529968351628');" onmouseout="out('-9107475529968351628');" style=""><abbr title=" 800             return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;?headerFlash=delete.successful&quot;;"> 800             return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;?headerFlash=delete.successfðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 801         } else {                                                                                         </span>
<span class="4357427724598824699" onmouseenter="enter('4357427724598824699');" onmouseout="out('4357427724598824699');" style=""> 802             return &quot;redirect:/&quot; + sectionKey;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 803         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 804     }                                                                                                    </span>
<span  style=""> 805                                                                                                          </span>
<span class="-2983794507366563158" onmouseenter="enter('-2983794507366563158');" onmouseout="out('-2983794507366563158');" style=""> 806     @RequestMapping(value = &quot;/{collectionField:.*}/details&quot;, method = RequestMethod.GET)                 </span>
<span class="-527911248282232950" onmouseenter="enter('-527911248282232950');" onmouseout="out('-527911248282232950');" style=""><abbr title=" 807     public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpServletResponse response, Model model,"> 807     public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpSeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 808             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 809             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-5250072335910309101" onmouseenter="enter('-5250072335910309101');" onmouseout="out('-5250072335910309101');" style=""> 810             @RequestParam String ids,                                                                    </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 811             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 812         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 813         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 814         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="-5225610456611199616" onmouseenter="enter('-5225610456611199616');" onmouseout="out('-5225610456611199616');" style=""><abbr title=" 815         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, sectionCrumbs, pathVars);"> 815         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""><abbr title=" 816         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 816         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDataðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 817         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style=""> 818         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style=""> 819                                                                                                          </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style=""> 820         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span class="-2120492003233088270" onmouseenter="enter('-2120492003233088270');" onmouseout="out('-2120492003233088270');" style=""> 821         ppr.setStartIndex(getStartIndex(requestParams));                                                 </span>
<span class="2736790979641523309" onmouseenter="enter('2736790979641523309');" onmouseout="out('2736790979641523309');" style=""> 822         ppr.setMaxIndex(getMaxIndex(requestParams));                                                     </span>
<span  style=""> 823                                                                                                          </span>
<span class="-8000769512056204294" onmouseenter="enter('-8000769512056204294');" onmouseout="out('-8000769512056204294');" style=""> 824         if (md instanceof BasicFieldMetadata) {                                                          </span>
<span class="-1954892043355765019" onmouseenter="enter('-1954892043355765019');" onmouseout="out('-1954892043355765019');" style=""> 825             String idProp = ((BasicFieldMetadata) md).getForeignKeyProperty();                           </span>
<span class="6288096257758990604" onmouseenter="enter('6288096257758990604');" onmouseout="out('6288096257758990604');" style=""> 826             String displayProp = ((BasicFieldMetadata) md).getForeignKeyDisplayValueProperty();          </span>
<span  style=""> 827                                                                                                          </span>
<span class="-6477100624593005266" onmouseenter="enter('-6477100624593005266');" onmouseout="out('-6477100624593005266');" style=""> 828             List&lt;String&gt; filterValues = BLCArrayUtils.asList(ids.split(FILTER_VALUE_SEPARATOR_REGEX));   </span>
<span class="3640259021720155935" onmouseenter="enter('3640259021720155935');" onmouseout="out('3640259021720155935');" style=""> 829             ppr.addFilterAndSortCriteria(new FilterAndSortCriteria(idProp, filterValues));               </span>
<span  style=""> 830                                                                                                          </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style=""> 831             DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                        </span>
<span class="-2768740094948248396" onmouseenter="enter('-2768740094948248396');" onmouseout="out('-2768740094948248396');" style=""> 832             Map&lt;String, String&gt; returnMap = new HashMap&lt;&gt;();                                             </span>
<span  style=""> 833                                                                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 834             for (Entity e : drs.getRecords()) {                                                          </span>
<span class="4979367110517822568" onmouseenter="enter('4979367110517822568');" onmouseout="out('4979367110517822568');" style=""> 835                 String id = e.getPMap().get(idProp).getValue();                                          </span>
<span class="-4946347213336092877" onmouseenter="enter('-4946347213336092877');" onmouseout="out('-4946347213336092877');" style=""> 836                 String disp = e.getPMap().get(displayProp).getDisplayValue();                            </span>
<span  style=""> 837                                                                                                          </span>
<span class="3483982845402449596" onmouseenter="enter('3483982845402449596');" onmouseout="out('3483982845402449596');" style=""> 838                 if (StringUtils.isBlank(disp)) {                                                         </span>
<span class="-2027181132953179584" onmouseenter="enter('-2027181132953179584');" onmouseout="out('-2027181132953179584');" style=""> 839                     disp = e.getPMap().get(displayProp).getValue();                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 840                 }                                                                                        </span>
<span  style=""> 841                                                                                                          </span>
<span class="-1075893121428940879" onmouseenter="enter('-1075893121428940879');" onmouseout="out('-1075893121428940879');" style=""> 842                 returnMap.put(id,  disp);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 843             }                                                                                            </span>
<span  style=""> 844                                                                                                          </span>
<span class="9157811424862351106" onmouseenter="enter('9157811424862351106');" onmouseout="out('9157811424862351106');" style=""> 845             return returnMap;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846         }                                                                                                </span>
<span  style=""> 847                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 848         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 849     }                                                                                                    </span>
<span  style=""> 850                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 851     /**                                                                                                  </span>
<span class="7896529828316523089" onmouseenter="enter('7896529828316523089');" onmouseout="out('7896529828316523089');" style=""><abbr title=" 852      * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a list of products"> 852      * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a ðŸ”µ</abbr></span>
<span class="8702245574166025616" onmouseenter="enter('8702245574166025616');" onmouseout="out('8702245574166025616');" style=""> 853      * then this method is invoked when a user clicks on the name of the default category field.         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 854      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 855      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 856      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 857      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 858      * @param pathVars                                                                                   </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 859      * @param collectionField                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 860      * @param id                                                                                         </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 861      * @return                                                                                           </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 862      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 863      */                                                                                                  </span>
<span class="1405910210670150204" onmouseenter="enter('1405910210670150204');" onmouseout="out('1405910210670150204');" style=""> 864     @RequestMapping(value = &quot;/{collectionField:.*}/{id}/view&quot;, method = RequestMethod.GET)               </span>
<span class="-5496524556428427140" onmouseenter="enter('-5496524556428427140');" onmouseout="out('-5496524556428427140');" style=""><abbr title=" 865     public String viewCollectionItemDetails(HttpServletRequest request, HttpServletResponse response, Model model,"> 865     public String viewCollectionItemDetails(HttpServletRequest request, HttpServletResponse response, ModðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 866             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 867             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-1857511616350008386" onmouseenter="enter('-1857511616350008386');" onmouseout="out('-1857511616350008386');" style=""> 868             @PathVariable(value=&quot;id&quot;) String id) throws Exception {                                      </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 869         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 870         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 871         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title=" 872         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 872         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 873         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="2157347470680130722" onmouseenter="enter('2157347470680130722');" onmouseout="out('2157347470680130722');" style=""> 874         BasicFieldMetadata md = (BasicFieldMetadata) collectionProperty.getMetadata();                   </span>
<span  style=""> 875                                                                                                          </span>
<span class="-1856968160831305726" onmouseenter="enter('-1856968160831305726');" onmouseout="out('-1856968160831305726');" style=""><abbr title=" 876         AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeyClass(), sectionKey);"> 876         AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeðŸ”µ</abbr></span>
<span class="-151095669048618305" onmouseenter="enter('-151095669048618305');" onmouseout="out('-151095669048618305');" style=""><abbr title=" 877         String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : section.getUrl();"> 877         String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : sectiðŸ”µ</abbr></span>
<span class="4949862081138664893" onmouseenter="enter('4949862081138664893');" onmouseout="out('4949862081138664893');" style=""> 878         Map&lt;String, String&gt; varsForField = new HashMap&lt;&gt;();                                              </span>
<span class="-4429965231898090358" onmouseenter="enter('-4429965231898090358');" onmouseout="out('-4429965231898090358');" style=""> 879         varsForField.put(&quot;sectionKey&quot;, sectionUrlKey);                                                   </span>
<span class="4805235980730638518" onmouseenter="enter('4805235980730638518');" onmouseout="out('4805235980730638518');" style=""> 880         return viewEntityForm(request, response, model, varsForField, id);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 881     }                                                                                                    </span>
<span  style=""> 882                                                                                                          </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style=""> 883     @RequestMapping(                                                                                     </span>
<span class="4528666449367390600" onmouseenter="enter('4528666449367390600');" onmouseout="out('4528666449367390600');" style=""> 884             value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{tab:[0-9]+}/{tabName}&quot;,              </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style=""> 885             method = RequestMethod.POST                                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 886     )                                                                                                    </span>
<span class="1786222500639285262" onmouseenter="enter('1786222500639285262');" onmouseout="out('1786222500639285262');" style=""><abbr title=" 887     public String viewCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,"> 887     public String viewCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model mðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 888                                         @PathVariable  Map&lt;String, String&gt; pathVars,                     </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 889                                         @PathVariable(value=&quot;id&quot;) String id,                             </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 890                                         @PathVariable(value=&quot;collectionField&quot;) String collectionField,   </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style=""> 891                                         @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId, </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style=""> 892                                         @PathVariable(value=&quot;tabName&quot;) String tabName,                   </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title=" 893                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {"> 893                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throðŸ”µ</abbr></span>
<span  style=""> 894                                                                                                          </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title=" 895         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);"> 895         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 896     }                                                                                                    </span>
<span  style=""> 897                                                                                                          </span>
<span  style=""> 898                                                                                                          </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style=""> 899     @RequestMapping(                                                                                     </span>
<span class="-3329921938797888660" onmouseenter="enter('-3329921938797888660');" onmouseout="out('-3329921938797888660');" style=""> 900             value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view/{tab:[0-9]+}/{tabName}&quot;,         </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style=""> 901             method = RequestMethod.POST                                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 902     )                                                                                                    </span>
<span class="546530564983480962" onmouseenter="enter('546530564983480962');" onmouseout="out('546530564983480962');" style=""><abbr title=" 903     public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,"> 903     public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response,ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 904                                         @PathVariable  Map&lt;String, String&gt; pathVars,                     </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 905                                         @PathVariable(value=&quot;id&quot;) String id,                             </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 906                                         @PathVariable(value=&quot;collectionField&quot;) String collectionField,   </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style=""> 907                                         @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId, </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style=""> 908                                         @PathVariable(value=&quot;tabName&quot;) String tabName,                   </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title=" 909                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {"> 909                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throðŸ”µ</abbr></span>
<span  style=""> 910                                                                                                          </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title=" 911         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);"> 911         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 912     }                                                                                                    </span>
<span  style=""> 913                                                                                                          </span>
<span  style=""> 914                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 915     /**                                                                                                  </span>
<span class="1274042523848442367" onmouseenter="enter('1274042523848442367');" onmouseout="out('1274042523848442367');" style=""> 916      * Returns the records for a given collectionField filtered by a particular criteria                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 917      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 918      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 919      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 920      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 921      * @param pathVars                                                                                   </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 922      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 923      * @param requestParams                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 924      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 925      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 926      */                                                                                                  </span>
<span class="-4095443548484775059" onmouseenter="enter('-4095443548484775059');" onmouseout="out('-4095443548484775059');" style=""> 927     @RequestMapping(value = &quot;/{id}/{collectionField:.*}&quot;, method = RequestMethod.GET)                    </span>
<span class="-5889287394210369546" onmouseenter="enter('-5889287394210369546');" onmouseout="out('-5889287394210369546');" style=""><abbr title=" 928     public String getCollectionFieldRecords(HttpServletRequest request, HttpServletResponse response, Model model,"> 928     public String getCollectionFieldRecords(HttpServletRequest request, HttpServletResponse response, ModðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 929             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 930             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 931             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="3465670919255037355" onmouseenter="enter('3465670919255037355');" onmouseout="out('3465670919255037355');" style=""> 932             @RequestParam  MultiValueMap&lt;String, String&gt; requestParams) throws Exception {               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 933         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 934         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 935         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-6545915569490985196" onmouseenter="enter('-6545915569490985196');" onmouseout="out('-6545915569490985196');" style=""><abbr title=" 936         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams, sectionCrumbs, pathVars);"> 936         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams,ðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""><abbr title=" 937         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 937         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDataðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 938         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style=""> 939                                                                                                          </span>
<span class="-3734134243620930531" onmouseenter="enter('-3734134243620930531');" onmouseout="out('-3734134243620930531');" style=""> 940         ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);               </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title=" 941         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];"> 941         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span  style=""> 942                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style=""> 943         // Next, we must get the new list grid that represents this collection                           </span>
<span class="-8440278474384944243" onmouseenter="enter('-8440278474384944243');" onmouseout="out('-8440278474384944243');" style=""><abbr title=" 944         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParams, sectionKey, sectionCrumbs);"> 944         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParamsðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style=""> 945         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style=""> 946                                                                                                          </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style=""> 947         model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));       </span>
<span  style=""> 948                                                                                                          </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style=""> 949         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 950         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style=""> 951         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 952     }                                                                                                    </span>
<span  style=""> 953                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 954     /**                                                                                                  </span>
<span class="-2279175998905644242" onmouseenter="enter('-2279175998905644242');" onmouseout="out('-2279175998905644242');" style=""><abbr title=" 955      * Shows the modal dialog that is used to add an item to a given collection. There are several possible outcomes"> 955      * Shows the modal dialog that is used to add an item to a given collection. There are several possibðŸ”µ</abbr></span>
<span class="-3490572548815062734" onmouseenter="enter('-3490572548815062734');" onmouseout="out('-3490572548815062734');" style=""> 956      * of this call depending on the type of the specified collection field.                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 957      *                                                                                                   </span>
<span class="2717555647352622731" onmouseenter="enter('2717555647352622731');" onmouseout="out('2717555647352622731');" style=""> 958      * &lt;ul&gt;                                                                                              </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 959      *  &lt;li&gt;                                                                                             </span>
<span class="4930235181592711719" onmouseenter="enter('4930235181592711719');" onmouseout="out('4930235181592711719');" style=""><abbr title=" 960      *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so that the user may"> 960      *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so thaðŸ”µ</abbr></span>
<span class="-3142080293607523336" onmouseenter="enter('-3142080293607523336');" onmouseout="out('-3142080293607523336');" style=""><abbr title=" 961      *    enter information and associate the record with this collection. Used by fields such as ProductAttribute."> 961      *    enter information and associate the record with this collection. Used by fields such as ProductðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 962      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 963      *  &lt;li&gt;                                                                                             </span>
<span class="6319691685860667757" onmouseenter="enter('6319691685860667757');" onmouseout="out('6319691685860667757');" style=""><abbr title=" 964      *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and select it."> 964      *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entiðŸ”µ</abbr></span>
<span class="-8731186021492741581" onmouseenter="enter('-8731186021492741581');" onmouseout="out('-8731186021492741581');" style=""> 965      *    Used by fields such as &quot;allParentCategories&quot;.                                                  </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 966      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 967      *  &lt;li&gt;                                                                                             </span>
<span class="-6847404578833725914" onmouseenter="enter('-6847404578833725914');" onmouseout="out('-6847404578833725914');" style=""><abbr title=" 968      *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and"> 968      *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click onðŸ”µ</abbr></span>
<span class="568361472595397074" onmouseenter="enter('568361472595397074');" onmouseout="out('568361472595397074');" style=""><abbr title=" 969      *    select it. The view rendered by this is identical to basic collection (lookup), but will perform the operation"> 969      *    select it. The view rendered by this is identical to basic collection (lookup), but will perforðŸ”µ</abbr></span>
<span class="-4048066359856567222" onmouseenter="enter('-4048066359856567222');" onmouseout="out('-4048066359856567222');" style=""><abbr title=" 970      *    on an adorned field, which may carry extra meta-information about the created relationship, such as order."> 970      *    on an adorned field, which may carry extra meta-information about the created relationship, sucðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 971      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 972      *  &lt;li&gt;                                                                                             </span>
<span class="7355096557601214207" onmouseenter="enter('7355096557601214207');" onmouseout="out('7355096557601214207');" style=""><abbr title=" 973      *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and"> 973      *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on anðŸ”µ</abbr></span>
<span class="-146713903552295440" onmouseenter="enter('-146713903552295440');" onmouseout="out('-146713903552295440');" style=""><abbr title=" 974      *    select it. Once the user selects the entity, he will be presented with an empty form based on the specified"> 974      *    select it. Once the user selects the entity, he will be presented with an empty form based on tðŸ”µ</abbr></span>
<span class="7585671366133275820" onmouseenter="enter('7585671366133275820');" onmouseout="out('7585671366133275820');" style=""><abbr title=" 975      *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, which in addition"> 975      *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, whiðŸ”µ</abbr></span>
<span class="7350312284882119043" onmouseenter="enter('7350312284882119043');" onmouseout="out('7350312284882119043');" style=""> 976      *    to linking an entity, provide extra fields, such as a promotional message.                     </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 977      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 978      *  &lt;li&gt;                                                                                             </span>
<span class="8829232354049589291" onmouseenter="enter('8829232354049589291');" onmouseout="out('8829232354049589291');" style=""><abbr title=" 979      *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. This field is"> 979      *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. ðŸ”µ</abbr></span>
<span class="-8508051731153769866" onmouseenter="enter('-8508051731153769866');" onmouseout="out('-8508051731153769866');" style=""><abbr title=" 980      *    populated either from the configured map keys, or as a result of a lookup in the case of a key based on another"> 980      *    populated either from the configured map keys, or as a result of a lookup in the case of a key ðŸ”µ</abbr></span>
<span class="-6056737616128420156" onmouseenter="enter('-6056737616128420156');" onmouseout="out('-6056737616128420156');" style=""> 981      *    entity. Used by fields such as the mediaMap on a Sku.                                          </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 982      *  &lt;/li&gt;                                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 983      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 984      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 985      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 986      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 987      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 988      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 989      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 990      * @param requestParams                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 991      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 992      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 993      */                                                                                                  </span>
<span class="835275592837580694" onmouseenter="enter('835275592837580694');" onmouseout="out('835275592837580694');" style=""> 994     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.GET)                </span>
<span class="2460266594736272943" onmouseenter="enter('2460266594736272943');" onmouseout="out('2460266594736272943');" style=""><abbr title=" 995     public String showAddCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,"> 995     public String showAddCollectionItem(HttpServletRequest request, HttpServletResponse response, Model mðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 996             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 997             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style=""> 998             @PathVariable(value = &quot;collectionField&quot;) String collectionField,                             </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 999             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1000         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1001         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1002         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style=""><abbr title="1003         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,">1003         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style="">1004                 sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1005         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1006         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style="">1007                                                                                                          </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style="">1008         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)        </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style="">1009                 .withFilterAndSortCriteria(getCriteria(requestParams))                                   </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style="">1010                 .withStartIndex(getStartIndex(requestParams))                                            </span>
<span class="4786121744461484155" onmouseenter="enter('4786121744461484155');" onmouseout="out('4786121744461484155');" style="">1011                 .withMaxIndex(getMaxIndex(requestParams))                                                </span>
<span class="2941692162045974129" onmouseenter="enter('2941692162045974129');" onmouseout="out('2941692162045974129');" style="">1012                 .withLastId(getLastId(requestParams))                                                    </span>
<span class="-9137331061893195290" onmouseenter="enter('-9137331061893195290');" onmouseout="out('-9137331061893195290');" style="">1013                 .withFirstId(getFirstId(requestParams))                                                  </span>
<span class="-6497878492174321892" onmouseenter="enter('-6497878492174321892');" onmouseout="out('-6497878492174321892');" style="">1014                 .withUpperCount(getUpperCount(requestParams))                                            </span>
<span class="-8373154769706308503" onmouseenter="enter('-8373154769706308503');" onmouseout="out('-8373154769706308503');" style="">1015                 .withLowerCount(getLowerCount(requestParams))                                            </span>
<span class="-1051723743320189375" onmouseenter="enter('-1051723743320189375');" onmouseout="out('-1051723743320189375');" style="">1016                 .withPageSize(getPageSize(requestParams))                                                </span>
<span class="-6582704259903712752" onmouseenter="enter('-6582704259903712752');" onmouseout="out('-6582704259903712752');" style="">1017                 .withPresentationFetch(true);                                                            </span>
<span  style="">1018                                                                                                          </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1019         if (md instanceof BasicCollectionMetadata) {                                                     </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1020             BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                  </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style="">1021             if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                  </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""><abbr title="1022                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1022                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData(ðŸ”µ</abbr></span>
<span class="-2914433993330253670" onmouseenter="enter('-2914433993330253670');" onmouseout="out('-2914433993330253670');" style=""><abbr title="1023                 // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types">1023                 // If the entity type isn&#x27;t specified, we need to determine if there are various polymorpðŸ”µ</abbr></span>
<span class="-7795450821592681641" onmouseenter="enter('-7795450821592681641');" onmouseout="out('-7795450821592681641');" style="">1024                 // for this entity.                                                                      </span>
<span class="6186895968667433501" onmouseenter="enter('6186895968667433501');" onmouseout="out('6186895968667433501');" style="">1025                 String entityType = null;                                                                </span>
<span  style="">1026                                                                                                          </span>
<span class="3580632700461537732" onmouseenter="enter('3580632700461537732');" onmouseout="out('3580632700461537732');" style="">1027                 if (requestParams.containsKey(&quot;entityType&quot;)) {                                           </span>
<span class="-1630371572733568969" onmouseenter="enter('-1630371572733568969');" onmouseout="out('-1630371572733568969');" style="">1028                     entityType = requestParams.get(&quot;entityType&quot;).get(0);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1029                 }                                                                                        </span>
<span  style="">1030                                                                                                          </span>
<span class="2600422776092116832" onmouseenter="enter('2600422776092116832');" onmouseout="out('2600422776092116832');" style="">1031                 entityType = determineEntityType(entityType, cmd);                                       </span>
<span  style="">1032                                                                                                          </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style="">1033                 if (StringUtils.isBlank(entityType)) {                                                   </span>
<span class="679217737668422196" onmouseenter="enter('679217737668422196');" onmouseout="out('679217737668422196');" style="">1034                     return getModalForBlankEntityType(request, model, sectionKey, cmd);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1035                 }                                                                                        </span>
<span  style="">1036                                                                                                          </span>
<span class="-58316621888079189" onmouseenter="enter('-58316621888079189');" onmouseout="out('-58316621888079189');" style="">1037                 ppr = ppr.withCeilingEntityClassname(entityType);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1038             }                                                                                            </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1039         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="-8815560953057448419" onmouseenter="enter('-8815560953057448419');" onmouseout="out('-8815560953057448419');" style=""><abbr title="1040             ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionType(request,response,model,sectionKey,id,requestParams,(MapMetadata) md);">1040             ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionTypðŸ”µ</abbr></span>
<span class="6674469997589527714" onmouseenter="enter('6674469997589527714');" onmouseout="out('6674469997589527714');" style="">1041             if (result.equals(ExtensionResultStatusType.HANDLED)) {                                      </span>
<span class="1057476267973220454" onmouseenter="enter('1057476267973220454');" onmouseout="out('1057476267973220454');" style="">1042                 model.addAttribute(&quot;entityId&quot;, id);                                                      </span>
<span class="6720161805434028669" onmouseenter="enter('6720161805434028669');" onmouseout="out('6720161805434028669');" style="">1043                 model.addAttribute(&quot;sectionKey&quot;, sectionKey);                                            </span>
<span class="-2435595331613687341" onmouseenter="enter('-2435595331613687341');" onmouseout="out('-2435595331613687341');" style="">1044                 model.addAttribute(&quot;collectionField&quot;, collectionField);                                  </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="">1045                 return MODAL_CONTAINER_VIEW;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1046             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1047         }                                                                                                </span>
<span  style="">1048                                                                                                          </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style="">1049         model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));       </span>
<span  style="">1050                                                                                                          </span>
<span class="6180232744784249160" onmouseenter="enter('6180232744784249160');" onmouseout="out('6180232744784249160');" style=""><abbr title="1051         return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty, md, ppr, null, null);">1051         return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, colðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1052     }                                                                                                    </span>
<span  style="">1053                                                                                                          </span>
<span class="-2220429573703069666" onmouseenter="enter('-2220429573703069666');" onmouseout="out('-2220429573703069666');" style="">1054     protected String getModalForBlankEntityType(final HttpServletRequest request,                        </span>
<span class="-5263780204247815298" onmouseenter="enter('-5263780204247815298');" onmouseout="out('-5263780204247815298');" style="">1055             final Model model, final String sectionKey, final ClassMetadata cmd) {                       </span>
<span class="-2316979209506989336" onmouseenter="enter('-2316979209506989336');" onmouseout="out('-2316979209506989336');" style="">1056         final List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());             </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style="">1057         model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                                  </span>
<span class="-7344898891916261334" onmouseenter="enter('-7344898891916261334');" onmouseout="out('-7344898891916261334');" style="">1058         model.addAttribute(&quot;viewType&quot;, &quot;modal/entityTypeSelection&quot;);                                     </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style="">1059         model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());        </span>
<span  style="">1060                                                                                                          </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style="">1061         String requestUri = request.getRequestURI();                                                     </span>
<span class="3126054482386392887" onmouseenter="enter('3126054482386392887');" onmouseout="out('3126054482386392887');" style="">1062         final String contextPath = request.getContextPath();                                             </span>
<span  style="">1063                                                                                                          </span>
<span class="1413502326105343009" onmouseenter="enter('1413502326105343009');" onmouseout="out('1413502326105343009');" style="">1064         if (!contextPath.equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(contextPath)) {                            </span>
<span class="-5812874762785975576" onmouseenter="enter('-5812874762785975576');" onmouseout="out('-5812874762785975576');" style="">1065             requestUri = requestUri.substring(contextPath.length() + 1, requestUri.length());            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1066         }                                                                                                </span>
<span  style="">1067                                                                                                          </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style="">1068         model.addAttribute(&quot;currentUri&quot;, requestUri);                                                    </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style="">1069         model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1070         setModelAttributes(model, sectionKey);                                                           </span>
<span  style="">1071                                                                                                          </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="">1072         return MODAL_CONTAINER_VIEW;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1073     }                                                                                                    </span>
<span  style="">1074                                                                                                          </span>
<span class="373770933822047642" onmouseenter="enter('373770933822047642');" onmouseout="out('373770933822047642');" style=""><abbr title="1075     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMethod.POST)">1075     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMðŸ”µ</abbr></span>
<span class="-870509305261572147" onmouseenter="enter('-870509305261572147');" onmouseout="out('-870509305261572147');" style=""><abbr title="1076     public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1076     public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1077             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1078             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1079             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1080             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1081         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1082         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1083         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1084         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1084         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1085         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1086         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1087         Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                               </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1088         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1089             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1089             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, maðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1090                     collectionField,                                                                     </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1091                     collectionItemId, responseMap);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1092         }                                                                                                </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1093         return responseMap;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1094     }                                                                                                    </span>
<span  style="">1095                                                                                                          </span>
<span class="-2220429573703069666" onmouseenter="enter('-2220429573703069666');" onmouseout="out('-2220429573703069666');" style="">1096     protected String getModalForBlankEntityType(final HttpServletRequest request,                        </span>
<span class="-5263780204247815298" onmouseenter="enter('-5263780204247815298');" onmouseout="out('-5263780204247815298');" style=""><abbr title="1097                                                 final Model model, final String sectionKey, final ClassMetadata cmd) {">1097                                                 final Model model, final String sectionKey, final ClassMeðŸ”µ</abbr></span>
<span class="-2316979209506989336" onmouseenter="enter('-2316979209506989336');" onmouseout="out('-2316979209506989336');" style="">1098         final List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());             </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style="">1099         model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                                  </span>
<span class="-7344898891916261334" onmouseenter="enter('-7344898891916261334');" onmouseout="out('-7344898891916261334');" style="">1100         model.addAttribute(&quot;viewType&quot;, &quot;modal/entityTypeSelection&quot;);                                     </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style="">1101         model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());        </span>
<span  style="">1102                                                                                                          </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style="">1103         String requestUri = request.getRequestURI();                                                     </span>
<span class="3126054482386392887" onmouseenter="enter('3126054482386392887');" onmouseout="out('3126054482386392887');" style="">1104         final String contextPath = request.getContextPath();                                             </span>
<span  style="">1105                                                                                                          </span>
<span class="1413502326105343009" onmouseenter="enter('1413502326105343009');" onmouseout="out('1413502326105343009');" style="">1106         if (!contextPath.equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(contextPath)) {                            </span>
<span class="-5812874762785975576" onmouseenter="enter('-5812874762785975576');" onmouseout="out('-5812874762785975576');" style="">1107             requestUri = requestUri.substring(contextPath.length() + 1, requestUri.length());            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1108         }                                                                                                </span>
<span  style="">1109                                                                                                          </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style="">1110         model.addAttribute(&quot;currentUri&quot;, requestUri);                                                    </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style="">1111         model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1112         setModelAttributes(model, sectionKey);                                                           </span>
<span  style="">1113                                                                                                          </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="">1114         return MODAL_CONTAINER_VIEW;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1115     }                                                                                                    </span>
<span  style="">1116                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1117     /**                                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1118      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1119      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1120      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1121      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1122      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1123      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1124      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style="">1125      * @param requestParams                                                                              </span>
<span class="-4008047975326689228" onmouseenter="enter('-4008047975326689228');" onmouseout="out('-4008047975326689228');" style="">1126      * @return Json collection data                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1127      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1128      */                                                                                                  </span>
<span class="1491507797785399205" onmouseenter="enter('1491507797785399205');" onmouseout="out('1491507797785399205');" style="">1129     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize&quot;, method = RequestMethod.GET)          </span>
<span class="3394871197523978831" onmouseenter="enter('3394871197523978831');" onmouseout="out('3394871197523978831');" style=""><abbr title="1130     public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HttpServletResponse response, Model model,">1130     public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HtðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1131             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style="">1132             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style="">1133             @PathVariable(value = &quot;collectionField&quot;) String collectionField,                             </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style="">1134             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1135         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1136         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1137         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style=""><abbr title="1138         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,">1138         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style="">1139                 sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1140         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1141         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style="">1142                                                                                                          </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style="">1143         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)        </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style="">1144                 .withFilterAndSortCriteria(getCriteria(requestParams))                                   </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style="">1145                 .withStartIndex(getStartIndex(requestParams))                                            </span>
<span class="-115113180096268460" onmouseenter="enter('-115113180096268460');" onmouseout="out('-115113180096268460');" style="">1146                 .withMaxIndex(getMaxIndex(requestParams));                                               </span>
<span class="1857239787668878379" onmouseenter="enter('1857239787668878379');" onmouseout="out('1857239787668878379');" style=""><abbr title="1147         String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizeCustomCriteria()))">1147         String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizðŸ”µ</abbr></span>
<span class="8925682901439482297" onmouseenter="enter('8925682901439482297');" onmouseout="out('8925682901439482297');" style="">1148                 .toArray(String[]::new);                                                                 </span>
<span class="-226841645969872938" onmouseenter="enter('-226841645969872938');" onmouseout="out('-226841645969872938');" style="">1149         ppr = ppr.withCustomCriteria( both);                                                             </span>
<span  style="">1150                                                                                                          </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1151         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1152             ppr.setOperationTypesOverride(null);                                                         </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1153             ppr.setType(PersistencePackageRequest.Type.STANDARD);                                        </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1154             ppr.setSectionEntityField(collectionField);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1155         }                                                                                                </span>
<span  style="">1156                                                                                                          </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1157         DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                            </span>
<span  style="">1158                                                                                                          </span>
<span class="9153362413933125536" onmouseenter="enter('9153362413933125536');" onmouseout="out('9153362413933125536');" style=""><abbr title="1159         return formService.buildSelectizeCollectionInfo(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1159         return formService.buildSelectizeCollectionInfo(id, drs, collectionProperty, sectionKey, sectionCðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1160     }                                                                                                    </span>
<span  style="">1161                                                                                                          </span>
<span class="-7439222430983038453" onmouseenter="enter('-7439222430983038453');" onmouseout="out('-7439222430983038453');" style="">1162     protected String[] buildSelectizeCustomCriteria() {                                                  </span>
<span class="-4161579644301235736" onmouseenter="enter('-4161579644301235736');" onmouseout="out('-4161579644301235736');" style="">1163         return new String[]{ IS_SELECTIZE_REQUEST };                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1164     }                                                                                                    </span>
<span  style="">1165                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1166     /**                                                                                                  </span>
<span class="-7141111024633203374" onmouseenter="enter('-7141111024633203374');" onmouseout="out('-7141111024633203374');" style="">1167      * Adds the requested collection item via Selectize                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1168      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1169      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1170      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1171      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1172      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1173      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1174      * @param collectionField                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1175      * @param entityForm                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1176      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1177      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1178      */                                                                                                  </span>
<span class="4942792763487402415" onmouseenter="enter('4942792763487402415');" onmouseout="out('4942792763487402415');" style="">1179     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize-add&quot;, method = RequestMethod.POST)     </span>
<span class="8163998475300370418" onmouseenter="enter('8163998475300370418');" onmouseout="out('8163998475300370418');" style=""><abbr title="1180     public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1180     public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpSðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1181             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1182             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1183             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1184             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1184             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-3120252458037341618" onmouseenter="enter('-3120252458037341618');" onmouseout="out('-3120252458037341618');" style="">1185         Map&lt;String, Object&gt; returnVal = new HashMap&lt;&gt;();                                                 </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1186         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1187         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1188         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1189         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1189         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1190         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1191                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1192         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1193             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1194             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1195                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1196             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1197         }                                                                                                </span>
<span  style="">1198                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1199         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1199         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style="">1200         ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                           </span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1201         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1202         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1202         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span  style="">1203                                                                                                          </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1204         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1205         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1205         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1206         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1207         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">1208                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1209         if (result.hasErrors()) {                                                                        </span>
<span class="842224369260603633" onmouseenter="enter('842224369260603633');" onmouseout="out('842224369260603633');" style="">1210             returnVal.put(&quot;error&quot;, result.getFieldError());                                              </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1211             return returnVal;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1212         }                                                                                                </span>
<span  style="">1213                                                                                                          </span>
<span class="2610632867002015507" onmouseenter="enter('2610632867002015507');" onmouseout="out('2610632867002015507');" style="">1214         if (savedEntity.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                   </span>
<span class="-5383740165855607078" onmouseenter="enter('-5383740165855607078');" onmouseout="out('-5383740165855607078');" style="">1215             returnVal.put(&quot;alternateId&quot;, savedEntity.findProperty(ALTERNATE_ID_PROPERTY).getValue());    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1216         }                                                                                                </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1217         return returnVal;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1218     }                                                                                                    </span>
<span  style="">1219                                                                                                          </span>
<span class="5412920841771640365" onmouseenter="enter('5412920841771640365');" onmouseout="out('5412920841771640365');" style="">1220     protected void declareShouldIgnoreAdditionStatusFilter() {                                           </span>
<span class="-4270951653865217168" onmouseenter="enter('-4270951653865217168');" onmouseout="out('-4270951653865217168');" style=""><abbr title="1221         Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().getAdditionalProperties();">1221         Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().gðŸ”µ</abbr></span>
<span class="-3723341051420574210" onmouseenter="enter('-3723341051420574210');" onmouseout="out('-3723341051420574210');" style="">1222         additionalProperties.put(&quot;shouldIgnoreAdditionStatusFilter&quot;, true);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1223     }                                                                                                    </span>
<span  style="">1224                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1225     /**                                                                                                  </span>
<span class="1325408264830379158" onmouseenter="enter('1325408264830379158');" onmouseout="out('1325408264830379158');" style="">1226      * Adds the requested collection item                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1227      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1228      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1229      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1230      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1231      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1232      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1233      * @param collectionField                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1234      * @param entityForm                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1235      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1236      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1237      */                                                                                                  </span>
<span class="-2068929988984533631" onmouseenter="enter('-2068929988984533631');" onmouseout="out('-2068929988984533631');" style="">1238     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.POST)               </span>
<span class="-6457137423768539998" onmouseenter="enter('-6457137423768539998');" onmouseout="out('-6457137423768539998');" style=""><abbr title="1239     public String addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1239     public String addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model modelðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1240             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1241             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1242             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1243             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1243             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1244         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1245         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1246         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1247         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1247         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1248         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1249                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1250         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1251             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1252             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1253                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1255         }                                                                                                </span>
<span  style="">1256                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1257         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1257         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1258         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1259         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1259         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1260         service.clearEntityManager();                                                                    </span>
<span  style="">1261                                                                                                          </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1262         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1263         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1263         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1264         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1265         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">1266                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1267         if (result.hasErrors()) {                                                                        </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1268             FieldMetadata md = collectionProperty.getMetadata();                                         </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1269             ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                             </span>
<span class="4503162777083318611" onmouseenter="enter('4503162777083318611');" onmouseout="out('4503162777083318611');" style=""><abbr title="1270             return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty,">1270             return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey,ðŸ”µ</abbr></span>
<span class="5267635088951466475" onmouseenter="enter('5267635088951466475');" onmouseout="out('5267635088951466475');" style="">1271                     md, ppr, entityForm, savedEntity);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1272         }                                                                                                </span>
<span  style="">1273                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1274         // Next, we must get the new list grid that represents this collection                           </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1275         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1275         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1276         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style="">1277                                                                                                          </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1278         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="7250522969210652718" onmouseenter="enter('7250522969210652718');" onmouseout="out('7250522969210652718');" style="">1279         model.addAttribute(&quot;actualEntityId&quot;, id);                                                        </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1280         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1281         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1282     }                                                                                                    </span>
<span  style="">1283                                                                                                          </span>
<span class="-8003545521832011894" onmouseenter="enter('-8003545521832011894');" onmouseout="out('-8003545521832011894');" style="">1284     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/addEmpty&quot;, method = RequestMethod.POST)          </span>
<span class="162700220048203938" onmouseenter="enter('162700220048203938');" onmouseout="out('162700220048203938');" style=""><abbr title="1285     public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1285     public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse reðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1286             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1287             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1288             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1289             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1289             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1290         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1291         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1292         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1293         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1293         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1294         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1295                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1296         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1297             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1298             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1299                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1300             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1301         }                                                                                                </span>
<span  style="">1302                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1303         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1303         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1304         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1304         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-5337934248855825573" onmouseenter="enter('-5337934248855825573');" onmouseout="out('-5337934248855825573');" style="">1305         entity.setIsPreAdd(true);                                                                        </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1306         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1307         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1307         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1308         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span  style="">1309                                                                                                          </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">1310         return new JsonResponse(response)                                                                </span>
<span class="-645443211281069037" onmouseenter="enter('-645443211281069037');" onmouseout="out('-645443211281069037');" style="">1311                 .with(&quot;status&quot;, &quot;complete&quot;)                                                              </span>
<span class="-7858493257692229655" onmouseenter="enter('-7858493257692229655');" onmouseout="out('-7858493257692229655');" style="">1312                 .with(&quot;id&quot;, savedEntity.findProperty(entityForm.getIdProperty()).getValue())             </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">1313                 .done();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1314     }                                                                                                    </span>
<span  style="">1315                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1316     /**                                                                                                  </span>
<span class="-6140462241686685910" onmouseenter="enter('-6140462241686685910');" onmouseout="out('-6140462241686685910');" style=""><abbr title="1317      * Builds out all of the model information needed for showing the add modal for collection items on both the initial GET">1317      * Builds out all of the model information needed for showing the add modal for collection items on bðŸ”µ</abbr></span>
<span class="9052968863197617086" onmouseenter="enter('9052968863197617086');" onmouseout="out('9052968863197617086');" style="">1318      * as well as after a POST with validation errors                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1319      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1320      * @param request                                                                                    </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1321      * @param model                                                                                      </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1322      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1323      * @param collectionField                                                                            </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style="">1324      * @param sectionKey                                                                                 </span>
<span class="-7927619294366963435" onmouseenter="enter('-7927619294366963435');" onmouseout="out('-7927619294366963435');" style="">1325      * @param collectionProperty                                                                         </span>
<span class="-5426566728726502924" onmouseenter="enter('-5426566728726502924');" onmouseout="out('-5426566728726502924');" style="">1326      * @param md                                                                                         </span>
<span class="4349163197755218506" onmouseenter="enter('4349163197755218506');" onmouseout="out('4349163197755218506');" style="">1327      * @param ppr                                                                                        </span>
<span class="2094225145376343101" onmouseenter="enter('2094225145376343101');" onmouseout="out('2094225145376343101');" style="">1328      * @return the appropriate view to display for the modal                                             </span>
<span class="450948407444547835" onmouseenter="enter('450948407444547835');" onmouseout="out('450948407444547835');" style=""><abbr title="1329      * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, EntityForm, BindingResult)}">1329      * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, StringðŸ”µ</abbr></span>
<span class="3423849059172457982" onmouseenter="enter('3423849059172457982');" onmouseout="out('3423849059172457982');" style=""><abbr title="1330      * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, MultiValueMap)}">1330      * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, StðŸ”µ</abbr></span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1331      * @throws ServiceException                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1332      */                                                                                                  </span>
<span class="-4127331421111161450" onmouseenter="enter('-4127331421111161450');" onmouseout="out('-4127331421111161450');" style=""><abbr title="1333     protected String buildAddCollectionItemModel(HttpServletRequest request, HttpServletResponse response,">1333     protected String buildAddCollectionItemModel(HttpServletRequest request, HttpServletResponse responseðŸ”µ</abbr></span>
<span class="1808182660955839449" onmouseenter="enter('1808182660955839449');" onmouseout="out('1808182660955839449');" style=""><abbr title="1334             Model model, String id, String collectionField, String sectionKey, Property collectionProperty,">1334             Model model, String id, String collectionField, String sectionKey, Property collectionPropertðŸ”µ</abbr></span>
<span class="-5972908184992702659" onmouseenter="enter('-5972908184992702659');" onmouseout="out('-5972908184992702659');" style=""><abbr title="1335             FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throws ServiceException {">1335             FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throwsðŸ”µ</abbr></span>
<span  style="">1336                                                                                                          </span>
<span class="-2054675889041043286" onmouseenter="enter('-2054675889041043286');" onmouseout="out('-2054675889041043286');" style=""><abbr title="1337         // For requests to add a new collection item include the main class that the subsequent request comes from.">1337         // For requests to add a new collection item include the main class that the subsequent request cðŸ”µ</abbr></span>
<span class="7422952884503198827" onmouseenter="enter('7422952884503198827');" onmouseout="out('7422952884503198827');" style=""><abbr title="1338         // For instance, with basic collections we know the main associated class for a fetch through the ForeignKey">1338         // For instance, with basic collections we know the main associated class for a fetch through theðŸ”µ</abbr></span>
<span class="5831142982738818001" onmouseenter="enter('5831142982738818001');" onmouseout="out('5831142982738818001');" style=""><abbr title="1339         // persistence item but map and adorned target lookups make a standard persistence request. This solution">1339         // persistence item but map and adorned target lookups make a standard persistence request. This ðŸ”µ</abbr></span>
<span class="-3910081436214830376" onmouseenter="enter('-3910081436214830376');" onmouseout="out('-3910081436214830376');" style="">1340         // fixes all cases.                                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1341         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-8007514226035577536" onmouseenter="enter('-8007514226035577536');" onmouseout="out('-8007514226035577536');" style="">1342         ppr.addCustomCriteria(&quot;owningClass=&quot; + mainClassName);                                           </span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style="">1343         ppr.setAddOperationInspect(true);                                                                </span>
<span  style="">1344                                                                                                          </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1345         if (entityForm != null) {                                                                        </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1346             entityForm.clearFieldsMap();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1347         }                                                                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1348         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1349         if (md instanceof BasicCollectionMetadata) {                                                     </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1350             BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                  </span>
<span  style="">1351                                                                                                          </span>
<span class="5473401195179812518" onmouseenter="enter('5473401195179812518');" onmouseout="out('5473401195179812518');" style=""><abbr title="1352             // When adding items to basic collections, we will sometimes show a form to persist a new record">1352             // When adding items to basic collections, we will sometimes show a form to persist a new recðŸ”µ</abbr></span>
<span class="3817220166052180028" onmouseenter="enter('3817220166052180028');" onmouseout="out('3817220166052180028');" style="">1353             // and sometimes show a list grid to allow the user to associate an existing record.         </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style="">1354             if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                  </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1355                 ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1355                 ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().geðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1356                 if (entityForm == null) {                                                                </span>
<span class="509426350308747164" onmouseenter="enter('509426350308747164');" onmouseout="out('509426350308747164');" style="">1357                     entityForm = formService.createEntityForm(collectionMetadata,sectionCrumbs);         </span>
<span class="2737056182573571703" onmouseenter="enter('2737056182573571703');" onmouseout="out('2737056182573571703');" style="">1358                     entityForm.setCeilingEntityClassname(ppr.getCeilingEntityClassname());               </span>
<span class="2710161406345740991" onmouseenter="enter('2710161406345740991');" onmouseout="out('2710161406345740991');" style="">1359                     entityForm.setEntityType(ppr.getCeilingEntityClassname());                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1360                 } else {                                                                                 </span>
<span class="-5799643084244932085" onmouseenter="enter('-5799643084244932085');" onmouseout="out('-5799643084244932085');" style="">1361                     formService.populateEntityForm(collectionMetadata, entityForm, sectionCrumbs);       </span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1362                     formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1363                 }                                                                                        </span>
<span class="-7315185064917392199" onmouseenter="enter('-7315185064917392199');" onmouseout="out('-7315185064917392199');" style=""><abbr title="1364                 formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntityClassname());">1364                 formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntitðŸ”µ</abbr></span>
<span class="1687533348183327340" onmouseenter="enter('1687533348183327340');" onmouseout="out('1687533348183327340');" style="">1365                 entityForm.getTabs().iterator().next().getIsVisible();                                   </span>
<span  style="">1366                                                                                                          </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1367                 model.addAttribute(&quot;entityForm&quot;, entityForm);                                            </span>
<span class="-2634442257361103125" onmouseenter="enter('-2634442257361103125');" onmouseout="out('-2634442257361103125');" style="">1368                 model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleAddEntity&quot;);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1369             } else {                                                                                     </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1370                 DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                    </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1371                 ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1371                 ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectðŸ”µ</abbr></span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1372                 listGrid.setPathOverride(request.getRequestURL().toString());                            </span>
<span  style="">1373                                                                                                          </span>
<span class="6493773829436488040" onmouseenter="enter('6493773829436488040');" onmouseout="out('6493773829436488040');" style=""><abbr title="1374                 if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUP.equals(fmd.getAddMethodType())) {">1374                 if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUPðŸ”µ</abbr></span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1375                     listGrid.removeAllRowActions();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1376                 }                                                                                        </span>
<span  style="">1377                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1378                 model.addAttribute(&quot;listGrid&quot;, listGrid);                                                </span>
<span class="-4615041483574305082" onmouseenter="enter('-4615041483574305082');" onmouseout="out('-4615041483574305082');" style="">1379                 model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleSelectEntity&quot;);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1380             }                                                                                            </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1381         } else if (md instanceof AdornedTargetCollectionMetadata) {                                      </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1382             AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                  </span>
<span  style="">1383                                                                                                          </span>
<span class="-4994014003685781795" onmouseenter="enter('-4994014003685781795');" onmouseout="out('-4994014003685781795');" style=""><abbr title="1384             // Even though this field represents an adorned target collection, the list we want to show in the modal">1384             // Even though this field represents an adorned target collection, the list we want to show iðŸ”µ</abbr></span>
<span class="3396745077097675731" onmouseenter="enter('3396745077097675731');" onmouseout="out('3396745077097675731');" style="">1385             // is the standard list grid for the target entity of this field                             </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1386             ppr.setOperationTypesOverride(null);                                                         </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1387             ppr.setType(PersistencePackageRequest.Type.STANDARD);                                        </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1388             ppr.setSectionEntityField(collectionField);                                                  </span>
<span  style="">1389                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1390             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1390             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span  style="">1391                                                                                                          </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1392             DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                        </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1393             ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1393             ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKðŸ”µ</abbr></span>
<span class="1884537605734649521" onmouseenter="enter('1884537605734649521');" onmouseout="out('1884537605734649521');" style="">1394             listGrid.setSubCollectionFieldName(collectionField);                                         </span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1395             listGrid.setPathOverride(request.getRequestURL().toString());                                </span>
<span class="2370419943178688476" onmouseenter="enter('2370419943178688476');" onmouseout="out('2370419943178688476');" style="">1396             listGrid.setFriendlyName(collectionMetadata.getPolymorphicEntities().getFriendlyName());     </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1397             if (entityForm == null) {                                                                    </span>
<span class="-1229292684052118628" onmouseenter="enter('-1229292684052118628');" onmouseout="out('-1229292684052118628');" style=""><abbr title="1398                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, true);">1398                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectiðŸ”µ</abbr></span>
<span class="-7486141420721649683" onmouseenter="enter('-7486141420721649683');" onmouseout="out('-7486141420721649683');" style=""><abbr title="1399                 entityForm.setCeilingEntityClassname(ppr.getAdornedList().getAdornedTargetEntityClassname());">1399                 entityForm.setCeilingEntityClassname(ppr.getAdornedList().getAdornedTargetEntityClassnameðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1400             } else {                                                                                     </span>
<span class="7685228187033982459" onmouseenter="enter('7685228187033982459');" onmouseout="out('7685228187033982459');" style=""><abbr title="1401                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectionCrumbs, true);">1401                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectioðŸ”µ</abbr></span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1402                 formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1403             }                                                                                            </span>
<span  style="">1404                                                                                                          </span>
<span class="5169338689637413329" onmouseenter="enter('5169338689637413329');" onmouseout="out('5169338689637413329');" style="">1405             listGrid.setListGridType(ListGrid.Type.ADORNED);                                             </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1406             for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                       </span>
<span class="8450559638200016101" onmouseenter="enter('8450559638200016101');" onmouseout="out('8450559638200016101');" style="">1407                 if (entry.getValue().getIsVisible()) {                                                   </span>
<span class="1657391013588898454" onmouseenter="enter('1657391013588898454');" onmouseout="out('1657391013588898454');" style="">1408                     listGrid.setListGridType(ListGrid.Type.ADORNED_WITH_FORM);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1409                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1410                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1411             }                                                                                            </span>
<span  style="">1412                                                                                                          </span>
<span class="-757286675881477752" onmouseenter="enter('-757286675881477752');" onmouseout="out('-757286675881477752');" style="">1413             // This is part of an add, so we want to be able to filter/sort the listgrid                 </span>
<span class="3421525283764936758" onmouseenter="enter('3421525283764936758');" onmouseout="out('3421525283764936758');" style="">1414             listGrid.setIsSortable(false);                                                               </span>
<span class="-2714096270635703274" onmouseenter="enter('-2714096270635703274');" onmouseout="out('-2714096270635703274');" style="">1415             listGrid.setCanFilterAndSort(true);                                                          </span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1416             listGrid.removeAllRowActions();                                                              </span>
<span  style="">1417                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1418             model.addAttribute(&quot;listGrid&quot;, listGrid);                                                    </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1419             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="-1071174233767081578" onmouseenter="enter('-1071174233767081578');" onmouseout="out('-1071174233767081578');" style="">1420             model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedSelectEntity&quot;);                                 </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1421         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1422             MapMetadata fmd = (MapMetadata) md;                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1423             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1423             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span  style="">1424                                                                                                          </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1425             if (entityForm == null) {                                                                    </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style=""><abbr title="1426                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);">1426                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id)ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1427             } else {                                                                                     </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1428                 formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);</span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1429                 formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1430             }                                                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1431             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="-892500240032703395" onmouseenter="enter('-892500240032703395');" onmouseout="out('-892500240032703395');" style="">1432             model.addAttribute(&quot;viewType&quot;, &quot;modal/mapAddEntity&quot;);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1433         }                                                                                                </span>
<span  style="">1434                                                                                                          </span>
<span class="6074380392351813368" onmouseenter="enter('6074380392351813368');" onmouseout="out('6074380392351813368');" style="">1435         // Set the parent id on the entity form                                                          </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1436         if (entityForm != null) {                                                                        </span>
<span class="-3154229542834445725" onmouseenter="enter('-3154229542834445725');" onmouseout="out('-3154229542834445725');" style="">1437             entityForm.setParentId(id);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1438         }                                                                                                </span>
<span  style="">1439                                                                                                          </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1440         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="7819166863376485578" onmouseenter="enter('7819166863376485578');" onmouseout="out('7819166863376485578');" style="">1441         model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_COLLECTION_ITEM.getType());            </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1442         model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1443         setModelAttributes(model, sectionKey);                                                           </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="">1444         return MODAL_CONTAINER_VIEW;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1445     }                                                                                                    </span>
<span  style="">1446                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1447     /**                                                                                                  </span>
<span class="3915085583429756257" onmouseenter="enter('3915085583429756257');" onmouseout="out('3915085583429756257');" style="">1448      * Shows the appropriate modal dialog to edit the selected collection item                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1449      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1450      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1451      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1452      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1453      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1454      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1455      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1456      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1457      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1458      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1459      */                                                                                                  </span>
<span class="5941881897199209931" onmouseenter="enter('5941881897199209931');" onmouseout="out('5941881897199209931');" style=""><abbr title="1460     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.GET)">1460     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequeðŸ”µ</abbr></span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style=""><abbr title="1461     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1461     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, ModeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1462             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1463             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1464             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1465             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1466             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1467         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1467         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1468                 ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1469     }                                                                                                    </span>
<span  style="">1470                                                                                                          </span>
<span class="-3777402830265989862" onmouseenter="enter('-3777402830265989862');" onmouseout="out('-3777402830265989862');" style="">1471     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.GET) </span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style=""><abbr title="1472     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1472     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, ModeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1473             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1474             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1475             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1476             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="7585768018133278114" onmouseenter="enter('7585768018133278114');" onmouseout="out('7585768018133278114');" style=""><abbr title="1477         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,">1477         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1478                 ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1479     }                                                                                                    </span>
<span  style="">1480                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1481     /**                                                                                                  </span>
<span class="6761933478321573145" onmouseenter="enter('6761933478321573145');" onmouseout="out('6761933478321573145');" style=""><abbr title="1482      * Shows the appropriate modal dialog to view the selected collection item. This will display the modal as readonly">1482      * Shows the appropriate modal dialog to view the selected collection item. This will display the modðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1483      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1484      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1485      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1486      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1487      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1488      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1489      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1490      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1491      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1492      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1493      */                                                                                                  </span>
<span class="5228464490364608791" onmouseenter="enter('5228464490364608791');" onmouseout="out('5228464490364608791');" style=""><abbr title="1494     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = RequestMethod.GET)">1494     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = ðŸ”µ</abbr></span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style=""><abbr title="1495     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1495     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1496             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1497             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1498             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1499             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1500             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="7887850161668822106" onmouseenter="enter('7887850161668822106');" onmouseout="out('7887850161668822106');" style=""><abbr title="1501         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1501         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, colleðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1502                 ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                         </span>
<span  style="">1503                                                                                                          </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1504         // Since this is a read-only view, actions don&#x27;t make sense in this context                      </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1505         EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                    </span>
<span class="7289613241506142720" onmouseenter="enter('7289613241506142720');" onmouseout="out('7289613241506142720');" style="">1506         addAuditableDisplayFields(ef);                                                                   </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1507         ef.removeAllActions();                                                                           </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1508         ef.setReadOnly();                                                                                </span>
<span  style="">1509                                                                                                          </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1510         return returnPath;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1511     }                                                                                                    </span>
<span  style="">1512                                                                                                          </span>
<span class="6858008221927215769" onmouseenter="enter('6858008221927215769');" onmouseout="out('6858008221927215769');" style=""><abbr title="1513     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view&quot;, method = RequestMethod.GET)">1513     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view&quot;, method = RequestMethod.ðŸ”µ</abbr></span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style=""><abbr title="1514     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1514     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1515             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1516             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1517             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1518             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="2521791674908842244" onmouseenter="enter('2521791674908842244');" onmouseout="out('2521791674908842244');" style=""><abbr title="1519         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,">1519         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, colleðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1520                 ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                         </span>
<span  style="">1521                                                                                                          </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1522         // Since this is a read-only view, actions don&#x27;t make sense in this context                      </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1523         EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                    </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1524         ef.removeAllActions();                                                                           </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1525         ef.setReadOnly();                                                                                </span>
<span  style="">1526                                                                                                          </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1527         return returnPath;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1528     }                                                                                                    </span>
<span  style="">1529                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1530     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1530     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="6852009337058352330" onmouseenter="enter('6852009337058352330');" onmouseout="out('6852009337058352330');" style=""><abbr title="1531             String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderType) throws ServiceException {">1531             String id, String collectionField, String collectionItemId, String alternateId, String modalHðŸ”µ</abbr></span>
<span class="-2699953653458232908" onmouseenter="enter('-2699953653458232908');" onmouseout="out('-2699953653458232908');" style=""><abbr title="1532         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId, modalHeaderType, null, null);">1532         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1533     }                                                                                                    </span>
<span  style="">1534                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1535     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1535     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="-3706011950121400951" onmouseenter="enter('-3706011950121400951');" onmouseout="out('-3706011950121400951');" style=""><abbr title="1536             String id, String collectionField, String collectionItemId, String modalHeaderType) throws ServiceException {">1536             String id, String collectionField, String collectionItemId, String modalHeaderType) throws SeðŸ”µ</abbr></span>
<span class="-6899013896128397577" onmouseenter="enter('-6899013896128397577');" onmouseout="out('-6899013896128397577');" style=""><abbr title="1537         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, null, null);">1537         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1538     }                                                                                                    </span>
<span  style="">1539                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1540     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1540     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="4852573692087282601" onmouseenter="enter('4852573692087282601');" onmouseout="out('4852573692087282601');" style=""><abbr title="1541                 String id, String collectionField, String collectionItemId, String modalHeaderType, EntityForm entityForm, Entity entity) throws ServiceException {">1541                 String id, String collectionField, String collectionItemId, String modalHeaderType, EntitðŸ”µ</abbr></span>
<span class="6580107021722154279" onmouseenter="enter('6580107021722154279');" onmouseout="out('6580107021722154279');" style=""><abbr title="1542         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, entityForm, entity);">1542         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1543     }                                                                                                    </span>
<span  style="">1544                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1545     /**                                                                                                  </span>
<span class="837861132196545598" onmouseenter="enter('837861132196545598');" onmouseout="out('837861132196545598');" style=""><abbr title="1546      * Shows the view and populates the model for updating a collection item. You can also pass in an entityform and entity">1546      * Shows the view and populates the model for updating a collection item. You can also pass in an entðŸ”µ</abbr></span>
<span class="5643306329084644224" onmouseenter="enter('5643306329084644224');" onmouseout="out('5643306329084644224');" style="">1547      * which are optional. If they are not passed in then they are automatically looked up               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1548      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1549      * @param request                                                                                    </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1550      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1551      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1552      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1553      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1554      * @param collectionItemId                                                                           </span>
<span class="-5929844173285242940" onmouseenter="enter('-5929844173285242940');" onmouseout="out('-5929844173285242940');" style="">1555      * @param modalHeaderType                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1556      * @param entityForm                                                                                 </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style="">1557      * @param entity                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1558      * @return                                                                                           </span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1559      * @throws ServiceException                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1560      */                                                                                                  </span>
<span class="-7113907340183053787" onmouseenter="enter('-7113907340183053787');" onmouseout="out('-7113907340183053787');" style="">1561     protected String showViewUpdateCollection(HttpServletRequest request,                                </span>
<span class="-8519940996091909282" onmouseenter="enter('-8519940996091909282');" onmouseout="out('-8519940996091909282');" style="">1562             Model model,                                                                                 </span>
<span class="233550986134862533" onmouseenter="enter('233550986134862533');" onmouseout="out('233550986134862533');" style="">1563             Map&lt;String, String&gt; pathVars,                                                                </span>
<span class="462404651577214798" onmouseenter="enter('462404651577214798');" onmouseout="out('462404651577214798');" style="">1564             String id,                                                                                   </span>
<span class="-5551105944774799057" onmouseenter="enter('-5551105944774799057');" onmouseout="out('-5551105944774799057');" style="">1565             String collectionField,                                                                      </span>
<span class="-7138244874257810737" onmouseenter="enter('-7138244874257810737');" onmouseout="out('-7138244874257810737');" style="">1566             String collectionItemId,                                                                     </span>
<span class="7426253478403504017" onmouseenter="enter('7426253478403504017');" onmouseout="out('7426253478403504017');" style="">1567             String alternateId,                                                                          </span>
<span class="2900696252953040190" onmouseenter="enter('2900696252953040190');" onmouseout="out('2900696252953040190');" style="">1568             String modalHeaderType,                                                                      </span>
<span class="5597094285729719755" onmouseenter="enter('5597094285729719755');" onmouseout="out('5597094285729719755');" style="">1569             EntityForm entityForm,                                                                       </span>
<span class="3632664887850253049" onmouseenter="enter('3632664887850253049');" onmouseout="out('3632664887850253049');" style="">1570             Entity entity) throws ServiceException {                                                     </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1571         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1572         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1573         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1574         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1574         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1575         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1576         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span class="-2889762407992276786" onmouseenter="enter('-2889762407992276786');" onmouseout="out('-2889762407992276786');" style="">1577         SectionCrumb nextCrumb = new SectionCrumb();                                                     </span>
<span class="4180533444018328805" onmouseenter="enter('4180533444018328805');" onmouseout="out('4180533444018328805');" style="">1578         if (md instanceof MapMetadata) {                                                                 </span>
<span class="-382349485821163458" onmouseenter="enter('-382349485821163458');" onmouseout="out('-382349485821163458');" style="">1579             nextCrumb.setSectionIdentifier(((MapMetadata) md).getValueClassName());                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1580         } else {                                                                                         </span>
<span class="1919475910220989527" onmouseenter="enter('1919475910220989527');" onmouseout="out('1919475910220989527');" style="">1581             nextCrumb.setSectionIdentifier(((CollectionMetadata) md).getCollectionCeilingEntity());      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1582         }                                                                                                </span>
<span class="3745082800889494172" onmouseenter="enter('3745082800889494172');" onmouseout="out('3745082800889494172');" style="">1583         nextCrumb.setSectionId(collectionItemId);                                                        </span>
<span class="7047611651117816234" onmouseenter="enter('7047611651117816234');" onmouseout="out('7047611651117816234');" style="">1584         if (!sectionCrumbs.contains(nextCrumb)) {                                                        </span>
<span class="-6316688126111539901" onmouseenter="enter('-6316688126111539901');" onmouseout="out('-6316688126111539901');" style="">1585             sectionCrumbs.add(nextCrumb);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1586         }                                                                                                </span>
<span  style="">1587                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1588         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1588         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1589         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1589         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getReðŸ”µ</abbr></span>
<span  style="">1590                                                                                                          </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1591         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span  style="">1592                                                                                                          </span>
<span class="4300500518149699432" onmouseenter="enter('4300500518149699432');" onmouseout="out('4300500518149699432');" style="">1593         if (md instanceof BasicCollectionMetadata &amp;&amp;                                                     </span>
<span class="3179311364823579995" onmouseenter="enter('3179311364823579995');" onmouseout="out('3179311364823579995');" style="">1594                 (((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST) ||      </span>
<span class="-5057368181444983975" onmouseenter="enter('-5057368181444983975');" onmouseout="out('-5057368181444983975');" style=""><abbr title="1595                         ((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST_EMPTY))) {">1595                         ((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST_EMðŸ”µ</abbr></span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1596             BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                  </span>
<span  style="">1597                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1598             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1598             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1599             if (entity == null) {                                                                        </span>
<span class="4597721164047448054" onmouseenter="enter('4597721164047448054');" onmouseout="out('4597721164047448054');" style=""><abbr title="1600                 entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResultSet().getRecords()[0];">1600                 entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1601             }                                                                                            </span>
<span  style="">1602                                                                                                          </span>
<span class="-7942197356638317765" onmouseenter="enter('-7942197356638317765');" onmouseout="out('-7942197356638317765');" style="">1603             String currentTabName = getCurrentTabName(pathVars, collectionMetadata);                     </span>
<span class="9017537031938626444" onmouseenter="enter('9017537031938626444');" onmouseout="out('9017537031938626444');" style=""><abbr title="1604             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetadata, entity, sectionCrumbs, currentTabName);">1604             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetaðŸ”µ</abbr></span>
<span  style="">1605                                                                                                          </span>
<span class="348957922752701667" onmouseenter="enter('348957922752701667');" onmouseout="out('348957922752701667');" style="">1606             entityForm = reinitializeEntityForm(entityForm, collectionMetadata, entity,                  </span>
<span class="-6666340752275266103" onmouseenter="enter('-6666340752275266103');" onmouseout="out('-6666340752275266103');" style="">1607                     subRecordsMap, sectionCrumbs);                                                       </span>
<span  style="">1608                                                                                                          </span>
<span class="-3892497188964586657" onmouseenter="enter('-3892497188964586657');" onmouseout="out('-3892497188964586657');" style="">1609             entityForm.removeAction(DefaultEntityFormActions.DELETE);                                    </span>
<span class="6748640999540281749" onmouseenter="enter('6748640999540281749');" onmouseout="out('6748640999540281749');" style="">1610             entityForm.removeAction(DefaultEntityFormActions.DUPLICATE);                                 </span>
<span  style="">1611                                                                                                          </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1612             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1613             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="2070483683171714322" onmouseenter="enter('2070483683171714322');" onmouseout="out('2070483683171714322');" style="">1614             model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleEditEntity&quot;);                                    </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1615         } else if (md instanceof AdornedTargetCollectionMetadata) {                                      </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1616             AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                  </span>
<span  style="">1617                                                                                                          </span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1618             if (entity == null) {                                                                        </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style=""><abbr title="1619                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,">1619                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperðŸ”µ</abbr></span>
<span class="-2961516840614790290" onmouseenter="enter('-2961516840614790290');" onmouseout="out('-2961516840614790290');" style="">1620                     collectionItemId, sectionCrumbs, alternateId).getDynamicResultSet().getRecords()[0]; </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1621             }                                                                                            </span>
<span  style="">1622                                                                                                          </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1623             boolean populateTypeAndId = true;                                                            </span>
<span class="921756716374353809" onmouseenter="enter('921756716374353809');" onmouseout="out('921756716374353809');" style=""><abbr title="1624             boolean isViewCollectionItem = ModalHeaderType.VIEW_COLLECTION_ITEM.getType().equals(modalHeaderType);">1624             boolean isViewCollectionItem = ModalHeaderType.VIEW_COLLECTION_ITEM.getType().equals(modalHeaðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1625             if (entityForm == null) {                                                                    </span>
<span class="-8902040329002931298" onmouseenter="enter('-8902040329002931298');" onmouseout="out('-8902040329002931298');" style=""><abbr title="1626                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, sectionCrumbs, false);">1626                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollecðŸ”µ</abbr></span>
<span class="-4655192855930300298" onmouseenter="enter('-4655192855930300298');" onmouseout="out('-4655192855930300298');" style="">1627                 entityForm.removeAction(DefaultAdornedEntityFormActions.Add);                            </span>
<span class="1109271490036416226" onmouseenter="enter('1109271490036416226');" onmouseout="out('1109271490036416226');" style="">1628                 entityForm.addAction(DefaultAdornedEntityFormActions.Save);                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1629             } else {                                                                                     </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1630                 entityForm.clearFieldsMap();                                                             </span>
<span class="2583214667713512490" onmouseenter="enter('2583214667713512490');" onmouseout="out('2583214667713512490');" style="">1631                 String entityType = entityForm.getEntityType();                                          </span>
<span class="-6584758178229470245" onmouseenter="enter('-6584758178229470245');" onmouseout="out('-6584758178229470245');" style=""><abbr title="1632                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entityForm, sectionCrumbs, false);">1632                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entðŸ”µ</abbr></span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style="">1633                 entityForm.setEntityType(entityType);                                                    </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1634                 populateTypeAndId = false;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1635             }                                                                                            </span>
<span  style="">1636                                                                                                          </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1637             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1638             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1638             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, maðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1639                     collectionField,                                                                     </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1640                     collectionItemId, responseMap);                                                      </span>
<span  style="">1641                                                                                                          </span>
<span class="-3972135447881278836" onmouseenter="enter('-3972135447881278836');" onmouseout="out('-3972135447881278836');" style=""><abbr title="1642             //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and Id is used.">1642             //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and ðŸ”µ</abbr></span>
<span class="-8007896595560301001" onmouseenter="enter('-8007896595560301001');" onmouseout="out('-8007896595560301001');" style=""><abbr title="1643             //It should be the entity and referenced Id of the adorned entity (not the target entity and Id).">1643             //It should be the entity and referenced Id of the adorned entity (not the target entity and ðŸ”µ</abbr></span>
<span class="316997016312344867" onmouseenter="enter('316997016312344867');" onmouseout="out('316997016312344867');" style="">1644             entityForm.setTranslationCeilingEntity(entityForm.getEntityType());                          </span>
<span class="-4512360180775881719" onmouseenter="enter('-4512360180775881719');" onmouseout="out('-4512360180775881719');" style="">1645             entityForm.setTranslationId(alternateId);                                                    </span>
<span  style="">1646                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style="">1647             ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();  </span>
<span class="-1465905251928147670" onmouseenter="enter('-1465905251928147670');" onmouseout="out('-1465905251928147670');" style="">1648             for (String field : fmd.getMaintainedAdornedTargetFields()) {                                </span>
<span class="-2821179418575098708" onmouseenter="enter('-2821179418575098708');" onmouseout="out('-2821179418575098708');" style="">1649                 if (responseMap.containsKey(field) &amp;&amp; responseMap.containsKey(&quot;autoSubmit&quot;)) {           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1650                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1651                 }                                                                                        </span>
<span class="-3390991397790942785" onmouseenter="enter('-3390991397790942785');" onmouseout="out('-3390991397790942785');" style="">1652                 Property p = cmd.getPMap().get(field);                                                   </span>
<span class="3110636146594998978" onmouseenter="enter('3110636146594998978');" onmouseout="out('3110636146594998978');" style="">1653                 if (p != null &amp;&amp; p.getMetadata() instanceof AdornedTargetCollectionMetadata) {           </span>
<span class="-1526293730221303684" onmouseenter="enter('-1526293730221303684');" onmouseout="out('-1526293730221303684');" style=""><abbr title="1654                     // Because we&#x27;re dealing with a nested adorned target collection, this particular request must act">1654                     // Because we&#x27;re dealing with a nested adorned target collection, this particular reqðŸ”µ</abbr></span>
<span class="5008429970050276114" onmouseenter="enter('5008429970050276114');" onmouseout="out('5008429970050276114');" style=""><abbr title="1655                     // directly on the first adorned target collection. Because of this, we need the actual id property">1655                     // directly on the first adorned target collection. Because of this, we need the actuðŸ”µ</abbr></span>
<span class="-7713892716328274330" onmouseenter="enter('-7713892716328274330');" onmouseout="out('-7713892716328274330');" style=""><abbr title="1656                     // from the entity that models the adorned target relationship, and not the id of the target object.">1656                     // from the entity that models the adorned target relationship, and not the id of theðŸ”µ</abbr></span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1657                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1657                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style=""><abbr title="1658                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,">1658                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, nuðŸ”µ</abbr></span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1659                             alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();        </span>
<span  style="">1660                                                                                                          </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1661                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1661                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(ðŸ”µ</abbr></span>
<span class="-6504403122086949696" onmouseenter="enter('-6504403122086949696');" onmouseout="out('-6504403122086949696');" style="">1662                             ppr.getAdornedList().getAdornedTargetEntityClassname(), sectionCrumbs);      </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1663                     listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                        </span>
<span  style="">1664                                                                                                          </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1665                     if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {       </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1666                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1666                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1667                     } else {                                                                             </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1668                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1668                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1669                     }                                                                                    </span>
<span class="2712626054905490038" onmouseenter="enter('2712626054905490038');" onmouseout="out('2712626054905490038');" style="">1670                 } else if (p != null &amp;&amp; p.getMetadata() instanceof MapMetadata) {                        </span>
<span class="-388196981394792667" onmouseenter="enter('-388196981394792667');" onmouseout="out('-388196981394792667');" style="">1671                     // See above comment for AdornedTargetCollectionMetadata                             </span>
<span class="-9194902891343883685" onmouseenter="enter('-9194902891343883685');" onmouseout="out('-9194902891343883685');" style="">1672                     MapMetadata mmd = (MapMetadata) p.getMetadata();                                     </span>
<span  style="">1673                                                                                                          </span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1674                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1674                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style=""><abbr title="1675                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,">1675                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, nuðŸ”µ</abbr></span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1676                             alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();        </span>
<span  style="">1677                                                                                                          </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1678                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1678                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(ðŸ”µ</abbr></span>
<span class="-6515044965274807025" onmouseenter="enter('-6515044965274807025');" onmouseout="out('-6515044965274807025');" style="">1679                             mmd.getTargetClass(), sectionCrumbs);                                        </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1680                     listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                        </span>
<span  style="">1681                                                                                                          </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1682                     if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {       </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1683                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1683                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1684                     } else {                                                                             </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1685                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1685                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1686                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1687                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1688             }                                                                                            </span>
<span  style="">1689                                                                                                          </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style=""><abbr title="1690             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);">1690             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndIdðŸ”µ</abbr></span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">1691             formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());       </span>
<span  style="">1692                                                                                                          </span>
<span class="7046829326366784672" onmouseenter="enter('7046829326366784672');" onmouseout="out('7046829326366784672');" style="">1693             boolean atLeastOneBasicField = false;                                                        </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1694             for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                       </span>
<span class="-3942382004211496115" onmouseenter="enter('-3942382004211496115');" onmouseout="out('-3942382004211496115');" style=""><abbr title="1695                 if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName()) &amp;&amp; !responseMap.containsKey(&quot;autoSubmit&quot;)) {">1695                 if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName(ðŸ”µ</abbr></span>
<span class="3115307772764059490" onmouseenter="enter('3115307772764059490');" onmouseout="out('3115307772764059490');" style="">1696                     atLeastOneBasicField = true;                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1697                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1698                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1699             }                                                                                            </span>
<span class="4813170790944841786" onmouseenter="enter('4813170790944841786');" onmouseout="out('4813170790944841786');" style="">1700             if (!atLeastOneBasicField) {                                                                 </span>
<span class="3364274495995556597" onmouseenter="enter('3364274495995556597');" onmouseout="out('3364274495995556597');" style="">1701                 entityForm.removeAction(DefaultEntityFormActions.SAVE);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1702             }                                                                                            </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1703             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1704             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="3009851293217081678" onmouseenter="enter('3009851293217081678');" onmouseout="out('3009851293217081678');" style="">1705             model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedEditEntity&quot;);                                   </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1706         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1707             MapMetadata fmd = (MapMetadata) md;                                                          </span>
<span  style="">1708                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1709             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1709             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1710             if (entity == null) {                                                                        </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style=""><abbr title="1711                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,">1711                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperðŸ”µ</abbr></span>
<span class="-2813813427236819301" onmouseenter="enter('-2813813427236819301');" onmouseout="out('-2813813427236819301');" style="">1712                     collectionItemId, sectionCrumbs, null).getEntity();                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1713             }                                                                                            </span>
<span  style="">1714                                                                                                          </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1715             boolean populateTypeAndId = true;                                                            </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1716             if (entityForm == null) {                                                                    </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style=""><abbr title="1717                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);">1717                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id)ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1718             } else {                                                                                     </span>
<span class="-2965751497501930249" onmouseenter="enter('-2965751497501930249');" onmouseout="out('-2965751497501930249');" style="">1719                 //save off the prior key before clearing out the fields map as it will not appear        </span>
<span class="-4459883460939835415" onmouseenter="enter('-4459883460939835415');" onmouseout="out('-4459883460939835415');" style="">1720                 //back on the saved entity                                                               </span>
<span class="-8617997777962995342" onmouseenter="enter('-8617997777962995342');" onmouseout="out('-8617997777962995342');" style="">1721                 String priorKey = entityForm.findField(&quot;priorKey&quot;).getValue();                           </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1722                 entityForm.clearFieldsMap();                                                             </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1723                 formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);</span>
<span class="-5674534809018144237" onmouseenter="enter('-5674534809018144237');" onmouseout="out('-5674534809018144237');" style="">1724                 entityForm.findField(&quot;priorKey&quot;).setValue(priorKey);                                     </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1725                 populateTypeAndId = false;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1726             }                                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1727             try {                                                                                        </span>
<span class="1682170733642187652" onmouseenter="enter('1682170733642187652');" onmouseout="out('1682170733642187652');" style="">1728                 if (StringUtils.isNotEmpty(fmd.getToOneTargetProperty())) {                              </span>
<span class="-5619455120098479761" onmouseenter="enter('-5619455120098479761');" onmouseout="out('-5619455120098479761');" style=""><abbr title="1729                     entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredField(fmd.getToOneTargetProperty()).getType().getName());">1729                     entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1730                 }                                                                                        </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1731             } catch (Exception e) {                                                                      </span>
<span class="4149062910666573697" onmouseenter="enter('4149062910666573697');" onmouseout="out('4149062910666573697');" style="">1732                 LOG.error(e);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1733             }                                                                                            </span>
<span class="-1018820723400133408" onmouseenter="enter('-1018820723400133408');" onmouseout="out('-1018820723400133408');" style=""><abbr title="1734             String entityId = (fmd.getToOneTargetProperty().equals(&quot;&quot;) ? &quot;id&quot; : fmd.getToOneTargetProperty() + &quot;.id&quot;);">1734             String entityId = (fmd.getToOneTargetProperty().equals(&quot;&quot;) ? &quot;id&quot; : fmd.getToOneTargetPropertðŸ”µ</abbr></span>
<span class="423419420192712450" onmouseenter="enter('423419420192712450');" onmouseout="out('423419420192712450');" style="">1735             entityForm.setTranslationId(entity.getPMap().get(entityId).getValue());                      </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style=""><abbr title="1736             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);">1736             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndIdðŸ”µ</abbr></span>
<span class="-7934209705949108459" onmouseenter="enter('-7934209705949108459');" onmouseout="out('-7934209705949108459');" style="">1737             formService.populateMapEntityFormFields(entityForm, entity);                                 </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style=""><abbr title="1738             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);">1738             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndIdðŸ”µ</abbr></span>
<span class="-7934209705949108459" onmouseenter="enter('-7934209705949108459');" onmouseout="out('-7934209705949108459');" style="">1739             formService.populateMapEntityFormFields(entityForm, entity);                                 </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1740             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1741             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="5184741693677662709" onmouseenter="enter('5184741693677662709');" onmouseout="out('5184741693677662709');" style="">1742             model.addAttribute(&quot;viewType&quot;, &quot;modal/mapEditEntity&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1743         }                                                                                                </span>
<span  style="">1744                                                                                                          </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1745         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="5715532112666019496" onmouseenter="enter('5715532112666019496');" onmouseout="out('5715532112666019496');" style="">1746         model.addAttribute(&quot;modalHeaderType&quot;, modalHeaderType);                                          </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1747         model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1748         setModelAttributes(model, sectionKey);                                                           </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="">1749         return MODAL_CONTAINER_VIEW;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1750     }                                                                                                    </span>
<span  style="">1751                                                                                                          </span>
<span class="-6629135688250429856" onmouseenter="enter('-6629135688250429856');" onmouseout="out('-6629135688250429856');" style="">1752     protected EntityForm reinitializeEntityForm(final EntityForm entityForm,                             </span>
<span class="2488527282562212871" onmouseenter="enter('2488527282562212871');" onmouseout="out('2488527282562212871');" style="">1753             final ClassMetadata collectionMetadata,                                                      </span>
<span class="6244041270191906475" onmouseenter="enter('6244041270191906475');" onmouseout="out('6244041270191906475');" style="">1754             final Entity entity,                                                                         </span>
<span class="4210642227221008869" onmouseenter="enter('4210642227221008869');" onmouseout="out('4210642227221008869');" style="">1755             final Map&lt;String, DynamicResultSet&gt; subRecordsMap,                                           </span>
<span class="7695373887778905827" onmouseenter="enter('7695373887778905827');" onmouseout="out('7695373887778905827');" style="">1756             final List&lt;SectionCrumb&gt; sectionCrumbs) throws ServiceException {                            </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1757         if (entityForm == null) {                                                                        </span>
<span class="5007761642077021691" onmouseenter="enter('5007761642077021691');" onmouseout="out('5007761642077021691');" style="">1758             return formService                                                                           </span>
<span class="2427987523723463928" onmouseenter="enter('2427987523723463928');" onmouseout="out('2427987523723463928');" style="">1759                     .createEntityForm(collectionMetadata, entity, subRecordsMap, sectionCrumbs);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1760         }                                                                                                </span>
<span  style="">1761                                                                                                          </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1762         entityForm.clearFieldsMap();                                                                     </span>
<span class="524385531586817703" onmouseenter="enter('524385531586817703');" onmouseout="out('524385531586817703');" style="">1763         formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm,            </span>
<span class="2971672777452209099" onmouseenter="enter('2971672777452209099');" onmouseout="out('2971672777452209099');" style="">1764                 sectionCrumbs);                                                                          </span>
<span class="5496760487980360743" onmouseenter="enter('5496760487980360743');" onmouseout="out('5496760487980360743');" style="">1765         //remove all the actions since we&#x27;re not trying to redisplay them on the form                    </span>
<span class="-6469844840195102556" onmouseenter="enter('-6469844840195102556');" onmouseout="out('-6469844840195102556');" style="">1766         entityForm.removeAllActions();                                                                   </span>
<span  style="">1767                                                                                                          </span>
<span class="6548609876597156982" onmouseenter="enter('6548609876597156982');" onmouseout="out('6548609876597156982');" style="">1768         return entityForm;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1769     }                                                                                                    </span>
<span  style="">1770                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1771     /**                                                                                                  </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1772      * Updates the specified collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1773      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1774      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1775      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1776      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1777      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1778      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1779      * @param collectionField                                                                            </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1780      * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1780      * @param collectionItemId the collection primary key value (in the case of adorned target collectionðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1781      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1782      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1783      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1784      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1785      */                                                                                                  </span>
<span class="1690395709289479208" onmouseenter="enter('1690395709289479208');" onmouseout="out('1690395709289479208');" style="">1786     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.POST)</span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style=""><abbr title="1787     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1787     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1788             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1789             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1790             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1791             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1792             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                   </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1793             BindingResult result) throws Exception {                                                     </span>
<span class="454845068344591329" onmouseenter="enter('454845068344591329');" onmouseout="out('454845068344591329');" style=""><abbr title="1794         return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, entityForm, null, result);">1794         return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1795     }                                                                                                    </span>
<span  style="">1796                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1797     /**                                                                                                  </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1798      * Updates the specified collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1799      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1800      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1801      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1802      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1803      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1804      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1805      * @param collectionField                                                                            </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1806      * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1806      * @param collectionItemId the collection primary key value (in the case of adorned target collectionðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1807      * @param entityForm                                                                                 </span>
<span class="4031667150854181086" onmouseenter="enter('4031667150854181086');" onmouseout="out('4031667150854181086');" style=""><abbr title="1808      * @param alternateId in the case of adorned target collections, this is the primary key value of the collection member">1808      * @param alternateId in the case of adorned target collections, this is the primary key value of theðŸ”µ</abbr></span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1809      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1810      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1811      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1812      */                                                                                                  </span>
<span class="6716233350399381715" onmouseenter="enter('6716233350399381715');" onmouseout="out('6716233350399381715');" style=""><abbr title="1813     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.POST)">1813     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequeðŸ”µ</abbr></span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style=""><abbr title="1814     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1814     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1815             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1816             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1817             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1818             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1819             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                   </span>
<span class="-5366992345424767315" onmouseenter="enter('-5366992345424767315');" onmouseout="out('-5366992345424767315');" style="">1820             @PathVariable(value=&quot;alternateId&quot;) String alternateId,                                       </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1821             BindingResult result) throws Exception {                                                     </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1822         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1823         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1824         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1825         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1825         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1826         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1827                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1828         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1828         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1829         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1829         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1830         service.clearEntityManager();                                                                    </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1831         // First, we must save the collection entity                                                     </span>
<span class="3262117580653454816" onmouseenter="enter('3262117580653454816');" onmouseout="out('3262117580653454816');" style=""><abbr title="1832         PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, collectionItemId, alternateId, sectionCrumbs);">1832         PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1833         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1834         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">1835                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1836         if (result.hasErrors()) {                                                                        </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1837             return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1837             return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemðŸ”µ</abbr></span>
<span class="-1009973048758571460" onmouseenter="enter('-1009973048758571460');" onmouseout="out('-1009973048758571460');" style="">1838                     ModalHeaderType.UPDATE_COLLECTION_ITEM.getType(), entityForm, savedEntity);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1839         }                                                                                                </span>
<span  style="">1840                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1841         // Next, we must get the new list grid that represents this collection                           </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1842         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1843         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1843         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span  style="">1844                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1845         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1846         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1847         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1848         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1849     }                                                                                                    </span>
<span  style="">1850                                                                                                          </span>
<span class="-2715204734461845190" onmouseenter="enter('-2715204734461845190');" onmouseout="out('-2715204734461845190');" style=""><abbr title="1851     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMethod.POST)">1851     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMetðŸ”µ</abbr></span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">1852     public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,    </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">1853             HttpServletResponse response, Model model,                                                   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1854             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1855             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1856             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1857             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="6458961487045284345" onmouseenter="enter('6458961487045284345');" onmouseout="out('6458961487045284345');" style="">1858             @RequestParam(value=&quot;newSequence&quot;) String newSequence) throws Exception {                    </span>
<span class="-6477101312884008952" onmouseenter="enter('-6477101312884008952');" onmouseout="out('-6477101312884008952');" style=""><abbr title="1859         return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collectionItemId, newSequence, null);">1859         return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1860     }                                                                                                    </span>
<span  style="">1861                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1862     /**                                                                                                  </span>
<span class="-7447609122613552365" onmouseenter="enter('-7447609122613552365');" onmouseout="out('-7447609122613552365');" style=""><abbr title="1863      * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target collections">1863      * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target colðŸ”µ</abbr></span>
<span class="5163972519999742424" onmouseenter="enter('5163972519999742424');" onmouseout="out('5163972519999742424');" style=""><abbr title="1864      * where a sort field is specified -- any other invocation is incorrect and will result in an exception.">1864      * where a sort field is specified -- any other invocation is incorrect and will result in an exceptiðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1865      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1866      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1867      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1868      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1869      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1870      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1871      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1872      * @param collectionItemId                                                                           </span>
<span class="8542418631474543845" onmouseenter="enter('8542418631474543845');" onmouseout="out('8542418631474543845');" style="">1873      * @return an object explaining the state of the operation                                           </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1874      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1875      */                                                                                                  </span>
<span class="1279723180837283801" onmouseenter="enter('1279723180837283801');" onmouseout="out('1279723180837283801');" style=""><abbr title="1876     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, method = RequestMethod.POST)">1876     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, methoðŸ”µ</abbr></span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">1877     public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,    </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">1878             HttpServletResponse response, Model model,                                                   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1879             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1880             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1881             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1882             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="6744719432735700494" onmouseenter="enter('6744719432735700494');" onmouseout="out('6744719432735700494');" style="">1883             @RequestParam(value=&quot;newSequence&quot;) String newSequence,                                       </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1884             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1885         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1886         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1887         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1888         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1888         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1889         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1890         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style="">1891                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1892         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1892         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="6971869165316675737" onmouseenter="enter('6971869165316675737');" onmouseout="out('6971869165316675737');" style="">1893         ppr.addCustomCriteria(&quot;reorderParentEntityFetch&quot;);                                               </span>
<span  style="">1894                                                                                                          </span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1895         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1895         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getReðŸ”µ</abbr></span>
<span  style="">1896                                                                                                          </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1897         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span  style="">1898                                                                                                          </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1899         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1900             AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                  </span>
<span class="-895931586936599512" onmouseenter="enter('-895931586936599512');" onmouseout="out('-895931586936599512');" style="">1901             AdornedTargetList atl = ppr.getAdornedList();                                                </span>
<span  style="">1902                                                                                                          </span>
<span class="4013888246220668443" onmouseenter="enter('4013888246220668443');" onmouseout="out('4013888246220668443');" style="">1903             // Get an entity form for the entity                                                         </span>
<span class="4144133685169635892" onmouseenter="enter('4144133685169635892');" onmouseout="out('4144133685169635892');" style=""><abbr title="1904             EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, false);">1904             EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, falseðŸ”µ</abbr></span>
<span class="985151044669117950" onmouseenter="enter('985151044669117950');" onmouseout="out('985151044669117950');" style=""><abbr title="1905             Entity entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,">1905             Entity entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProðŸ”µ</abbr></span>
<span class="-4422231398086337832" onmouseenter="enter('-4422231398086337832');" onmouseout="out('-4422231398086337832');" style=""><abbr title="1906                     collectionItemId, sectionCrumbs, alternateId, new String[]{&quot;reorderChildEntityFetch&quot;})">1906                     collectionItemId, sectionCrumbs, alternateId, new String[]{&quot;reorderChildEntityFetch&quot;}ðŸ”µ</abbr></span>
<span class="-7850695853310911802" onmouseenter="enter('-7850695853310911802');" onmouseout="out('-7850695853310911802');" style="">1907                     .getDynamicResultSet().getRecords()[0];                                              </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">1908             formService.populateEntityFormFields(entityForm, entity);                                    </span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">1909             formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());       </span>
<span  style="">1910                                                                                                          </span>
<span class="-3124065187694573478" onmouseenter="enter('-3124065187694573478');" onmouseout="out('-3124065187694573478');" style=""><abbr title="1911             // Set the new sequence (note that it will come in 0-indexed but the persistence module expects 1-indexed)">1911             // Set the new sequence (note that it will come in 0-indexed but the persistence module expecðŸ”µ</abbr></span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">1912             int sequenceValue = Integer.parseInt(newSequence) + 1;                                       </span>
<span class="2556919505341751863" onmouseenter="enter('2556919505341751863');" onmouseout="out('2556919505341751863');" style="">1913             Field field = entityForm.findField(atl.getSortField());                                      </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">1914             field.setValue(String.valueOf(sequenceValue));                                               </span>
<span  style="">1915                                                                                                          </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1916             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="-5669538829732150992" onmouseenter="enter('-5669538829732150992');" onmouseout="out('-5669538829732150992');" style=""><abbr title="1917             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, alternateId, sectionCrumbs);">1917             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMðŸ”µ</abbr></span>
<span class="-6209319883391535282" onmouseenter="enter('-6209319883391535282');" onmouseout="out('-6209319883391535282');" style="">1918             Property displayOrder = persistenceResponse.getEntity().findProperty(atl.getSortField());    </span>
<span  style="">1919                                                                                                          </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">1920             responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                             </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">1921             responseMap.put(&quot;field&quot;, collectionField);                                                   </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">1922             responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());   </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1923             return responseMap;                                                                          </span>
<span class="-3117865694677500361" onmouseenter="enter('-3117865694677500361');" onmouseout="out('-3117865694677500361');" style="">1924         } else if (md instanceof BasicCollectionMetadata) {                                              </span>
<span class="-8492572584837651214" onmouseenter="enter('-8492572584837651214');" onmouseout="out('-8492572584837651214');" style="">1925             BasicCollectionMetadata cd = (BasicCollectionMetadata) md;                                   </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1926             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="-2546552603594507996" onmouseenter="enter('-2546552603594507996');" onmouseout="out('-2546552603594507996');" style=""><abbr title="1927             Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1927             Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResulðŸ”µ</abbr></span>
<span  style="">1928                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1929             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1929             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="-2818097934143266938" onmouseenter="enter('-2818097934143266938');" onmouseout="out('-2818097934143266938');" style="">1930             EntityForm entityForm = formService.createEntityForm(collectionMetadata, sectionCrumbs);     </span>
<span class="2758594966987635918" onmouseenter="enter('2758594966987635918');" onmouseout="out('2758594966987635918');" style=""><abbr title="1931             boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1931             boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPðŸ”µ</abbr></span>
<span class="8701882977725374051" onmouseenter="enter('8701882977725374051');" onmouseout="out('8701882977725374051');" style="">1932             if(listGridReadOnly){                                                                        </span>
<span class="2312726484157116526" onmouseenter="enter('2312726484157116526');" onmouseout="out('2312726484157116526');" style="">1933                         throw new SecurityServiceException();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1934             }                                                                                            </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">1935             if (!StringUtils.isEmpty(cd.getSortProperty())) {                                            </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1936                 Field f = new Field()                                                                    </span>
<span class="-2538063021289876061" onmouseenter="enter('-2538063021289876061');" onmouseout="out('-2538063021289876061');" style="">1937                         .withName(cd.getSortProperty())                                                  </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1938                         .withFieldType(SupportedFieldType.HIDDEN.toString());                            </span>
<span class="5054103958554301667" onmouseenter="enter('5054103958554301667');" onmouseout="out('5054103958554301667');" style="">1939                 entityForm.addHiddenField(mainMetadata, f);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1940             }                                                                                            </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">1941             formService.populateEntityFormFields(entityForm, entity);                                    </span>
<span  style="">1942                                                                                                          </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">1943             if (!StringUtils.isEmpty(cd.getSortProperty())) {                                            </span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">1944                 int sequenceValue = Integer.parseInt(newSequence) + 1;                                   </span>
<span class="-3733495482183042291" onmouseenter="enter('-3733495482183042291');" onmouseout="out('-3733495482183042291');" style="">1945                 Field field = entityForm.findField(cd.getSortProperty());                                </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">1946                 field.setValue(String.valueOf(sequenceValue));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1947             }                                                                                            </span>
<span  style="">1948                                                                                                          </span>
<span class="3923458830762383909" onmouseenter="enter('3923458830762383909');" onmouseout="out('3923458830762383909');" style=""><abbr title="1949             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, sectionCrumbs);">1949             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMðŸ”µ</abbr></span>
<span class="-792608105002716351" onmouseenter="enter('-792608105002716351');" onmouseout="out('-792608105002716351');" style="">1950             Property displayOrder = persistenceResponse.getEntity().findProperty(cd.getSortProperty());  </span>
<span  style="">1951                                                                                                          </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">1952             responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                             </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">1953             responseMap.put(&quot;field&quot;, collectionField);                                                   </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">1954             responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());   </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1955             return responseMap;                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1956         } else {                                                                                         </span>
<span class="7542199431919878786" onmouseenter="enter('7542199431919878786');" onmouseout="out('7542199431919878786');" style=""><abbr title="1957             throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collection fields.&quot;);">1957             throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1958         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1959     }                                                                                                    </span>
<span  style="">1960                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1961     /**                                                                                                  </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">1962      * Removes the requested collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1963      *                                                                                                   </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="1964      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">1964      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collectionðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">1965      * map collection.                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1966      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1967      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1968      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1969      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1970      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1971      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1972      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1973      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1974      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1975      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1976      */                                                                                                  </span>
<span class="6340503715634976611" onmouseenter="enter('6340503715634976611');" onmouseout="out('6340503715634976611');" style=""><abbr title="1977     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/delete&quot;, method = RequestMethod.POST)">1977     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/delete&quot;, method = RequestMethoðŸ”µ</abbr></span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style=""><abbr title="1978     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1978     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1979             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1980             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1981             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1982             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="6845453766150325497" onmouseenter="enter('6845453766150325497');" onmouseout="out('6845453766150325497');" style=""><abbr title="1983         return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, null);">1983         return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1984     }                                                                                                    </span>
<span  style="">1985                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1986     /**                                                                                                  </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">1987      * Removes the requested collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1988      *                                                                                                   </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="1989      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">1989      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collectionðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">1990      * map collection.                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1991      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1992      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1993      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1994      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1995      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1996      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1997      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1998      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1999      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">2000      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2001      */                                                                                                  </span>
<span class="-4053134536146029119" onmouseenter="enter('-4053134536146029119');" onmouseout="out('-4053134536146029119');" style=""><abbr title="2002     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method = RequestMethod.POST)">2002     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method ðŸ”µ</abbr></span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style=""><abbr title="2003     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">2003     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">2004             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">2005             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">2006             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">2007             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">2008             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">2009         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">2010         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">2011         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="2012         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">2012         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">2013         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">2014                                                                                                          </span>
<span class="-6408221600487262974" onmouseenter="enter('-6408221600487262974');" onmouseout="out('-6408221600487262974');" style="">2015         String priorKey = request.getParameter(&quot;key&quot;);                                                   </span>
<span  style="">2016                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="2017         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">2017         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">2018         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="2019         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">2019         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">2020         service.clearEntityManager();                                                                    </span>
<span class="8107528363762278945" onmouseenter="enter('8107528363762278945');" onmouseout="out('8107528363762278945');" style="">2021         // First, we must remove the collection entity                                                   </span>
<span class="-8185015406879465962" onmouseenter="enter('-8185015406879465962');" onmouseout="out('-8185015406879465962');" style=""><abbr title="2022         PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectionProperty, entity, collectionItemId, alternateId, priorKey, sectionCrumbs);">2022         PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectðŸ”µ</abbr></span>
<span class="4740780245520344929" onmouseenter="enter('4740780245520344929');" onmouseout="out('4740780245520344929');" style=""><abbr title="2023         if (persistenceResponse.getEntity() != null &amp;&amp; persistenceResponse.getEntity().isValidationFailure()) {">2023         if (persistenceResponse.getEntity() != null &amp;&amp; persistenceResponse.getEntity().isValidationFailurðŸ”µ</abbr></span>
<span class="-1907173364280213129" onmouseenter="enter('-1907173364280213129');" onmouseout="out('-1907173364280213129');" style="">2024             String error = &quot;There was an error removing the whatever&quot;;                                   </span>
<span class="6694909055776458558" onmouseenter="enter('6694909055776458558');" onmouseout="out('6694909055776458558');" style="">2025             if (MapUtils.isNotEmpty(persistenceResponse.getEntity().getPropertyValidationErrors())) {    </span>
<span class="2653002805011151778" onmouseenter="enter('2653002805011151778');" onmouseout="out('2653002805011151778');" style="">2026                 // If we failed, we&#x27;ll return some JSON with the first error                             </span>
<span class="6101527636004026445" onmouseenter="enter('6101527636004026445');" onmouseout="out('6101527636004026445');" style=""><abbr title="2027                 error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator().next().get(0);">2027                 error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator()ðŸ”µ</abbr></span>
<span class="3589903040125146199" onmouseenter="enter('3589903040125146199');" onmouseout="out('3589903040125146199');" style=""><abbr title="2028             } else if (CollectionUtils.isNotEmpty(persistenceResponse.getEntity().getGlobalValidationErrors())) {">2028             } else if (CollectionUtils.isNotEmpty(persistenceResponse.getEntity().getGlobalValidationErroðŸ”µ</abbr></span>
<span class="-8002349788440125315" onmouseenter="enter('-8002349788440125315');" onmouseout="out('-8002349788440125315');" style="">2029                 error = persistenceResponse.getEntity().getGlobalValidationErrors().get(0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2030             }                                                                                            </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">2031             return new JsonResponse(response)                                                            </span>
<span class="4764127484129551096" onmouseenter="enter('4764127484129551096');" onmouseout="out('4764127484129551096');" style="">2032                 .with(&quot;status&quot;, &quot;error&quot;)                                                                 </span>
<span class="-4778619806303294332" onmouseenter="enter('-4778619806303294332');" onmouseout="out('-4778619806303294332');" style="">2033                 .with(&quot;message&quot;, BLCMessageUtils.getMessage(error))                                      </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">2034                 .done();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2035         }                                                                                                </span>
<span  style="">2036                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">2037         // Next, we must get the new list grid that represents this collection                           </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">2038         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="2039         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">2039         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span  style="">2040                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">2041         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">2042         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">2043         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">2044         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2045     }                                                                                                    </span>
<span  style="">2046                                                                                                          </span>
<span class="-1722269672251008380" onmouseenter="enter('-1722269672251008380');" onmouseout="out('-1722269672251008380');" style="">2047     public void addAuditableDisplayFields(EntityForm entityForm) {                                       </span>
<span class="2220665039639111541" onmouseenter="enter('2220665039639111541');" onmouseout="out('2220665039639111541');" style="">2048         Field createdBy = entityForm.findField(&quot;auditable.createdBy&quot;);                                   </span>
<span class="-1310269621989930827" onmouseenter="enter('-1310269621989930827');" onmouseout="out('-1310269621989930827');" style="">2049         if (createdBy != null &amp;&amp; createdBy.getValue() != null) {                                         </span>
<span class="3065344382927201496" onmouseenter="enter('3065344382927201496');" onmouseout="out('3065344382927201496');" style="">2050             addAuditableDisplayField(entityForm, createdBy);                                             </span>
<span  style="">2051                                                                                                          </span>
<span class="-8232178899610643805" onmouseenter="enter('-8232178899610643805');" onmouseout="out('-8232178899610643805');" style="">2052             createdBy.setIsVisible(false);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2053         }                                                                                                </span>
<span class="1393544913931451876" onmouseenter="enter('1393544913931451876');" onmouseout="out('1393544913931451876');" style="">2054         Field updatedBy = entityForm.findField(&quot;auditable.updatedBy&quot;);                                   </span>
<span class="362865388069983596" onmouseenter="enter('362865388069983596');" onmouseout="out('362865388069983596');" style="">2055         if (updatedBy != null &amp;&amp; updatedBy.getValue() != null) {                                         </span>
<span class="-892302887107162271" onmouseenter="enter('-892302887107162271');" onmouseout="out('-892302887107162271');" style="">2056             addAuditableDisplayField(entityForm, updatedBy);                                             </span>
<span  style="">2057                                                                                                          </span>
<span class="6398063041947851488" onmouseenter="enter('6398063041947851488');" onmouseout="out('6398063041947851488');" style="">2058             updatedBy.setIsVisible(false);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2059         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2060     }                                                                                                    </span>
<span  style="">2061                                                                                                          </span>
<span class="4984267825623541739" onmouseenter="enter('4984267825623541739');" onmouseout="out('4984267825623541739');" style="">2062     private void addAuditableDisplayField(EntityForm entityForm, Field userField) {                      </span>
<span class="-4635466229336929139" onmouseenter="enter('-4635466229336929139');" onmouseout="out('-4635466229336929139');" style="">2063         Field displayField = buildAuditableDisplayField(userField);                                      </span>
<span  style="">2064                                                                                                          </span>
<span class="-3510960703864117903" onmouseenter="enter('-3510960703864117903');" onmouseout="out('-3510960703864117903');" style="">2065         AdminUser user = adminUserDao.readAdminUserById(Long.parseLong(userField.getValue()));           </span>
<span class="-2749914300638269457" onmouseenter="enter('-2749914300638269457');" onmouseout="out('-2749914300638269457');" style="">2066         String userName = user == null ? null : user.getName();                                          </span>
<span class="-519467923242361473" onmouseenter="enter('-519467923242361473');" onmouseout="out('-519467923242361473');" style="">2067         displayField.setValue(userName);                                                                 </span>
<span  style="">2068                                                                                                          </span>
<span class="2796866146572271884" onmouseenter="enter('2796866146572271884');" onmouseout="out('2796866146572271884');" style="">2069         FieldGroup auditGroup = entityForm.findGroup(&quot;AdminAuditable_Audit&quot;);                            </span>
<span class="442119087406556402" onmouseenter="enter('442119087406556402');" onmouseout="out('442119087406556402');" style="">2070         if (auditGroup != null) {                                                                        </span>
<span class="2790071812155889083" onmouseenter="enter('2790071812155889083');" onmouseout="out('2790071812155889083');" style="">2071             auditGroup.addField(displayField);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2072         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2073     }                                                                                                    </span>
<span  style="">2074                                                                                                          </span>
<span class="-898012728924165157" onmouseenter="enter('-898012728924165157');" onmouseout="out('-898012728924165157');" style="">2075     private Field buildAuditableDisplayField(Field auditableField) {                                     </span>
<span class="7586031541837577475" onmouseenter="enter('7586031541837577475');" onmouseout="out('7586031541837577475');" style="">2076         return new Field().withFieldType(SupportedFieldType.STRING.toString())                           </span>
<span class="-5983163062967947616" onmouseenter="enter('-5983163062967947616');" onmouseout="out('-5983163062967947616');" style="">2077                 .withName(auditableField.getName() + &quot;Display&quot;)                                          </span>
<span class="-3810520855500417343" onmouseenter="enter('-3810520855500417343');" onmouseout="out('-3810520855500417343');" style="">2078                 .withFriendlyName(auditableField.getFriendlyName())                                      </span>
<span class="-2087540063707551713" onmouseenter="enter('-2087540063707551713');" onmouseout="out('-2087540063707551713');" style="">2079                 .withOrder(auditableField.getOrder())                                                    </span>
<span class="3252055162848788175" onmouseenter="enter('3252055162848788175');" onmouseout="out('3252055162848788175');" style="">2080                 .withOwningEntityClass(auditableField.getOwningEntityClass())                            </span>
<span class="8052491048417023702" onmouseenter="enter('8052491048417023702');" onmouseout="out('8052491048417023702');" style="">2081                 .withReadOnly(true);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2082     }                                                                                                    </span>
<span  style="">2083                                                                                                          </span>
<span class="2512746595428590302" onmouseenter="enter('2512746595428590302');" onmouseout="out('2512746595428590302');" style="">2084     protected String getCurrentTabName(Map&lt;String, String&gt; pathVars, ClassMetadata cmd) {                </span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style="">2085         String tabName = pathVars.get(&quot;tabName&quot;);                                                        </span>
<span class="620358619967646231" onmouseenter="enter('620358619967646231');" onmouseout="out('620358619967646231');" style="">2086         if (StringUtils.isBlank(tabName)) {                                                              </span>
<span class="-8386812650765964886" onmouseenter="enter('-8386812650765964886');" onmouseout="out('-8386812650765964886');" style="">2087             TabMetadata firstTab = cmd.getFirstTab();                                                    </span>
<span class="5997097813726693180" onmouseenter="enter('5997097813726693180');" onmouseout="out('5997097813726693180');" style="">2088             return firstTab != null ? firstTab.getTabName() : &quot;General&quot;;                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2089         }                                                                                                </span>
<span class="-6789109484485831180" onmouseenter="enter('-6789109484485831180');" onmouseout="out('-6789109484485831180');" style="">2090         return tabName;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2091     }                                                                                                    </span>
<span  style="">2092                                                                                                          </span>
<span class="3143437458878702073" onmouseenter="enter('3143437458878702073');" onmouseout="out('3143437458878702073');" style="">2093     protected String getCurrentFolderId(HttpServletRequest request) {                                    </span>
<span class="1754053964111348985" onmouseenter="enter('1754053964111348985');" onmouseout="out('1754053964111348985');" style="">2094         if (request.getParameterMap().containsKey(CURRENT_FOLDER_ID)) {                                  </span>
<span class="6180766430585782289" onmouseenter="enter('6180766430585782289');" onmouseout="out('6180766430585782289');" style="">2095             return request.getParameter(CURRENT_FOLDER_ID);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2096         }                                                                                                </span>
<span class="-7128073668423816870" onmouseenter="enter('-7128073668423816870');" onmouseout="out('-7128073668423816870');" style="">2097         return &quot;unassigned&quot;;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2098     }                                                                                                    </span>
<span  style="">2099                                                                                                          </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">2100     // *****************************************                                                         </span>
<span class="2492884656402841956" onmouseenter="enter('2492884656402841956');" onmouseout="out('2492884656402841956');" style="">2101     // Typed Entity Helper Methods                                                                       </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">2102     // *****************************************                                                         </span>
<span  style="">2103                                                                                                          </span>
<span class="709722161552159597" onmouseenter="enter('709722161552159597');" onmouseout="out('709722161552159597');" style="">2104     protected void setTypedEntityModelAttributes(HttpServletRequest request, Model model) {              </span>
<span class="2572860224956804545" onmouseenter="enter('2572860224956804545');" onmouseout="out('2572860224956804545');" style="">2105         // Check if this is a typed entity                                                               </span>
<span class="-601784761218487618" onmouseenter="enter('-601784761218487618');" onmouseout="out('-601784761218487618');" style="">2106         AdminSection typedEntitySection = (AdminSection) request.getAttribute(&quot;typedEntitySection&quot;);     </span>
<span class="2356861889771822774" onmouseenter="enter('2356861889771822774');" onmouseout="out('2356861889771822774');" style="">2107         if (typedEntitySection != null) {                                                                </span>
<span class="-7054855399164801351" onmouseenter="enter('-7054855399164801351');" onmouseout="out('-7054855399164801351');" style="">2108             // Update the friendly name for this Entity Type                                             </span>
<span class="-8436584596314077038" onmouseenter="enter('-8436584596314077038');" onmouseout="out('-8436584596314077038');" style="">2109             model.addAttribute(&quot;entityFriendlyName&quot;, typedEntitySection.getName());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2110         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2111     }                                                                                                    </span>
<span  style="">2112                                                                                                          </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">2113     // *********************************                                                                 </span>
<span class="5570644305110686760" onmouseenter="enter('5570644305110686760');" onmouseout="out('5570644305110686760');" style="">2114     // ADDITIONAL SPRING-BOUND METHODS *                                                                 </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">2115     // *********************************                                                                 </span>
<span  style="">2116                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2117     /**                                                                                                  </span>
<span class="-6771709729688841784" onmouseenter="enter('-6771709729688841784');" onmouseout="out('-6771709729688841784');" style=""><abbr title="2118      * Invoked on every request to provide the ability to register specific binders for Spring&#x27;s binding process.">2118      * Invoked on every request to provide the ability to register specific binders for Spring&#x27;s binding ðŸ”µ</abbr></span>
<span class="2498077318751920180" onmouseenter="enter('2498077318751920180');" onmouseout="out('2498077318751920180');" style=""><abbr title="2119      * By default, we register a binder that treats empty Strings as null and a Boolean editor that supports either true">2119      * By default, we register a binder that treats empty Strings as null and a Boolean editor that suppoðŸ”µ</abbr></span>
<span class="4465303089468973962" onmouseenter="enter('4465303089468973962');" onmouseout="out('4465303089468973962');" style="">2120      * or false. If the value is passed in as null, it will treat it as false.                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2121      *                                                                                                   </span>
<span class="-3898462538136412996" onmouseenter="enter('-3898462538136412996');" onmouseout="out('-3898462538136412996');" style="">2122      * @param binder                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2123      */                                                                                                  </span>
<span class="2978104519843175555" onmouseenter="enter('2978104519843175555');" onmouseout="out('2978104519843175555');" style="">2124     @InitBinder                                                                                          </span>
<span class="4179572271848089300" onmouseenter="enter('4179572271848089300');" onmouseout="out('4179572271848089300');" style="">2125     public void initBinder(WebDataBinder binder) {                                                       </span>
<span class="3888201586857511470" onmouseenter="enter('3888201586857511470');" onmouseout="out('3888201586857511470');" style="">2126         binder.registerCustomEditor(String.class, new StringTrimmerEditor(true));                        </span>
<span class="-4458929942740752488" onmouseenter="enter('-4458929942740752488');" onmouseout="out('-4458929942740752488');" style="">2127         binder.registerCustomEditor(Boolean.class, new NonNullBooleanEditor());                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2128     }                                                                                                    </span>
<span  style="">2129                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2130 }                                                                                                        </span>

































































































































































































































































































































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3   * BroadleafCommerce Open Admin Platform                                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span class="913821711322743166" onmouseenter="enter('913821711322743166');" onmouseout="out('913821711322743166');" style="">  18  package org.broadleafcommerce.openadmin.web.controller.entity;                                                    </span>
<span  style="">  19                                                                                                                    </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  20  import org.apache.commons.collections.CollectionUtils;                                                            </span>
<span class="4020017653195254006" onmouseenter="enter('4020017653195254006');" onmouseout="out('4020017653195254006');" style="">  21  import org.apache.commons.collections.MapUtils;                                                                   </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  22  import org.apache.commons.lang3.StringUtils;                                                                      </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  23  import org.apache.commons.logging.Log;                                                                            </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  24  import org.apache.commons.logging.LogFactory;                                                                     </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  25  import org.broadleafcommerce.common.exception.SecurityServiceException;                                           </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  26  import org.broadleafcommerce.common.exception.ServiceException;                                                   </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  27  import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                              </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  28  import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                          </span>
<span class="-3349026188166660873" onmouseenter="enter('-3349026188166660873');" onmouseout="out('-3349026188166660873');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  29 +import org.broadleafcommerce.common.persistence.EntityDuplicator;                                                 </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  30  import org.broadleafcommerce.common.presentation.client.AddMethodType;                                            </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  31  import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                                       </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  32  import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                                        </span>
<span class="-1492144387614747576" onmouseenter="enter('-1492144387614747576');" onmouseout="out('-1492144387614747576');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  33 +import org.broadleafcommerce.common.service.GenericEntityService;                                                 </span>
<span class="2429458746821399950" onmouseenter="enter('2429458746821399950');" onmouseout="out('2429458746821399950');" style="">  34  import org.broadleafcommerce.common.util.BLCArrayUtils;                                                           </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  35  import org.broadleafcommerce.common.util.BLCMessageUtils;                                                         </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  36  import org.broadleafcommerce.common.web.BroadleafRequestContext;                                                  </span>
<span class="-1418036767363331062" onmouseenter="enter('-1418036767363331062');" onmouseout="out('-1418036767363331062');" style="">  37  import org.broadleafcommerce.common.web.JsonResponse;                                                             </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  38  import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                                       </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  39  import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                                     </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  40  import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                               </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  41  import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                                    </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  42  import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                         </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  43  import org.broadleafcommerce.openadmin.dto.ClassTree;                                                             </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  44  import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                                    </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  45  import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                                      </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  46  import org.broadleafcommerce.openadmin.dto.Entity;                                                                </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  47  import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                         </span>
<span class="6369021917986026789" onmouseenter="enter('6369021917986026789');" onmouseout="out('6369021917986026789');" style="">  48  import org.broadleafcommerce.openadmin.dto.FilterAndSortCriteria;                                                 </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  49  import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                           </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  50  import org.broadleafcommerce.openadmin.dto.Property;                                                              </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  51  import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                          </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  52  import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                           </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="">  53  import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                               </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  54  import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                                   </span>
<span class="2120683388748052627" onmouseenter="enter('2120683388748052627');" onmouseout="out('2120683388748052627');" style="">  55  import org.broadleafcommerce.openadmin.server.security.dao.AdminUserDao;                                          </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  56  import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                                       </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  57  import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                          </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  58  import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                                </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  59  import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                           </span>
<span class="-8603256547657551769" onmouseenter="enter('-8603256547657551769');" onmouseout="out('-8603256547657551769');" style="">  60  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceResponse;                            </span>
<span class="5585583973934060515" onmouseenter="enter('5585583973934060515');" onmouseout="out('5585583973934060515');" style=""><abbr title="  61  import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExtensionManager;">  61  import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExtensionManaðŸ”µ</abbr></span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  62  import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;                  </span>
<span class="9131075895472939574" onmouseenter="enter('9131075895472939574');" onmouseout="out('9131075895472939574');" style="">  63  import org.broadleafcommerce.openadmin.web.controller.AdminAbstractController;                                    </span>
<span class="7254479112554025637" onmouseenter="enter('7254479112554025637');" onmouseout="out('7254479112554025637');" style="">  64  import org.broadleafcommerce.openadmin.web.controller.modal.ModalHeaderType;                                      </span>
<span class="6361429912012715647" onmouseenter="enter('6361429912012715647');" onmouseout="out('6361429912012715647');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  65 +import org.broadleafcommerce.openadmin.web.dao.MultipleCatalogExtensionManager;                                   </span>
<span class="4507704609742395614" onmouseenter="enter('4507704609742395614');" onmouseout="out('4507704609742395614');" style="">  66  import org.broadleafcommerce.openadmin.web.editor.NonNullBooleanEditor;                                           </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  67  import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                                 </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  68  import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                               </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  69  import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                           </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  70  import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                                  </span>
<span class="-3560862041655103076" onmouseenter="enter('-3560862041655103076');" onmouseout="out('-3560862041655103076');" style="">  71  import org.broadleafcommerce.openadmin.web.form.entity.DefaultMainActions;                                        </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  72  import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                                </span>
<span class="-3164920911156953697" onmouseenter="enter('-3164920911156953697');" onmouseout="out('-3164920911156953697');" style="">  73  import org.broadleafcommerce.openadmin.web.form.entity.EntityFormAction;                                          </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  74  import org.broadleafcommerce.openadmin.web.form.entity.Field;                                                     </span>
<span class="-5634654756625156689" onmouseenter="enter('-5634654756625156689');" onmouseout="out('-5634654756625156689');" style="">  75  import org.broadleafcommerce.openadmin.web.form.entity.FieldGroup;                                                </span>
<span class="8763280003660953520" onmouseenter="enter('8763280003660953520');" onmouseout="out('8763280003660953520');" style="">  76  import org.springframework.beans.propertyeditors.StringTrimmerEditor;                                             </span>
<span class="4128309806836178094" onmouseenter="enter('4128309806836178094');" onmouseout="out('4128309806836178094');" style="">  77  import org.springframework.stereotype.Controller;                                                                 </span>
<span class="2230089600625206822" onmouseenter="enter('2230089600625206822');" onmouseout="out('2230089600625206822');" style="">  78  import org.springframework.ui.Model;                                                                              </span>
<span class="-8661390401087732702" onmouseenter="enter('-8661390401087732702');" onmouseout="out('-8661390401087732702');" style="">  79  import org.springframework.util.MultiValueMap;                                                                    </span>
<span class="-5446610002806720528" onmouseenter="enter('-5446610002806720528');" onmouseout="out('-5446610002806720528');" style="">  80  import org.springframework.validation.BindingResult;                                                              </span>
<span class="-5956639343389312225" onmouseenter="enter('-5956639343389312225');" onmouseout="out('-5956639343389312225');" style="">  81  import org.springframework.web.bind.WebDataBinder;                                                                </span>
<span class="6486986322776186621" onmouseenter="enter('6486986322776186621');" onmouseout="out('6486986322776186621');" style="">  82  import org.springframework.web.bind.annotation.InitBinder;                                                        </span>
<span class="2718246165073723950" onmouseenter="enter('2718246165073723950');" onmouseout="out('2718246165073723950');" style="">  83  import org.springframework.web.bind.annotation.ModelAttribute;                                                    </span>
<span class="3963501418927616634" onmouseenter="enter('3963501418927616634');" onmouseout="out('3963501418927616634');" style="">  84  import org.springframework.web.bind.annotation.PathVariable;                                                      </span>
<span class="-7989471178862524182" onmouseenter="enter('-7989471178862524182');" onmouseout="out('-7989471178862524182');" style="">  85  import org.springframework.web.bind.annotation.RequestMapping;                                                    </span>
<span class="4584846860636268493" onmouseenter="enter('4584846860636268493');" onmouseout="out('4584846860636268493');" style="">  86  import org.springframework.web.bind.annotation.RequestMethod;                                                     </span>
<span class="-8913037601281016619" onmouseenter="enter('-8913037601281016619');" onmouseout="out('-8913037601281016619');" style="">  87  import org.springframework.web.bind.annotation.RequestParam;                                                      </span>
<span class="-7662224364501075428" onmouseenter="enter('-7662224364501075428');" onmouseout="out('-7662224364501075428');" style="">  88  import org.springframework.web.bind.annotation.ResponseBody;                                                      </span>
<span class="82864906475118767" onmouseenter="enter('82864906475118767');" onmouseout="out('82864906475118767');" style="">  89  import org.springframework.web.servlet.DispatcherServlet;                                                         </span>
<span class="4665273347041581179" onmouseenter="enter('4665273347041581179');" onmouseout="out('4665273347041581179');" style="">  90  import org.springframework.web.servlet.FlashMap;                                                                  </span>
<span class="4289605998216587359" onmouseenter="enter('4289605998216587359');" onmouseout="out('4289605998216587359');" style="">  91  import org.springframework.web.servlet.mvc.support.RedirectAttributes;                                            </span>
<span class="2383374134797300138" onmouseenter="enter('2383374134797300138');" onmouseout="out('2383374134797300138');" style="">  92  import org.springframework.web.util.UrlPathHelper;                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  93 +                                                                                                                  </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style="">  94  import com.fasterxml.jackson.databind.ObjectMapper;                                                               </span>
<span  style="">  95                                                                                                                    </span>
<span class="5998602906817463685" onmouseenter="enter('5998602906817463685');" onmouseout="out('5998602906817463685');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  96 +import java.io.Serializable;                                                                                      </span>
<span class="8256805395213692609" onmouseenter="enter('8256805395213692609');" onmouseout="out('8256805395213692609');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  97 +import java.io.UnsupportedEncodingException;                                                                      </span>
<span class="600097467176667378" onmouseenter="enter('600097467176667378');" onmouseout="out('600097467176667378');" style="">  98  import java.net.URLDecoder;                                                                                       </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  99  import java.util.ArrayList;                                                                                       </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style=""> 100  import java.util.Arrays;                                                                                          </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style=""> 101  import java.util.HashMap;                                                                                         </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style=""> 102  import java.util.List;                                                                                            </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style=""> 103  import java.util.Map;                                                                                             </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style=""> 104  import java.util.Map.Entry;                                                                                       </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style=""> 105  import java.util.Set;                                                                                             </span>
<span class="5924803009700709999" onmouseenter="enter('5924803009700709999');" onmouseout="out('5924803009700709999');" style=""> 106  import java.util.stream.Stream;                                                                                   </span>
<span  style=""> 107                                                                                                                    </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 108  import javax.annotation.Resource;                                                                                 </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style=""> 109  import javax.servlet.http.HttpServletRequest;                                                                     </span>
<span class="-2247759832438184775" onmouseenter="enter('-2247759832438184775');" onmouseout="out('-2247759832438184775');" style=""> 110  import javax.servlet.http.HttpServletResponse;                                                                    </span>
<span  style=""> 111                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 112  /**                                                                                                               </span>
<span class="4260469300841401635" onmouseenter="enter('4260469300841401635');" onmouseout="out('4260469300841401635');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 113 - * The default implementation of the {@link #BroadleafAdminAbstractEntityController}. This delegates every call to super"> 113 - * The default implementation of the {@link #BroadleafAdminAbstractEntityController}. This delegates every call toðŸ”µ</abbr></span>
<span class="-3899564930283338794" onmouseenter="enter('-3899564930283338794');" onmouseout="out('-3899564930283338794');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 114 - * and does not provide any custom-tailored functionality. It is responsible for rendering the admin for every entity"> 114 - * and does not provide any custom-tailored functionality. It is responsible for rendering the admin for every entðŸ”µ</abbr></span>
<span class="-5698631600182435917" onmouseenter="enter('-5698631600182435917');" onmouseout="out('-5698631600182435917');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 115 - * that is not explicitly customized by its own controller.                                                       </span>
<span class="5624503434864804252" onmouseenter="enter('5624503434864804252');" onmouseout="out('5624503434864804252');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 116 + * The default implementation of the {@link AdminAbstractController}. This delegates every call to                </span>
<span class="-497882971048272294" onmouseenter="enter('-497882971048272294');" onmouseout="out('-497882971048272294');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 117 + * super and does not provide any custom-tailored functionality. It is responsible for rendering the              </span>
<span class="-4790859535261881332" onmouseenter="enter('-4790859535261881332');" onmouseout="out('-4790859535261881332');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 118 + * admin for every entity that is not explicitly customized by its own controller.                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 119   *                                                                                                                </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 120   * @author Andre Azzolini (apazzolini)                                                                            </span>
<span class="-7311139588847938491" onmouseenter="enter('-7311139588847938491');" onmouseout="out('-7311139588847938491');" style=""> 121   * @author Jeff Fischer                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 122   */                                                                                                               </span>
<span class="4155455059275642147" onmouseenter="enter('4155455059275642147');" onmouseout="out('4155455059275642147');" style=""> 123  @Controller(&quot;blAdminBasicEntityController&quot;)                                                                       </span>
<span class="1298802560762502343" onmouseenter="enter('1298802560762502343');" onmouseout="out('1298802560762502343');" style=""> 124  @RequestMapping(&quot;/{sectionKey:.+}&quot;)                                                                               </span>
<span class="8857493697785984988" onmouseenter="enter('8857493697785984988');" onmouseout="out('8857493697785984988');" style=""> 125  public class AdminBasicEntityController extends AdminAbstractController {                                         </span>
<span  style=""> 126                                                                                                                    </span>
<span class="6387945601766467724" onmouseenter="enter('6387945601766467724');" onmouseout="out('6387945601766467724');" style=""> 127      protected static final Log LOG = LogFactory.getLog(AdminBasicEntityController.class);                         </span>
<span  style=""> 128                                                                                                                    </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 129      public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                            </span>
<span class="4075481265342786632" onmouseenter="enter('4075481265342786632');" onmouseout="out('4075481265342786632');" style=""> 130      public static final String CUSTOM_CRITERIA = &quot;criteria&quot;;                                                      </span>
<span class="-5370879055704196240" onmouseenter="enter('-5370879055704196240');" onmouseout="out('-5370879055704196240');" style=""> 131      public static final String IS_SELECTIZE_REQUEST = &quot;isSelectizeRequest&quot;;                                       </span>
<span class="1005517399019449970" onmouseenter="enter('1005517399019449970');" onmouseout="out('1005517399019449970');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 132 +    protected static final String CURRENT_FOLDER_ID = &quot;currentFolderId&quot;;                                          </span>
<span  style=""> 133                                                                                                                    </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style=""> 134      @Resource(name=&quot;blSandBoxHelper&quot;)                                                                             </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style=""> 135      protected SandBoxHelper sandBoxHelper;                                                                        </span>
<span  style=""> 136                                                                                                                    </span>
<span class="-5193304577016957246" onmouseenter="enter('-5193304577016957246');" onmouseout="out('-5193304577016957246');" style=""> 137      @Resource(name = &quot;blAdminUserDao&quot;)                                                                            </span>
<span class="-2542536430165066610" onmouseenter="enter('-2542536430165066610');" onmouseout="out('-2542536430165066610');" style=""> 138      protected AdminUserDao adminUserDao;                                                                          </span>
<span  style=""> 139                                                                                                                    </span>
<span class="1039661802170570045" onmouseenter="enter('1039661802170570045');" onmouseout="out('1039661802170570045');" style=""> 140      @Resource(name=&quot;blDynamicEntityDao&quot;)                                                                          </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style=""> 141      protected DynamicEntityDao dynamicEntityDao;                                                                  </span>
<span  style=""> 142                                                                                                                    </span>
<span class="3323977399618509653" onmouseenter="enter('3323977399618509653');" onmouseout="out('3323977399618509653');" style=""> 143      @Resource(name = &quot;blAdornedTargetAutoPopulateExtensionManager&quot;)                                               </span>
<span class="-4810148452666974339" onmouseenter="enter('-4810148452666974339');" onmouseout="out('-4810148452666974339');" style=""> 144      protected AdornedTargetAutoPopulateExtensionManager adornedTargetAutoPopulateExtensionManager;                </span>
<span  style=""> 145                                                                                                                    </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 146      @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                                 </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 147      protected RowLevelSecurityService rowLevelSecurityService;                                                    </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 148 +                                                                                                                  </span>
<span class="4471392044492296285" onmouseenter="enter('4471392044492296285');" onmouseout="out('4471392044492296285');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 149 +    @Resource(name = &quot;blEntityDuplicator&quot;)                                                                        </span>
<span class="-9194612273021432316" onmouseenter="enter('-9194612273021432316');" onmouseout="out('-9194612273021432316');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 150 +    protected EntityDuplicator duplicator;                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 151 +                                                                                                                  </span>
<span class="2258512980686044159" onmouseenter="enter('2258512980686044159');" onmouseout="out('2258512980686044159');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 152 +    @Resource(name = &quot;blGenericEntityService&quot;)                                                                    </span>
<span class="7024198528514174971" onmouseenter="enter('7024198528514174971');" onmouseout="out('7024198528514174971');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 153 +    protected GenericEntityService genericEntityService;                                                          </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 154 +                                                                                                                  </span>
<span class="1447930800600022993" onmouseenter="enter('1447930800600022993');" onmouseout="out('1447930800600022993');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 155 +    @Resource(name = &quot;blMultipleCatalogExtensionManager&quot;)                                                         </span>
<span class="4452235211304762832" onmouseenter="enter('4452235211304762832');" onmouseout="out('4452235211304762832');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 156 +    protected MultipleCatalogExtensionManager multipleCatalogExtensionManager;                                    </span>
<span  style=""> 157                                                                                                                    </span>






<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 158      // ******************************************                                                                 </span>
<span class="8145904524131922989" onmouseenter="enter('8145904524131922989');" onmouseout="out('8145904524131922989');" style=""> 159      // REQUEST-MAPPING BOUND CONTROLLER METHODS *                                                                 </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 160      // ******************************************                                                                 </span>
<span  style=""> 161                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 162      /**                                                                                                           </span>
<span class="5980196098348408716" onmouseenter="enter('5980196098348408716');" onmouseout="out('5980196098348408716');" style=""><abbr title=" 163       * Renders the main entity listing for the specified class, which is based on the current sectionKey with some optional"> 163       * Renders the main entity listing for the specified class, which is based on the current sectionKey with someðŸ”µ</abbr></span>
<span class="1756838433111210325" onmouseenter="enter('1756838433111210325');" onmouseout="out('1756838433111210325');" style=""> 164       * criteria.                                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 165       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 166       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 167       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 168       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 169       * @param pathVars                                                                                            </span>
<span class="-7836494531350161829" onmouseenter="enter('-7836494531350161829');" onmouseout="out('-7836494531350161829');" style=""> 170       * @param requestParams a Map of property name -&gt; list critiera values                                        </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 171       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 172       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 173       */                                                                                                           </span>
<span class="854227037044969777" onmouseenter="enter('854227037044969777');" onmouseout="out('854227037044969777');" style=""> 174      @RequestMapping(value = &quot;&quot;, method = RequestMethod.GET)                                                       </span>
<span class="5203424842505603172" onmouseenter="enter('5203424842505603172');" onmouseout="out('5203424842505603172');" style=""> 175      public String viewEntityList(HttpServletRequest request, HttpServletResponse response, Model model,           </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 176              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 177              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                         </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 178          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 179          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 180          List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                                        </span>
<span class="1452589137399878084" onmouseenter="enter('1452589137399878084');" onmouseout="out('1452589137399878084');" style=""><abbr title=" 181          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars);"> 181          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 182          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 183          DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                                    </span>
<span  style=""> 184                                                                                                                    </span>
<span class="-9123024135554384147" onmouseenter="enter('-9123024135554384147');" onmouseout="out('-9123024135554384147');" style=""> 185          ListGrid listGrid = formService.buildMainListGrid(drs, cmd, sectionKey, crumbs);                          </span>
<span class="-7197013270379460942" onmouseenter="enter('-7197013270379460942');" onmouseout="out('-7197013270379460942');" style=""> 186          listGrid.setSelectType(ListGrid.SelectType.NONE);                                                         </span>
<span  style=""> 187                                                                                                                    </span>
<span class="6707774114103003478" onmouseenter="enter('6707774114103003478');" onmouseout="out('6707774114103003478');" style=""> 188          Set&lt;Field&gt; headerFields = listGrid.getHeaderFields();                                                     </span>
<span class="6157449347608657417" onmouseenter="enter('6157449347608657417');" onmouseout="out('6157449347608657417');" style=""> 189          if (CollectionUtils.isNotEmpty(headerFields)) {                                                           </span>
<span class="7359980094802675712" onmouseenter="enter('7359980094802675712');" onmouseout="out('7359980094802675712');" style=""> 190              Field firstField = headerFields.iterator().next();                                                    </span>
<span class="-7992921859474727563" onmouseenter="enter('-7992921859474727563');" onmouseout="out('-7992921859474727563');" style=""> 191              if (requestParams.containsKey(firstField.getName())) {                                                </span>
<span class="-4847870846432586371" onmouseenter="enter('-4847870846432586371');" onmouseout="out('-4847870846432586371');" style=""> 192                  model.addAttribute(&quot;mainSearchTerm&quot;, requestParams.get(firstField.getName()).get(0));             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 194          }                                                                                                         </span>
<span  style=""> 195                                                                                                                    </span>
<span class="3294377821001327596" onmouseenter="enter('3294377821001327596');" onmouseout="out('3294377821001327596');" style=""> 196          model.addAttribute(&quot;viewType&quot;, &quot;entityList&quot;);                                                             </span>
<span  style=""> 197                                                                                                                    </span>
<span class="5223794068523842694" onmouseenter="enter('5223794068523842694');" onmouseout="out('5223794068523842694');" style=""> 198          setupViewEntityListBasicModel(request, cmd, sectionKey, sectionClassName, model, requestParams);          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style=""> 199          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span  style=""> 200                                                                                                                    </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 201 -        return &quot;modules/defaultContainer&quot;;                                                                        </span>
<span class="-4487883013655706388" onmouseenter="enter('-4487883013655706388');" onmouseout="out('-4487883013655706388');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 202 +        return DEFAULT_CONTAINER_VIEW;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203      }                                                                                                             </span>
<span  style=""> 204                                                                                                                    </span>
<span class="5512240627727429054" onmouseenter="enter('5512240627727429054');" onmouseout="out('5512240627727429054');" style=""> 205      protected void setupViewEntityListBasicModel(HttpServletRequest request, ClassMetadata cmd, String sectionKey,</span>
<span class="522743254766371502" onmouseenter="enter('522743254766371502');" onmouseout="out('522743254766371502');" style=""> 206              String sectionClassName, Model model, MultiValueMap&lt;String, String&gt; requestParams) {                  </span>
<span class="5787313217223527782" onmouseenter="enter('5787313217223527782');" onmouseout="out('5787313217223527782');" style=""> 207          List&lt;EntityFormAction&gt; mainActions = new ArrayList&lt;&gt;();                                                   </span>
<span class="-6495333239259317464" onmouseenter="enter('-6495333239259317464');" onmouseout="out('-6495333239259317464');" style=""> 208          addAddActionIfAllowed(sectionClassName, cmd, mainActions);                                                </span>
<span class="-5948121019403308590" onmouseenter="enter('-5948121019403308590');" onmouseout="out('-5948121019403308590');" style=""> 209          extensionManager.getProxy().addAdditionalMainActions(sectionClassName, mainActions);                      </span>
<span class="-381816252130957573" onmouseenter="enter('-381816252130957573');" onmouseout="out('-381816252130957573');" style=""> 210          extensionManager.getProxy().modifyMainActions(cmd, mainActions);                                          </span>
<span  style=""> 211                                                                                                                    </span>
<span class="-5498329164774951339" onmouseenter="enter('-5498329164774951339');" onmouseout="out('-5498329164774951339');" style=""> 212          // If this came from a delete save, we&#x27;ll have a headerFlash request parameter to take care of            </span>
<span class="6915846846822456322" onmouseenter="enter('6915846846822456322');" onmouseout="out('6915846846822456322');" style=""> 213          if (requestParams.containsKey(&quot;headerFlash&quot;)) {                                                           </span>
<span class="-7374079465520861767" onmouseenter="enter('-7374079465520861767');" onmouseout="out('-7374079465520861767');" style=""> 214              model.addAttribute(&quot;headerFlash&quot;, requestParams.get(&quot;headerFlash&quot;).get(0));                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215          }                                                                                                         </span>
<span  style=""> 216                                                                                                                    </span>
<span class="-5632901614715850082" onmouseenter="enter('-5632901614715850082');" onmouseout="out('-5632901614715850082');" style=""> 217          List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());                            </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style=""> 218          String requestUri = request.getRequestURI();                                                              </span>
<span class="2670437920401576748" onmouseenter="enter('2670437920401576748');" onmouseout="out('2670437920401576748');" style=""> 219          if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) {           </span>
<span class="-901741071381030126" onmouseenter="enter('-901741071381030126');" onmouseout="out('-901741071381030126');" style=""> 220              requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length());        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 221          }                                                                                                         </span>
<span  style=""> 222                                                                                                                    </span>
<span class="-3335875933652663591" onmouseenter="enter('-3335875933652663591');" onmouseout="out('-3335875933652663591');" style=""> 223          model.addAttribute(&quot;isFilter&quot;, (requestParams.size() &gt; 0));                                               </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style=""> 224          model.addAttribute(&quot;currentUri&quot;, requestUri);                                                             </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style=""> 225          model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                                           </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 226          model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 227          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="-4219022137146036385" onmouseenter="enter('-4219022137146036385');" onmouseout="out('-4219022137146036385');" style=""> 228          model.addAttribute(&quot;mainActions&quot;, mainActions);                                                           </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 229          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-7167932239083034641" onmouseenter="enter('-7167932239083034641');" onmouseout="out('-7167932239083034641');" style=""> 230          setTypedEntityModelAttributes(request, model);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231      }                                                                                                             </span>
<span  style=""> 232                                                                                                                    </span>
<span class="-3612928683982517341" onmouseenter="enter('-3612928683982517341');" onmouseout="out('-3612928683982517341');" style=""> 233      @RequestMapping(value = &quot;/selectize&quot;, method = RequestMethod.GET)                                             </span>
<span class="-2536734120775641057" onmouseenter="enter('-2536734120775641057');" onmouseout="out('-2536734120775641057');" style=""> 234      public @ResponseBody Map&lt;String, Object&gt; viewEntityListSelectize(HttpServletRequest request,                  </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style=""> 235               HttpServletResponse response, Model model,                                                           </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 236               @PathVariable Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 237               @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                        </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 238          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 239          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 240          List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                                        </span>
<span class="3971039348455381302" onmouseenter="enter('3971039348455381302');" onmouseout="out('3971039348455381302');" style=""><abbr title=" 241          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars)"> 241          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbðŸ”µ</abbr></span>
<span class="-5204717557696417186" onmouseenter="enter('-5204717557696417186');" onmouseout="out('-5204717557696417186');" style=""> 242                  .withCustomCriteria(getCustomCriteria(requestParams));                                            </span>
<span  style=""> 243                                                                                                                    </span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style=""> 244          ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                                    </span>
<span  style=""> 245                                                                                                                    </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 246          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 247          DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                                    </span>
<span  style=""> 248                                                                                                                    </span>
<span class="-6840686923261380416" onmouseenter="enter('-6840686923261380416');" onmouseout="out('-6840686923261380416');" style=""> 249          return formService.constructSelectizeOptionMap(drs, cmd);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250      }                                                                                                             </span>
<span  style=""> 251                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 252      /**                                                                                                           </span>
<span class="6015587852497052057" onmouseenter="enter('6015587852497052057');" onmouseout="out('6015587852497052057');" style=""> 253       * Obtains the requested criteria parameter                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 254       *                                                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 255       * @param requestParams                                                                                       </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 256       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 257       */                                                                                                           </span>
<span class="-5224065764328446223" onmouseenter="enter('-5224065764328446223');" onmouseout="out('-5224065764328446223');" style=""> 258      protected String[] getCustomCriteria(Map&lt;String, List&lt;String&gt;&gt; requestParams) {                               </span>
<span class="8308653628584061101" onmouseenter="enter('8308653628584061101');" onmouseout="out('8308653628584061101');" style=""> 259          if (requestParams == null || requestParams.isEmpty()) {                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 260              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261          }                                                                                                         </span>
<span  style=""> 262                                                                                                                    </span>
<span class="-6200156504676301578" onmouseenter="enter('-6200156504676301578');" onmouseout="out('-6200156504676301578');" style=""> 263          List&lt;String&gt; criteria = requestParams.get(CUSTOM_CRITERIA);                                               </span>
<span class="3479198517250864619" onmouseenter="enter('3479198517250864619');" onmouseout="out('3479198517250864619');" style=""> 264          String response = CollectionUtils.isEmpty(criteria) ? null : criteria.get(0);                             </span>
<span class="3591199473111095603" onmouseenter="enter('3591199473111095603');" onmouseout="out('3591199473111095603');" style=""> 265          return new String[] {response};                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266      }                                                                                                             </span>
<span  style=""> 267                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 268      /**                                                                                                           </span>
<span class="53051913897087216" onmouseenter="enter('53051913897087216');" onmouseout="out('53051913897087216');" style=""> 269       * Adds the &quot;Add&quot; button to the main entity form if the current user has permissions to create new instances  </span>
<span class="-2041834868205006384" onmouseenter="enter('-2041834868205006384');" onmouseout="out('-2041834868205006384');" style=""> 270       * of the entity and all of the fields in the entity aren&#x27;t marked as read only.                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 271       *                                                                                                            </span>
<span class="2579837316240354786" onmouseenter="enter('2579837316240354786');" onmouseout="out('2579837316240354786');" style=""> 272       * @param sectionClassName                                                                                    </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style=""> 273       * @param cmd                                                                                                 </span>
<span class="-70241175981651056" onmouseenter="enter('-70241175981651056');" onmouseout="out('-70241175981651056');" style=""> 274       * @param mainActions                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 275       */                                                                                                           </span>
<span class="-3535265632615590771" onmouseenter="enter('-3535265632615590771');" onmouseout="out('-3535265632615590771');" style=""><abbr title=" 276      protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormAction&gt; mainActions) {"> 276      protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormAction&gt; mainAcðŸ”µ</abbr></span>
<span class="-1675673801723949520" onmouseenter="enter('-1675673801723949520');" onmouseout="out('-1675673801723949520');" style=""> 277          if (isAddActionAllowed(sectionClassName, cmd)) {                                                          </span>
<span class="-161553798203722975" onmouseenter="enter('-161553798203722975');" onmouseout="out('-161553798203722975');" style=""> 278              mainActions.add(DefaultMainActions.ADD);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280      }                                                                                                             </span>
<span  style=""> 281                                                                                                                    </span>
<span class="6251273327061769060" onmouseenter="enter('6251273327061769060');" onmouseout="out('6251273327061769060');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 282 -    protected boolean isAddActionAllowed(String sectionClassName, ClassMetadata cmd) {                            </span>
<span class="4125299149074369729" onmouseenter="enter('4125299149074369729');" onmouseout="out('4125299149074369729');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 283 +    protected boolean isAddActionAllowed(final String sectionClassName, final ClassMetadata cmd) {                </span>
<span class="2379281051849826609" onmouseenter="enter('2379281051849826609');" onmouseout="out('2379281051849826609');" style=""> 284          // If the user does not have create permissions, we will not add the &quot;Add New&quot; button                     </span>
<span class="4837425918106440333" onmouseenter="enter('4837425918106440333');" onmouseout="out('4837425918106440333');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 285 -        boolean canCreate = true;                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 286          try {                                                                                                     </span>
<span class="-2050050318794737036" onmouseenter="enter('-2050050318794737036');" onmouseout="out('-2050050318794737036');" style=""> 287              adminRemoteSecurityService.securityCheck(sectionClassName, EntityOperationType.ADD);                  </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style=""> 288          } catch (ServiceException e) {                                                                            </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style=""> 289              if (e instanceof SecurityServiceException) {                                                          </span>
<span class="-5562308883634048055" onmouseenter="enter('-5562308883634048055');" onmouseout="out('-5562308883634048055');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 290 -                canCreate = false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 291 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 292 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 293 -                                                                                                                  </span>
<span class="-3452128956938556370" onmouseenter="enter('-3452128956938556370');" onmouseout="out('-3452128956938556370');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 294 -        if (canCreate) {                                                                                          </span>
<span class="-4263024171062822587" onmouseenter="enter('-4263024171062822587');" onmouseout="out('-4263024171062822587');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 295 -            checkReadOnly: {                                                                                      </span>
<span class="-5650645308789885306" onmouseenter="enter('-5650645308789885306');" onmouseout="out('-5650645308789885306');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 296 -                //check if all the metadata is read only                                                          </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 297 -                for (Property property : cmd.getProperties()) {                                                   </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 298 -                    if (property.getMetadata() instanceof BasicFieldMetadata) {                                   </span>
<span class="-4740706861929444273" onmouseenter="enter('-4740706861929444273');" onmouseout="out('-4740706861929444273');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 299 -                        if (((BasicFieldMetadata) property.getMetadata()).getReadOnly() == null ||                </span>
<span class="7731016670197656615" onmouseenter="enter('7731016670197656615');" onmouseout="out('7731016670197656615');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 300 -                                !((BasicFieldMetadata) property.getMetadata()).getReadOnly()) {                   </span>
<span class="7135533341781534816" onmouseenter="enter('7135533341781534816');" onmouseout="out('7135533341781534816');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 301 -                            break checkReadOnly;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 302 -                        }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 303 -                    }                                                                                             </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 304 +                return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 305 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 306 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 307 +                                                                                                                  </span>
<span class="-3272601440754635767" onmouseenter="enter('-3272601440754635767');" onmouseout="out('-3272601440754635767');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 308 +        final boolean canAdd = rowLevelSecurityService                                                            </span>
<span class="-1653290766274377775" onmouseenter="enter('-1653290766274377775');" onmouseout="out('-1653290766274377775');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 309 +                .canAdd(adminRemoteSecurityService.getPersistentAdminUser(), sectionClassName, cmd);              </span>
<span class="5125272502277129387" onmouseenter="enter('5125272502277129387');" onmouseout="out('5125272502277129387');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 310 +        return isNotReadOnly(cmd) &amp;&amp; canAdd;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 311 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 312 +                                                                                                                  </span>
<span class="-7397004815762425407" onmouseenter="enter('-7397004815762425407');" onmouseout="out('-7397004815762425407');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 313 +    protected boolean isNotReadOnly(final ClassMetadata cmd) {                                                    </span>
<span class="-5650645308789885306" onmouseenter="enter('-5650645308789885306');" onmouseout="out('-5650645308789885306');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 314 +        //check if all the metadata is read only                                                                  </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 315 +        for (Property property : cmd.getProperties()) {                                                           </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 316 +            if (property.getMetadata() instanceof BasicFieldMetadata) {                                           </span>
<span class="-4740706861929444273" onmouseenter="enter('-4740706861929444273');" onmouseout="out('-4740706861929444273');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 317 +                if (((BasicFieldMetadata) property.getMetadata()).getReadOnly() == null ||                        </span>
<span class="7731016670197656615" onmouseenter="enter('7731016670197656615');" onmouseout="out('7731016670197656615');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 318 +                        !((BasicFieldMetadata) property.getMetadata()).getReadOnly()) {                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 319 +                    return true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320                  }                                                                                                 </span>
<span class="-5562308883634048055" onmouseenter="enter('-5562308883634048055');" onmouseout="out('-5562308883634048055');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 321 -                canCreate = false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 322 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 323 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 324 -                                                                                                                  </span>
<span class="-3452128956938556370" onmouseenter="enter('-3452128956938556370');" onmouseout="out('-3452128956938556370');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 325 -        if (canCreate) {                                                                                          </span>
<span class="-5729139490324794214" onmouseenter="enter('-5729139490324794214');" onmouseout="out('-5729139490324794214');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 326 -            canCreate = rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(), sectionClassName, cmd);"> 326 -            canCreate = rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(), sectioðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 327 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 328 -                                                                                                                  </span>
<span class="2674140840454218035" onmouseenter="enter('2674140840454218035');" onmouseout="out('2674140840454218035');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 329 -        return canCreate;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 330 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 331 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 332 +                                                                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 333 +        return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334      }                                                                                                             </span>
<span  style=""> 335                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 336      /**                                                                                                           </span>
<span class="-403478592182410175" onmouseenter="enter('-403478592182410175');" onmouseout="out('-403478592182410175');" style=""> 337       * Renders the modal form that is used to add a new parent level entity. Note that this form cannot render any</span>
<span class="-2684076904077363908" onmouseenter="enter('-2684076904077363908');" onmouseout="out('-2684076904077363908');" style=""><abbr title=" 338       * subcollections as operations on those collections require the parent level entity to first be saved and have"> 338       * subcollections as operations on those collections require the parent level entity to first be saved and havðŸ”µ</abbr></span>
<span class="-2496660529180512497" onmouseenter="enter('-2496660529180512497');" onmouseout="out('-2496660529180512497');" style=""><abbr title=" 339       * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity screen where"> 339       * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity screen whðŸ”µ</abbr></span>
<span class="-5672334976076130102" onmouseenter="enter('-5672334976076130102');" onmouseout="out('-5672334976076130102');" style=""> 340       * they can then perform operations on sub collections.                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 341       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 342       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 343       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 344       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 345       * @param pathVars                                                                                            </span>
<span class="-7339043177630483847" onmouseenter="enter('-7339043177630483847');" onmouseout="out('-7339043177630483847');" style=""> 346       * @param entityType                                                                                          </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 347       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 348       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 349       */                                                                                                           </span>
<span class="-6494270766546423105" onmouseenter="enter('-6494270766546423105');" onmouseout="out('-6494270766546423105');" style=""> 350      @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.GET)                                                   </span>
<span class="8522113168804045570" onmouseenter="enter('8522113168804045570');" onmouseout="out('8522113168804045570');" style=""> 351      public String viewAddEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,        </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 352              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="-1715631339976075770" onmouseenter="enter('-1715631339976075770');" onmouseout="out('-1715631339976075770');" style=""> 353              @RequestParam(defaultValue = &quot;&quot;) String entityType) throws Exception {                                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 354          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 355          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 356          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                                 </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 357          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 357          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVðŸ”µ</abbr></span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style=""> 358          ppr.setAddOperationInspect(true);                                                                         </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 359          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span  style=""> 360                                                                                                                    </span>
<span class="4862894803792873117" onmouseenter="enter('4862894803792873117');" onmouseout="out('4862894803792873117');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 361 -        // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types for this entity."> 361 -        // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types for thiðŸ”µ</abbr></span>
<span class="2600422776092116832" onmouseenter="enter('2600422776092116832');" onmouseout="out('2600422776092116832');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 362 +        entityType = determineEntityType(entityType, cmd);                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 363 +                                                                                                                  </span>
<span class="4098005746663533241" onmouseenter="enter('4098005746663533241');" onmouseout="out('4098005746663533241');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 364 +        EntityForm entityForm = formService.createEntityForm(cmd, sectionCrumbs);                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 365 +                                                                                                                  </span>
<span class="5826594571687596812" onmouseenter="enter('5826594571687596812');" onmouseout="out('5826594571687596812');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 366 +        // We need to make sure that the ceiling entity is set to the interface and the specific entity type      </span>
<span class="37161952125740808" onmouseenter="enter('37161952125740808');" onmouseout="out('37161952125740808');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 367 +        // is set to the type we&#x27;re going to be creating.                                                         </span>
<span class="5062735442039535924" onmouseenter="enter('5062735442039535924');" onmouseout="out('5062735442039535924');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 368 +        entityForm.setCeilingEntityClassname(cmd.getCeilingType());                                               </span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 369 +        entityForm.setEntityType(entityType);                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 370 +                                                                                                                  </span>
<span class="-5227856854691424770" onmouseenter="enter('-5227856854691424770');" onmouseout="out('-5227856854691424770');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 371 +        // When we initially build the class metadata (and thus, the entity form), we had all of the possible     </span>
<span class="5105619661852614163" onmouseenter="enter('5105619661852614163');" onmouseout="out('5105619661852614163');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 372 +        // polymorphic fields built out. Now that we have a concrete entity type to render, we can remove the     </span>
<span class="-3843175043245177501" onmouseenter="enter('-3843175043245177501');" onmouseout="out('-3843175043245177501');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 373 +        // fields that are not applicable for this given entity type.                                             </span>
<span class="-2935519954456371455" onmouseenter="enter('-2935519954456371455');" onmouseout="out('-2935519954456371455');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 374 +        formService.removeNonApplicableFields(cmd, entityForm, entityType);                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 375 +                                                                                                                  </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 376 +        modifyAddEntityForm(entityForm, pathVars);                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 377 +                                                                                                                  </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 378 +        model.addAttribute(&quot;entityForm&quot;, entityForm);                                                             </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 379 +        model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 380 +                                                                                                                  </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 381 +        model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 382 +        model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 383 +        model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                              </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 384 +        setModelAttributes(model, sectionKey);                                                                    </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 385 +        return MODAL_CONTAINER_VIEW;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 386 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 387 +                                                                                                                  </span>
<span class="6822582914767657426" onmouseenter="enter('6822582914767657426');" onmouseout="out('6822582914767657426');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 388 +    // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic                  </span>
<span class="6925903770450869702" onmouseenter="enter('6925903770450869702');" onmouseout="out('6925903770450869702');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 389 +    // types for this entity.                                                                                     </span>
<span class="3096473113628081949" onmouseenter="enter('3096473113628081949');" onmouseout="out('3096473113628081949');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 390 +    protected String determineEntityType(String entityType, final ClassMetadata cmd)                              </span>
<span class="363372168864539985" onmouseenter="enter('363372168864539985');" onmouseout="out('363372168864539985');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 391 +            throws UnsupportedEncodingException {                                                                 </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 392          if (StringUtils.isBlank(entityType)) {                                                                    </span>
<span class="2333848870190395940" onmouseenter="enter('2333848870190395940');" onmouseout="out('2333848870190395940');" style=""> 393              if (cmd.getPolymorphicEntities().getChildren().length == 0) {                                         </span>
<span class="2097783908693957449" onmouseenter="enter('2097783908693957449');" onmouseout="out('2097783908693957449');" style=""> 394                  entityType = cmd.getPolymorphicEntities().getFullyQualifiedClassname();                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 395              } else {                                                                                              </span>
<span class="-6902702564943152777" onmouseenter="enter('-6902702564943152777');" onmouseout="out('-6902702564943152777');" style=""> 396                  entityType = getDefaultEntityType();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 397              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 398          } else {                                                                                                  </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style=""> 399              entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400          }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 401 -                                                                                                                  </span>
<span class="4098005746663533241" onmouseenter="enter('4098005746663533241');" onmouseout="out('4098005746663533241');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 402 -        EntityForm entityForm = formService.createEntityForm(cmd, sectionCrumbs);                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 403 -                                                                                                                  </span>
<span class="5826594571687596812" onmouseenter="enter('5826594571687596812');" onmouseout="out('5826594571687596812');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 404 -        // We need to make sure that the ceiling entity is set to the interface and the specific entity type      </span>
<span class="37161952125740808" onmouseenter="enter('37161952125740808');" onmouseout="out('37161952125740808');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 405 -        // is set to the type we&#x27;re going to be creating.                                                         </span>
<span class="5062735442039535924" onmouseenter="enter('5062735442039535924');" onmouseout="out('5062735442039535924');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 406 -        entityForm.setCeilingEntityClassname(cmd.getCeilingType());                                               </span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 407 -        entityForm.setEntityType(entityType);                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 408 -                                                                                                                  </span>
<span class="-5227856854691424770" onmouseenter="enter('-5227856854691424770');" onmouseout="out('-5227856854691424770');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 409 -        // When we initially build the class metadata (and thus, the entity form), we had all of the possible     </span>
<span class="5105619661852614163" onmouseenter="enter('5105619661852614163');" onmouseout="out('5105619661852614163');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 410 -        // polymorphic fields built out. Now that we have a concrete entity type to render, we can remove the     </span>
<span class="-3843175043245177501" onmouseenter="enter('-3843175043245177501');" onmouseout="out('-3843175043245177501');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 411 -        // fields that are not applicable for this given entity type.                                             </span>
<span class="-2935519954456371455" onmouseenter="enter('-2935519954456371455');" onmouseout="out('-2935519954456371455');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 412 -        formService.removeNonApplicableFields(cmd, entityForm, entityType);                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 413 -                                                                                                                  </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 414 -        modifyAddEntityForm(entityForm, pathVars);                                                                </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 415 -                                                                                                                  </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 416 -        model.addAttribute(&quot;entityForm&quot;, entityForm);                                                             </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 417 -        model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                                        </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 418 -                                                                                                                  </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 419 -        model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 420 -        model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 421 -        model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                              </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 422 -        setModelAttributes(model, sectionKey);                                                                    </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 423 -        return &quot;modules/modalContainer&quot;;                                                                          </span>
<span class="2597693607778452486" onmouseenter="enter('2597693607778452486');" onmouseout="out('2597693607778452486');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 424 +        return entityType;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425      }                                                                                                             </span>
<span  style=""> 426                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 427      /**                                                                                                           </span>
<span class="-2292124409166412817" onmouseenter="enter('-2292124409166412817');" onmouseout="out('-2292124409166412817');" style=""> 428       * Processes the request to add a new entity. If successful, returns a redirect to the newly created entity.  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 429       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 430       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 431       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 432       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 433       * @param pathVars                                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 434       * @param entityForm                                                                                          </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 435       * @param result                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 436       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 437       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 438       */                                                                                                           </span>
<span class="-1840738840686664300" onmouseenter="enter('-1840738840686664300');" onmouseout="out('-1840738840686664300');" style=""> 439      @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.POST)                                                  </span>
<span class="8551380442207718095" onmouseenter="enter('8551380442207718095');" onmouseout="out('8551380442207718095');" style=""> 440      public String addEntity(HttpServletRequest request, HttpServletResponse response, Model model,                </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 441              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""> 442              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 443          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 444          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 445          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                                 </span>
<span class="2596618104185041854" onmouseenter="enter('2596618104185041854');" onmouseout="out('2596618104185041854');" style=""><abbr title=" 446          ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 446          ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassName, sectionðŸ”µ</abbr></span>
<span  style=""> 447                                                                                                                    </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 448          extractDynamicFormFields(cmd, entityForm);                                                                </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 449          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 449          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCuðŸ”µ</abbr></span>
<span class="-4281879219750019053" onmouseenter="enter('-4281879219750019053');" onmouseout="out('-4281879219750019053');" style=""> 450          Entity entity = service.addEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();                </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 451          entityFormValidator.validate(entityForm, entity, result);                                                 </span>
<span  style=""> 452                                                                                                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 453          if (result.hasErrors()) {                                                                                 </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 454              entityForm.clearFieldsMap();                                                                          </span>
<span class="-312181662169537666" onmouseenter="enter('-312181662169537666');" onmouseout="out('-312181662169537666');" style=""> 455              formService.populateEntityForm(cmd, entity, entityForm, sectionCrumbs);                               </span>
<span  style=""> 456                                                                                                                    </span>
<span class="254171966199148419" onmouseenter="enter('254171966199148419');" onmouseout="out('254171966199148419');" style=""> 457              formService.removeNonApplicableFields(cmd, entityForm, entityForm.getEntityType());                   </span>
<span  style=""> 458                                                                                                                    </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 459              modifyAddEntityForm(entityForm, pathVars);                                                            </span>
<span  style=""> 460                                                                                                                    </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 461              model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 462              model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                 </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 463              model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                          </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 464              model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());             </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 465              setModelAttributes(model, sectionKey);                                                                </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 466 -            return &quot;modules/modalContainer&quot;;                                                                      </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 467 +            return MODAL_CONTAINER_VIEW;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 468          }                                                                                                         </span>
<span  style=""> 469                                                                                                                    </span>
<span class="7931002159447649906" onmouseenter="enter('7931002159447649906');" onmouseout="out('7931002159447649906');" style=""> 470          // Note that AJAX Redirects need the context path prepended to them                                       </span>
<span class="-9104189425594863479" onmouseenter="enter('-9104189425594863479');" onmouseout="out('-9104189425594863479');" style=""><abbr title=" 471          return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).getValue();"> 471          return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).getValue(ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 472 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 473 +                                                                                                                  </span>
<span class="1290933159858539781" onmouseenter="enter('1290933159858539781');" onmouseout="out('1290933159858539781');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 474 +    @RequestMapping(value = &quot;/{id}/duplicate&quot;, method = RequestMethod.POST)                                       </span>
<span class="-7829728733805273999" onmouseenter="enter('-7829728733805273999');" onmouseout="out('-7829728733805273999');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 475 +    public String duplicateEntity(final HttpServletRequest request,                                               </span>
<span class="277417182565607361" onmouseenter="enter('277417182565607361');" onmouseout="out('277417182565607361');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 476 +            final HttpServletResponse response,                                                                   </span>
<span class="7665770463560391322" onmouseenter="enter('7665770463560391322');" onmouseout="out('7665770463560391322');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 477 +            final Model model,                                                                                    </span>
<span class="5144416334471976319" onmouseenter="enter('5144416334471976319');" onmouseout="out('5144416334471976319');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 478 +            @PathVariable final Map&lt;String, String&gt; pathVars,                                                     </span>
<span class="5884230296910152604" onmouseenter="enter('5884230296910152604');" onmouseout="out('5884230296910152604');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 479 +            @PathVariable(value = &quot;id&quot;) final String id,                                                          </span>
<span class="5134952934925976911" onmouseenter="enter('5134952934925976911');" onmouseout="out('5134952934925976911');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 480 +            @ModelAttribute(value = &quot;entityForm&quot;) final EntityForm entityForm,                                    </span>
<span class="3593210188792847894" onmouseenter="enter('3593210188792847894');" onmouseout="out('3593210188792847894');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 481 +            final BindingResult result) throws Exception {                                                        </span>
<span class="5473402149144087547" onmouseenter="enter('5473402149144087547');" onmouseout="out('5473402149144087547');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 482 +        final String sectionKey = getSectionKey(pathVars);                                                        </span>
<span class="5437662011929987553" onmouseenter="enter('5437662011929987553');" onmouseout="out('5437662011929987553');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 483 +        final String sectionClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="8553976943183535096" onmouseenter="enter('8553976943183535096');" onmouseout="out('8553976943183535096');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 484 +        final Class&lt;?&gt; entityClass = dynamicEntityDao.getImplClass(sectionClassName);                             </span>
<span class="3365797270076600425" onmouseenter="enter('3365797270076600425');" onmouseout="out('3365797270076600425');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 485 +        final long identifier = Long.parseLong(id);                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 486 +                                                                                                                  </span>
<span class="-138107922525045121" onmouseenter="enter('-138107922525045121');" onmouseout="out('-138107922525045121');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 487 +        if (duplicator.validate(entityClass, identifier)) {                                                       </span>
<span class="5493542447860389431" onmouseenter="enter('5493542447860389431');" onmouseout="out('5493542447860389431');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 488 +            final Object duplicate;                                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 489 +                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 490 +            try {                                                                                                 </span>
<span class="-2283233085854885260" onmouseenter="enter('-2283233085854885260');" onmouseout="out('-2283233085854885260');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 491 +                duplicate = duplicator.copy(entityClass, identifier);                                             </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 492 +            } catch (Exception e) {                                                                               </span>
<span class="-8850460393574909327" onmouseenter="enter('-8850460393574909327');" onmouseout="out('-8850460393574909327');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 493 +                LOG.error(&quot;Could not duplicate entity&quot;, e);                                                       </span>
<span class="-7503880796159563304" onmouseenter="enter('-7503880796159563304');" onmouseout="out('-7503880796159563304');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 494 +                return getErrorDuplicatingResponse(response, &quot;Duplication_Failure&quot;);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 495 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 496 +                                                                                                                  </span>
<span class="9202899875978069713" onmouseenter="enter('9202899875978069713');" onmouseout="out('9202899875978069713');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 497 +            final Serializable dupId = genericEntityService.getIdentifier(duplicate);                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 498 +                                                                                                                  </span>
<span class="7931002159447649906" onmouseenter="enter('7931002159447649906');" onmouseout="out('7931002159447649906');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 499 +            // Note that AJAX Redirects need the context path prepended to them                                   </span>
<span class="6804960621276438337" onmouseenter="enter('6804960621276438337');" onmouseout="out('6804960621276438337');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 500 +            return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + dupId;                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 501 +        } else {                                                                                                  </span>
<span class="-110948502599545681" onmouseenter="enter('-110948502599545681');" onmouseout="out('-110948502599545681');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 502 +            return getErrorDuplicatingResponse(response, &quot;Validation_Failure&quot;);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 503 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 504 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 505 +                                                                                                                  </span>
<span class="-106656131545478097" onmouseenter="enter('-106656131545478097');" onmouseout="out('-106656131545478097');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 506 +    protected String getErrorDuplicatingResponse(HttpServletResponse response, String code) {                     </span>
<span class="7659712838923572459" onmouseenter="enter('7659712838923572459');" onmouseout="out('7659712838923572459');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 507 +        List&lt;Map&lt;String, Object&gt;&gt; errors = new ArrayList&lt;&gt;();                                                     </span>
<span class="-6240695079450735253" onmouseenter="enter('-6240695079450735253');" onmouseout="out('-6240695079450735253');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 508 +        String message;                                                                                           </span>
<span class="-7826420477706002406" onmouseenter="enter('-7826420477706002406');" onmouseout="out('-7826420477706002406');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 509 +        BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();                   </span>
<span class="-2727648393614728" onmouseenter="enter('-2727648393614728');" onmouseout="out('-2727648393614728');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 510 +        if (context != null &amp;&amp; context.getMessageSource() != null) {                                              </span>
<span class="-5978418614812499702" onmouseenter="enter('-5978418614812499702');" onmouseout="out('-5978418614812499702');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 511 +            message = context.getMessageSource()                                                                  </span>
<span class="1624598595284946587" onmouseenter="enter('1624598595284946587');" onmouseout="out('1624598595284946587');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 512 +                    .getMessage(code, null, code, context.getJavaLocale());                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 513 +        } else {                                                                                                  </span>
<span class="-9004243737964586892" onmouseenter="enter('-9004243737964586892');" onmouseout="out('-9004243737964586892');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 514 +            LOG.warn(                                                                                             </span>
<span class="6269614064328325287" onmouseenter="enter('6269614064328325287');" onmouseout="out('6269614064328325287');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 515 +                    &quot;Could not find the MessageSource on the current request, &quot;                                   </span>
<span class="-8208830135626721740" onmouseenter="enter('-8208830135626721740');" onmouseout="out('-8208830135626721740');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 516 +                            + &quot;not translating the message key&quot;);                                                 </span>
<span class="599114272120646428" onmouseenter="enter('599114272120646428');" onmouseout="out('599114272120646428');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 517 +            message = &quot;Duplication_Failure&quot;;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 518 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 519 +                                                                                                                  </span>
<span class="-4703377271641004207" onmouseenter="enter('-4703377271641004207');" onmouseout="out('-4703377271641004207');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 520 +        Map&lt;String, Object&gt; errorMap = new HashMap&lt;&gt;();                                                           </span>
<span class="2851590661979449603" onmouseenter="enter('2851590661979449603');" onmouseout="out('2851590661979449603');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 521 +        errorMap.put(&quot;errorType&quot;, &quot;global&quot;);                                                                      </span>
<span class="4738760182182965590" onmouseenter="enter('4738760182182965590');" onmouseout="out('4738760182182965590');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 522 +        errorMap.put(&quot;code&quot;, code);                                                                               </span>
<span class="7426718838785534996" onmouseenter="enter('7426718838785534996');" onmouseout="out('7426718838785534996');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 523 +        errorMap.put(&quot;message&quot;, message);                                                                         </span>
<span class="-4906289066975989946" onmouseenter="enter('-4906289066975989946');" onmouseout="out('-4906289066975989946');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 524 +        errors.add(errorMap);                                                                                     </span>
<span class="-8734340547513070222" onmouseenter="enter('-8734340547513070222');" onmouseout="out('-8734340547513070222');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 525 +        return new JsonResponse(response).with(&quot;errors&quot;, errors).done();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 526      }                                                                                                             </span>
<span  style=""> 527                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 528      /**                                                                                                           </span>
<span class="9102199281013466170" onmouseenter="enter('9102199281013466170');" onmouseout="out('9102199281013466170');" style=""> 529       * Renders the main entity form for the specified entity                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 530       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 531       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 532       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 533       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 534       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 535       * @param id                                                                                                  </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 536       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 537       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 538       */                                                                                                           </span>
<span class="7083955269921705584" onmouseenter="enter('7083955269921705584');" onmouseout="out('7083955269921705584');" style=""> 539      @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)                                                  </span>
<span class="-4309552397998806559" onmouseenter="enter('-4309552397998806559');" onmouseout="out('-4309552397998806559');" style=""> 540      public String viewEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,           </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 541              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="-2194094146044801021" onmouseenter="enter('-2194094146044801021');" onmouseout="out('-2194094146044801021');" style=""> 542              @PathVariable(&quot;id&quot;) String id) throws Exception {                                                     </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 543          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 544          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 545          List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                                    </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""> 546          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);  </span>
<span  style=""> 547                                                                                                                    </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 548          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span class="-8780243800866475465" onmouseenter="enter('-8780243800866475465');" onmouseout="out('-8780243800866475465');" style=""> 549          Entity entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];             </span>
<span  style=""> 550                                                                                                                    </span>
<span class="-8745713672993611458" onmouseenter="enter('-8745713672993611458');" onmouseout="out('-8745713672993611458');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 551 +        multipleCatalogExtensionManager.getProxy().setCurrentCatalog(entity, model);                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 552 +                                                                                                                  </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""> 553          Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);  </span>
<span  style=""> 554                                                                                                                    </span>
<span class="872584542219399793" onmouseenter="enter('872584542219399793');" onmouseout="out('872584542219399793');" style=""> 555          EntityForm entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);                 </span>
<span  style=""> 556                                                                                                                    </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 557 -        if (isAddRequest(entity)) {                                                                               </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 558 -            modifyAddEntityForm(entityForm, pathVars);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 559 -        } else {                                                                                                  </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 560 -            modifyEntityForm(entityForm, pathVars);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 561 -        }                                                                                                         </span>
<span class="1451551715319124344" onmouseenter="enter('1451551715319124344');" onmouseout="out('1451551715319124344');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 562 +        modifyEntityForm(entity, entityForm, pathVars);                                                           </span>
<span  style=""> 563                                                                                                                    </span>
<span class="1981952247030149381" onmouseenter="enter('1981952247030149381');" onmouseout="out('1981952247030149381');" style=""> 564          if (request.getParameter(&quot;headerFlash&quot;) != null) {                                                        </span>
<span class="-2367607735703612103" onmouseenter="enter('-2367607735703612103');" onmouseout="out('-2367607735703612103');" style=""> 565              model.addAttribute(&quot;headerFlash&quot;, request.getParameter(&quot;headerFlash&quot;));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566          }                                                                                                         </span>
<span  style=""> 567                                                                                                                    </span>
<span class="-6569554975283424126" onmouseenter="enter('-6569554975283424126');" onmouseout="out('-6569554975283424126');" style=""> 568          // Set the sectionKey again incase this is a typed entity                                                 </span>
<span class="4201932972037321722" onmouseenter="enter('4201932972037321722');" onmouseout="out('4201932972037321722');" style=""> 569          entityForm.setSectionKey(sectionKey);                                                                     </span>
<span  style=""> 570                                                                                                                    </span>
<span class="5387752430767952558" onmouseenter="enter('5387752430767952558');" onmouseout="out('5387752430767952558');" style=""> 571          // Build the current url in the cast that this is a typed entity                                          </span>
<span class="3856485652570637824" onmouseenter="enter('3856485652570637824');" onmouseout="out('3856485652570637824');" style=""> 572          String originatingUri = new UrlPathHelper().getOriginatingRequestUri(request);                            </span>
<span class="-1728408616530607173" onmouseenter="enter('-1728408616530607173');" onmouseout="out('-1728408616530607173');" style=""> 573          int startIndex = request.getContextPath().length();                                                       </span>
<span  style=""> 574                                                                                                                    </span>
<span class="654052499558570629" onmouseenter="enter('654052499558570629');" onmouseout="out('654052499558570629');" style=""> 575          // Remove the context path from servlet path                                                              </span>
<span class="526107488063217153" onmouseenter="enter('526107488063217153');" onmouseout="out('526107488063217153');" style=""> 576          String currentUrl = originatingUri.substring(startIndex);                                                 </span>
<span  style=""> 577                                                                                                                    </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 578          model.addAttribute(&quot;entity&quot;, entity);                                                                     </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 579          model.addAttribute(&quot;entityForm&quot;, entityForm);                                                             </span>
<span class="-4977411250845897884" onmouseenter="enter('-4977411250845897884');" onmouseout="out('-4977411250845897884');" style=""> 580          model.addAttribute(&quot;currentUrl&quot;, currentUrl);                                                             </span>
<span class="5337717893660099657" onmouseenter="enter('5337717893660099657');" onmouseout="out('5337717893660099657');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 581 +        model.addAttribute(CURRENT_FOLDER_ID, getCurrentFolderId(request));                                       </span>
<span  style=""> 582                                                                                                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 583          setModelAttributes(model, sectionKey);                                                                    </span>
<span  style=""> 584                                                                                                                    </span>
<span class="8236570979651257825" onmouseenter="enter('8236570979651257825');" onmouseout="out('8236570979651257825');" style=""> 585          // We want to replace author ids with their names                                                         </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style=""> 586          addAuditableDisplayFields(entityForm);                                                                    </span>
<span  style=""> 587                                                                                                                    </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 588 -        if (isAjaxRequest(request)) {                                                                             </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 589 -            entityForm.setReadOnly();                                                                             </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 590 -            model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                                   </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 591 -            model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                         </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 592 -            return &quot;modules/modalContainer&quot;;                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 593 -        } else {                                                                                                  </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 594 -            model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                            </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 595 -            model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                         </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 596 -            return &quot;modules/defaultContainer&quot;;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 597 -        }                                                                                                         </span>
<span class="858139107025117803" onmouseenter="enter('858139107025117803');" onmouseout="out('858139107025117803');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 598 +        return resolveAppropriateEntityView(request, model, entityForm);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599      }                                                                                                             </span>
<span  style=""> 600                                                                                                                    </span>
<span class="9182660926479189949" onmouseenter="enter('9182660926479189949');" onmouseout="out('9182660926479189949');" style=""><abbr title=" 601      protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, String&gt; pathVars,"> 601      protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, String&gt; pathðŸ”µ</abbr></span>
<span class="4477928710658117231" onmouseenter="enter('4477928710658117231');" onmouseout="out('4477928710658117231');" style=""> 602                                                                ClassMetadata cmd, Entity entity,                   </span>
<span class="5660295431162582196" onmouseenter="enter('5660295431162582196');" onmouseout="out('5660295431162582196');" style=""> 603                                                                List&lt;SectionCrumb&gt; crumbs) throws Exception {       </span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style=""> 604          String tabName = pathVars.get(&quot;tabName&quot;);                                                                 </span>
<span class="5384642555226517985" onmouseenter="enter('5384642555226517985');" onmouseout="out('5384642555226517985');" style=""> 605          if (StringUtils.isEmpty(tabName)) {                                                                       </span>
<span class="-3672533750283461484" onmouseenter="enter('-3672533750283461484');" onmouseout="out('-3672533750283461484');" style=""> 606              tabName = cmd.getFirstTab() == null ? &quot;General&quot; : cmd.getFirstTab().getTabName();                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 607          }                                                                                                         </span>
<span class="-5882478663361935855" onmouseenter="enter('-5882478663361935855');" onmouseout="out('-5882478663361935855');" style=""> 608          return service.getRecordsForSelectedTab(cmd, entity, crumbs, tabName);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 609      }                                                                                                             </span>
<span  style=""> 610                                                                                                                    </span>
<span class="1953795048205106952" onmouseenter="enter('1953795048205106952');" onmouseout="out('1953795048205106952');" style=""> 611      private boolean isAddRequest(Entity entity) {                                                                 </span>
<span class="-2989581670667655563" onmouseenter="enter('-2989581670667655563');" onmouseout="out('-2989581670667655563');" style=""> 612          ExtensionResultHolder&lt;Boolean&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                              </span>
<span class="2773544387861748911" onmouseenter="enter('2773544387861748911');" onmouseout="out('2773544387861748911');" style=""> 613          ExtensionResultStatusType result = extensionManager.getProxy().isAddRequest(entity, resultHolder);        </span>
<span class="8622638495597819717" onmouseenter="enter('8622638495597819717');" onmouseout="out('8622638495597819717');" style=""> 614          if (result.equals(ExtensionResultStatusType.NOT_HANDLED)) {                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 615              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 616          }                                                                                                         </span>
<span  style=""> 617                                                                                                                    </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 618          return resultHolder.getResult();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 619      }                                                                                                             </span>
<span  style=""> 620                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 621      /**                                                                                                           </span>
<span class="-4864218972040039628" onmouseenter="enter('-4864218972040039628');" onmouseout="out('-4864218972040039628');" style=""> 622       * Attempts to get the List Grid for the selected tab.                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 623       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 624       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 625       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 626       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 627       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 628       * @param id                                                                                                  </span>
<span class="4841027518362301903" onmouseenter="enter('4841027518362301903');" onmouseout="out('4841027518362301903');" style=""> 629       * @param tabName                                                                                             </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 630       * @param entityForm                                                                                          </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 631       * @param entity                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 632       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 633       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 634       */                                                                                                           </span>
<span class="-7675092144868804288" onmouseenter="enter('-7675092144868804288');" onmouseout="out('-7675092144868804288');" style=""> 635      @RequestMapping(value = &quot;/{id}/{tab:[0-9]+}/{tabName}&quot;, method = RequestMethod.POST)                          </span>
<span class="-2248541185927650044" onmouseenter="enter('-2248541185927650044');" onmouseout="out('-2248541185927650044');" style=""> 636      public String viewEntityTab(HttpServletRequest request, HttpServletResponse response, Model model,            </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 637              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 638              @PathVariable(value = &quot;id&quot;) String id,                                                                </span>
<span class="2259450910520289810" onmouseenter="enter('2259450910520289810');" onmouseout="out('2259450910520289810');" style=""> 639              @PathVariable(value = &quot;tabName&quot;) String tabName,                                                      </span>
<span class="2754607649135651414" onmouseenter="enter('2754607649135651414');" onmouseout="out('2754607649135651414');" style=""> 640              @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm,                                          </span>
<span class="-2950467864443381399" onmouseenter="enter('-2950467864443381399');" onmouseout="out('-2950467864443381399');" style=""> 641              @ModelAttribute(value = &quot;entity&quot;) Entity entity) throws Exception {                                   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 642          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 643          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 644          List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                                    </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""> 645          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);  </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 646          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 647          entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];                    </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""> 648          Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);  </span>
<span class="-3846048132763499568" onmouseenter="enter('-3846048132763499568');" onmouseout="out('-3846048132763499568');" style=""> 649          entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);                            </span>
<span  style=""> 650                                                                                                                    </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 651 -        if (isAddRequest(entity)) {                                                                               </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 652 -            modifyAddEntityForm(entityForm, pathVars);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 653 -        } else {                                                                                                  </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 654 -            modifyEntityForm(entityForm, pathVars);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 655 -        }                                                                                                         </span>
<span class="1451551715319124344" onmouseenter="enter('1451551715319124344');" onmouseout="out('1451551715319124344');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 656 +        modifyEntityForm(entity, entityForm, pathVars);                                                           </span>
<span  style=""> 657                                                                                                                    </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 658          model.addAttribute(&quot;entity&quot;, entity);                                                                     </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 659          model.addAttribute(&quot;entityForm&quot;, entityForm);                                                             </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 660          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span  style=""> 661                                                                                                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 662          setModelAttributes(model, sectionKey);                                                                    </span>
<span  style=""> 663                                                                                                                    </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 664          model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                                </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 665          model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                             </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 666 -        return &quot;modules/defaultContainer&quot;;                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 667 +                                                                                                                  </span>
<span class="-4487883013655706388" onmouseenter="enter('-4487883013655706388');" onmouseout="out('-4487883013655706388');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 668 +        return DEFAULT_CONTAINER_VIEW;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 669      }                                                                                                             </span>
<span  style=""> 670                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 671      /**                                                                                                           </span>
<span class="26428616724277901" onmouseenter="enter('26428616724277901');" onmouseout="out('26428616724277901');" style=""> 672       * Builds JSON that looks like this:                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 673       *                                                                                                            </span>
<span class="-619170819873097874" onmouseenter="enter('-619170819873097874');" onmouseout="out('-619170819873097874');" style=""> 674       * {&quot;errors&quot;:                                                                                                 </span>
<span class="-7867797149207986089" onmouseenter="enter('-7867797149207986089');" onmouseout="out('-7867797149207986089');" style=""> 675       *      [{&quot;message&quot;:&quot;This field is Required&quot;,                                                                 </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 676       *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                                 </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 677       *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                         </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 678       *        &quot;errorType&quot;, &quot;field&quot;,                                                                               </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 679       *        &quot;tab&quot;: &quot;General&quot;                                                                                    </span>
<span class="762081609125064039" onmouseenter="enter('762081609125064039');" onmouseout="out('762081609125064039');" style=""> 680       *        },                                                                                                  </span>
<span class="2065208195238134241" onmouseenter="enter('2065208195238134241');" onmouseout="out('2065208195238134241');" style=""> 681       *        {&quot;message&quot;:&quot;This field is Required&quot;,                                                                </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 682       *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                                 </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 683       *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                         </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 684       *        &quot;errorType&quot;, &quot;field&quot;,                                                                               </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 685       *        &quot;tab&quot;: &quot;General&quot;                                                                                    </span>
<span class="-832778532632947969" onmouseenter="enter('-832778532632947969');" onmouseout="out('-832778532632947969');" style=""> 686       *        }]                                                                                                  </span>
<span class="8941010846014250828" onmouseenter="enter('8941010846014250828');" onmouseout="out('8941010846014250828');" style=""> 687       * }                                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 688       *                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 689       */                                                                                                           </span>
<span class="726178843151373675" onmouseenter="enter('726178843151373675');" onmouseout="out('726178843151373675');" style=""> 690      @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST, produces = &quot;application/json&quot;)                  </span>
<span class="-4245682307765667372" onmouseenter="enter('-4245682307765667372');" onmouseout="out('-4245682307765667372');" style=""> 691      public String saveEntityJson(HttpServletRequest request, HttpServletResponse response, Model model,           </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 692              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 693              @PathVariable(value = &quot;id&quot;) String id,                                                                </span>
<span class="-5165411007609652701" onmouseenter="enter('-5165411007609652701');" onmouseout="out('-5165411007609652701');" style=""> 694              @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm, BindingResult result,                    </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 695              RedirectAttributes ra) throws Exception {                                                             </span>
<span  style=""> 696                                                                                                                    </span>
<span class="-7049584637685461961" onmouseenter="enter('-7049584637685461961');" onmouseout="out('-7049584637685461961');" style=""> 697          saveEntity(request, response, model, pathVars, id, entityForm, result, ra);                               </span>
<span  style=""> 698                                                                                                                    </span>
<span class="2770382331963423086" onmouseenter="enter('2770382331963423086');" onmouseout="out('2770382331963423086');" style=""> 699          JsonResponse json = new JsonResponse(response);                                                           </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 700          if (result.hasErrors()) {                                                                                 </span>
<span class="6668101882629849049" onmouseenter="enter('6668101882629849049');" onmouseout="out('6668101882629849049');" style=""> 701              populateJsonValidationErrors(entityForm, result, json);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 702          }                                                                                                         </span>
<span class="-8719030961107019295" onmouseenter="enter('-8719030961107019295');" onmouseout="out('-8719030961107019295');" style=""> 703          List&lt;String&gt; dirtyList = buildDirtyList(pathVars, request, id);                                           </span>
<span class="-2397478597494600131" onmouseenter="enter('-2397478597494600131');" onmouseout="out('-2397478597494600131');" style=""> 704          if (CollectionUtils.isNotEmpty(dirtyList)) {                                                              </span>
<span class="-6863151800017638945" onmouseenter="enter('-6863151800017638945');" onmouseout="out('-6863151800017638945');" style=""> 705              json.with(&quot;dirty&quot;, dirtyList);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 706          }                                                                                                         </span>
<span  style=""> 707                                                                                                                    </span>
<span class="1148846903613025505" onmouseenter="enter('1148846903613025505');" onmouseout="out('1148846903613025505');" style=""> 708          ExtensionResultHolder&lt;String&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                               </span>
<span class="772761850497532920" onmouseenter="enter('772761850497532920');" onmouseout="out('772761850497532920');" style=""><abbr title=" 709          ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonResponse(response, result.hasErrors(), getSectionKey(pathVars), id, resultHolder);"> 709          ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonResponse(reðŸ”µ</abbr></span>
<span class="-7225919658162387284" onmouseenter="enter('-7225919658162387284');" onmouseout="out('-7225919658162387284');" style=""> 710          if (resultStatusType.equals(ExtensionResultStatusType.HANDLED)) {                                         </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 711              return resultHolder.getResult();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 712          }                                                                                                         </span>
<span  style=""> 713                                                                                                                    </span>
<span class="-3901811907821215875" onmouseenter="enter('-3901811907821215875');" onmouseout="out('-3901811907821215875');" style=""> 714          return json.done();                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 715      }                                                                                                             </span>
<span  style=""> 716                                                                                                                    </span>
<span class="-2624067384280123527" onmouseenter="enter('-2624067384280123527');" onmouseout="out('-2624067384280123527');" style=""><abbr title=" 717      public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String id) throws ServiceException {"> 717      public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String id) throwsðŸ”µ</abbr></span>
<span class="-6199220983064020273" onmouseenter="enter('-6199220983064020273');" onmouseout="out('-6199220983064020273');" style=""> 718          List&lt;String&gt; dirtyList = new ArrayList&lt;&gt;();                                                               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 719          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 720          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 721          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 722          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 722          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVðŸ”µ</abbr></span>
<span class="-6293964121119142853" onmouseenter="enter('-6293964121119142853');" onmouseout="out('-6293964121119142853');" style=""> 723          ClassMetadata cmd = null;                                                                                 </span>
<span class="-6100049554794336383" onmouseenter="enter('-6100049554794336383');" onmouseout="out('-6100049554794336383');" style=""> 724          Entity entity = null;                                                                                     </span>
<span class="-7221558264805358950" onmouseenter="enter('-7221558264805358950');" onmouseout="out('-7221558264805358950');" style=""> 725          cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();                             </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 726          entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];                    </span>
<span  style=""> 727                                                                                                                    </span>
<span class="-538034338216639378" onmouseenter="enter('-538034338216639378');" onmouseout="out('-538034338216639378');" style=""> 728          for (Property p: entity.getProperties()) {                                                                </span>
<span class="-5586383415891827802" onmouseenter="enter('-5586383415891827802');" onmouseout="out('-5586383415891827802');" style=""> 729              if (p.getIsDirty()) {                                                                                 </span>
<span class="-1571805809811752662" onmouseenter="enter('-1571805809811752662');" onmouseout="out('-1571805809811752662');" style=""> 730                  dirtyList.add(p.getName());                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 731              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732          }                                                                                                         </span>
<span class="7211627429904225799" onmouseenter="enter('7211627429904225799');" onmouseout="out('7211627429904225799');" style=""> 733          return dirtyList;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 734      }                                                                                                             </span>
<span  style=""> 735                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 736      /**                                                                                                           </span>
<span class="-1912365624495655250" onmouseenter="enter('-1912365624495655250');" onmouseout="out('-1912365624495655250');" style=""> 737       * Attempts to save the given entity. If validation is unsuccessful, it will re-render the entity form with   </span>
<span class="3378821078357952120" onmouseenter="enter('3378821078357952120');" onmouseout="out('3378821078357952120');" style=""> 738       * error fields highlighted. On a successful save, it will refresh the entity page.                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 739       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 740       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 741       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 742       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 743       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 744       * @param id                                                                                                  </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 745       * @param entityForm                                                                                          </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 746       * @param result                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 747       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 748       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 749       */                                                                                                           </span>
<span class="681227659796054179" onmouseenter="enter('681227659796054179');" onmouseout="out('681227659796054179');" style=""> 750      @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST)                                                 </span>
<span class="2696827203115285075" onmouseenter="enter('2696827203115285075');" onmouseout="out('2696827203115285075');" style=""> 751      public String saveEntity(HttpServletRequest request, HttpServletResponse response, Model model,               </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 752              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 753              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 754              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,                      </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 755              RedirectAttributes ra) throws Exception {                                                             </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 756          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 757          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 758          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 759          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 759          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 760          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span  style=""> 761                                                                                                                    </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 762          extractDynamicFormFields(cmd, entityForm);                                                                </span>
<span  style=""> 763                                                                                                                    </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 764          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 764          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCuðŸ”µ</abbr></span>
<span class="-4517703585527939334" onmouseenter="enter('-4517703585527939334');" onmouseout="out('-4517703585527939334');" style=""> 765          Entity entity = service.updateEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();             </span>
<span  style=""> 766                                                                                                                    </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 767          entityFormValidator.validate(entityForm, entity, result);                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 768 +                                                                                                                  </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 769          if (result.hasErrors()) {                                                                                 </span>
<span class="-9083492279253959347" onmouseenter="enter('-9083492279253959347');" onmouseout="out('-9083492279253959347');" style=""> 770              model.addAttribute(&quot;headerFlash&quot;, &quot;save.unsuccessful&quot;);                                               </span>
<span class="-3255113992478543295" onmouseenter="enter('-3255113992478543295');" onmouseout="out('-3255113992478543295');" style=""> 771              model.addAttribute(&quot;headerFlashAlert&quot;, true);                                                         </span>
<span  style=""> 772                                                                                                                    </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 773              Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 773              Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 774              entityForm.clearFieldsMap();                                                                          </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 775              formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);                </span>
<span  style=""> 776                                                                                                                    </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 777 -            if (isAddRequest(entity)) {                                                                           </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 778 -                modifyAddEntityForm(entityForm, pathVars);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 779 -            } else {                                                                                              </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 780 -                modifyEntityForm(entityForm, pathVars);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 781 -            }                                                                                                     </span>
<span class="1451551715319124344" onmouseenter="enter('1451551715319124344');" onmouseout="out('1451551715319124344');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 782 +            modifyEntityForm(entity, entityForm, pathVars);                                                       </span>
<span  style=""> 783                                                                                                                    </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 784              model.addAttribute(&quot;entity&quot;, entity);                                                                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 785              model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                 </span>
<span  style=""> 786                                                                                                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 787              setModelAttributes(model, sectionKey);                                                                </span>
<span  style=""> 788                                                                                                                    </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 789 -            if (isAjaxRequest(request)) {                                                                         </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 790 -                entityForm.setReadOnly();                                                                         </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 791 -                model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                               </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 792 -                model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                     </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 793 -                return &quot;modules/modalContainer&quot;;                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 794 -            } else {                                                                                              </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 795 -                model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                        </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 796 -                model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                     </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 797 -                return &quot;modules/defaultContainer&quot;;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 798 -            }                                                                                                     </span>
<span class="858139107025117803" onmouseenter="enter('858139107025117803');" onmouseout="out('858139107025117803');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 799 +            return resolveAppropriateEntityView(request, model, entityForm);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 800          }                                                                                                         </span>
<span  style=""> 801                                                                                                                    </span>
<span class="-8977665602521560288" onmouseenter="enter('-8977665602521560288');" onmouseout="out('-8977665602521560288');" style=""> 802          ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;save.successful&quot;);                                                   </span>
<span  style=""> 803                                                                                                                    </span>
<span class="5326436654777975784" onmouseenter="enter('5326436654777975784');" onmouseout="out('5326436654777975784');" style=""> 804          return &quot;redirect:/&quot; + sectionKey + &quot;/&quot; + id;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 805 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 806 +                                                                                                                  </span>
<span class="-1036069149620696687" onmouseenter="enter('-1036069149620696687');" onmouseout="out('-1036069149620696687');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 807 +    protected void modifyEntityForm(final Entity entity, final EntityForm entityForm,                             </span>
<span class="-2182671422299427893" onmouseenter="enter('-2182671422299427893');" onmouseout="out('-2182671422299427893');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 808 +            final Map&lt;String, String&gt; pathVars) throws Exception {                                                </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 809 +        if (isAddRequest(entity)) {                                                                               </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 810 +            modifyAddEntityForm(entityForm, pathVars);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 811 +        } else {                                                                                                  </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 812 +            modifyEntityForm(entityForm, pathVars);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 813 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 814 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 815 +                                                                                                                  </span>
<span class="7327611436230860688" onmouseenter="enter('7327611436230860688');" onmouseout="out('7327611436230860688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 816 +    protected String resolveAppropriateEntityView(final HttpServletRequest request,                               </span>
<span class="7665770463560391322" onmouseenter="enter('7665770463560391322');" onmouseout="out('7665770463560391322');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 817 +            final Model model,                                                                                    </span>
<span class="6537819747648345888" onmouseenter="enter('6537819747648345888');" onmouseout="out('6537819747648345888');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 818 +            final @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) {                                  </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 819 +        if (isAjaxRequest(request)) {                                                                             </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 820 +            entityForm.setReadOnly();                                                                             </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 821 +            model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                                   </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 822 +            model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                         </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 823 +            return MODAL_CONTAINER_VIEW;                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 824 +        } else {                                                                                                  </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 825 +            model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                            </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 826 +            model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                         </span>
<span class="-4487883013655706388" onmouseenter="enter('-4487883013655706388');" onmouseout="out('-4487883013655706388');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 827 +            return DEFAULT_CONTAINER_VIEW;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 828 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 829      }                                                                                                             </span>
<span  style=""> 830                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 831      /**                                                                                                           </span>
<span class="4876253458579857532" onmouseenter="enter('4876253458579857532');" onmouseout="out('4876253458579857532');" style=""> 832       * Attempts to remove the given entity.                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 833       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 834       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 835       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 836       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 837       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 838       * @param id                                                                                                  </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 839       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 840       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 841       */                                                                                                           </span>
<span class="8293921381301703428" onmouseenter="enter('8293921381301703428');" onmouseout="out('8293921381301703428');" style=""> 842      @RequestMapping(value = &quot;/{id}/delete&quot;, method = RequestMethod.POST)                                          </span>
<span class="2313354717081876463" onmouseenter="enter('2313354717081876463');" onmouseout="out('2313354717081876463');" style=""> 843      public String removeEntity(HttpServletRequest request, HttpServletResponse response, Model model,             </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 844              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 845              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 846              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,                      </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 847              RedirectAttributes ra) throws Exception {                                                             </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 848          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 849          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 850          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span  style=""> 851                                                                                                                    </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 852          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 852          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCuðŸ”µ</abbr></span>
<span class="6624819200143935214" onmouseenter="enter('6624819200143935214');" onmouseout="out('6624819200143935214');" style=""> 853          Entity entity = service.removeEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();             </span>
<span class="-6561774320633688873" onmouseenter="enter('-6561774320633688873');" onmouseout="out('-6561774320633688873');" style=""> 854          // Removal does not normally return an Entity unless there is some validation error                       </span>
<span class="-2807113977407494827" onmouseenter="enter('-2807113977407494827');" onmouseout="out('-2807113977407494827');" style=""> 855          if (entity != null) {                                                                                     </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 856              entityFormValidator.validate(entityForm, entity, result);                                             </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 857              if (result.hasErrors()) {                                                                             </span>
<span class="354313568014337940" onmouseenter="enter('354313568014337940');" onmouseout="out('354313568014337940');" style=""> 858                  // Create a flash attribute for the unsuccessful delete                                           </span>
<span class="-3408473788799892596" onmouseenter="enter('-3408473788799892596');" onmouseout="out('-3408473788799892596');" style=""> 859                  FlashMap fm = new FlashMap();                                                                     </span>
<span class="-3785724779356953427" onmouseenter="enter('-3785724779356953427');" onmouseout="out('-3785724779356953427');" style=""> 860                  fm.put(&quot;headerFlash&quot;, &quot;delete.unsuccessful&quot;);                                                     </span>
<span class="2000410372434500283" onmouseenter="enter('2000410372434500283');" onmouseout="out('2000410372434500283');" style=""> 861                  fm.put(&quot;headerFlashAlert&quot;, true);                                                                 </span>
<span class="-216272657842661141" onmouseenter="enter('-216272657842661141');" onmouseout="out('-216272657842661141');" style=""> 862                  request.setAttribute(DispatcherServlet.OUTPUT_FLASH_MAP_ATTRIBUTE, fm);                           </span>
<span  style=""> 863                                                                                                                    </span>
<span class="-9154666565283892619" onmouseenter="enter('-9154666565283892619');" onmouseout="out('-9154666565283892619');" style=""> 864                  // Re-look back up the entity so that we can return something populated                           </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 865                  PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 865                  PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 866                  ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();       </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 867                  entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];            </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 868                  Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 868                  Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, ðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 869                  entityForm.clearFieldsMap();                                                                      </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 870                  formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);            </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 871                  modifyEntityForm(entityForm, pathVars);                                                           </span>
<span  style=""> 872                                                                                                                    </span>
<span class="-1358530666837283115" onmouseenter="enter('-1358530666837283115');" onmouseout="out('-1358530666837283115');" style=""> 873                  return populateJsonValidationErrors(entityForm, result, new JsonResponse(response))               </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style=""> 874                          .done();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 875              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 876          }                                                                                                         </span>
<span  style=""> 877                                                                                                                    </span>
<span class="3611526951082120901" onmouseenter="enter('3611526951082120901');" onmouseout="out('3611526951082120901');" style=""> 878          ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;delete.successful&quot;);                                                 </span>
<span class="2579818068351246488" onmouseenter="enter('2579818068351246488');" onmouseout="out('2579818068351246488');" style=""> 879          ra.addFlashAttribute(&quot;headerFlashAlert&quot;, true);                                                           </span>
<span  style=""> 880                                                                                                                    </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 881          if (isAjaxRequest(request)) {                                                                             </span>
<span class="-5684384949344822714" onmouseenter="enter('-5684384949344822714');" onmouseout="out('-5684384949344822714');" style=""> 882              // redirect attributes won&#x27;t work here since ajaxredirect actually makes a new request                </span>
<span class="-9107475529968351628" onmouseenter="enter('-9107475529968351628');" onmouseout="out('-9107475529968351628');" style=""> 883              return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;?headerFlash=delete.successful&quot;;     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 884          } else {                                                                                                  </span>
<span class="4357427724598824699" onmouseenter="enter('4357427724598824699');" onmouseout="out('4357427724598824699');" style=""> 885              return &quot;redirect:/&quot; + sectionKey;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 886          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 887      }                                                                                                             </span>
<span  style=""> 888                                                                                                                    </span>
<span class="-2983794507366563158" onmouseenter="enter('-2983794507366563158');" onmouseout="out('-2983794507366563158');" style=""> 889      @RequestMapping(value = &quot;/{collectionField:.*}/details&quot;, method = RequestMethod.GET)                          </span>
<span class="-527911248282232950" onmouseenter="enter('-527911248282232950');" onmouseout="out('-527911248282232950');" style=""><abbr title=" 890      public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpServletResponse response, Model model,"> 890      public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpServletRespðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 891              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 892              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-5250072335910309101" onmouseenter="enter('-5250072335910309101');" onmouseout="out('-5250072335910309101');" style=""> 893              @RequestParam String ids,                                                                             </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 894              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                         </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 895          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 896          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 897          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                                 </span>
<span class="-5225610456611199616" onmouseenter="enter('-5225610456611199616');" onmouseout="out('-5225610456611199616');" style=""><abbr title=" 898          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, sectionCrumbs, pathVars);"> 898          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, sectiðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""> 899          ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 900          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style=""> 901          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span  style=""> 902                                                                                                                    </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style=""> 903          ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                          </span>
<span class="-2120492003233088270" onmouseenter="enter('-2120492003233088270');" onmouseout="out('-2120492003233088270');" style=""> 904          ppr.setStartIndex(getStartIndex(requestParams));                                                          </span>
<span class="2736790979641523309" onmouseenter="enter('2736790979641523309');" onmouseout="out('2736790979641523309');" style=""> 905          ppr.setMaxIndex(getMaxIndex(requestParams));                                                              </span>
<span  style=""> 906                                                                                                                    </span>
<span class="-8000769512056204294" onmouseenter="enter('-8000769512056204294');" onmouseout="out('-8000769512056204294');" style=""> 907          if (md instanceof BasicFieldMetadata) {                                                                   </span>
<span class="-1954892043355765019" onmouseenter="enter('-1954892043355765019');" onmouseout="out('-1954892043355765019');" style=""> 908              String idProp = ((BasicFieldMetadata) md).getForeignKeyProperty();                                    </span>
<span class="6288096257758990604" onmouseenter="enter('6288096257758990604');" onmouseout="out('6288096257758990604');" style=""> 909              String displayProp = ((BasicFieldMetadata) md).getForeignKeyDisplayValueProperty();                   </span>
<span  style=""> 910                                                                                                                    </span>
<span class="-6477100624593005266" onmouseenter="enter('-6477100624593005266');" onmouseout="out('-6477100624593005266');" style=""> 911              List&lt;String&gt; filterValues = BLCArrayUtils.asList(ids.split(FILTER_VALUE_SEPARATOR_REGEX));            </span>
<span class="3640259021720155935" onmouseenter="enter('3640259021720155935');" onmouseout="out('3640259021720155935');" style=""> 912              ppr.addFilterAndSortCriteria(new FilterAndSortCriteria(idProp, filterValues));                        </span>
<span  style=""> 913                                                                                                                    </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style=""> 914              DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                                 </span>
<span class="-2768740094948248396" onmouseenter="enter('-2768740094948248396');" onmouseout="out('-2768740094948248396');" style=""> 915              Map&lt;String, String&gt; returnMap = new HashMap&lt;&gt;();                                                      </span>
<span  style=""> 916                                                                                                                    </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 917              for (Entity e : drs.getRecords()) {                                                                   </span>
<span class="4979367110517822568" onmouseenter="enter('4979367110517822568');" onmouseout="out('4979367110517822568');" style=""> 918                  String id = e.getPMap().get(idProp).getValue();                                                   </span>
<span class="-4946347213336092877" onmouseenter="enter('-4946347213336092877');" onmouseout="out('-4946347213336092877');" style=""> 919                  String disp = e.getPMap().get(displayProp).getDisplayValue();                                     </span>
<span  style=""> 920                                                                                                                    </span>
<span class="3483982845402449596" onmouseenter="enter('3483982845402449596');" onmouseout="out('3483982845402449596');" style=""> 921                  if (StringUtils.isBlank(disp)) {                                                                  </span>
<span class="-2027181132953179584" onmouseenter="enter('-2027181132953179584');" onmouseout="out('-2027181132953179584');" style=""> 922                      disp = e.getPMap().get(displayProp).getValue();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 923                  }                                                                                                 </span>
<span  style=""> 924                                                                                                                    </span>
<span class="-1075893121428940879" onmouseenter="enter('-1075893121428940879');" onmouseout="out('-1075893121428940879');" style=""> 925                  returnMap.put(id,  disp);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 926              }                                                                                                     </span>
<span  style=""> 927                                                                                                                    </span>
<span class="9157811424862351106" onmouseenter="enter('9157811424862351106');" onmouseout="out('9157811424862351106');" style=""> 928              return returnMap;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 929          }                                                                                                         </span>
<span  style=""> 930                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 931          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 932      }                                                                                                             </span>
<span  style=""> 933                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 934      /**                                                                                                           </span>
<span class="7896529828316523089" onmouseenter="enter('7896529828316523089');" onmouseout="out('7896529828316523089');" style=""><abbr title=" 935       * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a list of products"> 935       * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a list of pðŸ”µ</abbr></span>
<span class="8702245574166025616" onmouseenter="enter('8702245574166025616');" onmouseout="out('8702245574166025616');" style=""> 936       * then this method is invoked when a user clicks on the name of the default category field.                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 937       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 938       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 939       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 940       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 941       * @param pathVars                                                                                            </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 942       * @param collectionField                                                                                     </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 943       * @param id                                                                                                  </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 944       * @return                                                                                                    </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 945       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 946       */                                                                                                           </span>
<span class="1405910210670150204" onmouseenter="enter('1405910210670150204');" onmouseout="out('1405910210670150204');" style=""> 947      @RequestMapping(value = &quot;/{collectionField:.*}/{id}/view&quot;, method = RequestMethod.GET)                        </span>
<span class="-5496524556428427140" onmouseenter="enter('-5496524556428427140');" onmouseout="out('-5496524556428427140');" style=""> 948      public String viewCollectionItemDetails(HttpServletRequest request, HttpServletResponse response, Model model,</span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 949              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 950              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-1857511616350008386" onmouseenter="enter('-1857511616350008386');" onmouseout="out('-1857511616350008386');" style=""> 951              @PathVariable(value=&quot;id&quot;) String id) throws Exception {                                               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 952          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 953          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 954          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title=" 955          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 955          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 956          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="2157347470680130722" onmouseenter="enter('2157347470680130722');" onmouseout="out('2157347470680130722');" style=""> 957          BasicFieldMetadata md = (BasicFieldMetadata) collectionProperty.getMetadata();                            </span>
<span  style=""> 958                                                                                                                    </span>
<span class="-1856968160831305726" onmouseenter="enter('-1856968160831305726');" onmouseout="out('-1856968160831305726');" style=""><abbr title=" 959          AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeyClass(), sectionKey);"> 959          AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeyClass(),ðŸ”µ</abbr></span>
<span class="-151095669048618305" onmouseenter="enter('-151095669048618305');" onmouseout="out('-151095669048618305');" style=""><abbr title=" 960          String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : section.getUrl();"> 960          String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : section.getUrlðŸ”µ</abbr></span>
<span class="4949862081138664893" onmouseenter="enter('4949862081138664893');" onmouseout="out('4949862081138664893');" style=""> 961          Map&lt;String, String&gt; varsForField = new HashMap&lt;&gt;();                                                       </span>
<span class="-4429965231898090358" onmouseenter="enter('-4429965231898090358');" onmouseout="out('-4429965231898090358');" style=""> 962          varsForField.put(&quot;sectionKey&quot;, sectionUrlKey);                                                            </span>
<span class="4805235980730638518" onmouseenter="enter('4805235980730638518');" onmouseout="out('4805235980730638518');" style=""> 963          return viewEntityForm(request, response, model, varsForField, id);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 964      }                                                                                                             </span>
<span  style=""> 965                                                                                                                    </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style=""> 966      @RequestMapping(                                                                                              </span>
<span class="4528666449367390600" onmouseenter="enter('4528666449367390600');" onmouseout="out('4528666449367390600');" style=""> 967              value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{tab:[0-9]+}/{tabName}&quot;,                       </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style=""> 968              method = RequestMethod.POST                                                                           </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 969      )                                                                                                             </span>
<span class="1786222500639285262" onmouseenter="enter('1786222500639285262');" onmouseout="out('1786222500639285262');" style=""> 970      public String viewCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,    </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 971                                          @PathVariable  Map&lt;String, String&gt; pathVars,                              </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 972                                          @PathVariable(value=&quot;id&quot;) String id,                                      </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 973                                          @PathVariable(value=&quot;collectionField&quot;) String collectionField,            </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style=""> 974                                          @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,          </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style=""> 975                                          @PathVariable(value=&quot;tabName&quot;) String tabName,                            </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title=" 976                                          @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {"> 976                                          @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws ExceptðŸ”µ</abbr></span>
<span  style=""> 977                                                                                                                    </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title=" 978          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);"> 978          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeadðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 979      }                                                                                                             </span>
<span  style=""> 980                                                                                                                    </span>
<span  style=""> 981                                                                                                                    </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style=""> 982      @RequestMapping(                                                                                              </span>
<span class="-3329921938797888660" onmouseenter="enter('-3329921938797888660');" onmouseout="out('-3329921938797888660');" style=""> 983              value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view/{tab:[0-9]+}/{tabName}&quot;,                  </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style=""> 984              method = RequestMethod.POST                                                                           </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 985      )                                                                                                             </span>
<span class="546530564983480962" onmouseenter="enter('546530564983480962');" onmouseout="out('546530564983480962');" style=""><abbr title=" 986      public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,"> 986      public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 987                                          @PathVariable  Map&lt;String, String&gt; pathVars,                              </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 988                                          @PathVariable(value=&quot;id&quot;) String id,                                      </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 989                                          @PathVariable(value=&quot;collectionField&quot;) String collectionField,            </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style=""> 990                                          @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,          </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style=""> 991                                          @PathVariable(value=&quot;tabName&quot;) String tabName,                            </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title=" 992                                          @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {"> 992                                          @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws ExceptðŸ”µ</abbr></span>
<span  style=""> 993                                                                                                                    </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title=" 994          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);"> 994          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeadðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 995      }                                                                                                             </span>
<span  style=""> 996                                                                                                                    </span>
<span  style=""> 997                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 998      /**                                                                                                           </span>
<span class="1274042523848442367" onmouseenter="enter('1274042523848442367');" onmouseout="out('1274042523848442367');" style=""> 999       * Returns the records for a given collectionField filtered by a particular criteria                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1000       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1001       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1002       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1003       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1004       * @param pathVars                                                                                            </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1005       * @param collectionField                                                                                     </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style="">1006       * @param requestParams                                                                                       </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1007       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1008       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1009       */                                                                                                           </span>
<span class="-4095443548484775059" onmouseenter="enter('-4095443548484775059');" onmouseout="out('-4095443548484775059');" style="">1010      @RequestMapping(value = &quot;/{id}/{collectionField:.*}&quot;, method = RequestMethod.GET)                             </span>
<span class="-5889287394210369546" onmouseenter="enter('-5889287394210369546');" onmouseout="out('-5889287394210369546');" style="">1011      public String getCollectionFieldRecords(HttpServletRequest request, HttpServletResponse response, Model model,</span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1012              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1013              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1014              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="3465670919255037355" onmouseenter="enter('3465670919255037355');" onmouseout="out('3465670919255037355');" style="">1015              @RequestParam  MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                        </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1016          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1017          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1018          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-6545915569490985196" onmouseenter="enter('-6545915569490985196');" onmouseout="out('-6545915569490985196');" style=""><abbr title="1019          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams, sectionCrumbs, pathVars);">1019          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams, sectionCðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style="">1020          ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1021          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1022                                                                                                                    </span>
<span class="-3734134243620930531" onmouseenter="enter('-3734134243620930531');" onmouseout="out('-3734134243620930531');" style="">1023          ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);                        </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1024          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span  style="">1025                                                                                                                    </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1026          // Next, we must get the new list grid that represents this collection                                    </span>
<span class="-8440278474384944243" onmouseenter="enter('-8440278474384944243');" onmouseout="out('-8440278474384944243');" style=""><abbr title="1027          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParams, sectionKey, sectionCrumbs);">1027          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParams, sectionðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1028          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span  style="">1029                                                                                                                    </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style="">1030          model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));                </span>
<span  style="">1031                                                                                                                    </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1032          // We return the new list grid so that it can replace the currently visible one                           </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1033          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1034          return &quot;views/standaloneListGrid&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1035      }                                                                                                             </span>
<span  style="">1036                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1037      /**                                                                                                           </span>
<span class="-2279175998905644242" onmouseenter="enter('-2279175998905644242');" onmouseout="out('-2279175998905644242');" style=""><abbr title="1038       * Shows the modal dialog that is used to add an item to a given collection. There are several possible outcomes">1038       * Shows the modal dialog that is used to add an item to a given collection. There are several possible outcomðŸ”µ</abbr></span>
<span class="-3490572548815062734" onmouseenter="enter('-3490572548815062734');" onmouseout="out('-3490572548815062734');" style="">1039       * of this call depending on the type of the specified collection field.                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1040       *                                                                                                            </span>
<span class="2717555647352622731" onmouseenter="enter('2717555647352622731');" onmouseout="out('2717555647352622731');" style="">1041       * &lt;ul&gt;                                                                                                       </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style="">1042       *  &lt;li&gt;                                                                                                      </span>
<span class="4930235181592711719" onmouseenter="enter('4930235181592711719');" onmouseout="out('4930235181592711719');" style=""><abbr title="1043       *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so that the user may">1043       *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so that the useðŸ”µ</abbr></span>
<span class="-3142080293607523336" onmouseenter="enter('-3142080293607523336');" onmouseout="out('-3142080293607523336');" style=""><abbr title="1044       *    enter information and associate the record with this collection. Used by fields such as ProductAttribute.">1044       *    enter information and associate the record with this collection. Used by fields such as ProductAttributeðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style="">1045       *  &lt;/li&gt;                                                                                                     </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style="">1046       *  &lt;li&gt;                                                                                                      </span>
<span class="6319691685860667757" onmouseenter="enter('6319691685860667757');" onmouseout="out('6319691685860667757');" style=""><abbr title="1047       *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and select it.">1047       *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and seðŸ”µ</abbr></span>
<span class="-8731186021492741581" onmouseenter="enter('-8731186021492741581');" onmouseout="out('-8731186021492741581');" style="">1048       *    Used by fields such as &quot;allParentCategories&quot;.                                                           </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style="">1049       *  &lt;/li&gt;                                                                                                     </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style="">1050       *  &lt;li&gt;                                                                                                      </span>
<span class="-6847404578833725914" onmouseenter="enter('-6847404578833725914');" onmouseout="out('-6847404578833725914');" style=""><abbr title="1051       *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and">1051       *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entitðŸ”µ</abbr></span>
<span class="568361472595397074" onmouseenter="enter('568361472595397074');" onmouseout="out('568361472595397074');" style=""><abbr title="1052       *    select it. The view rendered by this is identical to basic collection (lookup), but will perform the operation">1052       *    select it. The view rendered by this is identical to basic collection (lookup), but will perform the opeðŸ”µ</abbr></span>
<span class="-4048066359856567222" onmouseenter="enter('-4048066359856567222');" onmouseout="out('-4048066359856567222');" style=""><abbr title="1053       *    on an adorned field, which may carry extra meta-information about the created relationship, such as order.">1053       *    on an adorned field, which may carry extra meta-information about the created relationship, such as ordeðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style="">1054       *  &lt;/li&gt;                                                                                                     </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style="">1055       *  &lt;li&gt;                                                                                                      </span>
<span class="7355096557601214207" onmouseenter="enter('7355096557601214207');" onmouseout="out('7355096557601214207');" style=""><abbr title="1056       *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and">1056       *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity aðŸ”µ</abbr></span>
<span class="-146713903552295440" onmouseenter="enter('-146713903552295440');" onmouseout="out('-146713903552295440');" style=""><abbr title="1057       *    select it. Once the user selects the entity, he will be presented with an empty form based on the specified">1057       *    select it. Once the user selects the entity, he will be presented with an empty form based on the specifðŸ”µ</abbr></span>
<span class="7585671366133275820" onmouseenter="enter('7585671366133275820');" onmouseout="out('7585671366133275820');" style=""><abbr title="1058       *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, which in addition">1058       *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, which in addðŸ”µ</abbr></span>
<span class="7350312284882119043" onmouseenter="enter('7350312284882119043');" onmouseout="out('7350312284882119043');" style="">1059       *    to linking an entity, provide extra fields, such as a promotional message.                              </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style="">1060       *  &lt;/li&gt;                                                                                                     </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style="">1061       *  &lt;li&gt;                                                                                                      </span>
<span class="8829232354049589291" onmouseenter="enter('8829232354049589291');" onmouseout="out('8829232354049589291');" style=""><abbr title="1062       *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. This field is">1062       *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. This fielðŸ”µ</abbr></span>
<span class="-8508051731153769866" onmouseenter="enter('-8508051731153769866');" onmouseout="out('-8508051731153769866');" style=""><abbr title="1063       *    populated either from the configured map keys, or as a result of a lookup in the case of a key based on another">1063       *    populated either from the configured map keys, or as a result of a lookup in the case of a key based on ðŸ”µ</abbr></span>
<span class="-6056737616128420156" onmouseenter="enter('-6056737616128420156');" onmouseout="out('-6056737616128420156');" style="">1064       *    entity. Used by fields such as the mediaMap on a Sku.                                                   </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style="">1065       *  &lt;/li&gt;                                                                                                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1066       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1067       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1068       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1069       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1070       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1071       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1072       * @param collectionField                                                                                     </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style="">1073       * @param requestParams                                                                                       </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1074       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1075       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1076       */                                                                                                           </span>
<span class="835275592837580694" onmouseenter="enter('835275592837580694');" onmouseout="out('835275592837580694');" style="">1077      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.GET)                         </span>
<span class="2460266594736272943" onmouseenter="enter('2460266594736272943');" onmouseout="out('2460266594736272943');" style="">1078      public String showAddCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,    </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1079              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style="">1080              @PathVariable(value = &quot;id&quot;) String id,                                                                </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style="">1081              @PathVariable(value = &quot;collectionField&quot;) String collectionField,                                      </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style="">1082              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                         </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1083          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1084          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1085          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style="">1086          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,  </span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style="">1087                  sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                               </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1088          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1089          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span  style="">1090                                                                                                                    </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style="">1091          PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)                 </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style="">1092                  .withFilterAndSortCriteria(getCriteria(requestParams))                                            </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style="">1093                  .withStartIndex(getStartIndex(requestParams))                                                     </span>
<span class="4786121744461484155" onmouseenter="enter('4786121744461484155');" onmouseout="out('4786121744461484155');" style="">1094                  .withMaxIndex(getMaxIndex(requestParams))                                                         </span>
<span class="2941692162045974129" onmouseenter="enter('2941692162045974129');" onmouseout="out('2941692162045974129');" style="">1095                  .withLastId(getLastId(requestParams))                                                             </span>
<span class="-9137331061893195290" onmouseenter="enter('-9137331061893195290');" onmouseout="out('-9137331061893195290');" style="">1096                  .withFirstId(getFirstId(requestParams))                                                           </span>
<span class="-6497878492174321892" onmouseenter="enter('-6497878492174321892');" onmouseout="out('-6497878492174321892');" style="">1097                  .withUpperCount(getUpperCount(requestParams))                                                     </span>
<span class="-8373154769706308503" onmouseenter="enter('-8373154769706308503');" onmouseout="out('-8373154769706308503');" style="">1098                  .withLowerCount(getLowerCount(requestParams))                                                     </span>
<span class="-1051723743320189375" onmouseenter="enter('-1051723743320189375');" onmouseout="out('-1051723743320189375');" style="">1099                  .withPageSize(getPageSize(requestParams))                                                         </span>
<span class="-6582704259903712752" onmouseenter="enter('-6582704259903712752');" onmouseout="out('-6582704259903712752');" style="">1100                  .withPresentationFetch(true);                                                                     </span>
<span  style="">1101                                                                                                                    </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1102          if (md instanceof BasicCollectionMetadata) {                                                              </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1103              BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                           </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style="">1104              if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                           </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style="">1105                  ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();       </span>
<span class="-2914433993330253670" onmouseenter="enter('-2914433993330253670');" onmouseout="out('-2914433993330253670');" style="">1106                  // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types</span>
<span class="-7795450821592681641" onmouseenter="enter('-7795450821592681641');" onmouseout="out('-7795450821592681641');" style="">1107                  // for this entity.                                                                               </span>
<span class="6186895968667433501" onmouseenter="enter('6186895968667433501');" onmouseout="out('6186895968667433501');" style="">1108                  String entityType = null;                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1109 +                                                                                                                  </span>
<span class="3580632700461537732" onmouseenter="enter('3580632700461537732');" onmouseout="out('3580632700461537732');" style="">1110                  if (requestParams.containsKey(&quot;entityType&quot;)) {                                                    </span>
<span class="-1630371572733568969" onmouseenter="enter('-1630371572733568969');" onmouseout="out('-1630371572733568969');" style="">1111                      entityType = requestParams.get(&quot;entityType&quot;).get(0);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1112                  }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1113 +                                                                                                                  </span>
<span class="2600422776092116832" onmouseenter="enter('2600422776092116832');" onmouseout="out('2600422776092116832');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1114 +                entityType = determineEntityType(entityType, cmd);                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1115 +                                                                                                                  </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style="">1116                  if (StringUtils.isBlank(entityType)) {                                                            </span>
<span class="2333848870190395940" onmouseenter="enter('2333848870190395940');" onmouseout="out('2333848870190395940');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1117 -                    if (cmd.getPolymorphicEntities().getChildren().length == 0) {                                 </span>
<span class="2097783908693957449" onmouseenter="enter('2097783908693957449');" onmouseout="out('2097783908693957449');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1118 -                        entityType = cmd.getPolymorphicEntities().getFullyQualifiedClassname();                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1119 -                    } else {                                                                                      </span>
<span class="-6902702564943152777" onmouseenter="enter('-6902702564943152777');" onmouseout="out('-6902702564943152777');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1120 -                        entityType = getDefaultEntityType();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1121 -                    }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1122 -                } else {                                                                                          </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1123 -                    entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                          </span>
<span class="679217737668422196" onmouseenter="enter('679217737668422196');" onmouseout="out('679217737668422196');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1124 +                    return getModalForBlankEntityType(request, model, sectionKey, cmd);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125                  }                                                                                                 </span>
<span  style="">1126                                                                                                                    </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1127 -                if (StringUtils.isBlank(entityType)) {                                                            </span>
<span class="-5632901614715850082" onmouseenter="enter('-5632901614715850082');" onmouseout="out('-5632901614715850082');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1128 -                    List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());                </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1129 -                    model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                               </span>
<span class="-7344898891916261334" onmouseenter="enter('-7344898891916261334');" onmouseout="out('-7344898891916261334');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1130 -                    model.addAttribute(&quot;viewType&quot;, &quot;modal/entityTypeSelection&quot;);                                  </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1131 -                    model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());     </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1132 -                    String requestUri = request.getRequestURI();                                                  </span>
<span class="2670437920401576748" onmouseenter="enter('2670437920401576748');" onmouseout="out('2670437920401576748');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1133 -                    if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) {">1133 -                    if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) ðŸ”µ</abbr></span>
<span class="-901741071381030126" onmouseenter="enter('-901741071381030126');" onmouseout="out('-901741071381030126');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1134 -                        requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length());">1134 -                        requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.lengthðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1135 -                    }                                                                                             </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1136 -                    model.addAttribute(&quot;currentUri&quot;, requestUri);                                                 </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1137 -                    model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                  </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1138 -                    setModelAttributes(model, sectionKey);                                                        </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1139 -                    return &quot;modules/modalContainer&quot;;                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1140 -                } else {                                                                                          </span>
<span class="-58316621888079189" onmouseenter="enter('-58316621888079189');" onmouseout="out('-58316621888079189');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1141 -                    ppr = ppr.withCeilingEntityClassname(entityType);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1142 -                }                                                                                                 </span>
<span class="-58316621888079189" onmouseenter="enter('-58316621888079189');" onmouseout="out('-58316621888079189');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1143 +                ppr = ppr.withCeilingEntityClassname(entityType);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1144              }                                                                                                     </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1145          } else if (md instanceof MapMetadata) {                                                                   </span>
<span class="-8815560953057448419" onmouseenter="enter('-8815560953057448419');" onmouseout="out('-8815560953057448419');" style=""><abbr title="1146              ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionType(request,response,model,sectionKey,id,requestParams,(MapMetadata) md);">1146              ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionType(requestðŸ”µ</abbr></span>
<span class="6674469997589527714" onmouseenter="enter('6674469997589527714');" onmouseout="out('6674469997589527714');" style="">1147              if (result.equals(ExtensionResultStatusType.HANDLED)) {                                               </span>
<span class="1057476267973220454" onmouseenter="enter('1057476267973220454');" onmouseout="out('1057476267973220454');" style="">1148                  model.addAttribute(&quot;entityId&quot;, id);                                                               </span>
<span class="6720161805434028669" onmouseenter="enter('6720161805434028669');" onmouseout="out('6720161805434028669');" style="">1149                  model.addAttribute(&quot;sectionKey&quot;, sectionKey);                                                     </span>
<span class="-2435595331613687341" onmouseenter="enter('-2435595331613687341');" onmouseout="out('-2435595331613687341');" style="">1150                  model.addAttribute(&quot;collectionField&quot;, collectionField);                                           </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1151 -                return &quot;modules/modalContainer&quot;;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1152 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1153 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1154 -                                                                                                                  </span>
<span class="3903557829936589355" onmouseenter="enter('3903557829936589355');" onmouseout="out('3903557829936589355');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1155 -        //service.getContextSpecificRelationshipId(mainMetadata, entity, prefix);                                 </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1156 +                return MODAL_CONTAINER_VIEW;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1157 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1158 +        }                                                                                                         </span>
<span  style="">1159                                                                                                                    </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style="">1160          model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));                </span>
<span  style="">1161                                                                                                                    </span>
<span class="6180232744784249160" onmouseenter="enter('6180232744784249160');" onmouseout="out('6180232744784249160');" style=""><abbr title="1162          return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty, md, ppr, null, null);">1162          return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionPrðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1163 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1164 +                                                                                                                  </span>
<span class="-2220429573703069666" onmouseenter="enter('-2220429573703069666');" onmouseout="out('-2220429573703069666');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1165 +    protected String getModalForBlankEntityType(final HttpServletRequest request,                                 </span>
<span class="-5263780204247815298" onmouseenter="enter('-5263780204247815298');" onmouseout="out('-5263780204247815298');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1166 +            final Model model, final String sectionKey, final ClassMetadata cmd) {                                </span>
<span class="-2316979209506989336" onmouseenter="enter('-2316979209506989336');" onmouseout="out('-2316979209506989336');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1167 +        final List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());                      </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1168 +        model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                                           </span>
<span class="-7344898891916261334" onmouseenter="enter('-7344898891916261334');" onmouseout="out('-7344898891916261334');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1169 +        model.addAttribute(&quot;viewType&quot;, &quot;modal/entityTypeSelection&quot;);                                              </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1170 +        model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1171 +                                                                                                                  </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1172 +        String requestUri = request.getRequestURI();                                                              </span>
<span class="3126054482386392887" onmouseenter="enter('3126054482386392887');" onmouseout="out('3126054482386392887');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1173 +        final String contextPath = request.getContextPath();                                                      </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1174 +                                                                                                                  </span>
<span class="1413502326105343009" onmouseenter="enter('1413502326105343009');" onmouseout="out('1413502326105343009');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1175 +        if (!contextPath.equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(contextPath)) {                                     </span>
<span class="-5812874762785975576" onmouseenter="enter('-5812874762785975576');" onmouseout="out('-5812874762785975576');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1176 +            requestUri = requestUri.substring(contextPath.length() + 1, requestUri.length());                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1177 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1178 +                                                                                                                  </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1179 +        model.addAttribute(&quot;currentUri&quot;, requestUri);                                                             </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1180 +        model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                              </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1181 +        setModelAttributes(model, sectionKey);                                                                    </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1182 +                                                                                                                  </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1183 +        return MODAL_CONTAINER_VIEW;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1184      }                                                                                                             </span>
<span  style="">1185                                                                                                                    </span>
<span class="373770933822047642" onmouseenter="enter('373770933822047642');" onmouseout="out('373770933822047642');" style=""><abbr title="1186      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMethod.POST)">1186      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMethod.POSðŸ”µ</abbr></span>
<span class="-870509305261572147" onmouseenter="enter('-870509305261572147');" onmouseout="out('-870509305261572147');" style=""><abbr title="1187      public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1187      public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResponse resðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1188              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1189              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1190              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1191              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {                   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1192          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1193          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1194          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1195          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1195          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1196          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1197          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1198          Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                                        </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1199          if (md instanceof AdornedTargetCollectionMetadata) {                                                      </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1200              adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1200              adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassNaðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1201                      collectionField,                                                                              </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1202                      collectionItemId, responseMap);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1203          }                                                                                                         </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1204          return responseMap;                                                                                       </span>





















<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1205      }                                                                                                             </span>
<span  style="">1206                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1207      /**                                                                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1208       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1209       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1210       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1211       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1212       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1213       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1214       * @param collectionField                                                                                     </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style="">1215       * @param requestParams                                                                                       </span>
<span class="-4008047975326689228" onmouseenter="enter('-4008047975326689228');" onmouseout="out('-4008047975326689228');" style="">1216       * @return Json collection data                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1217       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1218       */                                                                                                           </span>
<span class="1491507797785399205" onmouseenter="enter('1491507797785399205');" onmouseout="out('1491507797785399205');" style="">1219      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize&quot;, method = RequestMethod.GET)                   </span>
<span class="3394871197523978831" onmouseenter="enter('3394871197523978831');" onmouseout="out('3394871197523978831');" style=""><abbr title="1220      public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HttpServletResponse response, Model model,">1220      public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HttpServletðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1221              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style="">1222              @PathVariable(value = &quot;id&quot;) String id,                                                                </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style="">1223              @PathVariable(value = &quot;collectionField&quot;) String collectionField,                                      </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style="">1224              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                         </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1225          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1226          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1227          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style="">1228          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,  </span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style="">1229                  sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                               </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1230          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1231          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span  style="">1232                                                                                                                    </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style="">1233          PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)                 </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style="">1234                  .withFilterAndSortCriteria(getCriteria(requestParams))                                            </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style="">1235                  .withStartIndex(getStartIndex(requestParams))                                                     </span>
<span class="-115113180096268460" onmouseenter="enter('-115113180096268460');" onmouseout="out('-115113180096268460');" style="">1236                  .withMaxIndex(getMaxIndex(requestParams));                                                        </span>
<span class="1857239787668878379" onmouseenter="enter('1857239787668878379');" onmouseout="out('1857239787668878379');" style=""><abbr title="1237          String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizeCustomCriteria()))">1237          String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizeCustomCrðŸ”µ</abbr></span>
<span class="8925682901439482297" onmouseenter="enter('8925682901439482297');" onmouseout="out('8925682901439482297');" style="">1238                  .toArray(String[]::new);                                                                          </span>
<span class="-226841645969872938" onmouseenter="enter('-226841645969872938');" onmouseout="out('-226841645969872938');" style="">1239          ppr = ppr.withCustomCriteria( both);                                                                      </span>
<span  style="">1240                                                                                                                    </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1241          if (md instanceof AdornedTargetCollectionMetadata) {                                                      </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1242              ppr.setOperationTypesOverride(null);                                                                  </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1243              ppr.setType(PersistencePackageRequest.Type.STANDARD);                                                 </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1244              ppr.setSectionEntityField(collectionField);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1245          }                                                                                                         </span>
<span  style="">1246                                                                                                                    </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1247          DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                                     </span>
<span  style="">1248                                                                                                                    </span>
<span class="9153362413933125536" onmouseenter="enter('9153362413933125536');" onmouseout="out('9153362413933125536');" style="">1249          return formService.buildSelectizeCollectionInfo(id, drs, collectionProperty, sectionKey, sectionCrumbs);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1250      }                                                                                                             </span>
<span  style="">1251                                                                                                                    </span>
<span class="-7439222430983038453" onmouseenter="enter('-7439222430983038453');" onmouseout="out('-7439222430983038453');" style="">1252      protected String[] buildSelectizeCustomCriteria() {                                                           </span>
<span class="-4161579644301235736" onmouseenter="enter('-4161579644301235736');" onmouseout="out('-4161579644301235736');" style="">1253          return new String[]{ IS_SELECTIZE_REQUEST };                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254      }                                                                                                             </span>
<span  style="">1255                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1256      /**                                                                                                           </span>
<span class="-7141111024633203374" onmouseenter="enter('-7141111024633203374');" onmouseout="out('-7141111024633203374');" style="">1257       * Adds the requested collection item via Selectize                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1258       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1259       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1260       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1261       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1262       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1263       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1264       * @param collectionField                                                                                     </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1265       * @param entityForm                                                                                          </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1266       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1267       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1268       */                                                                                                           </span>
<span class="4942792763487402415" onmouseenter="enter('4942792763487402415');" onmouseout="out('4942792763487402415');" style="">1269      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize-add&quot;, method = RequestMethod.POST)              </span>
<span class="8163998475300370418" onmouseenter="enter('8163998475300370418');" onmouseout="out('8163998475300370418');" style=""><abbr title="1270      public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1270      public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpServletResðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1271              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1272              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1273              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style="">1274              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {   </span>
<span class="-3120252458037341618" onmouseenter="enter('-3120252458037341618');" onmouseout="out('-3120252458037341618');" style="">1275          Map&lt;String, Object&gt; returnVal = new HashMap&lt;&gt;();                                                          </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1276          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1277          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1278          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1279          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1279          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1280          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1281                                                                                                                    </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1282          if (StringUtils.isBlank(entityForm.getEntityType())) {                                                    </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1283              FieldMetadata fmd = collectionProperty.getMetadata();                                                 </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1284              if (fmd instanceof BasicCollectionMetadata) {                                                         </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1285                  entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1286              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1287          }                                                                                                         </span>
<span  style="">1288                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1289          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1289          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style="">1290          ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                                    </span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1291          declareShouldIgnoreAdditionStatusFilter();                                                                </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1292          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span  style="">1293                                                                                                                    </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1294          // First, we must save the collection entity                                                              </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1295          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1295          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1296          Entity savedEntity = persistenceResponse.getEntity();                                                     </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1297          entityFormValidator.validate(entityForm, savedEntity, result);                                            </span>
<span  style="">1298                                                                                                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1299          if (result.hasErrors()) {                                                                                 </span>
<span class="842224369260603633" onmouseenter="enter('842224369260603633');" onmouseout="out('842224369260603633');" style="">1300              returnVal.put(&quot;error&quot;, result.getFieldError());                                                       </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1301              return returnVal;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1302          }                                                                                                         </span>
<span  style="">1303                                                                                                                    </span>
<span class="2610632867002015507" onmouseenter="enter('2610632867002015507');" onmouseout="out('2610632867002015507');" style="">1304          if (savedEntity.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                            </span>
<span class="-5383740165855607078" onmouseenter="enter('-5383740165855607078');" onmouseout="out('-5383740165855607078');" style="">1305              returnVal.put(&quot;alternateId&quot;, savedEntity.findProperty(ALTERNATE_ID_PROPERTY).getValue());             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1306          }                                                                                                         </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1307          return returnVal;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1308      }                                                                                                             </span>
<span  style="">1309                                                                                                                    </span>
<span class="5412920841771640365" onmouseenter="enter('5412920841771640365');" onmouseout="out('5412920841771640365');" style="">1310      protected void declareShouldIgnoreAdditionStatusFilter() {                                                    </span>
<span class="-4270951653865217168" onmouseenter="enter('-4270951653865217168');" onmouseout="out('-4270951653865217168');" style=""><abbr title="1311          Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().getAdditionalProperties();">1311          Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().getAdditioðŸ”µ</abbr></span>
<span class="-3723341051420574210" onmouseenter="enter('-3723341051420574210');" onmouseout="out('-3723341051420574210');" style="">1312          additionalProperties.put(&quot;shouldIgnoreAdditionStatusFilter&quot;, true);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1313      }                                                                                                             </span>
<span  style="">1314                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1315      /**                                                                                                           </span>
<span class="1325408264830379158" onmouseenter="enter('1325408264830379158');" onmouseout="out('1325408264830379158');" style="">1316       * Adds the requested collection item                                                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1317       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1318       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1319       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1320       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1321       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1322       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1323       * @param collectionField                                                                                     </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1324       * @param entityForm                                                                                          </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1325       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1326       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1327       */                                                                                                           </span>
<span class="-2068929988984533631" onmouseenter="enter('-2068929988984533631');" onmouseout="out('-2068929988984533631');" style="">1328      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.POST)                        </span>
<span class="-6457137423768539998" onmouseenter="enter('-6457137423768539998');" onmouseout="out('-6457137423768539998');" style="">1329      public String addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,        </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1330              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1331              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1332              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style="">1333              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1334          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1335          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1336          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1337          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1337          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1338          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1339                                                                                                                    </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1340          if (StringUtils.isBlank(entityForm.getEntityType())) {                                                    </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1341              FieldMetadata fmd = collectionProperty.getMetadata();                                                 </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1342              if (fmd instanceof BasicCollectionMetadata) {                                                         </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1343                  entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1344              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1345          }                                                                                                         </span>
<span  style="">1346                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1347          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1347          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1348          declareShouldIgnoreAdditionStatusFilter();                                                                </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1349          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1350          service.clearEntityManager();                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1351 +                                                                                                                  </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1352          // First, we must save the collection entity                                                              </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1353          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1353          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1354          Entity savedEntity = persistenceResponse.getEntity();                                                     </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1355          entityFormValidator.validate(entityForm, savedEntity, result);                                            </span>
<span  style="">1356                                                                                                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1357          if (result.hasErrors()) {                                                                                 </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1358              FieldMetadata md = collectionProperty.getMetadata();                                                  </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1359              ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                      </span>
<span class="4503162777083318611" onmouseenter="enter('4503162777083318611');" onmouseout="out('4503162777083318611');" style=""><abbr title="1360              return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty,">1360              return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectiðŸ”µ</abbr></span>
<span class="5267635088951466475" onmouseenter="enter('5267635088951466475');" onmouseout="out('5267635088951466475');" style="">1361                      md, ppr, entityForm, savedEntity);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1362          }                                                                                                         </span>
<span  style="">1363                                                                                                                    </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1364          // Next, we must get the new list grid that represents this collection                                    </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1365          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1365          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1366          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span  style="">1367                                                                                                                    </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1368          // We return the new list grid so that it can replace the currently visible one                           </span>
<span class="7250522969210652718" onmouseenter="enter('7250522969210652718');" onmouseout="out('7250522969210652718');" style="">1369          model.addAttribute(&quot;actualEntityId&quot;, id);                                                                 </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1370          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1371          return &quot;views/standaloneListGrid&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1372      }                                                                                                             </span>
<span  style="">1373                                                                                                                    </span>
<span class="-8003545521832011894" onmouseenter="enter('-8003545521832011894');" onmouseout="out('-8003545521832011894');" style="">1374      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/addEmpty&quot;, method = RequestMethod.POST)                   </span>
<span class="162700220048203938" onmouseenter="enter('162700220048203938');" onmouseout="out('162700220048203938');" style=""><abbr title="1375      public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1375      public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse response, MðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1376              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1377              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1378              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style="">1379              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1380          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1381          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1382          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1383          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1383          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1384          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1385                                                                                                                    </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1386          if (StringUtils.isBlank(entityForm.getEntityType())) {                                                    </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1387              FieldMetadata fmd = collectionProperty.getMetadata();                                                 </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1388              if (fmd instanceof BasicCollectionMetadata) {                                                         </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1389                  entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1390              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1391          }                                                                                                         </span>
<span  style="">1392                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1393          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1393          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1394          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span class="-5337934248855825573" onmouseenter="enter('-5337934248855825573');" onmouseout="out('-5337934248855825573');" style="">1395          entity.setIsPreAdd(true);                                                                                 </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1396          // First, we must save the collection entity                                                              </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1397          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1397          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1398          Entity savedEntity = persistenceResponse.getEntity();                                                     </span>
<span  style="">1399                                                                                                                    </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">1400          return new JsonResponse(response)                                                                         </span>
<span class="-645443211281069037" onmouseenter="enter('-645443211281069037');" onmouseout="out('-645443211281069037');" style="">1401                  .with(&quot;status&quot;, &quot;complete&quot;)                                                                       </span>
<span class="-7858493257692229655" onmouseenter="enter('-7858493257692229655');" onmouseout="out('-7858493257692229655');" style="">1402                  .with(&quot;id&quot;, savedEntity.findProperty(entityForm.getIdProperty()).getValue())                      </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">1403                  .done();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1404      }                                                                                                             </span>
<span  style="">1405                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1406      /**                                                                                                           </span>
<span class="-6140462241686685910" onmouseenter="enter('-6140462241686685910');" onmouseout="out('-6140462241686685910');" style=""><abbr title="1407       * Builds out all of the model information needed for showing the add modal for collection items on both the initial GET">1407       * Builds out all of the model information needed for showing the add modal for collection items on both the iðŸ”µ</abbr></span>
<span class="9052968863197617086" onmouseenter="enter('9052968863197617086');" onmouseout="out('9052968863197617086');" style="">1408       * as well as after a POST with validation errors                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1409       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1410       * @param request                                                                                             </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1411       * @param model                                                                                               </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1412       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1413       * @param collectionField                                                                                     </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style="">1414       * @param sectionKey                                                                                          </span>
<span class="-7927619294366963435" onmouseenter="enter('-7927619294366963435');" onmouseout="out('-7927619294366963435');" style="">1415       * @param collectionProperty                                                                                  </span>
<span class="-5426566728726502924" onmouseenter="enter('-5426566728726502924');" onmouseout="out('-5426566728726502924');" style="">1416       * @param md                                                                                                  </span>
<span class="4349163197755218506" onmouseenter="enter('4349163197755218506');" onmouseout="out('4349163197755218506');" style="">1417       * @param ppr                                                                                                 </span>
<span class="2094225145376343101" onmouseenter="enter('2094225145376343101');" onmouseout="out('2094225145376343101');" style="">1418       * @return the appropriate view to display for the modal                                                      </span>
<span class="450948407444547835" onmouseenter="enter('450948407444547835');" onmouseout="out('450948407444547835');" style=""><abbr title="1419       * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, EntityForm, BindingResult)}">1419       * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, EntityFðŸ”µ</abbr></span>
<span class="3423849059172457982" onmouseenter="enter('3423849059172457982');" onmouseout="out('3423849059172457982');" style=""><abbr title="1420       * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, MultiValueMap)}">1420       * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, MulðŸ”µ</abbr></span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1421       * @throws ServiceException                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1422       */                                                                                                           </span>
<span class="-4127331421111161450" onmouseenter="enter('-4127331421111161450');" onmouseout="out('-4127331421111161450');" style="">1423      protected String buildAddCollectionItemModel(HttpServletRequest request, HttpServletResponse response,        </span>
<span class="1808182660955839449" onmouseenter="enter('1808182660955839449');" onmouseout="out('1808182660955839449');" style="">1424              Model model, String id, String collectionField, String sectionKey, Property collectionProperty,       </span>
<span class="-5972908184992702659" onmouseenter="enter('-5972908184992702659');" onmouseout="out('-5972908184992702659');" style=""><abbr title="1425              FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throws ServiceException {">1425              FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throws ServiceEðŸ”µ</abbr></span>
<span  style="">1426                                                                                                                    </span>
<span class="-2054675889041043286" onmouseenter="enter('-2054675889041043286');" onmouseout="out('-2054675889041043286');" style=""><abbr title="1427          // For requests to add a new collection item include the main class that the subsequent request comes from.">1427          // For requests to add a new collection item include the main class that the subsequent request comes fromðŸ”µ</abbr></span>
<span class="7422952884503198827" onmouseenter="enter('7422952884503198827');" onmouseout="out('7422952884503198827');" style=""><abbr title="1428          // For instance, with basic collections we know the main associated class for a fetch through the ForeignKey">1428          // For instance, with basic collections we know the main associated class for a fetch through the ForeignKðŸ”µ</abbr></span>
<span class="5831142982738818001" onmouseenter="enter('5831142982738818001');" onmouseout="out('5831142982738818001');" style="">1429          // persistence item but map and adorned target lookups make a standard persistence request. This solution </span>
<span class="-3910081436214830376" onmouseenter="enter('-3910081436214830376');" onmouseout="out('-3910081436214830376');" style="">1430          // fixes all cases.                                                                                       </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1431          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-8007514226035577536" onmouseenter="enter('-8007514226035577536');" onmouseout="out('-8007514226035577536');" style="">1432          ppr.addCustomCriteria(&quot;owningClass=&quot; + mainClassName);                                                    </span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style="">1433          ppr.setAddOperationInspect(true);                                                                         </span>
<span  style="">1434                                                                                                                    </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1435          if (entityForm != null) {                                                                                 </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1436              entityForm.clearFieldsMap();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1437          }                                                                                                         </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1438          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1439          if (md instanceof BasicCollectionMetadata) {                                                              </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1440              BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                           </span>
<span  style="">1441                                                                                                                    </span>
<span class="5473401195179812518" onmouseenter="enter('5473401195179812518');" onmouseout="out('5473401195179812518');" style="">1442              // When adding items to basic collections, we will sometimes show a form to persist a new record      </span>
<span class="3817220166052180028" onmouseenter="enter('3817220166052180028');" onmouseout="out('3817220166052180028');" style="">1443              // and sometimes show a list grid to allow the user to associate an existing record.                  </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style="">1444              if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                           </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1445                  ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1445                  ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1446                  if (entityForm == null) {                                                                         </span>
<span class="509426350308747164" onmouseenter="enter('509426350308747164');" onmouseout="out('509426350308747164');" style="">1447                      entityForm = formService.createEntityForm(collectionMetadata,sectionCrumbs);                  </span>
<span class="2737056182573571703" onmouseenter="enter('2737056182573571703');" onmouseout="out('2737056182573571703');" style="">1448                      entityForm.setCeilingEntityClassname(ppr.getCeilingEntityClassname());                        </span>
<span class="2710161406345740991" onmouseenter="enter('2710161406345740991');" onmouseout="out('2710161406345740991');" style="">1449                      entityForm.setEntityType(ppr.getCeilingEntityClassname());                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1450                  } else {                                                                                          </span>
<span class="-5799643084244932085" onmouseenter="enter('-5799643084244932085');" onmouseout="out('-5799643084244932085');" style="">1451                      formService.populateEntityForm(collectionMetadata, entityForm, sectionCrumbs);                </span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1452                      formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1453                  }                                                                                                 </span>
<span class="-7315185064917392199" onmouseenter="enter('-7315185064917392199');" onmouseout="out('-7315185064917392199');" style=""><abbr title="1454                  formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntityClassname());">1454                  formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntityClassnamðŸ”µ</abbr></span>
<span class="1687533348183327340" onmouseenter="enter('1687533348183327340');" onmouseout="out('1687533348183327340');" style="">1455                  entityForm.getTabs().iterator().next().getIsVisible();                                            </span>
<span  style="">1456                                                                                                                    </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1457                  model.addAttribute(&quot;entityForm&quot;, entityForm);                                                     </span>
<span class="-2634442257361103125" onmouseenter="enter('-2634442257361103125');" onmouseout="out('-2634442257361103125');" style="">1458                  model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleAddEntity&quot;);                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1459              } else {                                                                                              </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1460                  DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                             </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1461                  ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1461                  ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sðŸ”µ</abbr></span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1462                  listGrid.setPathOverride(request.getRequestURL().toString());                                     </span>
<span  style="">1463                                                                                                                    </span>
<span class="6493773829436488040" onmouseenter="enter('6493773829436488040');" onmouseout="out('6493773829436488040');" style=""><abbr title="1464                  if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUP.equals(fmd.getAddMethodType())) {">1464                  if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUP.equals(fðŸ”µ</abbr></span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1465                      listGrid.removeAllRowActions();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1466                  }                                                                                                 </span>
<span  style="">1467                                                                                                                    </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1468                  model.addAttribute(&quot;listGrid&quot;, listGrid);                                                         </span>
<span class="-4615041483574305082" onmouseenter="enter('-4615041483574305082');" onmouseout="out('-4615041483574305082');" style="">1469                  model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleSelectEntity&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470              }                                                                                                     </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1471          } else if (md instanceof AdornedTargetCollectionMetadata) {                                               </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1472              AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                           </span>
<span  style="">1473                                                                                                                    </span>
<span class="-4994014003685781795" onmouseenter="enter('-4994014003685781795');" onmouseout="out('-4994014003685781795');" style=""><abbr title="1474              // Even though this field represents an adorned target collection, the list we want to show in the modal">1474              // Even though this field represents an adorned target collection, the list we want to show in the modðŸ”µ</abbr></span>
<span class="3396745077097675731" onmouseenter="enter('3396745077097675731');" onmouseout="out('3396745077097675731');" style="">1475              // is the standard list grid for the target entity of this field                                      </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1476              ppr.setOperationTypesOverride(null);                                                                  </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1477              ppr.setType(PersistencePackageRequest.Type.STANDARD);                                                 </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1478              ppr.setSectionEntityField(collectionField);                                                           </span>
<span  style="">1479                                                                                                                    </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1480              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1480              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span  style="">1481                                                                                                                    </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1482              DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                                 </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1483              ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1483              ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectiðŸ”µ</abbr></span>
<span class="1884537605734649521" onmouseenter="enter('1884537605734649521');" onmouseout="out('1884537605734649521');" style="">1484              listGrid.setSubCollectionFieldName(collectionField);                                                  </span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1485              listGrid.setPathOverride(request.getRequestURL().toString());                                         </span>
<span class="2370419943178688476" onmouseenter="enter('2370419943178688476');" onmouseout="out('2370419943178688476');" style="">1486              listGrid.setFriendlyName(collectionMetadata.getPolymorphicEntities().getFriendlyName());              </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1487              if (entityForm == null) {                                                                             </span>
<span class="-1229292684052118628" onmouseenter="enter('-1229292684052118628');" onmouseout="out('-1229292684052118628');" style=""><abbr title="1488                  entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, true);">1488                  entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-7486141420721649683" onmouseenter="enter('-7486141420721649683');" onmouseout="out('-7486141420721649683');" style="">1489                  entityForm.setCeilingEntityClassname(ppr.getAdornedList().getAdornedTargetEntityClassname());     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1490              } else {                                                                                              </span>
<span class="7685228187033982459" onmouseenter="enter('7685228187033982459');" onmouseout="out('7685228187033982459');" style=""><abbr title="1491                  formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectionCrumbs, true);">1491                  formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectionCrumbs, ðŸ”µ</abbr></span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1492                  formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1493              }                                                                                                     </span>
<span  style="">1494                                                                                                                    </span>
<span class="5169338689637413329" onmouseenter="enter('5169338689637413329');" onmouseout="out('5169338689637413329');" style="">1495              listGrid.setListGridType(ListGrid.Type.ADORNED);                                                      </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1496              for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                                </span>
<span class="8450559638200016101" onmouseenter="enter('8450559638200016101');" onmouseout="out('8450559638200016101');" style="">1497                  if (entry.getValue().getIsVisible()) {                                                            </span>
<span class="1657391013588898454" onmouseenter="enter('1657391013588898454');" onmouseout="out('1657391013588898454');" style="">1498                      listGrid.setListGridType(ListGrid.Type.ADORNED_WITH_FORM);                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1499                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1500                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1501              }                                                                                                     </span>
<span  style="">1502                                                                                                                    </span>
<span class="-757286675881477752" onmouseenter="enter('-757286675881477752');" onmouseout="out('-757286675881477752');" style="">1503              // This is part of an add, so we want to be able to filter/sort the listgrid                          </span>
<span class="3421525283764936758" onmouseenter="enter('3421525283764936758');" onmouseout="out('3421525283764936758');" style="">1504              listGrid.setIsSortable(false);                                                                        </span>
<span class="-2714096270635703274" onmouseenter="enter('-2714096270635703274');" onmouseout="out('-2714096270635703274');" style="">1505              listGrid.setCanFilterAndSort(true);                                                                   </span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1506              listGrid.removeAllRowActions();                                                                       </span>
<span  style="">1507                                                                                                                    </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1508              model.addAttribute(&quot;listGrid&quot;, listGrid);                                                             </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1509              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="-1071174233767081578" onmouseenter="enter('-1071174233767081578');" onmouseout="out('-1071174233767081578');" style="">1510              model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedSelectEntity&quot;);                                          </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1511          } else if (md instanceof MapMetadata) {                                                                   </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1512              MapMetadata fmd = (MapMetadata) md;                                                                   </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1513              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1513              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span  style="">1514                                                                                                                    </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1515              if (entityForm == null) {                                                                             </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style="">1516                  entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1517              } else {                                                                                              </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1518                  formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);         </span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1519                  formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1520              }                                                                                                     </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1521              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="-892500240032703395" onmouseenter="enter('-892500240032703395');" onmouseout="out('-892500240032703395');" style="">1522              model.addAttribute(&quot;viewType&quot;, &quot;modal/mapAddEntity&quot;);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1523          }                                                                                                         </span>
<span  style="">1524                                                                                                                    </span>
<span class="6074380392351813368" onmouseenter="enter('6074380392351813368');" onmouseout="out('6074380392351813368');" style="">1525          // Set the parent id on the entity form                                                                   </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1526          if (entityForm != null) {                                                                                 </span>
<span class="-3154229542834445725" onmouseenter="enter('-3154229542834445725');" onmouseout="out('-3154229542834445725');" style="">1527              entityForm.setParentId(id);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1528          }                                                                                                         </span>
<span  style="">1529                                                                                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1530          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="7819166863376485578" onmouseenter="enter('7819166863376485578');" onmouseout="out('7819166863376485578');" style="">1531          model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_COLLECTION_ITEM.getType());                     </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1532          model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                             </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1533          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1534 -        return &quot;modules/modalContainer&quot;;                                                                          </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1535 +        return MODAL_CONTAINER_VIEW;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1536      }                                                                                                             </span>
<span  style="">1537                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1538      /**                                                                                                           </span>
<span class="3915085583429756257" onmouseenter="enter('3915085583429756257');" onmouseout="out('3915085583429756257');" style="">1539       * Shows the appropriate modal dialog to edit the selected collection item                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1540       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1541       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1542       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1543       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1544       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1545       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1546       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1547       * @param collectionItemId                                                                                    </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1548       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1549       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1550       */                                                                                                           </span>
<span class="5941881897199209931" onmouseenter="enter('5941881897199209931');" onmouseout="out('5941881897199209931');" style=""><abbr title="1551      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.GET)">1551      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.ðŸ”µ</abbr></span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style="">1552      public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model, </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1553              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1554              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1555              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1556              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1557              @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                             </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1558          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1558          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateðŸ”µ</abbr></span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1559                  ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1560      }                                                                                                             </span>
<span  style="">1561                                                                                                                    </span>
<span class="-3777402830265989862" onmouseenter="enter('-3777402830265989862');" onmouseout="out('-3777402830265989862');" style="">1562      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.GET)          </span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style="">1563      public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model, </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1564              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1565              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1566              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1567              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {                   </span>
<span class="7585768018133278114" onmouseenter="enter('7585768018133278114');" onmouseout="out('7585768018133278114');" style="">1568          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,    </span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1569                  ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1570      }                                                                                                             </span>
<span  style="">1571                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1572      /**                                                                                                           </span>
<span class="6761933478321573145" onmouseenter="enter('6761933478321573145');" onmouseout="out('6761933478321573145');" style=""><abbr title="1573       * Shows the appropriate modal dialog to view the selected collection item. This will display the modal as readonly">1573       * Shows the appropriate modal dialog to view the selected collection item. This will display the modal as reaðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1574       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1575       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1576       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1577       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1578       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1579       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1580       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1581       * @param collectionItemId                                                                                    </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1582       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1583       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1584       */                                                                                                           </span>
<span class="5228464490364608791" onmouseenter="enter('5228464490364608791');" onmouseout="out('5228464490364608791');" style=""><abbr title="1585      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = RequestMethod.GET)">1585      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = RequestMeðŸ”µ</abbr></span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style="">1586      public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1587              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1588              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1589              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1590              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1591              @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                             </span>
<span class="7887850161668822106" onmouseenter="enter('7887850161668822106');" onmouseout="out('7887850161668822106');" style=""><abbr title="1592          String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1592          String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1593                  ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                                  </span>
<span  style="">1594                                                                                                                    </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1595          // Since this is a read-only view, actions don&#x27;t make sense in this context                               </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1596          EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                             </span>
<span class="7289613241506142720" onmouseenter="enter('7289613241506142720');" onmouseout="out('7289613241506142720');" style="">1597          addAuditableDisplayFields(ef);                                                                            </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1598          ef.removeAllActions();                                                                                    </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1599          ef.setReadOnly();                                                                                         </span>
<span  style="">1600                                                                                                                    </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1601          return returnPath;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1602      }                                                                                                             </span>
<span  style="">1603                                                                                                                    </span>
<span class="6858008221927215769" onmouseenter="enter('6858008221927215769');" onmouseout="out('6858008221927215769');" style="">1604      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view&quot;, method = RequestMethod.GET)     </span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style="">1605      public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1606              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1607              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1608              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1609              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {                   </span>
<span class="2521791674908842244" onmouseenter="enter('2521791674908842244');" onmouseout="out('2521791674908842244');" style=""><abbr title="1610          String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,">1610          String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1611                  ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                                  </span>
<span  style="">1612                                                                                                                    </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1613          // Since this is a read-only view, actions don&#x27;t make sense in this context                               </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1614          EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                             </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1615          ef.removeAllActions();                                                                                    </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1616          ef.setReadOnly();                                                                                         </span>
<span  style="">1617                                                                                                                    </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1618          return returnPath;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1619      }                                                                                                             </span>
<span  style="">1620                                                                                                                    </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1621      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1621      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVarðŸ”µ</abbr></span>
<span class="6852009337058352330" onmouseenter="enter('6852009337058352330');" onmouseout="out('6852009337058352330');" style=""><abbr title="1622              String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderType) throws ServiceException {">1622              String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderTypeðŸ”µ</abbr></span>
<span class="-2699953653458232908" onmouseenter="enter('-2699953653458232908');" onmouseout="out('-2699953653458232908');" style=""><abbr title="1623          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId, modalHeaderType, null, null);">1623          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1624      }                                                                                                             </span>
<span  style="">1625                                                                                                                    </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1626      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1626      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVarðŸ”µ</abbr></span>
<span class="-3706011950121400951" onmouseenter="enter('-3706011950121400951');" onmouseout="out('-3706011950121400951');" style=""><abbr title="1627              String id, String collectionField, String collectionItemId, String modalHeaderType) throws ServiceException {">1627              String id, String collectionField, String collectionItemId, String modalHeaderType) throws ServiceExceðŸ”µ</abbr></span>
<span class="-6899013896128397577" onmouseenter="enter('-6899013896128397577');" onmouseout="out('-6899013896128397577');" style=""><abbr title="1628          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, null, null);">1628          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1629      }                                                                                                             </span>
<span  style="">1630                                                                                                                    </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1631      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1631      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVarðŸ”µ</abbr></span>
<span class="4852573692087282601" onmouseenter="enter('4852573692087282601');" onmouseout="out('4852573692087282601');" style=""><abbr title="1632                  String id, String collectionField, String collectionItemId, String modalHeaderType, EntityForm entityForm, Entity entity) throws ServiceException {">1632                  String id, String collectionField, String collectionItemId, String modalHeaderType, EntityForm entðŸ”µ</abbr></span>
<span class="6580107021722154279" onmouseenter="enter('6580107021722154279');" onmouseout="out('6580107021722154279');" style=""><abbr title="1633          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, entityForm, entity);">1633          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1634      }                                                                                                             </span>
<span  style="">1635                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1636      /**                                                                                                           </span>
<span class="837861132196545598" onmouseenter="enter('837861132196545598');" onmouseout="out('837861132196545598');" style=""><abbr title="1637       * Shows the view and populates the model for updating a collection item. You can also pass in an entityform and entity">1637       * Shows the view and populates the model for updating a collection item. You can also pass in an entityform aðŸ”µ</abbr></span>
<span class="5643306329084644224" onmouseenter="enter('5643306329084644224');" onmouseout="out('5643306329084644224');" style="">1638       * which are optional. If they are not passed in then they are automatically looked up                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1639       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1640       * @param request                                                                                             </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1641       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1642       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1643       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1644       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1645       * @param collectionItemId                                                                                    </span>
<span class="-5929844173285242940" onmouseenter="enter('-5929844173285242940');" onmouseout="out('-5929844173285242940');" style="">1646       * @param modalHeaderType                                                                                     </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1647       * @param entityForm                                                                                          </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style="">1648       * @param entity                                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1649       * @return                                                                                                    </span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1650       * @throws ServiceException                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1651       */                                                                                                           </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1652 -    protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1652 -    protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVarðŸ”µ</abbr></span>
<span class="-7524579279249503431" onmouseenter="enter('-7524579279249503431');" onmouseout="out('-7524579279249503431');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1653 -            String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderType, EntityForm entityForm, Entity entity) throws ServiceException {">1653 -            String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderTypeðŸ”µ</abbr></span>
<span class="-7113907340183053787" onmouseenter="enter('-7113907340183053787');" onmouseout="out('-7113907340183053787');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1654 +    protected String showViewUpdateCollection(HttpServletRequest request,                                         </span>
<span class="-8519940996091909282" onmouseenter="enter('-8519940996091909282');" onmouseout="out('-8519940996091909282');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1655 +            Model model,                                                                                          </span>
<span class="233550986134862533" onmouseenter="enter('233550986134862533');" onmouseout="out('233550986134862533');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1656 +            Map&lt;String, String&gt; pathVars,                                                                         </span>
<span class="462404651577214798" onmouseenter="enter('462404651577214798');" onmouseout="out('462404651577214798');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1657 +            String id,                                                                                            </span>
<span class="-5551105944774799057" onmouseenter="enter('-5551105944774799057');" onmouseout="out('-5551105944774799057');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1658 +            String collectionField,                                                                               </span>
<span class="-7138244874257810737" onmouseenter="enter('-7138244874257810737');" onmouseout="out('-7138244874257810737');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1659 +            String collectionItemId,                                                                              </span>
<span class="7426253478403504017" onmouseenter="enter('7426253478403504017');" onmouseout="out('7426253478403504017');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1660 +            String alternateId,                                                                                   </span>
<span class="2900696252953040190" onmouseenter="enter('2900696252953040190');" onmouseout="out('2900696252953040190');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1661 +            String modalHeaderType,                                                                               </span>
<span class="5597094285729719755" onmouseenter="enter('5597094285729719755');" onmouseout="out('5597094285729719755');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1662 +            EntityForm entityForm,                                                                                </span>
<span class="3632664887850253049" onmouseenter="enter('3632664887850253049');" onmouseout="out('3632664887850253049');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1663 +            Entity entity) throws ServiceException {                                                              </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1664          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1665          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1666          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1667          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1667          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1668          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1669          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span class="-2889762407992276786" onmouseenter="enter('-2889762407992276786');" onmouseout="out('-2889762407992276786');" style="">1670          SectionCrumb nextCrumb = new SectionCrumb();                                                              </span>
<span class="4180533444018328805" onmouseenter="enter('4180533444018328805');" onmouseout="out('4180533444018328805');" style="">1671          if (md instanceof MapMetadata) {                                                                          </span>
<span class="-382349485821163458" onmouseenter="enter('-382349485821163458');" onmouseout="out('-382349485821163458');" style="">1672              nextCrumb.setSectionIdentifier(((MapMetadata) md).getValueClassName());                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1673          } else {                                                                                                  </span>
<span class="1919475910220989527" onmouseenter="enter('1919475910220989527');" onmouseout="out('1919475910220989527');" style="">1674              nextCrumb.setSectionIdentifier(((CollectionMetadata) md).getCollectionCeilingEntity());               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1675          }                                                                                                         </span>
<span class="3745082800889494172" onmouseenter="enter('3745082800889494172');" onmouseout="out('3745082800889494172');" style="">1676          nextCrumb.setSectionId(collectionItemId);                                                                 </span>
<span class="7047611651117816234" onmouseenter="enter('7047611651117816234');" onmouseout="out('7047611651117816234');" style="">1677          if (!sectionCrumbs.contains(nextCrumb)) {                                                                 </span>
<span class="-6316688126111539901" onmouseenter="enter('-6316688126111539901');" onmouseout="out('-6316688126111539901');" style="">1678              sectionCrumbs.add(nextCrumb);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1679          }                                                                                                         </span>
<span  style="">1680                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1681          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1681          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1682          Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1682          Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0ðŸ”µ</abbr></span>
<span  style="">1683                                                                                                                    </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1684          ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                          </span>
<span  style="">1685                                                                                                                    </span>
<span class="4300500518149699432" onmouseenter="enter('4300500518149699432');" onmouseout="out('4300500518149699432');" style="">1686          if (md instanceof BasicCollectionMetadata &amp;&amp;                                                              </span>
<span class="3179311364823579995" onmouseenter="enter('3179311364823579995');" onmouseout="out('3179311364823579995');" style="">1687                  (((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST) ||               </span>
<span class="-5057368181444983975" onmouseenter="enter('-5057368181444983975');" onmouseout="out('-5057368181444983975');" style="">1688                          ((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST_EMPTY))) { </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1689              BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                           </span>
<span  style="">1690                                                                                                                    </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1691              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1691              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1692              if (entity == null) {                                                                                 </span>
<span class="4597721164047448054" onmouseenter="enter('4597721164047448054');" onmouseout="out('4597721164047448054');" style=""><abbr title="1693                  entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResultSet().getRecords()[0];">1693                  entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResultSet().ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1694              }                                                                                                     </span>
<span  style="">1695                                                                                                                    </span>
<span class="-7942197356638317765" onmouseenter="enter('-7942197356638317765');" onmouseout="out('-7942197356638317765');" style="">1696              String currentTabName = getCurrentTabName(pathVars, collectionMetadata);                              </span>
<span class="9017537031938626444" onmouseenter="enter('9017537031938626444');" onmouseout="out('9017537031938626444');" style=""><abbr title="1697              Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetadata, entity, sectionCrumbs, currentTabName);">1697              Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetadata, entðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1698 -            if (entityForm == null) {                                                                             </span>
<span class="-3582618966464933757" onmouseenter="enter('-3582618966464933757');" onmouseout="out('-3582618966464933757');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1699 -                entityForm = formService.createEntityForm(collectionMetadata, entity, subRecordsMap, sectionCrumbs);">1699 -                entityForm = formService.createEntityForm(collectionMetadata, entity, subRecordsMap, sectionCrumbsðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1700 -            } else {                                                                                              </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1701 -                entityForm.clearFieldsMap();                                                                      </span>
<span class="1859879359946483810" onmouseenter="enter('1859879359946483810');" onmouseout="out('1859879359946483810');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1702 -                formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm, sectionCrumbs);">1702 -                formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm, sectionCrumbðŸ”µ</abbr></span>
<span class="5496760487980360743" onmouseenter="enter('5496760487980360743');" onmouseout="out('5496760487980360743');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1703 -                //remove all the actions since we&#x27;re not trying to redisplay them on the form                     </span>
<span class="-6469844840195102556" onmouseenter="enter('-6469844840195102556');" onmouseout="out('-6469844840195102556');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1704 -                entityForm.removeAllActions();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1705 -            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1706 +                                                                                                                  </span>
<span class="348957922752701667" onmouseenter="enter('348957922752701667');" onmouseout="out('348957922752701667');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1707 +            entityForm = reinitializeEntityForm(entityForm, collectionMetadata, entity,                           </span>
<span class="-6666340752275266103" onmouseenter="enter('-6666340752275266103');" onmouseout="out('-6666340752275266103');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1708 +                    subRecordsMap, sectionCrumbs);                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1709 +                                                                                                                  </span>
<span class="-3892497188964586657" onmouseenter="enter('-3892497188964586657');" onmouseout="out('-3892497188964586657');" style="">1710              entityForm.removeAction(DefaultEntityFormActions.DELETE);                                             </span>
<span class="6748640999540281749" onmouseenter="enter('6748640999540281749');" onmouseout="out('6748640999540281749');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1711 +            entityForm.removeAction(DefaultEntityFormActions.DUPLICATE);                                          </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1712 +                                                                                                                  </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1713              addAuditableDisplayFields(entityForm);                                                                </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1714              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="2070483683171714322" onmouseenter="enter('2070483683171714322');" onmouseout="out('2070483683171714322');" style="">1715              model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleEditEntity&quot;);                                             </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1716          } else if (md instanceof AdornedTargetCollectionMetadata) {                                               </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1717              AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                           </span>
<span  style="">1718                                                                                                                    </span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1719              if (entity == null) {                                                                                 </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style="">1720                  entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,      </span>
<span class="-2961516840614790290" onmouseenter="enter('-2961516840614790290');" onmouseout="out('-2961516840614790290');" style="">1721                      collectionItemId, sectionCrumbs, alternateId).getDynamicResultSet().getRecords()[0];          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1722              }                                                                                                     </span>
<span  style="">1723                                                                                                                    </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1724              boolean populateTypeAndId = true;                                                                     </span>
<span class="921756716374353809" onmouseenter="enter('921756716374353809');" onmouseout="out('921756716374353809');" style="">1725              boolean isViewCollectionItem = ModalHeaderType.VIEW_COLLECTION_ITEM.getType().equals(modalHeaderType);</span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1726              if (entityForm == null) {                                                                             </span>
<span class="-8902040329002931298" onmouseenter="enter('-8902040329002931298');" onmouseout="out('-8902040329002931298');" style=""><abbr title="1727                  entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, sectionCrumbs, false);">1727                  entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem,ðŸ”µ</abbr></span>
<span class="-4655192855930300298" onmouseenter="enter('-4655192855930300298');" onmouseout="out('-4655192855930300298');" style="">1728                  entityForm.removeAction(DefaultAdornedEntityFormActions.Add);                                     </span>
<span class="1109271490036416226" onmouseenter="enter('1109271490036416226');" onmouseout="out('1109271490036416226');" style="">1729                  entityForm.addAction(DefaultAdornedEntityFormActions.Save);                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1730              } else {                                                                                              </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1731                  entityForm.clearFieldsMap();                                                                      </span>
<span class="2583214667713512490" onmouseenter="enter('2583214667713512490');" onmouseout="out('2583214667713512490');" style="">1732                  String entityType = entityForm.getEntityType();                                                   </span>
<span class="-6584758178229470245" onmouseenter="enter('-6584758178229470245');" onmouseout="out('-6584758178229470245');" style=""><abbr title="1733                  formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entityForm, sectionCrumbs, false);">1733                  formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entityForm, ðŸ”µ</abbr></span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style="">1734                  entityForm.setEntityType(entityType);                                                             </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1735                  populateTypeAndId = false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1736              }                                                                                                     </span>
<span  style="">1737                                                                                                                    </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1738              Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                                    </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1739              adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1739              adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassNaðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1740                      collectionField,                                                                              </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1741                      collectionItemId, responseMap);                                                               </span>
<span  style="">1742                                                                                                                    </span>
<span class="-3972135447881278836" onmouseenter="enter('-3972135447881278836');" onmouseout="out('-3972135447881278836');" style=""><abbr title="1743              //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and Id is used.">1743              //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and Id is useðŸ”µ</abbr></span>
<span class="-8007896595560301001" onmouseenter="enter('-8007896595560301001');" onmouseout="out('-8007896595560301001');" style="">1744              //It should be the entity and referenced Id of the adorned entity (not the target entity and Id).     </span>
<span class="316997016312344867" onmouseenter="enter('316997016312344867');" onmouseout="out('316997016312344867');" style="">1745              entityForm.setTranslationCeilingEntity(entityForm.getEntityType());                                   </span>
<span class="-4512360180775881719" onmouseenter="enter('-4512360180775881719');" onmouseout="out('-4512360180775881719');" style="">1746              entityForm.setTranslationId(alternateId);                                                             </span>
<span  style="">1747                                                                                                                    </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style="">1748              ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();           </span>
<span class="-1465905251928147670" onmouseenter="enter('-1465905251928147670');" onmouseout="out('-1465905251928147670');" style="">1749              for (String field : fmd.getMaintainedAdornedTargetFields()) {                                         </span>
<span class="-2821179418575098708" onmouseenter="enter('-2821179418575098708');" onmouseout="out('-2821179418575098708');" style="">1750                  if (responseMap.containsKey(field) &amp;&amp; responseMap.containsKey(&quot;autoSubmit&quot;)) {                    </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1751                      continue;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1752                  }                                                                                                 </span>
<span class="-3390991397790942785" onmouseenter="enter('-3390991397790942785');" onmouseout="out('-3390991397790942785');" style="">1753                  Property p = cmd.getPMap().get(field);                                                            </span>
<span class="3110636146594998978" onmouseenter="enter('3110636146594998978');" onmouseout="out('3110636146594998978');" style="">1754                  if (p != null &amp;&amp; p.getMetadata() instanceof AdornedTargetCollectionMetadata) {                    </span>
<span class="-1526293730221303684" onmouseenter="enter('-1526293730221303684');" onmouseout="out('-1526293730221303684');" style=""><abbr title="1755                      // Because we&#x27;re dealing with a nested adorned target collection, this particular request must act">1755                      // Because we&#x27;re dealing with a nested adorned target collection, this particular request mustðŸ”µ</abbr></span>
<span class="5008429970050276114" onmouseenter="enter('5008429970050276114');" onmouseout="out('5008429970050276114');" style=""><abbr title="1756                      // directly on the first adorned target collection. Because of this, we need the actual id property">1756                      // directly on the first adorned target collection. Because of this, we need the actual id proðŸ”µ</abbr></span>
<span class="-7713892716328274330" onmouseenter="enter('-7713892716328274330');" onmouseout="out('-7713892716328274330');" style=""><abbr title="1757                      // from the entity that models the adorned target relationship, and not the id of the target object.">1757                      // from the entity that models the adorned target relationship, and not the id of the target oðŸ”µ</abbr></span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1758                      Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1758                      Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style="">1759                      DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,      </span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1760                              alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();                 </span>
<span  style="">1761                                                                                                                    </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1762                      ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1762                      ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, pðŸ”µ</abbr></span>
<span class="-6504403122086949696" onmouseenter="enter('-6504403122086949696');" onmouseout="out('-6504403122086949696');" style="">1763                              ppr.getAdornedList().getAdornedTargetEntityClassname(), sectionCrumbs);               </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1764                      listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                                 </span>
<span  style="">1765                                                                                                                    </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1766                      if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {                </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1767                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1767                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1768                      } else {                                                                                      </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1769                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1769                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1770                      }                                                                                             </span>
<span class="2712626054905490038" onmouseenter="enter('2712626054905490038');" onmouseout="out('2712626054905490038');" style="">1771                  } else if (p != null &amp;&amp; p.getMetadata() instanceof MapMetadata) {                                 </span>
<span class="-388196981394792667" onmouseenter="enter('-388196981394792667');" onmouseout="out('-388196981394792667');" style="">1772                      // See above comment for AdornedTargetCollectionMetadata                                      </span>
<span class="-9194902891343883685" onmouseenter="enter('-9194902891343883685');" onmouseout="out('-9194902891343883685');" style="">1773                      MapMetadata mmd = (MapMetadata) p.getMetadata();                                              </span>
<span  style="">1774                                                                                                                    </span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1775                      Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1775                      Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style="">1776                      DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,      </span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1777                              alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();                 </span>
<span  style="">1778                                                                                                                    </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1779                      ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1779                      ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, pðŸ”µ</abbr></span>
<span class="-6515044965274807025" onmouseenter="enter('-6515044965274807025');" onmouseout="out('-6515044965274807025');" style="">1780                              mmd.getTargetClass(), sectionCrumbs);                                                 </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1781                      listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                                 </span>
<span  style="">1782                                                                                                                    </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1783                      if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {                </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1784                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1784                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1785                      } else {                                                                                      </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1786                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1786                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1787                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1788                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1789              }                                                                                                     </span>
<span  style="">1790                                                                                                                    </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style="">1791              formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);       </span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">1792              formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());                </span>
<span  style="">1793                                                                                                                    </span>
<span class="7046829326366784672" onmouseenter="enter('7046829326366784672');" onmouseout="out('7046829326366784672');" style="">1794              boolean atLeastOneBasicField = false;                                                                 </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1795              for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                                </span>
<span class="-3942382004211496115" onmouseenter="enter('-3942382004211496115');" onmouseout="out('-3942382004211496115');" style=""><abbr title="1796                  if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName()) &amp;&amp; !responseMap.containsKey(&quot;autoSubmit&quot;)) {">1796                  if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName()) &amp;&amp; !reðŸ”µ</abbr></span>
<span class="3115307772764059490" onmouseenter="enter('3115307772764059490');" onmouseout="out('3115307772764059490');" style="">1797                      atLeastOneBasicField = true;                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1798                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1799                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1800              }                                                                                                     </span>
<span class="4813170790944841786" onmouseenter="enter('4813170790944841786');" onmouseout="out('4813170790944841786');" style="">1801              if (!atLeastOneBasicField) {                                                                          </span>
<span class="3364274495995556597" onmouseenter="enter('3364274495995556597');" onmouseout="out('3364274495995556597');" style="">1802                  entityForm.removeAction(DefaultEntityFormActions.SAVE);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1803              }                                                                                                     </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1804              addAuditableDisplayFields(entityForm);                                                                </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1805              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="3009851293217081678" onmouseenter="enter('3009851293217081678');" onmouseout="out('3009851293217081678');" style="">1806              model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedEditEntity&quot;);                                            </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1807          } else if (md instanceof MapMetadata) {                                                                   </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1808              MapMetadata fmd = (MapMetadata) md;                                                                   </span>
<span  style="">1809                                                                                                                    </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1810              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1810              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1811              if (entity == null) {                                                                                 </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style="">1812                  entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,      </span>
<span class="-2813813427236819301" onmouseenter="enter('-2813813427236819301');" onmouseout="out('-2813813427236819301');" style="">1813                      collectionItemId, sectionCrumbs, null).getEntity();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1814              }                                                                                                     </span>
<span  style="">1815                                                                                                                    </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1816              boolean populateTypeAndId = true;                                                                     </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1817              if (entityForm == null) {                                                                             </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style="">1818                  entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1819              } else {                                                                                              </span>
<span class="-2965751497501930249" onmouseenter="enter('-2965751497501930249');" onmouseout="out('-2965751497501930249');" style="">1820                  //save off the prior key before clearing out the fields map as it will not appear                 </span>
<span class="-4459883460939835415" onmouseenter="enter('-4459883460939835415');" onmouseout="out('-4459883460939835415');" style="">1821                  //back on the saved entity                                                                        </span>
<span class="-8617997777962995342" onmouseenter="enter('-8617997777962995342');" onmouseout="out('-8617997777962995342');" style="">1822                  String priorKey = entityForm.findField(&quot;priorKey&quot;).getValue();                                    </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1823                  entityForm.clearFieldsMap();                                                                      </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1824                  formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);         </span>
<span class="-5674534809018144237" onmouseenter="enter('-5674534809018144237');" onmouseout="out('-5674534809018144237');" style="">1825                  entityForm.findField(&quot;priorKey&quot;).setValue(priorKey);                                              </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1826                  populateTypeAndId = false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1827              }                                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1828              try {                                                                                                 </span>
<span class="-5619455120098479761" onmouseenter="enter('-5619455120098479761');" onmouseout="out('-5619455120098479761');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1829 -                entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredField(fmd.getToOneTargetProperty()).getType().getName());">1829 -                entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredField(fmdðŸ”µ</abbr></span>
<span class="1682170733642187652" onmouseenter="enter('1682170733642187652');" onmouseout="out('1682170733642187652');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1830 +                if (StringUtils.isNotEmpty(fmd.getToOneTargetProperty())) {                                       </span>
<span class="-5619455120098479761" onmouseenter="enter('-5619455120098479761');" onmouseout="out('-5619455120098479761');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="1831 +                    entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredField(fmd.getToOneTargetProperty()).getType().getName());">1831 +                    entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredFieldðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1832 +                }                                                                                                 </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1833              } catch (Exception e) {                                                                               </span>
<span class="4149062910666573697" onmouseenter="enter('4149062910666573697');" onmouseout="out('4149062910666573697');" style="">1834                  LOG.error(e);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1835              }                                                                                                     </span>
<span class="-1018820723400133408" onmouseenter="enter('-1018820723400133408');" onmouseout="out('-1018820723400133408');" style=""><abbr title="1836              String entityId = (fmd.getToOneTargetProperty().equals(&quot;&quot;) ? &quot;id&quot; : fmd.getToOneTargetProperty() + &quot;.id&quot;);">1836              String entityId = (fmd.getToOneTargetProperty().equals(&quot;&quot;) ? &quot;id&quot; : fmd.getToOneTargetProperty() + &quot;.iðŸ”µ</abbr></span>
<span class="423419420192712450" onmouseenter="enter('423419420192712450');" onmouseout="out('423419420192712450');" style="">1837              entityForm.setTranslationId(entity.getPMap().get(entityId).getValue());                               </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style="">1838              formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);       </span>
<span class="-7934209705949108459" onmouseenter="enter('-7934209705949108459');" onmouseout="out('-7934209705949108459');" style="">1839              formService.populateMapEntityFormFields(entityForm, entity);                                          </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style="">1840              formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);       </span>
<span class="-7934209705949108459" onmouseenter="enter('-7934209705949108459');" onmouseout="out('-7934209705949108459');" style="">1841              formService.populateMapEntityFormFields(entityForm, entity);                                          </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1842              addAuditableDisplayFields(entityForm);                                                                </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1843              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="5184741693677662709" onmouseenter="enter('5184741693677662709');" onmouseout="out('5184741693677662709');" style="">1844              model.addAttribute(&quot;viewType&quot;, &quot;modal/mapEditEntity&quot;);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1845          }                                                                                                         </span>
<span  style="">1846                                                                                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1847          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="5715532112666019496" onmouseenter="enter('5715532112666019496');" onmouseout="out('5715532112666019496');" style="">1848          model.addAttribute(&quot;modalHeaderType&quot;, modalHeaderType);                                                   </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1849          model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                             </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1850          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1851 -        return &quot;modules/modalContainer&quot;;                                                                          </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1852 +        return MODAL_CONTAINER_VIEW;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1853 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1854 +                                                                                                                  </span>
<span class="-6629135688250429856" onmouseenter="enter('-6629135688250429856');" onmouseout="out('-6629135688250429856');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1855 +    protected EntityForm reinitializeEntityForm(final EntityForm entityForm,                                      </span>
<span class="2488527282562212871" onmouseenter="enter('2488527282562212871');" onmouseout="out('2488527282562212871');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1856 +            final ClassMetadata collectionMetadata,                                                               </span>
<span class="6244041270191906475" onmouseenter="enter('6244041270191906475');" onmouseout="out('6244041270191906475');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1857 +            final Entity entity,                                                                                  </span>
<span class="4210642227221008869" onmouseenter="enter('4210642227221008869');" onmouseout="out('4210642227221008869');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1858 +            final Map&lt;String, DynamicResultSet&gt; subRecordsMap,                                                    </span>
<span class="7695373887778905827" onmouseenter="enter('7695373887778905827');" onmouseout="out('7695373887778905827');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1859 +            final List&lt;SectionCrumb&gt; sectionCrumbs) throws ServiceException {                                     </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1860 +        if (entityForm == null) {                                                                                 </span>
<span class="5007761642077021691" onmouseenter="enter('5007761642077021691');" onmouseout="out('5007761642077021691');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1861 +            return formService                                                                                    </span>
<span class="2427987523723463928" onmouseenter="enter('2427987523723463928');" onmouseout="out('2427987523723463928');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1862 +                    .createEntityForm(collectionMetadata, entity, subRecordsMap, sectionCrumbs);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1863 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1864 +                                                                                                                  </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1865 +        entityForm.clearFieldsMap();                                                                              </span>
<span class="524385531586817703" onmouseenter="enter('524385531586817703');" onmouseout="out('524385531586817703');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1866 +        formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm,                     </span>
<span class="2971672777452209099" onmouseenter="enter('2971672777452209099');" onmouseout="out('2971672777452209099');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1867 +                sectionCrumbs);                                                                                   </span>
<span class="5496760487980360743" onmouseenter="enter('5496760487980360743');" onmouseout="out('5496760487980360743');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1868 +        //remove all the actions since we&#x27;re not trying to redisplay them on the form                             </span>
<span class="-6469844840195102556" onmouseenter="enter('-6469844840195102556');" onmouseout="out('-6469844840195102556');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1869 +        entityForm.removeAllActions();                                                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1870 +                                                                                                                  </span>
<span class="6548609876597156982" onmouseenter="enter('6548609876597156982');" onmouseout="out('6548609876597156982');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1871 +        return entityForm;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1872      }                                                                                                             </span>
<span  style="">1873                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1874      /**                                                                                                           </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1875       * Updates the specified collection item                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1876       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1877       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1878       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1879       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1880       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1881       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1882       * @param collectionField                                                                                     </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1883       * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1883       * @param collectionItemId the collection primary key value (in the case of adorned target collection, this isðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1884       * @param entityForm                                                                                          </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1885       * @param result                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1886       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1887       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1888       */                                                                                                           </span>
<span class="1690395709289479208" onmouseenter="enter('1690395709289479208');" onmouseout="out('1690395709289479208');" style="">1889      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.POST)         </span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style="">1890      public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,     </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1891              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1892              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1893              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1894              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1895              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                            </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1896              BindingResult result) throws Exception {                                                              </span>
<span class="454845068344591329" onmouseenter="enter('454845068344591329');" onmouseout="out('454845068344591329');" style=""><abbr title="1897          return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, entityForm, null, result);">1897          return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, entðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1898      }                                                                                                             </span>
<span  style="">1899                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1900      /**                                                                                                           </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1901       * Updates the specified collection item                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1902       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1903       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1904       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1905       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1906       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1907       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1908       * @param collectionField                                                                                     </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1909       * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1909       * @param collectionItemId the collection primary key value (in the case of adorned target collection, this isðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1910       * @param entityForm                                                                                          </span>
<span class="4031667150854181086" onmouseenter="enter('4031667150854181086');" onmouseout="out('4031667150854181086');" style=""><abbr title="1911       * @param alternateId in the case of adorned target collections, this is the primary key value of the collection member">1911       * @param alternateId in the case of adorned target collections, this is the primary key value of the collectiðŸ”µ</abbr></span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1912       * @param result                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1913       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1914       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1915       */                                                                                                           </span>
<span class="6716233350399381715" onmouseenter="enter('6716233350399381715');" onmouseout="out('6716233350399381715');" style=""><abbr title="1916      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.POST)">1916      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.ðŸ”µ</abbr></span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style="">1917      public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,     </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1918              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1919              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1920              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1921              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1922              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                            </span>
<span class="-5366992345424767315" onmouseenter="enter('-5366992345424767315');" onmouseout="out('-5366992345424767315');" style="">1923              @PathVariable(value=&quot;alternateId&quot;) String alternateId,                                                </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1924              BindingResult result) throws Exception {                                                              </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1925          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1926          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1927          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1928          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1928          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1929          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1930                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1931          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1931          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1932          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1933          service.clearEntityManager();                                                                             </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1934          // First, we must save the collection entity                                                              </span>
<span class="3262117580653454816" onmouseenter="enter('3262117580653454816');" onmouseout="out('3262117580653454816');" style=""><abbr title="1935          PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, collectionItemId, alternateId, sectionCrumbs);">1935          PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1936          Entity savedEntity = persistenceResponse.getEntity();                                                     </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1937          entityFormValidator.validate(entityForm, savedEntity, result);                                            </span>
<span  style="">1938                                                                                                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1939          if (result.hasErrors()) {                                                                                 </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1940              return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1940              return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alterðŸ”µ</abbr></span>
<span class="-1009973048758571460" onmouseenter="enter('-1009973048758571460');" onmouseout="out('-1009973048758571460');" style="">1941                      ModalHeaderType.UPDATE_COLLECTION_ITEM.getType(), entityForm, savedEntity);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1942          }                                                                                                         </span>
<span  style="">1943                                                                                                                    </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1944          // Next, we must get the new list grid that represents this collection                                    </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1945          // We return the new list grid so that it can replace the currently visible one                           </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1946          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1946          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persðŸ”µ</abbr></span>
<span  style="">1947                                                                                                                    </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1948          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1949          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1950          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1951          return &quot;views/standaloneListGrid&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1952      }                                                                                                             </span>
<span  style="">1953                                                                                                                    </span>
<span class="-2715204734461845190" onmouseenter="enter('-2715204734461845190');" onmouseout="out('-2715204734461845190');" style="">1954      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMethod.POST)</span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">1955      public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,             </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">1956              HttpServletResponse response, Model model,                                                            </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1957              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1958              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1959              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1960              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="6458961487045284345" onmouseenter="enter('6458961487045284345');" onmouseout="out('6458961487045284345');" style="">1961              @RequestParam(value=&quot;newSequence&quot;) String newSequence) throws Exception {                             </span>
<span class="-6477101312884008952" onmouseenter="enter('-6477101312884008952');" onmouseout="out('-6477101312884008952');" style=""><abbr title="1962          return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collectionItemId, newSequence, null);">1962          return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collectionIteðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1963      }                                                                                                             </span>
<span  style="">1964                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1965      /**                                                                                                           </span>
<span class="-7447609122613552365" onmouseenter="enter('-7447609122613552365');" onmouseout="out('-7447609122613552365');" style="">1966       * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target collections </span>
<span class="5163972519999742424" onmouseenter="enter('5163972519999742424');" onmouseout="out('5163972519999742424');" style="">1967       * where a sort field is specified -- any other invocation is incorrect and will result in an exception.      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1968       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1969       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1970       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1971       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1972       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1973       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1974       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1975       * @param collectionItemId                                                                                    </span>
<span class="8542418631474543845" onmouseenter="enter('8542418631474543845');" onmouseout="out('8542418631474543845');" style="">1976       * @return an object explaining the state of the operation                                                    </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1977       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1978       */                                                                                                           </span>
<span class="1279723180837283801" onmouseenter="enter('1279723180837283801');" onmouseout="out('1279723180837283801');" style=""><abbr title="1979      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, method = RequestMethod.POST)">1979      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, method = RequeðŸ”µ</abbr></span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">1980      public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,             </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">1981              HttpServletResponse response, Model model,                                                            </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1982              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1983              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1984              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1985              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="6744719432735700494" onmouseenter="enter('6744719432735700494');" onmouseout="out('6744719432735700494');" style="">1986              @RequestParam(value=&quot;newSequence&quot;) String newSequence,                                                </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1987              @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                             </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1988          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1989          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1990          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1991          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1991          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1992          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1993          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span  style="">1994                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1995          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1995          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="6971869165316675737" onmouseenter="enter('6971869165316675737');" onmouseout="out('6971869165316675737');" style="">1996          ppr.addCustomCriteria(&quot;reorderParentEntityFetch&quot;);                                                        </span>
<span  style="">1997                                                                                                                    </span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1998          Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1998          Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0ðŸ”µ</abbr></span>
<span  style="">1999                                                                                                                    </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">2000          ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                          </span>
<span  style="">2001                                                                                                                    </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">2002          if (md instanceof AdornedTargetCollectionMetadata) {                                                      </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">2003              AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                           </span>
<span class="-895931586936599512" onmouseenter="enter('-895931586936599512');" onmouseout="out('-895931586936599512');" style="">2004              AdornedTargetList atl = ppr.getAdornedList();                                                         </span>
<span  style="">2005                                                                                                                    </span>
<span class="4013888246220668443" onmouseenter="enter('4013888246220668443');" onmouseout="out('4013888246220668443');" style="">2006              // Get an entity form for the entity                                                                  </span>
<span class="4144133685169635892" onmouseenter="enter('4144133685169635892');" onmouseout="out('4144133685169635892');" style=""><abbr title="2007              EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, false);">2007              EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionðŸ”µ</abbr></span>
<span class="985151044669117950" onmouseenter="enter('985151044669117950');" onmouseout="out('985151044669117950');" style="">2008              Entity entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,   </span>
<span class="-4422231398086337832" onmouseenter="enter('-4422231398086337832');" onmouseout="out('-4422231398086337832');" style="">2009                      collectionItemId, sectionCrumbs, alternateId, new String[]{&quot;reorderChildEntityFetch&quot;})        </span>
<span class="-7850695853310911802" onmouseenter="enter('-7850695853310911802');" onmouseout="out('-7850695853310911802');" style="">2010                      .getDynamicResultSet().getRecords()[0];                                                       </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">2011              formService.populateEntityFormFields(entityForm, entity);                                             </span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">2012              formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());                </span>
<span  style="">2013                                                                                                                    </span>
<span class="-3124065187694573478" onmouseenter="enter('-3124065187694573478');" onmouseout="out('-3124065187694573478');" style=""><abbr title="2014              // Set the new sequence (note that it will come in 0-indexed but the persistence module expects 1-indexed)">2014              // Set the new sequence (note that it will come in 0-indexed but the persistence module expects 1-indeðŸ”µ</abbr></span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">2015              int sequenceValue = Integer.parseInt(newSequence) + 1;                                                </span>
<span class="2556919505341751863" onmouseenter="enter('2556919505341751863');" onmouseout="out('2556919505341751863');" style="">2016              Field field = entityForm.findField(atl.getSortField());                                               </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">2017              field.setValue(String.valueOf(sequenceValue));                                                        </span>
<span  style="">2018                                                                                                                    </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">2019              Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                                    </span>
<span class="-5669538829732150992" onmouseenter="enter('-5669538829732150992');" onmouseout="out('-5669538829732150992');" style=""><abbr title="2020              PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, alternateId, sectionCrumbs);">2020              PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, ðŸ”µ</abbr></span>
<span class="-6209319883391535282" onmouseenter="enter('-6209319883391535282');" onmouseout="out('-6209319883391535282');" style="">2021              Property displayOrder = persistenceResponse.getEntity().findProperty(atl.getSortField());             </span>
<span  style="">2022                                                                                                                    </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">2023              responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                                      </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">2024              responseMap.put(&quot;field&quot;, collectionField);                                                            </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">2025              responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());            </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">2026              return responseMap;                                                                                   </span>
<span class="-3117865694677500361" onmouseenter="enter('-3117865694677500361');" onmouseout="out('-3117865694677500361');" style="">2027          } else if (md instanceof BasicCollectionMetadata) {                                                       </span>
<span class="-8492572584837651214" onmouseenter="enter('-8492572584837651214');" onmouseout="out('-8492572584837651214');" style="">2028              BasicCollectionMetadata cd = (BasicCollectionMetadata) md;                                            </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">2029              Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                                    </span>
<span class="-2546552603594507996" onmouseenter="enter('-2546552603594507996');" onmouseout="out('-2546552603594507996');" style=""><abbr title="2030              Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResultSet().getRecords()[0];">2030              Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResultSet().geðŸ”µ</abbr></span>
<span  style="">2031                                                                                                                    </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="2032              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">2032              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span class="-2818097934143266938" onmouseenter="enter('-2818097934143266938');" onmouseout="out('-2818097934143266938');" style="">2033              EntityForm entityForm = formService.createEntityForm(collectionMetadata, sectionCrumbs);              </span>
<span class="2758594966987635918" onmouseenter="enter('2758594966987635918');" onmouseout="out('2758594966987635918');" style=""><abbr title="2034              boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">2034              boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentðŸ”µ</abbr></span>
<span class="8701882977725374051" onmouseenter="enter('8701882977725374051');" onmouseout="out('8701882977725374051');" style="">2035              if(listGridReadOnly){                                                                                 </span>
<span class="2312726484157116526" onmouseenter="enter('2312726484157116526');" onmouseout="out('2312726484157116526');" style="">2036                          throw new SecurityServiceException();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2037              }                                                                                                     </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">2038              if (!StringUtils.isEmpty(cd.getSortProperty())) {                                                     </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">2039                  Field f = new Field()                                                                             </span>
<span class="-2538063021289876061" onmouseenter="enter('-2538063021289876061');" onmouseout="out('-2538063021289876061');" style="">2040                          .withName(cd.getSortProperty())                                                           </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">2041                          .withFieldType(SupportedFieldType.HIDDEN.toString());                                     </span>
<span class="5054103958554301667" onmouseenter="enter('5054103958554301667');" onmouseout="out('5054103958554301667');" style="">2042                  entityForm.addHiddenField(mainMetadata, f);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2043              }                                                                                                     </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">2044              formService.populateEntityFormFields(entityForm, entity);                                             </span>
<span  style="">2045                                                                                                                    </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">2046              if (!StringUtils.isEmpty(cd.getSortProperty())) {                                                     </span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">2047                  int sequenceValue = Integer.parseInt(newSequence) + 1;                                            </span>
<span class="-3733495482183042291" onmouseenter="enter('-3733495482183042291');" onmouseout="out('-3733495482183042291');" style="">2048                  Field field = entityForm.findField(cd.getSortProperty());                                         </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">2049                  field.setValue(String.valueOf(sequenceValue));                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2050              }                                                                                                     </span>
<span  style="">2051                                                                                                                    </span>
<span class="3923458830762383909" onmouseenter="enter('3923458830762383909');" onmouseout="out('3923458830762383909');" style=""><abbr title="2052              PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, sectionCrumbs);">2052              PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, ðŸ”µ</abbr></span>
<span class="-792608105002716351" onmouseenter="enter('-792608105002716351');" onmouseout="out('-792608105002716351');" style="">2053              Property displayOrder = persistenceResponse.getEntity().findProperty(cd.getSortProperty());           </span>
<span  style="">2054                                                                                                                    </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">2055              responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                                      </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">2056              responseMap.put(&quot;field&quot;, collectionField);                                                            </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">2057              responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());            </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">2058              return responseMap;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2059          } else {                                                                                                  </span>
<span class="7542199431919878786" onmouseenter="enter('7542199431919878786');" onmouseout="out('7542199431919878786');" style=""><abbr title="2060              throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collection fields.&quot;);">2060              throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collection fiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2061          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2062      }                                                                                                             </span>
<span  style="">2063                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2064      /**                                                                                                           </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">2065       * Removes the requested collection item                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2066       *                                                                                                            </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="2067       * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">2067       * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item froðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">2068       * map collection.                                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2069       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">2070       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">2071       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">2072       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">2073       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">2074       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">2075       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">2076       * @param collectionItemId                                                                                    </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">2077       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">2078       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2079       */                                                                                                           </span>
<span class="6340503715634976611" onmouseenter="enter('6340503715634976611');" onmouseout="out('6340503715634976611');" style="">2080      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/delete&quot;, method = RequestMethod.POST)  </span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style="">2081      public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,     </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">2082              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">2083              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">2084              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">2085              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {                   </span>
<span class="6845453766150325497" onmouseenter="enter('6845453766150325497');" onmouseout="out('6845453766150325497');" style=""><abbr title="2086          return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, null);">2086          return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, nulðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2087      }                                                                                                             </span>
<span  style="">2088                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2089      /**                                                                                                           </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">2090       * Removes the requested collection item                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2091       *                                                                                                            </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="2092       * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">2092       * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item froðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">2093       * map collection.                                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2094       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">2095       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">2096       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">2097       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">2098       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">2099       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">2100       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">2101       * @param collectionItemId                                                                                    </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">2102       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">2103       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2104       */                                                                                                           </span>
<span class="-4053134536146029119" onmouseenter="enter('-4053134536146029119');" onmouseout="out('-4053134536146029119');" style=""><abbr title="2105      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method = RequestMethod.POST)">2105      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method = RequestðŸ”µ</abbr></span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style="">2106      public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,     </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">2107              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">2108              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">2109              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">2110              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">2111              @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                             </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">2112          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">2113          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">2114          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="2115          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">2115          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">2116          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">2117                                                                                                                    </span>
<span class="-6408221600487262974" onmouseenter="enter('-6408221600487262974');" onmouseout="out('-6408221600487262974');" style="">2118          String priorKey = request.getParameter(&quot;key&quot;);                                                            </span>
<span  style="">2119                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="2120          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">2120          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">2121          declareShouldIgnoreAdditionStatusFilter();                                                                </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">2122          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">2123          service.clearEntityManager();                                                                             </span>
<span class="8107528363762278945" onmouseenter="enter('8107528363762278945');" onmouseout="out('8107528363762278945');" style="">2124          // First, we must remove the collection entity                                                            </span>
<span class="-8185015406879465962" onmouseenter="enter('-8185015406879465962');" onmouseout="out('-8185015406879465962');" style=""><abbr title="2125          PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectionProperty, entity, collectionItemId, alternateId, priorKey, sectionCrumbs);">2125          PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectionProperðŸ”µ</abbr></span>
<span class="4740780245520344929" onmouseenter="enter('4740780245520344929');" onmouseout="out('4740780245520344929');" style="">2126          if (persistenceResponse.getEntity() != null &amp;&amp; persistenceResponse.getEntity().isValidationFailure()) {   </span>
<span class="-1907173364280213129" onmouseenter="enter('-1907173364280213129');" onmouseout="out('-1907173364280213129');" style="">2127              String error = &quot;There was an error removing the whatever&quot;;                                            </span>
<span class="6694909055776458558" onmouseenter="enter('6694909055776458558');" onmouseout="out('6694909055776458558');" style="">2128              if (MapUtils.isNotEmpty(persistenceResponse.getEntity().getPropertyValidationErrors())) {             </span>
<span class="2653002805011151778" onmouseenter="enter('2653002805011151778');" onmouseout="out('2653002805011151778');" style="">2129                  // If we failed, we&#x27;ll return some JSON with the first error                                      </span>
<span class="6101527636004026445" onmouseenter="enter('6101527636004026445');" onmouseout="out('6101527636004026445');" style=""><abbr title="2130                  error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator().next().get(0);">2130                  error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator().next().gðŸ”µ</abbr></span>
<span class="3589903040125146199" onmouseenter="enter('3589903040125146199');" onmouseout="out('3589903040125146199');" style="">2131              } else if (CollectionUtils.isNotEmpty(persistenceResponse.getEntity().getGlobalValidationErrors())) { </span>
<span class="-8002349788440125315" onmouseenter="enter('-8002349788440125315');" onmouseout="out('-8002349788440125315');" style="">2132                  error = persistenceResponse.getEntity().getGlobalValidationErrors().get(0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2133              }                                                                                                     </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">2134              return new JsonResponse(response)                                                                     </span>
<span class="4764127484129551096" onmouseenter="enter('4764127484129551096');" onmouseout="out('4764127484129551096');" style="">2135                  .with(&quot;status&quot;, &quot;error&quot;)                                                                          </span>
<span class="-4778619806303294332" onmouseenter="enter('-4778619806303294332');" onmouseout="out('-4778619806303294332');" style="">2136                  .with(&quot;message&quot;, BLCMessageUtils.getMessage(error))                                               </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">2137                  .done();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2138          }                                                                                                         </span>
<span  style="">2139                                                                                                                    </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">2140          // Next, we must get the new list grid that represents this collection                                    </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">2141          // We return the new list grid so that it can replace the currently visible one                           </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="2142          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">2142          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persðŸ”µ</abbr></span>
<span  style="">2143                                                                                                                    </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">2144          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">2145          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">2146          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">2147          return &quot;views/standaloneListGrid&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2148      }                                                                                                             </span>
<span  style="">2149                                                                                                                    </span>
<span class="-1722269672251008380" onmouseenter="enter('-1722269672251008380');" onmouseout="out('-1722269672251008380');" style="">2150      public void addAuditableDisplayFields(EntityForm entityForm) {                                                </span>
<span class="2220665039639111541" onmouseenter="enter('2220665039639111541');" onmouseout="out('2220665039639111541');" style="">2151          Field createdBy = entityForm.findField(&quot;auditable.createdBy&quot;);                                            </span>
<span class="-1310269621989930827" onmouseenter="enter('-1310269621989930827');" onmouseout="out('-1310269621989930827');" style="">2152          if (createdBy != null &amp;&amp; createdBy.getValue() != null) {                                                  </span>
<span class="3065344382927201496" onmouseenter="enter('3065344382927201496');" onmouseout="out('3065344382927201496');" style="">2153              addAuditableDisplayField(entityForm, createdBy);                                                      </span>
<span  style="">2154                                                                                                                    </span>
<span class="-8232178899610643805" onmouseenter="enter('-8232178899610643805');" onmouseout="out('-8232178899610643805');" style="">2155              createdBy.setIsVisible(false);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2156          }                                                                                                         </span>
<span class="1393544913931451876" onmouseenter="enter('1393544913931451876');" onmouseout="out('1393544913931451876');" style="">2157          Field updatedBy = entityForm.findField(&quot;auditable.updatedBy&quot;);                                            </span>
<span class="362865388069983596" onmouseenter="enter('362865388069983596');" onmouseout="out('362865388069983596');" style="">2158          if (updatedBy != null &amp;&amp; updatedBy.getValue() != null) {                                                  </span>
<span class="-892302887107162271" onmouseenter="enter('-892302887107162271');" onmouseout="out('-892302887107162271');" style="">2159              addAuditableDisplayField(entityForm, updatedBy);                                                      </span>
<span  style="">2160                                                                                                                    </span>
<span class="6398063041947851488" onmouseenter="enter('6398063041947851488');" onmouseout="out('6398063041947851488');" style="">2161              updatedBy.setIsVisible(false);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2162          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2163      }                                                                                                             </span>
<span  style="">2164                                                                                                                    </span>
<span class="4984267825623541739" onmouseenter="enter('4984267825623541739');" onmouseout="out('4984267825623541739');" style="">2165      private void addAuditableDisplayField(EntityForm entityForm, Field userField) {                               </span>
<span class="-4635466229336929139" onmouseenter="enter('-4635466229336929139');" onmouseout="out('-4635466229336929139');" style="">2166          Field displayField = buildAuditableDisplayField(userField);                                               </span>
<span  style="">2167                                                                                                                    </span>
<span class="-3510960703864117903" onmouseenter="enter('-3510960703864117903');" onmouseout="out('-3510960703864117903');" style="">2168          AdminUser user = adminUserDao.readAdminUserById(Long.parseLong(userField.getValue()));                    </span>
<span class="-2749914300638269457" onmouseenter="enter('-2749914300638269457');" onmouseout="out('-2749914300638269457');" style="">2169          String userName = user == null ? null : user.getName();                                                   </span>
<span class="-519467923242361473" onmouseenter="enter('-519467923242361473');" onmouseout="out('-519467923242361473');" style="">2170          displayField.setValue(userName);                                                                          </span>
<span  style="">2171                                                                                                                    </span>
<span class="2796866146572271884" onmouseenter="enter('2796866146572271884');" onmouseout="out('2796866146572271884');" style="">2172          FieldGroup auditGroup = entityForm.findGroup(&quot;AdminAuditable_Audit&quot;);                                     </span>
<span class="442119087406556402" onmouseenter="enter('442119087406556402');" onmouseout="out('442119087406556402');" style="">2173          if (auditGroup != null) {                                                                                 </span>
<span class="2790071812155889083" onmouseenter="enter('2790071812155889083');" onmouseout="out('2790071812155889083');" style="">2174              auditGroup.addField(displayField);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2175          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2176      }                                                                                                             </span>
<span  style="">2177                                                                                                                    </span>
<span class="-898012728924165157" onmouseenter="enter('-898012728924165157');" onmouseout="out('-898012728924165157');" style="">2178      private Field buildAuditableDisplayField(Field auditableField) {                                              </span>
<span class="7586031541837577475" onmouseenter="enter('7586031541837577475');" onmouseout="out('7586031541837577475');" style="">2179          return new Field().withFieldType(SupportedFieldType.STRING.toString())                                    </span>
<span class="-5983163062967947616" onmouseenter="enter('-5983163062967947616');" onmouseout="out('-5983163062967947616');" style="">2180                  .withName(auditableField.getName() + &quot;Display&quot;)                                                   </span>
<span class="-3810520855500417343" onmouseenter="enter('-3810520855500417343');" onmouseout="out('-3810520855500417343');" style="">2181                  .withFriendlyName(auditableField.getFriendlyName())                                               </span>
<span class="-2087540063707551713" onmouseenter="enter('-2087540063707551713');" onmouseout="out('-2087540063707551713');" style="">2182                  .withOrder(auditableField.getOrder())                                                             </span>
<span class="3252055162848788175" onmouseenter="enter('3252055162848788175');" onmouseout="out('3252055162848788175');" style="">2183                  .withOwningEntityClass(auditableField.getOwningEntityClass())                                     </span>
<span class="8052491048417023702" onmouseenter="enter('8052491048417023702');" onmouseout="out('8052491048417023702');" style="">2184                  .withReadOnly(true);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2185      }                                                                                                             </span>
<span  style="">2186                                                                                                                    </span>
<span class="2512746595428590302" onmouseenter="enter('2512746595428590302');" onmouseout="out('2512746595428590302');" style="">2187      protected String getCurrentTabName(Map&lt;String, String&gt; pathVars, ClassMetadata cmd) {                         </span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style="">2188          String tabName = pathVars.get(&quot;tabName&quot;);                                                                 </span>
<span class="620358619967646231" onmouseenter="enter('620358619967646231');" onmouseout="out('620358619967646231');" style="">2189          if (StringUtils.isBlank(tabName)) {                                                                       </span>
<span class="-8386812650765964886" onmouseenter="enter('-8386812650765964886');" onmouseout="out('-8386812650765964886');" style="">2190              TabMetadata firstTab = cmd.getFirstTab();                                                             </span>
<span class="5997097813726693180" onmouseenter="enter('5997097813726693180');" onmouseout="out('5997097813726693180');" style="">2191              return firstTab != null ? firstTab.getTabName() : &quot;General&quot;;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2192          }                                                                                                         </span>
<span class="-6789109484485831180" onmouseenter="enter('-6789109484485831180');" onmouseout="out('-6789109484485831180');" style="">2193          return tabName;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2194      }                                                                                                             </span>
<span  style="">2195                                                                                                                    </span>
<span class="3143437458878702073" onmouseenter="enter('3143437458878702073');" onmouseout="out('3143437458878702073');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2196 +    protected String getCurrentFolderId(HttpServletRequest request) {                                             </span>
<span class="1754053964111348985" onmouseenter="enter('1754053964111348985');" onmouseout="out('1754053964111348985');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2197 +        if (request.getParameterMap().containsKey(CURRENT_FOLDER_ID)) {                                           </span>
<span class="6180766430585782289" onmouseenter="enter('6180766430585782289');" onmouseout="out('6180766430585782289');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2198 +            return request.getParameter(CURRENT_FOLDER_ID);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2199 +        }                                                                                                         </span>
<span class="-7128073668423816870" onmouseenter="enter('-7128073668423816870');" onmouseout="out('-7128073668423816870');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2200 +        return &quot;unassigned&quot;;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2201 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">2202 +                                                                                                                  </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">2203      // *****************************************                                                                  </span>
<span class="2492884656402841956" onmouseenter="enter('2492884656402841956');" onmouseout="out('2492884656402841956');" style="">2204      // Typed Entity Helper Methods                                                                                </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">2205      // *****************************************                                                                  </span>
<span  style="">2206                                                                                                                    </span>
<span class="709722161552159597" onmouseenter="enter('709722161552159597');" onmouseout="out('709722161552159597');" style="">2207      protected void setTypedEntityModelAttributes(HttpServletRequest request, Model model) {                       </span>
<span class="2572860224956804545" onmouseenter="enter('2572860224956804545');" onmouseout="out('2572860224956804545');" style="">2208          // Check if this is a typed entity                                                                        </span>
<span class="-601784761218487618" onmouseenter="enter('-601784761218487618');" onmouseout="out('-601784761218487618');" style="">2209          AdminSection typedEntitySection = (AdminSection) request.getAttribute(&quot;typedEntitySection&quot;);              </span>
<span class="2356861889771822774" onmouseenter="enter('2356861889771822774');" onmouseout="out('2356861889771822774');" style="">2210          if (typedEntitySection != null) {                                                                         </span>
<span class="-7054855399164801351" onmouseenter="enter('-7054855399164801351');" onmouseout="out('-7054855399164801351');" style="">2211              // Update the friendly name for this Entity Type                                                      </span>
<span class="-8436584596314077038" onmouseenter="enter('-8436584596314077038');" onmouseout="out('-8436584596314077038');" style="">2212              model.addAttribute(&quot;entityFriendlyName&quot;, typedEntitySection.getName());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2213          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2214      }                                                                                                             </span>
<span  style="">2215                                                                                                                    </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">2216      // *********************************                                                                          </span>
<span class="5570644305110686760" onmouseenter="enter('5570644305110686760');" onmouseout="out('5570644305110686760');" style="">2217      // ADDITIONAL SPRING-BOUND METHODS *                                                                          </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">2218      // *********************************                                                                          </span>
<span  style="">2219                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2220      /**                                                                                                           </span>
<span class="-6771709729688841784" onmouseenter="enter('-6771709729688841784');" onmouseout="out('-6771709729688841784');" style="">2221       * Invoked on every request to provide the ability to register specific binders for Spring&#x27;s binding process. </span>
<span class="2498077318751920180" onmouseenter="enter('2498077318751920180');" onmouseout="out('2498077318751920180');" style=""><abbr title="2222       * By default, we register a binder that treats empty Strings as null and a Boolean editor that supports either true">2222       * By default, we register a binder that treats empty Strings as null and a Boolean editor that supports eitheðŸ”µ</abbr></span>
<span class="4465303089468973962" onmouseenter="enter('4465303089468973962');" onmouseout="out('4465303089468973962');" style="">2223       * or false. If the value is passed in as null, it will treat it as false.                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2224       *                                                                                                            </span>
<span class="-3898462538136412996" onmouseenter="enter('-3898462538136412996');" onmouseout="out('-3898462538136412996');" style="">2225       * @param binder                                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2226       */                                                                                                           </span>
<span class="2978104519843175555" onmouseenter="enter('2978104519843175555');" onmouseout="out('2978104519843175555');" style="">2227      @InitBinder                                                                                                   </span>
<span class="4179572271848089300" onmouseenter="enter('4179572271848089300');" onmouseout="out('4179572271848089300');" style="">2228      public void initBinder(WebDataBinder binder) {                                                                </span>
<span class="3888201586857511470" onmouseenter="enter('3888201586857511470');" onmouseout="out('3888201586857511470');" style="">2229          binder.registerCustomEditor(String.class, new StringTrimmerEditor(true));                                 </span>
<span class="-4458929942740752488" onmouseenter="enter('-4458929942740752488');" onmouseout="out('-4458929942740752488');" style="">2230          binder.registerCustomEditor(Boolean.class, new NonNullBooleanEditor());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2231      }                                                                                                             </span>
<span  style="">2232                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2233  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3   * BroadleafCommerce Open Admin Platform                                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span class="913821711322743166" onmouseenter="enter('913821711322743166');" onmouseout="out('913821711322743166');" style="">  18  package org.broadleafcommerce.openadmin.web.controller.entity;                                                    </span>
<span  style="">  19                                                                                                                    </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  20  import org.apache.commons.collections.CollectionUtils;                                                            </span>
<span class="4020017653195254006" onmouseenter="enter('4020017653195254006');" onmouseout="out('4020017653195254006');" style="">  21  import org.apache.commons.collections.MapUtils;                                                                   </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  22  import org.apache.commons.lang3.StringUtils;                                                                      </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  23  import org.apache.commons.logging.Log;                                                                            </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  24  import org.apache.commons.logging.LogFactory;                                                                     </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  25  import org.broadleafcommerce.common.exception.SecurityServiceException;                                           </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  26  import org.broadleafcommerce.common.exception.ServiceException;                                                   </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  27  import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                              </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  28  import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                          </span>
<span class="-3349026188166660873" onmouseenter="enter('-3349026188166660873');" onmouseout="out('-3349026188166660873');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  29 +import org.broadleafcommerce.common.persistence.EntityDuplicator;                                                 </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  30  import org.broadleafcommerce.common.presentation.client.AddMethodType;                                            </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  31  import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                                       </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  32  import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                                        </span>
<span class="-1492144387614747576" onmouseenter="enter('-1492144387614747576');" onmouseout="out('-1492144387614747576');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  33 +import org.broadleafcommerce.common.service.GenericEntityService;                                                 </span>
<span class="2429458746821399950" onmouseenter="enter('2429458746821399950');" onmouseout="out('2429458746821399950');" style="">  34  import org.broadleafcommerce.common.util.BLCArrayUtils;                                                           </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  35  import org.broadleafcommerce.common.util.BLCMessageUtils;                                                         </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  36  import org.broadleafcommerce.common.web.BroadleafRequestContext;                                                  </span>
<span class="-1418036767363331062" onmouseenter="enter('-1418036767363331062');" onmouseout="out('-1418036767363331062');" style="">  37  import org.broadleafcommerce.common.web.JsonResponse;                                                             </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  38  import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                                       </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  39  import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                                     </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  40  import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                               </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  41  import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                                    </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  42  import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                         </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  43  import org.broadleafcommerce.openadmin.dto.ClassTree;                                                             </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  44  import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                                    </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  45  import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                                      </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  46  import org.broadleafcommerce.openadmin.dto.Entity;                                                                </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  47  import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                         </span>
<span class="6369021917986026789" onmouseenter="enter('6369021917986026789');" onmouseout="out('6369021917986026789');" style="">  48  import org.broadleafcommerce.openadmin.dto.FilterAndSortCriteria;                                                 </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  49  import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                           </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  50  import org.broadleafcommerce.openadmin.dto.Property;                                                              </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  51  import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                          </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  52  import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                           </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="">  53  import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                               </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  54  import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                                   </span>
<span class="2120683388748052627" onmouseenter="enter('2120683388748052627');" onmouseout="out('2120683388748052627');" style="">  55  import org.broadleafcommerce.openadmin.server.security.dao.AdminUserDao;                                          </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  56  import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                                       </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  57  import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                          </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  58  import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                                </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  59  import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                           </span>
<span class="-8603256547657551769" onmouseenter="enter('-8603256547657551769');" onmouseout="out('-8603256547657551769');" style="">  60  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceResponse;                            </span>
<span class="5585583973934060515" onmouseenter="enter('5585583973934060515');" onmouseout="out('5585583973934060515');" style=""><abbr title="  61  import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExtensionManager;">  61  import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExtensionManaðŸ”µ</abbr></span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  62  import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;                  </span>
<span class="9131075895472939574" onmouseenter="enter('9131075895472939574');" onmouseout="out('9131075895472939574');" style="">  63  import org.broadleafcommerce.openadmin.web.controller.AdminAbstractController;                                    </span>
<span class="7254479112554025637" onmouseenter="enter('7254479112554025637');" onmouseout="out('7254479112554025637');" style="">  64  import org.broadleafcommerce.openadmin.web.controller.modal.ModalHeaderType;                                      </span>

<span class="4507704609742395614" onmouseenter="enter('4507704609742395614');" onmouseout="out('4507704609742395614');" style="">  65  import org.broadleafcommerce.openadmin.web.editor.NonNullBooleanEditor;                                           </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  66  import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                                 </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  67  import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                               </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  68  import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                           </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  69  import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                                  </span>
<span class="-3560862041655103076" onmouseenter="enter('-3560862041655103076');" onmouseout="out('-3560862041655103076');" style="">  70  import org.broadleafcommerce.openadmin.web.form.entity.DefaultMainActions;                                        </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  71  import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                                </span>
<span class="-3164920911156953697" onmouseenter="enter('-3164920911156953697');" onmouseout="out('-3164920911156953697');" style="">  72  import org.broadleafcommerce.openadmin.web.form.entity.EntityFormAction;                                          </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  73  import org.broadleafcommerce.openadmin.web.form.entity.Field;                                                     </span>
<span class="-5634654756625156689" onmouseenter="enter('-5634654756625156689');" onmouseout="out('-5634654756625156689');" style="">  74  import org.broadleafcommerce.openadmin.web.form.entity.FieldGroup;                                                </span>
<span class="8763280003660953520" onmouseenter="enter('8763280003660953520');" onmouseout="out('8763280003660953520');" style="">  75  import org.springframework.beans.propertyeditors.StringTrimmerEditor;                                             </span>
<span class="4128309806836178094" onmouseenter="enter('4128309806836178094');" onmouseout="out('4128309806836178094');" style="">  76  import org.springframework.stereotype.Controller;                                                                 </span>
<span class="2230089600625206822" onmouseenter="enter('2230089600625206822');" onmouseout="out('2230089600625206822');" style="">  77  import org.springframework.ui.Model;                                                                              </span>
<span class="-8661390401087732702" onmouseenter="enter('-8661390401087732702');" onmouseout="out('-8661390401087732702');" style="">  78  import org.springframework.util.MultiValueMap;                                                                    </span>
<span class="-5446610002806720528" onmouseenter="enter('-5446610002806720528');" onmouseout="out('-5446610002806720528');" style="">  79  import org.springframework.validation.BindingResult;                                                              </span>
<span class="-5956639343389312225" onmouseenter="enter('-5956639343389312225');" onmouseout="out('-5956639343389312225');" style="">  80  import org.springframework.web.bind.WebDataBinder;                                                                </span>
<span class="6486986322776186621" onmouseenter="enter('6486986322776186621');" onmouseout="out('6486986322776186621');" style="">  81  import org.springframework.web.bind.annotation.InitBinder;                                                        </span>
<span class="2718246165073723950" onmouseenter="enter('2718246165073723950');" onmouseout="out('2718246165073723950');" style="">  82  import org.springframework.web.bind.annotation.ModelAttribute;                                                    </span>
<span class="3963501418927616634" onmouseenter="enter('3963501418927616634');" onmouseout="out('3963501418927616634');" style="">  83  import org.springframework.web.bind.annotation.PathVariable;                                                      </span>
<span class="-7989471178862524182" onmouseenter="enter('-7989471178862524182');" onmouseout="out('-7989471178862524182');" style="">  84  import org.springframework.web.bind.annotation.RequestMapping;                                                    </span>
<span class="4584846860636268493" onmouseenter="enter('4584846860636268493');" onmouseout="out('4584846860636268493');" style="">  85  import org.springframework.web.bind.annotation.RequestMethod;                                                     </span>
<span class="-8913037601281016619" onmouseenter="enter('-8913037601281016619');" onmouseout="out('-8913037601281016619');" style="">  86  import org.springframework.web.bind.annotation.RequestParam;                                                      </span>
<span class="-7662224364501075428" onmouseenter="enter('-7662224364501075428');" onmouseout="out('-7662224364501075428');" style="">  87  import org.springframework.web.bind.annotation.ResponseBody;                                                      </span>
<span class="82864906475118767" onmouseenter="enter('82864906475118767');" onmouseout="out('82864906475118767');" style="">  88  import org.springframework.web.servlet.DispatcherServlet;                                                         </span>
<span class="4665273347041581179" onmouseenter="enter('4665273347041581179');" onmouseout="out('4665273347041581179');" style="">  89  import org.springframework.web.servlet.FlashMap;                                                                  </span>
<span class="4289605998216587359" onmouseenter="enter('4289605998216587359');" onmouseout="out('4289605998216587359');" style="">  90  import org.springframework.web.servlet.mvc.support.RedirectAttributes;                                            </span>
<span class="2383374134797300138" onmouseenter="enter('2383374134797300138');" onmouseout="out('2383374134797300138');" style="">  91  import org.springframework.web.util.UrlPathHelper;                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  92 +                                                                                                                  </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style="">  93  import com.fasterxml.jackson.databind.ObjectMapper;                                                               </span>
<span  style="">  94                                                                                                                    </span>
<span class="5998602906817463685" onmouseenter="enter('5998602906817463685');" onmouseout="out('5998602906817463685');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  95 +import java.io.Serializable;                                                                                      </span>
<span class="8256805395213692609" onmouseenter="enter('8256805395213692609');" onmouseout="out('8256805395213692609');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  96 +import java.io.UnsupportedEncodingException;                                                                      </span>
<span class="600097467176667378" onmouseenter="enter('600097467176667378');" onmouseout="out('600097467176667378');" style="">  97  import java.net.URLDecoder;                                                                                       </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  98  import java.util.ArrayList;                                                                                       </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  99  import java.util.Arrays;                                                                                          </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style=""> 100  import java.util.HashMap;                                                                                         </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style=""> 101  import java.util.List;                                                                                            </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style=""> 102  import java.util.Map;                                                                                             </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style=""> 103  import java.util.Map.Entry;                                                                                       </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style=""> 104  import java.util.Set;                                                                                             </span>
<span class="5924803009700709999" onmouseenter="enter('5924803009700709999');" onmouseout="out('5924803009700709999');" style=""> 105  import java.util.stream.Stream;                                                                                   </span>
<span  style=""> 106                                                                                                                    </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 107  import javax.annotation.Resource;                                                                                 </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style=""> 108  import javax.servlet.http.HttpServletRequest;                                                                     </span>
<span class="-2247759832438184775" onmouseenter="enter('-2247759832438184775');" onmouseout="out('-2247759832438184775');" style=""> 109  import javax.servlet.http.HttpServletResponse;                                                                    </span>
<span  style=""> 110                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 111  /**                                                                                                               </span>
<span class="4260469300841401635" onmouseenter="enter('4260469300841401635');" onmouseout="out('4260469300841401635');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 112 - * The default implementation of the {@link #BroadleafAdminAbstractEntityController}. This delegates every call to super"> 112 - * The default implementation of the {@link #BroadleafAdminAbstractEntityController}. This delegates every call toðŸ”µ</abbr></span>
<span class="-3899564930283338794" onmouseenter="enter('-3899564930283338794');" onmouseout="out('-3899564930283338794');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 113 - * and does not provide any custom-tailored functionality. It is responsible for rendering the admin for every entity"> 113 - * and does not provide any custom-tailored functionality. It is responsible for rendering the admin for every entðŸ”µ</abbr></span>
<span class="-5698631600182435917" onmouseenter="enter('-5698631600182435917');" onmouseout="out('-5698631600182435917');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 114 - * that is not explicitly customized by its own controller.                                                       </span>
<span class="5624503434864804252" onmouseenter="enter('5624503434864804252');" onmouseout="out('5624503434864804252');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 115 + * The default implementation of the {@link AdminAbstractController}. This delegates every call to                </span>
<span class="-497882971048272294" onmouseenter="enter('-497882971048272294');" onmouseout="out('-497882971048272294');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 116 + * super and does not provide any custom-tailored functionality. It is responsible for rendering the              </span>
<span class="-4790859535261881332" onmouseenter="enter('-4790859535261881332');" onmouseout="out('-4790859535261881332');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 117 + * admin for every entity that is not explicitly customized by its own controller.                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 118   *                                                                                                                </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 119   * @author Andre Azzolini (apazzolini)                                                                            </span>
<span class="-7311139588847938491" onmouseenter="enter('-7311139588847938491');" onmouseout="out('-7311139588847938491');" style=""> 120   * @author Jeff Fischer                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 121   */                                                                                                               </span>
<span class="4155455059275642147" onmouseenter="enter('4155455059275642147');" onmouseout="out('4155455059275642147');" style=""> 122  @Controller(&quot;blAdminBasicEntityController&quot;)                                                                       </span>
<span class="1298802560762502343" onmouseenter="enter('1298802560762502343');" onmouseout="out('1298802560762502343');" style=""> 123  @RequestMapping(&quot;/{sectionKey:.+}&quot;)                                                                               </span>
<span class="8857493697785984988" onmouseenter="enter('8857493697785984988');" onmouseout="out('8857493697785984988');" style=""> 124  public class AdminBasicEntityController extends AdminAbstractController {                                         </span>
<span  style=""> 125                                                                                                                    </span>
<span class="6387945601766467724" onmouseenter="enter('6387945601766467724');" onmouseout="out('6387945601766467724');" style=""> 126      protected static final Log LOG = LogFactory.getLog(AdminBasicEntityController.class);                         </span>
<span  style=""> 127                                                                                                                    </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 128      public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                            </span>
<span class="4075481265342786632" onmouseenter="enter('4075481265342786632');" onmouseout="out('4075481265342786632');" style=""> 129      public static final String CUSTOM_CRITERIA = &quot;criteria&quot;;                                                      </span>
<span class="-5370879055704196240" onmouseenter="enter('-5370879055704196240');" onmouseout="out('-5370879055704196240');" style=""> 130      public static final String IS_SELECTIZE_REQUEST = &quot;isSelectizeRequest&quot;;                                       </span>

<span  style=""> 131                                                                                                                    </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style=""> 132      @Resource(name=&quot;blSandBoxHelper&quot;)                                                                             </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style=""> 133      protected SandBoxHelper sandBoxHelper;                                                                        </span>
<span  style=""> 134                                                                                                                    </span>
<span class="-5193304577016957246" onmouseenter="enter('-5193304577016957246');" onmouseout="out('-5193304577016957246');" style=""> 135      @Resource(name = &quot;blAdminUserDao&quot;)                                                                            </span>
<span class="-2542536430165066610" onmouseenter="enter('-2542536430165066610');" onmouseout="out('-2542536430165066610');" style=""> 136      protected AdminUserDao adminUserDao;                                                                          </span>
<span  style=""> 137                                                                                                                    </span>
<span class="1039661802170570045" onmouseenter="enter('1039661802170570045');" onmouseout="out('1039661802170570045');" style=""> 138      @Resource(name=&quot;blDynamicEntityDao&quot;)                                                                          </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style=""> 139      protected DynamicEntityDao dynamicEntityDao;                                                                  </span>
<span  style=""> 140                                                                                                                    </span>
<span class="3323977399618509653" onmouseenter="enter('3323977399618509653');" onmouseout="out('3323977399618509653');" style=""> 141      @Resource(name = &quot;blAdornedTargetAutoPopulateExtensionManager&quot;)                                               </span>
<span class="-4810148452666974339" onmouseenter="enter('-4810148452666974339');" onmouseout="out('-4810148452666974339');" style=""> 142      protected AdornedTargetAutoPopulateExtensionManager adornedTargetAutoPopulateExtensionManager;                </span>
<span  style=""> 143                                                                                                                    </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 144      @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                                 </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 145      protected RowLevelSecurityService rowLevelSecurityService;                                                    </span>









<span  style=""> 146                                                                                                                    </span>
<span class="4471392044492296285" onmouseenter="enter('4471392044492296285');" onmouseout="out('4471392044492296285');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 147 +    @Resource(name = &quot;blEntityDuplicator&quot;)                                                                        </span>
<span class="-9194612273021432316" onmouseenter="enter('-9194612273021432316');" onmouseout="out('-9194612273021432316');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 148 +    protected EntityDuplicator duplicator;                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 149 +                                                                                                                  </span>
<span class="2258512980686044159" onmouseenter="enter('2258512980686044159');" onmouseout="out('2258512980686044159');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 150 +    @Resource(name = &quot;blGenericEntityService&quot;)                                                                    </span>
<span class="7024198528514174971" onmouseenter="enter('7024198528514174971');" onmouseout="out('7024198528514174971');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 151 +    protected GenericEntityService genericEntityService;                                                          </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 152 +                                                                                                                  </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 153      // ******************************************                                                                 </span>
<span class="8145904524131922989" onmouseenter="enter('8145904524131922989');" onmouseout="out('8145904524131922989');" style=""> 154      // REQUEST-MAPPING BOUND CONTROLLER METHODS *                                                                 </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 155      // ******************************************                                                                 </span>
<span  style=""> 156                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 157      /**                                                                                                           </span>
<span class="5980196098348408716" onmouseenter="enter('5980196098348408716');" onmouseout="out('5980196098348408716');" style=""><abbr title=" 158       * Renders the main entity listing for the specified class, which is based on the current sectionKey with some optional"> 158       * Renders the main entity listing for the specified class, which is based on the current sectionKey with someðŸ”µ</abbr></span>
<span class="1756838433111210325" onmouseenter="enter('1756838433111210325');" onmouseout="out('1756838433111210325');" style=""> 159       * criteria.                                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 160       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 161       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 162       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 163       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 164       * @param pathVars                                                                                            </span>
<span class="-7836494531350161829" onmouseenter="enter('-7836494531350161829');" onmouseout="out('-7836494531350161829');" style=""> 165       * @param requestParams a Map of property name -&gt; list critiera values                                        </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 166       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 167       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 168       */                                                                                                           </span>
<span class="854227037044969777" onmouseenter="enter('854227037044969777');" onmouseout="out('854227037044969777');" style=""> 169      @RequestMapping(value = &quot;&quot;, method = RequestMethod.GET)                                                       </span>
<span class="5203424842505603172" onmouseenter="enter('5203424842505603172');" onmouseout="out('5203424842505603172');" style=""> 170      public String viewEntityList(HttpServletRequest request, HttpServletResponse response, Model model,           </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 171              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 172              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                         </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 173          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 174          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 175          List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                                        </span>
<span class="1452589137399878084" onmouseenter="enter('1452589137399878084');" onmouseout="out('1452589137399878084');" style=""><abbr title=" 176          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars);"> 176          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 177          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 178          DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                                    </span>
<span  style=""> 179                                                                                                                    </span>
<span class="-9123024135554384147" onmouseenter="enter('-9123024135554384147');" onmouseout="out('-9123024135554384147');" style=""> 180          ListGrid listGrid = formService.buildMainListGrid(drs, cmd, sectionKey, crumbs);                          </span>
<span class="-7197013270379460942" onmouseenter="enter('-7197013270379460942');" onmouseout="out('-7197013270379460942');" style=""> 181          listGrid.setSelectType(ListGrid.SelectType.NONE);                                                         </span>
<span  style=""> 182                                                                                                                    </span>
<span class="6707774114103003478" onmouseenter="enter('6707774114103003478');" onmouseout="out('6707774114103003478');" style=""> 183          Set&lt;Field&gt; headerFields = listGrid.getHeaderFields();                                                     </span>
<span class="6157449347608657417" onmouseenter="enter('6157449347608657417');" onmouseout="out('6157449347608657417');" style=""> 184          if (CollectionUtils.isNotEmpty(headerFields)) {                                                           </span>
<span class="7359980094802675712" onmouseenter="enter('7359980094802675712');" onmouseout="out('7359980094802675712');" style=""> 185              Field firstField = headerFields.iterator().next();                                                    </span>
<span class="-7992921859474727563" onmouseenter="enter('-7992921859474727563');" onmouseout="out('-7992921859474727563');" style=""> 186              if (requestParams.containsKey(firstField.getName())) {                                                </span>
<span class="-4847870846432586371" onmouseenter="enter('-4847870846432586371');" onmouseout="out('-4847870846432586371');" style=""> 187                  model.addAttribute(&quot;mainSearchTerm&quot;, requestParams.get(firstField.getName()).get(0));             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189          }                                                                                                         </span>
<span  style=""> 190                                                                                                                    </span>
<span class="3294377821001327596" onmouseenter="enter('3294377821001327596');" onmouseout="out('3294377821001327596');" style=""> 191          model.addAttribute(&quot;viewType&quot;, &quot;entityList&quot;);                                                             </span>
<span  style=""> 192                                                                                                                    </span>
<span class="5223794068523842694" onmouseenter="enter('5223794068523842694');" onmouseout="out('5223794068523842694');" style=""> 193          setupViewEntityListBasicModel(request, cmd, sectionKey, sectionClassName, model, requestParams);          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style=""> 194          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span  style=""> 195                                                                                                                    </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 196 -        return &quot;modules/defaultContainer&quot;;                                                                        </span>
<span class="-4487883013655706388" onmouseenter="enter('-4487883013655706388');" onmouseout="out('-4487883013655706388');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 197 +        return DEFAULT_CONTAINER_VIEW;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198      }                                                                                                             </span>
<span  style=""> 199                                                                                                                    </span>
<span class="5512240627727429054" onmouseenter="enter('5512240627727429054');" onmouseout="out('5512240627727429054');" style=""> 200      protected void setupViewEntityListBasicModel(HttpServletRequest request, ClassMetadata cmd, String sectionKey,</span>
<span class="522743254766371502" onmouseenter="enter('522743254766371502');" onmouseout="out('522743254766371502');" style=""> 201              String sectionClassName, Model model, MultiValueMap&lt;String, String&gt; requestParams) {                  </span>
<span class="5787313217223527782" onmouseenter="enter('5787313217223527782');" onmouseout="out('5787313217223527782');" style=""> 202          List&lt;EntityFormAction&gt; mainActions = new ArrayList&lt;&gt;();                                                   </span>
<span class="-6495333239259317464" onmouseenter="enter('-6495333239259317464');" onmouseout="out('-6495333239259317464');" style=""> 203          addAddActionIfAllowed(sectionClassName, cmd, mainActions);                                                </span>
<span class="-5948121019403308590" onmouseenter="enter('-5948121019403308590');" onmouseout="out('-5948121019403308590');" style=""> 204          extensionManager.getProxy().addAdditionalMainActions(sectionClassName, mainActions);                      </span>
<span class="-381816252130957573" onmouseenter="enter('-381816252130957573');" onmouseout="out('-381816252130957573');" style=""> 205          extensionManager.getProxy().modifyMainActions(cmd, mainActions);                                          </span>
<span  style=""> 206                                                                                                                    </span>
<span class="-5498329164774951339" onmouseenter="enter('-5498329164774951339');" onmouseout="out('-5498329164774951339');" style=""> 207          // If this came from a delete save, we&#x27;ll have a headerFlash request parameter to take care of            </span>
<span class="6915846846822456322" onmouseenter="enter('6915846846822456322');" onmouseout="out('6915846846822456322');" style=""> 208          if (requestParams.containsKey(&quot;headerFlash&quot;)) {                                                           </span>
<span class="-7374079465520861767" onmouseenter="enter('-7374079465520861767');" onmouseout="out('-7374079465520861767');" style=""> 209              model.addAttribute(&quot;headerFlash&quot;, requestParams.get(&quot;headerFlash&quot;).get(0));                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210          }                                                                                                         </span>
<span  style=""> 211                                                                                                                    </span>
<span class="-5632901614715850082" onmouseenter="enter('-5632901614715850082');" onmouseout="out('-5632901614715850082');" style=""> 212          List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());                            </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style=""> 213          String requestUri = request.getRequestURI();                                                              </span>
<span class="2670437920401576748" onmouseenter="enter('2670437920401576748');" onmouseout="out('2670437920401576748');" style=""> 214          if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) {           </span>
<span class="-901741071381030126" onmouseenter="enter('-901741071381030126');" onmouseout="out('-901741071381030126');" style=""> 215              requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length());        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216          }                                                                                                         </span>
<span  style=""> 217                                                                                                                    </span>
<span class="-3335875933652663591" onmouseenter="enter('-3335875933652663591');" onmouseout="out('-3335875933652663591');" style=""> 218          model.addAttribute(&quot;isFilter&quot;, (requestParams.size() &gt; 0));                                               </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style=""> 219          model.addAttribute(&quot;currentUri&quot;, requestUri);                                                             </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style=""> 220          model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                                           </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 221          model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 222          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="-4219022137146036385" onmouseenter="enter('-4219022137146036385');" onmouseout="out('-4219022137146036385');" style=""> 223          model.addAttribute(&quot;mainActions&quot;, mainActions);                                                           </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 224          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-7167932239083034641" onmouseenter="enter('-7167932239083034641');" onmouseout="out('-7167932239083034641');" style=""> 225          setTypedEntityModelAttributes(request, model);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226      }                                                                                                             </span>
<span  style=""> 227                                                                                                                    </span>
<span class="-3612928683982517341" onmouseenter="enter('-3612928683982517341');" onmouseout="out('-3612928683982517341');" style=""> 228      @RequestMapping(value = &quot;/selectize&quot;, method = RequestMethod.GET)                                             </span>
<span class="-2536734120775641057" onmouseenter="enter('-2536734120775641057');" onmouseout="out('-2536734120775641057');" style=""> 229      public @ResponseBody Map&lt;String, Object&gt; viewEntityListSelectize(HttpServletRequest request,                  </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style=""> 230               HttpServletResponse response, Model model,                                                           </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 231               @PathVariable Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 232               @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                        </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 233          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 234          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 235          List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                                        </span>
<span class="3971039348455381302" onmouseenter="enter('3971039348455381302');" onmouseout="out('3971039348455381302');" style=""><abbr title=" 236          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars)"> 236          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbðŸ”µ</abbr></span>
<span class="-5204717557696417186" onmouseenter="enter('-5204717557696417186');" onmouseout="out('-5204717557696417186');" style=""> 237                  .withCustomCriteria(getCustomCriteria(requestParams));                                            </span>
<span  style=""> 238                                                                                                                    </span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style=""> 239          ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                                    </span>
<span  style=""> 240                                                                                                                    </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 241          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 242          DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                                    </span>
<span  style=""> 243                                                                                                                    </span>
<span class="-6840686923261380416" onmouseenter="enter('-6840686923261380416');" onmouseout="out('-6840686923261380416');" style=""> 244          return formService.constructSelectizeOptionMap(drs, cmd);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 245      }                                                                                                             </span>
<span  style=""> 246                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 247      /**                                                                                                           </span>
<span class="6015587852497052057" onmouseenter="enter('6015587852497052057');" onmouseout="out('6015587852497052057');" style=""> 248       * Obtains the requested criteria parameter                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 249       *                                                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 250       * @param requestParams                                                                                       </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 251       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 252       */                                                                                                           </span>
<span class="-5224065764328446223" onmouseenter="enter('-5224065764328446223');" onmouseout="out('-5224065764328446223');" style=""> 253      protected String[] getCustomCriteria(Map&lt;String, List&lt;String&gt;&gt; requestParams) {                               </span>
<span class="8308653628584061101" onmouseenter="enter('8308653628584061101');" onmouseout="out('8308653628584061101');" style=""> 254          if (requestParams == null || requestParams.isEmpty()) {                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 255              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256          }                                                                                                         </span>
<span  style=""> 257                                                                                                                    </span>
<span class="-6200156504676301578" onmouseenter="enter('-6200156504676301578');" onmouseout="out('-6200156504676301578');" style=""> 258          List&lt;String&gt; criteria = requestParams.get(CUSTOM_CRITERIA);                                               </span>
<span class="3479198517250864619" onmouseenter="enter('3479198517250864619');" onmouseout="out('3479198517250864619');" style=""> 259          String response = CollectionUtils.isEmpty(criteria) ? null : criteria.get(0);                             </span>
<span class="3591199473111095603" onmouseenter="enter('3591199473111095603');" onmouseout="out('3591199473111095603');" style=""> 260          return new String[] {response};                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261      }                                                                                                             </span>
<span  style=""> 262                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 263      /**                                                                                                           </span>
<span class="53051913897087216" onmouseenter="enter('53051913897087216');" onmouseout="out('53051913897087216');" style=""> 264       * Adds the &quot;Add&quot; button to the main entity form if the current user has permissions to create new instances  </span>
<span class="-2041834868205006384" onmouseenter="enter('-2041834868205006384');" onmouseout="out('-2041834868205006384');" style=""> 265       * of the entity and all of the fields in the entity aren&#x27;t marked as read only.                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 266       *                                                                                                            </span>
<span class="2579837316240354786" onmouseenter="enter('2579837316240354786');" onmouseout="out('2579837316240354786');" style=""> 267       * @param sectionClassName                                                                                    </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style=""> 268       * @param cmd                                                                                                 </span>
<span class="-70241175981651056" onmouseenter="enter('-70241175981651056');" onmouseout="out('-70241175981651056');" style=""> 269       * @param mainActions                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 270       */                                                                                                           </span>
<span class="-3535265632615590771" onmouseenter="enter('-3535265632615590771');" onmouseout="out('-3535265632615590771');" style=""><abbr title=" 271      protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormAction&gt; mainActions) {"> 271      protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormAction&gt; mainAcðŸ”µ</abbr></span>
<span class="-1675673801723949520" onmouseenter="enter('-1675673801723949520');" onmouseout="out('-1675673801723949520');" style=""> 272          if (isAddActionAllowed(sectionClassName, cmd)) {                                                          </span>
<span class="-161553798203722975" onmouseenter="enter('-161553798203722975');" onmouseout="out('-161553798203722975');" style=""> 273              mainActions.add(DefaultMainActions.ADD);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275      }                                                                                                             </span>
<span  style=""> 276                                                                                                                    </span>
<span class="6251273327061769060" onmouseenter="enter('6251273327061769060');" onmouseout="out('6251273327061769060');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 277 -    protected boolean isAddActionAllowed(String sectionClassName, ClassMetadata cmd) {                            </span>
<span class="4125299149074369729" onmouseenter="enter('4125299149074369729');" onmouseout="out('4125299149074369729');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 278 +    protected boolean isAddActionAllowed(final String sectionClassName, final ClassMetadata cmd) {                </span>
<span class="2379281051849826609" onmouseenter="enter('2379281051849826609');" onmouseout="out('2379281051849826609');" style=""> 279          // If the user does not have create permissions, we will not add the &quot;Add New&quot; button                     </span>
<span class="4837425918106440333" onmouseenter="enter('4837425918106440333');" onmouseout="out('4837425918106440333');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 280 -        boolean canCreate = true;                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 281          try {                                                                                                     </span>
<span class="-2050050318794737036" onmouseenter="enter('-2050050318794737036');" onmouseout="out('-2050050318794737036');" style=""> 282              adminRemoteSecurityService.securityCheck(sectionClassName, EntityOperationType.ADD);                  </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style=""> 283          } catch (ServiceException e) {                                                                            </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style=""> 284              if (e instanceof SecurityServiceException) {                                                          </span>
<span class="-5562308883634048055" onmouseenter="enter('-5562308883634048055');" onmouseout="out('-5562308883634048055');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 285 -                canCreate = false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 286 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 287 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 288 -                                                                                                                  </span>
<span class="-3452128956938556370" onmouseenter="enter('-3452128956938556370');" onmouseout="out('-3452128956938556370');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 289 -        if (canCreate) {                                                                                          </span>
<span class="-4263024171062822587" onmouseenter="enter('-4263024171062822587');" onmouseout="out('-4263024171062822587');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 290 -            checkReadOnly: {                                                                                      </span>
<span class="-5650645308789885306" onmouseenter="enter('-5650645308789885306');" onmouseout="out('-5650645308789885306');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 291 -                //check if all the metadata is read only                                                          </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 292 -                for (Property property : cmd.getProperties()) {                                                   </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 293 -                    if (property.getMetadata() instanceof BasicFieldMetadata) {                                   </span>
<span class="-4740706861929444273" onmouseenter="enter('-4740706861929444273');" onmouseout="out('-4740706861929444273');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 294 -                        if (((BasicFieldMetadata) property.getMetadata()).getReadOnly() == null ||                </span>
<span class="7731016670197656615" onmouseenter="enter('7731016670197656615');" onmouseout="out('7731016670197656615');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 295 -                                !((BasicFieldMetadata) property.getMetadata()).getReadOnly()) {                   </span>
<span class="7135533341781534816" onmouseenter="enter('7135533341781534816');" onmouseout="out('7135533341781534816');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 296 -                            break checkReadOnly;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 297 -                        }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 298 -                    }                                                                                             </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 299 +                return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 300 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 301 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 302 +                                                                                                                  </span>
<span class="-3272601440754635767" onmouseenter="enter('-3272601440754635767');" onmouseout="out('-3272601440754635767');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 303 +        final boolean canAdd = rowLevelSecurityService                                                            </span>
<span class="-1653290766274377775" onmouseenter="enter('-1653290766274377775');" onmouseout="out('-1653290766274377775');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 304 +                .canAdd(adminRemoteSecurityService.getPersistentAdminUser(), sectionClassName, cmd);              </span>
<span class="5125272502277129387" onmouseenter="enter('5125272502277129387');" onmouseout="out('5125272502277129387');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 305 +        return isNotReadOnly(cmd) &amp;&amp; canAdd;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 306 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 307 +                                                                                                                  </span>
<span class="-7397004815762425407" onmouseenter="enter('-7397004815762425407');" onmouseout="out('-7397004815762425407');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 308 +    protected boolean isNotReadOnly(final ClassMetadata cmd) {                                                    </span>
<span class="-5650645308789885306" onmouseenter="enter('-5650645308789885306');" onmouseout="out('-5650645308789885306');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 309 +        //check if all the metadata is read only                                                                  </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 310 +        for (Property property : cmd.getProperties()) {                                                           </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 311 +            if (property.getMetadata() instanceof BasicFieldMetadata) {                                           </span>
<span class="-4740706861929444273" onmouseenter="enter('-4740706861929444273');" onmouseout="out('-4740706861929444273');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 312 +                if (((BasicFieldMetadata) property.getMetadata()).getReadOnly() == null ||                        </span>
<span class="7731016670197656615" onmouseenter="enter('7731016670197656615');" onmouseout="out('7731016670197656615');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 313 +                        !((BasicFieldMetadata) property.getMetadata()).getReadOnly()) {                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 314 +                    return true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315                  }                                                                                                 </span>
<span class="-5562308883634048055" onmouseenter="enter('-5562308883634048055');" onmouseout="out('-5562308883634048055');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 316 -                canCreate = false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 317 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 318 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 319 -                                                                                                                  </span>
<span class="-3452128956938556370" onmouseenter="enter('-3452128956938556370');" onmouseout="out('-3452128956938556370');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 320 -        if (canCreate) {                                                                                          </span>
<span class="-5729139490324794214" onmouseenter="enter('-5729139490324794214');" onmouseout="out('-5729139490324794214');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 321 -            canCreate = rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(), sectionClassName, cmd);"> 321 -            canCreate = rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(), sectioðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 322 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 323 -                                                                                                                  </span>
<span class="2674140840454218035" onmouseenter="enter('2674140840454218035');" onmouseout="out('2674140840454218035');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 324 -        return canCreate;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 325 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 326 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 327 +                                                                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 328 +        return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329      }                                                                                                             </span>
<span  style=""> 330                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 331      /**                                                                                                           </span>
<span class="-403478592182410175" onmouseenter="enter('-403478592182410175');" onmouseout="out('-403478592182410175');" style=""> 332       * Renders the modal form that is used to add a new parent level entity. Note that this form cannot render any</span>
<span class="-2684076904077363908" onmouseenter="enter('-2684076904077363908');" onmouseout="out('-2684076904077363908');" style=""><abbr title=" 333       * subcollections as operations on those collections require the parent level entity to first be saved and have"> 333       * subcollections as operations on those collections require the parent level entity to first be saved and havðŸ”µ</abbr></span>
<span class="-2496660529180512497" onmouseenter="enter('-2496660529180512497');" onmouseout="out('-2496660529180512497');" style=""><abbr title=" 334       * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity screen where"> 334       * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity screen whðŸ”µ</abbr></span>
<span class="-5672334976076130102" onmouseenter="enter('-5672334976076130102');" onmouseout="out('-5672334976076130102');" style=""> 335       * they can then perform operations on sub collections.                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 336       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 337       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 338       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 339       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 340       * @param pathVars                                                                                            </span>
<span class="-7339043177630483847" onmouseenter="enter('-7339043177630483847');" onmouseout="out('-7339043177630483847');" style=""> 341       * @param entityType                                                                                          </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 342       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 343       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 344       */                                                                                                           </span>
<span class="-6494270766546423105" onmouseenter="enter('-6494270766546423105');" onmouseout="out('-6494270766546423105');" style=""> 345      @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.GET)                                                   </span>
<span class="8522113168804045570" onmouseenter="enter('8522113168804045570');" onmouseout="out('8522113168804045570');" style=""> 346      public String viewAddEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,        </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 347              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="-1715631339976075770" onmouseenter="enter('-1715631339976075770');" onmouseout="out('-1715631339976075770');" style=""> 348              @RequestParam(defaultValue = &quot;&quot;) String entityType) throws Exception {                                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 349          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 350          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 351          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                                 </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 352          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 352          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVðŸ”µ</abbr></span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style=""> 353          ppr.setAddOperationInspect(true);                                                                         </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 354          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span  style=""> 355                                                                                                                    </span>
<span class="4862894803792873117" onmouseenter="enter('4862894803792873117');" onmouseout="out('4862894803792873117');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 356 -        // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types for this entity."> 356 -        // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types for thiðŸ”µ</abbr></span>
<span class="2600422776092116832" onmouseenter="enter('2600422776092116832');" onmouseout="out('2600422776092116832');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 357 +        entityType = determineEntityType(entityType, cmd);                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 358 +                                                                                                                  </span>
<span class="4098005746663533241" onmouseenter="enter('4098005746663533241');" onmouseout="out('4098005746663533241');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 359 +        EntityForm entityForm = formService.createEntityForm(cmd, sectionCrumbs);                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 360 +                                                                                                                  </span>
<span class="5826594571687596812" onmouseenter="enter('5826594571687596812');" onmouseout="out('5826594571687596812');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 361 +        // We need to make sure that the ceiling entity is set to the interface and the specific entity type      </span>
<span class="37161952125740808" onmouseenter="enter('37161952125740808');" onmouseout="out('37161952125740808');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 362 +        // is set to the type we&#x27;re going to be creating.                                                         </span>
<span class="5062735442039535924" onmouseenter="enter('5062735442039535924');" onmouseout="out('5062735442039535924');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 363 +        entityForm.setCeilingEntityClassname(cmd.getCeilingType());                                               </span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 364 +        entityForm.setEntityType(entityType);                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 365 +                                                                                                                  </span>
<span class="-5227856854691424770" onmouseenter="enter('-5227856854691424770');" onmouseout="out('-5227856854691424770');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 366 +        // When we initially build the class metadata (and thus, the entity form), we had all of the possible     </span>
<span class="5105619661852614163" onmouseenter="enter('5105619661852614163');" onmouseout="out('5105619661852614163');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 367 +        // polymorphic fields built out. Now that we have a concrete entity type to render, we can remove the     </span>
<span class="-3843175043245177501" onmouseenter="enter('-3843175043245177501');" onmouseout="out('-3843175043245177501');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 368 +        // fields that are not applicable for this given entity type.                                             </span>
<span class="-2935519954456371455" onmouseenter="enter('-2935519954456371455');" onmouseout="out('-2935519954456371455');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 369 +        formService.removeNonApplicableFields(cmd, entityForm, entityType);                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 370 +                                                                                                                  </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 371 +        modifyAddEntityForm(entityForm, pathVars);                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 372 +                                                                                                                  </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 373 +        model.addAttribute(&quot;entityForm&quot;, entityForm);                                                             </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 374 +        model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 375 +                                                                                                                  </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 376 +        model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 377 +        model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 378 +        model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                              </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 379 +        setModelAttributes(model, sectionKey);                                                                    </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 380 +        return MODAL_CONTAINER_VIEW;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 381 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 382 +                                                                                                                  </span>
<span class="6822582914767657426" onmouseenter="enter('6822582914767657426');" onmouseout="out('6822582914767657426');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 383 +    // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic                  </span>
<span class="6925903770450869702" onmouseenter="enter('6925903770450869702');" onmouseout="out('6925903770450869702');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 384 +    // types for this entity.                                                                                     </span>
<span class="3096473113628081949" onmouseenter="enter('3096473113628081949');" onmouseout="out('3096473113628081949');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 385 +    protected String determineEntityType(String entityType, final ClassMetadata cmd)                              </span>
<span class="363372168864539985" onmouseenter="enter('363372168864539985');" onmouseout="out('363372168864539985');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 386 +            throws UnsupportedEncodingException {                                                                 </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 387          if (StringUtils.isBlank(entityType)) {                                                                    </span>
<span class="2333848870190395940" onmouseenter="enter('2333848870190395940');" onmouseout="out('2333848870190395940');" style=""> 388              if (cmd.getPolymorphicEntities().getChildren().length == 0) {                                         </span>
<span class="2097783908693957449" onmouseenter="enter('2097783908693957449');" onmouseout="out('2097783908693957449');" style=""> 389                  entityType = cmd.getPolymorphicEntities().getFullyQualifiedClassname();                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 390              } else {                                                                                              </span>
<span class="-6902702564943152777" onmouseenter="enter('-6902702564943152777');" onmouseout="out('-6902702564943152777');" style=""> 391                  entityType = getDefaultEntityType();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 392              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 393          } else {                                                                                                  </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style=""> 394              entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 395          }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 396 -                                                                                                                  </span>
<span class="4098005746663533241" onmouseenter="enter('4098005746663533241');" onmouseout="out('4098005746663533241');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 397 -        EntityForm entityForm = formService.createEntityForm(cmd, sectionCrumbs);                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 398 -                                                                                                                  </span>
<span class="5826594571687596812" onmouseenter="enter('5826594571687596812');" onmouseout="out('5826594571687596812');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 399 -        // We need to make sure that the ceiling entity is set to the interface and the specific entity type      </span>
<span class="37161952125740808" onmouseenter="enter('37161952125740808');" onmouseout="out('37161952125740808');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 400 -        // is set to the type we&#x27;re going to be creating.                                                         </span>
<span class="5062735442039535924" onmouseenter="enter('5062735442039535924');" onmouseout="out('5062735442039535924');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 401 -        entityForm.setCeilingEntityClassname(cmd.getCeilingType());                                               </span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 402 -        entityForm.setEntityType(entityType);                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 403 -                                                                                                                  </span>
<span class="-5227856854691424770" onmouseenter="enter('-5227856854691424770');" onmouseout="out('-5227856854691424770');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 404 -        // When we initially build the class metadata (and thus, the entity form), we had all of the possible     </span>
<span class="5105619661852614163" onmouseenter="enter('5105619661852614163');" onmouseout="out('5105619661852614163');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 405 -        // polymorphic fields built out. Now that we have a concrete entity type to render, we can remove the     </span>
<span class="-3843175043245177501" onmouseenter="enter('-3843175043245177501');" onmouseout="out('-3843175043245177501');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 406 -        // fields that are not applicable for this given entity type.                                             </span>
<span class="-2935519954456371455" onmouseenter="enter('-2935519954456371455');" onmouseout="out('-2935519954456371455');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 407 -        formService.removeNonApplicableFields(cmd, entityForm, entityType);                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 408 -                                                                                                                  </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 409 -        modifyAddEntityForm(entityForm, pathVars);                                                                </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 410 -                                                                                                                  </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 411 -        model.addAttribute(&quot;entityForm&quot;, entityForm);                                                             </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 412 -        model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                                        </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 413 -                                                                                                                  </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 414 -        model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 415 -        model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 416 -        model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                              </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 417 -        setModelAttributes(model, sectionKey);                                                                    </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 418 -        return &quot;modules/modalContainer&quot;;                                                                          </span>
<span class="2597693607778452486" onmouseenter="enter('2597693607778452486');" onmouseout="out('2597693607778452486');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 419 +        return entityType;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420      }                                                                                                             </span>
<span  style=""> 421                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 422      /**                                                                                                           </span>
<span class="-2292124409166412817" onmouseenter="enter('-2292124409166412817');" onmouseout="out('-2292124409166412817');" style=""> 423       * Processes the request to add a new entity. If successful, returns a redirect to the newly created entity.  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 424       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 425       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 426       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 427       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 428       * @param pathVars                                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 429       * @param entityForm                                                                                          </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 430       * @param result                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 431       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 432       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 433       */                                                                                                           </span>
<span class="-1840738840686664300" onmouseenter="enter('-1840738840686664300');" onmouseout="out('-1840738840686664300');" style=""> 434      @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.POST)                                                  </span>
<span class="8551380442207718095" onmouseenter="enter('8551380442207718095');" onmouseout="out('8551380442207718095');" style=""> 435      public String addEntity(HttpServletRequest request, HttpServletResponse response, Model model,                </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 436              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""> 437              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 438          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 439          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 440          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                                 </span>
<span class="2596618104185041854" onmouseenter="enter('2596618104185041854');" onmouseout="out('2596618104185041854');" style=""><abbr title=" 441          ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 441          ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassName, sectionðŸ”µ</abbr></span>
<span  style=""> 442                                                                                                                    </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 443          extractDynamicFormFields(cmd, entityForm);                                                                </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 444          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 444          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCuðŸ”µ</abbr></span>
<span class="-4281879219750019053" onmouseenter="enter('-4281879219750019053');" onmouseout="out('-4281879219750019053');" style=""> 445          Entity entity = service.addEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();                </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 446          entityFormValidator.validate(entityForm, entity, result);                                                 </span>
<span  style=""> 447                                                                                                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 448          if (result.hasErrors()) {                                                                                 </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 449              entityForm.clearFieldsMap();                                                                          </span>
<span class="-312181662169537666" onmouseenter="enter('-312181662169537666');" onmouseout="out('-312181662169537666');" style=""> 450              formService.populateEntityForm(cmd, entity, entityForm, sectionCrumbs);                               </span>
<span  style=""> 451                                                                                                                    </span>
<span class="254171966199148419" onmouseenter="enter('254171966199148419');" onmouseout="out('254171966199148419');" style=""> 452              formService.removeNonApplicableFields(cmd, entityForm, entityForm.getEntityType());                   </span>
<span  style=""> 453                                                                                                                    </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 454              modifyAddEntityForm(entityForm, pathVars);                                                            </span>
<span  style=""> 455                                                                                                                    </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 456              model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 457              model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                 </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 458              model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                          </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 459              model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());             </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 460              setModelAttributes(model, sectionKey);                                                                </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 461 -            return &quot;modules/modalContainer&quot;;                                                                      </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 462 +            return MODAL_CONTAINER_VIEW;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463          }                                                                                                         </span>
<span  style=""> 464                                                                                                                    </span>
<span class="7931002159447649906" onmouseenter="enter('7931002159447649906');" onmouseout="out('7931002159447649906');" style=""> 465          // Note that AJAX Redirects need the context path prepended to them                                       </span>
<span class="-9104189425594863479" onmouseenter="enter('-9104189425594863479');" onmouseout="out('-9104189425594863479');" style=""><abbr title=" 466          return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).getValue();"> 466          return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).getValue(ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 467 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 468 +                                                                                                                  </span>
<span class="1290933159858539781" onmouseenter="enter('1290933159858539781');" onmouseout="out('1290933159858539781');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 469 +    @RequestMapping(value = &quot;/{id}/duplicate&quot;, method = RequestMethod.POST)                                       </span>
<span class="-7829728733805273999" onmouseenter="enter('-7829728733805273999');" onmouseout="out('-7829728733805273999');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 470 +    public String duplicateEntity(final HttpServletRequest request,                                               </span>
<span class="277417182565607361" onmouseenter="enter('277417182565607361');" onmouseout="out('277417182565607361');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 471 +            final HttpServletResponse response,                                                                   </span>
<span class="7665770463560391322" onmouseenter="enter('7665770463560391322');" onmouseout="out('7665770463560391322');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 472 +            final Model model,                                                                                    </span>
<span class="5144416334471976319" onmouseenter="enter('5144416334471976319');" onmouseout="out('5144416334471976319');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 473 +            @PathVariable final Map&lt;String, String&gt; pathVars,                                                     </span>
<span class="5884230296910152604" onmouseenter="enter('5884230296910152604');" onmouseout="out('5884230296910152604');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 474 +            @PathVariable(value = &quot;id&quot;) final String id,                                                          </span>
<span class="5134952934925976911" onmouseenter="enter('5134952934925976911');" onmouseout="out('5134952934925976911');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 475 +            @ModelAttribute(value = &quot;entityForm&quot;) final EntityForm entityForm,                                    </span>
<span class="3593210188792847894" onmouseenter="enter('3593210188792847894');" onmouseout="out('3593210188792847894');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 476 +            final BindingResult result) throws Exception {                                                        </span>
<span class="5473402149144087547" onmouseenter="enter('5473402149144087547');" onmouseout="out('5473402149144087547');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 477 +        final String sectionKey = getSectionKey(pathVars);                                                        </span>
<span class="5437662011929987553" onmouseenter="enter('5437662011929987553');" onmouseout="out('5437662011929987553');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 478 +        final String sectionClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="8553976943183535096" onmouseenter="enter('8553976943183535096');" onmouseout="out('8553976943183535096');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 479 +        final Class&lt;?&gt; entityClass = dynamicEntityDao.getImplClass(sectionClassName);                             </span>
<span class="3365797270076600425" onmouseenter="enter('3365797270076600425');" onmouseout="out('3365797270076600425');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 480 +        final long identifier = Long.parseLong(id);                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 481 +                                                                                                                  </span>
<span class="-138107922525045121" onmouseenter="enter('-138107922525045121');" onmouseout="out('-138107922525045121');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 482 +        if (duplicator.validate(entityClass, identifier)) {                                                       </span>
<span class="5493542447860389431" onmouseenter="enter('5493542447860389431');" onmouseout="out('5493542447860389431');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 483 +            final Object duplicate;                                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 484 +                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 485 +            try {                                                                                                 </span>
<span class="-2283233085854885260" onmouseenter="enter('-2283233085854885260');" onmouseout="out('-2283233085854885260');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 486 +                duplicate = duplicator.copy(entityClass, identifier);                                             </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 487 +            } catch (Exception e) {                                                                               </span>
<span class="-8850460393574909327" onmouseenter="enter('-8850460393574909327');" onmouseout="out('-8850460393574909327');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 488 +                LOG.error(&quot;Could not duplicate entity&quot;, e);                                                       </span>
<span class="-7503880796159563304" onmouseenter="enter('-7503880796159563304');" onmouseout="out('-7503880796159563304');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 489 +                return getErrorDuplicatingResponse(response, &quot;Duplication_Failure&quot;);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 490 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 491 +                                                                                                                  </span>
<span class="9202899875978069713" onmouseenter="enter('9202899875978069713');" onmouseout="out('9202899875978069713');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 492 +            final Serializable dupId = genericEntityService.getIdentifier(duplicate);                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 493 +                                                                                                                  </span>
<span class="7931002159447649906" onmouseenter="enter('7931002159447649906');" onmouseout="out('7931002159447649906');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 494 +            // Note that AJAX Redirects need the context path prepended to them                                   </span>
<span class="6804960621276438337" onmouseenter="enter('6804960621276438337');" onmouseout="out('6804960621276438337');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 495 +            return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + dupId;                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 496 +        } else {                                                                                                  </span>
<span class="-110948502599545681" onmouseenter="enter('-110948502599545681');" onmouseout="out('-110948502599545681');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 497 +            return getErrorDuplicatingResponse(response, &quot;Validation_Failure&quot;);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 498 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 499 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 500 +                                                                                                                  </span>
<span class="-106656131545478097" onmouseenter="enter('-106656131545478097');" onmouseout="out('-106656131545478097');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 501 +    protected String getErrorDuplicatingResponse(HttpServletResponse response, String code) {                     </span>
<span class="7659712838923572459" onmouseenter="enter('7659712838923572459');" onmouseout="out('7659712838923572459');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 502 +        List&lt;Map&lt;String, Object&gt;&gt; errors = new ArrayList&lt;&gt;();                                                     </span>
<span class="-6240695079450735253" onmouseenter="enter('-6240695079450735253');" onmouseout="out('-6240695079450735253');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 503 +        String message;                                                                                           </span>
<span class="-7826420477706002406" onmouseenter="enter('-7826420477706002406');" onmouseout="out('-7826420477706002406');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 504 +        BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();                   </span>
<span class="-2727648393614728" onmouseenter="enter('-2727648393614728');" onmouseout="out('-2727648393614728');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 505 +        if (context != null &amp;&amp; context.getMessageSource() != null) {                                              </span>
<span class="-5978418614812499702" onmouseenter="enter('-5978418614812499702');" onmouseout="out('-5978418614812499702');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 506 +            message = context.getMessageSource()                                                                  </span>
<span class="1624598595284946587" onmouseenter="enter('1624598595284946587');" onmouseout="out('1624598595284946587');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 507 +                    .getMessage(code, null, code, context.getJavaLocale());                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 508 +        } else {                                                                                                  </span>
<span class="-9004243737964586892" onmouseenter="enter('-9004243737964586892');" onmouseout="out('-9004243737964586892');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 509 +            LOG.warn(                                                                                             </span>
<span class="6269614064328325287" onmouseenter="enter('6269614064328325287');" onmouseout="out('6269614064328325287');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 510 +                    &quot;Could not find the MessageSource on the current request, &quot;                                   </span>
<span class="-8208830135626721740" onmouseenter="enter('-8208830135626721740');" onmouseout="out('-8208830135626721740');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 511 +                            + &quot;not translating the message key&quot;);                                                 </span>
<span class="599114272120646428" onmouseenter="enter('599114272120646428');" onmouseout="out('599114272120646428');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 512 +            message = &quot;Duplication_Failure&quot;;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 513 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 514 +                                                                                                                  </span>
<span class="-4703377271641004207" onmouseenter="enter('-4703377271641004207');" onmouseout="out('-4703377271641004207');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 515 +        Map&lt;String, Object&gt; errorMap = new HashMap&lt;&gt;();                                                           </span>
<span class="2851590661979449603" onmouseenter="enter('2851590661979449603');" onmouseout="out('2851590661979449603');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 516 +        errorMap.put(&quot;errorType&quot;, &quot;global&quot;);                                                                      </span>
<span class="4738760182182965590" onmouseenter="enter('4738760182182965590');" onmouseout="out('4738760182182965590');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 517 +        errorMap.put(&quot;code&quot;, code);                                                                               </span>
<span class="7426718838785534996" onmouseenter="enter('7426718838785534996');" onmouseout="out('7426718838785534996');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 518 +        errorMap.put(&quot;message&quot;, message);                                                                         </span>
<span class="-4906289066975989946" onmouseenter="enter('-4906289066975989946');" onmouseout="out('-4906289066975989946');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 519 +        errors.add(errorMap);                                                                                     </span>
<span class="-8734340547513070222" onmouseenter="enter('-8734340547513070222');" onmouseout="out('-8734340547513070222');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 520 +        return new JsonResponse(response).with(&quot;errors&quot;, errors).done();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521      }                                                                                                             </span>
<span  style=""> 522                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 523      /**                                                                                                           </span>
<span class="9102199281013466170" onmouseenter="enter('9102199281013466170');" onmouseout="out('9102199281013466170');" style=""> 524       * Renders the main entity form for the specified entity                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 525       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 526       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 527       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 528       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 529       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 530       * @param id                                                                                                  </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 531       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 532       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 533       */                                                                                                           </span>
<span class="7083955269921705584" onmouseenter="enter('7083955269921705584');" onmouseout="out('7083955269921705584');" style=""> 534      @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)                                                  </span>
<span class="-4309552397998806559" onmouseenter="enter('-4309552397998806559');" onmouseout="out('-4309552397998806559');" style=""> 535      public String viewEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,           </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 536              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="-2194094146044801021" onmouseenter="enter('-2194094146044801021');" onmouseout="out('-2194094146044801021');" style=""> 537              @PathVariable(&quot;id&quot;) String id) throws Exception {                                                     </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 538          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 539          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 540          List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                                    </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""> 541          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);  </span>
<span  style=""> 542                                                                                                                    </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 543          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span class="-8780243800866475465" onmouseenter="enter('-8780243800866475465');" onmouseout="out('-8780243800866475465');" style=""> 544          Entity entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];             </span>
<span  style=""> 545                                                                                                                    </span>


<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""> 546          Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);  </span>
<span  style=""> 547                                                                                                                    </span>
<span class="872584542219399793" onmouseenter="enter('872584542219399793');" onmouseout="out('872584542219399793');" style=""> 548          EntityForm entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);                 </span>
<span  style=""> 549                                                                                                                    </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 550 -        if (isAddRequest(entity)) {                                                                               </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 551 -            modifyAddEntityForm(entityForm, pathVars);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 552 -        } else {                                                                                                  </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 553 -            modifyEntityForm(entityForm, pathVars);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 554 -        }                                                                                                         </span>
<span class="1451551715319124344" onmouseenter="enter('1451551715319124344');" onmouseout="out('1451551715319124344');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 555 +        modifyEntityForm(entity, entityForm, pathVars);                                                           </span>
<span  style=""> 556                                                                                                                    </span>
<span class="1981952247030149381" onmouseenter="enter('1981952247030149381');" onmouseout="out('1981952247030149381');" style=""> 557          if (request.getParameter(&quot;headerFlash&quot;) != null) {                                                        </span>
<span class="-2367607735703612103" onmouseenter="enter('-2367607735703612103');" onmouseout="out('-2367607735703612103');" style=""> 558              model.addAttribute(&quot;headerFlash&quot;, request.getParameter(&quot;headerFlash&quot;));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 559          }                                                                                                         </span>
<span  style=""> 560                                                                                                                    </span>
<span class="-6569554975283424126" onmouseenter="enter('-6569554975283424126');" onmouseout="out('-6569554975283424126');" style=""> 561          // Set the sectionKey again incase this is a typed entity                                                 </span>
<span class="4201932972037321722" onmouseenter="enter('4201932972037321722');" onmouseout="out('4201932972037321722');" style=""> 562          entityForm.setSectionKey(sectionKey);                                                                     </span>
<span  style=""> 563                                                                                                                    </span>
<span class="5387752430767952558" onmouseenter="enter('5387752430767952558');" onmouseout="out('5387752430767952558');" style=""> 564          // Build the current url in the cast that this is a typed entity                                          </span>
<span class="3856485652570637824" onmouseenter="enter('3856485652570637824');" onmouseout="out('3856485652570637824');" style=""> 565          String originatingUri = new UrlPathHelper().getOriginatingRequestUri(request);                            </span>
<span class="-1728408616530607173" onmouseenter="enter('-1728408616530607173');" onmouseout="out('-1728408616530607173');" style=""> 566          int startIndex = request.getContextPath().length();                                                       </span>
<span  style=""> 567                                                                                                                    </span>
<span class="654052499558570629" onmouseenter="enter('654052499558570629');" onmouseout="out('654052499558570629');" style=""> 568          // Remove the context path from servlet path                                                              </span>
<span class="526107488063217153" onmouseenter="enter('526107488063217153');" onmouseout="out('526107488063217153');" style=""> 569          String currentUrl = originatingUri.substring(startIndex);                                                 </span>
<span  style=""> 570                                                                                                                    </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 571          model.addAttribute(&quot;entity&quot;, entity);                                                                     </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 572          model.addAttribute(&quot;entityForm&quot;, entityForm);                                                             </span>
<span class="-4977411250845897884" onmouseenter="enter('-4977411250845897884');" onmouseout="out('-4977411250845897884');" style=""> 573          model.addAttribute(&quot;currentUrl&quot;, currentUrl);                                                             </span>

<span  style=""> 574                                                                                                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 575          setModelAttributes(model, sectionKey);                                                                    </span>
<span  style=""> 576                                                                                                                    </span>
<span class="8236570979651257825" onmouseenter="enter('8236570979651257825');" onmouseout="out('8236570979651257825');" style=""> 577          // We want to replace author ids with their names                                                         </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style=""> 578          addAuditableDisplayFields(entityForm);                                                                    </span>
<span  style=""> 579                                                                                                                    </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 580 -        if (isAjaxRequest(request)) {                                                                             </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 581 -            entityForm.setReadOnly();                                                                             </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 582 -            model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                                   </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 583 -            model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                         </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 584 -            return &quot;modules/modalContainer&quot;;                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 585 -        } else {                                                                                                  </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 586 -            model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                            </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 587 -            model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                         </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 588 -            return &quot;modules/defaultContainer&quot;;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 589 -        }                                                                                                         </span>
<span class="858139107025117803" onmouseenter="enter('858139107025117803');" onmouseout="out('858139107025117803');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 590 +        return resolveAppropriateEntityView(request, model, entityForm);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591      }                                                                                                             </span>
<span  style=""> 592                                                                                                                    </span>
<span class="9182660926479189949" onmouseenter="enter('9182660926479189949');" onmouseout="out('9182660926479189949');" style=""><abbr title=" 593      protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, String&gt; pathVars,"> 593      protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, String&gt; pathðŸ”µ</abbr></span>
<span class="4477928710658117231" onmouseenter="enter('4477928710658117231');" onmouseout="out('4477928710658117231');" style=""> 594                                                                ClassMetadata cmd, Entity entity,                   </span>
<span class="5660295431162582196" onmouseenter="enter('5660295431162582196');" onmouseout="out('5660295431162582196');" style=""> 595                                                                List&lt;SectionCrumb&gt; crumbs) throws Exception {       </span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style=""> 596          String tabName = pathVars.get(&quot;tabName&quot;);                                                                 </span>
<span class="5384642555226517985" onmouseenter="enter('5384642555226517985');" onmouseout="out('5384642555226517985');" style=""> 597          if (StringUtils.isEmpty(tabName)) {                                                                       </span>
<span class="-3672533750283461484" onmouseenter="enter('-3672533750283461484');" onmouseout="out('-3672533750283461484');" style=""> 598              tabName = cmd.getFirstTab() == null ? &quot;General&quot; : cmd.getFirstTab().getTabName();                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599          }                                                                                                         </span>
<span class="-5882478663361935855" onmouseenter="enter('-5882478663361935855');" onmouseout="out('-5882478663361935855');" style=""> 600          return service.getRecordsForSelectedTab(cmd, entity, crumbs, tabName);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601      }                                                                                                             </span>
<span  style=""> 602                                                                                                                    </span>
<span class="1953795048205106952" onmouseenter="enter('1953795048205106952');" onmouseout="out('1953795048205106952');" style=""> 603      private boolean isAddRequest(Entity entity) {                                                                 </span>
<span class="-2989581670667655563" onmouseenter="enter('-2989581670667655563');" onmouseout="out('-2989581670667655563');" style=""> 604          ExtensionResultHolder&lt;Boolean&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                              </span>
<span class="2773544387861748911" onmouseenter="enter('2773544387861748911');" onmouseout="out('2773544387861748911');" style=""> 605          ExtensionResultStatusType result = extensionManager.getProxy().isAddRequest(entity, resultHolder);        </span>
<span class="8622638495597819717" onmouseenter="enter('8622638495597819717');" onmouseout="out('8622638495597819717');" style=""> 606          if (result.equals(ExtensionResultStatusType.NOT_HANDLED)) {                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 607              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 608          }                                                                                                         </span>
<span  style=""> 609                                                                                                                    </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 610          return resultHolder.getResult();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 611      }                                                                                                             </span>
<span  style=""> 612                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 613      /**                                                                                                           </span>
<span class="-4864218972040039628" onmouseenter="enter('-4864218972040039628');" onmouseout="out('-4864218972040039628');" style=""> 614       * Attempts to get the List Grid for the selected tab.                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 615       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 616       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 617       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 618       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 619       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 620       * @param id                                                                                                  </span>
<span class="4841027518362301903" onmouseenter="enter('4841027518362301903');" onmouseout="out('4841027518362301903');" style=""> 621       * @param tabName                                                                                             </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 622       * @param entityForm                                                                                          </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 623       * @param entity                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 624       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 625       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 626       */                                                                                                           </span>
<span class="-7675092144868804288" onmouseenter="enter('-7675092144868804288');" onmouseout="out('-7675092144868804288');" style=""> 627      @RequestMapping(value = &quot;/{id}/{tab:[0-9]+}/{tabName}&quot;, method = RequestMethod.POST)                          </span>
<span class="-2248541185927650044" onmouseenter="enter('-2248541185927650044');" onmouseout="out('-2248541185927650044');" style=""> 628      public String viewEntityTab(HttpServletRequest request, HttpServletResponse response, Model model,            </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 629              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 630              @PathVariable(value = &quot;id&quot;) String id,                                                                </span>
<span class="2259450910520289810" onmouseenter="enter('2259450910520289810');" onmouseout="out('2259450910520289810');" style=""> 631              @PathVariable(value = &quot;tabName&quot;) String tabName,                                                      </span>
<span class="2754607649135651414" onmouseenter="enter('2754607649135651414');" onmouseout="out('2754607649135651414');" style=""> 632              @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm,                                          </span>
<span class="-2950467864443381399" onmouseenter="enter('-2950467864443381399');" onmouseout="out('-2950467864443381399');" style=""> 633              @ModelAttribute(value = &quot;entity&quot;) Entity entity) throws Exception {                                   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 634          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 635          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 636          List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                                    </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""> 637          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);  </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 638          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 639          entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];                    </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""> 640          Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);  </span>
<span class="-3846048132763499568" onmouseenter="enter('-3846048132763499568');" onmouseout="out('-3846048132763499568');" style=""> 641          entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);                            </span>
<span  style=""> 642                                                                                                                    </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 643 -        if (isAddRequest(entity)) {                                                                               </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 644 -            modifyAddEntityForm(entityForm, pathVars);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 645 -        } else {                                                                                                  </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 646 -            modifyEntityForm(entityForm, pathVars);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 647 -        }                                                                                                         </span>
<span class="1451551715319124344" onmouseenter="enter('1451551715319124344');" onmouseout="out('1451551715319124344');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 648 +        modifyEntityForm(entity, entityForm, pathVars);                                                           </span>
<span  style=""> 649                                                                                                                    </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 650          model.addAttribute(&quot;entity&quot;, entity);                                                                     </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 651          model.addAttribute(&quot;entityForm&quot;, entityForm);                                                             </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 652          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span  style=""> 653                                                                                                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 654          setModelAttributes(model, sectionKey);                                                                    </span>
<span  style=""> 655                                                                                                                    </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 656          model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                                </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 657          model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                             </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 658 -        return &quot;modules/defaultContainer&quot;;                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 659 +                                                                                                                  </span>
<span class="-4487883013655706388" onmouseenter="enter('-4487883013655706388');" onmouseout="out('-4487883013655706388');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 660 +        return DEFAULT_CONTAINER_VIEW;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661      }                                                                                                             </span>
<span  style=""> 662                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 663      /**                                                                                                           </span>
<span class="26428616724277901" onmouseenter="enter('26428616724277901');" onmouseout="out('26428616724277901');" style=""> 664       * Builds JSON that looks like this:                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 665       *                                                                                                            </span>
<span class="-619170819873097874" onmouseenter="enter('-619170819873097874');" onmouseout="out('-619170819873097874');" style=""> 666       * {&quot;errors&quot;:                                                                                                 </span>
<span class="-7867797149207986089" onmouseenter="enter('-7867797149207986089');" onmouseout="out('-7867797149207986089');" style=""> 667       *      [{&quot;message&quot;:&quot;This field is Required&quot;,                                                                 </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 668       *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                                 </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 669       *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                         </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 670       *        &quot;errorType&quot;, &quot;field&quot;,                                                                               </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 671       *        &quot;tab&quot;: &quot;General&quot;                                                                                    </span>
<span class="762081609125064039" onmouseenter="enter('762081609125064039');" onmouseout="out('762081609125064039');" style=""> 672       *        },                                                                                                  </span>
<span class="2065208195238134241" onmouseenter="enter('2065208195238134241');" onmouseout="out('2065208195238134241');" style=""> 673       *        {&quot;message&quot;:&quot;This field is Required&quot;,                                                                </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 674       *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                                 </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 675       *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                         </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 676       *        &quot;errorType&quot;, &quot;field&quot;,                                                                               </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 677       *        &quot;tab&quot;: &quot;General&quot;                                                                                    </span>
<span class="-832778532632947969" onmouseenter="enter('-832778532632947969');" onmouseout="out('-832778532632947969');" style=""> 678       *        }]                                                                                                  </span>
<span class="8941010846014250828" onmouseenter="enter('8941010846014250828');" onmouseout="out('8941010846014250828');" style=""> 679       * }                                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 680       *                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 681       */                                                                                                           </span>
<span class="726178843151373675" onmouseenter="enter('726178843151373675');" onmouseout="out('726178843151373675');" style=""> 682      @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST, produces = &quot;application/json&quot;)                  </span>
<span class="-4245682307765667372" onmouseenter="enter('-4245682307765667372');" onmouseout="out('-4245682307765667372');" style=""> 683      public String saveEntityJson(HttpServletRequest request, HttpServletResponse response, Model model,           </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 684              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 685              @PathVariable(value = &quot;id&quot;) String id,                                                                </span>
<span class="-5165411007609652701" onmouseenter="enter('-5165411007609652701');" onmouseout="out('-5165411007609652701');" style=""> 686              @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm, BindingResult result,                    </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 687              RedirectAttributes ra) throws Exception {                                                             </span>
<span  style=""> 688                                                                                                                    </span>
<span class="-7049584637685461961" onmouseenter="enter('-7049584637685461961');" onmouseout="out('-7049584637685461961');" style=""> 689          saveEntity(request, response, model, pathVars, id, entityForm, result, ra);                               </span>
<span  style=""> 690                                                                                                                    </span>
<span class="2770382331963423086" onmouseenter="enter('2770382331963423086');" onmouseout="out('2770382331963423086');" style=""> 691          JsonResponse json = new JsonResponse(response);                                                           </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 692          if (result.hasErrors()) {                                                                                 </span>
<span class="6668101882629849049" onmouseenter="enter('6668101882629849049');" onmouseout="out('6668101882629849049');" style=""> 693              populateJsonValidationErrors(entityForm, result, json);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694          }                                                                                                         </span>
<span class="-8719030961107019295" onmouseenter="enter('-8719030961107019295');" onmouseout="out('-8719030961107019295');" style=""> 695          List&lt;String&gt; dirtyList = buildDirtyList(pathVars, request, id);                                           </span>
<span class="-2397478597494600131" onmouseenter="enter('-2397478597494600131');" onmouseout="out('-2397478597494600131');" style=""> 696          if (CollectionUtils.isNotEmpty(dirtyList)) {                                                              </span>
<span class="-6863151800017638945" onmouseenter="enter('-6863151800017638945');" onmouseout="out('-6863151800017638945');" style=""> 697              json.with(&quot;dirty&quot;, dirtyList);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 698          }                                                                                                         </span>
<span  style=""> 699                                                                                                                    </span>
<span class="1148846903613025505" onmouseenter="enter('1148846903613025505');" onmouseout="out('1148846903613025505');" style=""> 700          ExtensionResultHolder&lt;String&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                               </span>
<span class="772761850497532920" onmouseenter="enter('772761850497532920');" onmouseout="out('772761850497532920');" style=""><abbr title=" 701          ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonResponse(response, result.hasErrors(), getSectionKey(pathVars), id, resultHolder);"> 701          ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonResponse(reðŸ”µ</abbr></span>
<span class="-7225919658162387284" onmouseenter="enter('-7225919658162387284');" onmouseout="out('-7225919658162387284');" style=""> 702          if (resultStatusType.equals(ExtensionResultStatusType.HANDLED)) {                                         </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 703              return resultHolder.getResult();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 704          }                                                                                                         </span>
<span  style=""> 705                                                                                                                    </span>
<span class="-3901811907821215875" onmouseenter="enter('-3901811907821215875');" onmouseout="out('-3901811907821215875');" style=""> 706          return json.done();                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 707      }                                                                                                             </span>
<span  style=""> 708                                                                                                                    </span>
<span class="-2624067384280123527" onmouseenter="enter('-2624067384280123527');" onmouseout="out('-2624067384280123527');" style=""><abbr title=" 709      public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String id) throws ServiceException {"> 709      public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String id) throwsðŸ”µ</abbr></span>
<span class="-6199220983064020273" onmouseenter="enter('-6199220983064020273');" onmouseout="out('-6199220983064020273');" style=""> 710          List&lt;String&gt; dirtyList = new ArrayList&lt;&gt;();                                                               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 711          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 712          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 713          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 714          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 714          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVðŸ”µ</abbr></span>
<span class="-6293964121119142853" onmouseenter="enter('-6293964121119142853');" onmouseout="out('-6293964121119142853');" style=""> 715          ClassMetadata cmd = null;                                                                                 </span>
<span class="-6100049554794336383" onmouseenter="enter('-6100049554794336383');" onmouseout="out('-6100049554794336383');" style=""> 716          Entity entity = null;                                                                                     </span>
<span class="-7221558264805358950" onmouseenter="enter('-7221558264805358950');" onmouseout="out('-7221558264805358950');" style=""> 717          cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();                             </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 718          entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];                    </span>
<span  style=""> 719                                                                                                                    </span>
<span class="-538034338216639378" onmouseenter="enter('-538034338216639378');" onmouseout="out('-538034338216639378');" style=""> 720          for (Property p: entity.getProperties()) {                                                                </span>
<span class="-5586383415891827802" onmouseenter="enter('-5586383415891827802');" onmouseout="out('-5586383415891827802');" style=""> 721              if (p.getIsDirty()) {                                                                                 </span>
<span class="-1571805809811752662" onmouseenter="enter('-1571805809811752662');" onmouseout="out('-1571805809811752662');" style=""> 722                  dirtyList.add(p.getName());                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 723              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724          }                                                                                                         </span>
<span class="7211627429904225799" onmouseenter="enter('7211627429904225799');" onmouseout="out('7211627429904225799');" style=""> 725          return dirtyList;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 726      }                                                                                                             </span>
<span  style=""> 727                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 728      /**                                                                                                           </span>
<span class="-1912365624495655250" onmouseenter="enter('-1912365624495655250');" onmouseout="out('-1912365624495655250');" style=""> 729       * Attempts to save the given entity. If validation is unsuccessful, it will re-render the entity form with   </span>
<span class="3378821078357952120" onmouseenter="enter('3378821078357952120');" onmouseout="out('3378821078357952120');" style=""> 730       * error fields highlighted. On a successful save, it will refresh the entity page.                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 731       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 732       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 733       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 734       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 735       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 736       * @param id                                                                                                  </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 737       * @param entityForm                                                                                          </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 738       * @param result                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 739       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 740       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 741       */                                                                                                           </span>
<span class="681227659796054179" onmouseenter="enter('681227659796054179');" onmouseout="out('681227659796054179');" style=""> 742      @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST)                                                 </span>
<span class="2696827203115285075" onmouseenter="enter('2696827203115285075');" onmouseout="out('2696827203115285075');" style=""> 743      public String saveEntity(HttpServletRequest request, HttpServletResponse response, Model model,               </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 744              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 745              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 746              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,                      </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 747              RedirectAttributes ra) throws Exception {                                                             </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 748          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 749          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 750          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 751          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 751          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 752          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span  style=""> 753                                                                                                                    </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 754          extractDynamicFormFields(cmd, entityForm);                                                                </span>
<span  style=""> 755                                                                                                                    </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 756          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 756          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCuðŸ”µ</abbr></span>
<span class="-4517703585527939334" onmouseenter="enter('-4517703585527939334');" onmouseout="out('-4517703585527939334');" style=""> 757          Entity entity = service.updateEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();             </span>
<span  style=""> 758                                                                                                                    </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 759          entityFormValidator.validate(entityForm, entity, result);                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 760 +                                                                                                                  </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 761          if (result.hasErrors()) {                                                                                 </span>
<span class="-9083492279253959347" onmouseenter="enter('-9083492279253959347');" onmouseout="out('-9083492279253959347');" style=""> 762              model.addAttribute(&quot;headerFlash&quot;, &quot;save.unsuccessful&quot;);                                               </span>
<span class="-3255113992478543295" onmouseenter="enter('-3255113992478543295');" onmouseout="out('-3255113992478543295');" style=""> 763              model.addAttribute(&quot;headerFlashAlert&quot;, true);                                                         </span>
<span  style=""> 764                                                                                                                    </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 765              Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 765              Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 766              entityForm.clearFieldsMap();                                                                          </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 767              formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);                </span>
<span  style=""> 768                                                                                                                    </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 769 -            if (isAddRequest(entity)) {                                                                           </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 770 -                modifyAddEntityForm(entityForm, pathVars);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 771 -            } else {                                                                                              </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 772 -                modifyEntityForm(entityForm, pathVars);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 773 -            }                                                                                                     </span>
<span class="1451551715319124344" onmouseenter="enter('1451551715319124344');" onmouseout="out('1451551715319124344');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 774 +            modifyEntityForm(entity, entityForm, pathVars);                                                       </span>
<span  style=""> 775                                                                                                                    </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 776              model.addAttribute(&quot;entity&quot;, entity);                                                                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 777              model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                 </span>
<span  style=""> 778                                                                                                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 779              setModelAttributes(model, sectionKey);                                                                </span>
<span  style=""> 780                                                                                                                    </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 781 -            if (isAjaxRequest(request)) {                                                                         </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 782 -                entityForm.setReadOnly();                                                                         </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 783 -                model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                               </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 784 -                model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                     </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 785 -                return &quot;modules/modalContainer&quot;;                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 786 -            } else {                                                                                              </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 787 -                model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                        </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 788 -                model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                     </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 789 -                return &quot;modules/defaultContainer&quot;;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 790 -            }                                                                                                     </span>
<span class="858139107025117803" onmouseenter="enter('858139107025117803');" onmouseout="out('858139107025117803');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 791 +            return resolveAppropriateEntityView(request, model, entityForm);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 792          }                                                                                                         </span>
<span  style=""> 793                                                                                                                    </span>
<span class="-8977665602521560288" onmouseenter="enter('-8977665602521560288');" onmouseout="out('-8977665602521560288');" style=""> 794          ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;save.successful&quot;);                                                   </span>
<span  style=""> 795                                                                                                                    </span>
<span class="5326436654777975784" onmouseenter="enter('5326436654777975784');" onmouseout="out('5326436654777975784');" style=""> 796          return &quot;redirect:/&quot; + sectionKey + &quot;/&quot; + id;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 797 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 798 +                                                                                                                  </span>
<span class="-1036069149620696687" onmouseenter="enter('-1036069149620696687');" onmouseout="out('-1036069149620696687');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 799 +    protected void modifyEntityForm(final Entity entity, final EntityForm entityForm,                             </span>
<span class="-2182671422299427893" onmouseenter="enter('-2182671422299427893');" onmouseout="out('-2182671422299427893');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 800 +            final Map&lt;String, String&gt; pathVars) throws Exception {                                                </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 801 +        if (isAddRequest(entity)) {                                                                               </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 802 +            modifyAddEntityForm(entityForm, pathVars);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 803 +        } else {                                                                                                  </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 804 +            modifyEntityForm(entityForm, pathVars);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 805 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 806 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 807 +                                                                                                                  </span>
<span class="7327611436230860688" onmouseenter="enter('7327611436230860688');" onmouseout="out('7327611436230860688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 808 +    protected String resolveAppropriateEntityView(final HttpServletRequest request,                               </span>
<span class="7665770463560391322" onmouseenter="enter('7665770463560391322');" onmouseout="out('7665770463560391322');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 809 +            final Model model,                                                                                    </span>
<span class="6537819747648345888" onmouseenter="enter('6537819747648345888');" onmouseout="out('6537819747648345888');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 810 +            final @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) {                                  </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 811 +        if (isAjaxRequest(request)) {                                                                             </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 812 +            entityForm.setReadOnly();                                                                             </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 813 +            model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                                   </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 814 +            model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                         </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 815 +            return MODAL_CONTAINER_VIEW;                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 816 +        } else {                                                                                                  </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 817 +            model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                            </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 818 +            model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                         </span>
<span class="-4487883013655706388" onmouseenter="enter('-4487883013655706388');" onmouseout="out('-4487883013655706388');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 819 +            return DEFAULT_CONTAINER_VIEW;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 820 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 821      }                                                                                                             </span>
<span  style=""> 822                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 823      /**                                                                                                           </span>
<span class="4876253458579857532" onmouseenter="enter('4876253458579857532');" onmouseout="out('4876253458579857532');" style=""> 824       * Attempts to remove the given entity.                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 825       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 826       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 827       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 828       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 829       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 830       * @param id                                                                                                  </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 831       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 832       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 833       */                                                                                                           </span>
<span class="8293921381301703428" onmouseenter="enter('8293921381301703428');" onmouseout="out('8293921381301703428');" style=""> 834      @RequestMapping(value = &quot;/{id}/delete&quot;, method = RequestMethod.POST)                                          </span>
<span class="2313354717081876463" onmouseenter="enter('2313354717081876463');" onmouseout="out('2313354717081876463');" style=""> 835      public String removeEntity(HttpServletRequest request, HttpServletResponse response, Model model,             </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 836              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 837              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 838              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,                      </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 839              RedirectAttributes ra) throws Exception {                                                             </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 840          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 841          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 842          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span  style=""> 843                                                                                                                    </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 844          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 844          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCuðŸ”µ</abbr></span>
<span class="6624819200143935214" onmouseenter="enter('6624819200143935214');" onmouseout="out('6624819200143935214');" style=""> 845          Entity entity = service.removeEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();             </span>
<span class="-6561774320633688873" onmouseenter="enter('-6561774320633688873');" onmouseout="out('-6561774320633688873');" style=""> 846          // Removal does not normally return an Entity unless there is some validation error                       </span>
<span class="-2807113977407494827" onmouseenter="enter('-2807113977407494827');" onmouseout="out('-2807113977407494827');" style=""> 847          if (entity != null) {                                                                                     </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 848              entityFormValidator.validate(entityForm, entity, result);                                             </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 849              if (result.hasErrors()) {                                                                             </span>
<span class="354313568014337940" onmouseenter="enter('354313568014337940');" onmouseout="out('354313568014337940');" style=""> 850                  // Create a flash attribute for the unsuccessful delete                                           </span>
<span class="-3408473788799892596" onmouseenter="enter('-3408473788799892596');" onmouseout="out('-3408473788799892596');" style=""> 851                  FlashMap fm = new FlashMap();                                                                     </span>
<span class="-3785724779356953427" onmouseenter="enter('-3785724779356953427');" onmouseout="out('-3785724779356953427');" style=""> 852                  fm.put(&quot;headerFlash&quot;, &quot;delete.unsuccessful&quot;);                                                     </span>
<span class="2000410372434500283" onmouseenter="enter('2000410372434500283');" onmouseout="out('2000410372434500283');" style=""> 853                  fm.put(&quot;headerFlashAlert&quot;, true);                                                                 </span>
<span class="-216272657842661141" onmouseenter="enter('-216272657842661141');" onmouseout="out('-216272657842661141');" style=""> 854                  request.setAttribute(DispatcherServlet.OUTPUT_FLASH_MAP_ATTRIBUTE, fm);                           </span>
<span  style=""> 855                                                                                                                    </span>
<span class="-9154666565283892619" onmouseenter="enter('-9154666565283892619');" onmouseout="out('-9154666565283892619');" style=""> 856                  // Re-look back up the entity so that we can return something populated                           </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 857                  PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 857                  PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 858                  ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();       </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 859                  entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];            </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 860                  Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 860                  Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, ðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 861                  entityForm.clearFieldsMap();                                                                      </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 862                  formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);            </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 863                  modifyEntityForm(entityForm, pathVars);                                                           </span>
<span  style=""> 864                                                                                                                    </span>
<span class="-1358530666837283115" onmouseenter="enter('-1358530666837283115');" onmouseout="out('-1358530666837283115');" style=""> 865                  return populateJsonValidationErrors(entityForm, result, new JsonResponse(response))               </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style=""> 866                          .done();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 867              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 868          }                                                                                                         </span>
<span  style=""> 869                                                                                                                    </span>
<span class="3611526951082120901" onmouseenter="enter('3611526951082120901');" onmouseout="out('3611526951082120901');" style=""> 870          ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;delete.successful&quot;);                                                 </span>
<span class="2579818068351246488" onmouseenter="enter('2579818068351246488');" onmouseout="out('2579818068351246488');" style=""> 871          ra.addFlashAttribute(&quot;headerFlashAlert&quot;, true);                                                           </span>
<span  style=""> 872                                                                                                                    </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 873          if (isAjaxRequest(request)) {                                                                             </span>
<span class="-5684384949344822714" onmouseenter="enter('-5684384949344822714');" onmouseout="out('-5684384949344822714');" style=""> 874              // redirect attributes won&#x27;t work here since ajaxredirect actually makes a new request                </span>
<span class="-9107475529968351628" onmouseenter="enter('-9107475529968351628');" onmouseout="out('-9107475529968351628');" style=""> 875              return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;?headerFlash=delete.successful&quot;;     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 876          } else {                                                                                                  </span>
<span class="4357427724598824699" onmouseenter="enter('4357427724598824699');" onmouseout="out('4357427724598824699');" style=""> 877              return &quot;redirect:/&quot; + sectionKey;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 878          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 879      }                                                                                                             </span>
<span  style=""> 880                                                                                                                    </span>
<span class="-2983794507366563158" onmouseenter="enter('-2983794507366563158');" onmouseout="out('-2983794507366563158');" style=""> 881      @RequestMapping(value = &quot;/{collectionField:.*}/details&quot;, method = RequestMethod.GET)                          </span>
<span class="-527911248282232950" onmouseenter="enter('-527911248282232950');" onmouseout="out('-527911248282232950');" style=""><abbr title=" 882      public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpServletResponse response, Model model,"> 882      public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpServletRespðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 883              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 884              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-5250072335910309101" onmouseenter="enter('-5250072335910309101');" onmouseout="out('-5250072335910309101');" style=""> 885              @RequestParam String ids,                                                                             </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 886              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                         </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 887          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 888          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 889          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                                 </span>
<span class="-5225610456611199616" onmouseenter="enter('-5225610456611199616');" onmouseout="out('-5225610456611199616');" style=""><abbr title=" 890          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, sectionCrumbs, pathVars);"> 890          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, sectiðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""> 891          ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 892          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style=""> 893          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span  style=""> 894                                                                                                                    </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style=""> 895          ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                          </span>
<span class="-2120492003233088270" onmouseenter="enter('-2120492003233088270');" onmouseout="out('-2120492003233088270');" style=""> 896          ppr.setStartIndex(getStartIndex(requestParams));                                                          </span>
<span class="2736790979641523309" onmouseenter="enter('2736790979641523309');" onmouseout="out('2736790979641523309');" style=""> 897          ppr.setMaxIndex(getMaxIndex(requestParams));                                                              </span>
<span  style=""> 898                                                                                                                    </span>
<span class="-8000769512056204294" onmouseenter="enter('-8000769512056204294');" onmouseout="out('-8000769512056204294');" style=""> 899          if (md instanceof BasicFieldMetadata) {                                                                   </span>
<span class="-1954892043355765019" onmouseenter="enter('-1954892043355765019');" onmouseout="out('-1954892043355765019');" style=""> 900              String idProp = ((BasicFieldMetadata) md).getForeignKeyProperty();                                    </span>
<span class="6288096257758990604" onmouseenter="enter('6288096257758990604');" onmouseout="out('6288096257758990604');" style=""> 901              String displayProp = ((BasicFieldMetadata) md).getForeignKeyDisplayValueProperty();                   </span>
<span  style=""> 902                                                                                                                    </span>
<span class="-6477100624593005266" onmouseenter="enter('-6477100624593005266');" onmouseout="out('-6477100624593005266');" style=""> 903              List&lt;String&gt; filterValues = BLCArrayUtils.asList(ids.split(FILTER_VALUE_SEPARATOR_REGEX));            </span>
<span class="3640259021720155935" onmouseenter="enter('3640259021720155935');" onmouseout="out('3640259021720155935');" style=""> 904              ppr.addFilterAndSortCriteria(new FilterAndSortCriteria(idProp, filterValues));                        </span>
<span  style=""> 905                                                                                                                    </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style=""> 906              DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                                 </span>
<span class="-2768740094948248396" onmouseenter="enter('-2768740094948248396');" onmouseout="out('-2768740094948248396');" style=""> 907              Map&lt;String, String&gt; returnMap = new HashMap&lt;&gt;();                                                      </span>
<span  style=""> 908                                                                                                                    </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 909              for (Entity e : drs.getRecords()) {                                                                   </span>
<span class="4979367110517822568" onmouseenter="enter('4979367110517822568');" onmouseout="out('4979367110517822568');" style=""> 910                  String id = e.getPMap().get(idProp).getValue();                                                   </span>
<span class="-4946347213336092877" onmouseenter="enter('-4946347213336092877');" onmouseout="out('-4946347213336092877');" style=""> 911                  String disp = e.getPMap().get(displayProp).getDisplayValue();                                     </span>
<span  style=""> 912                                                                                                                    </span>
<span class="3483982845402449596" onmouseenter="enter('3483982845402449596');" onmouseout="out('3483982845402449596');" style=""> 913                  if (StringUtils.isBlank(disp)) {                                                                  </span>
<span class="-2027181132953179584" onmouseenter="enter('-2027181132953179584');" onmouseout="out('-2027181132953179584');" style=""> 914                      disp = e.getPMap().get(displayProp).getValue();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 915                  }                                                                                                 </span>
<span  style=""> 916                                                                                                                    </span>
<span class="-1075893121428940879" onmouseenter="enter('-1075893121428940879');" onmouseout="out('-1075893121428940879');" style=""> 917                  returnMap.put(id,  disp);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 918              }                                                                                                     </span>
<span  style=""> 919                                                                                                                    </span>
<span class="9157811424862351106" onmouseenter="enter('9157811424862351106');" onmouseout="out('9157811424862351106');" style=""> 920              return returnMap;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 921          }                                                                                                         </span>
<span  style=""> 922                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 923          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 924      }                                                                                                             </span>
<span  style=""> 925                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 926      /**                                                                                                           </span>
<span class="7896529828316523089" onmouseenter="enter('7896529828316523089');" onmouseout="out('7896529828316523089');" style=""><abbr title=" 927       * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a list of products"> 927       * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a list of pðŸ”µ</abbr></span>
<span class="8702245574166025616" onmouseenter="enter('8702245574166025616');" onmouseout="out('8702245574166025616');" style=""> 928       * then this method is invoked when a user clicks on the name of the default category field.                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 929       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 930       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 931       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 932       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 933       * @param pathVars                                                                                            </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 934       * @param collectionField                                                                                     </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 935       * @param id                                                                                                  </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 936       * @return                                                                                                    </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 937       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 938       */                                                                                                           </span>
<span class="1405910210670150204" onmouseenter="enter('1405910210670150204');" onmouseout="out('1405910210670150204');" style=""> 939      @RequestMapping(value = &quot;/{collectionField:.*}/{id}/view&quot;, method = RequestMethod.GET)                        </span>
<span class="-5496524556428427140" onmouseenter="enter('-5496524556428427140');" onmouseout="out('-5496524556428427140');" style=""> 940      public String viewCollectionItemDetails(HttpServletRequest request, HttpServletResponse response, Model model,</span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 941              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 942              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-1857511616350008386" onmouseenter="enter('-1857511616350008386');" onmouseout="out('-1857511616350008386');" style=""> 943              @PathVariable(value=&quot;id&quot;) String id) throws Exception {                                               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 944          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 945          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 946          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title=" 947          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 947          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 948          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="2157347470680130722" onmouseenter="enter('2157347470680130722');" onmouseout="out('2157347470680130722');" style=""> 949          BasicFieldMetadata md = (BasicFieldMetadata) collectionProperty.getMetadata();                            </span>
<span  style=""> 950                                                                                                                    </span>
<span class="-1856968160831305726" onmouseenter="enter('-1856968160831305726');" onmouseout="out('-1856968160831305726');" style=""><abbr title=" 951          AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeyClass(), sectionKey);"> 951          AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeyClass(),ðŸ”µ</abbr></span>
<span class="-151095669048618305" onmouseenter="enter('-151095669048618305');" onmouseout="out('-151095669048618305');" style=""><abbr title=" 952          String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : section.getUrl();"> 952          String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : section.getUrlðŸ”µ</abbr></span>
<span class="4949862081138664893" onmouseenter="enter('4949862081138664893');" onmouseout="out('4949862081138664893');" style=""> 953          Map&lt;String, String&gt; varsForField = new HashMap&lt;&gt;();                                                       </span>
<span class="-4429965231898090358" onmouseenter="enter('-4429965231898090358');" onmouseout="out('-4429965231898090358');" style=""> 954          varsForField.put(&quot;sectionKey&quot;, sectionUrlKey);                                                            </span>
<span class="4805235980730638518" onmouseenter="enter('4805235980730638518');" onmouseout="out('4805235980730638518');" style=""> 955          return viewEntityForm(request, response, model, varsForField, id);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 956      }                                                                                                             </span>
<span  style=""> 957                                                                                                                    </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style=""> 958      @RequestMapping(                                                                                              </span>
<span class="4528666449367390600" onmouseenter="enter('4528666449367390600');" onmouseout="out('4528666449367390600');" style=""> 959              value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{tab:[0-9]+}/{tabName}&quot;,                       </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style=""> 960              method = RequestMethod.POST                                                                           </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 961      )                                                                                                             </span>
<span class="1786222500639285262" onmouseenter="enter('1786222500639285262');" onmouseout="out('1786222500639285262');" style=""> 962      public String viewCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,    </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 963                                          @PathVariable  Map&lt;String, String&gt; pathVars,                              </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 964                                          @PathVariable(value=&quot;id&quot;) String id,                                      </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 965                                          @PathVariable(value=&quot;collectionField&quot;) String collectionField,            </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style=""> 966                                          @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,          </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style=""> 967                                          @PathVariable(value=&quot;tabName&quot;) String tabName,                            </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title=" 968                                          @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {"> 968                                          @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws ExceptðŸ”µ</abbr></span>
<span  style=""> 969                                                                                                                    </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title=" 970          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);"> 970          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeadðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 971      }                                                                                                             </span>
<span  style=""> 972                                                                                                                    </span>
<span  style=""> 973                                                                                                                    </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style=""> 974      @RequestMapping(                                                                                              </span>
<span class="-3329921938797888660" onmouseenter="enter('-3329921938797888660');" onmouseout="out('-3329921938797888660');" style=""> 975              value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view/{tab:[0-9]+}/{tabName}&quot;,                  </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style=""> 976              method = RequestMethod.POST                                                                           </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 977      )                                                                                                             </span>
<span class="546530564983480962" onmouseenter="enter('546530564983480962');" onmouseout="out('546530564983480962');" style=""><abbr title=" 978      public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,"> 978      public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 979                                          @PathVariable  Map&lt;String, String&gt; pathVars,                              </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 980                                          @PathVariable(value=&quot;id&quot;) String id,                                      </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 981                                          @PathVariable(value=&quot;collectionField&quot;) String collectionField,            </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style=""> 982                                          @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,          </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style=""> 983                                          @PathVariable(value=&quot;tabName&quot;) String tabName,                            </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title=" 984                                          @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {"> 984                                          @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws ExceptðŸ”µ</abbr></span>
<span  style=""> 985                                                                                                                    </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title=" 986          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);"> 986          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeadðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 987      }                                                                                                             </span>
<span  style=""> 988                                                                                                                    </span>
<span  style=""> 989                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 990      /**                                                                                                           </span>
<span class="1274042523848442367" onmouseenter="enter('1274042523848442367');" onmouseout="out('1274042523848442367');" style=""> 991       * Returns the records for a given collectionField filtered by a particular criteria                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 992       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 993       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 994       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 995       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 996       * @param pathVars                                                                                            </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 997       * @param collectionField                                                                                     </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 998       * @param requestParams                                                                                       </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 999       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1000       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1001       */                                                                                                           </span>
<span class="-4095443548484775059" onmouseenter="enter('-4095443548484775059');" onmouseout="out('-4095443548484775059');" style="">1002      @RequestMapping(value = &quot;/{id}/{collectionField:.*}&quot;, method = RequestMethod.GET)                             </span>
<span class="-5889287394210369546" onmouseenter="enter('-5889287394210369546');" onmouseout="out('-5889287394210369546');" style="">1003      public String getCollectionFieldRecords(HttpServletRequest request, HttpServletResponse response, Model model,</span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1004              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1005              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1006              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="3465670919255037355" onmouseenter="enter('3465670919255037355');" onmouseout="out('3465670919255037355');" style="">1007              @RequestParam  MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                        </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1008          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1009          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1010          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-6545915569490985196" onmouseenter="enter('-6545915569490985196');" onmouseout="out('-6545915569490985196');" style=""><abbr title="1011          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams, sectionCrumbs, pathVars);">1011          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams, sectionCðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style="">1012          ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1013          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1014                                                                                                                    </span>
<span class="-3734134243620930531" onmouseenter="enter('-3734134243620930531');" onmouseout="out('-3734134243620930531');" style="">1015          ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);                        </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1016          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span  style="">1017                                                                                                                    </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1018          // Next, we must get the new list grid that represents this collection                                    </span>
<span class="-8440278474384944243" onmouseenter="enter('-8440278474384944243');" onmouseout="out('-8440278474384944243');" style=""><abbr title="1019          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParams, sectionKey, sectionCrumbs);">1019          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParams, sectionðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1020          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span  style="">1021                                                                                                                    </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style="">1022          model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));                </span>
<span  style="">1023                                                                                                                    </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1024          // We return the new list grid so that it can replace the currently visible one                           </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1025          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1026          return &quot;views/standaloneListGrid&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1027      }                                                                                                             </span>
<span  style="">1028                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1029      /**                                                                                                           </span>
<span class="-2279175998905644242" onmouseenter="enter('-2279175998905644242');" onmouseout="out('-2279175998905644242');" style=""><abbr title="1030       * Shows the modal dialog that is used to add an item to a given collection. There are several possible outcomes">1030       * Shows the modal dialog that is used to add an item to a given collection. There are several possible outcomðŸ”µ</abbr></span>
<span class="-3490572548815062734" onmouseenter="enter('-3490572548815062734');" onmouseout="out('-3490572548815062734');" style="">1031       * of this call depending on the type of the specified collection field.                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1032       *                                                                                                            </span>
<span class="2717555647352622731" onmouseenter="enter('2717555647352622731');" onmouseout="out('2717555647352622731');" style="">1033       * &lt;ul&gt;                                                                                                       </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style="">1034       *  &lt;li&gt;                                                                                                      </span>
<span class="4930235181592711719" onmouseenter="enter('4930235181592711719');" onmouseout="out('4930235181592711719');" style=""><abbr title="1035       *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so that the user may">1035       *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so that the useðŸ”µ</abbr></span>
<span class="-3142080293607523336" onmouseenter="enter('-3142080293607523336');" onmouseout="out('-3142080293607523336');" style=""><abbr title="1036       *    enter information and associate the record with this collection. Used by fields such as ProductAttribute.">1036       *    enter information and associate the record with this collection. Used by fields such as ProductAttributeðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style="">1037       *  &lt;/li&gt;                                                                                                     </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style="">1038       *  &lt;li&gt;                                                                                                      </span>
<span class="6319691685860667757" onmouseenter="enter('6319691685860667757');" onmouseout="out('6319691685860667757');" style=""><abbr title="1039       *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and select it.">1039       *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and seðŸ”µ</abbr></span>
<span class="-8731186021492741581" onmouseenter="enter('-8731186021492741581');" onmouseout="out('-8731186021492741581');" style="">1040       *    Used by fields such as &quot;allParentCategories&quot;.                                                           </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style="">1041       *  &lt;/li&gt;                                                                                                     </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style="">1042       *  &lt;li&gt;                                                                                                      </span>
<span class="-6847404578833725914" onmouseenter="enter('-6847404578833725914');" onmouseout="out('-6847404578833725914');" style=""><abbr title="1043       *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and">1043       *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entitðŸ”µ</abbr></span>
<span class="568361472595397074" onmouseenter="enter('568361472595397074');" onmouseout="out('568361472595397074');" style=""><abbr title="1044       *    select it. The view rendered by this is identical to basic collection (lookup), but will perform the operation">1044       *    select it. The view rendered by this is identical to basic collection (lookup), but will perform the opeðŸ”µ</abbr></span>
<span class="-4048066359856567222" onmouseenter="enter('-4048066359856567222');" onmouseout="out('-4048066359856567222');" style=""><abbr title="1045       *    on an adorned field, which may carry extra meta-information about the created relationship, such as order.">1045       *    on an adorned field, which may carry extra meta-information about the created relationship, such as ordeðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style="">1046       *  &lt;/li&gt;                                                                                                     </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style="">1047       *  &lt;li&gt;                                                                                                      </span>
<span class="7355096557601214207" onmouseenter="enter('7355096557601214207');" onmouseout="out('7355096557601214207');" style=""><abbr title="1048       *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and">1048       *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity aðŸ”µ</abbr></span>
<span class="-146713903552295440" onmouseenter="enter('-146713903552295440');" onmouseout="out('-146713903552295440');" style=""><abbr title="1049       *    select it. Once the user selects the entity, he will be presented with an empty form based on the specified">1049       *    select it. Once the user selects the entity, he will be presented with an empty form based on the specifðŸ”µ</abbr></span>
<span class="7585671366133275820" onmouseenter="enter('7585671366133275820');" onmouseout="out('7585671366133275820');" style=""><abbr title="1050       *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, which in addition">1050       *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, which in addðŸ”µ</abbr></span>
<span class="7350312284882119043" onmouseenter="enter('7350312284882119043');" onmouseout="out('7350312284882119043');" style="">1051       *    to linking an entity, provide extra fields, such as a promotional message.                              </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style="">1052       *  &lt;/li&gt;                                                                                                     </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style="">1053       *  &lt;li&gt;                                                                                                      </span>
<span class="8829232354049589291" onmouseenter="enter('8829232354049589291');" onmouseout="out('8829232354049589291');" style=""><abbr title="1054       *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. This field is">1054       *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. This fielðŸ”µ</abbr></span>
<span class="-8508051731153769866" onmouseenter="enter('-8508051731153769866');" onmouseout="out('-8508051731153769866');" style=""><abbr title="1055       *    populated either from the configured map keys, or as a result of a lookup in the case of a key based on another">1055       *    populated either from the configured map keys, or as a result of a lookup in the case of a key based on ðŸ”µ</abbr></span>
<span class="-6056737616128420156" onmouseenter="enter('-6056737616128420156');" onmouseout="out('-6056737616128420156');" style="">1056       *    entity. Used by fields such as the mediaMap on a Sku.                                                   </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style="">1057       *  &lt;/li&gt;                                                                                                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1058       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1059       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1060       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1061       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1062       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1063       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1064       * @param collectionField                                                                                     </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style="">1065       * @param requestParams                                                                                       </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1066       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1067       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1068       */                                                                                                           </span>
<span class="835275592837580694" onmouseenter="enter('835275592837580694');" onmouseout="out('835275592837580694');" style="">1069      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.GET)                         </span>
<span class="2460266594736272943" onmouseenter="enter('2460266594736272943');" onmouseout="out('2460266594736272943');" style="">1070      public String showAddCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,    </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1071              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style="">1072              @PathVariable(value = &quot;id&quot;) String id,                                                                </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style="">1073              @PathVariable(value = &quot;collectionField&quot;) String collectionField,                                      </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style="">1074              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                         </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1075          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1076          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1077          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style="">1078          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,  </span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style="">1079                  sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                               </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1080          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1081          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span  style="">1082                                                                                                                    </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style="">1083          PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)                 </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style="">1084                  .withFilterAndSortCriteria(getCriteria(requestParams))                                            </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style="">1085                  .withStartIndex(getStartIndex(requestParams))                                                     </span>
<span class="4786121744461484155" onmouseenter="enter('4786121744461484155');" onmouseout="out('4786121744461484155');" style="">1086                  .withMaxIndex(getMaxIndex(requestParams))                                                         </span>
<span class="2941692162045974129" onmouseenter="enter('2941692162045974129');" onmouseout="out('2941692162045974129');" style="">1087                  .withLastId(getLastId(requestParams))                                                             </span>
<span class="-9137331061893195290" onmouseenter="enter('-9137331061893195290');" onmouseout="out('-9137331061893195290');" style="">1088                  .withFirstId(getFirstId(requestParams))                                                           </span>
<span class="-6497878492174321892" onmouseenter="enter('-6497878492174321892');" onmouseout="out('-6497878492174321892');" style="">1089                  .withUpperCount(getUpperCount(requestParams))                                                     </span>
<span class="-8373154769706308503" onmouseenter="enter('-8373154769706308503');" onmouseout="out('-8373154769706308503');" style="">1090                  .withLowerCount(getLowerCount(requestParams))                                                     </span>
<span class="-1051723743320189375" onmouseenter="enter('-1051723743320189375');" onmouseout="out('-1051723743320189375');" style="">1091                  .withPageSize(getPageSize(requestParams))                                                         </span>
<span class="-6582704259903712752" onmouseenter="enter('-6582704259903712752');" onmouseout="out('-6582704259903712752');" style="">1092                  .withPresentationFetch(true);                                                                     </span>
<span  style="">1093                                                                                                                    </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1094          if (md instanceof BasicCollectionMetadata) {                                                              </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1095              BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                           </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style="">1096              if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                           </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style="">1097                  ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();       </span>
<span class="-2914433993330253670" onmouseenter="enter('-2914433993330253670');" onmouseout="out('-2914433993330253670');" style="">1098                  // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types</span>
<span class="-7795450821592681641" onmouseenter="enter('-7795450821592681641');" onmouseout="out('-7795450821592681641');" style="">1099                  // for this entity.                                                                               </span>
<span class="6186895968667433501" onmouseenter="enter('6186895968667433501');" onmouseout="out('6186895968667433501');" style="">1100                  String entityType = null;                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1101 +                                                                                                                  </span>
<span class="3580632700461537732" onmouseenter="enter('3580632700461537732');" onmouseout="out('3580632700461537732');" style="">1102                  if (requestParams.containsKey(&quot;entityType&quot;)) {                                                    </span>
<span class="-1630371572733568969" onmouseenter="enter('-1630371572733568969');" onmouseout="out('-1630371572733568969');" style="">1103                      entityType = requestParams.get(&quot;entityType&quot;).get(0);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1104                  }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1105 +                                                                                                                  </span>
<span class="2600422776092116832" onmouseenter="enter('2600422776092116832');" onmouseout="out('2600422776092116832');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1106 +                entityType = determineEntityType(entityType, cmd);                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1107 +                                                                                                                  </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style="">1108                  if (StringUtils.isBlank(entityType)) {                                                            </span>
<span class="2333848870190395940" onmouseenter="enter('2333848870190395940');" onmouseout="out('2333848870190395940');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1109 -                    if (cmd.getPolymorphicEntities().getChildren().length == 0) {                                 </span>
<span class="2097783908693957449" onmouseenter="enter('2097783908693957449');" onmouseout="out('2097783908693957449');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1110 -                        entityType = cmd.getPolymorphicEntities().getFullyQualifiedClassname();                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1111 -                    } else {                                                                                      </span>
<span class="-6902702564943152777" onmouseenter="enter('-6902702564943152777');" onmouseout="out('-6902702564943152777');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1112 -                        entityType = getDefaultEntityType();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1113 -                    }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1114 -                } else {                                                                                          </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1115 -                    entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                          </span>
<span class="679217737668422196" onmouseenter="enter('679217737668422196');" onmouseout="out('679217737668422196');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1116 +                    return getModalForBlankEntityType(request, model, sectionKey, cmd);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1117                  }                                                                                                 </span>
<span  style="">1118                                                                                                                    </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1119 -                if (StringUtils.isBlank(entityType)) {                                                            </span>
<span class="-5632901614715850082" onmouseenter="enter('-5632901614715850082');" onmouseout="out('-5632901614715850082');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1120 -                    List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());                </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1121 -                    model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                               </span>
<span class="-7344898891916261334" onmouseenter="enter('-7344898891916261334');" onmouseout="out('-7344898891916261334');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1122 -                    model.addAttribute(&quot;viewType&quot;, &quot;modal/entityTypeSelection&quot;);                                  </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1123 -                    model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());     </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1124 -                    String requestUri = request.getRequestURI();                                                  </span>
<span class="2670437920401576748" onmouseenter="enter('2670437920401576748');" onmouseout="out('2670437920401576748');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1125 -                    if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) {">1125 -                    if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) ðŸ”µ</abbr></span>
<span class="-901741071381030126" onmouseenter="enter('-901741071381030126');" onmouseout="out('-901741071381030126');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1126 -                        requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length());">1126 -                        requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.lengthðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1127 -                    }                                                                                             </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1128 -                    model.addAttribute(&quot;currentUri&quot;, requestUri);                                                 </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1129 -                    model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                  </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1130 -                    setModelAttributes(model, sectionKey);                                                        </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1131 -                    return &quot;modules/modalContainer&quot;;                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1132 -                } else {                                                                                          </span>
<span class="-58316621888079189" onmouseenter="enter('-58316621888079189');" onmouseout="out('-58316621888079189');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1133 -                    ppr = ppr.withCeilingEntityClassname(entityType);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1134 -                }                                                                                                 </span>
<span class="-58316621888079189" onmouseenter="enter('-58316621888079189');" onmouseout="out('-58316621888079189');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1135 +                ppr = ppr.withCeilingEntityClassname(entityType);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1136              }                                                                                                     </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1137          } else if (md instanceof MapMetadata) {                                                                   </span>
<span class="-8815560953057448419" onmouseenter="enter('-8815560953057448419');" onmouseout="out('-8815560953057448419');" style=""><abbr title="1138              ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionType(request,response,model,sectionKey,id,requestParams,(MapMetadata) md);">1138              ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionType(requestðŸ”µ</abbr></span>
<span class="6674469997589527714" onmouseenter="enter('6674469997589527714');" onmouseout="out('6674469997589527714');" style="">1139              if (result.equals(ExtensionResultStatusType.HANDLED)) {                                               </span>
<span class="1057476267973220454" onmouseenter="enter('1057476267973220454');" onmouseout="out('1057476267973220454');" style="">1140                  model.addAttribute(&quot;entityId&quot;, id);                                                               </span>
<span class="6720161805434028669" onmouseenter="enter('6720161805434028669');" onmouseout="out('6720161805434028669');" style="">1141                  model.addAttribute(&quot;sectionKey&quot;, sectionKey);                                                     </span>
<span class="-2435595331613687341" onmouseenter="enter('-2435595331613687341');" onmouseout="out('-2435595331613687341');" style="">1142                  model.addAttribute(&quot;collectionField&quot;, collectionField);                                           </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1143 -                return &quot;modules/modalContainer&quot;;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1144 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1145 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1146 -                                                                                                                  </span>
<span class="3903557829936589355" onmouseenter="enter('3903557829936589355');" onmouseout="out('3903557829936589355');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1147 -        //service.getContextSpecificRelationshipId(mainMetadata, entity, prefix);                                 </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1148 +                return MODAL_CONTAINER_VIEW;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1149 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1150 +        }                                                                                                         </span>
<span  style="">1151                                                                                                                    </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style="">1152          model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));                </span>
<span  style="">1153                                                                                                                    </span>
<span class="6180232744784249160" onmouseenter="enter('6180232744784249160');" onmouseout="out('6180232744784249160');" style=""><abbr title="1154          return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty, md, ppr, null, null);">1154          return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionPrðŸ”µ</abbr></span>





















<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1155      }                                                                                                             </span>
<span  style="">1156                                                                                                                    </span>
<span class="373770933822047642" onmouseenter="enter('373770933822047642');" onmouseout="out('373770933822047642');" style=""><abbr title="1157      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMethod.POST)">1157      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMethod.POSðŸ”µ</abbr></span>
<span class="-870509305261572147" onmouseenter="enter('-870509305261572147');" onmouseout="out('-870509305261572147');" style=""><abbr title="1158      public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1158      public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResponse resðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1159              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1160              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1161              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1162              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {                   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1163          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1164          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1165          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1166          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1166          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1167          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1168          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1169          Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                                        </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1170          if (md instanceof AdornedTargetCollectionMetadata) {                                                      </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1171              adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1171              adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassNaðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1172                      collectionField,                                                                              </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1173                      collectionItemId, responseMap);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1174          }                                                                                                         </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1175          return responseMap;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1176 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1177 +                                                                                                                  </span>
<span class="-2220429573703069666" onmouseenter="enter('-2220429573703069666');" onmouseout="out('-2220429573703069666');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1178 +    protected String getModalForBlankEntityType(final HttpServletRequest request,                                 </span>
<span class="-5263780204247815298" onmouseenter="enter('-5263780204247815298');" onmouseout="out('-5263780204247815298');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="1179 +                                                final Model model, final String sectionKey, final ClassMetadata cmd) {">1179 +                                                final Model model, final String sectionKey, final ClassMetadata cmðŸ”µ</abbr></span>
<span class="-2316979209506989336" onmouseenter="enter('-2316979209506989336');" onmouseout="out('-2316979209506989336');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1180 +        final List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());                      </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1181 +        model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                                           </span>
<span class="-7344898891916261334" onmouseenter="enter('-7344898891916261334');" onmouseout="out('-7344898891916261334');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1182 +        model.addAttribute(&quot;viewType&quot;, &quot;modal/entityTypeSelection&quot;);                                              </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1183 +        model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1184 +                                                                                                                  </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1185 +        String requestUri = request.getRequestURI();                                                              </span>
<span class="3126054482386392887" onmouseenter="enter('3126054482386392887');" onmouseout="out('3126054482386392887');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1186 +        final String contextPath = request.getContextPath();                                                      </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1187 +                                                                                                                  </span>
<span class="1413502326105343009" onmouseenter="enter('1413502326105343009');" onmouseout="out('1413502326105343009');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1188 +        if (!contextPath.equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(contextPath)) {                                     </span>
<span class="-5812874762785975576" onmouseenter="enter('-5812874762785975576');" onmouseout="out('-5812874762785975576');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1189 +            requestUri = requestUri.substring(contextPath.length() + 1, requestUri.length());                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1190 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1191 +                                                                                                                  </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1192 +        model.addAttribute(&quot;currentUri&quot;, requestUri);                                                             </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1193 +        model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                              </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1194 +        setModelAttributes(model, sectionKey);                                                                    </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1195 +                                                                                                                  </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1196 +        return MODAL_CONTAINER_VIEW;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1197      }                                                                                                             </span>
<span  style="">1198                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1199      /**                                                                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1200       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1201       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1202       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1203       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1204       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1205       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1206       * @param collectionField                                                                                     </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style="">1207       * @param requestParams                                                                                       </span>
<span class="-4008047975326689228" onmouseenter="enter('-4008047975326689228');" onmouseout="out('-4008047975326689228');" style="">1208       * @return Json collection data                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1209       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1210       */                                                                                                           </span>
<span class="1491507797785399205" onmouseenter="enter('1491507797785399205');" onmouseout="out('1491507797785399205');" style="">1211      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize&quot;, method = RequestMethod.GET)                   </span>
<span class="3394871197523978831" onmouseenter="enter('3394871197523978831');" onmouseout="out('3394871197523978831');" style=""><abbr title="1212      public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HttpServletResponse response, Model model,">1212      public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HttpServletðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1213              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style="">1214              @PathVariable(value = &quot;id&quot;) String id,                                                                </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style="">1215              @PathVariable(value = &quot;collectionField&quot;) String collectionField,                                      </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style="">1216              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                         </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1217          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1218          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1219          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style="">1220          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,  </span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style="">1221                  sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                               </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1222          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1223          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span  style="">1224                                                                                                                    </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style="">1225          PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)                 </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style="">1226                  .withFilterAndSortCriteria(getCriteria(requestParams))                                            </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style="">1227                  .withStartIndex(getStartIndex(requestParams))                                                     </span>
<span class="-115113180096268460" onmouseenter="enter('-115113180096268460');" onmouseout="out('-115113180096268460');" style="">1228                  .withMaxIndex(getMaxIndex(requestParams));                                                        </span>
<span class="1857239787668878379" onmouseenter="enter('1857239787668878379');" onmouseout="out('1857239787668878379');" style=""><abbr title="1229          String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizeCustomCriteria()))">1229          String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizeCustomCrðŸ”µ</abbr></span>
<span class="8925682901439482297" onmouseenter="enter('8925682901439482297');" onmouseout="out('8925682901439482297');" style="">1230                  .toArray(String[]::new);                                                                          </span>
<span class="-226841645969872938" onmouseenter="enter('-226841645969872938');" onmouseout="out('-226841645969872938');" style="">1231          ppr = ppr.withCustomCriteria( both);                                                                      </span>
<span  style="">1232                                                                                                                    </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1233          if (md instanceof AdornedTargetCollectionMetadata) {                                                      </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1234              ppr.setOperationTypesOverride(null);                                                                  </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1235              ppr.setType(PersistencePackageRequest.Type.STANDARD);                                                 </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1236              ppr.setSectionEntityField(collectionField);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1237          }                                                                                                         </span>
<span  style="">1238                                                                                                                    </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1239          DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                                     </span>
<span  style="">1240                                                                                                                    </span>
<span class="9153362413933125536" onmouseenter="enter('9153362413933125536');" onmouseout="out('9153362413933125536');" style="">1241          return formService.buildSelectizeCollectionInfo(id, drs, collectionProperty, sectionKey, sectionCrumbs);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1242      }                                                                                                             </span>
<span  style="">1243                                                                                                                    </span>
<span class="-7439222430983038453" onmouseenter="enter('-7439222430983038453');" onmouseout="out('-7439222430983038453');" style="">1244      protected String[] buildSelectizeCustomCriteria() {                                                           </span>
<span class="-4161579644301235736" onmouseenter="enter('-4161579644301235736');" onmouseout="out('-4161579644301235736');" style="">1245          return new String[]{ IS_SELECTIZE_REQUEST };                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1246      }                                                                                                             </span>
<span  style="">1247                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1248      /**                                                                                                           </span>
<span class="-7141111024633203374" onmouseenter="enter('-7141111024633203374');" onmouseout="out('-7141111024633203374');" style="">1249       * Adds the requested collection item via Selectize                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1250       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1251       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1252       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1253       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1254       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1255       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1256       * @param collectionField                                                                                     </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1257       * @param entityForm                                                                                          </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1258       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1259       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1260       */                                                                                                           </span>
<span class="4942792763487402415" onmouseenter="enter('4942792763487402415');" onmouseout="out('4942792763487402415');" style="">1261      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize-add&quot;, method = RequestMethod.POST)              </span>
<span class="8163998475300370418" onmouseenter="enter('8163998475300370418');" onmouseout="out('8163998475300370418');" style=""><abbr title="1262      public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1262      public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpServletResðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1263              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1264              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1265              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style="">1266              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {   </span>
<span class="-3120252458037341618" onmouseenter="enter('-3120252458037341618');" onmouseout="out('-3120252458037341618');" style="">1267          Map&lt;String, Object&gt; returnVal = new HashMap&lt;&gt;();                                                          </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1268          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1269          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1270          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1271          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1271          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1272          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1273                                                                                                                    </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1274          if (StringUtils.isBlank(entityForm.getEntityType())) {                                                    </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1275              FieldMetadata fmd = collectionProperty.getMetadata();                                                 </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1276              if (fmd instanceof BasicCollectionMetadata) {                                                         </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1277                  entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1278              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1279          }                                                                                                         </span>
<span  style="">1280                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1281          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1281          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style="">1282          ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                                    </span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1283          declareShouldIgnoreAdditionStatusFilter();                                                                </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1284          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span  style="">1285                                                                                                                    </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1286          // First, we must save the collection entity                                                              </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1287          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1287          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1288          Entity savedEntity = persistenceResponse.getEntity();                                                     </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1289          entityFormValidator.validate(entityForm, savedEntity, result);                                            </span>
<span  style="">1290                                                                                                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1291          if (result.hasErrors()) {                                                                                 </span>
<span class="842224369260603633" onmouseenter="enter('842224369260603633');" onmouseout="out('842224369260603633');" style="">1292              returnVal.put(&quot;error&quot;, result.getFieldError());                                                       </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1293              return returnVal;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1294          }                                                                                                         </span>
<span  style="">1295                                                                                                                    </span>
<span class="2610632867002015507" onmouseenter="enter('2610632867002015507');" onmouseout="out('2610632867002015507');" style="">1296          if (savedEntity.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                            </span>
<span class="-5383740165855607078" onmouseenter="enter('-5383740165855607078');" onmouseout="out('-5383740165855607078');" style="">1297              returnVal.put(&quot;alternateId&quot;, savedEntity.findProperty(ALTERNATE_ID_PROPERTY).getValue());             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1298          }                                                                                                         </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1299          return returnVal;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1300      }                                                                                                             </span>
<span  style="">1301                                                                                                                    </span>
<span class="5412920841771640365" onmouseenter="enter('5412920841771640365');" onmouseout="out('5412920841771640365');" style="">1302      protected void declareShouldIgnoreAdditionStatusFilter() {                                                    </span>
<span class="-4270951653865217168" onmouseenter="enter('-4270951653865217168');" onmouseout="out('-4270951653865217168');" style=""><abbr title="1303          Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().getAdditionalProperties();">1303          Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().getAdditioðŸ”µ</abbr></span>
<span class="-3723341051420574210" onmouseenter="enter('-3723341051420574210');" onmouseout="out('-3723341051420574210');" style="">1304          additionalProperties.put(&quot;shouldIgnoreAdditionStatusFilter&quot;, true);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1305      }                                                                                                             </span>
<span  style="">1306                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1307      /**                                                                                                           </span>
<span class="1325408264830379158" onmouseenter="enter('1325408264830379158');" onmouseout="out('1325408264830379158');" style="">1308       * Adds the requested collection item                                                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1309       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1310       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1311       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1312       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1313       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1314       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1315       * @param collectionField                                                                                     </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1316       * @param entityForm                                                                                          </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1317       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1318       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1319       */                                                                                                           </span>
<span class="-2068929988984533631" onmouseenter="enter('-2068929988984533631');" onmouseout="out('-2068929988984533631');" style="">1320      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.POST)                        </span>
<span class="-6457137423768539998" onmouseenter="enter('-6457137423768539998');" onmouseout="out('-6457137423768539998');" style="">1321      public String addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,        </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1322              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1323              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1324              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style="">1325              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1326          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1327          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1328          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1329          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1329          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1330          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1331                                                                                                                    </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1332          if (StringUtils.isBlank(entityForm.getEntityType())) {                                                    </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1333              FieldMetadata fmd = collectionProperty.getMetadata();                                                 </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1334              if (fmd instanceof BasicCollectionMetadata) {                                                         </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1335                  entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1336              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1337          }                                                                                                         </span>
<span  style="">1338                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1339          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1339          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1340          declareShouldIgnoreAdditionStatusFilter();                                                                </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1341          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1342          service.clearEntityManager();                                                                             </span>

<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1343          // First, we must save the collection entity                                                              </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1344          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1344          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1345          Entity savedEntity = persistenceResponse.getEntity();                                                     </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1346          entityFormValidator.validate(entityForm, savedEntity, result);                                            </span>
<span  style="">1347                                                                                                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1348          if (result.hasErrors()) {                                                                                 </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1349              FieldMetadata md = collectionProperty.getMetadata();                                                  </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1350              ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                      </span>
<span class="4503162777083318611" onmouseenter="enter('4503162777083318611');" onmouseout="out('4503162777083318611');" style=""><abbr title="1351              return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty,">1351              return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectiðŸ”µ</abbr></span>
<span class="5267635088951466475" onmouseenter="enter('5267635088951466475');" onmouseout="out('5267635088951466475');" style="">1352                      md, ppr, entityForm, savedEntity);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1353          }                                                                                                         </span>
<span  style="">1354                                                                                                                    </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1355          // Next, we must get the new list grid that represents this collection                                    </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1356          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1356          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1357          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span  style="">1358                                                                                                                    </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1359          // We return the new list grid so that it can replace the currently visible one                           </span>
<span class="7250522969210652718" onmouseenter="enter('7250522969210652718');" onmouseout="out('7250522969210652718');" style="">1360          model.addAttribute(&quot;actualEntityId&quot;, id);                                                                 </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1361          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1362          return &quot;views/standaloneListGrid&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1363      }                                                                                                             </span>
<span  style="">1364                                                                                                                    </span>
<span class="-8003545521832011894" onmouseenter="enter('-8003545521832011894');" onmouseout="out('-8003545521832011894');" style="">1365      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/addEmpty&quot;, method = RequestMethod.POST)                   </span>
<span class="162700220048203938" onmouseenter="enter('162700220048203938');" onmouseout="out('162700220048203938');" style=""><abbr title="1366      public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1366      public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse response, MðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1367              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1368              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1369              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style="">1370              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1371          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1372          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1373          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1374          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1374          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1375          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1376                                                                                                                    </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1377          if (StringUtils.isBlank(entityForm.getEntityType())) {                                                    </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1378              FieldMetadata fmd = collectionProperty.getMetadata();                                                 </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1379              if (fmd instanceof BasicCollectionMetadata) {                                                         </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1380                  entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1381              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1382          }                                                                                                         </span>
<span  style="">1383                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1384          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1384          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1385          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span class="-5337934248855825573" onmouseenter="enter('-5337934248855825573');" onmouseout="out('-5337934248855825573');" style="">1386          entity.setIsPreAdd(true);                                                                                 </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1387          // First, we must save the collection entity                                                              </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1388          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1388          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1389          Entity savedEntity = persistenceResponse.getEntity();                                                     </span>
<span  style="">1390                                                                                                                    </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">1391          return new JsonResponse(response)                                                                         </span>
<span class="-645443211281069037" onmouseenter="enter('-645443211281069037');" onmouseout="out('-645443211281069037');" style="">1392                  .with(&quot;status&quot;, &quot;complete&quot;)                                                                       </span>
<span class="-7858493257692229655" onmouseenter="enter('-7858493257692229655');" onmouseout="out('-7858493257692229655');" style="">1393                  .with(&quot;id&quot;, savedEntity.findProperty(entityForm.getIdProperty()).getValue())                      </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">1394                  .done();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1395      }                                                                                                             </span>
<span  style="">1396                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1397      /**                                                                                                           </span>
<span class="-6140462241686685910" onmouseenter="enter('-6140462241686685910');" onmouseout="out('-6140462241686685910');" style=""><abbr title="1398       * Builds out all of the model information needed for showing the add modal for collection items on both the initial GET">1398       * Builds out all of the model information needed for showing the add modal for collection items on both the iðŸ”µ</abbr></span>
<span class="9052968863197617086" onmouseenter="enter('9052968863197617086');" onmouseout="out('9052968863197617086');" style="">1399       * as well as after a POST with validation errors                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1400       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1401       * @param request                                                                                             </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1402       * @param model                                                                                               </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1403       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1404       * @param collectionField                                                                                     </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style="">1405       * @param sectionKey                                                                                          </span>
<span class="-7927619294366963435" onmouseenter="enter('-7927619294366963435');" onmouseout="out('-7927619294366963435');" style="">1406       * @param collectionProperty                                                                                  </span>
<span class="-5426566728726502924" onmouseenter="enter('-5426566728726502924');" onmouseout="out('-5426566728726502924');" style="">1407       * @param md                                                                                                  </span>
<span class="4349163197755218506" onmouseenter="enter('4349163197755218506');" onmouseout="out('4349163197755218506');" style="">1408       * @param ppr                                                                                                 </span>
<span class="2094225145376343101" onmouseenter="enter('2094225145376343101');" onmouseout="out('2094225145376343101');" style="">1409       * @return the appropriate view to display for the modal                                                      </span>
<span class="450948407444547835" onmouseenter="enter('450948407444547835');" onmouseout="out('450948407444547835');" style=""><abbr title="1410       * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, EntityForm, BindingResult)}">1410       * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, EntityFðŸ”µ</abbr></span>
<span class="3423849059172457982" onmouseenter="enter('3423849059172457982');" onmouseout="out('3423849059172457982');" style=""><abbr title="1411       * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, MultiValueMap)}">1411       * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, MulðŸ”µ</abbr></span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1412       * @throws ServiceException                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1413       */                                                                                                           </span>
<span class="-4127331421111161450" onmouseenter="enter('-4127331421111161450');" onmouseout="out('-4127331421111161450');" style="">1414      protected String buildAddCollectionItemModel(HttpServletRequest request, HttpServletResponse response,        </span>
<span class="1808182660955839449" onmouseenter="enter('1808182660955839449');" onmouseout="out('1808182660955839449');" style="">1415              Model model, String id, String collectionField, String sectionKey, Property collectionProperty,       </span>
<span class="-5972908184992702659" onmouseenter="enter('-5972908184992702659');" onmouseout="out('-5972908184992702659');" style=""><abbr title="1416              FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throws ServiceException {">1416              FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throws ServiceEðŸ”µ</abbr></span>
<span  style="">1417                                                                                                                    </span>
<span class="-2054675889041043286" onmouseenter="enter('-2054675889041043286');" onmouseout="out('-2054675889041043286');" style=""><abbr title="1418          // For requests to add a new collection item include the main class that the subsequent request comes from.">1418          // For requests to add a new collection item include the main class that the subsequent request comes fromðŸ”µ</abbr></span>
<span class="7422952884503198827" onmouseenter="enter('7422952884503198827');" onmouseout="out('7422952884503198827');" style=""><abbr title="1419          // For instance, with basic collections we know the main associated class for a fetch through the ForeignKey">1419          // For instance, with basic collections we know the main associated class for a fetch through the ForeignKðŸ”µ</abbr></span>
<span class="5831142982738818001" onmouseenter="enter('5831142982738818001');" onmouseout="out('5831142982738818001');" style="">1420          // persistence item but map and adorned target lookups make a standard persistence request. This solution </span>
<span class="-3910081436214830376" onmouseenter="enter('-3910081436214830376');" onmouseout="out('-3910081436214830376');" style="">1421          // fixes all cases.                                                                                       </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1422          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-8007514226035577536" onmouseenter="enter('-8007514226035577536');" onmouseout="out('-8007514226035577536');" style="">1423          ppr.addCustomCriteria(&quot;owningClass=&quot; + mainClassName);                                                    </span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style="">1424          ppr.setAddOperationInspect(true);                                                                         </span>
<span  style="">1425                                                                                                                    </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1426          if (entityForm != null) {                                                                                 </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1427              entityForm.clearFieldsMap();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1428          }                                                                                                         </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1429          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1430          if (md instanceof BasicCollectionMetadata) {                                                              </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1431              BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                           </span>
<span  style="">1432                                                                                                                    </span>
<span class="5473401195179812518" onmouseenter="enter('5473401195179812518');" onmouseout="out('5473401195179812518');" style="">1433              // When adding items to basic collections, we will sometimes show a form to persist a new record      </span>
<span class="3817220166052180028" onmouseenter="enter('3817220166052180028');" onmouseout="out('3817220166052180028');" style="">1434              // and sometimes show a list grid to allow the user to associate an existing record.                  </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style="">1435              if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                           </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1436                  ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1436                  ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1437                  if (entityForm == null) {                                                                         </span>
<span class="509426350308747164" onmouseenter="enter('509426350308747164');" onmouseout="out('509426350308747164');" style="">1438                      entityForm = formService.createEntityForm(collectionMetadata,sectionCrumbs);                  </span>
<span class="2737056182573571703" onmouseenter="enter('2737056182573571703');" onmouseout="out('2737056182573571703');" style="">1439                      entityForm.setCeilingEntityClassname(ppr.getCeilingEntityClassname());                        </span>
<span class="2710161406345740991" onmouseenter="enter('2710161406345740991');" onmouseout="out('2710161406345740991');" style="">1440                      entityForm.setEntityType(ppr.getCeilingEntityClassname());                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1441                  } else {                                                                                          </span>
<span class="-5799643084244932085" onmouseenter="enter('-5799643084244932085');" onmouseout="out('-5799643084244932085');" style="">1442                      formService.populateEntityForm(collectionMetadata, entityForm, sectionCrumbs);                </span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1443                      formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1444                  }                                                                                                 </span>
<span class="-7315185064917392199" onmouseenter="enter('-7315185064917392199');" onmouseout="out('-7315185064917392199');" style=""><abbr title="1445                  formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntityClassname());">1445                  formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntityClassnamðŸ”µ</abbr></span>
<span class="1687533348183327340" onmouseenter="enter('1687533348183327340');" onmouseout="out('1687533348183327340');" style="">1446                  entityForm.getTabs().iterator().next().getIsVisible();                                            </span>
<span  style="">1447                                                                                                                    </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1448                  model.addAttribute(&quot;entityForm&quot;, entityForm);                                                     </span>
<span class="-2634442257361103125" onmouseenter="enter('-2634442257361103125');" onmouseout="out('-2634442257361103125');" style="">1449                  model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleAddEntity&quot;);                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1450              } else {                                                                                              </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1451                  DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                             </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1452                  ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1452                  ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sðŸ”µ</abbr></span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1453                  listGrid.setPathOverride(request.getRequestURL().toString());                                     </span>
<span  style="">1454                                                                                                                    </span>
<span class="6493773829436488040" onmouseenter="enter('6493773829436488040');" onmouseout="out('6493773829436488040');" style=""><abbr title="1455                  if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUP.equals(fmd.getAddMethodType())) {">1455                  if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUP.equals(fðŸ”µ</abbr></span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1456                      listGrid.removeAllRowActions();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1457                  }                                                                                                 </span>
<span  style="">1458                                                                                                                    </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1459                  model.addAttribute(&quot;listGrid&quot;, listGrid);                                                         </span>
<span class="-4615041483574305082" onmouseenter="enter('-4615041483574305082');" onmouseout="out('-4615041483574305082');" style="">1460                  model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleSelectEntity&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1461              }                                                                                                     </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1462          } else if (md instanceof AdornedTargetCollectionMetadata) {                                               </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1463              AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                           </span>
<span  style="">1464                                                                                                                    </span>
<span class="-4994014003685781795" onmouseenter="enter('-4994014003685781795');" onmouseout="out('-4994014003685781795');" style=""><abbr title="1465              // Even though this field represents an adorned target collection, the list we want to show in the modal">1465              // Even though this field represents an adorned target collection, the list we want to show in the modðŸ”µ</abbr></span>
<span class="3396745077097675731" onmouseenter="enter('3396745077097675731');" onmouseout="out('3396745077097675731');" style="">1466              // is the standard list grid for the target entity of this field                                      </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1467              ppr.setOperationTypesOverride(null);                                                                  </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1468              ppr.setType(PersistencePackageRequest.Type.STANDARD);                                                 </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1469              ppr.setSectionEntityField(collectionField);                                                           </span>
<span  style="">1470                                                                                                                    </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1471              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1471              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span  style="">1472                                                                                                                    </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1473              DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                                 </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1474              ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1474              ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectiðŸ”µ</abbr></span>
<span class="1884537605734649521" onmouseenter="enter('1884537605734649521');" onmouseout="out('1884537605734649521');" style="">1475              listGrid.setSubCollectionFieldName(collectionField);                                                  </span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1476              listGrid.setPathOverride(request.getRequestURL().toString());                                         </span>
<span class="2370419943178688476" onmouseenter="enter('2370419943178688476');" onmouseout="out('2370419943178688476');" style="">1477              listGrid.setFriendlyName(collectionMetadata.getPolymorphicEntities().getFriendlyName());              </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1478              if (entityForm == null) {                                                                             </span>
<span class="-1229292684052118628" onmouseenter="enter('-1229292684052118628');" onmouseout="out('-1229292684052118628');" style=""><abbr title="1479                  entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, true);">1479                  entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-7486141420721649683" onmouseenter="enter('-7486141420721649683');" onmouseout="out('-7486141420721649683');" style="">1480                  entityForm.setCeilingEntityClassname(ppr.getAdornedList().getAdornedTargetEntityClassname());     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1481              } else {                                                                                              </span>
<span class="7685228187033982459" onmouseenter="enter('7685228187033982459');" onmouseout="out('7685228187033982459');" style=""><abbr title="1482                  formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectionCrumbs, true);">1482                  formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectionCrumbs, ðŸ”µ</abbr></span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1483                  formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1484              }                                                                                                     </span>
<span  style="">1485                                                                                                                    </span>
<span class="5169338689637413329" onmouseenter="enter('5169338689637413329');" onmouseout="out('5169338689637413329');" style="">1486              listGrid.setListGridType(ListGrid.Type.ADORNED);                                                      </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1487              for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                                </span>
<span class="8450559638200016101" onmouseenter="enter('8450559638200016101');" onmouseout="out('8450559638200016101');" style="">1488                  if (entry.getValue().getIsVisible()) {                                                            </span>
<span class="1657391013588898454" onmouseenter="enter('1657391013588898454');" onmouseout="out('1657391013588898454');" style="">1489                      listGrid.setListGridType(ListGrid.Type.ADORNED_WITH_FORM);                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1490                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1491                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1492              }                                                                                                     </span>
<span  style="">1493                                                                                                                    </span>
<span class="-757286675881477752" onmouseenter="enter('-757286675881477752');" onmouseout="out('-757286675881477752');" style="">1494              // This is part of an add, so we want to be able to filter/sort the listgrid                          </span>
<span class="3421525283764936758" onmouseenter="enter('3421525283764936758');" onmouseout="out('3421525283764936758');" style="">1495              listGrid.setIsSortable(false);                                                                        </span>
<span class="-2714096270635703274" onmouseenter="enter('-2714096270635703274');" onmouseout="out('-2714096270635703274');" style="">1496              listGrid.setCanFilterAndSort(true);                                                                   </span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1497              listGrid.removeAllRowActions();                                                                       </span>
<span  style="">1498                                                                                                                    </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1499              model.addAttribute(&quot;listGrid&quot;, listGrid);                                                             </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1500              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="-1071174233767081578" onmouseenter="enter('-1071174233767081578');" onmouseout="out('-1071174233767081578');" style="">1501              model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedSelectEntity&quot;);                                          </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1502          } else if (md instanceof MapMetadata) {                                                                   </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1503              MapMetadata fmd = (MapMetadata) md;                                                                   </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1504              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1504              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span  style="">1505                                                                                                                    </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1506              if (entityForm == null) {                                                                             </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style="">1507                  entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1508              } else {                                                                                              </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1509                  formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);         </span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1510                  formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1511              }                                                                                                     </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1512              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="-892500240032703395" onmouseenter="enter('-892500240032703395');" onmouseout="out('-892500240032703395');" style="">1513              model.addAttribute(&quot;viewType&quot;, &quot;modal/mapAddEntity&quot;);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1514          }                                                                                                         </span>
<span  style="">1515                                                                                                                    </span>
<span class="6074380392351813368" onmouseenter="enter('6074380392351813368');" onmouseout="out('6074380392351813368');" style="">1516          // Set the parent id on the entity form                                                                   </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1517          if (entityForm != null) {                                                                                 </span>
<span class="-3154229542834445725" onmouseenter="enter('-3154229542834445725');" onmouseout="out('-3154229542834445725');" style="">1518              entityForm.setParentId(id);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1519          }                                                                                                         </span>
<span  style="">1520                                                                                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1521          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="7819166863376485578" onmouseenter="enter('7819166863376485578');" onmouseout="out('7819166863376485578');" style="">1522          model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_COLLECTION_ITEM.getType());                     </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1523          model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                             </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1524          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1525 -        return &quot;modules/modalContainer&quot;;                                                                          </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1526 +        return MODAL_CONTAINER_VIEW;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1527      }                                                                                                             </span>
<span  style="">1528                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1529      /**                                                                                                           </span>
<span class="3915085583429756257" onmouseenter="enter('3915085583429756257');" onmouseout="out('3915085583429756257');" style="">1530       * Shows the appropriate modal dialog to edit the selected collection item                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1531       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1532       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1533       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1534       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1535       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1536       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1537       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1538       * @param collectionItemId                                                                                    </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1539       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1540       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1541       */                                                                                                           </span>
<span class="5941881897199209931" onmouseenter="enter('5941881897199209931');" onmouseout="out('5941881897199209931');" style=""><abbr title="1542      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.GET)">1542      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.ðŸ”µ</abbr></span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style="">1543      public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model, </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1544              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1545              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1546              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1547              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1548              @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                             </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1549          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1549          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateðŸ”µ</abbr></span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1550                  ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1551      }                                                                                                             </span>
<span  style="">1552                                                                                                                    </span>
<span class="-3777402830265989862" onmouseenter="enter('-3777402830265989862');" onmouseout="out('-3777402830265989862');" style="">1553      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.GET)          </span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style="">1554      public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model, </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1555              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1556              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1557              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1558              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {                   </span>
<span class="7585768018133278114" onmouseenter="enter('7585768018133278114');" onmouseout="out('7585768018133278114');" style="">1559          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,    </span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1560                  ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1561      }                                                                                                             </span>
<span  style="">1562                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1563      /**                                                                                                           </span>
<span class="6761933478321573145" onmouseenter="enter('6761933478321573145');" onmouseout="out('6761933478321573145');" style=""><abbr title="1564       * Shows the appropriate modal dialog to view the selected collection item. This will display the modal as readonly">1564       * Shows the appropriate modal dialog to view the selected collection item. This will display the modal as reaðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1565       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1566       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1567       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1568       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1569       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1570       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1571       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1572       * @param collectionItemId                                                                                    </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1573       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1574       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1575       */                                                                                                           </span>
<span class="5228464490364608791" onmouseenter="enter('5228464490364608791');" onmouseout="out('5228464490364608791');" style=""><abbr title="1576      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = RequestMethod.GET)">1576      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = RequestMeðŸ”µ</abbr></span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style="">1577      public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1578              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1579              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1580              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1581              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1582              @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                             </span>
<span class="7887850161668822106" onmouseenter="enter('7887850161668822106');" onmouseout="out('7887850161668822106');" style=""><abbr title="1583          String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1583          String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1584                  ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                                  </span>
<span  style="">1585                                                                                                                    </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1586          // Since this is a read-only view, actions don&#x27;t make sense in this context                               </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1587          EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                             </span>
<span class="7289613241506142720" onmouseenter="enter('7289613241506142720');" onmouseout="out('7289613241506142720');" style="">1588          addAuditableDisplayFields(ef);                                                                            </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1589          ef.removeAllActions();                                                                                    </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1590          ef.setReadOnly();                                                                                         </span>
<span  style="">1591                                                                                                                    </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1592          return returnPath;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1593      }                                                                                                             </span>
<span  style="">1594                                                                                                                    </span>
<span class="6858008221927215769" onmouseenter="enter('6858008221927215769');" onmouseout="out('6858008221927215769');" style="">1595      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view&quot;, method = RequestMethod.GET)     </span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style="">1596      public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1597              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1598              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1599              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1600              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {                   </span>
<span class="2521791674908842244" onmouseenter="enter('2521791674908842244');" onmouseout="out('2521791674908842244');" style=""><abbr title="1601          String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,">1601          String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1602                  ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                                  </span>
<span  style="">1603                                                                                                                    </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1604          // Since this is a read-only view, actions don&#x27;t make sense in this context                               </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1605          EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                             </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1606          ef.removeAllActions();                                                                                    </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1607          ef.setReadOnly();                                                                                         </span>
<span  style="">1608                                                                                                                    </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1609          return returnPath;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1610      }                                                                                                             </span>
<span  style="">1611                                                                                                                    </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1612      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1612      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVarðŸ”µ</abbr></span>
<span class="6852009337058352330" onmouseenter="enter('6852009337058352330');" onmouseout="out('6852009337058352330');" style=""><abbr title="1613              String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderType) throws ServiceException {">1613              String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderTypeðŸ”µ</abbr></span>
<span class="-2699953653458232908" onmouseenter="enter('-2699953653458232908');" onmouseout="out('-2699953653458232908');" style=""><abbr title="1614          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId, modalHeaderType, null, null);">1614          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1615      }                                                                                                             </span>
<span  style="">1616                                                                                                                    </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1617      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1617      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVarðŸ”µ</abbr></span>
<span class="-3706011950121400951" onmouseenter="enter('-3706011950121400951');" onmouseout="out('-3706011950121400951');" style=""><abbr title="1618              String id, String collectionField, String collectionItemId, String modalHeaderType) throws ServiceException {">1618              String id, String collectionField, String collectionItemId, String modalHeaderType) throws ServiceExceðŸ”µ</abbr></span>
<span class="-6899013896128397577" onmouseenter="enter('-6899013896128397577');" onmouseout="out('-6899013896128397577');" style=""><abbr title="1619          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, null, null);">1619          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1620      }                                                                                                             </span>
<span  style="">1621                                                                                                                    </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1622      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1622      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVarðŸ”µ</abbr></span>
<span class="4852573692087282601" onmouseenter="enter('4852573692087282601');" onmouseout="out('4852573692087282601');" style=""><abbr title="1623                  String id, String collectionField, String collectionItemId, String modalHeaderType, EntityForm entityForm, Entity entity) throws ServiceException {">1623                  String id, String collectionField, String collectionItemId, String modalHeaderType, EntityForm entðŸ”µ</abbr></span>
<span class="6580107021722154279" onmouseenter="enter('6580107021722154279');" onmouseout="out('6580107021722154279');" style=""><abbr title="1624          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, entityForm, entity);">1624          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1625      }                                                                                                             </span>
<span  style="">1626                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1627      /**                                                                                                           </span>
<span class="837861132196545598" onmouseenter="enter('837861132196545598');" onmouseout="out('837861132196545598');" style=""><abbr title="1628       * Shows the view and populates the model for updating a collection item. You can also pass in an entityform and entity">1628       * Shows the view and populates the model for updating a collection item. You can also pass in an entityform aðŸ”µ</abbr></span>
<span class="5643306329084644224" onmouseenter="enter('5643306329084644224');" onmouseout="out('5643306329084644224');" style="">1629       * which are optional. If they are not passed in then they are automatically looked up                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1630       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1631       * @param request                                                                                             </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1632       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1633       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1634       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1635       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1636       * @param collectionItemId                                                                                    </span>
<span class="-5929844173285242940" onmouseenter="enter('-5929844173285242940');" onmouseout="out('-5929844173285242940');" style="">1637       * @param modalHeaderType                                                                                     </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1638       * @param entityForm                                                                                          </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style="">1639       * @param entity                                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1640       * @return                                                                                                    </span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1641       * @throws ServiceException                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1642       */                                                                                                           </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1643 -    protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1643 -    protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVarðŸ”µ</abbr></span>
<span class="-7524579279249503431" onmouseenter="enter('-7524579279249503431');" onmouseout="out('-7524579279249503431');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1644 -            String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderType, EntityForm entityForm, Entity entity) throws ServiceException {">1644 -            String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderTypeðŸ”µ</abbr></span>
<span class="-7113907340183053787" onmouseenter="enter('-7113907340183053787');" onmouseout="out('-7113907340183053787');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1645 +    protected String showViewUpdateCollection(HttpServletRequest request,                                         </span>
<span class="-8519940996091909282" onmouseenter="enter('-8519940996091909282');" onmouseout="out('-8519940996091909282');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1646 +            Model model,                                                                                          </span>
<span class="233550986134862533" onmouseenter="enter('233550986134862533');" onmouseout="out('233550986134862533');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1647 +            Map&lt;String, String&gt; pathVars,                                                                         </span>
<span class="462404651577214798" onmouseenter="enter('462404651577214798');" onmouseout="out('462404651577214798');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1648 +            String id,                                                                                            </span>
<span class="-5551105944774799057" onmouseenter="enter('-5551105944774799057');" onmouseout="out('-5551105944774799057');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1649 +            String collectionField,                                                                               </span>
<span class="-7138244874257810737" onmouseenter="enter('-7138244874257810737');" onmouseout="out('-7138244874257810737');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1650 +            String collectionItemId,                                                                              </span>
<span class="7426253478403504017" onmouseenter="enter('7426253478403504017');" onmouseout="out('7426253478403504017');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1651 +            String alternateId,                                                                                   </span>
<span class="2900696252953040190" onmouseenter="enter('2900696252953040190');" onmouseout="out('2900696252953040190');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1652 +            String modalHeaderType,                                                                               </span>
<span class="5597094285729719755" onmouseenter="enter('5597094285729719755');" onmouseout="out('5597094285729719755');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1653 +            EntityForm entityForm,                                                                                </span>
<span class="3632664887850253049" onmouseenter="enter('3632664887850253049');" onmouseout="out('3632664887850253049');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1654 +            Entity entity) throws ServiceException {                                                              </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1655          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1656          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1657          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1658          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1658          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1659          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1660          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span class="-2889762407992276786" onmouseenter="enter('-2889762407992276786');" onmouseout="out('-2889762407992276786');" style="">1661          SectionCrumb nextCrumb = new SectionCrumb();                                                              </span>
<span class="4180533444018328805" onmouseenter="enter('4180533444018328805');" onmouseout="out('4180533444018328805');" style="">1662          if (md instanceof MapMetadata) {                                                                          </span>
<span class="-382349485821163458" onmouseenter="enter('-382349485821163458');" onmouseout="out('-382349485821163458');" style="">1663              nextCrumb.setSectionIdentifier(((MapMetadata) md).getValueClassName());                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1664          } else {                                                                                                  </span>
<span class="1919475910220989527" onmouseenter="enter('1919475910220989527');" onmouseout="out('1919475910220989527');" style="">1665              nextCrumb.setSectionIdentifier(((CollectionMetadata) md).getCollectionCeilingEntity());               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1666          }                                                                                                         </span>
<span class="3745082800889494172" onmouseenter="enter('3745082800889494172');" onmouseout="out('3745082800889494172');" style="">1667          nextCrumb.setSectionId(collectionItemId);                                                                 </span>
<span class="7047611651117816234" onmouseenter="enter('7047611651117816234');" onmouseout="out('7047611651117816234');" style="">1668          if (!sectionCrumbs.contains(nextCrumb)) {                                                                 </span>
<span class="-6316688126111539901" onmouseenter="enter('-6316688126111539901');" onmouseout="out('-6316688126111539901');" style="">1669              sectionCrumbs.add(nextCrumb);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1670          }                                                                                                         </span>
<span  style="">1671                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1672          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1672          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1673          Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1673          Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0ðŸ”µ</abbr></span>
<span  style="">1674                                                                                                                    </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1675          ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                          </span>
<span  style="">1676                                                                                                                    </span>
<span class="4300500518149699432" onmouseenter="enter('4300500518149699432');" onmouseout="out('4300500518149699432');" style="">1677          if (md instanceof BasicCollectionMetadata &amp;&amp;                                                              </span>
<span class="3179311364823579995" onmouseenter="enter('3179311364823579995');" onmouseout="out('3179311364823579995');" style="">1678                  (((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST) ||               </span>
<span class="-5057368181444983975" onmouseenter="enter('-5057368181444983975');" onmouseout="out('-5057368181444983975');" style="">1679                          ((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST_EMPTY))) { </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1680              BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                           </span>
<span  style="">1681                                                                                                                    </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1682              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1682              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1683              if (entity == null) {                                                                                 </span>
<span class="4597721164047448054" onmouseenter="enter('4597721164047448054');" onmouseout="out('4597721164047448054');" style=""><abbr title="1684                  entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResultSet().getRecords()[0];">1684                  entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResultSet().ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1685              }                                                                                                     </span>
<span  style="">1686                                                                                                                    </span>
<span class="-7942197356638317765" onmouseenter="enter('-7942197356638317765');" onmouseout="out('-7942197356638317765');" style="">1687              String currentTabName = getCurrentTabName(pathVars, collectionMetadata);                              </span>
<span class="9017537031938626444" onmouseenter="enter('9017537031938626444');" onmouseout="out('9017537031938626444');" style=""><abbr title="1688              Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetadata, entity, sectionCrumbs, currentTabName);">1688              Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetadata, entðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1689 -            if (entityForm == null) {                                                                             </span>
<span class="-3582618966464933757" onmouseenter="enter('-3582618966464933757');" onmouseout="out('-3582618966464933757');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1690 -                entityForm = formService.createEntityForm(collectionMetadata, entity, subRecordsMap, sectionCrumbs);">1690 -                entityForm = formService.createEntityForm(collectionMetadata, entity, subRecordsMap, sectionCrumbsðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1691 -            } else {                                                                                              </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1692 -                entityForm.clearFieldsMap();                                                                      </span>
<span class="1859879359946483810" onmouseenter="enter('1859879359946483810');" onmouseout="out('1859879359946483810');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1693 -                formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm, sectionCrumbs);">1693 -                formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm, sectionCrumbðŸ”µ</abbr></span>
<span class="5496760487980360743" onmouseenter="enter('5496760487980360743');" onmouseout="out('5496760487980360743');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1694 -                //remove all the actions since we&#x27;re not trying to redisplay them on the form                     </span>
<span class="-6469844840195102556" onmouseenter="enter('-6469844840195102556');" onmouseout="out('-6469844840195102556');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1695 -                entityForm.removeAllActions();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1696 -            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1697 +                                                                                                                  </span>
<span class="348957922752701667" onmouseenter="enter('348957922752701667');" onmouseout="out('348957922752701667');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1698 +            entityForm = reinitializeEntityForm(entityForm, collectionMetadata, entity,                           </span>
<span class="-6666340752275266103" onmouseenter="enter('-6666340752275266103');" onmouseout="out('-6666340752275266103');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1699 +                    subRecordsMap, sectionCrumbs);                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1700 +                                                                                                                  </span>
<span class="-3892497188964586657" onmouseenter="enter('-3892497188964586657');" onmouseout="out('-3892497188964586657');" style="">1701              entityForm.removeAction(DefaultEntityFormActions.DELETE);                                             </span>
<span class="6748640999540281749" onmouseenter="enter('6748640999540281749');" onmouseout="out('6748640999540281749');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1702 +            entityForm.removeAction(DefaultEntityFormActions.DUPLICATE);                                          </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1703 +                                                                                                                  </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1704              addAuditableDisplayFields(entityForm);                                                                </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1705              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="2070483683171714322" onmouseenter="enter('2070483683171714322');" onmouseout="out('2070483683171714322');" style="">1706              model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleEditEntity&quot;);                                             </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1707          } else if (md instanceof AdornedTargetCollectionMetadata) {                                               </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1708              AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                           </span>
<span  style="">1709                                                                                                                    </span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1710              if (entity == null) {                                                                                 </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style="">1711                  entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,      </span>
<span class="-2961516840614790290" onmouseenter="enter('-2961516840614790290');" onmouseout="out('-2961516840614790290');" style="">1712                      collectionItemId, sectionCrumbs, alternateId).getDynamicResultSet().getRecords()[0];          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1713              }                                                                                                     </span>
<span  style="">1714                                                                                                                    </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1715              boolean populateTypeAndId = true;                                                                     </span>
<span class="921756716374353809" onmouseenter="enter('921756716374353809');" onmouseout="out('921756716374353809');" style="">1716              boolean isViewCollectionItem = ModalHeaderType.VIEW_COLLECTION_ITEM.getType().equals(modalHeaderType);</span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1717              if (entityForm == null) {                                                                             </span>
<span class="-8902040329002931298" onmouseenter="enter('-8902040329002931298');" onmouseout="out('-8902040329002931298');" style=""><abbr title="1718                  entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, sectionCrumbs, false);">1718                  entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem,ðŸ”µ</abbr></span>
<span class="-4655192855930300298" onmouseenter="enter('-4655192855930300298');" onmouseout="out('-4655192855930300298');" style="">1719                  entityForm.removeAction(DefaultAdornedEntityFormActions.Add);                                     </span>
<span class="1109271490036416226" onmouseenter="enter('1109271490036416226');" onmouseout="out('1109271490036416226');" style="">1720                  entityForm.addAction(DefaultAdornedEntityFormActions.Save);                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1721              } else {                                                                                              </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1722                  entityForm.clearFieldsMap();                                                                      </span>
<span class="2583214667713512490" onmouseenter="enter('2583214667713512490');" onmouseout="out('2583214667713512490');" style="">1723                  String entityType = entityForm.getEntityType();                                                   </span>
<span class="-6584758178229470245" onmouseenter="enter('-6584758178229470245');" onmouseout="out('-6584758178229470245');" style=""><abbr title="1724                  formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entityForm, sectionCrumbs, false);">1724                  formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entityForm, ðŸ”µ</abbr></span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style="">1725                  entityForm.setEntityType(entityType);                                                             </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1726                  populateTypeAndId = false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1727              }                                                                                                     </span>
<span  style="">1728                                                                                                                    </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1729              Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                                    </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1730              adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1730              adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassNaðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1731                      collectionField,                                                                              </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1732                      collectionItemId, responseMap);                                                               </span>
<span  style="">1733                                                                                                                    </span>
<span class="-3972135447881278836" onmouseenter="enter('-3972135447881278836');" onmouseout="out('-3972135447881278836');" style=""><abbr title="1734              //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and Id is used.">1734              //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and Id is useðŸ”µ</abbr></span>
<span class="-8007896595560301001" onmouseenter="enter('-8007896595560301001');" onmouseout="out('-8007896595560301001');" style="">1735              //It should be the entity and referenced Id of the adorned entity (not the target entity and Id).     </span>
<span class="316997016312344867" onmouseenter="enter('316997016312344867');" onmouseout="out('316997016312344867');" style="">1736              entityForm.setTranslationCeilingEntity(entityForm.getEntityType());                                   </span>
<span class="-4512360180775881719" onmouseenter="enter('-4512360180775881719');" onmouseout="out('-4512360180775881719');" style="">1737              entityForm.setTranslationId(alternateId);                                                             </span>
<span  style="">1738                                                                                                                    </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style="">1739              ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();           </span>
<span class="-1465905251928147670" onmouseenter="enter('-1465905251928147670');" onmouseout="out('-1465905251928147670');" style="">1740              for (String field : fmd.getMaintainedAdornedTargetFields()) {                                         </span>
<span class="-2821179418575098708" onmouseenter="enter('-2821179418575098708');" onmouseout="out('-2821179418575098708');" style="">1741                  if (responseMap.containsKey(field) &amp;&amp; responseMap.containsKey(&quot;autoSubmit&quot;)) {                    </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1742                      continue;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1743                  }                                                                                                 </span>
<span class="-3390991397790942785" onmouseenter="enter('-3390991397790942785');" onmouseout="out('-3390991397790942785');" style="">1744                  Property p = cmd.getPMap().get(field);                                                            </span>
<span class="3110636146594998978" onmouseenter="enter('3110636146594998978');" onmouseout="out('3110636146594998978');" style="">1745                  if (p != null &amp;&amp; p.getMetadata() instanceof AdornedTargetCollectionMetadata) {                    </span>
<span class="-1526293730221303684" onmouseenter="enter('-1526293730221303684');" onmouseout="out('-1526293730221303684');" style=""><abbr title="1746                      // Because we&#x27;re dealing with a nested adorned target collection, this particular request must act">1746                      // Because we&#x27;re dealing with a nested adorned target collection, this particular request mustðŸ”µ</abbr></span>
<span class="5008429970050276114" onmouseenter="enter('5008429970050276114');" onmouseout="out('5008429970050276114');" style=""><abbr title="1747                      // directly on the first adorned target collection. Because of this, we need the actual id property">1747                      // directly on the first adorned target collection. Because of this, we need the actual id proðŸ”µ</abbr></span>
<span class="-7713892716328274330" onmouseenter="enter('-7713892716328274330');" onmouseout="out('-7713892716328274330');" style=""><abbr title="1748                      // from the entity that models the adorned target relationship, and not the id of the target object.">1748                      // from the entity that models the adorned target relationship, and not the id of the target oðŸ”µ</abbr></span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1749                      Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1749                      Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style="">1750                      DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,      </span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1751                              alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();                 </span>
<span  style="">1752                                                                                                                    </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1753                      ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1753                      ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, pðŸ”µ</abbr></span>
<span class="-6504403122086949696" onmouseenter="enter('-6504403122086949696');" onmouseout="out('-6504403122086949696');" style="">1754                              ppr.getAdornedList().getAdornedTargetEntityClassname(), sectionCrumbs);               </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1755                      listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                                 </span>
<span  style="">1756                                                                                                                    </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1757                      if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {                </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1758                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1758                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1759                      } else {                                                                                      </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1760                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1760                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1761                      }                                                                                             </span>
<span class="2712626054905490038" onmouseenter="enter('2712626054905490038');" onmouseout="out('2712626054905490038');" style="">1762                  } else if (p != null &amp;&amp; p.getMetadata() instanceof MapMetadata) {                                 </span>
<span class="-388196981394792667" onmouseenter="enter('-388196981394792667');" onmouseout="out('-388196981394792667');" style="">1763                      // See above comment for AdornedTargetCollectionMetadata                                      </span>
<span class="-9194902891343883685" onmouseenter="enter('-9194902891343883685');" onmouseout="out('-9194902891343883685');" style="">1764                      MapMetadata mmd = (MapMetadata) p.getMetadata();                                              </span>
<span  style="">1765                                                                                                                    </span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1766                      Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1766                      Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style="">1767                      DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,      </span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1768                              alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();                 </span>
<span  style="">1769                                                                                                                    </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1770                      ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1770                      ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, pðŸ”µ</abbr></span>
<span class="-6515044965274807025" onmouseenter="enter('-6515044965274807025');" onmouseout="out('-6515044965274807025');" style="">1771                              mmd.getTargetClass(), sectionCrumbs);                                                 </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1772                      listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                                 </span>
<span  style="">1773                                                                                                                    </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1774                      if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {                </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1775                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1775                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1776                      } else {                                                                                      </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1777                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1777                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1778                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1779                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1780              }                                                                                                     </span>
<span  style="">1781                                                                                                                    </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style="">1782              formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);       </span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">1783              formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());                </span>
<span  style="">1784                                                                                                                    </span>
<span class="7046829326366784672" onmouseenter="enter('7046829326366784672');" onmouseout="out('7046829326366784672');" style="">1785              boolean atLeastOneBasicField = false;                                                                 </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1786              for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                                </span>
<span class="-3942382004211496115" onmouseenter="enter('-3942382004211496115');" onmouseout="out('-3942382004211496115');" style=""><abbr title="1787                  if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName()) &amp;&amp; !responseMap.containsKey(&quot;autoSubmit&quot;)) {">1787                  if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName()) &amp;&amp; !reðŸ”µ</abbr></span>
<span class="3115307772764059490" onmouseenter="enter('3115307772764059490');" onmouseout="out('3115307772764059490');" style="">1788                      atLeastOneBasicField = true;                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1789                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1790                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1791              }                                                                                                     </span>
<span class="4813170790944841786" onmouseenter="enter('4813170790944841786');" onmouseout="out('4813170790944841786');" style="">1792              if (!atLeastOneBasicField) {                                                                          </span>
<span class="3364274495995556597" onmouseenter="enter('3364274495995556597');" onmouseout="out('3364274495995556597');" style="">1793                  entityForm.removeAction(DefaultEntityFormActions.SAVE);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1794              }                                                                                                     </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1795              addAuditableDisplayFields(entityForm);                                                                </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1796              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="3009851293217081678" onmouseenter="enter('3009851293217081678');" onmouseout="out('3009851293217081678');" style="">1797              model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedEditEntity&quot;);                                            </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1798          } else if (md instanceof MapMetadata) {                                                                   </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1799              MapMetadata fmd = (MapMetadata) md;                                                                   </span>
<span  style="">1800                                                                                                                    </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1801              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1801              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1802              if (entity == null) {                                                                                 </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style="">1803                  entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,      </span>
<span class="-2813813427236819301" onmouseenter="enter('-2813813427236819301');" onmouseout="out('-2813813427236819301');" style="">1804                      collectionItemId, sectionCrumbs, null).getEntity();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1805              }                                                                                                     </span>
<span  style="">1806                                                                                                                    </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1807              boolean populateTypeAndId = true;                                                                     </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1808              if (entityForm == null) {                                                                             </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style="">1809                  entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1810              } else {                                                                                              </span>
<span class="-2965751497501930249" onmouseenter="enter('-2965751497501930249');" onmouseout="out('-2965751497501930249');" style="">1811                  //save off the prior key before clearing out the fields map as it will not appear                 </span>
<span class="-4459883460939835415" onmouseenter="enter('-4459883460939835415');" onmouseout="out('-4459883460939835415');" style="">1812                  //back on the saved entity                                                                        </span>
<span class="-8617997777962995342" onmouseenter="enter('-8617997777962995342');" onmouseout="out('-8617997777962995342');" style="">1813                  String priorKey = entityForm.findField(&quot;priorKey&quot;).getValue();                                    </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1814                  entityForm.clearFieldsMap();                                                                      </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1815                  formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);         </span>
<span class="-5674534809018144237" onmouseenter="enter('-5674534809018144237');" onmouseout="out('-5674534809018144237');" style="">1816                  entityForm.findField(&quot;priorKey&quot;).setValue(priorKey);                                              </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1817                  populateTypeAndId = false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1818              }                                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1819              try {                                                                                                 </span>
<span class="-5619455120098479761" onmouseenter="enter('-5619455120098479761');" onmouseout="out('-5619455120098479761');" style=""><abbr title="1820                  entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredField(fmd.getToOneTargetProperty()).getType().getName());">1820                  entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredField(fmdðŸ”µ</abbr></span>



<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1821              } catch (Exception e) {                                                                               </span>
<span class="4149062910666573697" onmouseenter="enter('4149062910666573697');" onmouseout="out('4149062910666573697');" style="">1822                  LOG.error(e);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1823              }                                                                                                     </span>
<span class="-1018820723400133408" onmouseenter="enter('-1018820723400133408');" onmouseout="out('-1018820723400133408');" style=""><abbr title="1824              String entityId = (fmd.getToOneTargetProperty().equals(&quot;&quot;) ? &quot;id&quot; : fmd.getToOneTargetProperty() + &quot;.id&quot;);">1824              String entityId = (fmd.getToOneTargetProperty().equals(&quot;&quot;) ? &quot;id&quot; : fmd.getToOneTargetProperty() + &quot;.iðŸ”µ</abbr></span>
<span class="423419420192712450" onmouseenter="enter('423419420192712450');" onmouseout="out('423419420192712450');" style="">1825              entityForm.setTranslationId(entity.getPMap().get(entityId).getValue());                               </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style="">1826              formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);       </span>
<span class="-7934209705949108459" onmouseenter="enter('-7934209705949108459');" onmouseout="out('-7934209705949108459');" style="">1827              formService.populateMapEntityFormFields(entityForm, entity);                                          </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style="">1828              formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);       </span>
<span class="-7934209705949108459" onmouseenter="enter('-7934209705949108459');" onmouseout="out('-7934209705949108459');" style="">1829              formService.populateMapEntityFormFields(entityForm, entity);                                          </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1830              addAuditableDisplayFields(entityForm);                                                                </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1831              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="5184741693677662709" onmouseenter="enter('5184741693677662709');" onmouseout="out('5184741693677662709');" style="">1832              model.addAttribute(&quot;viewType&quot;, &quot;modal/mapEditEntity&quot;);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1833          }                                                                                                         </span>
<span  style="">1834                                                                                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1835          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="5715532112666019496" onmouseenter="enter('5715532112666019496');" onmouseout="out('5715532112666019496');" style="">1836          model.addAttribute(&quot;modalHeaderType&quot;, modalHeaderType);                                                   </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1837          model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                             </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1838          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1839 -        return &quot;modules/modalContainer&quot;;                                                                          </span>
<span class="4471897299383983956" onmouseenter="enter('4471897299383983956');" onmouseout="out('4471897299383983956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1840 +        return MODAL_CONTAINER_VIEW;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1841 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1842 +                                                                                                                  </span>
<span class="-6629135688250429856" onmouseenter="enter('-6629135688250429856');" onmouseout="out('-6629135688250429856');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1843 +    protected EntityForm reinitializeEntityForm(final EntityForm entityForm,                                      </span>
<span class="2488527282562212871" onmouseenter="enter('2488527282562212871');" onmouseout="out('2488527282562212871');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1844 +            final ClassMetadata collectionMetadata,                                                               </span>
<span class="6244041270191906475" onmouseenter="enter('6244041270191906475');" onmouseout="out('6244041270191906475');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1845 +            final Entity entity,                                                                                  </span>
<span class="4210642227221008869" onmouseenter="enter('4210642227221008869');" onmouseout="out('4210642227221008869');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1846 +            final Map&lt;String, DynamicResultSet&gt; subRecordsMap,                                                    </span>
<span class="7695373887778905827" onmouseenter="enter('7695373887778905827');" onmouseout="out('7695373887778905827');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1847 +            final List&lt;SectionCrumb&gt; sectionCrumbs) throws ServiceException {                                     </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1848 +        if (entityForm == null) {                                                                                 </span>
<span class="5007761642077021691" onmouseenter="enter('5007761642077021691');" onmouseout="out('5007761642077021691');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1849 +            return formService                                                                                    </span>
<span class="2427987523723463928" onmouseenter="enter('2427987523723463928');" onmouseout="out('2427987523723463928');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1850 +                    .createEntityForm(collectionMetadata, entity, subRecordsMap, sectionCrumbs);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1851 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1852 +                                                                                                                  </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1853 +        entityForm.clearFieldsMap();                                                                              </span>
<span class="524385531586817703" onmouseenter="enter('524385531586817703');" onmouseout="out('524385531586817703');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1854 +        formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm,                     </span>
<span class="2971672777452209099" onmouseenter="enter('2971672777452209099');" onmouseout="out('2971672777452209099');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1855 +                sectionCrumbs);                                                                                   </span>
<span class="5496760487980360743" onmouseenter="enter('5496760487980360743');" onmouseout="out('5496760487980360743');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1856 +        //remove all the actions since we&#x27;re not trying to redisplay them on the form                             </span>
<span class="-6469844840195102556" onmouseenter="enter('-6469844840195102556');" onmouseout="out('-6469844840195102556');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1857 +        entityForm.removeAllActions();                                                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1858 +                                                                                                                  </span>
<span class="6548609876597156982" onmouseenter="enter('6548609876597156982');" onmouseout="out('6548609876597156982');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1859 +        return entityForm;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1860      }                                                                                                             </span>
<span  style="">1861                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1862      /**                                                                                                           </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1863       * Updates the specified collection item                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1864       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1865       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1866       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1867       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1868       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1869       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1870       * @param collectionField                                                                                     </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1871       * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1871       * @param collectionItemId the collection primary key value (in the case of adorned target collection, this isðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1872       * @param entityForm                                                                                          </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1873       * @param result                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1874       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1875       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1876       */                                                                                                           </span>
<span class="1690395709289479208" onmouseenter="enter('1690395709289479208');" onmouseout="out('1690395709289479208');" style="">1877      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.POST)         </span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style="">1878      public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,     </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1879              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1880              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1881              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1882              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1883              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                            </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1884              BindingResult result) throws Exception {                                                              </span>
<span class="454845068344591329" onmouseenter="enter('454845068344591329');" onmouseout="out('454845068344591329');" style=""><abbr title="1885          return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, entityForm, null, result);">1885          return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, entðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1886      }                                                                                                             </span>
<span  style="">1887                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1888      /**                                                                                                           </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1889       * Updates the specified collection item                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1890       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1891       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1892       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1893       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1894       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1895       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1896       * @param collectionField                                                                                     </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1897       * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1897       * @param collectionItemId the collection primary key value (in the case of adorned target collection, this isðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1898       * @param entityForm                                                                                          </span>
<span class="4031667150854181086" onmouseenter="enter('4031667150854181086');" onmouseout="out('4031667150854181086');" style=""><abbr title="1899       * @param alternateId in the case of adorned target collections, this is the primary key value of the collection member">1899       * @param alternateId in the case of adorned target collections, this is the primary key value of the collectiðŸ”µ</abbr></span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1900       * @param result                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1901       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1902       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1903       */                                                                                                           </span>
<span class="6716233350399381715" onmouseenter="enter('6716233350399381715');" onmouseout="out('6716233350399381715');" style=""><abbr title="1904      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.POST)">1904      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.ðŸ”µ</abbr></span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style="">1905      public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,     </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1906              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1907              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1908              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1909              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1910              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                            </span>
<span class="-5366992345424767315" onmouseenter="enter('-5366992345424767315');" onmouseout="out('-5366992345424767315');" style="">1911              @PathVariable(value=&quot;alternateId&quot;) String alternateId,                                                </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1912              BindingResult result) throws Exception {                                                              </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1913          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1914          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1915          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1916          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1916          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1917          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1918                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1919          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1919          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1920          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1921          service.clearEntityManager();                                                                             </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1922          // First, we must save the collection entity                                                              </span>
<span class="3262117580653454816" onmouseenter="enter('3262117580653454816');" onmouseout="out('3262117580653454816');" style=""><abbr title="1923          PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, collectionItemId, alternateId, sectionCrumbs);">1923          PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1924          Entity savedEntity = persistenceResponse.getEntity();                                                     </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1925          entityFormValidator.validate(entityForm, savedEntity, result);                                            </span>
<span  style="">1926                                                                                                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1927          if (result.hasErrors()) {                                                                                 </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1928              return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1928              return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alterðŸ”µ</abbr></span>
<span class="-1009973048758571460" onmouseenter="enter('-1009973048758571460');" onmouseout="out('-1009973048758571460');" style="">1929                      ModalHeaderType.UPDATE_COLLECTION_ITEM.getType(), entityForm, savedEntity);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1930          }                                                                                                         </span>
<span  style="">1931                                                                                                                    </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1932          // Next, we must get the new list grid that represents this collection                                    </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1933          // We return the new list grid so that it can replace the currently visible one                           </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1934          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1934          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persðŸ”µ</abbr></span>
<span  style="">1935                                                                                                                    </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1936          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1937          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1938          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1939          return &quot;views/standaloneListGrid&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1940      }                                                                                                             </span>
<span  style="">1941                                                                                                                    </span>
<span class="-2715204734461845190" onmouseenter="enter('-2715204734461845190');" onmouseout="out('-2715204734461845190');" style="">1942      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMethod.POST)</span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">1943      public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,             </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">1944              HttpServletResponse response, Model model,                                                            </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1945              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1946              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1947              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1948              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="6458961487045284345" onmouseenter="enter('6458961487045284345');" onmouseout="out('6458961487045284345');" style="">1949              @RequestParam(value=&quot;newSequence&quot;) String newSequence) throws Exception {                             </span>
<span class="-6477101312884008952" onmouseenter="enter('-6477101312884008952');" onmouseout="out('-6477101312884008952');" style=""><abbr title="1950          return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collectionItemId, newSequence, null);">1950          return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collectionIteðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1951      }                                                                                                             </span>
<span  style="">1952                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1953      /**                                                                                                           </span>
<span class="-7447609122613552365" onmouseenter="enter('-7447609122613552365');" onmouseout="out('-7447609122613552365');" style="">1954       * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target collections </span>
<span class="5163972519999742424" onmouseenter="enter('5163972519999742424');" onmouseout="out('5163972519999742424');" style="">1955       * where a sort field is specified -- any other invocation is incorrect and will result in an exception.      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1956       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1957       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1958       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1959       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1960       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1961       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1962       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1963       * @param collectionItemId                                                                                    </span>
<span class="8542418631474543845" onmouseenter="enter('8542418631474543845');" onmouseout="out('8542418631474543845');" style="">1964       * @return an object explaining the state of the operation                                                    </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1965       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1966       */                                                                                                           </span>
<span class="1279723180837283801" onmouseenter="enter('1279723180837283801');" onmouseout="out('1279723180837283801');" style=""><abbr title="1967      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, method = RequestMethod.POST)">1967      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, method = RequeðŸ”µ</abbr></span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">1968      public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,             </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">1969              HttpServletResponse response, Model model,                                                            </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1970              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1971              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1972              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1973              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="6744719432735700494" onmouseenter="enter('6744719432735700494');" onmouseout="out('6744719432735700494');" style="">1974              @RequestParam(value=&quot;newSequence&quot;) String newSequence,                                                </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1975              @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                             </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1976          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1977          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1978          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1979          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1979          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1980          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1981          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span  style="">1982                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1983          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1983          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="6971869165316675737" onmouseenter="enter('6971869165316675737');" onmouseout="out('6971869165316675737');" style="">1984          ppr.addCustomCriteria(&quot;reorderParentEntityFetch&quot;);                                                        </span>
<span  style="">1985                                                                                                                    </span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1986          Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1986          Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0ðŸ”µ</abbr></span>
<span  style="">1987                                                                                                                    </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1988          ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                          </span>
<span  style="">1989                                                                                                                    </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1990          if (md instanceof AdornedTargetCollectionMetadata) {                                                      </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1991              AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                           </span>
<span class="-895931586936599512" onmouseenter="enter('-895931586936599512');" onmouseout="out('-895931586936599512');" style="">1992              AdornedTargetList atl = ppr.getAdornedList();                                                         </span>
<span  style="">1993                                                                                                                    </span>
<span class="4013888246220668443" onmouseenter="enter('4013888246220668443');" onmouseout="out('4013888246220668443');" style="">1994              // Get an entity form for the entity                                                                  </span>
<span class="4144133685169635892" onmouseenter="enter('4144133685169635892');" onmouseout="out('4144133685169635892');" style=""><abbr title="1995              EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, false);">1995              EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionðŸ”µ</abbr></span>
<span class="985151044669117950" onmouseenter="enter('985151044669117950');" onmouseout="out('985151044669117950');" style="">1996              Entity entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,   </span>
<span class="-4422231398086337832" onmouseenter="enter('-4422231398086337832');" onmouseout="out('-4422231398086337832');" style="">1997                      collectionItemId, sectionCrumbs, alternateId, new String[]{&quot;reorderChildEntityFetch&quot;})        </span>
<span class="-7850695853310911802" onmouseenter="enter('-7850695853310911802');" onmouseout="out('-7850695853310911802');" style="">1998                      .getDynamicResultSet().getRecords()[0];                                                       </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">1999              formService.populateEntityFormFields(entityForm, entity);                                             </span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">2000              formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());                </span>
<span  style="">2001                                                                                                                    </span>
<span class="-3124065187694573478" onmouseenter="enter('-3124065187694573478');" onmouseout="out('-3124065187694573478');" style=""><abbr title="2002              // Set the new sequence (note that it will come in 0-indexed but the persistence module expects 1-indexed)">2002              // Set the new sequence (note that it will come in 0-indexed but the persistence module expects 1-indeðŸ”µ</abbr></span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">2003              int sequenceValue = Integer.parseInt(newSequence) + 1;                                                </span>
<span class="2556919505341751863" onmouseenter="enter('2556919505341751863');" onmouseout="out('2556919505341751863');" style="">2004              Field field = entityForm.findField(atl.getSortField());                                               </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">2005              field.setValue(String.valueOf(sequenceValue));                                                        </span>
<span  style="">2006                                                                                                                    </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">2007              Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                                    </span>
<span class="-5669538829732150992" onmouseenter="enter('-5669538829732150992');" onmouseout="out('-5669538829732150992');" style=""><abbr title="2008              PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, alternateId, sectionCrumbs);">2008              PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, ðŸ”µ</abbr></span>
<span class="-6209319883391535282" onmouseenter="enter('-6209319883391535282');" onmouseout="out('-6209319883391535282');" style="">2009              Property displayOrder = persistenceResponse.getEntity().findProperty(atl.getSortField());             </span>
<span  style="">2010                                                                                                                    </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">2011              responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                                      </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">2012              responseMap.put(&quot;field&quot;, collectionField);                                                            </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">2013              responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());            </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">2014              return responseMap;                                                                                   </span>
<span class="-3117865694677500361" onmouseenter="enter('-3117865694677500361');" onmouseout="out('-3117865694677500361');" style="">2015          } else if (md instanceof BasicCollectionMetadata) {                                                       </span>
<span class="-8492572584837651214" onmouseenter="enter('-8492572584837651214');" onmouseout="out('-8492572584837651214');" style="">2016              BasicCollectionMetadata cd = (BasicCollectionMetadata) md;                                            </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">2017              Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                                    </span>
<span class="-2546552603594507996" onmouseenter="enter('-2546552603594507996');" onmouseout="out('-2546552603594507996');" style=""><abbr title="2018              Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResultSet().getRecords()[0];">2018              Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResultSet().geðŸ”µ</abbr></span>
<span  style="">2019                                                                                                                    </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="2020              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">2020              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span class="-2818097934143266938" onmouseenter="enter('-2818097934143266938');" onmouseout="out('-2818097934143266938');" style="">2021              EntityForm entityForm = formService.createEntityForm(collectionMetadata, sectionCrumbs);              </span>
<span class="2758594966987635918" onmouseenter="enter('2758594966987635918');" onmouseout="out('2758594966987635918');" style=""><abbr title="2022              boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">2022              boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentðŸ”µ</abbr></span>
<span class="8701882977725374051" onmouseenter="enter('8701882977725374051');" onmouseout="out('8701882977725374051');" style="">2023              if(listGridReadOnly){                                                                                 </span>
<span class="2312726484157116526" onmouseenter="enter('2312726484157116526');" onmouseout="out('2312726484157116526');" style="">2024                          throw new SecurityServiceException();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2025              }                                                                                                     </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">2026              if (!StringUtils.isEmpty(cd.getSortProperty())) {                                                     </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">2027                  Field f = new Field()                                                                             </span>
<span class="-2538063021289876061" onmouseenter="enter('-2538063021289876061');" onmouseout="out('-2538063021289876061');" style="">2028                          .withName(cd.getSortProperty())                                                           </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">2029                          .withFieldType(SupportedFieldType.HIDDEN.toString());                                     </span>
<span class="5054103958554301667" onmouseenter="enter('5054103958554301667');" onmouseout="out('5054103958554301667');" style="">2030                  entityForm.addHiddenField(mainMetadata, f);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2031              }                                                                                                     </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">2032              formService.populateEntityFormFields(entityForm, entity);                                             </span>
<span  style="">2033                                                                                                                    </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">2034              if (!StringUtils.isEmpty(cd.getSortProperty())) {                                                     </span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">2035                  int sequenceValue = Integer.parseInt(newSequence) + 1;                                            </span>
<span class="-3733495482183042291" onmouseenter="enter('-3733495482183042291');" onmouseout="out('-3733495482183042291');" style="">2036                  Field field = entityForm.findField(cd.getSortProperty());                                         </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">2037                  field.setValue(String.valueOf(sequenceValue));                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2038              }                                                                                                     </span>
<span  style="">2039                                                                                                                    </span>
<span class="3923458830762383909" onmouseenter="enter('3923458830762383909');" onmouseout="out('3923458830762383909');" style=""><abbr title="2040              PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, sectionCrumbs);">2040              PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, ðŸ”µ</abbr></span>
<span class="-792608105002716351" onmouseenter="enter('-792608105002716351');" onmouseout="out('-792608105002716351');" style="">2041              Property displayOrder = persistenceResponse.getEntity().findProperty(cd.getSortProperty());           </span>
<span  style="">2042                                                                                                                    </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">2043              responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                                      </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">2044              responseMap.put(&quot;field&quot;, collectionField);                                                            </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">2045              responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());            </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">2046              return responseMap;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">2047          } else {                                                                                                  </span>
<span class="7542199431919878786" onmouseenter="enter('7542199431919878786');" onmouseout="out('7542199431919878786');" style=""><abbr title="2048              throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collection fields.&quot;);">2048              throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collection fiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2049          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2050      }                                                                                                             </span>
<span  style="">2051                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2052      /**                                                                                                           </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">2053       * Removes the requested collection item                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2054       *                                                                                                            </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="2055       * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">2055       * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item froðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">2056       * map collection.                                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2057       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">2058       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">2059       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">2060       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">2061       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">2062       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">2063       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">2064       * @param collectionItemId                                                                                    </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">2065       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">2066       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2067       */                                                                                                           </span>
<span class="6340503715634976611" onmouseenter="enter('6340503715634976611');" onmouseout="out('6340503715634976611');" style="">2068      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/delete&quot;, method = RequestMethod.POST)  </span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style="">2069      public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,     </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">2070              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">2071              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">2072              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">2073              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {                   </span>
<span class="6845453766150325497" onmouseenter="enter('6845453766150325497');" onmouseout="out('6845453766150325497');" style=""><abbr title="2074          return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, null);">2074          return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, nulðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2075      }                                                                                                             </span>
<span  style="">2076                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2077      /**                                                                                                           </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">2078       * Removes the requested collection item                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2079       *                                                                                                            </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="2080       * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">2080       * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item froðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">2081       * map collection.                                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2082       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">2083       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">2084       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">2085       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">2086       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">2087       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">2088       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">2089       * @param collectionItemId                                                                                    </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">2090       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">2091       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2092       */                                                                                                           </span>
<span class="-4053134536146029119" onmouseenter="enter('-4053134536146029119');" onmouseout="out('-4053134536146029119');" style=""><abbr title="2093      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method = RequestMethod.POST)">2093      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method = RequestðŸ”µ</abbr></span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style="">2094      public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,     </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">2095              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">2096              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">2097              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">2098              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">2099              @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                             </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">2100          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">2101          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">2102          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="2103          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">2103          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">2104          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">2105                                                                                                                    </span>
<span class="-6408221600487262974" onmouseenter="enter('-6408221600487262974');" onmouseout="out('-6408221600487262974');" style="">2106          String priorKey = request.getParameter(&quot;key&quot;);                                                            </span>
<span  style="">2107                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="2108          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">2108          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">2109          declareShouldIgnoreAdditionStatusFilter();                                                                </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">2110          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">2111          service.clearEntityManager();                                                                             </span>
<span class="8107528363762278945" onmouseenter="enter('8107528363762278945');" onmouseout="out('8107528363762278945');" style="">2112          // First, we must remove the collection entity                                                            </span>
<span class="-8185015406879465962" onmouseenter="enter('-8185015406879465962');" onmouseout="out('-8185015406879465962');" style=""><abbr title="2113          PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectionProperty, entity, collectionItemId, alternateId, priorKey, sectionCrumbs);">2113          PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectionProperðŸ”µ</abbr></span>
<span class="4740780245520344929" onmouseenter="enter('4740780245520344929');" onmouseout="out('4740780245520344929');" style="">2114          if (persistenceResponse.getEntity() != null &amp;&amp; persistenceResponse.getEntity().isValidationFailure()) {   </span>
<span class="-1907173364280213129" onmouseenter="enter('-1907173364280213129');" onmouseout="out('-1907173364280213129');" style="">2115              String error = &quot;There was an error removing the whatever&quot;;                                            </span>
<span class="6694909055776458558" onmouseenter="enter('6694909055776458558');" onmouseout="out('6694909055776458558');" style="">2116              if (MapUtils.isNotEmpty(persistenceResponse.getEntity().getPropertyValidationErrors())) {             </span>
<span class="2653002805011151778" onmouseenter="enter('2653002805011151778');" onmouseout="out('2653002805011151778');" style="">2117                  // If we failed, we&#x27;ll return some JSON with the first error                                      </span>
<span class="6101527636004026445" onmouseenter="enter('6101527636004026445');" onmouseout="out('6101527636004026445');" style=""><abbr title="2118                  error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator().next().get(0);">2118                  error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator().next().gðŸ”µ</abbr></span>
<span class="3589903040125146199" onmouseenter="enter('3589903040125146199');" onmouseout="out('3589903040125146199');" style="">2119              } else if (CollectionUtils.isNotEmpty(persistenceResponse.getEntity().getGlobalValidationErrors())) { </span>
<span class="-8002349788440125315" onmouseenter="enter('-8002349788440125315');" onmouseout="out('-8002349788440125315');" style="">2120                  error = persistenceResponse.getEntity().getGlobalValidationErrors().get(0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2121              }                                                                                                     </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">2122              return new JsonResponse(response)                                                                     </span>
<span class="4764127484129551096" onmouseenter="enter('4764127484129551096');" onmouseout="out('4764127484129551096');" style="">2123                  .with(&quot;status&quot;, &quot;error&quot;)                                                                          </span>
<span class="-4778619806303294332" onmouseenter="enter('-4778619806303294332');" onmouseout="out('-4778619806303294332');" style="">2124                  .with(&quot;message&quot;, BLCMessageUtils.getMessage(error))                                               </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">2125                  .done();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2126          }                                                                                                         </span>
<span  style="">2127                                                                                                                    </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">2128          // Next, we must get the new list grid that represents this collection                                    </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">2129          // We return the new list grid so that it can replace the currently visible one                           </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="2130          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">2130          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persðŸ”µ</abbr></span>
<span  style="">2131                                                                                                                    </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">2132          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">2133          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">2134          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">2135          return &quot;views/standaloneListGrid&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2136      }                                                                                                             </span>
<span  style="">2137                                                                                                                    </span>
<span class="-1722269672251008380" onmouseenter="enter('-1722269672251008380');" onmouseout="out('-1722269672251008380');" style="">2138      public void addAuditableDisplayFields(EntityForm entityForm) {                                                </span>
<span class="2220665039639111541" onmouseenter="enter('2220665039639111541');" onmouseout="out('2220665039639111541');" style="">2139          Field createdBy = entityForm.findField(&quot;auditable.createdBy&quot;);                                            </span>
<span class="-1310269621989930827" onmouseenter="enter('-1310269621989930827');" onmouseout="out('-1310269621989930827');" style="">2140          if (createdBy != null &amp;&amp; createdBy.getValue() != null) {                                                  </span>
<span class="3065344382927201496" onmouseenter="enter('3065344382927201496');" onmouseout="out('3065344382927201496');" style="">2141              addAuditableDisplayField(entityForm, createdBy);                                                      </span>
<span  style="">2142                                                                                                                    </span>
<span class="-8232178899610643805" onmouseenter="enter('-8232178899610643805');" onmouseout="out('-8232178899610643805');" style="">2143              createdBy.setIsVisible(false);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2144          }                                                                                                         </span>
<span class="1393544913931451876" onmouseenter="enter('1393544913931451876');" onmouseout="out('1393544913931451876');" style="">2145          Field updatedBy = entityForm.findField(&quot;auditable.updatedBy&quot;);                                            </span>
<span class="362865388069983596" onmouseenter="enter('362865388069983596');" onmouseout="out('362865388069983596');" style="">2146          if (updatedBy != null &amp;&amp; updatedBy.getValue() != null) {                                                  </span>
<span class="-892302887107162271" onmouseenter="enter('-892302887107162271');" onmouseout="out('-892302887107162271');" style="">2147              addAuditableDisplayField(entityForm, updatedBy);                                                      </span>
<span  style="">2148                                                                                                                    </span>
<span class="6398063041947851488" onmouseenter="enter('6398063041947851488');" onmouseout="out('6398063041947851488');" style="">2149              updatedBy.setIsVisible(false);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2150          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2151      }                                                                                                             </span>
<span  style="">2152                                                                                                                    </span>
<span class="4984267825623541739" onmouseenter="enter('4984267825623541739');" onmouseout="out('4984267825623541739');" style="">2153      private void addAuditableDisplayField(EntityForm entityForm, Field userField) {                               </span>
<span class="-4635466229336929139" onmouseenter="enter('-4635466229336929139');" onmouseout="out('-4635466229336929139');" style="">2154          Field displayField = buildAuditableDisplayField(userField);                                               </span>
<span  style="">2155                                                                                                                    </span>
<span class="-3510960703864117903" onmouseenter="enter('-3510960703864117903');" onmouseout="out('-3510960703864117903');" style="">2156          AdminUser user = adminUserDao.readAdminUserById(Long.parseLong(userField.getValue()));                    </span>
<span class="-2749914300638269457" onmouseenter="enter('-2749914300638269457');" onmouseout="out('-2749914300638269457');" style="">2157          String userName = user == null ? null : user.getName();                                                   </span>
<span class="-519467923242361473" onmouseenter="enter('-519467923242361473');" onmouseout="out('-519467923242361473');" style="">2158          displayField.setValue(userName);                                                                          </span>
<span  style="">2159                                                                                                                    </span>
<span class="2796866146572271884" onmouseenter="enter('2796866146572271884');" onmouseout="out('2796866146572271884');" style="">2160          FieldGroup auditGroup = entityForm.findGroup(&quot;AdminAuditable_Audit&quot;);                                     </span>
<span class="442119087406556402" onmouseenter="enter('442119087406556402');" onmouseout="out('442119087406556402');" style="">2161          if (auditGroup != null) {                                                                                 </span>
<span class="2790071812155889083" onmouseenter="enter('2790071812155889083');" onmouseout="out('2790071812155889083');" style="">2162              auditGroup.addField(displayField);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2163          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2164      }                                                                                                             </span>
<span  style="">2165                                                                                                                    </span>
<span class="-898012728924165157" onmouseenter="enter('-898012728924165157');" onmouseout="out('-898012728924165157');" style="">2166      private Field buildAuditableDisplayField(Field auditableField) {                                              </span>
<span class="7586031541837577475" onmouseenter="enter('7586031541837577475');" onmouseout="out('7586031541837577475');" style="">2167          return new Field().withFieldType(SupportedFieldType.STRING.toString())                                    </span>
<span class="-5983163062967947616" onmouseenter="enter('-5983163062967947616');" onmouseout="out('-5983163062967947616');" style="">2168                  .withName(auditableField.getName() + &quot;Display&quot;)                                                   </span>
<span class="-3810520855500417343" onmouseenter="enter('-3810520855500417343');" onmouseout="out('-3810520855500417343');" style="">2169                  .withFriendlyName(auditableField.getFriendlyName())                                               </span>
<span class="-2087540063707551713" onmouseenter="enter('-2087540063707551713');" onmouseout="out('-2087540063707551713');" style="">2170                  .withOrder(auditableField.getOrder())                                                             </span>
<span class="3252055162848788175" onmouseenter="enter('3252055162848788175');" onmouseout="out('3252055162848788175');" style="">2171                  .withOwningEntityClass(auditableField.getOwningEntityClass())                                     </span>
<span class="8052491048417023702" onmouseenter="enter('8052491048417023702');" onmouseout="out('8052491048417023702');" style="">2172                  .withReadOnly(true);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2173      }                                                                                                             </span>
<span  style="">2174                                                                                                                    </span>
<span class="2512746595428590302" onmouseenter="enter('2512746595428590302');" onmouseout="out('2512746595428590302');" style="">2175      protected String getCurrentTabName(Map&lt;String, String&gt; pathVars, ClassMetadata cmd) {                         </span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style="">2176          String tabName = pathVars.get(&quot;tabName&quot;);                                                                 </span>
<span class="620358619967646231" onmouseenter="enter('620358619967646231');" onmouseout="out('620358619967646231');" style="">2177          if (StringUtils.isBlank(tabName)) {                                                                       </span>
<span class="-8386812650765964886" onmouseenter="enter('-8386812650765964886');" onmouseout="out('-8386812650765964886');" style="">2178              TabMetadata firstTab = cmd.getFirstTab();                                                             </span>
<span class="5997097813726693180" onmouseenter="enter('5997097813726693180');" onmouseout="out('5997097813726693180');" style="">2179              return firstTab != null ? firstTab.getTabName() : &quot;General&quot;;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2180          }                                                                                                         </span>
<span class="-6789109484485831180" onmouseenter="enter('-6789109484485831180');" onmouseout="out('-6789109484485831180');" style="">2181          return tabName;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2182      }                                                                                                             </span>
<span  style="">2183                                                                                                                    </span>







<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">2184      // *****************************************                                                                  </span>
<span class="2492884656402841956" onmouseenter="enter('2492884656402841956');" onmouseout="out('2492884656402841956');" style="">2185      // Typed Entity Helper Methods                                                                                </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">2186      // *****************************************                                                                  </span>
<span  style="">2187                                                                                                                    </span>
<span class="709722161552159597" onmouseenter="enter('709722161552159597');" onmouseout="out('709722161552159597');" style="">2188      protected void setTypedEntityModelAttributes(HttpServletRequest request, Model model) {                       </span>
<span class="2572860224956804545" onmouseenter="enter('2572860224956804545');" onmouseout="out('2572860224956804545');" style="">2189          // Check if this is a typed entity                                                                        </span>
<span class="-601784761218487618" onmouseenter="enter('-601784761218487618');" onmouseout="out('-601784761218487618');" style="">2190          AdminSection typedEntitySection = (AdminSection) request.getAttribute(&quot;typedEntitySection&quot;);              </span>
<span class="2356861889771822774" onmouseenter="enter('2356861889771822774');" onmouseout="out('2356861889771822774');" style="">2191          if (typedEntitySection != null) {                                                                         </span>
<span class="-7054855399164801351" onmouseenter="enter('-7054855399164801351');" onmouseout="out('-7054855399164801351');" style="">2192              // Update the friendly name for this Entity Type                                                      </span>
<span class="-8436584596314077038" onmouseenter="enter('-8436584596314077038');" onmouseout="out('-8436584596314077038');" style="">2193              model.addAttribute(&quot;entityFriendlyName&quot;, typedEntitySection.getName());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2194          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2195      }                                                                                                             </span>
<span  style="">2196                                                                                                                    </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">2197      // *********************************                                                                          </span>
<span class="5570644305110686760" onmouseenter="enter('5570644305110686760');" onmouseout="out('5570644305110686760');" style="">2198      // ADDITIONAL SPRING-BOUND METHODS *                                                                          </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">2199      // *********************************                                                                          </span>
<span  style="">2200                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2201      /**                                                                                                           </span>
<span class="-6771709729688841784" onmouseenter="enter('-6771709729688841784');" onmouseout="out('-6771709729688841784');" style="">2202       * Invoked on every request to provide the ability to register specific binders for Spring&#x27;s binding process. </span>
<span class="2498077318751920180" onmouseenter="enter('2498077318751920180');" onmouseout="out('2498077318751920180');" style=""><abbr title="2203       * By default, we register a binder that treats empty Strings as null and a Boolean editor that supports either true">2203       * By default, we register a binder that treats empty Strings as null and a Boolean editor that supports eitheðŸ”µ</abbr></span>
<span class="4465303089468973962" onmouseenter="enter('4465303089468973962');" onmouseout="out('4465303089468973962');" style="">2204       * or false. If the value is passed in as null, it will treat it as false.                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2205       *                                                                                                            </span>
<span class="-3898462538136412996" onmouseenter="enter('-3898462538136412996');" onmouseout="out('-3898462538136412996');" style="">2206       * @param binder                                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2207       */                                                                                                           </span>
<span class="2978104519843175555" onmouseenter="enter('2978104519843175555');" onmouseout="out('2978104519843175555');" style="">2208      @InitBinder                                                                                                   </span>
<span class="4179572271848089300" onmouseenter="enter('4179572271848089300');" onmouseout="out('4179572271848089300');" style="">2209      public void initBinder(WebDataBinder binder) {                                                                </span>
<span class="3888201586857511470" onmouseenter="enter('3888201586857511470');" onmouseout="out('3888201586857511470');" style="">2210          binder.registerCustomEditor(String.class, new StringTrimmerEditor(true));                                 </span>
<span class="-4458929942740752488" onmouseenter="enter('-4458929942740752488');" onmouseout="out('-4458929942740752488');" style="">2211          binder.registerCustomEditor(Boolean.class, new NonNullBooleanEditor());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2212      }                                                                                                             </span>
<span  style="">2213                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2214  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            